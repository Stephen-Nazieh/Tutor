;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="e1a35289-7856-17cb-4268-536448c0e0b5")}catch(e){}}();
module.exports=[80160,a=>{"use strict";var b=a.i(260576),c=a.i(52028),d=a.i(113098),e=a.i(88684),f=a.i(724403),g=a.i(741510),h=a.i(147779),i=a.i(141617),j=a.i(822133),k=a.i(844194),l=a.i(342621),m=a.i(856187),n=a.i(892094),o=a.i(324666),p=a.i(618349),q=a.i(121538),r=a.i(620645),s=a.i(226886);function t(){let{data:a,isLoading:t,error:u,refetch:v}=function(){let[a,b]=(0,g.useState)(null),[c,d]=(0,g.useState)(!0),[e,f]=(0,g.useState)(null),h=(0,g.useCallback)(async()=>{d(!0),f(null);try{let a=await fetch("/api/parent/dashboard"),c=await a.json();if(!a.ok)throw Error(c.error||"Failed to load parent dashboard");if(c.success&&c.data)b(c.data);else throw Error("Invalid response format")}catch(a){f(a instanceof Error?a.message:"An error occurred"),b(null)}finally{d(!1)}},[]);return(0,g.useEffect)(()=>{h()},[h]),{data:a,isLoading:c,error:e,refetch:h}}();if(t)return(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-blue-600 border-t-transparent rounded-full"})});if(u)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[(0,b.jsx)("p",{className:"text-red-600",children:u}),(0,b.jsx)(e.Button,{onClick:()=>v(),variant:"outline",children:"Retry"})]});if(!a)return(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("p",{className:"text-gray-500",children:"No data available"})});let w=a.stats.unreadNotifications,x=a.children.length>0?Math.round(a.children.reduce((a,b)=>a+b.progress,0)/a.children.length):0,y=a.children.filter(a=>a.assignmentsDue>0||a.progress<40),z=Math.max(0,a.financialSummary.monthlyBudget-a.financialSummary.spentThisMonth),A=a.financialSummary.monthlyBudget>0?Math.round(a.financialSummary.spentThisMonth/a.financialSummary.monthlyBudget*100):0;return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",a.parentName,"!"]}),(0,b.jsxs)("p",{className:"text-gray-500 mt-1",children:["You have ",a.children.length," children enrolled. Here's what's happening today."]})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsx)(c.default,{href:"/parent/notifications",children:(0,b.jsxs)(e.Button,{variant:"outline",className:"relative",children:[(0,b.jsx)(o.Bell,{className:"h-4 w-4 mr-2"}),"Notifications",w>0&&(0,b.jsx)("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:w})]})})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Children"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:a.children.length})]}),(0,b.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,b.jsx)(h.Users,{className:"h-5 w-5 text-blue-600"})})]})})}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Upcoming Classes"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:a.children.reduce((a,b)=>a+b.upcomingClasses,0)})]}),(0,b.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,b.jsx)(i.Calendar,{className:"h-5 w-5 text-green-600"})})]})})}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Assignments Due"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:a.children.reduce((a,b)=>a+b.assignmentsDue,0)})]}),(0,b.jsx)("div",{className:"p-3 bg-yellow-100 rounded-full",children:(0,b.jsx)(l.BookOpen,{className:"h-5 w-5 text-yellow-600"})})]})})}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Monthly Spending"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:["¥",a.financialSummary.spentThisMonth]})]}),(0,b.jsx)("div",{className:"p-3 bg-purple-100 rounded-full",children:(0,b.jsx)(j.CreditCard,{className:"h-5 w-5 text-purple-600"})})]})})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,b.jsx)(d.Card,{className:"border-blue-200 bg-blue-50/50",children:(0,b.jsxs)(d.CardContent,{className:"p-5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Learning Health"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-blue-900",children:[x,"%"]}),(0,b.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"Average progress across all children"})]}),(0,b.jsx)(s.Sparkles,{className:"h-5 w-5 text-blue-700"})]}),(0,b.jsx)(f.Progress,{value:x,className:"h-2 mt-3"})]})}),(0,b.jsx)(d.Card,{className:"border-amber-200 bg-amber-50/60",children:(0,b.jsx)(d.CardContent,{className:"p-5",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-amber-700 font-medium",children:"Attention Needed"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-amber-900",children:y.length}),(0,b.jsx)("p",{className:"text-xs text-amber-700 mt-1",children:"Children with overdue work or low progress"})]}),(0,b.jsx)(q.AlertTriangle,{className:"h-5 w-5 text-amber-700"})]})})}),(0,b.jsx)(d.Card,{className:"border-emerald-200 bg-emerald-50/60",children:(0,b.jsxs)(d.CardContent,{className:"p-5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-emerald-700 font-medium",children:"Budget Balance"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-emerald-900",children:["¥",z]}),(0,b.jsxs)("p",{className:"text-xs text-emerald-700 mt-1",children:["Month usage ",A,"%"]})]}),(0,b.jsx)(r.Wallet,{className:"h-5 w-5 text-emerald-700"})]}),(0,b.jsx)(f.Progress,{value:Math.min(100,A),className:"h-2 mt-3"})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"My Children"}),(0,b.jsx)(c.default,{href:"/parent/children",children:(0,b.jsxs)(e.Button,{variant:"ghost",size:"sm",children:["View All",(0,b.jsx)(n.ChevronRight,{className:"h-4 w-4 ml-1"})]})})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.children.map(a=>(0,b.jsx)(d.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsx)(d.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold",children:a.avatar}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.grade}),(0,b.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Progress"}),(0,b.jsxs)("span",{className:"font-medium",children:[a.progress,"%"]})]}),(0,b.jsx)(f.Progress,{value:a.progress,className:"h-2"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,b.jsx)(i.Calendar,{className:"h-4 w-4"}),a.upcomingClasses," classes"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,b.jsx)(l.BookOpen,{className:"h-4 w-4"}),a.assignmentsDue," assignments"]})]}),a.recentAchievement&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-600 bg-green-50 p-2 rounded",children:[(0,b.jsx)(p.Award,{className:"h-4 w-4"}),a.recentAchievement]})]}),(0,b.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,b.jsx)(c.default,{href:`/parent/students/${a.id}`,children:(0,b.jsx)(e.Button,{size:"sm",variant:"outline",children:"View Progress"})}),(0,b.jsx)(c.default,{href:"/parent/classes",children:(0,b.jsx)(e.Button,{size:"sm",variant:"outline",children:"Schedule"})})]})]})]})})},a.id))}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Recent Activity"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:a.recentActivity.map(a=>(0,b.jsxs)("div",{className:"flex items-start gap-3 pb-4 border-b last:border-0 last:pb-0",children:[(0,b.jsxs)("div",{className:`
                      p-2 rounded-full
                      ${"class_completed"===a.type?"bg-green-100 text-green-600":""}
                      ${"assignment_submitted"===a.type?"bg-blue-100 text-blue-600":""}
                      ${"achievement_earned"===a.type?"bg-yellow-100 text-yellow-600":""}
                      ${"message"===a.type?"bg-purple-100 text-purple-600":""}
                      ${"activity"===a.type?"bg-gray-100 text-gray-600":""}
                      ${!["class_completed","assignment_submitted","achievement_earned","message","activity"].includes(a.type)?"bg-gray-100 text-gray-600":""}
                    `,children:["class_completed"===a.type&&(0,b.jsx)(i.Calendar,{className:"h-4 w-4"}),"assignment_submitted"===a.type&&(0,b.jsx)(l.BookOpen,{className:"h-4 w-4"}),"achievement_earned"===a.type&&(0,b.jsx)(p.Award,{className:"h-4 w-4"}),"message"===a.type&&(0,b.jsx)(m.MessageSquare,{className:"h-4 w-4"}),("activity"===a.type||!["class_completed","assignment_submitted","achievement_earned","message"].includes(a.type))&&(0,b.jsx)(k.TrendingUp,{className:"h-4 w-4"})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm",children:a.description}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.time})]})]},a.id))})})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Action Queue"})}),(0,b.jsx)(d.CardContent,{className:"space-y-3",children:0===y.length?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No urgent items right now."}):y.map(a=>(0,b.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-3",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-amber-900",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-amber-800 mt-1",children:a.assignmentsDue>0?`${a.assignmentsDue} assignments due`:`Progress is ${a.progress}%`}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(c.default,{href:`/parent/students/${a.id}`,children:(0,b.jsx)(e.Button,{size:"sm",variant:"outline",children:"Open Student View"})})})]},a.id))})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(d.CardTitle,{children:"Upcoming Payments"}),(0,b.jsx)(c.default,{href:"/parent/payments",children:(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",children:"View All"})})]})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"space-y-4",children:a.financialSummary.upcomingPayments.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.description}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Due ",a.dueDate]})]}),(0,b.jsxs)("span",{className:"font-semibold",children:["¥",a.amount]})]},a.id))}),(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Total Due"}),(0,b.jsxs)("span",{className:"font-bold text-lg",children:["¥",a.financialSummary.upcomingPayments.reduce((a,b)=>a+b.amount,0)]})]}),(0,b.jsxs)(e.Button,{className:"w-full mt-4",children:[(0,b.jsx)(j.CreditCard,{className:"h-4 w-4 mr-2"}),"Make Payment"]})]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Monthly Budget"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Spent"}),(0,b.jsxs)("span",{className:"font-medium",children:["¥",a.financialSummary.spentThisMonth," / ¥",a.financialSummary.monthlyBudget]})]}),(0,b.jsx)(f.Progress,{value:a.financialSummary.spentThisMonth/a.financialSummary.monthlyBudget*100,className:"h-2"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Remaining"}),(0,b.jsxs)("p",{className:"font-semibold text-green-600",children:["¥",a.financialSummary.monthlyBudget-a.financialSummary.spentThisMonth]})]}),(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Budget"}),(0,b.jsxs)("p",{className:"font-semibold",children:["¥",a.financialSummary.monthlyBudget]})]})]})]})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Quick Actions"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-2",children:[(0,b.jsx)(c.default,{href:"/parent/classes/book",children:(0,b.jsxs)(e.Button,{variant:"outline",className:"w-full justify-start",children:[(0,b.jsx)(i.Calendar,{className:"h-4 w-4 mr-2"}),"Book New Class"]})}),(0,b.jsx)(c.default,{href:"/parent/messages",children:(0,b.jsxs)(e.Button,{variant:"outline",className:"w-full justify-start",children:[(0,b.jsx)(m.MessageSquare,{className:"h-4 w-4 mr-2"}),"Message Tutor"]})}),(0,b.jsx)(c.default,{href:"/parent/progress",children:(0,b.jsxs)(e.Button,{variant:"outline",className:"w-full justify-start",children:[(0,b.jsx)(k.TrendingUp,{className:"h-4 w-4 mr-2"}),"View Progress Reports"]})})]})]})]})]})]})}a.s(["default",()=>t],80160)}];

//# debugId=e1a35289-7856-17cb-4268-536448c0e0b5
//# sourceMappingURL=b1c00_TutorMekimi_tutorme-app_src_app_%5Blocale%5D_parent_dashboard_page_tsx_31378aff._.js.map