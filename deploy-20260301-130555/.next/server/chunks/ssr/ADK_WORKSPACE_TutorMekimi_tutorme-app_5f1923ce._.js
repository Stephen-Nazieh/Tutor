;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="52b4ea92-e1a4-b5c1-d4c2-dbf2679dfc6b")}catch(e){}}();
module.exports=[113098,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(494176);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},333340,a=>{"use strict";var b=a.i(260576),c=a.i(453716),d=a.i(494176);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},479680,a=>{"use strict";let b=(0,a.i(293357).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],479680)},141617,a=>{"use strict";let b=(0,a.i(293357).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],141617)},748151,a=>{"use strict";let b=(0,a.i(293357).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],748151)},143650,a=>{"use strict";let b=(0,a.i(293357).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],143650)},118459,a=>{"use strict";let b=(0,a.i(293357).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);a.s(["Info",()=>b],118459)},207587,a=>{"use strict";let b=(0,a.i(293357).default)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);a.s(["CheckCheck",()=>b],207587)},258479,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(113098),e=a.i(88684),f=a.i(333340),g=a.i(324666),h=a.i(748151),i=a.i(141617),j=a.i(856187),k=a.i(147779),l=a.i(858901),m=a.i(143650),n=a.i(207587),o=a.i(479680),p=a.i(118459),q=a.i(52028),r=a.i(846438);function s(){let[a,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(0);(0,c.useEffect)(()=>{x()},[]);let x=async()=>{try{let a=await fetch("/api/notifications",{credentials:"include"});if(a.ok){let b=await a.json();s(b.notifications||[]),w(b.unreadCount||0)}else r.toast.error("Failed to load notifications")}catch{r.toast.error("Failed to load notifications")}finally{u(!1)}},y=async()=>{try{(await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({markAll:!0})})).ok&&(s(a=>a.map(a=>({...a,read:!0,readAt:new Date().toISOString()}))),w(0),r.toast.success("Marked all as read"))}catch{r.toast.error("Failed to mark notifications")}},z=async a=>{try{(await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notificationIds:[a]})})).ok&&(s(b=>b.map(b=>b.id===a?{...b,read:!0,readAt:new Date().toISOString()}:b)),w(a=>Math.max(0,a-1)))}catch{r.toast.error("Failed to mark as read")}},A=async a=>{try{(await fetch(`/api/notifications/${a}`,{method:"DELETE",credentials:"include"})).ok&&(s(b=>b.filter(b=>b.id!==a)),r.toast.success("Notification deleted"))}catch{r.toast.error("Failed to delete")}},B=async()=>{try{let a=await fetch("/api/notifications",{method:"DELETE",credentials:"include"});if(a.ok){let b=await a.json();x(),r.toast.success(`${b.deleted} old notifications cleaned up`)}}catch{r.toast.error("Failed to clean up")}};return t?(0,b.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-blue-600"})})}):(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(g.Bell,{className:"h-6 w-6"}),"Notifications",v>0&&(0,b.jsxs)(f.Badge,{className:"bg-red-500",children:[v," new"]})]}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Stay updated with your classes and students"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[v>0&&(0,b.jsxs)(e.Button,{variant:"outline",onClick:y,children:[(0,b.jsx)(n.CheckCheck,{className:"h-4 w-4 mr-2"}),"Mark all read"]}),(0,b.jsxs)(e.Button,{variant:"ghost",onClick:B,children:[(0,b.jsx)(m.Trash2,{className:"h-4 w-4 mr-2"}),"Clean up old"]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Recent Notifications"}),(0,b.jsxs)(d.CardDescription,{children:["You have ",v," unread notifications"]})]}),(0,b.jsx)(d.CardContent,{className:"space-y-4",children:0===a.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(g.Bell,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500",children:"No notifications yet"}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Notifications will appear here when students interact with your classes"})]}):a.map(a=>{let c,d,f,n,o,r=(0,b.jsxs)("div",{className:`flex items-start gap-4 p-4 rounded-lg border transition-colors ${a.read?"bg-white":"bg-blue-50/50 border-blue-100"}`,children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:(a=>{switch(a){case"class":return(0,b.jsx)(i.Calendar,{className:"h-5 w-5 text-blue-500"});case"message":return(0,b.jsx)(j.MessageSquare,{className:"h-5 w-5 text-green-500"});case"enrollment":return(0,b.jsx)(k.Users,{className:"h-5 w-5 text-purple-500"});case"payment":return(0,b.jsx)(l.DollarSign,{className:"h-5 w-5 text-amber-500"});case"reminder":return(0,b.jsx)(g.Bell,{className:"h-5 w-5 text-orange-500"});default:return(0,b.jsx)(p.Info,{className:"h-5 w-5 text-gray-500"})}})(a.type)}),(0,b.jsx)("div",{className:"flex-1 min-w-0",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"font-medium text-gray-900",children:[a.title,!a.read&&(0,b.jsx)("span",{className:"ml-2 w-2 h-2 bg-blue-500 rounded-full inline-block"})]}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:a.message}),(0,b.jsx)("p",{className:"text-gray-400 text-xs mt-2",children:(c=new Date(a.createdAt),f=Math.floor((d=new Date().getTime()-c.getTime())/6e4),n=Math.floor(d/36e5),o=Math.floor(d/864e5),f<1?"Just now":f<60?`${f}m ago`:n<24?`${n}h ago`:o<7?`${o}d ago`:c.toLocaleDateString())})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[!a.read&&(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>z(a.id),title:"Mark as read",children:(0,b.jsx)(h.CheckCircle2,{className:"h-4 w-4 text-green-500"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>A(a.id),title:"Delete",children:(0,b.jsx)(m.Trash2,{className:"h-4 w-4 text-red-500"})})]})]})})]});return a.actionUrl?(0,b.jsx)(q.default,{href:a.actionUrl,onClick:()=>!a.read&&z(a.id),className:"block cursor-pointer",children:r},a.id):(0,b.jsx)("div",{children:r},a.id)})})]})]})}a.s(["default",()=>s])}];

//# debugId=52b4ea92-e1a4-b5c1-d4c2-dbf2679dfc6b
//# sourceMappingURL=ADK_WORKSPACE_TutorMekimi_tutorme-app_5f1923ce._.js.map