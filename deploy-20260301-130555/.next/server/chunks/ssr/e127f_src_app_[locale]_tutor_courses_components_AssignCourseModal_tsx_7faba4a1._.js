;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="3664c2c7-ab26-f913-30a1-b41bd19ba368")}catch(e){}}();
module.exports=[884225,472738,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(263805),e=a.i(88684),f=a.i(206209),g=a.i(529004),h=a.i(333340),i=a.i(504654),j=a.i(185407),k=a.i(342621),l=a.i(147779),m=a.i(121538),n=a.i(748151),o=a.i(294532),p=a.i(615443),q=a.i(946685),r=a.i(987386),s=a.i(479680),t=a.i(118459),u=a.i(494176),v=a.i(846438);function w(a){return{id:a.id,name:a.name,description:a.description??void 0,subject:a.subject,isPublished:a.isPublished,createdAt:a.createdAt??"",updatedAt:a.updatedAt??"",assignments:{total:a.variants?.length??0,active:a.variants?.length??0,paused:0,completed:0},totalStudents:a._count?.enrollments??0,stats:{moduleCount:a._count?.modules??0,lessonCount:a._count?.lessons??0,quizCount:0},variants:a.variants??[]}}let x={async getTutorCourses(){let a=await fetch("/api/tutor/courses",{credentials:"include"});if(!a.ok)throw Error("Failed to load courses");let b=await a.json().catch(()=>({}));return(Array.isArray(b.courses)?b.courses:[]).map(w)},getCourseAssignments:async a=>[],async createAssignment(a){throw Error("Assignment API not implemented")},async deleteAssignment(a){throw Error("Assignment API not implemented")},async updateAssignmentStatus(a,b){throw Error("Assignment API not implemented")},async previewAssignment(a,b){throw Error("Preview API not implemented")}};function y(){let[a,b]=(0,c.useState)([]),[d,e]=(0,c.useState)(!1),[f,g]=(0,c.useState)(null),h=(0,c.useCallback)(async()=>{e(!0),g(null);try{let a=await x.getTutorCourses();b(a)}catch{g("Failed to load courses"),v.toast.error("Failed to load courses")}finally{e(!1)}},[]);return(0,c.useEffect)(()=>{h()},[h]),{courses:a,loading:d,error:f,refetch:h}}function z(){let[a,b]=(0,c.useState)(null),[d,e]=(0,c.useState)(!1);return{preview:a,loading:d,generatePreview:(0,c.useCallback)(async(a,c)=>{e(!0);try{let d=await x.previewAssignment(a,c);return b(d),d}catch{throw v.toast.error("Failed to generate preview"),Error("Failed to generate preview")}finally{e(!1)}},[]),clearPreview:(0,c.useCallback)(()=>{b(null)},[])}}a.s(["useAssignmentPreview",()=>z,"useTutorCourses",()=>y],472738);let A={beginner:"bg-green-100 text-green-700 border-green-200",intermediate:"bg-blue-100 text-blue-700 border-blue-200",advanced:"bg-purple-100 text-purple-700 border-purple-200"},B={beginner:"Beginner",intermediate:"Intermediate",advanced:"Advanced"};function C({isOpen:a,onClose:v,onAssign:w,courses:x,batches:y,preselectedCourseId:C,preselectedBatchId:D}){let[E,F]=(0,c.useState)(C||""),[G,H]=(0,c.useState)(D||""),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)("select"),{preview:M,loading:N,generatePreview:O,clearPreview:P}=z(),Q=x.find(a=>a.id===E),R=y.find(a=>a.id===G);(0,c.useEffect)(()=>{a&&(F(C||""),H(D||""),L("select"),P())},[a,C,D,P]),(0,c.useEffect)(()=>{E&&G&&"preview"===K&&O(E,G)},[E,G,K,O]);let S=Q&&R?function(a,b){if(!a||"all"===a)return null;if(a!==b){let c=["beginner","intermediate","advanced"];return c.indexOf(a)>c.indexOf(b)?`Course is ${a} but group is ${b}. Students may find content challenging.`:`Course is ${a} but group is ${b}. Content may be too basic.`}return null}(void 0,R.difficulty):null,T=async()=>{if(E&&G){J(!0);try{await w(E,G),v()}finally{J(!1)}}},U=E&&G;return(0,b.jsx)(d.Dialog,{open:a,onOpenChange:v,children:(0,b.jsxs)(d.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,b.jsx)(d.DialogHeader,{children:(0,b.jsxs)(d.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(k.BookOpen,{className:"h-5 w-5 text-blue-500"}),"select"===K?"Assign Course to Group":"Preview Assignment"]})}),"select"===K?(0,b.jsxs)("div",{className:"space-y-6 py-4 overflow-y-auto",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Select Course"}),(0,b.jsxs)(f.Select,{value:E,onValueChange:F,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full",children:(0,b.jsx)(f.SelectValue,{placeholder:"Choose a course..."})}),(0,b.jsx)(f.SelectContent,{children:x.map(a=>(0,b.jsx)(f.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:a.name}),(0,b.jsxs)(h.Badge,{variant:"secondary",className:"text-xs",children:[a.stats.moduleCount," modules"]}),a.assignments.total>0&&(0,b.jsxs)(h.Badge,{variant:"outline",className:"text-xs",children:["Assigned to ",a.assignments.total," groups"]})]})},a.id))})]}),Q&&(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:Q.description}),(0,b.jsxs)("div",{className:"flex gap-4 mt-2 text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:[Q.stats.moduleCount," modules"]}),(0,b.jsxs)("span",{children:[Q.stats.lessonCount," lessons"]}),(0,b.jsxs)("span",{children:[Q.stats.quizCount," quizzes"]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Select Group"}),(0,b.jsxs)(f.Select,{value:G,onValueChange:H,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full",children:(0,b.jsx)(f.SelectValue,{placeholder:"Choose a group..."})}),(0,b.jsx)(f.SelectContent,{children:y.map(a=>(0,b.jsx)(f.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:a.name}),(0,b.jsx)(h.Badge,{className:(0,u.cn)("text-xs",A[a.difficulty]),children:B[a.difficulty]}),(0,b.jsxs)(h.Badge,{variant:"outline",className:"text-xs",children:[a.enrollmentCount," students"]})]})},a.id))})]}),R&&(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(l.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("span",{className:"text-sm",children:[R.enrollmentCount," students enrolled"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.BarChart3,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm",children:"Difficulty: "}),(0,b.jsx)(h.Badge,{className:(0,u.cn)("text-xs",A[R.difficulty]),children:B[R.difficulty]})]})]})]}),S&&(0,b.jsxs)(i.Alert,{className:"bg-amber-50 border-amber-200",children:[(0,b.jsx)(m.AlertTriangle,{className:"h-4 w-4 text-amber-600"}),(0,b.jsx)(i.AlertDescription,{className:"text-amber-700 text-sm",children:S})]})]}):(0,b.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:Q?.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Course"})]}),(0,b.jsx)(r.ArrowRight,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:R?.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[B[R?.difficulty||"beginner"]," Group"]})]})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>L("select"),children:"Change"})]}),N?(0,b.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,b.jsx)(s.Loader2,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,b.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Generating preview..."})]}):M?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,b.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:M.resolution.totalModules}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Modules"})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600",children:M.resolution.visibleModules}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Visible"})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-amber-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:M.resolution.adaptedContent}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Adapted"})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-red-600",children:M.resolution.hiddenModules}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Hidden"})]})]}),M.hiddenItems.length>0&&(0,b.jsxs)(i.Alert,{variant:"destructive",className:"bg-red-50 border-red-200",children:[(0,b.jsx)(p.EyeOff,{className:"h-4 w-4 text-red-600"}),(0,b.jsxs)(i.AlertDescription,{children:[(0,b.jsxs)("p",{className:"font-medium text-red-700 mb-1",children:[M.hiddenItems.length," items will be hidden"]}),(0,b.jsx)("p",{className:"text-sm text-red-600",children:"These items are fixed to difficulty levels that don't match this group."})]})]}),M.adaptedItems.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(t.Info,{className:"h-4 w-4"}),"Content Adaptations"]}),(0,b.jsx)(j.ScrollArea,{className:"h-40 border rounded-lg p-3",children:(0,b.jsx)("div",{className:"space-y-2",children:M.adaptedItems.map((a,c)=>(0,b.jsxs)("div",{className:"text-sm p-2 bg-gray-50 rounded",children:[(0,b.jsx)("p",{className:"font-medium",children:a.title}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.field,": ",a.originalValue," â†’ ",a.adaptedValue]})]},c))})})]}),(0,b.jsxs)(i.Alert,{className:"bg-green-50 border-green-200",children:[(0,b.jsx)(n.CheckCircle2,{className:"h-4 w-4 text-green-600"}),(0,b.jsxs)(i.AlertDescription,{className:"text-green-700 text-sm",children:["Course content will automatically adapt to match the group's",(0,b.jsxs)("strong",{children:[" ",R?.difficulty]})," difficulty level."]})]})]}):null]}),(0,b.jsx)(d.DialogFooter,{className:"border-t pt-4",children:"select"===K?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:v,children:"Cancel"}),(0,b.jsxs)(e.Button,{onClick:()=>L("preview"),disabled:!U,className:"gap-2",children:[(0,b.jsx)(o.Eye,{className:"h-4 w-4"}),"Preview Assignment"]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>L("select"),children:"Back"}),(0,b.jsx)(e.Button,{onClick:T,disabled:I,className:"gap-2",children:I?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.Loader2,{className:"h-4 w-4 animate-spin"}),"Assigning..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.CheckCircle2,{className:"h-4 w-4"}),"Confirm Assignment"]})})]})})]})})}a.s(["AssignCourseModal",()=>C],884225)}];

//# debugId=3664c2c7-ab26-f913-30a1-b41bd19ba368
//# sourceMappingURL=e127f_src_app_%5Blocale%5D_tutor_courses_components_AssignCourseModal_tsx_7faba4a1._.js.map