;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="c752668b-7427-50fb-e41a-b5be7d9e9357")}catch(e){}}();
module.exports=[638987,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(454069),e=a.i(113098),f=a.i(88684),g=a.i(868606),h=a.i(164504),i=a.i(333340),j=a.i(981354),k=a.i(206209),l=a.i(962337),m=a.i(844194),n=a.i(147779),o=a.i(618349),p=a.i(414030),q=a.i(640132),r=a.i(946685),s=a.i(479680),t=a.i(458588),u=a.i(892094),v=a.i(209347),w=a.i(121538),x=a.i(141617),y=a.i(253583),z=a.i(361749),A=a.i(53286),B=a.i(136116),B=B,C=a.i(52028),D=a.i(846438),E=a.i(675500),F=a.i(724403),G=a.i(50730);function H({classId:a}){var d,g,h;let[j,k]=(0,c.useState)(!0),[l,o]=(0,c.useState)(null),[p,r]=(0,c.useState)(30);(0,c.useEffect)(()=>{a&&t()},[a,p]);let t=async()=>{k(!0);try{let b=await fetch(`/api/analytics/engagement/${a}?days=${p}`,{credentials:"include"});if(b.ok){let a=await b.json();a.success&&o(a.data)}else D.toast.error("Failed to load engagement data")}catch(a){console.error("Error fetching engagement:",a),D.toast.error("Error loading engagement metrics")}finally{k(!1)}},u=async()=>{try{let b=await fetch(`/api/reports/engagement/${a}?days=${p}`,{credentials:"include"});if(b.ok){let c=await b.blob(),d=window.URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=`engagement-report-${a}.xlsx`,e.click(),window.URL.revokeObjectURL(d),D.toast.success("Engagement report downloaded")}else D.toast.error("Failed to export engagement report")}catch(a){D.toast.error("Error exporting report")}};return j?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(s.Loader2,{className:"h-8 w-8 animate-spin text-blue-500"})}):l?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("select",{value:p,onChange:a=>r(Number(a.target.value)),className:"px-3 py-2 border rounded-md text-sm",children:[(0,b.jsx)("option",{value:7,children:"Last 7 days"}),(0,b.jsx)("option",{value:14,children:"Last 14 days"}),(0,b.jsx)("option",{value:30,children:"Last 30 days"}),(0,b.jsx)("option",{value:90,children:"Last 90 days"})]}),(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:[new Date(l.period.start).toLocaleDateString()," - ",new Date(l.period.end).toLocaleDateString()]})]}),(0,b.jsxs)(f.Button,{variant:"outline",className:"gap-2",onClick:u,children:[(0,b.jsx)(q.Download,{className:"h-4 w-4"}),"Export Excel"]})]}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("div",{className:"relative w-32 h-32",children:[(0,b.jsxs)("svg",{className:"w-32 h-32 transform -rotate-90",children:[(0,b.jsx)("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"12",fill:"transparent",className:"text-gray-200"}),(0,b.jsx)("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"12",fill:"transparent",strokeDasharray:`${l.overallEngagement/100*351.86} 351.86`,className:(d=l.overallEngagement)>=70?"bg-green-500":d>=50?"bg-yellow-500":"bg-red-500",style:{transition:"stroke-dasharray 0.5s ease"}})]}),(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,b.jsxs)("span",{className:`text-3xl font-bold ${(g=l.overallEngagement)>=70?"text-green-600":g>=50?"text-yellow-600":"text-red-600"}`,children:[l.overallEngagement,"%"]}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Overall"})]})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Class Engagement Score"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm mb-3",children:"Based on attendance, participation, assignments, quizzes, and discussions."}),(0,b.jsxs)(i.Badge,{className:l.overallEngagement>=70?"bg-green-100 text-green-700":l.overallEngagement>=50?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700",children:[(h=l.overallEngagement)>=70?"High":h>=50?"Medium":"Low"," Engagement"]})]})]})})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsx)(I,{title:"Attendance Rate",value:l.metrics.attendance,icon:x.Calendar,description:"Live session attendance"}),(0,b.jsx)(I,{title:"Participation",value:l.metrics.participation,icon:n.Users,description:"Chat & interaction activity"}),(0,b.jsx)(I,{title:"Assignment Completion",value:l.metrics.assignmentCompletion,icon:y.Activity,description:"Tasks & assignments submitted"}),(0,b.jsx)(I,{title:"Quiz Participation",value:l.metrics.quizParticipation,icon:m.TrendingUp,description:"Quizzes attempted"}),(0,b.jsx)(I,{title:"Discussion Activity",value:l.metrics.discussionActivity,icon:G.Clock,description:"Forum & discussion posts"}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(w.AlertTriangle,{className:"h-5 w-5 text-orange-500"}),(0,b.jsx)("span",{className:"font-medium",children:"Students At Risk"})]}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:l.studentsAtRisk.length}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Low engagement across metrics"})]})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Daily Engagement Trend"}),(0,b.jsx)(e.CardDescription,{children:"Engagement and attendance over the selected period"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"h-64 flex items-end gap-1",children:l.dailyTrend.map((a,c)=>{let d=Math.max(...l.dailyTrend.map(a=>a.engagement)),e=d>0?a.engagement/d*100:0;return(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[(0,b.jsx)("div",{className:"w-full bg-blue-500 rounded-t-sm opacity-80 group-hover:opacity-100 transition-opacity",style:{height:`${e}%`,minHeight:"4px"}}),(0,b.jsx)("span",{className:"text-[10px] text-gray-500 rotate-45 origin-left translate-y-2",children:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,b.jsxs)("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-10",children:[(0,b.jsxs)("div",{children:["Engagement: ",a.engagement,"%"]}),(0,b.jsxs)("div",{children:["Attendance: ",a.attendance,"%"]}),(0,b.jsx)("div",{children:new Date(a.date).toLocaleDateString()})]})]},c)})})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Activity Pattern by Hour"}),(0,b.jsx)(e.CardDescription,{children:"When students are most active during the day"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"h-48 flex items-end gap-1",children:l.hourlyPattern.map(a=>{let c=Math.max(...l.hourlyPattern.map(a=>a.activity)),d=c>0?a.activity/c*100:0;return(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[(0,b.jsx)("div",{className:"w-full bg-purple-500 rounded-t-sm opacity-70 group-hover:opacity-100 transition-opacity",style:{height:`${d}%`,minHeight:"4px"}}),a.hour%4==0&&(0,b.jsx)("span",{className:"text-[10px] text-gray-500",children:a.hour}),(0,b.jsxs)("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-10",children:[a.hour,":00 - Activity: ",a.activity,"%"]})]},a.hour)})})})]}),l.studentsAtRisk.length>0&&(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(w.AlertTriangle,{className:"h-5 w-5 text-orange-500"}),"Students At Risk"]}),(0,b.jsx)(e.CardDescription,{children:"Students with low engagement across multiple metrics"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:l.studentsAtRisk.map((a,c)=>(0,b.jsx)(i.Badge,{variant:"outline",className:"bg-orange-50 border-orange-200",children:a},c))})})]})]}):(0,b.jsx)(e.Card,{className:"py-12",children:(0,b.jsxs)(e.CardContent,{className:"text-center",children:[(0,b.jsx)(y.Activity,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-700",children:"No Data Available"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Engagement metrics could not be loaded for this class."})]})})}function I({title:a,value:c,icon:d,description:f}){return(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d,{className:"h-5 w-5 text-gray-500"}),(0,b.jsx)("span",{className:"font-medium text-sm",children:a})]}),(0,b.jsxs)("span",{className:`text-xl font-bold ${c>=70?"text-green-600":c>=50?"text-yellow-600":"text-red-600"}`,children:[c,"%"]})]}),(0,b.jsx)(F.Progress,{value:c,className:"h-2"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:f})]})})}function J(){let a=(0,d.useRouter)(),[F,G]=(0,c.useState)(!0),[I,J]=(0,c.useState)("overview"),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)([]),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)([]),[U,V]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{let[a,b]=await Promise.all([fetch("/api/tutor/classes",{credentials:"include"}),fetch("/api/tutor/courses",{credentials:"include"})]),c=[];if(a.ok){let b=((await a.json()).classes||[]).map(a=>({id:a.id,title:a.title,subject:a.subject,type:"class"}));c=[...c,...b]}if(b.ok){let a=((await b.json()).courses||[]).map(a=>({id:a.id,title:a.name,subject:a.subject,type:"course"}));c=[...c,...a]}T(c),c.length>0&&!U&&V(c[0].id)}catch(a){console.error("Error fetching classes:",a),D.toast.error("Failed to load classes")}})()},[]),(0,c.useEffect)(()=>{U?(async()=>{G(!0);try{let a=await fetch(`/api/reports/class/${U}`,{credentials:"include"});if(a.ok){let b=await a.json();b.success&&L(b.data)}let b=await fetch(`/api/analytics/class/${U}`,{credentials:"include"});if(b.ok){let a=await b.json();a.success&&a.data?.students&&N(a.data.students.map(a=>({id:a.id,name:a.name||`Student ${a.id.slice(-6)}`,averageScore:a.averageScore||0,completionRate:a.completionRate||0,cluster:a.cluster||"intermediate"})))}}catch(a){console.error("Error fetching report data:",a),D.toast.error("Failed to load report data")}finally{G(!1)}})():G(!1)},[U]);let W=async a=>{if(!U)return void D.toast.info("Please select a class first");R(!0);try{let b=await fetch(`/api/reports/class/${U}/export?format=${a}`,{credentials:"include"});if(b.ok){let c=await b.blob(),d=window.URL.createObjectURL(c),e=document.createElement("a");e.href=d;let f="excel"===a?"xlsx":a;e.download=`class-report-${U}.${f}`,e.click(),window.URL.revokeObjectURL(d),D.toast.success(`${a.toUpperCase()} report exported successfully`)}else{let a=await b.json();D.toast.error(a.error||"Failed to export report")}}catch(a){console.error("Export error:",a),D.toast.error("Error exporting report")}finally{R(!1)}},X=b=>{a.push(`/tutor/reports/${b}`)},Y=M.filter(a=>a.name.toLowerCase().includes(O.toLowerCase())),Z={classInfo:{id:U||"default",totalStudents:M.length||0,averageScore:M.length?Math.round(M.reduce((a,b)=>a+b.averageScore,0)/M.length):0},charts:{scoreDistribution:[{range:"0-59",count:M.filter(a=>a.averageScore<60).length},{range:"60-69",count:M.filter(a=>a.averageScore>=60&&a.averageScore<70).length},{range:"70-79",count:M.filter(a=>a.averageScore>=70&&a.averageScore<80).length},{range:"80-89",count:M.filter(a=>a.averageScore>=80&&a.averageScore<90).length},{range:"90-100",count:M.filter(a=>a.averageScore>=90).length}],clusterDistribution:[{name:"优秀",count:M.filter(a=>"advanced"===a.cluster).length,color:"#22c55e"},{name:"中等",count:M.filter(a=>"intermediate"===a.cluster).length,color:"#eab308"},{name:"需帮助",count:M.filter(a=>"struggling"===a.cluster).length,color:"#ef4444"}]},topStudents:M.sort((a,b)=>b.averageScore-a.averageScore).slice(0,5).map(a=>({id:a.id,name:a.name,averageScore:a.averageScore,completionRate:a.completionRate})),studentsNeedingAttention:M.filter(a=>a.averageScore<60||"struggling"===a.cluster).slice(0,5).map(a=>({id:a.id,name:a.name,averageScore:a.averageScore,issue:a.averageScore<60?"Low scores":"Needs support"})),summary:{totalStudents:M.length,averageScore:M.length?Math.round(M.reduce((a,b)=>a+b.averageScore,0)/M.length):0,advancedCount:M.filter(a=>"advanced"===a.cluster).length,intermediateCount:M.filter(a=>"intermediate"===a.cluster).length,strugglingCount:M.filter(a=>"struggling"===a.cluster).length}},$=K||Z,_=S.find(a=>a.id===U);return F&&0===S.length?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsx)(s.Loader2,{className:"h-8 w-8 animate-spin text-blue-500"})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(C.default,{href:"/tutor/dashboard",children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(p.ArrowLeft,{className:"h-5 w-5"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Reports & Analytics"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Track student performance and class progress"})]})]}),(0,b.jsxs)(l.DropdownMenu,{children:[(0,b.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",className:"gap-2",disabled:Q||!U,children:[Q?(0,b.jsx)(s.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(q.Download,{className:"h-4 w-4"}),"Export Report"]})}),(0,b.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(l.DropdownMenuItem,{onClick:()=>W("pdf"),className:"gap-2",children:[(0,b.jsx)(z.FileText,{className:"h-4 w-4 text-red-500"}),"Export as PDF"]}),(0,b.jsxs)(l.DropdownMenuItem,{onClick:()=>W("excel"),className:"gap-2",children:[(0,b.jsx)(A.FileSpreadsheet,{className:"h-4 w-4 text-green-500"}),"Export as Excel"]}),(0,b.jsxs)(l.DropdownMenuItem,{onClick:()=>W("csv"),className:"gap-2",children:[(0,b.jsx)(B.default,{className:"h-4 w-4 text-blue-500"}),"Export as CSV"]})]})]})]}),(0,b.jsx)(e.Card,{className:"mb-6",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(x.Calendar,{className:"h-5 w-5 text-gray-500"}),(0,b.jsx)("span",{className:"font-medium",children:"Select Class/Course:"})]}),(0,b.jsxs)(k.Select,{value:U,onValueChange:V,children:[(0,b.jsx)(k.SelectTrigger,{className:"w-full sm:w-[400px]",children:(0,b.jsx)(k.SelectValue,{placeholder:"Choose a class or course..."})}),(0,b.jsx)(k.SelectContent,{children:0===S.length?(0,b.jsx)(k.SelectItem,{value:"no-classes",disabled:!0,children:"No classes available"}):S.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Badge,{variant:"class"===a.type?"default":"secondary",className:"text-xs",children:"class"===a.type?"Class":"Course"}),(0,b.jsx)("span",{children:a.title}),(0,b.jsxs)("span",{className:"text-gray-500 text-sm",children:["(",a.subject,")"]})]})},a.id))})]}),_&&(0,b.jsx)(i.Badge,{variant:"outline",className:"text-sm",children:"class"===_.type?"Live Session":"Online Course"})]})})}),F?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(s.Loader2,{className:"h-8 w-8 animate-spin text-blue-500"})}):U?0===M.length?(0,b.jsx)(e.Card,{className:"py-12",children:(0,b.jsxs)(e.CardContent,{className:"text-center",children:[(0,b.jsx)(n.Users,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No Students Yet"}),(0,b.jsxs)("p",{className:"text-gray-500",children:["This ",_?.type||"class"," doesn't have any enrolled students yet."]})]})}):(0,b.jsxs)(g.Tabs,{value:I,onValueChange:J,children:[(0,b.jsxs)(g.TabsList,{className:"mb-6",children:[(0,b.jsxs)(g.TabsTrigger,{value:"overview",className:"gap-2",children:[(0,b.jsx)(r.BarChart3,{className:"h-4 w-4"}),"Class Overview"]}),(0,b.jsxs)(g.TabsTrigger,{value:"students",className:"gap-2",children:[(0,b.jsx)(n.Users,{className:"h-4 w-4"}),"All Students"]}),(0,b.jsxs)(g.TabsTrigger,{value:"engagement",className:"gap-2",children:[(0,b.jsx)(y.Activity,{className:"h-4 w-4"}),"Engagement"]})]}),(0,b.jsxs)(g.TabsContent,{value:"overview",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Students"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:$.summary.totalStudents})]}),(0,b.jsx)(n.Users,{className:"h-8 w-8 text-blue-500"})]})})}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Class Average"}),(0,b.jsxs)("p",{className:"text-3xl font-bold",children:[$.summary.averageScore,"%"]})]}),(0,b.jsx)(m.TrendingUp,{className:"h-8 w-8 text-green-500"})]})})}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Advanced"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-green-600",children:$.summary.advancedCount})]}),(0,b.jsx)(o.Award,{className:"h-8 w-8 text-green-500"})]})})}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Need Help"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-red-600",children:$.summary.strugglingCount})]}),(0,b.jsx)(w.AlertTriangle,{className:"h-8 w-8 text-red-500"})]})})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Score Distribution"}),(0,b.jsx)(e.CardDescription,{children:"Distribution of student scores across the class"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)(E.ScoreDistributionChart,{data:$.charts.scoreDistribution})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Performance Clusters"}),(0,b.jsx)(e.CardDescription,{children:"Student grouping by performance level"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:$.charts.clusterDistribution.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.color}}),(0,b.jsx)("span",{className:"flex-1",children:a.name}),(0,b.jsx)("span",{className:"font-bold",children:a.count}),(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:[$.summary.totalStudents>0?Math.round(a.count/$.summary.totalStudents*100):0,"%"]})]},a.name))})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Top Performers"}),(0,b.jsx)(e.CardDescription,{children:"Students with highest scores"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:$.topStudents.length>0?$.topStudents.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>X(a.id),children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"text-lg font-bold text-gray-400 w-6",children:["#",c+1]}),(0,b.jsx)(h.Avatar,{className:"h-10 w-10",children:(0,b.jsx)(h.AvatarFallback,{className:"bg-blue-100 text-blue-700",children:a.name.split(" ").map(a=>a[0]).join("")})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium block",children:a.name}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:[a.completionRate,"% completion"]})]})]}),(0,b.jsxs)(i.Badge,{variant:"default",className:"bg-green-100 text-green-700",children:[a.averageScore,"%"]})]},a.id)):(0,b.jsx)("p",{className:"text-center text-gray-500 py-4",children:"No students yet"})})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Needs Attention"}),(0,b.jsx)(e.CardDescription,{children:"Students who may need additional support"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:$.studentsNeedingAttention.length>0?$.studentsNeedingAttention.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>X(a.id),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.issue})]}),(0,b.jsxs)(i.Badge,{variant:"destructive",className:"bg-red-100 text-red-700 hover:bg-red-100",children:[a.averageScore,"%"]})]},a.id)):(0,b.jsx)("p",{className:"text-center text-gray-500 py-4",children:"All students are doing well!"})})})]})]})]}),(0,b.jsx)(g.TabsContent,{value:"students",className:"space-y-6",children:(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{children:"All Students"}),(0,b.jsx)(e.CardDescription,{children:"Click on a student to view detailed report"})]}),(0,b.jsxs)("div",{className:"relative w-64",children:[(0,b.jsx)(t.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(j.Input,{placeholder:"Search students...",value:O,onChange:a=>P(a.target.value),className:"pl-10"})]})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:Y.length>0?Y.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>X(a.id),children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.Avatar,{className:"h-12 w-12",children:(0,b.jsx)(h.AvatarFallback,{className:"bg-blue-100 text-blue-700 text-lg",children:a.name.split(" ").map(a=>a[0]).join("")})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-lg",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)(i.Badge,{className:(a=>{switch(a){case"advanced":return"bg-green-100 text-green-700 hover:bg-green-100";case"intermediate":return"bg-yellow-100 text-yellow-700 hover:bg-yellow-100";case"struggling":return"bg-red-100 text-red-700 hover:bg-red-100";default:return"bg-gray-100 text-gray-700 hover:bg-gray-100"}})(a.cluster),children:(a=>{switch(a){case"advanced":return"优秀";case"intermediate":return"中等";case"struggling":return"需帮助";default:return a}})(a.cluster)}),(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:[a.completionRate,"% completion"]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[a.averageScore,"%"]}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Average Score"})]}),(0,b.jsx)(u.ChevronRight,{className:"h-5 w-5 text-gray-400"})]})]},a.id)):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(v.GraduationCap,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-500",children:O?"No students match your search":"No students enrolled yet"})]})})})]})}),(0,b.jsx)(g.TabsContent,{value:"engagement",className:"space-y-6",children:(0,b.jsx)(H,{classId:U})})]}):(0,b.jsx)(e.Card,{className:"py-12",children:(0,b.jsxs)(e.CardContent,{className:"text-center",children:[(0,b.jsx)(v.GraduationCap,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No Class Selected"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Please select a class or course from the dropdown above to view reports."})]})})]})})}a.s(["default",()=>J],638987)}];

//# debugId=c752668b-7427-50fb-e41a-b5be7d9e9357
//# sourceMappingURL=b1c00_TutorMekimi_tutorme-app_src_app_%5Blocale%5D_tutor_reports_page_tsx_addc15af._.js.map