;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="3f39ed50-840e-e77b-9319-b71c3a533f8c")}catch(e){}}();
module.exports=[662911,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(454069),e=a.i(88684),f=a.i(113098),g=a.i(333340),h=a.i(724403),i=a.i(504654),j=a.i(846438),k=a.i(50730),l=a.i(619886),m=a.i(706562),n=a.i(892094),o=a.i(560467),p=a.i(815350),q=a.i(311514),r=a.i(479680),s=a.i(849639);function t({params:a}){let t=(0,d.useRouter)(),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(0),[K,L]=(0,c.useState)({}),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(0),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)([]),Y=(0,c.useRef)(null);(0,c.useEffect)(()=>{a.then(a=>v(a.id))},[a]);let Z=(0,c.useCallback)(async()=>{if(u)try{let a=await fetch(`/api/student/quizzes/${u}`);if(a.ok){let b=await a.json();D(b.quiz),F(b.questions),X(b.attempts),b.attempts.length>0&&!b.canAttempt&&(T(!0),V(b.attempts[0]))}else j.toast.error("Failed to load quiz")}catch(a){j.toast.error("An error occurred")}finally{x(!1)}},[u]);(0,c.useEffect)(()=>{Z()},[Z]),(0,c.useEffect)(()=>(Q&&null!==M&&M>0&&(Y.current=setInterval(()=>{N(a=>null===a||a<=1?(_(),0):a-1),P(a=>a+1)},1e3)),()=>{Y.current&&clearInterval(Y.current)}),[Q,M]);let $=async()=>{z(!0);try{let a=await fetch(`/api/student/quizzes/${u}/attempt`,{method:"POST"});if(a.ok){let b=await a.json();H(b.attemptId),N(b.timeRemaining),R(!0),J(0),L({})}else{let b=await a.json();j.toast.error(b.error||"Failed to start quiz")}}catch(a){j.toast.error("An error occurred")}finally{z(!1)}},_=async()=>{if(G){B(!0);try{let a=await fetch(`/api/student/quizzes/${u}/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({attemptId:G,answers:K,timeSpent:O})});if(a.ok){let b=await a.json();V(b.attempt),T(!0),R(!1),j.toast.success("Quiz submitted!")}else j.toast.error("Failed to submit quiz")}catch(a){j.toast.error("An error occurred")}finally{B(!1)}}},aa=(a,b)=>{L(c=>({...c,[a]:b}))},ab=a=>{let b=Math.floor(a/60);return`${b}:${(a%60).toString().padStart(2,"0")}`},ac=E[I],ad=E.length>0?(I+1)/E.length*100:0,ae=Object.keys(K).length;if(w)return(0,b.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,b.jsx)(r.Loader2,{className:"w-8 h-8 animate-spin"})});if(!C)return(0,b.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,b.jsx)("p",{children:"Quiz not found"})});if(S&&U){let a=U.percentage,c=C.passingScore?a>=C.passingScore:a>=70;return(0,b.jsx)("div",{className:"container mx-auto p-6 max-w-3xl",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-center",children:"Quiz Results"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:`text-6xl font-bold ${c?"text-green-500":"text-red-500"}`,children:[a,"%"]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:c?"Congratulations! You passed!":"Keep practicing! You'll do better next time."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-semibold",children:U.score}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Points Earned"})]}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-semibold",children:U.maxScore}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Points"})]}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-semibold",children:ab(O)}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Time Spent"})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Question Breakdown"}),U.questionResults?.map((a,c)=>(0,b.jsx)("div",{className:`p-3 rounded-lg border ${a.correct?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[a.correct?(0,b.jsx)(o.CheckCircle,{className:"w-5 h-5 text-green-500 flex-shrink-0"}):(0,b.jsx)(l.AlertCircle,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"font-medium",children:["Question ",c+1]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.pointsEarned," / ",a.pointsMax," points"]}),a.feedback&&(0,b.jsx)("p",{className:"text-sm mt-1",children:a.feedback}),a.explanation&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:a.explanation})]})]})},a.questionId))]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(e.Button,{variant:"outline",className:"flex-1",onClick:()=>t.push("/student/quizzes"),children:"Back to Quizzes"}),C.canAttempt&&(0,b.jsxs)(e.Button,{className:"flex-1",onClick:()=>window.location.reload(),children:[(0,b.jsx)(q.RotateCcw,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})]})]})})}return Q?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white border-b sticky top-0 z-10",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"font-semibold",children:C.title}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Question ",I+1," of ",E.length]}),(0,b.jsxs)("span",{children:[ae," answered"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[null!==M&&(0,b.jsxs)("div",{className:`flex items-center gap-2 font-mono text-lg ${M<60?"text-red-500":""}`,children:[(0,b.jsx)(k.Clock,{className:"w-5 h-5"}),ab(M)]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to submit? You cannot change your answers after.")&&_()},disabled:A,children:[A?(0,b.jsx)(r.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}):(0,b.jsx)(p.Send,{className:"w-4 h-4 mr-2"}),"Submit"]})]})]}),(0,b.jsx)(h.Progress,{value:ad,className:"mt-4"})]})}),(0,b.jsxs)("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:[ac&&(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(g.Badge,{variant:"outline",children:[ac.points," point",1!==ac.points?"s":""]}),ac.difficulty&&(0,b.jsx)(g.Badge,{variant:"secondary",children:ac.difficulty})]}),(0,b.jsx)(f.CardTitle,{className:"text-lg font-medium mt-2",children:ac.question})]}),(0,b.jsxs)(f.CardContent,{children:[("multiple_choice"===ac.type||"true_false"===ac.type)&&ac.options&&(0,b.jsx)("div",{className:"space-y-2",children:ac.options.map((a,c)=>(0,b.jsxs)("button",{onClick:()=>aa(ac.id,a),className:`w-full p-4 text-left rounded-lg border transition-all ${K[ac.id]===a?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,b.jsxs)("span",{className:"font-medium text-muted-foreground mr-3",children:[String.fromCharCode(65+c),"."]}),a]},c))}),"multi_select"===ac.type&&ac.options&&(0,b.jsx)("div",{className:"space-y-2",children:ac.options.map((a,c)=>{let d=K[ac.id]||[],e=d.includes(a);return(0,b.jsxs)("button",{onClick:()=>{let b=e?d.filter(b=>b!==a):[...d,a];aa(ac.id,b)},className:`w-full p-4 text-left rounded-lg border transition-all ${e?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,b.jsx)("span",{className:`inline-block w-5 h-5 border rounded mr-3 align-middle ${e?"bg-blue-500 border-blue-500":"border-gray-300"}`,children:e&&(0,b.jsx)(o.CheckCircle,{className:"w-4 h-4 text-white"})}),a]},c)})}),("short_answer"===ac.type||"essay"===ac.type)&&(0,b.jsx)("textarea",{value:K[ac.id]||"",onChange:a=>aa(ac.id,a.target.value),placeholder:"Type your answer here...",rows:"essay"===ac.type?8:3,className:"w-full p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"}),"fill_in_blank"===ac.type&&(0,b.jsx)("input",{type:"text",value:K[ac.id]||"",onChange:a=>aa(ac.id,a.target.value),placeholder:"Type your answer...",className:"w-full p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,b.jsxs)(e.Button,{variant:"outline",disabled:0===I,onClick:()=>J(a=>a-1),children:[(0,b.jsx)(m.ChevronLeft,{className:"w-4 h-4 mr-2"}),"Previous"]}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:E.map((a,c)=>(0,b.jsx)("button",{onClick:()=>J(c),className:`w-2.5 h-2.5 rounded-full ${c===I?"bg-blue-500":K[a.id]?"bg-green-400":"bg-gray-200"}`},a.id))}),(0,b.jsx)(e.Button,{variant:I===E.length-1?"default":"outline",onClick:()=>{I===E.length-1?confirm("Are you sure you want to submit?")&&_():J(a=>a+1)},children:I===E.length-1?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Send,{className:"w-4 h-4 mr-2"})," Submit"]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(b.Fragment,{children:["Next ",(0,b.jsx)(n.ChevronRight,{className:"w-4 h-4 ml-2"})]})})})]})]})]}):(0,b.jsx)("div",{className:"container mx-auto p-6 max-w-2xl",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-2xl",children:C.title})}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(g.Badge,{variant:"outline",children:C.type}),(0,b.jsxs)(g.Badge,{variant:"outline",children:[E.length," questions"]}),(0,b.jsxs)(g.Badge,{variant:"outline",children:[C.totalPoints," points"]}),C.timeLimit&&(0,b.jsxs)(g.Badge,{variant:"outline",children:[(0,b.jsx)(k.Clock,{className:"w-3 h-3 mr-1"}),C.timeLimit," minutes"]})]}),C.description&&(0,b.jsx)("p",{className:"text-muted-foreground",children:C.description}),(0,b.jsxs)(i.Alert,{children:[(0,b.jsx)(l.AlertCircle,{className:"w-4 h-4"}),(0,b.jsx)(i.AlertDescription,{children:C.timeLimit?`You have ${C.timeLimit} minutes to complete this quiz. The quiz will auto-submit when time runs out.`:"There is no time limit for this quiz. Take your time and answer carefully."})]}),W.length>0&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("h3",{className:"font-medium mb-2",children:"Previous Attempts"}),(0,b.jsx)("div",{className:"space-y-2",children:W.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("span",{children:["Attempt ",c+1]}),(0,b.jsxs)("span",{className:"font-medium",children:[a.score,"%"]})]},a.id))})]}),(0,b.jsxs)(e.Button,{size:"lg",className:"w-full",onClick:$,disabled:y,children:[y?(0,b.jsx)(r.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}):(0,b.jsx)(s.Play,{className:"w-4 h-4 mr-2"}),W.length>0?"Retake Quiz":"Start Quiz"]})]})]})})}a.s(["default",()=>t])}];

//# debugId=3f39ed50-840e-e77b-9319-b71c3a533f8c
//# sourceMappingURL=b1c00_TutorMekimi_tutorme-app_src_app_%5Blocale%5D_student_quizzes_%5Bid%5D_page_tsx_7a1b567c._.js.map