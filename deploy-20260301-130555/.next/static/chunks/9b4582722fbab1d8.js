;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="2b908aac-e67c-c59e-6e37-48f168d46515")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,462423,e=>{"use strict";let t=(0,e.i(879191).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>t],462423)},358469,e=>{"use strict";let t=(0,e.i(879191).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],358469)},469218,e=>{"use strict";function t(e,[t,r]){return Math.min(r,Math.max(t,e))}e.s(["clamp",()=>t])},587604,e=>{"use strict";var t=e.i(251474),r=e.i(800592),n=e.i(390553);let a=r.forwardRef(({className:e,type:r,...a},s)=>(0,t.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 min-h-[44px] sm:min-h-0 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...a}));a.displayName="Input",e.s(["Input",()=>a])},895067,e=>{"use strict";var t=e.i(800592),r=e.i(894878),n=e.i(476634),a=e=>{var a;let l,i,{present:o,children:c}=e,u=function(e){var r,a;let[l,i]=t.useState(),o=t.useRef(null),c=t.useRef(e),u=t.useRef("none"),[d,h]=(r=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>a[e][t]??e,r));return t.useEffect(()=>{let e=s(o.current);u.current="mounted"===d?e:"none"},[d]),(0,n.useLayoutEffect)(()=>{let t=o.current,r=c.current;if(r!==e){let n=u.current,a=s(t);e?h("MOUNT"):"none"===a||t?.display==="none"?h("UNMOUNT"):r&&n!==a?h("ANIMATION_OUT"):h("UNMOUNT"),c.current=e}},[e,h]),(0,n.useLayoutEffect)(()=>{if(l){let e,t=l.ownerDocument.defaultView??window,r=r=>{let n=s(o.current).includes(CSS.escape(r.animationName));if(r.target===l&&n&&(h("ANIMATION_END"),!c.current)){let r=l.style.animationFillMode;l.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===l.style.animationFillMode&&(l.style.animationFillMode=r)})}},n=e=>{e.target===l&&(u.current=s(o.current))};return l.addEventListener("animationstart",n),l.addEventListener("animationcancel",r),l.addEventListener("animationend",r),()=>{t.clearTimeout(e),l.removeEventListener("animationstart",n),l.removeEventListener("animationcancel",r),l.removeEventListener("animationend",r)}}h("ANIMATION_END")},[l,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:t.useCallback(e=>{o.current=e?getComputedStyle(e):null,i(e)},[])}}(o),d="function"==typeof c?c({present:u.isPresent}):t.Children.only(c),h=(0,r.useComposedRefs)(u.ref,(a=d,(i=(l=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in l&&l.isReactWarning)?a.ref:(i=(l=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in l&&l.isReactWarning)?a.props.ref:a.props.ref||a.ref));return"function"==typeof c||u.isPresent?t.cloneElement(d,{ref:h}):null};function s(e){return e?.animationName||"none"}a.displayName="Presence",e.s(["Presence",()=>a])},196415,e=>{"use strict";var t=e.i(251474),r=e.i(800592),n=e.i(390553);let a=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));a.displayName="Card";let s=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));s.displayName="CardHeader";let l=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("h3",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let i=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...r}));i.displayName="CardDescription";let o=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",e),...r}));o.displayName="CardContent";let c=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r}));c.displayName="CardFooter",e.s(["Card",()=>a,"CardContent",()=>o,"CardDescription",()=>i,"CardFooter",()=>c,"CardHeader",()=>s,"CardTitle",()=>l])},422955,e=>{"use strict";var t=e.i(800592);e.i(251474);var r=t.createContext(void 0);function n(e){let n=t.useContext(r);return e||n||"ltr"}e.s(["useDirection",()=>n])},476634,e=>{"use strict";var t=e.i(800592),r=globalThis?.document?t.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>r])},845987,e=>{"use strict";var t=e.i(800592);function r(e){let r=t.useRef(e);return t.useEffect(()=>{r.current=e}),t.useMemo(()=>(...e)=>r.current?.(...e),[])}e.s(["useCallbackRef",()=>r])},518696,e=>{"use strict";function t(e,r,{checkForDefaultPrevented:n=!0}={}){return function(t){if(e?.(t),!1===n||!t.defaultPrevented)return r?.(t)}}"u">typeof window&&window.document&&window.document.createElement,e.s(["composeEventHandlers",()=>t])},795624,e=>{"use strict";let t=(0,e.i(879191).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],795624)},409455,e=>{"use strict";let t=(0,e.i(879191).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],409455)},163696,e=>{"use strict";let t=(0,e.i(879191).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],163696)},36438,e=>{"use strict";let t=(0,e.i(879191).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>t],36438)},53169,e=>{"use strict";let t=(0,e.i(879191).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],53169)},715042,e=>{"use strict";let t=(0,e.i(879191).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],715042)},504913,e=>{"use strict";let t=(0,e.i(879191).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],504913)},674339,e=>{"use strict";var t=e.i(251474),r=e.i(800592);e.i(312515);var n=e.i(894878),a=Symbol("radix.slottable");function s(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===a}var l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{var l,i;let o,c,u,d=(i=l=`Primitive.${a}`,(o=r.forwardRef((e,t)=>{let{children:a,...s}=e;if(r.isValidElement(a)){var l;let e,i,o=(l=a,(i=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(i=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),c=function(e,t){let r={...t};for(let n in t){let a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...e)=>{let t=s(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...s}:"className"===n&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}(s,a.props);return a.type!==r.Fragment&&(c.ref=t?(0,n.composeRefs)(t,o):o),r.cloneElement(a,c)}return r.Children.count(a)>1?r.Children.only(null):null})).displayName=`${i}.SlotClone`,c=o,(u=r.forwardRef((e,n)=>{let{children:a,...l}=e,i=r.Children.toArray(a),o=i.find(s);if(o){let e=o.props.children,a=i.map(t=>t!==o?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(c,{...l,ref:n,children:r.isValidElement(e)?r.cloneElement(e,void 0,a):null})}return(0,t.jsx)(c,{...l,ref:n,children:a})})).displayName=`${l}.Slot`,u),h=r.forwardRef((e,r)=>{let{asChild:n,...s}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?d:a,{...s,ref:r})});return h.displayName=`Primitive.${a}`,{...e,[a]:h}},{}),i=e.i(895067),o=e.i(845987),c=e.i(422955),u=e.i(476634),d=e.i(469218),h=e.i(518696),m="ScrollArea",[p,f]=function(e,n=[]){let a=[],s=()=>{let t=a.map(e=>r.createContext(e));return function(n){let a=n?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...n,[e]:a}}),[n,a])}};return s.scopeName=e,[function(n,s){let l=r.createContext(s),i=a.length;a=[...a,s];let o=n=>{let{scope:a,children:s,...o}=n,c=a?.[e]?.[i]||l,u=r.useMemo(()=>o,Object.values(o));return(0,t.jsx)(c.Provider,{value:u,children:s})};return o.displayName=n+"Provider",[o,function(t,a){let o=a?.[e]?.[i]||l,c=r.useContext(o);if(c)return c;if(void 0!==s)return s;throw Error(`\`${t}\` must be used within \`${n}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=n.reduce((t,{useScope:r,scopeName:n})=>{let a=r(e)[`__scope${n}`];return{...t,...a}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}(s,...n)]}(m),[x,v]=p(m),g=r.forwardRef((e,a)=>{let{__scopeScrollArea:s,type:i="hover",dir:o,scrollHideDelay:u=600,...d}=e,[h,m]=r.useState(null),[p,f]=r.useState(null),[v,g]=r.useState(null),[b,w]=r.useState(null),[y,j]=r.useState(null),[N,k]=r.useState(0),[C,S]=r.useState(0),[T,E]=r.useState(!1),[R,M]=r.useState(!1),P=(0,n.useComposedRefs)(a,e=>m(e)),z=(0,c.useDirection)(o);return(0,t.jsx)(x,{scope:s,type:i,dir:z,scrollHideDelay:u,scrollArea:h,viewport:p,onViewportChange:f,content:v,onContentChange:g,scrollbarX:b,onScrollbarXChange:w,scrollbarXEnabled:T,onScrollbarXEnabledChange:E,scrollbarY:y,onScrollbarYChange:j,scrollbarYEnabled:R,onScrollbarYEnabledChange:M,onCornerWidthChange:k,onCornerHeightChange:S,children:(0,t.jsx)(l.div,{dir:z,...d,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});g.displayName=m;var b="ScrollAreaViewport",w=r.forwardRef((e,a)=>{let{__scopeScrollArea:s,children:i,nonce:o,...c}=e,u=v(b,s),d=r.useRef(null),h=(0,n.useComposedRefs)(a,d,u.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),(0,t.jsx)(l.div,{"data-radix-scroll-area-viewport":"",...c,ref:h,style:{overflowX:u.scrollbarXEnabled?"scroll":"hidden",overflowY:u.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:u.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});w.displayName=b;var y="ScrollAreaScrollbar",j=r.forwardRef((e,n)=>{let{forceMount:a,...s}=e,l=v(y,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=l,c="horizontal"===e.orientation;return r.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),"hover"===l.type?(0,t.jsx)(N,{...s,ref:n,forceMount:a}):"scroll"===l.type?(0,t.jsx)(k,{...s,ref:n,forceMount:a}):"auto"===l.type?(0,t.jsx)(C,{...s,ref:n,forceMount:a}):"always"===l.type?(0,t.jsx)(S,{...s,ref:n}):null});j.displayName=y;var N=r.forwardRef((e,n)=>{let{forceMount:a,...s}=e,l=v(y,e.__scopeScrollArea),[o,c]=r.useState(!1);return r.useEffect(()=>{let e=l.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),c(!0)},n=()=>{t=window.setTimeout(()=>c(!1),l.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",n)}}},[l.scrollArea,l.scrollHideDelay]),(0,t.jsx)(i.Presence,{present:a||o,children:(0,t.jsx)(C,{"data-state":o?"visible":"hidden",...s,ref:n})})}),k=r.forwardRef((e,n)=>{var a;let{forceMount:s,...l}=e,o=v(y,e.__scopeScrollArea),c="horizontal"===e.orientation,u=W(()=>m("SCROLL_END"),100),[d,m]=(a={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},r.useReducer((e,t)=>a[e][t]??e,"hidden"));return r.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>m("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,o.scrollHideDelay,m]),r.useEffect(()=>{let e=o.viewport,t=c?"scrollLeft":"scrollTop";if(e){let r=e[t],n=()=>{let n=e[t];r!==n&&(m("SCROLL"),u()),r=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[o.viewport,c,m,u]),(0,t.jsx)(i.Presence,{present:s||"hidden"!==d,children:(0,t.jsx)(S,{"data-state":"hidden"===d?"hidden":"visible",...l,ref:n,onPointerEnter:(0,h.composeEventHandlers)(e.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:(0,h.composeEventHandlers)(e.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),C=r.forwardRef((e,n)=>{let a=v(y,e.__scopeScrollArea),{forceMount:s,...l}=e,[o,c]=r.useState(!1),u="horizontal"===e.orientation,d=W(()=>{if(a.viewport){let e=a.viewport.offsetWidth<a.viewport.scrollWidth,t=a.viewport.offsetHeight<a.viewport.scrollHeight;c(u?e:t)}},10);return V(a.viewport,d),V(a.content,d),(0,t.jsx)(i.Presence,{present:s||o,children:(0,t.jsx)(S,{"data-state":o?"visible":"hidden",...l,ref:n})})}),S=r.forwardRef((e,n)=>{let{orientation:a="vertical",...s}=e,l=v(y,e.__scopeScrollArea),i=r.useRef(null),o=r.useRef(0),[c,u]=r.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=_(c.viewport,c.content),h={...s,sizes:c,onSizesChange:u,hasThumb:!!(d>0&&d<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function m(e,t){return function(e,t,r,n="ltr"){let a=H(r),s=t||a/2,l=r.scrollbar.paddingStart+s,i=r.scrollbar.size-r.scrollbar.paddingEnd-(a-s),o=r.content-r.viewport;return $([l,i],"ltr"===n?[0,o]:[-1*o,0])(e)}(e,o.current,c,t)}return"horizontal"===a?(0,t.jsx)(T,{...h,ref:n,onThumbPositionChange:()=>{if(l.viewport&&i.current){let e=U(l.viewport.scrollLeft,c,l.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{l.viewport&&(l.viewport.scrollLeft=e)},onDragScroll:e=>{l.viewport&&(l.viewport.scrollLeft=m(e,l.dir))}}):"vertical"===a?(0,t.jsx)(E,{...h,ref:n,onThumbPositionChange:()=>{if(l.viewport&&i.current){let e=U(l.viewport.scrollTop,c);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{l.viewport&&(l.viewport.scrollTop=e)},onDragScroll:e=>{l.viewport&&(l.viewport.scrollTop=m(e))}}):null}),T=r.forwardRef((e,a)=>{let{sizes:s,onSizesChange:l,...i}=e,o=v(y,e.__scopeScrollArea),[c,u]=r.useState(),d=r.useRef(null),h=(0,n.useComposedRefs)(a,d,o.onScrollbarXChange);return r.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),(0,t.jsx)(P,{"data-orientation":"horizontal",...i,ref:h,sizes:s,style:{bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":H(s)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(o.viewport){var n,a;let s=o.viewport.scrollLeft+t.deltaX;e.onWheelScroll(s),n=s,a=r,n>0&&n<a&&t.preventDefault()}},onResize:()=>{d.current&&o.viewport&&c&&l({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:B(c.paddingLeft),paddingEnd:B(c.paddingRight)}})}})}),E=r.forwardRef((e,a)=>{let{sizes:s,onSizesChange:l,...i}=e,o=v(y,e.__scopeScrollArea),[c,u]=r.useState(),d=r.useRef(null),h=(0,n.useComposedRefs)(a,d,o.onScrollbarYChange);return r.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),(0,t.jsx)(P,{"data-orientation":"vertical",...i,ref:h,sizes:s,style:{top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":H(s)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(o.viewport){var n,a;let s=o.viewport.scrollTop+t.deltaY;e.onWheelScroll(s),n=s,a=r,n>0&&n<a&&t.preventDefault()}},onResize:()=>{d.current&&o.viewport&&c&&l({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:B(c.paddingTop),paddingEnd:B(c.paddingBottom)}})}})}),[R,M]=p(y),P=r.forwardRef((e,a)=>{let{__scopeScrollArea:s,sizes:i,hasThumb:c,onThumbChange:u,onThumbPointerUp:d,onThumbPointerDown:m,onThumbPositionChange:p,onDragScroll:f,onWheelScroll:x,onResize:g,...b}=e,w=v(y,s),[j,N]=r.useState(null),k=(0,n.useComposedRefs)(a,e=>N(e)),C=r.useRef(null),S=r.useRef(""),T=w.viewport,E=i.content-i.viewport,M=(0,o.useCallbackRef)(x),P=(0,o.useCallbackRef)(p),z=W(g,10);function L(e){C.current&&f({x:e.clientX-C.current.left,y:e.clientY-C.current.top})}return r.useEffect(()=>{let e=e=>{let t=e.target;j?.contains(t)&&M(e,E)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[T,j,E,M]),r.useEffect(P,[i,P]),V(j,z),V(w.content,z),(0,t.jsx)(R,{scope:s,scrollbar:j,hasThumb:c,onThumbChange:(0,o.useCallbackRef)(u),onThumbPointerUp:(0,o.useCallbackRef)(d),onThumbPositionChange:P,onThumbPointerDown:(0,o.useCallbackRef)(m),children:(0,t.jsx)(l.div,{...b,ref:k,style:{position:"absolute",...b.style},onPointerDown:(0,h.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),C.current=j.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),L(e))}),onPointerMove:(0,h.composeEventHandlers)(e.onPointerMove,L),onPointerUp:(0,h.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=S.current,w.viewport&&(w.viewport.style.scrollBehavior=""),C.current=null})})})}),z="ScrollAreaThumb",L=r.forwardRef((e,r)=>{let{forceMount:n,...a}=e,s=M(z,e.__scopeScrollArea);return(0,t.jsx)(i.Presence,{present:n||s.hasThumb,children:(0,t.jsx)(A,{ref:r,...a})})}),A=r.forwardRef((e,a)=>{let{__scopeScrollArea:s,style:i,...o}=e,c=v(z,s),u=M(z,s),{onThumbPositionChange:d}=u,m=(0,n.useComposedRefs)(a,e=>u.onThumbChange(e)),p=r.useRef(void 0),f=W(()=>{p.current&&(p.current(),p.current=void 0)},100);return r.useEffect(()=>{let e=c.viewport;if(e){let t=()=>{f(),p.current||(p.current=q(e,d),d())};return d(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[c.viewport,f,d]),(0,t.jsx)(l.div,{"data-state":u.hasThumb?"visible":"hidden",...o,ref:m,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:(0,h.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;u.onThumbPointerDown({x:r,y:n})}),onPointerUp:(0,h.composeEventHandlers)(e.onPointerUp,u.onThumbPointerUp)})});L.displayName=z;var D="ScrollAreaCorner",I=r.forwardRef((e,r)=>{let n=v(D,e.__scopeScrollArea),a=!!(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&a?(0,t.jsx)(O,{...e,ref:r}):null});I.displayName=D;var O=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,...s}=e,i=v(D,a),[o,c]=r.useState(0),[u,d]=r.useState(0),h=!!(o&&u);return V(i.scrollbarX,()=>{let e=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(e),d(e)}),V(i.scrollbarY,()=>{let e=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(e),c(e)}),h?(0,t.jsx)(l.div,{...s,ref:n,style:{width:o,height:u,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...e.style}}):null});function B(e){return e?parseInt(e,10):0}function _(e,t){let r=e/t;return isNaN(r)?0:r}function H(e){let t=_(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function U(e,t,r="ltr"){let n=H(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,l=t.content-t.viewport,i=(0,d.clamp)(e,"ltr"===r?[0,l]:[-1*l,0]);return $([0,l],[0,s-n])(i)}function $(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}var q=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return!function a(){let s={left:e.scrollLeft,top:e.scrollTop},l=r.left!==s.left,i=r.top!==s.top;(l||i)&&t(),r=s,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function W(e,t){let n=(0,o.useCallbackRef)(e),a=r.useRef(0);return r.useEffect(()=>()=>window.clearTimeout(a.current),[]),r.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(n,t)},[n,t])}function V(e,t){let r=(0,o.useCallbackRef)(t);(0,u.useLayoutEffect)(()=>{let t=0;if(e){let n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,r])}var F=e.i(390553);let X=r.forwardRef(({className:e,children:r,...n},a)=>(0,t.jsxs)(g,{ref:a,className:(0,F.cn)("relative overflow-hidden",e),...n,children:[(0,t.jsx)(w,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(Y,{}),(0,t.jsx)(I,{})]}));X.displayName=g.displayName;let Y=r.forwardRef(({className:e,orientation:r="vertical",...n},a)=>(0,t.jsx)(j,{ref:a,orientation:r,className:(0,F.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:(0,t.jsx)(L,{className:"relative flex-1 rounded-full bg-border"})}));Y.displayName=j.displayName,e.s(["ScrollArea",()=>X],674339)},251916,e=>{"use strict";let t=(0,e.i(879191).default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);e.s(["Bot",()=>t],251916)},545061,e=>{"use strict";let t=(0,e.i(879191).default)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);e.s(["Volume2",()=>t],545061)},861609,e=>{"use strict";let t=(0,e.i(879191).default)("bookmark",[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]]);e.s(["Bookmark",()=>t],861609)},753997,83301,e=>{"use strict";var t=e.i(879191);let r=(0,t.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);e.s(["Pause",()=>r],753997);let n=(0,t.default)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);e.s(["VolumeX",()=>n],83301)},862672,e=>{"use strict";var t=e.i(251474),r=e.i(800592),n=e.i(536105),a=e.i(870368),s=e.i(196415),l=e.i(36438),i=e.i(753997),o=e.i(545061),c=e.i(83301),u=e.i(879191);let d=(0,u.default)("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),h=(0,u.default)("skip-back",[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]]),m=(0,u.default)("skip-forward",[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]]);var p=e.i(212739),f=e.i(647667);let x=(0,u.default)("battery-low",[["path",{d:"M22 14v-4",key:"14q9d5"}],["path",{d:"M6 14v-4",key:"14a6bd"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]]),v=(0,u.default)("picture-in-picture",[["path",{d:"M2 10h6V4",key:"zwrco"}],["path",{d:"m2 4 6 6",key:"ug085t"}],["path",{d:"M21 10V7a2 2 0 0 0-2-2h-7",key:"git5jr"}],["path",{d:"M3 14v2a2 2 0 0 0 2 2h3",key:"1f7fh3"}],["rect",{x:"12",y:"14",width:"10",height:"7",rx:"1",key:"1wjs3o"}]]),g={quickCheck:"éšå ‚å°æµ‹",takeQuiz:"å¼€å§‹ç­”é¢˜",skipForNow:"æš‚ä¸ç­”é¢˜",skipWithNote:"è·³è¿‡å¹¶å¤‡æ³¨",play:"æ’­æ”¾",pause:"æš‚åœ",speed:"å€é€Ÿ",fullscreen:"å…¨å±",pip:"ç”»ä¸­ç”»",quality:"ç”»è´¨",auto:"è‡ªåŠ¨"};function b({videoUrl:e,title:n,onProgress:s,onQuizTrigger:u,onQuizSkip:b,onPlay:w,onPause:y,onSeek:j,onComplete:N,quizTimestamps:k=[],videoVariants:C,locale:S="zh"}){let T=(0,r.useRef)(null),E=(0,r.useRef)(null),R="zh"===S?g:{quickCheck:"Quick Check!",takeQuiz:"Take Quiz",skipForNow:"Skip for Now",skipWithNote:"Skip with note",play:"Play",pause:"Pause",speed:"Speed",fullscreen:"Fullscreen",pip:"Picture-in-picture",quality:"Quality",auto:"Auto"},M=C?Object.keys(C).sort((e,t)=>parseInt(t,10)-parseInt(e,10)):[],[P,z]=(0,r.useState)(M[0]??"auto"),L="auto"!==P&&C?.[P]?C[P]:e,[A,D]=(0,r.useState)(!1),[I,O]=(0,r.useState)(0),[B,_]=(0,r.useState)(0),[H,U]=(0,r.useState)(1),[$,q]=(0,r.useState)(!1),[W,V]=(0,r.useState)(1),[F,X]=(0,r.useState)(!1),[Y,Q]=(0,r.useState)(!1),[J,K]=(0,r.useState)(null),[G,Z]=(0,r.useState)(""),[ee,et]=(0,r.useState)(new Set),[er,en]=(0,r.useState)(!1),[ea,es]=(0,r.useState)(!1),[el,ei]=(0,r.useState)(!1),[eo,ec]=(0,r.useState)(!1),[eu,ed]=(0,r.useState)(!1),eh=(0,r.useRef)(0),em=(0,r.useRef)(new Set);(0,r.useEffect)(()=>{let e=window.matchMedia("(max-width: 640px)");es(e.matches);let t=()=>es(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),(0,r.useEffect)(()=>{if("u"<typeof navigator||!("getBattery"in navigator))return;let e=navigator;e.getBattery?.().then(e=>{ei(e.level<.2),e.addEventListener?.("levelchange",()=>ei(e.level<.2))}).catch(()=>{})},[]),(0,r.useEffect)(()=>{let e=T.current;if(!e)return;let t=()=>{O(e.currentTime);let t=Math.floor(e.currentTime/5);et(e=>new Set([...e,t])),s?.({currentTime:e.currentTime,duration:e.duration||0,percentage:e.duration?e.currentTime/e.duration*100:0}),k.forEach(t=>{.5>Math.abs(e.currentTime-t)&&!em.current.has(t)&&(em.current.add(t),e.pause(),D(!1),K(t),Q(!0),u?.(t))})},r=()=>{_(e.duration)},n=()=>{D(!1),N?.()};return e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",r),e.addEventListener("ended",n),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",r),e.removeEventListener("ended",n)}},[s,u,N,k]);let ep=(0,r.useCallback)(()=>{let e=T.current;e&&(A?(e.pause(),y?.(e.currentTime)):(e.play(),w?.(e.currentTime)),D(!A))},[A,w,y]),ef=e=>{let t=T.current;t&&(t.currentTime=Math.max(0,Math.min(B,t.currentTime+e)))},ex=e=>{let t=T.current;t&&(t.volume=e,U(e),q(0===e))},ev=(0,r.useCallback)(async()=>{let e=T.current;if(e&&document.pictureInPictureEnabled)try{document.pictureInPictureElement?(await document.exitPictureInPicture(),ec(!1)):(await e.requestPictureInPicture(),ec(!0))}catch{ec(!1)}},[]);(0,r.useEffect)(()=>{let e=T.current;if(!e)return;let t=()=>ec(!0),r=()=>ec(!1);return e.addEventListener("enterpictureinpicture",t),e.addEventListener("leavepictureinpicture",r),()=>{e.removeEventListener("enterpictureinpicture",t),e.removeEventListener("leavepictureinpicture",r)}},[]),(0,r.useEffect)(()=>{let e=E.current;if(!e)return;let t=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)&&T.current)switch(e.key){case" ":e.preventDefault(),ep();break;case"ArrowLeft":e.preventDefault(),ef(-10);break;case"ArrowRight":e.preventDefault(),ef(10);break;case"ArrowUp":e.preventDefault(),ex(Math.min(1,H+.1));break;case"ArrowDown":e.preventDefault(),ex(Math.max(0,H-.1))}};return e.setAttribute("tabIndex","0"),e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)},[H,ep]);let eg=e=>{let t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r.toString().padStart(2,"0")}`};B&&ee.size;let eb=ea?+!!er:void 0;return(0,t.jsxs)("div",{ref:E,className:"relative bg-black rounded-lg overflow-hidden group",children:[(0,t.jsx)("div",{className:"w-full aspect-video sm:aspect-video max-h-[70vh] sm:max-h-none",children:(0,t.jsx)("video",{ref:T,src:L,className:"w-full h-full object-contain",onClick:()=>ea?en(e=>!e):ep(),onTouchStart:e=>{eh.current=e.touches[0].clientX,ea&&en(e=>!e)},onTouchEnd:e=>{let t=e.changedTouches[0].clientX-eh.current;if(Math.abs(t)>50&&B){let e=T.current;e&&(e.currentTime=Math.max(0,Math.min(B,e.currentTime+(t>0?10:-10))))}},playsInline:!0})}),el&&A&&(0,t.jsxs)("div",{className:"absolute top-2 left-2 right-2 z-10 flex items-center gap-2 rounded bg-black/70 px-3 py-2 text-sm text-white",children:[(0,t.jsx)(x,{className:"h-4 w-4 shrink-0"}),(0,t.jsx)("span",{children:"çœç”µï¼šå¯é™ä½Žæ’­æ”¾é€Ÿåº¦æˆ–äº®åº¦ä»¥èŠ‚çœç”µé‡"})]}),Y&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center z-20 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full text-center",children:[(0,t.jsx)(f.MessageSquare,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-bold mb-2",children:R.quickCheck}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"zh"===S?"æ¥æ£€éªŒä¸€ä¸‹åˆšæ‰çš„å†…å®¹å§ã€‚":"Let's test your understanding of what you just watched."}),b&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-left text-sm text-gray-600 mb-1",children:"zh"===S?"è·³è¿‡å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰":"Skip note (optional)"}),(0,t.jsx)("textarea",{value:G,onChange:e=>Z(e.target.value.slice(0,300)),placeholder:"zh"===S?"ä¾‹å¦‚ï¼šç¨åŽå†åš":"e.g. Do later",className:"w-full min-h-[44px] px-3 py-2 border rounded-md text-sm",rows:2})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 justify-center",children:[(0,t.jsx)(a.Button,{variant:"outline",className:"touch-target min-h-[44px]",onClick:()=>{null!=J&&b&&b(J,G||void 0),Q(!1),Z(""),T.current?.play(),D(!0)},children:b&&G?R.skipWithNote:R.skipForNow}),(0,t.jsx)(a.Button,{className:"touch-target min-h-[44px]",onClick:()=>{Q(!1),Z(""),null!=J&&u?.(J)},children:R.takeQuiz})]})]})}),(0,t.jsxs)("div",{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 transition-opacity duration-200 sm:opacity-0 sm:group-hover:opacity-100 ${ea?"rounded-t-xl pb-safe":""}`,style:void 0!==eb?{opacity:eb}:void 0,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("input",{type:"range",min:"0",max:"100",value:B?I/B*100:0,onChange:e=>(e=>{let t=T.current;if(!t)return;let r=t.currentTime,n=e/100*B;t.currentTime=n,O(n),j?.(r,n)})(Number(e.target.value)),className:"w-full h-2 sm:h-1 py-2 sm:py-0 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-blue-500 [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 sm:[&::-webkit-slider-thumb]:h-3 sm:[&::-webkit-slider-thumb]:w-3 touch-manipulation"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-white mt-1",children:[(0,t.jsx)("span",{children:eg(I)}),(0,t.jsx)("span",{children:eg(B)})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Button,{variant:"ghost",size:ea?"icon-touch":"icon",onClick:ep,className:"text-white hover:bg-white/20",children:A?(0,t.jsx)(i.Pause,{className:"w-5 h-5"}):(0,t.jsx)(l.Play,{className:"w-5 h-5"})}),(0,t.jsx)(a.Button,{variant:"ghost",size:ea?"icon-touch":"icon",onClick:()=>ef(-10),className:"text-white hover:bg-white/20",children:(0,t.jsx)(h,{className:"w-5 h-5"})}),(0,t.jsx)(a.Button,{variant:"ghost",size:ea?"icon-touch":"icon",onClick:()=>ef(10),className:"text-white hover:bg-white/20",children:(0,t.jsx)(m,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Button,{variant:"ghost",size:ea?"icon-touch":"icon",onClick:()=>{let e=T.current;e&&(e.muted=!$,q(!$))},className:"text-white hover:bg-white/20",children:$?(0,t.jsx)(c.VolumeX,{className:"w-5 h-5"}):(0,t.jsx)(o.Volume2,{className:"w-5 h-5"})}),(0,t.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:$?0:H,onChange:e=>ex(Number(e.target.value)),className:"hidden sm:block w-20 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-white"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(a.Button,{variant:"ghost",size:"sm",onClick:()=>X(!F),className:`text-white hover:bg-white/20 ${ea?"min-h-[44px] min-w-[44px]":""}`,children:[(0,t.jsx)(p.Settings,{className:"w-4 h-4 mr-1"}),W,"x"]}),F&&(0,t.jsx)("div",{className:"absolute bottom-full right-0 mb-2 bg-black/90 rounded-lg p-2 min-w-[100px]",children:[.5,.75,1,1.25,1.5,2].map(e=>(0,t.jsxs)("button",{onClick:()=>{let t;(t=T.current)&&(t.playbackRate=e,V(e),X(!1))},className:`block w-full text-left px-3 py-2 sm:py-1 text-sm rounded min-h-[44px] sm:min-h-0 flex items-center ${W===e?"bg-blue-500 text-white":"text-white hover:bg-white/20"}`,children:[e,"x"]},e))})]}),"u">typeof document&&document.pictureInPictureEnabled&&(0,t.jsx)(a.Button,{variant:"ghost",size:ea?"icon-touch":"icon",onClick:ev,className:"text-white hover:bg-white/20",title:R.pip,children:(0,t.jsx)(v,{className:`w-5 h-5 ${eo?"text-blue-400":""}`})}),(0,t.jsx)(a.Button,{variant:"ghost",size:ea?"icon-touch":"icon",onClick:()=>{let e=E.current;e&&(document.fullscreenElement?document.exitFullscreen():e.requestFullscreen())},className:"text-white hover:bg-white/20",title:R.fullscreen,children:(0,t.jsx)(d,{className:"w-5 h-5"})})]})]})]}),M.length>0&&(0,t.jsxs)("div",{className:"absolute top-2 right-2 z-10",children:[(0,t.jsxs)(a.Button,{variant:"ghost",size:"sm",onClick:()=>{ed(e=>!e),X(!1)},className:"text-white hover:bg-white/20",children:[R.quality," ","auto"===P?R.auto:P+"p"]}),eu&&(0,t.jsx)("div",{className:"absolute right-0 top-full mt-1 bg-black/90 rounded p-2 min-w-[80px]",children:["auto",...M].map(e=>(0,t.jsx)("button",{onClick:()=>{z(e),ed(!1)},className:`block w-full text-left text-sm px-2 py-1 rounded text-white ${P===e?"bg-blue-500":"hover:bg-white/20"}`,children:"auto"===e?R.auto:e+"p"},e))})]}),(0,t.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gray-800",children:k.map((e,r)=>(0,t.jsx)("div",{className:"absolute top-0 w-1 h-full bg-yellow-500",style:{left:`${e/B*100}%`},title:`Quiz at ${eg(e)}`},r))})]})}var w=e.i(587604),y=e.i(674339),j=e.i(53169),N=e.i(715042),k=e.i(358469),C=e.i(462423);function S({videoId:e,currentTime:n,onSeekToTimestamp:l}){let[i,o]=(0,r.useState)([]),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let t=localStorage.getItem(`notes-${e}`);if(t)try{let e=JSON.parse(t);o(e.map(e=>({...e,createdAt:new Date(e.createdAt)})))}catch{console.error("Failed to load notes")}},[e]),(0,r.useEffect)(()=>{i.length>0&&localStorage.setItem(`notes-${e}`,JSON.stringify(i))},[i,e]);let m=()=>{if(!c.trim())return;let e={id:Date.now().toString(),timestamp:n,content:c,createdAt:new Date};o(t=>[...t,e].sort((e,t)=>e.timestamp-t.timestamp)),u("")},p=e=>{let t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r.toString().padStart(2,"0")}`};return d?(0,t.jsxs)(s.Card,{className:"w-80 h-full flex flex-col",children:[(0,t.jsxs)(s.CardHeader,{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(s.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(C.BookOpen,{className:"w-5 h-5"}),"Notes"]}),(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:()=>h(!1),children:"Hide"})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[i.length," note",1!==i.length?"s":""]})]}),(0,t.jsxs)(s.CardContent,{className:"flex-1 flex flex-col",children:[(0,t.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,t.jsx)(k.Clock,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["At ",p(n)]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(w.Input,{placeholder:"Add a note...",value:c,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&m()}),(0,t.jsx)(a.Button,{size:"icon",onClick:m,disabled:!c.trim(),children:(0,t.jsx)(j.Plus,{className:"w-4 h-4"})})]})]}),(0,t.jsx)(y.ScrollArea,{className:"flex-1 -mx-2 px-2",children:(0,t.jsx)("div",{className:"space-y-3",children:0===i.length?(0,t.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,t.jsx)(C.BookOpen,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),(0,t.jsx)("p",{className:"text-sm",children:"No notes yet"}),(0,t.jsx)("p",{className:"text-xs",children:"Click + to add a note at the current timestamp"})]}):i.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-3 group hover:border-blue-300 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("button",{onClick:()=>l(e.timestamp),className:"flex items-center gap-1 text-sm font-medium text-blue-600 hover:text-blue-800",children:[(0,t.jsx)(k.Clock,{className:"w-3 h-3"}),p(e.timestamp)]}),(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>{var t;return t=e.id,void o(e=>e.filter(e=>e.id!==t))},children:(0,t.jsx)(N.Trash2,{className:"w-3 h-3 text-red-500"})})]}),(0,t.jsx)("p",{className:"text-sm mt-1 whitespace-pre-wrap",children:e.content}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:e.createdAt.toLocaleDateString()})]},e.id))})})]})]}):(0,t.jsxs)(a.Button,{variant:"outline",className:"h-full w-10 flex flex-col items-center py-4",onClick:()=>h(!0),children:[(0,t.jsx)(C.BookOpen,{className:"w-5 h-5 mb-2"}),(0,t.jsx)("span",{className:"text-xs writing-mode-vertical rotate-180",style:{writingMode:"vertical-rl"},children:"Notes"})]})}function T({title:e,questions:n,onSubmit:s,onSkip:l,locale:i="zh"}){let[o,c]=(0,r.useState)({}),[u,d]=(0,r.useState)(!1),h="zh"===i?{title:"éšå ‚å°æµ‹",submit:"æäº¤",skip:"è·³è¿‡",done:"å®Œæˆ"}:{title:"Quick Check",submit:"Submit",skip:"Skip",done:"Done"};return 0===n.length?(0,t.jsx)("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center z-30 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md text-center",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"zh"===i?"æš‚æ— é¢˜ç›®":"No questions."}),(0,t.jsx)(a.Button,{onClick:l,children:h.skip})]})}):(0,t.jsx)("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center z-30 p-4 overflow-auto",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(f.MessageSquare,{className:"w-8 h-8 text-blue-500 shrink-0"}),(0,t.jsx)("h3",{className:"text-lg font-bold",children:e||h.title})]}),(0,t.jsx)("div",{className:"space-y-4",children:n.map((e,r)=>(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsxs)("p",{className:"font-medium text-gray-900 mb-2",children:[r+1,". ",e.question]}),e.options&&e.options.length>0?(0,t.jsx)("div",{className:"space-y-2",children:e.options.map((e,n)=>(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:`q-${r}`,checked:o[r]===String(n),onChange:()=>c(e=>({...e,[r]:String(n)})),className:"rounded"}),(0,t.jsx)("span",{children:e})]},n))}):(0,t.jsx)("input",{type:"text",value:o[r]??"",onChange:e=>c(t=>({...t,[r]:e.target.value})),placeholder:"zh"===i?"è¾“å…¥ç­”æ¡ˆ":"Your answer",className:"w-full border rounded px-3 py-2 text-sm"})]},r))}),(0,t.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,t.jsx)(a.Button,{variant:"outline",onClick:l,children:h.skip}),(0,t.jsx)(a.Button,{onClick:()=>{d(!0),s(o)},disabled:u,children:u?h.done:h.submit})]})]})})}var E=e.i(828977),R=e.i(504913),M=e.i(251916),P=e.i(163696),z=e.i(390553);let L={id:"welcome",role:"assistant",content:"Hi! I'm your AI tutor. I'm here to help you learn using the Socratic method - I'll guide you to answers rather than giving them directly. What would you like to explore?",timestamp:new Date};function A({context:e,className:n}){let[l,i]=(0,r.useState)(!1),o=(0,r.useRef)(null),{messages:c,input:u,setInput:d,isLoading:h,sendMessage:m,handleKeyPress:p}=function(e){let[t,n]=(0,r.useState)([L]),[a,s]=(0,r.useState)(""),[l,i]=(0,r.useState)(!1),o=(0,r.useCallback)(async()=>{let r=a.trim();if(!r||l)return;let o={id:Date.now().toString(),role:"user",content:r,timestamp:new Date};n(e=>[...e,o]),s(""),i(!0);try{let a=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,subject:e?.subject,context:{...e,previousMessages:t.slice(-5).map(e=>({role:e.role,content:e.content}))}})}),s=await a.json(),l={id:(Date.now()+1).toString(),role:"assistant",content:s.response||"I apologize, but I am having trouble responding right now. Please try again.",timestamp:new Date,hintType:s.hintType,relevantConcepts:s.relevantConcepts};n(e=>[...e,l])}catch{let e={id:(Date.now()+1).toString(),role:"assistant",content:"I apologize, but I am having trouble responding right now. Please try again.",timestamp:new Date};n(t=>[...t,e])}finally{i(!1)}},[a,l,t,e]),c=(0,r.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),o())},[o]);return{messages:t,input:a,setInput:s,isLoading:l,sendMessage:o,handleKeyPress:c}}(e);return(0,r.useEffect)(()=>{o.current?.scrollIntoView({behavior:"smooth"})},[c]),(0,t.jsxs)("div",{className:(0,z.cn)("fixed bottom-4 right-4 z-50",n),children:[l&&(0,t.jsxs)(s.Card,{className:"w-96 h-[500px] mb-4 flex flex-col shadow-2xl border-2 border-blue-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-blue-500 text-white rounded-t-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(M.Bot,{className:"w-5 h-5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:"AI Tutor"}),(0,t.jsxs)("p",{className:"text-xs text-blue-100",children:[e?.subject||"General"," Help"]})]})]}),(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",onClick:()=>i(!1),className:"text-white hover:bg-blue-600",children:(0,t.jsx)(E.X,{className:"w-4 h-4"})})]}),(0,t.jsx)(y.ScrollArea,{className:"flex-1 p-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[c.map(e=>(0,t.jsx)(D,{message:e},e.id)),h&&(0,t.jsx)(I,{}),(0,t.jsx)("div",{ref:o})]})}),(0,t.jsxs)("div",{className:"p-4 border-t",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(w.Input,{placeholder:"Ask your question...",value:u,onChange:e=>d(e.target.value),onKeyPress:p,disabled:h,className:"flex-1"}),(0,t.jsx)(a.Button,{onClick:m,disabled:!u.trim()||h,size:"icon",children:(0,t.jsx)(R.Send,{className:"w-4 h-4"})})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"AI uses Socratic method - guiding you to answers"})]})]}),(0,t.jsx)(a.Button,{onClick:()=>i(!l),className:(0,z.cn)("rounded-full w-14 h-14 shadow-lg transition-all",l?"bg-gray-600 hover:bg-gray-700":"bg-blue-500 hover:bg-blue-600"),children:l?(0,t.jsx)(E.X,{className:"w-6 h-6"}):(0,t.jsx)(f.MessageSquare,{className:"w-6 h-6"})})]})}function D({message:e}){return(0,t.jsxs)("div",{className:(0,z.cn)("flex gap-2","user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(M.Bot,{className:"w-4 h-4 text-blue-600"})}),(0,t.jsxs)("div",{className:(0,z.cn)("max-w-[80%] rounded-lg p-3","user"===e.role?"bg-blue-500 text-white":"bg-gray-100 text-gray-800"),children:[(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),e.hintType&&(0,t.jsxs)("span",{className:(0,z.cn)("inline-block text-xs px-2 py-0.5 rounded-full mt-2","socratic"===e.hintType&&"bg-purple-100 text-purple-700","encouragement"===e.hintType&&"bg-green-100 text-green-700","direct"===e.hintType&&"bg-orange-100 text-orange-700","clarification"===e.hintType&&"bg-blue-100 text-blue-700"),children:["socratic"===e.hintType&&"ðŸ’¡ Socratic","encouragement"===e.hintType&&"â­ Encouragement","direct"===e.hintType&&"ðŸ“– Direct","clarification"===e.hintType&&"â“ Clarification"]}),e.relevantConcepts&&e.relevantConcepts.length>0&&(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.relevantConcepts.map((e,r)=>(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 bg-blue-50 text-blue-600 rounded",children:e},r))}),(0,t.jsx)("p",{className:(0,z.cn)("text-xs mt-1","user"===e.role?"text-blue-100":"text-gray-500"),children:e.timestamp.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})})]}),"user"===e.role&&(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(P.User,{className:"w-4 h-4 text-gray-600"})})]})}function I(){return(0,t.jsxs)("div",{className:"flex gap-2 justify-start",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(M.Bot,{className:"w-4 h-4 text-blue-600"})}),(0,t.jsx)("div",{className:"bg-gray-100 rounded-lg p-3",children:(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),(0,t.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce delay-100"}),(0,t.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce delay-200"})]})})]})}var O=e.i(256288),B=e.i(409455),_=e.i(795624),H=e.i(861609),U=e.i(151651);function $(){let e=(0,n.useParams)(),l=e?.contentId,[i,o]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(0),[f,x]=(0,r.useState)(!1),[v,g]=(0,r.useState)(null),w=(0,r.useRef)(null),y=(0,r.useRef)([]),j=(0,r.useRef)(null),N=(0,r.useRef)({progress:0,lastPosition:0}),k=(0,r.useCallback)(async()=>{if(w.current)return w.current;let e=await fetch("/api/csrf"),t=await e.json().catch(()=>({}));return w.current=t?.token??null,w.current},[]),C=(0,r.useCallback)(async()=>{if(0===y.current.length)return;let e=[...y.current];y.current=[];let t=await k();fetch(`/api/content/${l}/watch-events`,{method:"POST",headers:{"Content-Type":"application/json",...t&&{"X-CSRF-Token":t}},body:JSON.stringify({events:e}),credentials:"include"}).catch(()=>{})},[l,k]),E=(0,r.useCallback)(async(e,t)=>{N.current={progress:e,lastPosition:t};let r=await k();fetch("/api/progress",{method:"POST",headers:{"Content-Type":"application/json",...r&&{"X-CSRF-Token":r}},body:JSON.stringify({contentId:l,progress:Math.round(e),lastPosition:t,completed:e>=99}),credentials:"include"}).catch(()=>{})},[l,k]);(0,r.useEffect)(()=>{if(!l){h("No content ID provided"),u(!1);return}fetch(`/api/content/${l}`).then(async e=>{if(!e.ok)throw Error((await e.json().catch(()=>({error:"Unknown error"}))).error||`HTTP ${e.status}`);return e.json()}).then(e=>{e.content?o(e.content):h("Content not found"),u(!1)}).catch(e=>{h(e.message),u(!1)})},[l]),(0,r.useEffect)(()=>{l&&fetch("/api/bookmarks").then(e=>e.json()).then(e=>{x(e.bookmarks?.some(e=>e.contentId===l))}).catch(()=>{})},[l]),(0,r.useEffect)(()=>{let e=j.current;return()=>{e&&clearTimeout(e)}},[]);let R=(0,r.useCallback)(async(e,t)=>{let r=await k();await fetch(`/api/content/${l}/quiz-skip`,{method:"POST",headers:{"Content-Type":"application/json",...r&&{"X-CSRF-Token":r}},body:JSON.stringify({videoTimestampSeconds:e,note:t}),credentials:"include"}).catch(()=>{})},[l,k]),M=async()=>{try{(await fetch("/api/bookmarks",{method:f?"DELETE":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentId:l})})).ok&&x(!f)}catch(e){console.error("Bookmark error:",e)}};return c?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading lesson..."})]})}):d||!i?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,t.jsx)(s.Card,{className:"max-w-md w-full",children:(0,t.jsxs)(s.CardContent,{className:"pt-8 pb-8 text-center",children:[(0,t.jsx)(_.AlertCircle,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Content Not Found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:d||"The lesson does not exist."}),(0,t.jsx)(U.default,{href:"/student/dashboard",children:(0,t.jsx)(a.Button,{children:"Back to Dashboard"})})]})})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white border-b sticky top-0 z-40 safe-top",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(U.default,{href:"/student/dashboard",children:(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(B.ChevronLeft,{className:"w-5 h-5"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold",children:i.topic}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:i.subject})]}),(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",onClick:M,className:f?"text-yellow-500":"text-gray-400",title:f?"Remove bookmark":"Add bookmark",children:(0,t.jsx)(H.Bookmark,{className:`w-5 h-5 ${f?"fill-current":""}`})})]}),(0,t.jsx)(O.UserNav,{})]})}),(0,t.jsx)("main",{className:"container mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 relative",children:[i.videoUrl?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b,{videoUrl:i.videoUrl,title:i.topic,videoVariants:i.videoVariants,quizTimestamps:i.quizTimestamps??[],onProgress:e=>{p(e.currentTime),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{E(e.percentage,Math.floor(e.currentTime)),j.current=null},5e3)},onPlay:e=>{y.current.push({eventType:"play",videoSeconds:e})},onPause:e=>{y.current.push({eventType:"pause",videoSeconds:e}),C()},onSeek:(e,t)=>{y.current.push({eventType:"seek",videoSeconds:t,metadata:{fromTime:e,toTime:t}})},onComplete:()=>{y.current.push({eventType:"complete",videoSeconds:i.duration||0}),C(),E(100,i.duration||0)},onQuizTrigger:e=>{g(i.quizCheckpoints?.find(t=>2>Math.abs(t.videoTimestampSec-e))??null)},onQuizSkip:R,locale:"zh"}),v&&(0,t.jsx)(T,{title:v.title??void 0,questions:v.questions,locale:"zh",onSubmit:()=>{g(null)},onSkip:()=>g(null)})]}):(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"py-8 text-center text-gray-500",children:"æš‚æ— è§†é¢‘é“¾æŽ¥ã€‚è¯·å…ˆä¸Šä¼ æˆ–è®¾ç½®è§†é¢‘åœ°å€ã€‚"})}),(0,t.jsxs)(s.Card,{className:"mt-6",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{children:"About This Lesson"})}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("p",{className:"text-gray-700",children:i.transcript||"â€”"}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 mt-4",children:["Duration: ",i.duration?Math.floor(i.duration/60):0," minutes"]})]})]})]}),(0,t.jsx)("div",{children:(0,t.jsx)(S,{videoId:l,currentTime:m,onSeekToTimestamp:e=>console.log("Seek to:",e)})})]})}),(0,t.jsx)(A,{context:{videoTitle:i.topic,currentTimestamp:m,subject:i.subject}})]})}e.s(["default",()=>$],862672)}]);

//# debugId=2b908aac-e67c-c59e-6e37-48f168d46515
//# sourceMappingURL=bce95e27b8aef80a.js.map