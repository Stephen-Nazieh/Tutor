{
  "version": 3,
  "sources": [],
  "debugId": "c15f366f-6f85-1d20-073a-a414cef4b932",
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/lib/gamification/activity-log.ts"],"sourcesContent":["/**\n * Activity Log Service\n * \n * Tracks user activities for analytics and retention insights\n */\n\nimport { db } from '@/lib/db'\n\nexport const ACTIVITY_EVENTS = {\n  // XP & Leveling\n  XP_EARNED: 'xp_earned',\n  LEVEL_UP: 'level_up',\n  \n  // Streaks\n  STREAK_UPDATED: 'streak_updated',\n  STREAK_BROKEN: 'streak_broken',\n  \n  // Worlds & Missions\n  WORLD_UNLOCK: 'world_unlock',\n  MISSION_START: 'mission_start',\n  MISSION_COMPLETE: 'mission_complete',\n  MISSION_ABANDON: 'mission_abandon',\n  \n  // Skills\n  CONFIDENCE_MILESTONE: 'confidence_milestone',\n  SKILL_IMPROVEMENT: 'skill_improvement',\n  \n  // AI Tutor\n  AI_SESSION_START: 'ai_session_start',\n  AI_SESSION_END: 'ai_session_end',\n  PERSONALITY_SWITCH: 'personality_switch',\n  \n  // Learning\n  LESSON_COMPLETE: 'lesson_complete',\n  QUIZ_COMPLETE: 'quiz_complete',\n  \n  // Subscription\n  SUBSCRIPTION_UPGRADE: 'subscription_upgrade',\n  SUBSCRIPTION_DOWNGRADE: 'subscription_downgrade',\n  \n  // Engagement\n  DAILY_LOGIN: 'daily_login',\n  QUEST_COMPLETE: 'quest_complete',\n} as const\n\nexport type ActivityEvent = typeof ACTIVITY_EVENTS[keyof typeof ACTIVITY_EVENTS]\n\n/**\n * Log a user activity\n */\nexport async function logActivity(\n  userId: string,\n  eventType: ActivityEvent | string,\n  metadata?: Record<string, any>\n) {\n  try {\n    await db.userActivityLog.create({\n      data: {\n        userId,\n        eventType,\n        metadata: metadata || {},\n      },\n    })\n  } catch (error) {\n    console.error('Failed to log activity:', error)\n  }\n}\n\n/**\n * Get user's recent activities\n */\nexport async function getRecentActivities(\n  userId: string,\n  limit: number = 20,\n  eventTypes?: string[]\n) {\n  return db.userActivityLog.findMany({\n    where: {\n      userId,\n      ...(eventTypes && { eventType: { in: eventTypes } }),\n    },\n    orderBy: {\n      createdAt: 'desc',\n    },\n    take: limit,\n  })\n}\n\n/**\n * Get activity counts for analytics\n */\nexport async function getActivityCounts(\n  userId: string,\n  startDate: Date,\n  endDate: Date\n) {\n  const activities = await db.userActivityLog.groupBy({\n    by: ['eventType'],\n    where: {\n      userId,\n      createdAt: {\n        gte: startDate,\n        lte: endDate,\n      },\n    },\n    _count: {\n      eventType: true,\n    },\n  })\n\n  const result: Record<string, number> = {}\n  activities.forEach((item: any) => {\n    result[item.eventType] = item._count.eventType\n  })\n  return result\n}\n\n/**\n * Get user's learning streak history\n */\nexport async function getStreakHistory(userId: string, days: number = 30) {\n  const startDate = new Date()\n  startDate.setDate(startDate.getDate() - days)\n  \n  const activities = await db.userActivityLog.findMany({\n    where: {\n      userId,\n      eventType: {\n        in: ['daily_login', 'streak_updated', 'streak_broken'],\n      },\n      createdAt: {\n        gte: startDate,\n      },\n    },\n    orderBy: {\n      createdAt: 'asc',\n    },\n  })\n\n  return activities\n}\n\n/**\n * Calculate engagement score (0-100)\n */\nexport async function calculateEngagementScore(userId: string): Promise<number> {\n  const last7Days = new Date()\n  last7Days.setDate(last7Days.getDate() - 7)\n  \n  const activities = await getActivityCounts(userId, last7Days, new Date())\n  \n  // Simple scoring algorithm\n  let score = 0\n  \n  // Daily login (up to 30 points)\n  score += Math.min(30, (activities['daily_login'] || 0) * 5)\n  \n  // Mission completion (up to 40 points)\n  score += Math.min(40, (activities['mission_complete'] || 0) * 10)\n  \n  // AI sessions (up to 20 points)\n  score += Math.min(20, (activities['ai_session_end'] || 0) * 5)\n  \n  // Skill improvement (up to 10 points)\n  score += Math.min(10, (activities['skill_improvement'] || 0) * 2)\n  \n  return Math.min(100, score)\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;;CAIC,GAED;;AAEO,MAAM,kBAAkB;IAC7B,gBAAgB;IAChB,WAAW;IACX,UAAU;IAEV,UAAU;IACV,gBAAgB;IAChB,eAAe;IAEf,oBAAoB;IACpB,cAAc;IACd,eAAe;IACf,kBAAkB;IAClB,iBAAiB;IAEjB,SAAS;IACT,sBAAsB;IACtB,mBAAmB;IAEnB,WAAW;IACX,kBAAkB;IAClB,gBAAgB;IAChB,oBAAoB;IAEpB,WAAW;IACX,iBAAiB;IACjB,eAAe;IAEf,eAAe;IACf,sBAAsB;IACtB,wBAAwB;IAExB,aAAa;IACb,aAAa;IACb,gBAAgB;AAClB;AAOO,eAAe,YACpB,MAAc,EACd,SAAiC,EACjC,QAA8B;IAE9B,IAAI;QACF,MAAM,oMAAE,CAAC,eAAe,CAAC,MAAM,CAAC;YAC9B,MAAM;gBACJ;gBACA;gBACA,UAAU,YAAY,CAAC;YACzB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;IAC3C;AACF;AAKO,eAAe,oBACpB,MAAc,EACd,QAAgB,EAAE,EAClB,UAAqB;IAErB,OAAO,oMAAE,CAAC,eAAe,CAAC,QAAQ,CAAC;QACjC,OAAO;YACL;YACA,GAAI,cAAc;gBAAE,WAAW;oBAAE,IAAI;gBAAW;YAAE,CAAC;QACrD;QACA,SAAS;YACP,WAAW;QACb;QACA,MAAM;IACR;AACF;AAKO,eAAe,kBACpB,MAAc,EACd,SAAe,EACf,OAAa;IAEb,MAAM,aAAa,MAAM,oMAAE,CAAC,eAAe,CAAC,OAAO,CAAC;QAClD,IAAI;YAAC;SAAY;QACjB,OAAO;YACL;YACA,WAAW;gBACT,KAAK;gBACL,KAAK;YACP;QACF;QACA,QAAQ;YACN,WAAW;QACb;IACF;IAEA,MAAM,SAAiC,CAAC;IACxC,WAAW,OAAO,CAAC,CAAC;QAClB,MAAM,CAAC,KAAK,SAAS,CAAC,GAAG,KAAK,MAAM,CAAC,SAAS;IAChD;IACA,OAAO;AACT;AAKO,eAAe,iBAAiB,MAAc,EAAE,OAAe,EAAE;IACtE,MAAM,YAAY,IAAI;IACtB,UAAU,OAAO,CAAC,UAAU,OAAO,KAAK;IAExC,MAAM,aAAa,MAAM,oMAAE,CAAC,eAAe,CAAC,QAAQ,CAAC;QACnD,OAAO;YACL;YACA,WAAW;gBACT,IAAI;oBAAC;oBAAe;oBAAkB;iBAAgB;YACxD;YACA,WAAW;gBACT,KAAK;YACP;QACF;QACA,SAAS;YACP,WAAW;QACb;IACF;IAEA,OAAO;AACT;AAKO,eAAe,yBAAyB,MAAc;IAC3D,MAAM,YAAY,IAAI;IACtB,UAAU,OAAO,CAAC,UAAU,OAAO,KAAK;IAExC,MAAM,aAAa,MAAM,kBAAkB,QAAQ,WAAW,IAAI;IAElE,2BAA2B;IAC3B,IAAI,QAAQ;IAEZ,gCAAgC;IAChC,SAAS,KAAK,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,cAAc,IAAI,CAAC,IAAI;IAEzD,uCAAuC;IACvC,SAAS,KAAK,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,mBAAmB,IAAI,CAAC,IAAI;IAE9D,gCAAgC;IAChC,SAAS,KAAK,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,iBAAiB,IAAI,CAAC,IAAI;IAE5D,sCAAsC;IACtC,SAAS,KAAK,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,oBAAoB,IAAI,CAAC,IAAI;IAE/D,OAAO,KAAK,GAAG,CAAC,KAAK;AACvB"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/lib/gamification/service.ts"],"sourcesContent":["/**\n * Gamification Service\n * \n * Handles XP, Level, Streak, and Skill Score calculations\n * Merged Socratic teaching with Gamified Avatar personalities\n */\n\nimport { db } from '@/lib/db'\nimport { logActivity } from './activity-log'\n\n// XP required for each level (exponential growth)\nconst XP_LEVELS: Record<number, number> = {\n  1: 0,\n  2: 200,\n  3: 500,\n  4: 1000,\n  5: 1800,\n  6: 3000,\n  7: 4600,\n  8: 6600,\n  9: 9100,\n  10: 12100,\n  11: 15600,\n  12: 19600,\n  13: 24100,\n  14: 29100,\n  15: 34600,\n  16: 40600,\n  17: 47100,\n  18: 54100,\n  19: 61600,\n  20: 69600,\n}\n\n// XP rewards for different actions\nexport const XP_REWARDS = {\n  COMPLETE_MISSION: 50,\n  PERFECT_QUIZ: 20,\n  DAILY_LOGIN: 10,\n  STREAK_3_DAYS: 50,\n  STREAK_7_DAYS: 150,\n  STREAK_30_DAYS: 500,\n  SPEAKING_PRACTICE: 30,\n  AI_CONVERSATION: 40,\n  COMPLETE_LESSON: 40,\n  FIRST_MISSION: 100,\n}\n\n// Avatar personalities with Socratic balance\nexport const AVATAR_PERSONALITIES = {\n  friendly_mentor: {\n    id: 'friendly_mentor',\n    name: 'Friendly Mentor',\n    description: 'Warm, supportive, and encouraging',\n    tone: 'warm and supportive',\n    usesEmojis: true,\n    correctionStyle: 'gentle',\n    encouragement: 'frequent',\n    socraticBalance: 0.6,\n    voiceStyle: 'encouraging',\n    examplePhrases: {\n      greeting: \"Hey there! I'm so excited to learn with you today!\",\n      correction: \"Almost perfect! Here's a slightly smoother way to say that:\",\n      encouragement: \"You're doing amazing! I can see your confidence growing!\",\n      socraticPrompt: \"That's a great start! What do you think would happen if...?\",\n    },\n  },\n  strict_coach: {\n    id: 'strict_coach',\n    name: 'Strict Coach',\n    description: 'Professional, direct, and disciplined',\n    tone: 'professional and direct',\n    usesEmojis: false,\n    correctionStyle: 'immediate',\n    encouragement: 'achievement-based',\n    socraticBalance: 0.4,\n    voiceStyle: 'authoritative',\n    examplePhrases: {\n      greeting: \"Let's begin. Today's focus is clear communication.\",\n      correction: \"Correction: Use present perfect with 'for' + duration.\",\n      encouragement: \"Good. Your accuracy improved by 15% this week.\",\n      socraticPrompt: \"Consider this: what is the core issue in your sentence?\",\n    },\n  },\n  corporate_trainer: {\n    id: 'corporate_trainer',\n    name: 'Corporate Trainer',\n    description: 'Business-focused and performance-oriented',\n    tone: 'business professional',\n    usesEmojis: false,\n    correctionStyle: 'constructive',\n    encouragement: 'performance-focused',\n    socraticBalance: 0.5,\n    voiceStyle: 'professional',\n    examplePhrases: {\n      greeting: \"Welcome. Let's work on your professional communication skills.\",\n      correction: \"In a business context, consider this phrasing instead:\",\n      encouragement: \"Your professional articulation is showing measurable improvement.\",\n      socraticPrompt: \"From a stakeholder perspective, how would you frame this?\",\n    },\n  },\n  funny_teacher: {\n    id: 'funny_teacher',\n    name: 'Funny Teacher',\n    description: 'Light, humorous, and engaging',\n    tone: 'light and humorous',\n    usesEmojis: true,\n    correctionStyle: 'playful',\n    encouragement: 'enthusiastic',\n    socraticBalance: 0.7,\n    voiceStyle: 'friendly',\n    examplePhrases: {\n      greeting: \"Ready to level up your English? Let's make some grammar magic!\",\n      correction: \"Oops! Let's give that sentence a little makeover!\",\n      encouragement: \"Boom! You're crushing it! High five!\",\n      socraticPrompt: \"Ooh, interesting! But what if we looked at it this way...?\",\n    },\n  },\n  calm_professor: {\n    id: 'calm_professor',\n    name: 'Calm Professor',\n    description: 'Patient, thoughtful, and explanatory',\n    tone: 'patient and thoughtful',\n    usesEmojis: false,\n    correctionStyle: 'explanatory',\n    encouragement: 'steady',\n    socraticBalance: 0.8,\n    voiceStyle: 'calm',\n    examplePhrases: {\n      greeting: \"Welcome. Take your time, and let's explore this together.\",\n      correction: \"I see your thought process. Let's refine it gently:\",\n      encouragement: \"Your progress is steady and meaningful. Well done.\",\n      socraticPrompt: \"That's an interesting approach. What led you to that conclusion?\",\n    },\n  },\n} as const\n\nexport type AvatarPersonality = keyof typeof AVATAR_PERSONALITIES\n\nexport async function getOrCreateGamification(userId: string) {\n  let gamification = await db.userGamification.findUnique({\n    where: { userId },\n  })\n\n  if (!gamification) {\n    gamification = await db.userGamification.create({\n      data: {\n        userId,\n        level: 1,\n        xp: 0,\n        streakDays: 0,\n        longestStreak: 0,\n      },\n    })\n  }\n\n  return gamification\n}\n\nexport function calculateLevel(xp: number): number {\n  let level = 1\n  for (let i = 1; i <= 20; i++) {\n    if (xp >= XP_LEVELS[i]) {\n      level = i\n    } else {\n      break\n    }\n  }\n  return level\n}\n\nexport function getXpForNextLevel(currentLevel: number): number {\n  return XP_LEVELS[currentLevel + 1] || XP_LEVELS[20] * 2\n}\n\nexport function getLevelProgress(xp: number, level: number): number {\n  const currentLevelXp = XP_LEVELS[level]\n  const nextLevelXp = XP_LEVELS[level + 1] || XP_LEVELS[20] * 2\n  const xpInLevel = xp - currentLevelXp\n  const xpNeeded = nextLevelXp - currentLevelXp\n  return Math.min(100, Math.round((xpInLevel / xpNeeded) * 100))\n}\n\nexport async function awardXp(\n  userId: string,\n  amount: number,\n  source: string,\n  metadata?: Record<string, any>\n) {\n  const gamification = await getOrCreateGamification(userId)\n  \n  const newXp = gamification.xp + amount\n  const newLevel = calculateLevel(newXp)\n  const leveledUp = newLevel > gamification.level\n\n  const updated = await db.userGamification.update({\n    where: { userId },\n    data: {\n      xp: newXp,\n      level: newLevel,\n    },\n  })\n\n  await logActivity(userId, 'XP_EARNED', {\n    amount,\n    source,\n    newTotal: newXp,\n    leveledUp,\n    ...metadata,\n  })\n\n  return {\n    ...updated,\n    xpEarned: amount,\n    leveledUp,\n    previousLevel: gamification.level,\n  }\n}\n\nexport async function updateStreak(userId: string) {\n  const gamification = await getOrCreateGamification(userId)\n  \n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n  \n  const lastActive = gamification.lastActiveDate\n    ? new Date(gamification.lastActiveDate)\n    : null\n  \n  let newStreak = gamification.streakDays\n  let streakBonus = 0\n  let streakContinued = false\n  let streakBroken = false\n\n  if (lastActive) {\n    lastActive.setHours(0, 0, 0, 0)\n    const diffDays = Math.floor((today.getTime() - lastActive.getTime()) / (1000 * 60 * 60 * 24))\n\n    if (diffDays === 1) {\n      newStreak += 1\n      streakContinued = true\n      \n      if (newStreak === 3) streakBonus = XP_REWARDS.STREAK_3_DAYS\n      else if (newStreak === 7) streakBonus = XP_REWARDS.STREAK_7_DAYS\n      else if (newStreak === 30) streakBonus = XP_REWARDS.STREAK_30_DAYS\n    } else if (diffDays === 0) {\n      streakContinued = true\n    } else {\n      streakBroken = true\n      newStreak = 1\n    }\n  } else {\n    newStreak = 1\n  }\n\n  const longestStreak = Math.max(gamification.longestStreak, newStreak)\n\n  const updated = await db.userGamification.update({\n    where: { userId },\n    data: {\n      streakDays: newStreak,\n      longestStreak,\n      lastActiveDate: today,\n    },\n  })\n\n  await logActivity(userId, streakBroken ? 'STREAK_BROKEN' : 'STREAK_UPDATED', {\n    streakDays: newStreak,\n    previousStreak: gamification.streakDays,\n    streakBroken,\n    streakContinued,\n  })\n\n  return {\n    ...updated,\n    streakBonus,\n    streakContinued,\n    streakBroken,\n  }\n}\n\nexport async function checkDailyLogin(userId: string) {\n  const gamification = await getOrCreateGamification(userId)\n  \n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n  \n  const lastActive = gamification.lastActiveDate\n    ? new Date(gamification.lastActiveDate)\n    : null\n  \n  if (!lastActive || lastActive.getTime() !== today.getTime()) {\n    const streakResult = await updateStreak(userId)\n    const xpResult = await awardXp(userId, XP_REWARDS.DAILY_LOGIN, 'daily_login')\n    \n    return {\n      firstLoginToday: true,\n      xpEarned: xpResult.xpEarned + streakResult.streakBonus,\n      streakBonus: streakResult.streakBonus,\n      streakDays: streakResult.streakDays,\n      leveledUp: xpResult.leveledUp,\n    }\n  }\n\n  return {\n    firstLoginToday: false,\n    streakDays: gamification.streakDays,\n  }\n}\n\nexport async function updateSkillScores(\n  userId: string,\n  scores: {\n    grammar?: number\n    vocabulary?: number\n    speaking?: number\n    listening?: number\n    confidence?: number\n    fluency?: number\n  }\n) {\n  const gamification = await getOrCreateGamification(userId)\n\n  const calculateScore = (existing: number, newScore?: number) => {\n    if (newScore === undefined) return existing\n    return Math.round(existing * 0.7 + newScore * 0.3)\n  }\n\n  const updated = await db.userGamification.update({\n    where: { userId },\n    data: {\n      grammarScore: calculateScore(gamification.grammarScore, scores.grammar),\n      vocabularyScore: calculateScore(gamification.vocabularyScore, scores.vocabulary),\n      speakingScore: calculateScore(gamification.speakingScore, scores.speaking),\n      listeningScore: calculateScore(gamification.listeningScore, scores.listening),\n      confidenceScore: calculateScore(gamification.confidenceScore, scores.confidence),\n      fluencyScore: calculateScore(gamification.fluencyScore, scores.fluency),\n    },\n  })\n\n  if (scores.confidence && scores.confidence > gamification.confidenceScore + 5) {\n    await logActivity(userId, 'CONFIDENCE_MILESTONE', {\n      previousScore: gamification.confidenceScore,\n      newScore: updated.confidenceScore,\n      delta: updated.confidenceScore - gamification.confidenceScore,\n    })\n  }\n\n  return updated\n}\n\nexport async function getGamificationSummary(userId: string) {\n  const gamification = await getOrCreateGamification(userId)\n  const nextLevelXp = getXpForNextLevel(gamification.level)\n  const currentLevelXp = XP_LEVELS[gamification.level]\n  const progress = getLevelProgress(gamification.xp, gamification.level)\n\n  return {\n    level: gamification.level,\n    xp: gamification.xp,\n    nextLevelXp,\n    currentLevelXp,\n    progress,\n    xpToNextLevel: nextLevelXp - gamification.xp,\n    streakDays: gamification.streakDays,\n    longestStreak: gamification.longestStreak,\n    skills: {\n      grammar: gamification.grammarScore,\n      vocabulary: gamification.vocabularyScore,\n      speaking: gamification.speakingScore,\n      listening: gamification.listeningScore,\n      confidence: gamification.confidenceScore,\n      fluency: gamification.fluencyScore,\n    },\n    unlockedWorlds: gamification.unlockedWorlds,\n  }\n}\n\nexport async function unlockWorld(userId: string, worldId: string) {\n  const gamification = await getOrCreateGamification(userId)\n  \n  const current = gamification.unlockedWorlds ?? []\n  if (!current.includes(worldId)) {\n    const updated = await db.userGamification.update({\n      where: { userId },\n      data: {\n        unlockedWorlds: [...current, worldId],\n      },\n    })\n\n    await logActivity(userId, 'WORLD_UNLOCK', { worldId })\n\n    return { unlocked: true, updated }\n  }\n\n  return { unlocked: false }\n}\n\nexport async function canAccessWorld(userId: string, requiredLevel: number) {\n  const gamification = await getOrCreateGamification(userId)\n  return gamification.level >= requiredLevel\n}\n"],"names":[],"mappings":"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"}}]
}