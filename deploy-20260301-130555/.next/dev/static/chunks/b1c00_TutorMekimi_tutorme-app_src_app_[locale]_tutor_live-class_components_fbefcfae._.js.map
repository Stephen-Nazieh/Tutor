{
  "version": 3,
  "sources": [],
  "debugId": "9e2b262b-a7f8-f4e1-726f-bbd181eced0e",
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/StudentList.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Input } from '@/components/ui/input'\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu'\nimport { cn } from '@/lib/utils'\nimport type { LiveStudent, BreakoutRoom } from '../types'\nimport { \n  Users, \n  Hand, \n  MoreVertical, \n  MicOff, \n  VideoOff, \n  MessageCircle,\n  UserPlus,\n  LogOut,\n  Search,\n  Filter,\n  Lightbulb,\n  Bell,\n  LayoutGrid\n} from 'lucide-react'\n\ninterface StudentListProps {\n  students: LiveStudent[]\n  breakoutRooms: BreakoutRoom[]\n  onCallOn?: (studentId: string) => void\n  onAssignToRoom?: (studentId: string, roomId: string) => void\n  onRemoveFromRoom?: (studentId: string) => void\n  onPushHint?: (studentId: string, hint: string, type?: 'socratic' | 'encouragement') => void\n  onSendNudge?: (studentId: string) => void\n  onInviteToBreakout?: (studentId: string) => void\n}\n\nexport function StudentList({ \n  students, \n  breakoutRooms,\n  onCallOn,\n  onAssignToRoom,\n  onRemoveFromRoom,\n  onPushHint,\n  onSendNudge,\n  onInviteToBreakout\n}: StudentListProps) {\n  const [searchQuery, setSearchQuery] = useState('')\n  const [filterStatus, setFilterStatus] = useState<'all' | 'online' | 'away' | 'hand-raised'>('all')\n\n  const filteredStudents = students.filter(student => {\n    const matchesSearch = student.name.toLowerCase().includes(searchQuery.toLowerCase())\n    const matchesFilter = filterStatus === 'all' || \n      (filterStatus === 'online' && student.status === 'online') ||\n      (filterStatus === 'away' && (student.status === 'idle' || student.status === 'away')) ||\n      (filterStatus === 'hand-raised' && student.handRaised)\n    return matchesSearch && matchesFilter\n  })\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'online': return 'bg-green-500'\n      case 'idle': return 'bg-yellow-500'\n      case 'away': return 'bg-orange-500'\n      case 'offline': return 'bg-gray-400'\n      default: return 'bg-gray-400'\n    }\n  }\n\n  const getEngagementColor = (score: number) => {\n    if (score >= 80) return 'text-green-600'\n    if (score >= 60) return 'text-blue-600'\n    if (score >= 40) return 'text-yellow-600'\n    return 'text-red-600'\n  }\n\n  const onlineCount = students.filter(s => s.status === 'online').length\n  const handRaisedCount = students.filter(s => s.handRaised).length\n\n  return (\n    <Card className=\"h-full flex flex-col\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <Users className=\"w-4 h-4\" />\n            <CardTitle className=\"text-sm font-medium\">Students</CardTitle>\n            <Badge variant=\"secondary\" className=\"text-xs\">\n              {onlineCount}/{students.length}\n            </Badge>\n          </div>\n          {handRaisedCount > 0 && (\n            <Badge variant=\"destructive\" className=\"gap-1\">\n              <Hand className=\"w-3 h-3\" />\n              {handRaisedCount}\n            </Badge>\n          )}\n        </div>\n\n        {/* Search and Filter */}\n        <div className=\"flex gap-2 mt-3\">\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-2.5 top-2.5 w-4 h-4 text-gray-400\" />\n            <Input\n              placeholder=\"Search students...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-9 h-9\"\n            />\n          </div>\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"outline\" size=\"icon\" className=\"h-9 w-9\">\n                <Filter className=\"w-4 h-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              <DropdownMenuItem onClick={() => setFilterStatus('all')}>\n                All Students\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => setFilterStatus('online')}>\n                Online Only\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => setFilterStatus('away')}>\n                Idle/Away\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => setFilterStatus('hand-raised')}>\n                Hand Raised\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"flex-1 p-0\">\n        <ScrollArea className=\"h-[calc(100%-100px)]\">\n          <div className=\"space-y-1 px-4 pb-4\">\n            {filteredStudents.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <Users className=\"w-10 h-10 text-gray-300 mx-auto mb-2\" />\n                <p className=\"text-sm text-gray-500\">No students found</p>\n              </div>\n            ) : (\n              filteredStudents.map((student) => (\n                <div\n                  key={student.id}\n                  className={cn(\n                    \"flex items-center gap-3 p-3 rounded-lg border transition-all\",\n                    student.handRaised \n                      ? \"bg-yellow-50 border-yellow-200\" \n                      : \"bg-white border-gray-100 hover:border-gray-200\"\n                  )}\n                >\n                  {/* Avatar with Status */}\n                  <div className=\"relative\">\n                    <Avatar className=\"w-10 h-10\">\n                      <AvatarFallback className=\"bg-blue-100 text-blue-700 text-sm\">\n                        {student.name.split(' ').map(n => n[0]).join('')}\n                      </AvatarFallback>\n                    </Avatar>\n                    <span className={cn(\n                      \"absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white\",\n                      getStatusColor(student.status)\n                    )} />\n                  </div>\n\n                  {/* Student Info */}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium text-sm truncate\">{student.name}</span>\n                      {student.handRaised && (\n                        <Hand className=\"w-4 h-4 text-yellow-600 animate-pulse\" />\n                      )}\n                    </div>\n                    <div className=\"flex items-center gap-3 text-xs text-gray-500\">\n                      <span className={cn(\"font-medium\", getEngagementColor(student.engagementScore))}>\n                        {student.engagementScore}% engaged\n                      </span>\n                      {student.breakoutRoomId && (\n                        <span className=\"text-blue-600\">\n                          {breakoutRooms.find(r => r.id === student.breakoutRoomId)?.name}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex items-center gap-1\">\n                    {student.handRaised && (\n                      <Button \n                        size=\"sm\" \n                        variant=\"ghost\"\n                        className=\"h-8 text-yellow-700 hover:text-yellow-800 hover:bg-yellow-100\"\n                        onClick={() => onCallOn?.(student.id)}\n                      >\n                        Call On\n                      </Button>\n                    )}\n                    \n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\n                          <MoreVertical className=\"w-4 h-4\" />\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\">\n                        <DropdownMenuItem onClick={() => onCallOn?.(student.id)}>\n                          <MessageCircle className=\"w-4 h-4 mr-2\" />\n                          Send Message\n                        </DropdownMenuItem>\n                        \n                        {breakoutRooms.length > 0 && !student.breakoutRoomId && (\n                          <DropdownMenuItem asChild>\n                            <div className=\"relative\">\n                              <UserPlus className=\"w-4 h-4 mr-2\" />\n                              Assign to Room\n                              <div className=\"absolute left-full top-0 ml-1 bg-white border rounded-lg shadow-lg p-1 min-w-[120px]\">\n                                {breakoutRooms.map(room => (\n                                  <button\n                                    key={room.id}\n                                    className=\"w-full text-left px-2 py-1 text-sm hover:bg-gray-100 rounded\"\n                                    onClick={() => onAssignToRoom?.(student.id, room.id)}\n                                  >\n                                    {room.name}\n                                  </button>\n                                ))}\n                              </div>\n                            </div>\n                          </DropdownMenuItem>\n                        )}\n                        \n                        {student.breakoutRoomId && (\n                          <DropdownMenuItem onClick={() => onRemoveFromRoom?.(student.id)}>\n                            <LogOut className=\"w-4 h-4 mr-2\" />\n                            Remove from Room\n                          </DropdownMenuItem>\n                        )}\n                        \n                        <DropdownMenuItem onClick={() => onPushHint?.(student.id, 'Remember to think about the key concept we discussed.', 'socratic')}>\n                          <Lightbulb className=\"w-4 h-4 mr-2\" />\n                          Send Socratic Hint\n                        </DropdownMenuItem>\n                        \n                        <DropdownMenuItem onClick={() => onSendNudge?.(student.id)}>\n                          <Bell className=\"w-4 h-4 mr-2\" />\n                          Send Nudge\n                        </DropdownMenuItem>\n                        \n                        {breakoutRooms.length > 0 && (\n                          <DropdownMenuItem onClick={() => onInviteToBreakout?.(student.id)}>\n                            <LayoutGrid className=\"w-4 h-4 mr-2\" />\n                            Invite to Breakout\n                          </DropdownMenuItem>\n                        )}\n                        \n                        <DropdownMenuItem className=\"text-red-600\">\n                          <MicOff className=\"w-4 h-4 mr-2\" />\n                          Mute\n                        </DropdownMenuItem>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 623, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/HandRaiseQueue.tsx"],"sourcesContent":["'use client'\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { cn } from '@/lib/utils'\nimport { Hand, Check, Clock, ArrowUp } from 'lucide-react'\nimport type { HandRaise } from '../types'\n\ninterface HandRaiseQueueProps {\n  handRaises: HandRaise[]\n  onAcknowledge?: (handId: string) => void\n  onAnswer?: (handId: string) => void\n}\n\nexport function HandRaiseQueue({ handRaises, onAcknowledge, onAnswer }: HandRaiseQueueProps) {\n  // Sort: pending first, then by priority and time\n  const sortedHands = [...handRaises].sort((a, b) => {\n    if (a.status !== b.status) {\n      return a.status === 'pending' ? -1 : 1\n    }\n    if (a.priority !== b.priority) {\n      const priorityWeight = { high: 3, normal: 2, low: 1 }\n      return priorityWeight[b.priority] - priorityWeight[a.priority]\n    }\n    return new Date(a.raisedAt).getTime() - new Date(b.raisedAt).getTime()\n  })\n\n  const pendingCount = handRaises.filter(h => h.status === 'pending').length\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high': return 'bg-red-100 text-red-700 border-red-200'\n      case 'normal': return 'bg-yellow-100 text-yellow-700 border-yellow-200'\n      case 'low': return 'bg-blue-100 text-blue-700 border-blue-200'\n      default: return 'bg-gray-100 text-gray-700'\n    }\n  }\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'pending':\n        return <Badge variant=\"outline\" className=\"animate-pulse\">Waiting</Badge>\n      case 'acknowledged':\n        return <Badge variant=\"secondary\">Acknowledged</Badge>\n      case 'answered':\n        return <Badge variant=\"default\" className=\"bg-green-600\">Answered</Badge>\n    }\n  }\n\n  const formatWaitTime = (raisedAt: string) => {\n    const seconds = Math.floor((Date.now() - new Date(raisedAt).getTime()) / 1000)\n    if (seconds < 60) return `${seconds}s`\n    const minutes = Math.floor(seconds / 60)\n    return `${minutes}m ${seconds % 60}s`\n  }\n\n  return (\n    <Card className=\"h-full flex flex-col\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <Hand className=\"w-4 h-4\" />\n            <CardTitle className=\"text-sm font-medium\">Hand Raises</CardTitle>\n          </div>\n          {pendingCount > 0 && (\n            <Badge variant=\"destructive\" className=\"text-xs\">\n              {pendingCount} Pending\n            </Badge>\n          )}\n        </div>\n      </CardHeader>\n      <CardContent className=\"flex-1 p-0\">\n        {sortedHands.length === 0 ? (\n          <div className=\"h-full flex items-center justify-center text-center p-4\">\n            <div>\n              <Hand className=\"w-12 h-12 text-gray-300 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-500\">No hand raises yet</p>\n              <p className=\"text-xs text-gray-400 mt-1\">Students can raise hands to ask questions</p>\n            </div>\n          </div>\n        ) : (\n          <ScrollArea className=\"h-[calc(100%-60px)]\">\n            <div className=\"space-y-2 px-4 pb-4\">\n              {sortedHands.map((hand) => (\n                <div\n                  key={hand.id}\n                  className={cn(\n                    \"p-3 rounded-lg border transition-all\",\n                    hand.status === 'pending' \n                      ? \"bg-white border-yellow-200 shadow-sm\" \n                      : hand.status === 'acknowledged'\n                        ? \"bg-blue-50 border-blue-200\"\n                        : \"bg-green-50 border-green-200 opacity-70\"\n                  )}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <Avatar className=\"w-8 h-8\">\n                      <AvatarFallback className=\"text-xs bg-blue-100 text-blue-700\">\n                        {hand.studentName.split(' ').map(n => n[0]).join('')}\n                      </AvatarFallback>\n                    </Avatar>\n\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center justify-between\">\n                        <p className=\"font-medium text-sm\">{hand.studentName}</p>\n                        {getStatusBadge(hand.status)}\n                      </div>\n\n                      <div className=\"flex items-center gap-2 mt-1\">\n                        <Badge variant=\"outline\" className={cn(\"text-xs\", getPriorityColor(hand.priority))}>\n                          {hand.priority.charAt(0).toUpperCase() + hand.priority.slice(1)}\n                        </Badge>\n                        <span className=\"text-xs text-gray-500 flex items-center gap-1\">\n                          <Clock className=\"w-3 h-3\" />\n                          {formatWaitTime(hand.raisedAt)}\n                        </span>\n                      </div>\n\n                      {hand.topic && (\n                        <p className=\"text-xs text-gray-600 mt-2\">\n                          Topic: {hand.topic}\n                        </p>\n                      )}\n\n                      {hand.status === 'pending' && (\n                        <div className=\"flex gap-2 mt-3\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\" \n                            className=\"flex-1 text-xs\"\n                            onClick={() => onAcknowledge?.(hand.id)}\n                          >\n                            <ArrowUp className=\"w-3 h-3 mr-1\" />\n                            Acknowledge\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            className=\"flex-1 text-xs bg-green-600 hover:bg-green-700\"\n                            onClick={() => onAnswer?.(hand.id)}\n                          >\n                            <Check className=\"w-3 h-3 mr-1\" />\n                            Answer\n                          </Button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </ScrollArea>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 999, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/ChatMonitor.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Input } from '@/components/ui/input'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { cn } from '@/lib/utils'\nimport { toast } from 'sonner'\nimport { \n  MessageSquare, \n  Pin, \n  PinOff, \n  ThumbsUp, \n  HelpCircle, \n  AlertCircle,\n  Send,\n  Smile,\n  Frown,\n  Meh\n} from 'lucide-react'\nimport type { ChatMessage, LiveStudent } from '../types'\nimport type { Socket } from 'socket.io-client'\n\ninterface ChatMonitorProps {\n  messages: ChatMessage[]\n  students: LiveStudent[]\n  socket: Socket | null\n  roomId: string\n  onPinMessage?: (messageId: string) => void\n}\n\nexport function ChatMonitor({ messages, students, socket, roomId, onPinMessage }: ChatMonitorProps) {\n  const [filter, setFilter] = useState<'all' | 'questions' | 'pinned'>('all')\n  const [inputMessage, setInputMessage] = useState('')\n  const [localMessages, setLocalMessages] = useState<ChatMessage[]>(messages)\n  const scrollRef = useRef<HTMLDivElement>(null)\n\n  // Sync with parent messages\n  useEffect(() => {\n    setLocalMessages(messages)\n  }, [messages])\n\n  // Listen for new messages via socket\n  useEffect(() => {\n    if (!socket) return\n\n    const handleChatMessage = (message: { id: string; userId: string; name: string; text: string; timestamp: string }) => {\n      setLocalMessages(prev => [...prev, {\n        id: message.id,\n        studentId: message.userId,\n        studentName: message.name,\n        content: message.text,\n        timestamp: message.timestamp,\n        sentiment: 'neutral',\n        isQuestion: message.text.includes('?'),\n      }])\n    }\n\n    socket.on('chat_message', handleChatMessage)\n    return () => { socket.off('chat_message', handleChatMessage) }\n  }, [socket, students])\n\n  // Auto-scroll to bottom\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight\n    }\n  }, [messages])\n\n  const filteredMessages = localMessages.filter(msg => {\n    if (filter === 'questions') return msg.isQuestion || msg.sentiment === 'confused'\n    if (filter === 'pinned') return msg.isPinned\n    return true\n  })\n\n  const getSentimentIcon = (sentiment: string) => {\n    switch (sentiment) {\n      case 'positive': return <Smile className=\"w-3 h-3 text-green-500\" />\n      case 'negative': return <Frown className=\"w-3 h-3 text-red-500\" />\n      case 'confused': return <AlertCircle className=\"w-3 h-3 text-orange-500\" />\n      case 'question': return <HelpCircle className=\"w-3 h-3 text-blue-500\" />\n      default: return <Meh className=\"w-3 h-3 text-gray-400\" />\n    }\n  }\n\n  const getSentimentColor = (sentiment: string) => {\n    switch (sentiment) {\n      case 'positive': return 'bg-green-50 border-green-200'\n      case 'negative': return 'bg-red-50 border-red-200'\n      case 'confused': return 'bg-orange-50 border-orange-200'\n      case 'question': return 'bg-blue-50 border-blue-200'\n      default: return 'bg-white'\n    }\n  }\n\n  const questionCount = localMessages.filter(m => m.isQuestion || m.sentiment === 'confused').length\n  const pinnedCount = localMessages.filter(m => m.isPinned).length\n\n  const handleSendMessage = () => {\n    if (!inputMessage.trim()) return\n    if (!socket) {\n      toast.error('Not connected to class')\n      return\n    }\n    \n    // Send broadcast via socket\n    socket.emit('tutor_broadcast', {\n      text: inputMessage,\n      targetGroup: 'all'\n    })\n    \n    // Add to local messages\n    setLocalMessages(prev => [...prev, {\n      id: `tutor-${Date.now()}`,\n      studentId: 'tutor',\n      studentName: 'You',\n      content: inputMessage,\n      timestamp: new Date().toISOString(),\n      sentiment: 'neutral',\n    }])\n    \n    setInputMessage('')\n  }\n\n  return (\n    <Card className=\"h-full flex flex-col\">\n      <CardHeader className=\"pb-2\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <MessageSquare className=\"w-4 h-4\" />\n            <CardTitle className=\"text-sm font-medium\">Chat</CardTitle>\n          </div>\n        </div>\n        \n        {/* Filter Tabs */}\n        <div className=\"flex gap-1 mt-2\">\n          <Button\n            variant={filter === 'all' ? 'default' : 'ghost'}\n            size=\"sm\"\n            className=\"flex-1 text-xs h-7\"\n            onClick={() => setFilter('all')}\n          >\n            All\n          </Button>\n          <Button\n            variant={filter === 'questions' ? 'default' : 'ghost'}\n            size=\"sm\"\n            className=\"flex-1 text-xs h-7\"\n            onClick={() => setFilter('questions')}\n          >\n            <HelpCircle className=\"w-3 h-3 mr-1\" />\n            Questions ({questionCount})\n          </Button>\n          <Button\n            variant={filter === 'pinned' ? 'default' : 'ghost'}\n            size=\"sm\"\n            className=\"flex-1 text-xs h-7\"\n            onClick={() => setFilter('pinned')}\n          >\n            <Pin className=\"w-3 h-3 mr-1\" />\n            Pinned ({pinnedCount})\n          </Button>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"flex-1 p-0 flex flex-col\">\n        {/* Messages */}\n        <ScrollArea className=\"flex-1 px-4\" ref={scrollRef}>\n          <div className=\"space-y-3 py-2\">\n            {filteredMessages.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <MessageSquare className=\"w-10 h-10 text-gray-300 mx-auto mb-2\" />\n                <p className=\"text-sm text-gray-500\">\n                  {filter === 'questions' \n                    ? 'No questions yet' \n                    : filter === 'pinned'\n                      ? 'No pinned messages'\n                      : 'No messages yet'}\n                </p>\n              </div>\n            ) : (\n              filteredMessages.map((message) => (\n                <div\n                  key={message.id}\n                  className={cn(\n                    \"p-3 rounded-lg border text-sm\",\n                    getSentimentColor(message.sentiment),\n                    message.isPinned && \"border-yellow-300 shadow-sm\"\n                  )}\n                >\n                  <div className=\"flex items-start justify-between gap-2\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"font-medium text-xs\">{message.studentName}</span>\n                        {getSentimentIcon(message.sentiment)}\n                        {message.isQuestion && (\n                          <Badge variant=\"outline\" className=\"text-xs px-1 py-0 h-4\">\n                            Question\n                          </Badge>\n                        )}\n                      </div>\n                      <p className=\"mt-1 text-gray-700\">{message.content}</p>\n                      <span className=\"text-xs text-gray-400 mt-1\">\n                        {new Date(message.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                      </span>\n                    </div>\n                    \n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-6 w-6 shrink-0\"\n                      onClick={() => onPinMessage?.(message.id)}\n                    >\n                      {message.isPinned ? (\n                        <PinOff className=\"w-3 h-3 text-yellow-600\" />\n                      ) : (\n                        <Pin className=\"w-3 h-3 text-gray-400\" />\n                      )}\n                    </Button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </ScrollArea>\n\n        {/* Input */}\n        <div className=\"p-3 border-t mt-auto\">\n          <div className=\"flex gap-2\">\n            <Input\n              placeholder=\"Broadcast message...\"\n              value={inputMessage}\n              onChange={(e) => setInputMessage(e.target.value)}\n              onKeyDown={(e) => e.key === 'Enter' && handleSendMessage()}\n              className=\"flex-1 text-sm\"\n            />\n            <Button size=\"icon\" onClick={handleSendMessage}>\n              <Send className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1488, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/LiveAnalytics.tsx"],"sourcesContent":["'use client'\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { cn } from '@/lib/utils'\nimport { \n  Users, \n  Clock, \n  MessageSquare, \n  Zap,\n  TrendingUp,\n  TrendingDown,\n  Minus,\n  Activity,\n  PieChart,\n  AlertCircle\n} from 'lucide-react'\nimport type { EngagementMetrics, Alert } from '../types'\n\ninterface LiveAnalyticsProps {\n  metrics: EngagementMetrics\n  alerts: Alert[]\n}\n\nexport function LiveAnalytics({ metrics, alerts }: LiveAnalyticsProps) {\n  const getTrendIcon = (trend: string) => {\n    switch (trend) {\n      case 'up': return <TrendingUp className=\"w-4 h-4 text-green-500\" />\n      case 'down': return <TrendingDown className=\"w-4 h-4 text-red-500\" />\n      default: return <Minus className=\"w-4 h-4 text-gray-400\" />\n    }\n  }\n\n  const getAlertColor = (severity: string) => {\n    switch (severity) {\n      case 'high': return 'bg-red-100 text-red-700 border-red-200'\n      case 'medium': return 'bg-orange-100 text-orange-700 border-orange-200'\n      case 'low': return 'bg-blue-100 text-blue-700 border-blue-200'\n      default: return 'bg-gray-100 text-gray-700'\n    }\n  }\n\n  // Calculate percentages\n  const veryEngagedPct = Math.round((metrics.veryEngaged / metrics.totalStudents) * 100)\n  const engagedPct = Math.round((metrics.engaged / metrics.totalStudents) * 100)\n  const passivePct = Math.round((metrics.passive / metrics.totalStudents) * 100)\n  const disengagedPct = Math.round((metrics.disengaged / metrics.totalStudents) * 100)\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Metrics Grid */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs text-gray-500 mb-1\">Avg. Engagement</p>\n                <p className=\"text-2xl font-bold\">{metrics.averageEngagement}%</p>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                {getTrendIcon(metrics.engagementTrend)}\n                <span className={cn(\n                  \"text-xs font-medium\",\n                  metrics.engagementTrend === 'up' ? 'text-green-600' : \n                  metrics.engagementTrend === 'down' ? 'text-red-600' : 'text-gray-600'\n                )}>\n                  {metrics.engagementTrend === 'up' ? '+5%' : \n                   metrics.engagementTrend === 'down' ? '-3%' : '0%'}\n                </span>\n              </div>\n            </div>\n            <div className=\"mt-2 flex items-center gap-2\">\n              <Activity className=\"w-3 h-3 text-gray-400\" />\n              <span className=\"text-xs text-gray-500\">Last 5 min avg</span>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs text-gray-500 mb-1\">Participation</p>\n                <p className=\"text-2xl font-bold\">{metrics.participationRate}%</p>\n              </div>\n              <MessageSquare className=\"w-5 h-5 text-blue-500\" />\n            </div>\n            <div className=\"mt-2 flex items-center gap-2\">\n              <span className=\"text-xs text-gray-500\">\n                {metrics.totalChatMessages} messages sent\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs text-gray-500 mb-1\">Active Students</p>\n                <p className=\"text-2xl font-bold\">{metrics.activeStudents}</p>\n              </div>\n              <Users className=\"w-5 h-5 text-green-500\" />\n            </div>\n            <div className=\"mt-2\">\n              <span className=\"text-xs text-gray-500\">\n                of {metrics.totalStudents} total\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs text-gray-500 mb-1\">Class Duration</p>\n                <p className=\"text-2xl font-bold\">\n                  {Math.floor(metrics.classDuration / 60)}:\n                  {(metrics.classDuration % 60).toString().padStart(2, '0')}\n                </p>\n              </div>\n              <Clock className=\"w-5 h-5 text-purple-500\" />\n            </div>\n            <div className=\"mt-2\">\n              <span className=\"text-xs text-gray-500\">\n                Started {new Date(metrics.classStartTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Engagement Distribution */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-center gap-2\">\n            <PieChart className=\"w-4 h-4\" />\n            <CardTitle className=\"text-sm font-medium\">Engagement Distribution</CardTitle>\n          </div>\n        </CardHeader>\n        <CardContent className=\"pt-0\">\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-20 text-xs font-medium text-gray-600\">Very Engaged</div>\n              <div className=\"flex-1 h-3 bg-gray-100 rounded-full overflow-hidden\">\n                <div \n                  className=\"h-full bg-green-500 rounded-full transition-all\"\n                  style={{ width: `${veryEngagedPct}%` }}\n                />\n              </div>\n              <span className=\"w-10 text-xs text-right\">{veryEngagedPct}%</span>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-20 text-xs font-medium text-gray-600\">Engaged</div>\n              <div className=\"flex-1 h-3 bg-gray-100 rounded-full overflow-hidden\">\n                <div \n                  className=\"h-full bg-blue-500 rounded-full transition-all\"\n                  style={{ width: `${engagedPct}%` }}\n                />\n              </div>\n              <span className=\"w-10 text-xs text-right\">{engagedPct}%</span>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-20 text-xs font-medium text-gray-600\">Passive</div>\n              <div className=\"flex-1 h-3 bg-gray-100 rounded-full overflow-hidden\">\n                <div \n                  className=\"h-full bg-yellow-500 rounded-full transition-all\"\n                  style={{ width: `${passivePct}%` }}\n                />\n              </div>\n              <span className=\"w-10 text-xs text-right\">{passivePct}%</span>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-20 text-xs font-medium text-gray-600\">Disengaged</div>\n              <div className=\"flex-1 h-3 bg-gray-100 rounded-full overflow-hidden\">\n                <div \n                  className=\"h-full bg-red-500 rounded-full transition-all\"\n                  style={{ width: `${disengagedPct}%` }}\n                />\n              </div>\n              <span className=\"w-10 text-xs text-right\">{disengagedPct}%</span>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Alerts Section */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <Zap className=\"w-4 h-4\" />\n              <CardTitle className=\"text-sm font-medium\">Attention Alerts</CardTitle>\n            </div>\n            {alerts.filter(a => !a.acknowledged).length > 0 && (\n              <Badge variant=\"destructive\" className=\"text-xs\">\n                {alerts.filter(a => !a.acknowledged).length} Active\n              </Badge>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent className=\"pt-0\">\n          {alerts.length === 0 ? (\n            <p className=\"text-sm text-gray-500 text-center py-4\">\n              No alerts - class is going smoothly!\n            </p>\n          ) : (\n            <div className=\"space-y-2\">\n              {alerts.slice(0, 5).map((alert) => (\n                <div \n                  key={alert.id}\n                  className={cn(\n                    \"p-3 rounded-lg border text-sm\",\n                    getAlertColor(alert.severity),\n                    !alert.acknowledged && \"animate-pulse\"\n                  )}\n                >\n                  <div className=\"flex items-start gap-2\">\n                    <AlertCircle className=\"w-4 h-4 mt-0.5 shrink-0\" />\n                    <div>\n                      <p className=\"font-medium\">{alert.title}</p>\n                      <p className=\"text-xs opacity-80 mt-0.5\">{alert.message}</p>\n                      <p className=\"text-xs opacity-60 mt-1\">\n                        {new Date(alert.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2284, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/AITeachingAssistant.tsx"],"sourcesContent":["'use client'\n\nimport { useMemo, useState } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { cn } from '@/lib/utils'\nimport type { LiveStudent, EngagementMetrics } from '../types'\nimport { \n  Sparkles, \n  Lightbulb, \n  AlertTriangle, \n  Clock, \n  MessageCircle,\n  ChevronRight,\n  Check,\n  X,\n  Zap,\n  BookOpen,\n  BarChart3,\n  HelpCircle\n} from 'lucide-react'\n\ninterface AITeachingAssistantProps {\n  students: LiveStudent[]\n  metrics: EngagementMetrics | null\n  currentTopic?: string\n  classDuration: number\n}\n\ninterface AIInsight {\n  id: string\n  type: 'guidance' | 'misconception' | 'pacing' | 'engagement' | 'socratic'\n  title: string\n  message: string\n  suggestion?: string\n  priority: 'high' | 'medium' | 'low'\n  timestamp: string\n  acknowledged: boolean\n  actionable?: boolean\n  actionLabel?: string\n}\n\ninterface SocraticPrompt {\n  id: string\n  context: string\n  question: string\n  followUps: string[]\n  difficulty: 'easy' | 'medium' | 'hard'\n  targetStudentIds?: string[]\n}\n\nconst buildInsights = (students: LiveStudent[], duration: number): AIInsight[] => {\n  const insights: AIInsight[] = []\n  \n  // Check for disengaged students\n  const disengagedStudents = students.filter(s => s.engagementScore < 50 && s.status === 'online')\n  if (disengagedStudents.length > 0) {\n    insights.push({\n      id: 'insight-1',\n      type: 'engagement',\n      title: 'Low Engagement Detected',\n      message: `${disengagedStudents.length} student(s) showing low engagement`,\n      suggestion: 'Try asking a direct question or use a quick poll to re-engage',\n      priority: 'high',\n      timestamp: new Date().toISOString(),\n      acknowledged: false,\n      actionable: true,\n      actionLabel: 'View Students'\n    })\n  }\n  \n  // Pacing insight\n  if (duration > 30 && duration < 35) {\n    insights.push({\n      id: 'insight-2',\n      type: 'pacing',\n      title: 'Pacing Alert',\n      message: 'You\\'ve been on this topic for 30+ minutes',\n      suggestion: 'Consider wrapping up with a summary or moving to practice exercises',\n      priority: 'medium',\n      timestamp: new Date(Date.now() - 1000 * 60 * 5).toISOString(),\n      acknowledged: false,\n      actionable: true,\n      actionLabel: 'Suggest Wrap-up'\n    })\n  }\n  \n  // Common misconception\n  insights.push({\n    id: 'insight-3',\n    type: 'misconception',\n    title: 'Common Misconception Alert',\n    message: '3 students may be confusing \"derivative\" with \"slope\"',\n    suggestion: 'Clarify: Derivative = instantaneous rate, Slope = average rate over interval',\n    priority: 'high',\n    timestamp: new Date(Date.now() - 1000 * 60 * 10).toISOString(),\n    acknowledged: false,\n    actionable: true,\n    actionLabel: 'Show Explanation'\n  })\n  \n  // Socratic guidance\n  insights.push({\n    id: 'insight-4',\n    type: 'socratic',\n    title: 'Socratic Opportunity',\n    message: 'Students are ready for deeper questioning',\n    suggestion: 'Ask: \"What would happen if we changed this variable?\"',\n    priority: 'medium',\n    timestamp: new Date(Date.now() - 1000 * 60 * 3).toISOString(),\n    acknowledged: false,\n    actionable: true,\n    actionLabel: 'Use Question'\n  })\n  \n  return insights\n}\n\nconst buildSocraticPrompts = (): SocraticPrompt[] => [\n  {\n    id: 'prompt-1',\n    context: 'When discussing derivatives',\n    question: 'What do you think would happen to the slope if we made this curve steeper?',\n    followUps: ['Can you explain why?', 'How does that relate to the derivative?', 'What would the graph look like?'],\n    difficulty: 'medium'\n  },\n  {\n    id: 'prompt-2',\n    context: 'For students struggling with concepts',\n    question: 'Can you explain this concept in your own words?',\n    followUps: ['What part is confusing?', 'How would you explain it to a friend?'],\n    difficulty: 'easy'\n  },\n  {\n    id: 'prompt-3',\n    context: 'Advanced challenge',\n    question: 'How would this problem change if we had three variables instead of two?',\n    followUps: ['What new challenges would arise?', 'Which method would still work?'],\n    difficulty: 'hard'\n  }\n]\n\nexport function AITeachingAssistant({ \n  students, \n  metrics, \n  currentTopic = 'Derivatives and Rates of Change',\n  classDuration \n}: AITeachingAssistantProps) {\n  const [activeTab, setActiveTab] = useState<'insights' | 'socratic' | 'guide'>('insights')\n  const [selectedPrompt, setSelectedPrompt] = useState<SocraticPrompt | null>(null)\n  const [showFollowUps, setShowFollowUps] = useState(false)\n  const [acknowledgedIds, setAcknowledgedIds] = useState<string[]>([])\n  const [dismissedIds, setDismissedIds] = useState<string[]>([])\n\n  const socraticPrompts = useMemo(() => buildSocraticPrompts(), [])\n  const insights = useMemo(() => {\n    return buildInsights(students, classDuration)\n      .filter((insight) => !dismissedIds.includes(insight.id))\n      .map((insight) => ({\n        ...insight,\n        acknowledged: acknowledgedIds.includes(insight.id),\n      }))\n  }, [students, classDuration, acknowledgedIds, dismissedIds])\n  \n  const acknowledgeInsight = (id: string) => {\n    setAcknowledgedIds((prev) => (prev.includes(id) ? prev : [...prev, id]))\n  }\n  \n  const dismissInsight = (id: string) => {\n    setDismissedIds((prev) => (prev.includes(id) ? prev : [...prev, id]))\n  }\n  \n  const getInsightIcon = (type: string) => {\n    switch (type) {\n      case 'guidance': return <BookOpen className=\"w-4 h-4 text-blue-500\" />\n      case 'misconception': return <AlertTriangle className=\"w-4 h-4 text-orange-500\" />\n      case 'pacing': return <Clock className=\"w-4 h-4 text-purple-500\" />\n      case 'engagement': return <Zap className=\"w-4 h-4 text-yellow-500\" />\n      case 'socratic': return <HelpCircle className=\"w-4 h-4 text-green-500\" />\n      default: return <Sparkles className=\"w-4 h-4 text-blue-500\" />\n    }\n  }\n  \n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high': return 'bg-red-100 text-red-700 border-red-200'\n      case 'medium': return 'bg-yellow-100 text-yellow-700 border-yellow-200'\n      case 'low': return 'bg-blue-100 text-blue-700 border-blue-200'\n      default: return 'bg-gray-100 text-gray-700'\n    }\n  }\n  \n  const unacknowledgedInsights = insights.filter(i => !i.acknowledged)\n  \n  return (\n    <Card className=\"h-full flex flex-col\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex items-center justify-center\">\n              <Sparkles className=\"w-4 h-4 text-white\" />\n            </div>\n            <div>\n              <CardTitle className=\"text-sm font-medium\">AI Teaching Assistant</CardTitle>\n              <p className=\"text-xs text-gray-500\">Real-time insights & guidance</p>\n            </div>\n          </div>\n          {unacknowledgedInsights.length > 0 && (\n            <Badge variant=\"destructive\" className=\"text-xs\">\n              {unacknowledgedInsights.length} New\n            </Badge>\n          )}\n        </div>\n        \n        {/* Tabs */}\n        <div className=\"flex gap-1 mt-3\">\n          <Button\n            variant={activeTab === 'insights' ? 'default' : 'ghost'}\n            size=\"sm\"\n            className=\"flex-1 text-xs\"\n            onClick={() => setActiveTab('insights')}\n          >\n            <Zap className=\"w-3 h-3 mr-1\" />\n            Insights\n          </Button>\n          <Button\n            variant={activeTab === 'socratic' ? 'default' : 'ghost'}\n            size=\"sm\"\n            className=\"flex-1 text-xs\"\n            onClick={() => setActiveTab('socratic')}\n          >\n            <HelpCircle className=\"w-3 h-3 mr-1\" />\n            Socratic\n          </Button>\n          <Button\n            variant={activeTab === 'guide' ? 'default' : 'ghost'}\n            size=\"sm\"\n            className=\"flex-1 text-xs\"\n            onClick={() => setActiveTab('guide')}\n          >\n            <BookOpen className=\"w-3 h-3 mr-1\" />\n            Guide\n          </Button>\n        </div>\n      </CardHeader>\n      \n      <CardContent className=\"flex-1 p-0\">\n        <ScrollArea className=\"h-[calc(100%-20px)]\">\n          <div className=\"px-4 pb-4\">\n            {activeTab === 'insights' && (\n              <div className=\"space-y-3\">\n                {insights.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <Sparkles className=\"w-10 h-10 text-gray-300 mx-auto mb-2\" />\n                    <p className=\"text-sm text-gray-500\">No insights yet</p>\n                    <p className=\"text-xs text-gray-400\">AI is monitoring the class...</p>\n                  </div>\n                ) : (\n                  insights.map((insight) => (\n                    <div\n                      key={insight.id}\n                      className={cn(\n                        \"p-3 rounded-lg border transition-all\",\n                        insight.acknowledged \n                          ? \"bg-gray-50 border-gray-200 opacity-60\" \n                          : \"bg-white border-gray-200 shadow-sm\",\n                        insight.priority === 'high' && !insight.acknowledged && \"border-l-4 border-l-red-500\"\n                      )}\n                    >\n                      <div className=\"flex items-start gap-3\">\n                        {getInsightIcon(insight.type)}\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"font-medium text-sm\">{insight.title}</span>\n                            <Badge variant=\"outline\" className={cn(\"text-xs\", getPriorityColor(insight.priority))}>\n                              {insight.priority}\n                            </Badge>\n                          </div>\n                          <p className=\"text-sm text-gray-600 mt-1\">{insight.message}</p>\n                          {insight.suggestion && (\n                            <div className=\"mt-2 p-2 bg-blue-50 rounded text-sm text-blue-800\">\n                              <Lightbulb className=\"w-3 h-3 inline mr-1\" />\n                              {insight.suggestion}\n                            </div>\n                          )}\n                          \n                          {!insight.acknowledged && (\n                            <div className=\"flex gap-2 mt-3\">\n                              {insight.actionable && (\n                                <Button size=\"sm\" variant=\"outline\" className=\"flex-1 text-xs\">\n                                  {insight.actionLabel}\n                                  <ChevronRight className=\"w-3 h-3 ml-1\" />\n                                </Button>\n                              )}\n                              <Button \n                                size=\"sm\" \n                                variant=\"ghost\" \n                                className=\"text-xs\"\n                                onClick={() => acknowledgeInsight(insight.id)}\n                              >\n                                <Check className=\"w-3 h-3 mr-1\" />\n                                Got it\n                              </Button>\n                              <Button \n                                size=\"icon\" \n                                variant=\"ghost\" \n                                className=\"h-8 w-8\"\n                                onClick={() => dismissInsight(insight.id)}\n                              >\n                                <X className=\"w-3 h-3\" />\n                              </Button>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            )}\n            \n            {activeTab === 'socratic' && (\n              <div className=\"space-y-3\">\n                {selectedPrompt ? (\n                  <div className=\"space-y-3\">\n                    <Button \n                      variant=\"ghost\" \n                      size=\"sm\" \n                      className=\"text-xs\"\n                      onClick={() => {\n                        setSelectedPrompt(null)\n                        setShowFollowUps(false)\n                      }}\n                    >\n                       Back to prompts\n                    </Button>\n                    \n                    <div className=\"p-4 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg border border-blue-200\">\n                      <Badge className=\"mb-2 bg-blue-600\">Selected Prompt</Badge>\n                      <p className=\"text-sm text-gray-600 mb-2\">{selectedPrompt.context}</p>\n                      <p className=\"font-medium text-lg text-gray-800\">{selectedPrompt.question}</p>\n                      \n                      <Button \n                        className=\"w-full mt-4 gap-2\"\n                        onClick={() => setShowFollowUps(true)}\n                      >\n                        <MessageCircle className=\"w-4 h-4\" />\n                        Ask This Question\n                      </Button>\n                      \n                      {showFollowUps && (\n                        <div className=\"mt-4 space-y-2\">\n                          <p className=\"text-xs font-medium text-gray-500\">Follow-up questions:</p>\n                          {selectedPrompt.followUps.map((followUp, idx) => (\n                            <button\n                              key={idx}\n                              className=\"w-full text-left p-2 bg-white rounded border hover:border-blue-300 text-sm transition-colors\"\n                            >\n                              {followUp}\n                            </button>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"p-3 bg-purple-50 rounded-lg border border-purple-200\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <BookOpen className=\"w-4 h-4 text-purple-600\" />\n                        <span className=\"font-medium text-sm text-purple-800\">Current Topic</span>\n                      </div>\n                      <p className=\"text-sm text-purple-700\">{currentTopic}</p>\n                    </div>\n                    \n                    <p className=\"text-xs text-gray-500 font-medium mt-4 mb-2\">SUGGESTED QUESTIONS</p>\n                    \n                    {socraticPrompts.map((prompt) => (\n                      <button\n                        key={prompt.id}\n                        className=\"w-full text-left p-3 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all\"\n                        onClick={() => setSelectedPrompt(prompt)}\n                      >\n                        <div className=\"flex items-center justify-between mb-1\">\n                          <span className=\"text-xs text-gray-500\">{prompt.context}</span>\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            {prompt.difficulty}\n                          </Badge>\n                        </div>\n                        <p className=\"text-sm font-medium text-gray-800\">{prompt.question}</p>\n                      </button>\n                    ))}\n                  </>\n                )}\n              </div>\n            )}\n            \n            {activeTab === 'guide' && (\n                <div className=\"space-y-4\">\n                  <div className=\"p-3 bg-gradient-to-br from-green-50 to-blue-50 rounded-lg border\">\n                  <h3 className=\"font-medium text-sm mb-2 flex items-center gap-2\">\n                    <BarChart3 className=\"w-4 h-4\" />\n                    Lesson Progress\n                  </h3>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-xs\">\n                      <span className=\"text-gray-600\">Time elapsed</span>\n                      <span className=\"font-medium\">{Math.floor(classDuration / 60)}h {classDuration % 60}m</span>\n                    </div>\n                    <div className=\"h-2 bg-gray-200 rounded-full overflow-hidden\">\n                      <div \n                        className=\"h-full bg-gradient-to-r from-green-500 to-blue-500 rounded-full\"\n                        style={{ width: `${Math.min((classDuration / 90) * 100, 100)}%` }}\n                      />\n                    </div>\n                    <p className=\"text-xs text-gray-500\">\n                      {classDuration < 45 ? 'Early phase - good for introducing concepts' : \n                       classDuration < 75 ? 'Mid-lesson - consider practice activities' : \n                       'Wrapping up - time for summary and review'}\n                    </p>\n                    {metrics && (\n                      <p className=\"text-xs text-gray-500\">\n                        Current class engagement: {metrics.averageEngagement}%\n                      </p>\n                    )}\n                  </div>\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium text-sm flex items-center gap-2\">\n                    <Clock className=\"w-4 h-4\" />\n                    Recommended Next Steps\n                  </h3>\n                  \n                  <div className=\"space-y-2\">\n                    {classDuration < 30 && (\n                      <div className=\"p-3 bg-white rounded-lg border border-gray-200\">\n                        <p className=\"text-sm font-medium\">Continue Concept Introduction</p>\n                        <p className=\"text-xs text-gray-500 mt-1\">Use visual examples and ask for student predictions</p>\n                      </div>\n                    )}\n                    \n                    <div className=\"p-3 bg-white rounded-lg border border-gray-200\">\n                      <p className=\"text-sm font-medium\">Check for Understanding</p>\n                      <p className=\"text-xs text-gray-500 mt-1\">Quick poll: &quot;Rate your confidence 1-5&quot;</p>\n                    </div>\n                    \n                    <div className=\"p-3 bg-white rounded-lg border border-gray-200\">\n                      <p className=\"text-sm font-medium\">Practice Exercise</p>\n                      <p className=\"text-xs text-gray-500 mt-1\">Give students 3 minutes to solve independently</p>\n                    </div>\n                    \n                    <div className=\"p-3 bg-white rounded-lg border border-gray-200\">\n                      <p className=\"text-sm font-medium\">Breakout Discussion</p>\n                      <p className=\"text-xs text-gray-500 mt-1\">Group students to explain concepts to each other</p>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"p-3 bg-yellow-50 rounded-lg border border-yellow-200\">\n                  <h3 className=\"font-medium text-sm mb-2 flex items-center gap-2 text-yellow-800\">\n                    <Lightbulb className=\"w-4 h-4\" />\n                    Teaching Tip\n                  </h3>\n                  <p className=\"text-xs text-yellow-700\">\n                    Students retain 90% of what they teach others. Consider having students explain concepts to the class.\n                  </p>\n                </div>\n              </div>\n            )}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3367, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/StudentProgressPanel.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Progress } from '@/components/ui/progress'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { cn } from '@/lib/utils'\nimport type { LiveStudent } from '../types'\nimport { \n  TrendingUp, \n  Clock, \n  Target,\n  AlertTriangle,\n  BarChart3,\n  Users,\n  ArrowUpRight,\n  ArrowDownRight,\n  Minus\n} from 'lucide-react'\n\ninterface StudentProgressPanelProps {\n  students: LiveStudent[]\n  classDuration: number\n}\n\ninterface ProgressMetric {\n  label: string\n  value: number\n  change: number\n  trend: 'up' | 'down' | 'stable'\n}\n\nexport function StudentProgressPanel({ students, classDuration }: StudentProgressPanelProps) {\n  const [selectedView, setSelectedView] = useState<'overview' | 'individual'>('overview')\n\n  // Calculate metrics\n  const avgEngagement = Math.round(\n    students.filter(s => s.status === 'online').reduce((sum, s) => sum + s.engagementScore, 0) / \n    Math.max(1, students.filter(s => s.status === 'online').length)\n  )\n  \n  const participationRate = Math.round(\n    (students.filter(s => s.chatMessages > 0 || s.reactions > 0).length / Math.max(1, students.length)) * 100\n  )\n  \n  const strugglingStudents = students.filter(s => s.engagementScore < 50 && s.status === 'online')\n  const excellingStudents = students.filter(s => s.engagementScore >= 85 && s.status === 'online')\n\n  // Progress metrics\n  const metrics: ProgressMetric[] = [\n    { label: 'Avg Engagement', value: avgEngagement, change: 5, trend: 'up' },\n    { label: 'Participation', value: participationRate, change: 3, trend: 'up' },\n    { label: 'Attention Rate', value: Math.round((students.filter(s => s.attentionLevel === 'high').length / Math.max(1, students.length)) * 100), change: -2, trend: 'down' },\n  ]\n\n  const getTrendIcon = (trend: string) => {\n    switch (trend) {\n      case 'up': return <ArrowUpRight className=\"w-4 h-4 text-green-500\" />\n      case 'down': return <ArrowDownRight className=\"w-4 h-4 text-red-500\" />\n      default: return <Minus className=\"w-4 h-4 text-gray-400\" />\n    }\n  }\n\n  return (\n    <Card className=\"h-full flex flex-col\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <TrendingUp className=\"w-4 h-4\" />\n            <CardTitle className=\"text-sm font-medium\">Progress Tracking</CardTitle>\n          </div>\n          <div className=\"flex gap-1\">\n            <Button \n              variant={selectedView === 'overview' ? 'default' : 'ghost'} \n              size=\"sm\" \n              className=\"text-xs h-7\"\n              onClick={() => setSelectedView('overview')}\n            >\n              Overview\n            </Button>\n            <Button \n              variant={selectedView === 'individual' ? 'default' : 'ghost'} \n              size=\"sm\" \n              className=\"text-xs h-7\"\n              onClick={() => setSelectedView('individual')}\n            >\n              Students\n            </Button>\n          </div>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"flex-1 p-0\">\n        <ScrollArea className=\"h-[calc(100%-60px)]\">\n          <div className=\"px-4 pb-4 space-y-4\">\n            {selectedView === 'overview' ? (\n              <>\n                {/* Key Metrics */}\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {metrics.map((metric, idx) => (\n                    <div key={idx} className=\"p-3 bg-gray-50 rounded-lg text-center\">\n                      <p className=\"text-lg font-bold\">{metric.value}%</p>\n                      <p className=\"text-xs text-gray-500\">{metric.label}</p>\n                      <div className=\"flex items-center justify-center gap-1 mt-1\">\n                        {getTrendIcon(metric.trend)}\n                        <span className={cn(\n                          \"text-xs\",\n                          metric.trend === 'up' ? 'text-green-600' : \n                          metric.trend === 'down' ? 'text-red-600' : 'text-gray-500'\n                        )}>\n                          {metric.change > 0 ? '+' : ''}{metric.change}%\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n\n                {/* Class Distribution */}\n                <div className=\"p-3 bg-gray-50 rounded-lg\">\n                  <h3 className=\"text-sm font-medium mb-3 flex items-center gap-2\">\n                    <Users className=\"w-4 h-4\" />\n                    Engagement Distribution\n                  </h3>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-xs w-16\">High (85%+)</span>\n                      <div className=\"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden\">\n                        <div \n                          className=\"h-full bg-green-500 rounded-full\"\n                          style={{ width: `${(excellingStudents.length / students.length) * 100}%` }}\n                        />\n                      </div>\n                      <span className=\"text-xs w-8 text-right\">{excellingStudents.length}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-xs w-16\">Medium</span>\n                      <div className=\"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden\">\n                        <div \n                          className=\"h-full bg-blue-500 rounded-full\"\n                          style={{ width: `${((students.filter(s => s.engagementScore >= 50 && s.engagementScore < 85).length) / students.length) * 100}%` }}\n                        />\n                      </div>\n                      <span className=\"text-xs w-8 text-right\">\n                        {students.filter(s => s.engagementScore >= 50 && s.engagementScore < 85).length}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-xs w-16\">Low (&lt;50%)</span>\n                      <div className=\"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden\">\n                        <div \n                          className=\"h-full bg-red-500 rounded-full\"\n                          style={{ width: `${(strugglingStudents.length / students.length) * 100}%` }}\n                        />\n                      </div>\n                      <span className=\"text-xs w-8 text-right\">{strugglingStudents.length}</span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Alerts */}\n                {strugglingStudents.length > 0 && (\n                  <div className=\"p-3 bg-red-50 rounded-lg border border-red-200\">\n                    <h3 className=\"text-sm font-medium text-red-800 mb-2 flex items-center gap-2\">\n                      <AlertTriangle className=\"w-4 h-4\" />\n                      Students Need Attention\n                    </h3>\n                    <div className=\"space-y-2\">\n                      {strugglingStudents.slice(0, 3).map((student) => (\n                        <div key={student.id} className=\"flex items-center justify-between\">\n                          <span className=\"text-sm text-red-700\">{student.name}</span>\n                          <Badge variant=\"outline\" className=\"text-xs bg-white\">\n                            {student.engagementScore}% engagement\n                          </Badge>\n                        </div>\n                      ))}\n                      {strugglingStudents.length > 3 && (\n                        <p className=\"text-xs text-red-600\">\n                          +{strugglingStudents.length - 3} more students\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {/* Activity Timeline */}\n                <div className=\"p-3 bg-gray-50 rounded-lg\">\n                  <h3 className=\"text-sm font-medium mb-3 flex items-center gap-2\">\n                    <Clock className=\"w-4 h-4\" />\n                    Class Activity\n                  </h3>\n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Duration</span>\n                      <span className=\"font-medium\">{Math.floor(classDuration / 60)}h {classDuration % 60}m</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Messages</span>\n                      <span className=\"font-medium\">\n                        {students.reduce((sum, s) => sum + s.chatMessages, 0)}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Reactions</span>\n                      <span className=\"font-medium\">\n                        {students.reduce((sum, s) => sum + s.reactions, 0)}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Hand Raises</span>\n                      <span className=\"font-medium\">\n                        {students.filter(s => s.handRaised).length}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </>\n            ) : (\n              /* Individual Student List */\n              <div className=\"space-y-2\">\n                {students\n                  .sort((a, b) => b.engagementScore - a.engagementScore)\n                  .map((student) => (\n                    <div\n                      key={student.id}\n                      className={cn(\n                        \"p-3 rounded-lg border\",\n                        student.engagementScore >= 85 ? \"bg-green-50 border-green-200\" :\n                        student.engagementScore >= 50 ? \"bg-white border-gray-200\" :\n                        \"bg-red-50 border-red-200\"\n                      )}\n                    >\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <div className=\"flex items-center gap-2\">\n                          <div className={cn(\n                            \"w-2 h-2 rounded-full\",\n                            student.status === 'online' ? \"bg-green-500\" : \n                            student.status === 'idle' ? \"bg-yellow-500\" : \"bg-gray-400\"\n                          )} />\n                          <span className=\"font-medium text-sm\">{student.name}</span>\n                        </div>\n                        <span className={cn(\n                          \"text-sm font-bold\",\n                          student.engagementScore >= 85 ? \"text-green-600\" :\n                          student.engagementScore >= 50 ? \"text-blue-600\" :\n                          \"text-red-600\"\n                        )}>\n                          {student.engagementScore}%\n                        </span>\n                      </div>\n                      \n                      <Progress \n                        value={student.engagementScore} \n                        className=\"h-1.5\"\n                      />\n                      \n                      <div className=\"flex items-center gap-3 mt-2 text-xs text-gray-500\">\n                        <span className=\"flex items-center gap-1\">\n                          <Target className=\"w-3 h-3\" />\n                          {student.attentionLevel}\n                        </span>\n                        <span></span>\n                        <span>{student.chatMessages} messages</span>\n                        <span></span>\n                        <span>{student.reactions} reactions</span>\n                      </div>\n                    </div>\n                  ))}\n              </div>\n            )}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4133, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/CourseStructureLinkPanel.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useMemo, useState, useCallback, useRef } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { BookOpen, RefreshCw, Loader2 } from 'lucide-react'\nimport { CourseBuilder } from '../../dashboard/components/CourseBuilder'\nimport type { Module as CourseBuilderModule } from '../../dashboard/components/CourseBuilder'\nimport type { VisibleDocumentPayload } from '../../dashboard/components/CourseBuilder'\nimport { toast } from 'sonner'\n\ninterface CourseSummary {\n  id: string\n  name: string\n  subject: string\n}\n\ninterface CourseStructureLinkPanelProps {\n  buttonClassName?: string\n  initialCourseId?: string | null\n  classSubject?: string\n  onMakeVisibleToStudents?: (payload: VisibleDocumentPayload) => void\n}\n\nexport function CourseStructureLinkPanel({ buttonClassName, initialCourseId, classSubject, onMakeVisibleToStudents }: CourseStructureLinkPanelProps) {\n  const [open, setOpen] = useState(false)\n  const [courses, setCourses] = useState<CourseSummary[]>([])\n  const [selectedCourseId, setSelectedCourseId] = useState<string>('')\n  const [loadingCourses, setLoadingCourses] = useState(false)\n  const [loadingBuilder, setLoadingBuilder] = useState(false)\n  const [savingBuilder, setSavingBuilder] = useState(false)\n  const [modules, setModules] = useState<CourseBuilderModule[] | null>(null)\n  const [builderVersion, setBuilderVersion] = useState(0)\n  const [panelWidth, setPanelWidth] = useState(720)\n  const isResizingRef = useRef(false)\n\n  const selectedCourse = useMemo(\n    () => courses.find((course) => course.id === selectedCourseId) || null,\n    [courses, selectedCourseId]\n  )\n\n  const loadCourses = useCallback(async () => {\n    setLoadingCourses(true)\n    try {\n      const res = await fetch('/api/tutor/courses', { credentials: 'include' })\n      if (!res.ok) throw new Error('Failed to load courses')\n      const data = await res.json()\n      const nextCourses = (Array.isArray(data.courses) ? data.courses : []) as CourseSummary[]\n      setCourses(nextCourses)\n\n      const preferred = initialCourseId && nextCourses.some((course) => course.id === initialCourseId)\n        ? initialCourseId\n        : null\n      if (preferred) {\n        setSelectedCourseId(preferred)\n      } else if (!selectedCourseId && nextCourses.length > 0) {\n        setSelectedCourseId(nextCourses[0].id)\n      }\n    } catch {\n      setCourses([])\n    } finally {\n      setLoadingCourses(false)\n    }\n  }, [selectedCourseId, initialCourseId])\n\n  const loadBuilderTree = useCallback(async (courseId: string) => {\n    if (!courseId) return\n    setLoadingBuilder(true)\n    try {\n      const res = await fetch(`/api/tutor/courses/${courseId}/curriculum`, { credentials: 'include' })\n      if (!res.ok) throw new Error('Failed to load course builder data')\n      const data = await res.json()\n      setModules(Array.isArray(data.modules) ? (data.modules as CourseBuilderModule[]) : [])\n      setBuilderVersion((prev) => prev + 1)\n    } catch {\n      setModules([])\n      toast.error('Failed to load course content')\n    } finally {\n      setLoadingBuilder(false)\n    }\n  }, [])\n\n  useEffect(() => {\n    loadCourses()\n  }, [loadCourses])\n\n  useEffect(() => {\n    if (!open || !selectedCourseId) return\n    loadBuilderTree(selectedCourseId)\n  }, [open, selectedCourseId, loadBuilderTree])\n\n  const handleSave = async (\n    nextModules: CourseBuilderModule[],\n    options?: {\n      developmentMode: 'single' | 'multi'\n      previewDifficulty: 'all' | 'beginner' | 'intermediate' | 'advanced'\n    }\n  ) => {\n    if (!selectedCourseId) return\n    setSavingBuilder(true)\n    try {\n      const csrfRes = await fetch('/api/csrf', { credentials: 'include' })\n      const csrfData = await csrfRes.json().catch(() => ({}))\n      const csrfToken = csrfData?.token ?? null\n\n      const res = await fetch(`/api/tutor/courses/${selectedCourseId}/curriculum`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(csrfToken && { 'X-CSRF-Token': csrfToken }),\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          modules: nextModules,\n          developmentMode: options?.developmentMode ?? 'single',\n          previewDifficulty: options?.previewDifficulty ?? 'all',\n        }),\n      })\n\n      const data = await res.json().catch(() => ({}))\n      if (!res.ok) {\n        toast.error(data.error ?? 'Failed to save curriculum')\n        return\n      }\n\n      setModules(nextModules)\n      toast.success(`Curriculum saved  ${data.moduleCount ?? nextModules.length} modules`)\n    } catch {\n      toast.error('Failed to save curriculum')\n    } finally {\n      setSavingBuilder(false)\n    }\n  }\n\n  const buttonLabel = selectedCourse?.name ?? (classSubject ? `${classSubject} Class` : 'Course Builder')\n\n  useEffect(() => {\n    const applyDefaultWidth = () => {\n      const viewport = window.innerWidth\n      const preferred = Math.round(viewport * 0.48)\n      const clamped = Math.max(420, Math.min(Math.max(620, viewport - 280), preferred))\n      setPanelWidth(clamped)\n    }\n\n    applyDefaultWidth()\n    window.addEventListener('resize', applyDefaultWidth)\n    return () => window.removeEventListener('resize', applyDefaultWidth)\n  }, [])\n\n  useEffect(() => {\n    const handleMove = (event: MouseEvent) => {\n      if (!isResizingRef.current) return\n      const maxWidth = Math.max(620, window.innerWidth - 240)\n      const nextWidth = Math.max(420, Math.min(maxWidth, event.clientX))\n      setPanelWidth(nextWidth)\n    }\n\n    const handleTouchMove = (event: TouchEvent) => {\n      if (!isResizingRef.current) return\n      const touch = event.touches[0]\n      if (!touch) return\n      const maxWidth = Math.max(620, window.innerWidth - 240)\n      const nextWidth = Math.max(420, Math.min(maxWidth, touch.clientX))\n      setPanelWidth(nextWidth)\n    }\n\n    const handleUp = () => {\n      isResizingRef.current = false\n      document.body.style.userSelect = ''\n      document.body.style.cursor = ''\n    }\n\n    window.addEventListener('mousemove', handleMove)\n    window.addEventListener('touchmove', handleTouchMove, { passive: true })\n    window.addEventListener('mouseup', handleUp)\n    window.addEventListener('touchend', handleUp)\n    return () => {\n      window.removeEventListener('mousemove', handleMove)\n      window.removeEventListener('touchmove', handleTouchMove)\n      window.removeEventListener('mouseup', handleUp)\n      window.removeEventListener('touchend', handleUp)\n    }\n  }, [])\n\n  const startResize = () => {\n    isResizingRef.current = true\n    document.body.style.userSelect = 'none'\n    document.body.style.cursor = 'col-resize'\n  }\n\n  return (\n    <>\n      <Button variant=\"outline\" size=\"sm\" className={buttonClassName} onClick={() => setOpen(true)}>\n        <BookOpen className=\"w-4 h-4 mr-2\" />\n        <span className=\"max-w-[220px] truncate\">{buttonLabel}</span>\n      </Button>\n\n      {open && (\n        <div className=\"fixed inset-0 z-50\">\n          <button\n            type=\"button\"\n            aria-label=\"Close course builder panel overlay\"\n            className=\"absolute inset-0 bg-black/65\"\n            onClick={() => setOpen(false)}\n          />\n\n          <div\n            className=\"absolute inset-y-0 left-0 flex h-full border-r bg-background shadow-xl\"\n            style={{ width: `${panelWidth}px` }}\n          >\n            <button\n              type=\"button\"\n              aria-label=\"Resize course builder panel\"\n              onMouseDown={startResize}\n              onTouchStart={startResize}\n              className=\"absolute right-0 top-0 z-20 h-full w-3 cursor-col-resize border-r border-transparent bg-transparent transition-colors hover:border-blue-300\"\n            />\n            <div className=\"flex h-full min-w-0 flex-1 flex-col\">\n              <div className=\"border-b px-6 py-4\">\n                <div className=\"text-lg font-semibold\">Live Course Builder Panel</div>\n                <div className=\"text-sm text-muted-foreground\">\n                  This is the same builder as Course Builder page. Changes stay in sync.\n                </div>\n              </div>\n\n            <div className=\"flex items-center gap-2 border-b px-6 py-3\">\n              <div className=\"w-[360px]\">\n                <Select value={selectedCourseId} onValueChange={setSelectedCourseId}>\n                  <SelectTrigger>\n                    <SelectValue placeholder={loadingCourses ? 'Loading courses' : 'Select a course'} />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {courses.map((course) => (\n                      <SelectItem key={course.id} value={course.id}>\n                        {course.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                disabled={!selectedCourseId || loadingBuilder}\n                onClick={() => loadBuilderTree(selectedCourseId)}\n              >\n                <RefreshCw className=\"w-4 h-4 mr-2\" />\n                {loadingBuilder ? 'Syncing' : 'Sync'}\n              </Button>\n              {savingBuilder && (\n                <Badge variant=\"secondary\">Saving</Badge>\n              )}\n            </div>\n\n            <div className=\"min-h-0 flex-1 overflow-hidden\">\n              {!selectedCourseId ? (\n                <div className=\"flex h-full items-center justify-center text-sm text-muted-foreground\">\n                  Select a course to open the builder.\n                </div>\n              ) : loadingBuilder || modules === null ? (\n                <div className=\"flex h-full items-center justify-center\">\n                  <Loader2 className=\"h-6 w-6 animate-spin text-blue-500\" />\n                </div>\n              ) : (\n                <div className=\"h-full overflow-auto px-4 py-4\">\n                  <CourseBuilder\n                    key={`${selectedCourseId}:${builderVersion}`}\n                    courseId={selectedCourseId}\n                    courseName={selectedCourse?.name}\n                    panelMode=\"live-class\"\n                    initialModules={modules}\n                    onSave={handleSave}\n                    onMakeVisibleToStudents={(payload) => {\n                      setOpen(false)\n                      onMakeVisibleToStudents?.(payload)\n                    }}\n                  />\n                </div>\n              )}\n            </div>\n\n            <button\n              type=\"button\"\n              className=\"absolute right-4 top-4 rounded border border-border bg-background px-2 py-1 text-xs text-muted-foreground hover:text-foreground\"\n              onClick={() => setOpen(false)}\n            >\n              Close\n            </button>\n          </div>\n        </div>\n        </div>\n      )}\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4608, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/LiveSharedDocumentModal.tsx"],"sourcesContent":["'use client'\n\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Switch } from '@/components/ui/switch'\nimport { Label } from '@/components/ui/label'\nimport { Badge } from '@/components/ui/badge'\nimport { PDFCollaborativeViewer } from '@/components/pdf-tutoring/PDFCollaborativeViewer'\n\nexport interface LiveDocumentCollaborationPolicy {\n  allowDrawing: boolean\n  allowTyping: boolean\n  allowShapes: boolean\n}\n\nexport interface LiveSharedDocument {\n  shareId: string\n  classRoomId: string\n  ownerId: string\n  ownerName: string\n  assignedStudentId?: string\n  templateShareId?: string\n  title: string\n  description?: string\n  fileUrl: string\n  mimeType?: string\n  pdfRoomId: string\n  visibleToAll: boolean\n  allowCollaborativeWrite: boolean\n  collaborationPolicy?: LiveDocumentCollaborationPolicy\n  active: boolean\n  submissions?: Array<{ userId: string; userName: string; submittedAt: number }>\n  updatedAt: number\n}\n\ninterface LiveSharedDocumentModalProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  share: LiveSharedDocument | null\n  viewerRole: 'tutor' | 'student'\n  canManageShare?: boolean\n  onVisibilityChange?: (visible: boolean) => void\n  onWriteAccessChange?: (allow: boolean) => void\n  onCollaborationPolicyChange?: (policy: LiveDocumentCollaborationPolicy) => void\n  onSubmitToTutor?: () => void\n  hasSubmitted?: boolean\n}\n\nexport function LiveSharedDocumentModal({\n  open,\n  onOpenChange,\n  share,\n  viewerRole,\n  canManageShare = false,\n  onVisibilityChange,\n  onWriteAccessChange,\n  onCollaborationPolicyChange,\n  onSubmitToTutor,\n  hasSubmitted = false,\n}: LiveSharedDocumentModalProps) {\n  if (!share) return null\n  const isPdf = (share.mimeType || '').includes('pdf') || share.fileUrl.toLowerCase().includes('.pdf')\n  const isReadOnly = !share.allowCollaborativeWrite && !canManageShare\n  const collaborationPolicy: LiveDocumentCollaborationPolicy = {\n    allowDrawing: share.collaborationPolicy?.allowDrawing ?? true,\n    allowTyping: share.collaborationPolicy?.allowTyping ?? true,\n    allowShapes: share.collaborationPolicy?.allowShapes ?? true,\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-h-[92vh] w-[95vw] max-w-[1300px] overflow-hidden p-0\">\n        <div className=\"flex h-full flex-col\">\n          <DialogHeader className=\"border-b px-5 py-4\">\n            <div className=\"flex items-center gap-2\">\n              <DialogTitle>{share.title}</DialogTitle>\n              <Badge variant=\"outline\">Owner: {share.ownerName}</Badge>\n              <Badge variant={share.visibleToAll ? 'default' : 'secondary'}>\n                {share.visibleToAll ? 'Visible to class' : 'Private copy'}\n              </Badge>\n              <Badge variant=\"outline\">\n                Submissions: {share.submissions?.length || 0}\n              </Badge>\n            </div>\n            <DialogDescription>\n              {share.description || 'Shared live document session'}\n            </DialogDescription>\n          </DialogHeader>\n\n          {canManageShare && (\n            <div className=\"grid grid-cols-1 gap-4 border-b px-5 py-3 md:grid-cols-2\">\n              <div className=\"flex items-center gap-2\">\n                <Switch checked={share.visibleToAll} onCheckedChange={onVisibilityChange} />\n                <Label>Visible to everyone in this live class</Label>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Switch checked={share.allowCollaborativeWrite} onCheckedChange={onWriteAccessChange} />\n                <Label>Allow others to write/type on this document</Label>\n              </div>\n              <div className=\"col-span-full grid grid-cols-1 gap-3 rounded-md border bg-muted/20 px-3 py-2 md:grid-cols-3\">\n                <div className=\"flex items-center gap-2\">\n                  <Switch\n                    checked={collaborationPolicy.allowDrawing}\n                    onCheckedChange={(checked) => onCollaborationPolicyChange?.({ ...collaborationPolicy, allowDrawing: checked })}\n                    disabled={!share.allowCollaborativeWrite}\n                  />\n                  <Label>Allow drawing</Label>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Switch\n                    checked={collaborationPolicy.allowTyping}\n                    onCheckedChange={(checked) => onCollaborationPolicyChange?.({ ...collaborationPolicy, allowTyping: checked })}\n                    disabled={!share.allowCollaborativeWrite}\n                  />\n                  <Label>Allow typing</Label>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Switch\n                    checked={collaborationPolicy.allowShapes}\n                    onCheckedChange={(checked) => onCollaborationPolicyChange?.({ ...collaborationPolicy, allowShapes: checked })}\n                    disabled={!share.allowCollaborativeWrite}\n                  />\n                  <Label>Allow shapes</Label>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {!canManageShare && onSubmitToTutor && (\n            <div className=\"border-b px-5 py-3\">\n              <button\n                type=\"button\"\n                onClick={onSubmitToTutor}\n                disabled={hasSubmitted}\n                className=\"rounded border px-3 py-1.5 text-sm hover:bg-muted disabled:opacity-60\"\n              >\n                {hasSubmitted ? 'Submitted to Tutor' : 'Submit to Tutor'}\n              </button>\n            </div>\n          )}\n\n          <div className=\"min-h-0 flex-1 overflow-auto p-0\">\n            {isPdf ? (\n              <PDFCollaborativeViewer\n                roomId={share.pdfRoomId}\n                role={viewerRole}\n                initialPdfUrl={share.fileUrl}\n                forceLocked={isReadOnly}\n                showLockControl={canManageShare}\n                showCollabStatus={viewerRole === 'tutor'}\n                showAiActions={viewerRole === 'tutor'}\n                capabilities={{\n                  draw: canManageShare || (share.allowCollaborativeWrite && collaborationPolicy.allowDrawing),\n                  erase: canManageShare || (share.allowCollaborativeWrite && collaborationPolicy.allowDrawing),\n                  text: canManageShare || (share.allowCollaborativeWrite && collaborationPolicy.allowTyping),\n                  shapes: canManageShare || (share.allowCollaborativeWrite && collaborationPolicy.allowShapes),\n                  select: canManageShare || share.allowCollaborativeWrite,\n                  clear: canManageShare || share.allowCollaborativeWrite,\n                }}\n              />\n            ) : (\n              <div className=\"m-4 rounded-lg border bg-muted/20 p-4 text-sm\">\n                <p className=\"font-medium\">This file is not a PDF.</p>\n                <p className=\"text-muted-foreground\">\n                  Open the source file in a new tab. PDF canvas annotation is available for PDF files.\n                </p>\n                <a\n                  href={share.fileUrl}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  className=\"mt-3 inline-block text-blue-600 underline\"\n                >\n                  Open source file\n                </a>\n              </div>\n            )}\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4962, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/MultiLayerWhiteboardInterface.tsx"],"sourcesContent":["'use client'\n\nimport { useMemo, useEffect, useState, useCallback, useRef } from 'react'\nimport { useSession } from 'next-auth/react'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { TutorWhiteboardManager } from './TutorWhiteboardManager'\nimport { StudentLiveWhiteboard } from '@/app/[locale]/student/live/components/StudentLiveWhiteboard'\nimport { PDFCollaborativeViewer } from '@/components/pdf-tutoring/PDFCollaborativeViewer'\nimport { useSimpleSocket } from '@/hooks/use-simple-socket'\nimport { LiveSharedDocumentModal, LiveSharedDocument, type LiveDocumentCollaborationPolicy } from './LiveSharedDocumentModal'\nimport type { VisibleDocumentPayload } from '../../dashboard/components/CourseBuilder'\nimport { Layers, Users, Radio, Eye } from 'lucide-react'\nimport { toast } from 'sonner'\n\ninterface MultiLayerStudent {\n  id: string\n  name: string\n  status: string\n  engagement: number\n}\n\ninterface MultiLayerWhiteboardInterfaceProps {\n  sessionId: string\n  roomId: string\n  initialCourseId?: string | null\n  classSubject?: string\n  students: MultiLayerStudent[]\n  isSocketConnected: boolean\n  onLayerUpdate?: (layerData: unknown) => void\n  onPermissionChange?: (permissionData: unknown) => void\n}\n\nexport function MultiLayerWhiteboardInterface({\n  sessionId,\n  roomId,\n  initialCourseId,\n  classSubject,\n  students,\n  isSocketConnected,\n}: MultiLayerWhiteboardInterfaceProps) {\n  const { data: session } = useSession()\n  const isTutor = session?.user?.role === 'TUTOR'\n  const userId = session?.user?.id\n  const userName = session?.user?.name || (isTutor ? 'Tutor' : 'Student')\n  const socketRole: 'tutor' | 'student' = isTutor ? 'tutor' : 'student'\n  const { socket } = useSimpleSocket(roomId, {\n    userId,\n    name: userName,\n    role: socketRole,\n  })\n  const [shares, setShares] = useState<Record<string, LiveSharedDocument>>({})\n  const [activeShareId, setActiveShareId] = useState<string | null>(null)\n  const [uploadingPersonalDoc, setUploadingPersonalDoc] = useState(false)\n  const announcedSharesRef = useRef<Set<string>>(new Set())\n\n  const connectedStudents = useMemo(\n    () => students.filter((student) => student.status === 'online').length,\n    [students]\n  )\n\n  const publishShare = useCallback((share: LiveSharedDocument) => {\n    if (socket) {\n      socket.emit('live_doc_share_update', share)\n    }\n  }, [socket])\n\n  const handleShareRequestFromBuilder = useCallback((payload: VisibleDocumentPayload) => {\n    if (!userId || !payload.sourceDocument) return\n    const shareId = `share-${Date.now()}-${Math.random().toString(36).slice(2, 7)}`\n    const share: LiveSharedDocument = {\n      shareId,\n      classRoomId: roomId,\n      ownerId: userId,\n      ownerName: userName,\n      title: payload.title,\n      description: payload.description,\n      fileUrl: payload.sourceDocument.fileUrl,\n      mimeType: payload.sourceDocument.mimeType,\n      pdfRoomId: `${roomId}:pdf-share:${userId}:${shareId}`,\n      visibleToAll: true,\n      allowCollaborativeWrite: true,\n      collaborationPolicy: {\n        allowDrawing: true,\n        allowTyping: true,\n        allowShapes: true,\n      },\n      active: true,\n      submissions: [],\n      updatedAt: Date.now(),\n    }\n    setShares((prev) => ({ ...prev, [shareId]: share }))\n    publishShare(share)\n    setActiveShareId(shareId)\n  }, [publishShare, roomId, userId, userName])\n\n  const uploadAndSharePersonalDocument = useCallback(async (file: File) => {\n    if (!socket || !userId) return\n    setUploadingPersonalDoc(true)\n    try {\n      const formData = new FormData()\n      formData.append('file', file)\n      const uploadRes = await fetch('/api/uploads/documents', {\n        method: 'POST',\n        credentials: 'include',\n        body: formData,\n      })\n      if (!uploadRes.ok) return\n      const uploadData = await uploadRes.json()\n      const shareId = `share-${Date.now()}-${Math.random().toString(36).slice(2, 7)}`\n      const share: LiveSharedDocument = {\n        shareId,\n        classRoomId: roomId,\n        ownerId: userId,\n        ownerName: userName,\n        title: file.name,\n        description: 'Student shared document',\n        fileUrl: uploadData.url,\n        mimeType: file.type,\n        pdfRoomId: `${roomId}:pdf-share:${userId}:${shareId}`,\n        visibleToAll: true,\n        allowCollaborativeWrite: true,\n        collaborationPolicy: {\n          allowDrawing: true,\n          allowTyping: true,\n          allowShapes: true,\n        },\n        active: true,\n        updatedAt: Date.now(),\n      }\n      publishShare(share)\n      setActiveShareId(shareId)\n    } finally {\n      setUploadingPersonalDoc(false)\n    }\n  }, [publishShare, roomId, socket, userId, userName])\n\n  useEffect(() => {\n    if (!socket || !roomId) return\n\n    const handleShareUpdate = (share: LiveSharedDocument) => {\n      if (share.classRoomId !== roomId) return\n      setShares((prev) => ({ ...prev, [share.shareId]: share }))\n      if (\n        share.active &&\n        (share.visibleToAll || share.ownerId === userId) &&\n        !announcedSharesRef.current.has(share.shareId)\n      ) {\n        announcedSharesRef.current.add(share.shareId)\n        toast.info(`Live task available: ${share.title}. Open from Tasks.`)\n      }\n      if (share.active && (share.visibleToAll || share.ownerId === userId)) {\n        setActiveShareId(share.shareId)\n      }\n    }\n\n    const handleShareSubmission = (data: {\n      classRoomId: string\n      shareId: string\n      userId: string\n      userName: string\n      submittedAt: number\n    }) => {\n      if (data.classRoomId !== roomId) return\n      setShares((prev) => {\n        const current = prev[data.shareId]\n        if (!current) return prev\n        const existing = current.submissions || []\n        if (existing.some((submission) => submission.userId === data.userId)) return prev\n        return {\n          ...prev,\n          [data.shareId]: {\n            ...current,\n            submissions: [...existing, { userId: data.userId, userName: data.userName, submittedAt: data.submittedAt }],\n            updatedAt: Date.now(),\n          },\n        }\n      })\n    }\n\n    const handleShareState = (data: { classRoomId: string; shares: LiveSharedDocument[] }) => {\n      if (data.classRoomId !== roomId) return\n      const next: Record<string, LiveSharedDocument> = {}\n      data.shares.forEach((share) => {\n        next[share.shareId] = share\n      })\n      setShares(next)\n    }\n\n    socket.on('live_doc_share_update', handleShareUpdate)\n    socket.on('live_doc_share_state', handleShareState)\n    socket.on('live_doc_task_submitted', handleShareSubmission)\n    socket.emit('live_doc_share_state_request', { classRoomId: roomId })\n\n    return () => {\n      socket.off('live_doc_share_update', handleShareUpdate)\n      socket.off('live_doc_share_state', handleShareState)\n      socket.off('live_doc_task_submitted', handleShareSubmission)\n    }\n  }, [socket, roomId, userId])\n\n  const activeShare = activeShareId ? shares[activeShareId] || null : null\n  const canManageActiveShare = Boolean(activeShare && userId && activeShare.ownerId === userId)\n  const visibleShares = useMemo(\n    () =>\n      Object.values(shares)\n        .filter((share) => share.active && (share.visibleToAll || share.ownerId === userId))\n        .sort((a, b) => b.updatedAt - a.updatedAt),\n    [shares, userId]\n  )\n  const updateActiveSharePolicy = useCallback((policy: LiveDocumentCollaborationPolicy) => {\n    if (!activeShare || !canManageActiveShare) return\n    publishShare({ ...activeShare, collaborationPolicy: policy })\n  }, [activeShare, canManageActiveShare, publishShare])\n\n  if (isTutor) {\n    return (\n      <>\n        <div className=\"h-full grid grid-cols-1 xl:grid-cols-[1fr_300px] gap-4\">\n          <div className=\"min-h-0\">\n            <TutorWhiteboardManager\n              roomId={roomId}\n              sessionId={sessionId}\n              initialCourseId={initialCourseId}\n              classSubject={classSubject}\n              students={students.map((student) => ({ id: student.id, name: student.name }))}\n              onDocumentVisibleToStudents={handleShareRequestFromBuilder}\n            />\n          </div>\n\n          <Card className=\"min-h-0 overflow-hidden\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-base flex items-center gap-2\">\n                <Layers className=\"w-4 h-4 text-blue-600\" />\n                Multi-Layer Controls\n              </CardTitle>\n              <CardDescription>\n                Broadcast your board and monitor student boards in real time.\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-3 text-sm\">\n              <div className=\"flex items-center justify-between p-2 rounded-md bg-gray-50 border\">\n                <span className=\"text-gray-600\">Socket</span>\n                <Badge variant={isSocketConnected ? 'default' : 'secondary'}>\n                  {isSocketConnected ? 'Connected' : 'Offline'}\n                </Badge>\n              </div>\n              <div className=\"flex items-center justify-between p-2 rounded-md bg-gray-50 border\">\n                <span className=\"text-gray-600 flex items-center gap-1\">\n                  <Users className=\"w-3 h-3\" />\n                  Online Students\n                </span>\n                <span className=\"font-medium\">{connectedStudents}</span>\n              </div>\n              <div className=\"flex items-center justify-between p-2 rounded-md bg-gray-50 border\">\n                <span className=\"text-gray-600\">Total Boards</span>\n                <span className=\"font-medium\">{students.length + 1}</span>\n              </div>\n\n              <div className=\"pt-2 space-y-2 text-xs text-gray-600\">\n                <p className=\"flex items-start gap-1\">\n                  <Radio className=\"w-3 h-3 mt-0.5 text-red-500\" />\n                  <strong>Broadcast</strong>: send your whiteboard to all students in real time.\n                </p>\n                <p className=\"flex items-start gap-1\">\n                  <Eye className=\"w-3 h-3 mt-0.5 text-blue-500\" />\n                  <strong>Lock Student Layers</strong>: prevent students from drawing until you unlock.\n                </p>\n                <p className=\"flex items-start gap-1\">\n                  <Eye className=\"w-3 h-3 mt-0.5 text-muted-foreground\" />\n                  Switch to <strong>Students</strong> to review individual work quickly.\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <LiveSharedDocumentModal\n          open={Boolean(activeShare)}\n          onOpenChange={(open) => {\n            if (!open) setActiveShareId(null)\n          }}\n          share={activeShare}\n          viewerRole=\"tutor\"\n          canManageShare={canManageActiveShare}\n          onVisibilityChange={(visible) => {\n            if (!activeShare || !canManageActiveShare) return\n            publishShare({ ...activeShare, visibleToAll: visible, active: visible })\n          }}\n          onWriteAccessChange={(allow) => {\n            if (!activeShare || !canManageActiveShare) return\n            publishShare({ ...activeShare, allowCollaborativeWrite: allow })\n          }}\n          onCollaborationPolicyChange={updateActiveSharePolicy}\n        />\n      </>\n    )\n  }\n\n  return (\n    <>\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-base flex items-center gap-2\">\n            <Layers className=\"w-4 h-4 text-blue-600\" />\n            Collaborative Whiteboard\n          </CardTitle>\n          <CardDescription>\n            Draw on your own layer while viewing tutor annotations in real time.\n          </CardDescription>\n          <div className=\"pt-2\">\n            <Button size=\"sm\" variant=\"outline\" disabled={uploadingPersonalDoc} asChild>\n              <label className=\"cursor-pointer\">\n                {uploadingPersonalDoc ? 'Sharing...' : 'Share My Document'}\n                <input\n                  type=\"file\"\n                  className=\"hidden\"\n                  accept=\".pdf,.txt,.md,.doc,.docx,image/*\"\n                  onChange={(event) => {\n                    const file = event.target.files?.[0]\n                    if (!file) return\n                    void uploadAndSharePersonalDocument(file)\n                    event.currentTarget.value = ''\n                  }}\n                />\n              </label>\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent className=\"h-[calc(100%-84px)] p-3\">\n          <Tabs defaultValue=\"student-board\" className=\"h-full\">\n            <TabsList className=\"mb-2\">\n              <TabsTrigger value=\"student-board\">Whiteboard</TabsTrigger>\n              <TabsTrigger value=\"student-pdf\">PDF Tutoring</TabsTrigger>\n            </TabsList>\n            <TabsContent value=\"student-board\" className=\"h-[calc(100%-40px)] m-0\">\n              <StudentLiveWhiteboard\n                roomId={roomId}\n                sessionId={sessionId}\n                mode=\"embedded\"\n                visibleTaskShares={visibleShares}\n                onOpenTask={(shareId) => setActiveShareId(shareId)}\n              />\n            </TabsContent>\n            <TabsContent value=\"student-pdf\" className=\"h-[calc(100%-40px)] m-0 overflow-auto\">\n              <PDFCollaborativeViewer roomId={`${roomId}:pdf`} role=\"student\" />\n            </TabsContent>\n          </Tabs>\n        </CardContent>\n      </Card>\n\n      <LiveSharedDocumentModal\n        open={Boolean(activeShare)}\n        onOpenChange={(open) => {\n          if (!open) setActiveShareId(null)\n        }}\n        share={activeShare}\n        viewerRole={socketRole}\n        canManageShare={canManageActiveShare}\n        onVisibilityChange={(visible) => {\n          if (!activeShare || !canManageActiveShare) return\n          publishShare({ ...activeShare, visibleToAll: visible, active: visible })\n        }}\n        onWriteAccessChange={(allow) => {\n          if (!activeShare || !canManageActiveShare) return\n          publishShare({ ...activeShare, allowCollaborativeWrite: allow })\n        }}\n        onCollaborationPolicyChange={updateActiveSharePolicy}\n        onSubmitToTutor={() => {\n          if (!socket || !activeShare || !userId) return\n          socket.emit('live_doc_task_submit', {\n            classRoomId: roomId,\n            shareId: activeShare.shareId,\n            userId,\n            userName,\n          })\n        }}\n        hasSubmitted={Boolean(activeShare?.submissions?.some((submission) => submission.userId === userId))}\n      />\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5730, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/ChatPanel.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { Badge } from '@/components/ui/badge'\nimport { cn } from '@/lib/utils'\nimport { toast } from 'sonner'\nimport {\n  Send,\n  Paperclip,\n  Smile,\n  Pin,\n  MoreVertical,\n  ThumbsUp,\n  AlertCircle,\n  Check\n} from 'lucide-react'\n\ninterface ChatMessage {\n  id: string\n  senderId: string\n  senderName: string\n  content: string\n  timestamp: string\n  isPinned?: boolean\n  isQuestion?: boolean\n  likes: number\n  isLiked?: boolean\n}\n\ninterface Participant {\n  id: string\n  userId: string\n  name: string\n}\n\ninterface ChatPanelProps {\n  onUnreadChange?: (count: number) => void\n  participants: Participant[]\n}\n\nconst EMOJIS = ['', '', '', '', '', '', '', '']\n\nexport function ChatPanel({ onUnreadChange, participants }: ChatPanelProps) {\n  const [messages, setMessages] = useState<ChatMessage[]>([\n    {\n      id: '1',\n      senderId: 's1',\n      senderName: 'Alice Zhang',\n      content: 'Great explanation of derivatives!',\n      timestamp: new Date(Date.now() - 1000 * 60 * 5).toISOString(),\n      likes: 3\n    },\n    {\n      id: '2',\n      senderId: 's2',\n      senderName: 'Bob Li',\n      content: 'Could you go over the chain rule one more time?',\n      timestamp: new Date(Date.now() - 1000 * 60 * 3).toISOString(),\n      isQuestion: true,\n      likes: 1\n    },\n    {\n      id: '3',\n      senderId: 'tutor',\n      senderName: 'You',\n      content: 'Sure! Let me explain it with a different example.',\n      timestamp: new Date(Date.now() - 1000 * 60 * 2).toISOString(),\n      likes: 0\n    }\n  ])\n  const [inputMessage, setInputMessage] = useState('')\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false)\n  const [pinnedMessage, setPinnedMessage] = useState<ChatMessage | null>(null)\n  const scrollRef = useRef<HTMLDivElement>(null)\n  const [isAtBottom, setIsAtBottom] = useState(true)\n\n  // Auto-scroll to bottom\n  useEffect(() => {\n    if (isAtBottom && scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight\n    }\n  }, [messages, isAtBottom])\n\n  const handleSend = () => {\n    if (!inputMessage.trim()) return\n\n    const newMessage: ChatMessage = {\n      id: `msg-${Date.now()}`,\n      senderId: 'tutor',\n      senderName: 'You',\n      content: inputMessage,\n      timestamp: new Date().toISOString(),\n      likes: 0\n    }\n\n    setMessages(prev => [...prev, newMessage])\n    setInputMessage('')\n    setShowEmojiPicker(false)\n  }\n\n  const handleLike = (messageId: string) => {\n    setMessages(prev => prev.map(msg => \n      msg.id === messageId \n        ? { ...msg, likes: msg.isLiked ? msg.likes - 1 : msg.likes + 1, isLiked: !msg.isLiked }\n        : msg\n    ))\n  }\n\n  const handlePin = (message: ChatMessage) => {\n    if (pinnedMessage?.id === message.id) {\n      setPinnedMessage(null)\n      toast.info('Message unpinned')\n    } else {\n      setPinnedMessage(message)\n      toast.success('Message pinned')\n    }\n  }\n\n  const formatTime = (timestamp: string) => {\n    return new Date(timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n  }\n\n  return (\n    <div className=\"flex flex-col h-full bg-gray-800\">\n      {/* Pinned Message */}\n      {pinnedMessage && (\n        <div className=\"p-3 bg-blue-900/30 border-b border-blue-800\">\n          <div className=\"flex items-start gap-2\">\n            <Pin className=\"w-4 h-4 text-blue-400 mt-0.5 shrink-0\" />\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm text-blue-200 truncate\">{pinnedMessage.content}</p>\n              <p className=\"text-xs text-blue-400\">{pinnedMessage.senderName}</p>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-6 w-6 text-blue-400 hover:text-blue-300\"\n              onClick={() => setPinnedMessage(null)}\n            >\n              <span className=\"text-lg\">&times;</span>\n            </Button>\n          </div>\n        </div>\n      )}\n\n      {/* Messages */}\n      <ScrollArea className=\"flex-1 p-4\" ref={scrollRef}>\n        <div className=\"space-y-4\">\n          {messages.map((message) => (\n            <div\n              key={message.id}\n              className={cn(\n                \"group\",\n                message.senderId === 'tutor' && \"flex flex-row-reverse\"\n              )}\n            >\n              <div className={cn(\n                \"max-w-[85%]\",\n                message.senderId === 'tutor' ? \"items-end\" : \"items-start\"\n              )}>\n                {/* Sender Name */}\n                {message.senderId !== 'tutor' && (\n                  <p className=\"text-xs text-gray-400 mb-1 ml-1\">{message.senderName}</p>\n                )}\n\n                {/* Message Bubble */}\n                <div className={cn(\n                  \"relative rounded-2xl px-4 py-2\",\n                  message.senderId === 'tutor' \n                    ? \"bg-blue-600 text-white rounded-br-md\" \n                    : \"bg-gray-700 text-white rounded-bl-md\",\n                  message.isQuestion && \"border-l-4 border-yellow-500\"\n                )}>\n                  {message.isQuestion && (\n                    <div className=\"flex items-center gap-1 mb-1 text-yellow-400 text-xs\">\n                      <AlertCircle className=\"w-3 h-3\" />\n                      Question\n                    </div>\n                  )}\n                  <p className=\"text-sm\">{message.content}</p>\n                  \n                  {/* Message Actions */}\n                  <div className={cn(\n                    \"absolute top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity\",\n                    message.senderId === 'tutor' ? \"-left-16\" : \"-right-16\"\n                  )}>\n                    <div className=\"flex items-center gap-1\">\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-7 w-7 text-gray-400 hover:text-white\"\n                        onClick={() => handleLike(message.id)}\n                      >\n                        <ThumbsUp className={cn(\"w-4 h-4\", message.isLiked && \"fill-yellow-500 text-yellow-500\")} />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-7 w-7 text-gray-400 hover:text-white\"\n                        onClick={() => handlePin(message)}\n                      >\n                        <Pin className={cn(\"w-4 h-4\", pinnedMessage?.id === message.id && \"fill-blue-500 text-blue-500\")} />\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Message Meta */}\n                <div className=\"flex items-center gap-2 mt-1 text-xs text-gray-500\">\n                  <span>{formatTime(message.timestamp)}</span>\n                  {message.likes > 0 && (\n                    <span className=\"flex items-center gap-1 text-yellow-500\">\n                      <ThumbsUp className=\"w-3 h-3\" />\n                      {message.likes}\n                    </span>\n                  )}\n                  {message.senderId === 'tutor' && <Check className=\"w-3 h-3 text-blue-400\" />}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </ScrollArea>\n\n      {/* Input Area */}\n      <div className=\"p-3 border-t border-gray-700\">\n        {/* Emoji Picker */}\n        {showEmojiPicker && (\n          <div className=\"flex gap-2 mb-2 p-2 bg-gray-700 rounded-lg\">\n            {EMOJIS.map(emoji => (\n              <button\n                key={emoji}\n                className=\"text-xl hover:scale-125 transition-transform\"\n                onClick={() => {\n                  setInputMessage(prev => prev + emoji)\n                  setShowEmojiPicker(false)\n                }}\n              >\n                {emoji}\n              </button>\n            ))}\n          </div>\n        )}\n\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"text-gray-400 hover:text-white\"\n            onClick={() => setShowEmojiPicker(!showEmojiPicker)}\n          >\n            <Smile className=\"w-5 h-5\" />\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"text-gray-400 hover:text-white\"\n          >\n            <Paperclip className=\"w-5 h-5\" />\n          </Button>\n          <Input\n            placeholder=\"Type a message...\"\n            value={inputMessage}\n            onChange={(e) => setInputMessage(e.target.value)}\n            onKeyDown={(e) => e.key === 'Enter' && handleSend()}\n            className=\"flex-1 bg-gray-700 border-gray-600 text-white placeholder:text-gray-500\"\n          />\n          <Button\n            size=\"icon\"\n            className=\"bg-blue-600 hover:bg-blue-700\"\n            onClick={handleSend}\n            disabled={!inputMessage.trim()}\n          >\n            <Send className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6200, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/ParticipantsPanel.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu'\nimport { cn } from '@/lib/utils'\nimport { toast } from 'sonner'\nimport {\n  Mic,\n  MicOff,\n  Video,\n  VideoOff,\n  MoreVertical,\n  Crown,\n  Hand,\n  MessageSquare,\n  UserMinus,\n  Volume2,\n  VolumeX,\n  Search,\n  Users\n} from 'lucide-react'\n\ninterface Participant {\n  id: string\n  userId: string\n  name: string\n  isAudioEnabled: boolean\n  isVideoEnabled: boolean\n  isScreenSharing: boolean\n  isLocal?: boolean\n}\n\ninterface ParticipantsPanelProps {\n  participants: Participant[]\n  handRaisedUsers: Set<string>\n  onToggleHand: () => void\n}\n\nexport function ParticipantsPanel({ participants, handRaisedUsers, onToggleHand }: ParticipantsPanelProps) {\n  const [searchQuery, setSearchQuery] = useState('')\n  const [mutedUsers, setMutedUsers] = useState<Set<string>>(new Set())\n  const [selectedParticipant, setSelectedParticipant] = useState<string | null>(null)\n\n  const filteredParticipants = participants.filter(p =>\n    p.name.toLowerCase().includes(searchQuery.toLowerCase())\n  )\n\n  const onlineCount = participants.filter(p => !p.isLocal).length\n  const handRaisedCount = handRaisedUsers.size\n\n  const handleMuteParticipant = (participantId: string, currentMuteState: boolean) => {\n    setMutedUsers(prev => {\n      const newSet = new Set(prev)\n      if (currentMuteState) {\n        newSet.delete(participantId)\n        toast.success('Participant unmuted')\n      } else {\n        newSet.add(participantId)\n        toast.success('Participant muted')\n      }\n      return newSet\n    })\n  }\n\n  const handleRemoveParticipant = (participantName: string) => {\n    toast.success(`${participantName} removed from the session`)\n  }\n\n  const handleSendDirectMessage = (participantName: string) => {\n    toast.success(`Opening direct message with ${participantName}`)\n  }\n\n  return (\n    <div className=\"flex flex-col h-full bg-gray-800\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-gray-700\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h3 className=\"text-white font-medium flex items-center gap-2\">\n            <Users className=\"w-4 h-4\" />\n            Participants ({onlineCount})\n          </h3>\n          {handRaisedCount > 0 && (\n            <Badge className=\"bg-yellow-600\">\n              <Hand className=\"w-3 h-3 mr-1\" />\n              {handRaisedCount}\n            </Badge>\n          )}\n        </div>\n        <div className=\"relative\">\n          <Search className=\"absolute left-2.5 top-2.5 w-4 h-4 text-gray-400\" />\n          <Input\n            placeholder=\"Search participants...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-9 bg-gray-700 border-gray-600 text-white placeholder:text-gray-500\"\n          />\n        </div>\n      </div>\n\n      {/* Participants List */}\n      <ScrollArea className=\"flex-1\">\n        <div className=\"p-2 space-y-1\">\n          {/* You */}\n          {participants.filter(p => p.isLocal).map(participant => (\n            <div\n              key={participant.id}\n              className=\"flex items-center gap-3 p-3 rounded-lg bg-blue-900/30 border border-blue-800\"\n            >\n              <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-bold\">\n                {participant.name.split(' ').map(n => n[0]).join('')}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-white font-medium text-sm truncate\">{participant.name} (You)</p>\n                <p className=\"text-xs text-blue-300\">Host</p>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <Crown className=\"w-4 h-4 text-yellow-500\" />\n                {handRaisedUsers.has(participant.userId) && (\n                  <div className=\"p-1 bg-yellow-500 rounded-full\">\n                    <Hand className=\"w-3 h-3 text-white\" />\n                  </div>\n                )}\n              </div>\n            </div>\n          ))}\n\n          {/* Other Participants */}\n          {filteredParticipants.filter(p => !p.isLocal).map(participant => (\n            <div\n              key={participant.id}\n              className={cn(\n                \"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-700 transition-colors\",\n                handRaisedUsers.has(participant.userId) && \"bg-yellow-900/20 border border-yellow-800\"\n              )}\n            >\n              <div className=\"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center text-white text-sm font-bold\">\n                {participant.name.split(' ').map(n => n[0]).join('')}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-white text-sm truncate\">{participant.name}</p>\n                <div className=\"flex items-center gap-2 mt-0.5\">\n                  {!participant.isAudioEnabled && (\n                    <MicOff className=\"w-3 h-3 text-red-400\" />\n                  )}\n                  {!participant.isVideoEnabled && (\n                    <VideoOff className=\"w-3 h-3 text-red-400\" />\n                  )}\n                  {participant.isScreenSharing && (\n                    <span className=\"text-xs text-green-400\">Sharing</span>\n                  )}\n                </div>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                {handRaisedUsers.has(participant.userId) && (\n                  <div className=\"p-1 bg-yellow-500 rounded-full\">\n                    <Hand className=\"w-3 h-3 text-white\" />\n                  </div>\n                )}\n                \n                <DropdownMenu>\n                  <DropdownMenuTrigger asChild>\n                    <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7 text-gray-400\">\n                      <MoreVertical className=\"w-4 h-4\" />\n                    </Button>\n                  </DropdownMenuTrigger>\n                  <DropdownMenuContent align=\"end\" className=\"w-48\">\n                    <DropdownMenuItem onClick={() => handleSendDirectMessage(participant.name)}>\n                      <MessageSquare className=\"w-4 h-4 mr-2\" />\n                      Message\n                    </DropdownMenuItem>\n                    <DropdownMenuItem onClick={() => handleMuteParticipant(participant.userId, mutedUsers.has(participant.userId))}>\n                      {mutedUsers.has(participant.userId) ? (\n                        <>\n                          <Volume2 className=\"w-4 h-4 mr-2\" />\n                          Unmute\n                        </>\n                      ) : (\n                        <>\n                          <VolumeX className=\"w-4 h-4 mr-2\" />\n                          Mute\n                        </>\n                      )}\n                    </DropdownMenuItem>\n                    <DropdownMenuSeparator />\n                    <DropdownMenuItem \n                      className=\"text-red-600\"\n                      onClick={() => handleRemoveParticipant(participant.name)}\n                    >\n                      <UserMinus className=\"w-4 h-4 mr-2\" />\n                      Remove\n                    </DropdownMenuItem>\n                  </DropdownMenuContent>\n                </DropdownMenu>\n              </div>\n            </div>\n          ))}\n        </div>\n      </ScrollArea>\n\n      {/* Actions */}\n      <div className=\"p-3 border-t border-gray-700 space-y-2\">\n        <Button \n          variant=\"outline\" \n          className=\"w-full\"\n          onClick={onToggleHand}\n        >\n          <Hand className=\"w-4 h-4 mr-2\" />\n          {handRaisedUsers.has('local') ? 'Lower Hand' : 'Raise Hand'}\n        </Button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6680, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/WhiteboardPanel.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Slider } from '@/components/ui/slider'\nimport {\n  Pencil,\n  Eraser,\n  Square,\n  Circle,\n  Type,\n  Undo,\n  Redo,\n  Download,\n  Trash2,\n  X,\n  Palette,\n  Minus,\n  Plus\n} from 'lucide-react'\n\ntype Tool = 'pencil' | 'eraser' | 'rectangle' | 'circle' | 'text'\n\ninterface WhiteboardPanelProps {\n  onClose: () => void\n}\n\nconst COLORS = [\n  '#000000', '#FFFFFF', '#FF0000', '#00FF00', '#0000FF', \n  '#FFFF00', '#FF00FF', '#00FFFF', '#FFA500', '#800080'\n]\n\nexport function WhiteboardPanel({ onClose }: WhiteboardPanelProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const [tool, setTool] = useState<Tool>('pencil')\n  const [color, setColor] = useState('#000000')\n  const [brushSize, setBrushSize] = useState(3)\n  const [isDrawing, setIsDrawing] = useState(false)\n  const [history, setHistory] = useState<ImageData[]>([])\n  const [historyStep, setHistoryStep] = useState(-1)\n\n  const saveState = () => {\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext('2d')\n    if (!ctx) return\n    \n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n    const newHistory = history.slice(0, historyStep + 1)\n    newHistory.push(imageData)\n    setHistory(newHistory)\n    setHistoryStep(newHistory.length - 1)\n  }\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    if (!canvas) return\n    \n    const ctx = canvas.getContext('2d')\n    if (!ctx) return\n\n    // Set white background\n    ctx.fillStyle = '#FFFFFF'\n    ctx.fillRect(0, 0, canvas.width, canvas.height)\n    \n  }, [])\n\n  const undo = () => {\n    if (historyStep > 0) {\n      const canvas = canvasRef.current\n      if (!canvas) return\n      const ctx = canvas.getContext('2d')\n      if (!ctx) return\n      \n      setHistoryStep(historyStep - 1)\n      ctx.putImageData(history[historyStep - 1], 0, 0)\n    }\n  }\n\n  const redo = () => {\n    if (historyStep < history.length - 1) {\n      const canvas = canvasRef.current\n      if (!canvas) return\n      const ctx = canvas.getContext('2d')\n      if (!ctx) return\n      \n      setHistoryStep(historyStep + 1)\n      ctx.putImageData(history[historyStep + 1], 0, 0)\n    }\n  }\n\n  const clearCanvas = () => {\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext('2d')\n    if (!ctx) return\n    \n    ctx.fillStyle = '#FFFFFF'\n    ctx.fillRect(0, 0, canvas.width, canvas.height)\n    saveState()\n  }\n\n  const downloadCanvas = () => {\n    const canvas = canvasRef.current\n    if (!canvas) return\n    \n    const link = document.createElement('a')\n    link.download = `whiteboard-${Date.now()}.png`\n    link.href = canvas.toDataURL()\n    link.click()\n  }\n\n  const startDrawing = (e: React.MouseEvent<HTMLCanvasElement>) => {\n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext('2d')\n    if (!ctx) return\n\n    setIsDrawing(true)\n    const rect = canvas.getBoundingClientRect()\n    const x = e.clientX - rect.left\n    const y = e.clientY - rect.top\n\n    ctx.beginPath()\n    ctx.moveTo(x, y)\n    ctx.strokeStyle = tool === 'eraser' ? '#FFFFFF' : color\n    ctx.lineWidth = brushSize\n    ctx.lineCap = 'round'\n    ctx.lineJoin = 'round'\n  }\n\n  const draw = (e: React.MouseEvent<HTMLCanvasElement>) => {\n    if (!isDrawing) return\n    \n    const canvas = canvasRef.current\n    if (!canvas) return\n    const ctx = canvas.getContext('2d')\n    if (!ctx) return\n\n    const rect = canvas.getBoundingClientRect()\n    const x = e.clientX - rect.left\n    const y = e.clientY - rect.top\n\n    if (tool === 'pencil' || tool === 'eraser') {\n      ctx.lineTo(x, y)\n      ctx.stroke()\n    }\n  }\n\n  const stopDrawing = () => {\n    if (isDrawing) {\n      setIsDrawing(false)\n      saveState()\n    }\n  }\n\n  return (\n    <div className=\"absolute inset-4 bg-white rounded-lg shadow-2xl z-40 flex flex-col overflow-hidden\">\n      {/* Toolbar */}\n      <div className=\"flex items-center justify-between px-4 py-2 bg-gray-100 border-b\">\n        <div className=\"flex items-center gap-2\">\n          {/* Tools */}\n          <div className=\"flex items-center bg-white rounded-lg p-1 border\">\n            {[\n              { id: 'pencil', icon: Pencil },\n              { id: 'eraser', icon: Eraser },\n              { id: 'rectangle', icon: Square },\n              { id: 'circle', icon: Circle },\n              { id: 'text', icon: Type }\n            ].map(({ id, icon: Icon }) => (\n              <button\n                key={id}\n                onClick={() => setTool(id as Tool)}\n                className={`p-2 rounded ${tool === id ? 'bg-blue-100 text-blue-600' : 'hover:bg-gray-100'}`}\n              >\n                <Icon className=\"w-4 h-4\" />\n              </button>\n            ))}\n          </div>\n\n          <div className=\"w-px h-8 bg-gray-300\" />\n\n          {/* Colors */}\n          <div className=\"flex items-center gap-1\">\n            {COLORS.map((c) => (\n              <button\n                key={c}\n                onClick={() => setColor(c)}\n                className={`w-6 h-6 rounded-full border-2 ${color === c ? 'border-blue-500' : 'border-transparent'}`}\n                style={{ backgroundColor: c }}\n              />\n            ))}\n          </div>\n\n          <div className=\"w-px h-8 bg-gray-300\" />\n\n          {/* Brush Size */}\n          <div className=\"flex items-center gap-2 w-32\">\n            <Minus className=\"w-3 h-3\" />\n            <Slider\n              value={[brushSize]}\n              onValueChange={([value]) => setBrushSize(value)}\n              min={1}\n              max={20}\n              step={1}\n            />\n            <Plus className=\"w-3 h-3\" />\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex items-center gap-2\">\n          <Button variant=\"ghost\" size=\"icon\" onClick={undo} disabled={historyStep <= 0}>\n            <Undo className=\"w-4 h-4\" />\n          </Button>\n          <Button variant=\"ghost\" size=\"icon\" onClick={redo} disabled={historyStep >= history.length - 1}>\n            <Redo className=\"w-4 h-4\" />\n          </Button>\n          <Button variant=\"ghost\" size=\"icon\" onClick={clearCanvas}>\n            <Trash2 className=\"w-4 h-4\" />\n          </Button>\n          <Button variant=\"ghost\" size=\"icon\" onClick={downloadCanvas}>\n            <Download className=\"w-4 h-4\" />\n          </Button>\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\n            <X className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Canvas */}\n      <div className=\"flex-1 bg-gray-50 overflow-hidden\">\n        <canvas\n          ref={canvasRef}\n          width={1200}\n          height={800}\n          onMouseDown={startDrawing}\n          onMouseMove={draw}\n          onMouseUp={stopDrawing}\n          onMouseLeave={stopDrawing}\n          className=\"cursor-crosshair shadow-lg\"\n        />\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7085, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/ScreenShareView.tsx"],"sourcesContent":["'use client'\n\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { MonitorUp, X, Maximize2, Minimize2 } from 'lucide-react'\nimport { useState } from 'react'\n\ninterface ScreenShareViewProps {\n  onStop: () => void\n  presenterName?: string\n}\n\nexport function ScreenShareView({ onStop, presenterName = 'You' }: ScreenShareViewProps) {\n  const [isFullscreen, setIsFullscreen] = useState(false)\n\n  return (\n    <div className={cn(\n      \"absolute inset-4 bg-gray-800 rounded-lg border-2 border-green-600 overflow-hidden z-40 flex flex-col\",\n      isFullscreen && \"fixed inset-0 z-50\"\n    )}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-2 bg-gray-900 border-b border-gray-700\">\n        <div className=\"flex items-center gap-2\">\n          <Badge className=\"bg-green-600 gap-1\">\n            <MonitorUp className=\"w-3 h-3\" />\n            Sharing\n          </Badge>\n          <span className=\"text-white text-sm\">{presenterName} is presenting</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"text-gray-400 hover:text-white\"\n            onClick={() => setIsFullscreen(!isFullscreen)}\n          >\n            {isFullscreen ? <Minimize2 className=\"w-4 h-4\" /> : <Maximize2 className=\"w-4 h-4\" />}\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"text-red-400 hover:text-red-300 hover:bg-red-900/50\"\n            onClick={onStop}\n          >\n            <X className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Screen Content Placeholder */}\n      <div className=\"flex-1 bg-gray-950 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <MonitorUp className=\"w-16 h-16 text-gray-600 mx-auto mb-4\" />\n          <p className=\"text-gray-400\">Screen sharing active</p>\n          <p className=\"text-gray-500 text-sm\">Your screen is being shared with all participants</p>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction cn(...classes: (string | boolean | undefined)[]) {\n  return classes.filter(Boolean).join(' ')\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;AALA;;;;;AAYO,SAAS,gBAAgB,EAAE,MAAM,EAAE,gBAAgB,KAAK,EAAwB;;IACrF,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,2NAAQ,EAAC;IAEjD,qBACE,+OAAC;QAAI,WAAW,GACd,wGACA,gBAAgB;;0BAGhB,+OAAC;gBAAI,WAAU;;kCACb,+OAAC;wBAAI,WAAU;;0CACb,+OAAC,+LAAK;gCAAC,WAAU;;kDACf,+OAAC,kRAAS;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAGnC,+OAAC;gCAAK,WAAU;;oCAAsB;oCAAc;;;;;;;;;;;;;kCAEtD,+OAAC;wBAAI,WAAU;;0CACb,+OAAC,iMAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,gBAAgB,CAAC;0CAE/B,6BAAe,+OAAC,kRAAS;oCAAC,WAAU;;;;;yDAAe,+OAAC,kRAAS;oCAAC,WAAU;;;;;;;;;;;0CAE3E,+OAAC,iMAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS;0CAET,cAAA,+OAAC,sPAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAMnB,+OAAC;gBAAI,WAAU;0BACb,cAAA,+OAAC;oBAAI,WAAU;;sCACb,+OAAC,kRAAS;4BAAC,WAAU;;;;;;sCACrB,+OAAC;4BAAE,WAAU;sCAAgB;;;;;;sCAC7B,+OAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;;;;;;;;;;;;AAK/C;GA/CgB;KAAA;AAiDhB,SAAS,GAAG,GAAG,OAAyC;IACtD,OAAO,QAAQ,MAAM,CAAC,SAAS,IAAI,CAAC;AACtC"}},
    {"offset": {"line": 7265, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/RecordingIndicator.tsx"],"sourcesContent":["'use client'\n\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/ui/tooltip'\nimport { cn } from '@/lib/utils'\nimport { Radio, Pause, Square } from 'lucide-react'\n\ninterface RecordingIndicatorProps {\n  duration: number\n  isPaused: boolean\n  onPause: () => void\n  onStop: () => void\n}\n\nexport function RecordingIndicator({ duration, isPaused, onPause, onStop }: RecordingIndicatorProps) {\n  const formatDuration = (seconds: number) => {\n    const hrs = Math.floor(seconds / 3600)\n    const mins = Math.floor((seconds % 3600) / 60)\n    const secs = seconds % 60\n    if (hrs > 0) {\n      return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\n    }\n    return `${mins}:${secs.toString().padStart(2, '0')}`\n  }\n\n  return (\n    <TooltipProvider>\n      <div className=\"flex items-center gap-2 bg-red-900/80 rounded-lg px-3 py-1.5\">\n        <div className=\"flex items-center gap-2\">\n          <Radio className={cn(\n            \"w-4 h-4 text-red-500\",\n            !isPaused && \"animate-pulse\"\n          )} />\n          <span className=\"text-white font-mono text-sm\">\n            {formatDuration(duration)}\n          </span>\n          {isPaused && (\n            <span className=\"text-xs text-yellow-400 ml-1\">(Paused)</span>\n          )}\n        </div>\n        \n        <div className=\"flex items-center gap-1 ml-2\">\n          <Tooltip>\n            <TooltipTrigger asChild>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"h-6 w-6 text-white hover:bg-red-800\"\n                onClick={onPause}\n              >\n                {isPaused ? (\n                  <div className=\"w-3 h-3 border-l-2 border-r-2 border-white\" />\n                ) : (\n                  <Pause className=\"w-3 h-3\" />\n                )}\n              </Button>\n            </TooltipTrigger>\n            <TooltipContent>{isPaused ? 'Resume' : 'Pause'}</TooltipContent>\n          </Tooltip>\n          \n          <Tooltip>\n            <TooltipTrigger asChild>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"h-6 w-6 text-white hover:bg-red-800\"\n                onClick={onStop}\n              >\n                <Square className=\"w-3 h-3 fill-current\" />\n              </Button>\n            </TooltipTrigger>\n            <TooltipContent>Stop Recording</TooltipContent>\n          </Tooltip>\n        </div>\n      </div>\n    </TooltipProvider>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAMA;AACA;AAAA;AAAA;AAXA;;;;;;AAoBO,SAAS,mBAAmB,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,EAA2B;IACjG,MAAM,iBAAiB,CAAC;QACtB,MAAM,MAAM,KAAK,KAAK,CAAC,UAAU;QACjC,MAAM,OAAO,KAAK,KAAK,CAAC,AAAC,UAAU,OAAQ;QAC3C,MAAM,OAAO,UAAU;QACvB,IAAI,MAAM,GAAG;YACX,OAAO,GAAG,IAAI,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;QACzF;QACA,OAAO,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;IACtD;IAEA,qBACE,+OAAC,2MAAe;kBACd,cAAA,+OAAC;YAAI,WAAU;;8BACb,+OAAC;oBAAI,WAAU;;sCACb,+OAAC,kQAAK;4BAAC,WAAW,IAAA,8KAAE,EAClB,wBACA,CAAC,YAAY;;;;;;sCAEf,+OAAC;4BAAK,WAAU;sCACb,eAAe;;;;;;wBAEjB,0BACC,+OAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;;8BAInD,+OAAC;oBAAI,WAAU;;sCACb,+OAAC,mMAAO;;8CACN,+OAAC,0MAAc;oCAAC,OAAO;8CACrB,cAAA,+OAAC,iMAAM;wCACL,SAAQ;wCACR,MAAK;wCACL,WAAU;wCACV,SAAS;kDAER,yBACC,+OAAC;4CAAI,WAAU;;;;;iEAEf,+OAAC,kQAAK;4CAAC,WAAU;;;;;;;;;;;;;;;;8CAIvB,+OAAC,0MAAc;8CAAE,WAAW,WAAW;;;;;;;;;;;;sCAGzC,+OAAC,mMAAO;;8CACN,+OAAC,0MAAc;oCAAC,OAAO;8CACrB,cAAA,+OAAC,iMAAM;wCACL,SAAQ;wCACR,MAAK;wCACL,WAAU;wCACV,SAAS;kDAET,cAAA,+OAAC,qQAAM;4CAAC,WAAU;;;;;;;;;;;;;;;;8CAGtB,+OAAC,0MAAc;8CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM5B;KA/DgB"}},
    {"offset": {"line": 7443, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/ReactionsOverlay.tsx"],"sourcesContent":["'use client'\n\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\n\ninterface ReactionsOverlayProps {\n  reactions: string[]\n  onSelect: (emoji: string) => void\n  onClose: () => void\n}\n\nexport function ReactionsOverlay({ reactions, onSelect, onClose }: ReactionsOverlayProps) {\n  return (\n    <div className=\"absolute bottom-20 left-1/2 -translate-x-1/2 z-50\">\n      <div className=\"bg-gray-800 rounded-full px-4 py-2 shadow-2xl border border-gray-700 flex items-center gap-2\">\n        {reactions.map((emoji) => (\n          <button\n            key={emoji}\n            onClick={() => onSelect(emoji)}\n            className=\"text-2xl hover:scale-150 transition-transform duration-200 p-1\"\n          >\n            {emoji}\n          </button>\n        ))}\n        <div className=\"w-px h-6 bg-gray-600 mx-1\" />\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"text-gray-400 hover:text-white\"\n          onClick={onClose}\n        >\n          Close\n        </Button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAWO,SAAS,iBAAiB,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAyB;IACtF,qBACE,+OAAC;QAAI,WAAU;kBACb,cAAA,+OAAC;YAAI,WAAU;;gBACZ,UAAU,GAAG,CAAC,CAAC,sBACd,+OAAC;wBAEC,SAAS,IAAM,SAAS;wBACxB,WAAU;kCAET;uBAJI;;;;;8BAOT,+OAAC;oBAAI,WAAU;;;;;;8BACf,+OAAC,iMAAM;oBACL,SAAQ;oBACR,MAAK;oBACL,WAAU;oBACV,SAAS;8BACV;;;;;;;;;;;;;;;;;AAMT;KAzBgB"}},
    {"offset": {"line": 7507, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/PollCreator.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '@/components/ui/dialog'\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport { toast } from 'sonner'\nimport { Plus, Trash2, BarChart3, Clock } from 'lucide-react'\n\ninterface PollOption {\n  id: string\n  text: string\n}\n\ninterface Participant {\n  id: string\n  name: string\n}\n\ninterface PollCreatorProps {\n  onClose: () => void\n  participants: Participant[]\n}\n\nexport function PollCreator({ onClose, participants }: PollCreatorProps) {\n  const [question, setQuestion] = useState('')\n  const [options, setOptions] = useState<PollOption[]>([\n    { id: '1', text: '' },\n    { id: '2', text: '' }\n  ])\n  const [isAnonymous, setIsAnonymous] = useState(false)\n  const [allowMultiple, setAllowMultiple] = useState(false)\n  const [duration, setDuration] = useState<number | null>(null)\n  const [isPublishing, setIsPublishing] = useState(false)\n\n  const addOption = () => {\n    if (options.length >= 6) {\n      toast.error('Maximum 6 options allowed')\n      return\n    }\n    setOptions([...options, { id: Date.now().toString(), text: '' }])\n  }\n\n  const removeOption = (id: string) => {\n    if (options.length <= 2) {\n      toast.error('Minimum 2 options required')\n      return\n    }\n    setOptions(options.filter(o => o.id !== id))\n  }\n\n  const updateOption = (id: string, text: string) => {\n    setOptions(options.map(o => o.id === id ? { ...o, text } : o))\n  }\n\n  const handlePublish = () => {\n    if (!question.trim()) {\n      toast.error('Please enter a question')\n      return\n    }\n    \n    const emptyOptions = options.filter(o => !o.text.trim())\n    if (emptyOptions.length > 0) {\n      toast.error('Please fill in all options')\n      return\n    }\n\n    setIsPublishing(true)\n    \n    // Simulate publishing\n    setTimeout(() => {\n      toast.success('Poll published to all participants!')\n      setIsPublishing(false)\n      onClose()\n    }, 1000)\n  }\n\n  return (\n    <>\n      <DialogHeader>\n        <DialogTitle className=\"flex items-center gap-2\">\n          <BarChart3 className=\"w-5 h-5\" />\n          Create Poll\n        </DialogTitle>\n        <DialogDescription>\n          Create a quick poll for your participants to vote on\n        </DialogDescription>\n      </DialogHeader>\n\n      <div className=\"space-y-6 py-4\">\n        {/* Question */}\n        <div className=\"space-y-2\">\n          <Label>Question</Label>\n          <Input\n            placeholder=\"Ask a question...\"\n            value={question}\n            onChange={(e) => setQuestion(e.target.value)}\n          />\n        </div>\n\n        {/* Options */}\n        <div className=\"space-y-2\">\n          <Label>Options</Label>\n          <div className=\"space-y-2\">\n            {options.map((option, index) => (\n              <div key={option.id} className=\"flex items-center gap-2\">\n                <div className=\"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-sm font-medium text-gray-600\">\n                  {String.fromCharCode(65 + index)}\n                </div>\n                <Input\n                  placeholder={`Option ${index + 1}`}\n                  value={option.text}\n                  onChange={(e) => updateOption(option.id, e.target.value)}\n                  className=\"flex-1\"\n                />\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  onClick={() => removeOption(option.id)}\n                  disabled={options.length <= 2}\n                >\n                  <Trash2 className=\"w-4 h-4 text-red-500\" />\n                </Button>\n              </div>\n            ))}\n          </div>\n          <Button variant=\"outline\" className=\"w-full\" onClick={addOption}>\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Add Option\n          </Button>\n        </div>\n\n        {/* Settings */}\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"anonymous\"\n              checked={isAnonymous}\n              onCheckedChange={(checked) => setIsAnonymous(checked as boolean)}\n            />\n            <Label htmlFor=\"anonymous\" className=\"text-sm cursor-pointer\">\n              Anonymous voting\n            </Label>\n          </div>\n          \n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"multiple\"\n              checked={allowMultiple}\n              onCheckedChange={(checked) => setAllowMultiple(checked as boolean)}\n            />\n            <Label htmlFor=\"multiple\" className=\"text-sm cursor-pointer\">\n              Allow multiple selections\n            </Label>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"flex items-center gap-2\">\n              <Clock className=\"w-4 h-4\" />\n              Duration (optional)\n            </Label>\n            <div className=\"flex gap-2\">\n              {[30, 60, 120, 300].map((seconds) => (\n                <Button\n                  key={seconds}\n                  variant={duration === seconds ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setDuration(duration === seconds ? null : seconds)}\n                >\n                  {seconds < 60 ? `${seconds}s` : `${seconds / 60}m`}\n                </Button>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Preview */}\n        <div className=\"p-4 bg-gray-50 rounded-lg\">\n          <p className=\"text-sm text-gray-500 mb-2\">Preview ({participants.length} participants will see this)</p>\n          <p className=\"font-medium\">{question || 'Your question will appear here'}</p>\n          <div className=\"mt-2 space-y-1\">\n            {options.map((option, index) => (\n              <div key={option.id} className=\"flex items-center gap-2 text-sm text-gray-600\">\n                <div className=\"w-4 h-4 rounded-full border-2 border-gray-300\" />\n                {option.text || `Option ${index + 1}`}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      <DialogFooter>\n        <Button variant=\"outline\" onClick={onClose}>Cancel</Button>\n        <Button \n          onClick={handlePublish}\n          disabled={isPublishing}\n          className=\"gap-2\"\n        >\n          <BarChart3 className=\"w-4 h-4\" />\n          {isPublishing ? 'Publishing...' : 'Publish Poll'}\n        </Button>\n      </DialogFooter>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7963, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/BreakoutRoomControl.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Badge } from '@/components/ui/badge'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '@/components/ui/dialog'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { cn } from '@/lib/utils'\nimport { toast } from 'sonner'\nimport {\n  Users,\n  Plus,\n  Trash2,\n  ArrowRight,\n  ArrowLeft,\n  Shuffle,\n  MessageSquare,\n  Clock\n} from 'lucide-react'\n\ninterface Participant {\n  id: string\n  name: string\n  isLocal?: boolean\n}\n\ninterface BreakoutRoom {\n  id: string\n  name: string\n  participants: Participant[]\n  topic?: string\n  duration?: number\n}\n\ninterface BreakoutRoomControlProps {\n  onClose: () => void\n  participants: Participant[]\n}\n\nexport function BreakoutRoomControl({ onClose, participants }: BreakoutRoomControlProps) {\n  const [rooms, setRooms] = useState<BreakoutRoom[]>([\n    { id: '1', name: 'Room 1', participants: [] },\n    { id: '2', name: 'Room 2', participants: [] }\n  ])\n  const [unassignedParticipants, setUnassignedParticipants] = useState<Participant[]>(\n    participants.filter(p => !p.isLocal)\n  )\n  const [selectedRoom, setSelectedRoom] = useState<string | null>(null)\n  const [selectedParticipants, setSelectedParticipants] = useState<Set<string>>(new Set())\n  const [isActive, setIsActive] = useState(false)\n  const [defaultDuration, setDefaultDuration] = useState(10)\n\n  const addRoom = () => {\n    if (rooms.length >= 10) {\n      toast.error('Maximum 10 rooms allowed')\n      return\n    }\n    setRooms([...rooms, { \n      id: Date.now().toString(), \n      name: `Room ${rooms.length + 1}`, \n      participants: [] \n    }])\n  }\n\n  const removeRoom = (roomId: string) => {\n    if (rooms.length <= 2) {\n      toast.error('Minimum 2 rooms required')\n      return\n    }\n    const room = rooms.find(r => r.id === roomId)\n    if (room) {\n      setUnassignedParticipants([...unassignedParticipants, ...room.participants])\n    }\n    setRooms(rooms.filter(r => r.id !== roomId))\n  }\n\n  const assignParticipant = (participantId: string, roomId: string) => {\n    const participant = unassignedParticipants.find(p => p.id === participantId)\n    if (!participant) return\n\n    setUnassignedParticipants(unassignedParticipants.filter(p => p.id !== participantId))\n    setRooms(rooms.map(room => \n      room.id === roomId \n        ? { ...room, participants: [...room.participants, participant] }\n        : room\n    ))\n  }\n\n  const removeParticipantFromRoom = (participantId: string, roomId: string) => {\n    const room = rooms.find(r => r.id === roomId)\n    if (!room) return\n\n    const participant = room.participants.find(p => p.id === participantId)\n    if (!participant) return\n\n    setRooms(rooms.map(r => \n      r.id === roomId \n        ? { ...r, participants: r.participants.filter(p => p.id !== participantId) }\n        : r\n    ))\n    setUnassignedParticipants([...unassignedParticipants, participant])\n  }\n\n  const autoAssign = () => {\n    const shuffled = [...unassignedParticipants].sort(() => Math.random() - 0.5)\n    const newRooms = rooms.map((room, index) => ({\n      ...room,\n      participants: shuffled.filter((_, i) => i % rooms.length === index)\n    }))\n    \n    setRooms(newRooms)\n    setUnassignedParticipants([])\n    toast.success('Participants auto-assigned!')\n  }\n\n  const broadcastMessage = (roomId: string) => {\n    toast.success(`Message broadcast to ${rooms.find(r => r.id === roomId)?.name}`)\n  }\n\n  const closeAllRooms = () => {\n    const allParticipants = rooms.flatMap(r => r.participants)\n    setUnassignedParticipants([...unassignedParticipants, ...allParticipants])\n    setRooms(rooms.map(r => ({ ...r, participants: [] })))\n    setIsActive(false)\n    toast.success('All breakout rooms closed')\n  }\n\n  const startBreakout = () => {\n    const emptyRooms = rooms.filter(r => r.participants.length === 0)\n    if (emptyRooms.length > 0) {\n      toast.error(`${emptyRooms.length} room(s) have no participants`)\n      return\n    }\n    \n    setIsActive(true)\n    toast.success('Breakout rooms started!')\n  }\n\n  return (\n    <>\n      <DialogHeader>\n        <DialogTitle className=\"flex items-center gap-2\">\n          <Users className=\"w-5 h-5\" />\n          Breakout Rooms\n        </DialogTitle>\n        <DialogDescription>\n          Divide participants into smaller discussion groups\n        </DialogDescription>\n      </DialogHeader>\n\n      <div className=\"py-4 space-y-4\">\n        {/* Controls */}\n        <div className=\"flex items-center gap-2\">\n          <Button variant=\"outline\" size=\"sm\" onClick={addRoom}>\n            <Plus className=\"w-4 h-4 mr-1\" />\n            Add Room\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" onClick={autoAssign} disabled={unassignedParticipants.length === 0}>\n            <Shuffle className=\"w-4 h-4 mr-1\" />\n            Auto Assign\n          </Button>\n          <div className=\"flex-1\" />\n          <div className=\"flex items-center gap-2\">\n            <Clock className=\"w-4 h-4 text-gray-500\" />\n            <Select value={defaultDuration.toString()} onValueChange={(v) => setDefaultDuration(parseInt(v))}>\n              <SelectTrigger className=\"w-32\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"5\">5 minutes</SelectItem>\n                <SelectItem value=\"10\">10 minutes</SelectItem>\n                <SelectItem value=\"15\">15 minutes</SelectItem>\n                <SelectItem value=\"20\">20 minutes</SelectItem>\n                <SelectItem value=\"30\">30 minutes</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4 h-[400px]\">\n          {/* Unassigned Participants */}\n          <div className=\"border rounded-lg flex flex-col\">\n            <div className=\"p-3 border-b bg-gray-50\">\n              <h4 className=\"font-medium text-sm\">\n                Unassigned ({unassignedParticipants.length})\n              </h4>\n            </div>\n            <ScrollArea className=\"flex-1 p-2\">\n              <div className=\"space-y-1\">\n                {unassignedParticipants.map(participant => (\n                  <div\n                    key={participant.id}\n                    className=\"flex items-center justify-between p-2 rounded hover:bg-gray-50\"\n                  >\n                    <span className=\"text-sm\">{participant.name}</span>\n                    <Select onValueChange={(roomId) => assignParticipant(participant.id, roomId)}>\n                      <SelectTrigger className=\"w-24 h-7 text-xs\">\n                        <SelectValue placeholder=\"Assign\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {rooms.map(room => (\n                          <SelectItem key={room.id} value={room.id}>{room.name}</SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                ))}\n                {unassignedParticipants.length === 0 && (\n                  <p className=\"text-sm text-gray-400 text-center py-4\">All assigned</p>\n                )}\n              </div>\n            </ScrollArea>\n          </div>\n\n          {/* Rooms */}\n          <div className=\"border rounded-lg flex flex-col\">\n            <ScrollArea className=\"flex-1 p-2\">\n              <div className=\"space-y-3\">\n                {rooms.map((room, index) => (\n                  <div \n                    key={room.id} \n                    className={cn(\n                      \"border rounded-lg p-3\",\n                      isActive && \"bg-green-50 border-green-200\"\n                    )}\n                  >\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <Input\n                          value={room.name}\n                          onChange={(e) => setRooms(rooms.map(r => \n                            r.id === room.id ? { ...r, name: e.target.value } : r\n                          ))}\n                          className=\"h-7 text-sm font-medium w-32\"\n                        />\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          {room.participants.length}\n                        </Badge>\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"h-7 w-7\"\n                          onClick={() => broadcastMessage(room.id)}\n                        >\n                          <MessageSquare className=\"w-4 h-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"h-7 w-7 text-red-500\"\n                          onClick={() => removeRoom(room.id)}\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </Button>\n                      </div>\n                    </div>\n\n                    <Input\n                      placeholder=\"Discussion topic...\"\n                      className=\"text-sm mb-2\"\n                      value={room.topic || ''}\n                      onChange={(e) => setRooms(rooms.map(r => \n                        r.id === room.id ? { ...r, topic: e.target.value } : r\n                      ))}\n                    />\n\n                    <div className=\"space-y-1\">\n                      {room.participants.map(participant => (\n                        <div\n                          key={participant.id}\n                          className=\"flex items-center justify-between p-1.5 bg-white rounded text-sm\"\n                        >\n                          <span>{participant.name}</span>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            className=\"h-6 w-6\"\n                            onClick={() => removeParticipantFromRoom(participant.id, room.id)}\n                          >\n                            <ArrowLeft className=\"w-3 h-3\" />\n                          </Button>\n                        </div>\n                      ))}\n                      {room.participants.length === 0 && (\n                        <p className=\"text-xs text-gray-400 text-center py-2\">No participants</p>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </ScrollArea>\n          </div>\n        </div>\n\n        {/* Status */}\n        {isActive && (\n          <div className=\"p-3 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between\">\n            <div>\n              <p className=\"font-medium text-green-800\">Breakout rooms are active</p>\n              <p className=\"text-sm text-green-600\">\n                {rooms.reduce((sum, r) => sum + r.participants.length, 0)} participants in {rooms.length} rooms\n              </p>\n            </div>\n            <Button variant=\"destructive\" size=\"sm\" onClick={closeAllRooms}>\n              Close All Rooms\n            </Button>\n          </div>\n        )}\n      </div>\n\n      <DialogFooter>\n        <Button variant=\"outline\" onClick={onClose}>Close</Button>\n        {!isActive ? (\n          <Button \n            onClick={startBreakout}\n            disabled={rooms.some(r => r.participants.length === 0)}\n          >\n            <ArrowRight className=\"w-4 h-4 mr-2\" />\n            Start Breakout\n          </Button>\n        ) : (\n          <Button variant=\"destructive\" onClick={closeAllRooms}>\n            End All Rooms\n          </Button>\n        )}\n      </DialogFooter>\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAZA;;;;;;;;;;;AA0CO,SAAS,oBAAoB,EAAE,OAAO,EAAE,YAAY,EAA4B;;IACrF,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,2NAAQ,EAAiB;QACjD;YAAE,IAAI;YAAK,MAAM;YAAU,cAAc,EAAE;QAAC;QAC5C;YAAE,IAAI;YAAK,MAAM;YAAU,cAAc,EAAE;QAAC;KAC7C;IACD,MAAM,CAAC,wBAAwB,0BAA0B,GAAG,IAAA,2NAAQ,EAClE,aAAa,MAAM;wCAAC,CAAA,IAAK,CAAC,EAAE,OAAO;;IAErC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,2NAAQ,EAAgB;IAChE,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,2NAAQ,EAAc,IAAI;IAClF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,2NAAQ,EAAC;IACzC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,2NAAQ,EAAC;IAEvD,MAAM,UAAU;QACd,IAAI,MAAM,MAAM,IAAI,IAAI;YACtB,sMAAK,CAAC,KAAK,CAAC;YACZ;QACF;QACA,SAAS;eAAI;YAAO;gBAClB,IAAI,KAAK,GAAG,GAAG,QAAQ;gBACvB,MAAM,CAAC,KAAK,EAAE,MAAM,MAAM,GAAG,GAAG;gBAChC,cAAc,EAAE;YAClB;SAAE;IACJ;IAEA,MAAM,aAAa,CAAC;QAClB,IAAI,MAAM,MAAM,IAAI,GAAG;YACrB,sMAAK,CAAC,KAAK,CAAC;YACZ;QACF;QACA,MAAM,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACtC,IAAI,MAAM;YACR,0BAA0B;mBAAI;mBAA2B,KAAK,YAAY;aAAC;QAC7E;QACA,SAAS,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACtC;IAEA,MAAM,oBAAoB,CAAC,eAAuB;QAChD,MAAM,cAAc,uBAAuB,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAC9D,IAAI,CAAC,aAAa;QAElB,0BAA0B,uBAAuB,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACtE,SAAS,MAAM,GAAG,CAAC,CAAA,OACjB,KAAK,EAAE,KAAK,SACR;gBAAE,GAAG,IAAI;gBAAE,cAAc;uBAAI,KAAK,YAAY;oBAAE;iBAAY;YAAC,IAC7D;IAER;IAEA,MAAM,4BAA4B,CAAC,eAAuB;QACxD,MAAM,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACtC,IAAI,CAAC,MAAM;QAEX,MAAM,cAAc,KAAK,YAAY,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACzD,IAAI,CAAC,aAAa;QAElB,SAAS,MAAM,GAAG,CAAC,CAAA,IACjB,EAAE,EAAE,KAAK,SACL;gBAAE,GAAG,CAAC;gBAAE,cAAc,EAAE,YAAY,CAAC,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YAAe,IACzE;QAEN,0BAA0B;eAAI;YAAwB;SAAY;IACpE;IAEA,MAAM,aAAa;QACjB,MAAM,WAAW;eAAI;SAAuB,CAAC,IAAI,CAAC,IAAM,KAAK,MAAM,KAAK;QACxE,MAAM,WAAW,MAAM,GAAG,CAAC,CAAC,MAAM,QAAU,CAAC;gBAC3C,GAAG,IAAI;gBACP,cAAc,SAAS,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,MAAM,MAAM,KAAK;YAC/D,CAAC;QAED,SAAS;QACT,0BAA0B,EAAE;QAC5B,sMAAK,CAAC,OAAO,CAAC;IAChB;IAEA,MAAM,mBAAmB,CAAC;QACxB,sMAAK,CAAC,OAAO,CAAC,CAAC,qBAAqB,EAAE,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,SAAS,MAAM;IAChF;IAEA,MAAM,gBAAgB;QACpB,MAAM,kBAAkB,MAAM,OAAO,CAAC,CAAA,IAAK,EAAE,YAAY;QACzD,0BAA0B;eAAI;eAA2B;SAAgB;QACzE,SAAS,MAAM,GAAG,CAAC,CAAA,IAAK,CAAC;gBAAE,GAAG,CAAC;gBAAE,cAAc,EAAE;YAAC,CAAC;QACnD,YAAY;QACZ,sMAAK,CAAC,OAAO,CAAC;IAChB;IAEA,MAAM,gBAAgB;QACpB,MAAM,aAAa,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,YAAY,CAAC,MAAM,KAAK;QAC/D,IAAI,WAAW,MAAM,GAAG,GAAG;YACzB,sMAAK,CAAC,KAAK,CAAC,GAAG,WAAW,MAAM,CAAC,6BAA6B,CAAC;YAC/D;QACF;QAEA,YAAY;QACZ,sMAAK,CAAC,OAAO,CAAC;IAChB;IAEA,qBACE;;0BACE,+OAAC,uMAAY;;kCACX,+OAAC,sMAAW;wBAAC,WAAU;;0CACrB,+OAAC,kQAAK;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAG/B,+OAAC,4MAAiB;kCAAC;;;;;;;;;;;;0BAKrB,+OAAC;gBAAI,WAAU;;kCAEb,+OAAC;wBAAI,WAAU;;0CACb,+OAAC,iMAAM;gCAAC,SAAQ;gCAAU,MAAK;gCAAK,SAAS;;kDAC3C,+OAAC,+PAAI;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;0CAGnC,+OAAC,iMAAM;gCAAC,SAAQ;gCAAU,MAAK;gCAAK,SAAS;gCAAY,UAAU,uBAAuB,MAAM,KAAK;;kDACnG,+OAAC,wQAAO;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;0CAGtC,+OAAC;gCAAI,WAAU;;;;;;0CACf,+OAAC;gCAAI,WAAU;;kDACb,+OAAC,kQAAK;wCAAC,WAAU;;;;;;kDACjB,+OAAC,iMAAM;wCAAC,OAAO,gBAAgB,QAAQ;wCAAI,eAAe,CAAC,IAAM,mBAAmB,SAAS;;0DAC3F,+OAAC,wMAAa;gDAAC,WAAU;0DACvB,cAAA,+OAAC,sMAAW;;;;;;;;;;0DAEd,+OAAC,wMAAa;;kEACZ,+OAAC,qMAAU;wDAAC,OAAM;kEAAI;;;;;;kEACtB,+OAAC,qMAAU;wDAAC,OAAM;kEAAK;;;;;;kEACvB,+OAAC,qMAAU;wDAAC,OAAM;kEAAK;;;;;;kEACvB,+OAAC,qMAAU;wDAAC,OAAM;kEAAK;;;;;;kEACvB,+OAAC,qMAAU;wDAAC,OAAM;kEAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAM/B,+OAAC;wBAAI,WAAU;;0CAEb,+OAAC;gCAAI,WAAU;;kDACb,+OAAC;wCAAI,WAAU;kDACb,cAAA,+OAAC;4CAAG,WAAU;;gDAAsB;gDACrB,uBAAuB,MAAM;gDAAC;;;;;;;;;;;;kDAG/C,+OAAC,6MAAU;wCAAC,WAAU;kDACpB,cAAA,+OAAC;4CAAI,WAAU;;gDACZ,uBAAuB,GAAG,CAAC,CAAA,4BAC1B,+OAAC;wDAEC,WAAU;;0EAEV,+OAAC;gEAAK,WAAU;0EAAW,YAAY,IAAI;;;;;;0EAC3C,+OAAC,iMAAM;gEAAC,eAAe,CAAC,SAAW,kBAAkB,YAAY,EAAE,EAAE;;kFACnE,+OAAC,wMAAa;wEAAC,WAAU;kFACvB,cAAA,+OAAC,sMAAW;4EAAC,aAAY;;;;;;;;;;;kFAE3B,+OAAC,wMAAa;kFACX,MAAM,GAAG,CAAC,CAAA,qBACT,+OAAC,qMAAU;gFAAe,OAAO,KAAK,EAAE;0FAAG,KAAK,IAAI;+EAAnC,KAAK,EAAE;;;;;;;;;;;;;;;;;uDAVzB,YAAY,EAAE;;;;;gDAgBtB,uBAAuB,MAAM,KAAK,mBACjC,+OAAC;oDAAE,WAAU;8DAAyC;;;;;;;;;;;;;;;;;;;;;;;0CAO9D,+OAAC;gCAAI,WAAU;0CACb,cAAA,+OAAC,6MAAU;oCAAC,WAAU;8CACpB,cAAA,+OAAC;wCAAI,WAAU;kDACZ,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,+OAAC;gDAEC,WAAW,IAAA,8KAAE,EACX,yBACA,YAAY;;kEAGd,+OAAC;wDAAI,WAAU;;0EACb,+OAAC;gEAAI,WAAU;;kFACb,+OAAC,+LAAK;wEACJ,OAAO,KAAK,IAAI;wEAChB,UAAU,CAAC,IAAM,SAAS,MAAM,GAAG,CAAC,CAAA,IAClC,EAAE,EAAE,KAAK,KAAK,EAAE,GAAG;oFAAE,GAAG,CAAC;oFAAE,MAAM,EAAE,MAAM,CAAC,KAAK;gFAAC,IAAI;wEAEtD,WAAU;;;;;;kFAEZ,+OAAC,+LAAK;wEAAC,SAAQ;wEAAY,WAAU;kFAClC,KAAK,YAAY,CAAC,MAAM;;;;;;;;;;;;0EAG7B,+OAAC;gEAAI,WAAU;;kFACb,+OAAC,iMAAM;wEACL,SAAQ;wEACR,MAAK;wEACL,WAAU;wEACV,SAAS,IAAM,iBAAiB,KAAK,EAAE;kFAEvC,cAAA,+OAAC,8RAAa;4EAAC,WAAU;;;;;;;;;;;kFAE3B,+OAAC,iMAAM;wEACL,SAAQ;wEACR,MAAK;wEACL,WAAU;wEACV,SAAS,IAAM,WAAW,KAAK,EAAE;kFAEjC,cAAA,+OAAC,yQAAM;4EAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;kEAKxB,+OAAC,+LAAK;wDACJ,aAAY;wDACZ,WAAU;wDACV,OAAO,KAAK,KAAK,IAAI;wDACrB,UAAU,CAAC,IAAM,SAAS,MAAM,GAAG,CAAC,CAAA,IAClC,EAAE,EAAE,KAAK,KAAK,EAAE,GAAG;oEAAE,GAAG,CAAC;oEAAE,OAAO,EAAE,MAAM,CAAC,KAAK;gEAAC,IAAI;;;;;;kEAIzD,+OAAC;wDAAI,WAAU;;4DACZ,KAAK,YAAY,CAAC,GAAG,CAAC,CAAA,4BACrB,+OAAC;oEAEC,WAAU;;sFAEV,+OAAC;sFAAM,YAAY,IAAI;;;;;;sFACvB,+OAAC,iMAAM;4EACL,SAAQ;4EACR,MAAK;4EACL,WAAU;4EACV,SAAS,IAAM,0BAA0B,YAAY,EAAE,EAAE,KAAK,EAAE;sFAEhE,cAAA,+OAAC,kRAAS;gFAAC,WAAU;;;;;;;;;;;;mEAVlB,YAAY,EAAE;;;;;4DActB,KAAK,YAAY,CAAC,MAAM,KAAK,mBAC5B,+OAAC;gEAAE,WAAU;0EAAyC;;;;;;;;;;;;;+CAlErD,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;oBA6EvB,0BACC,+OAAC;wBAAI,WAAU;;0CACb,+OAAC;;kDACC,+OAAC;wCAAE,WAAU;kDAA6B;;;;;;kDAC1C,+OAAC;wCAAE,WAAU;;4CACV,MAAM,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,YAAY,CAAC,MAAM,EAAE;4CAAG;4CAAkB,MAAM,MAAM;4CAAC;;;;;;;;;;;;;0CAG7F,+OAAC,iMAAM;gCAAC,SAAQ;gCAAc,MAAK;gCAAK,SAAS;0CAAe;;;;;;;;;;;;;;;;;;0BAOtE,+OAAC,uMAAY;;kCACX,+OAAC,iMAAM;wBAAC,SAAQ;wBAAU,SAAS;kCAAS;;;;;;oBAC3C,CAAC,yBACA,+OAAC,iMAAM;wBACL,SAAS;wBACT,UAAU,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,YAAY,CAAC,MAAM,KAAK;;0CAEpD,+OAAC,qRAAU;gCAAC,WAAU;;;;;;4BAAiB;;;;;;6CAIzC,+OAAC,iMAAM;wBAAC,SAAQ;wBAAc,SAAS;kCAAe;;;;;;;;;;;;;;AAOhE;GAnSgB;KAAA"}},
    {"offset": {"line": 8689, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/BreakoutRoomManager.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Input } from '@/components/ui/input'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { cn } from '@/lib/utils'\nimport type { BreakoutRoom, LiveStudent } from '../types'\nimport { \n  Plus, \n  Users, \n  Play, \n  Square,\n  Trash2,\n  UserPlus,\n  LogOut,\n  Edit2,\n  MessageSquare,\n  Clock\n} from 'lucide-react'\n\ninterface BreakoutRoomManagerProps {\n  rooms: BreakoutRoom[]\n  unassignedStudents: LiveStudent[]\n  onCreateRoom: () => void\n  onAssignStudent: (studentId: string, roomId: string) => void\n  onRemoveStudent: (studentId: string) => void\n  onSendAll: (roomIds: string[]) => void\n  onCloseAll: () => void\n  onJoinRoom?: (roomId: string) => void\n}\n\nexport function BreakoutRoomManager({\n  rooms,\n  unassignedStudents,\n  onCreateRoom,\n  onAssignStudent,\n  onRemoveStudent,\n  onSendAll,\n  onCloseAll,\n  onJoinRoom\n}: BreakoutRoomManagerProps) {\n  const [selectedRoom, setSelectedRoom] = useState<string | null>(null)\n  const [roomDuration, setRoomDuration] = useState(10)\n  const [editingTopic, setEditingTopic] = useState<string | null>(null)\n\n  const activeRooms = rooms.filter(r => r.status === 'active')\n  const preparingRooms = rooms.filter(r => r.status === 'forming')\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'active':\n        return <Badge className=\"bg-green-600\">Active</Badge>\n      case 'preparing':\n        return <Badge variant=\"outline\">Preparing</Badge>\n      case 'closed':\n        return <Badge variant=\"secondary\">Closed</Badge>\n      default:\n        return <Badge variant=\"outline\">{status}</Badge>\n    }\n  }\n\n  return (\n    <div className=\"h-full flex gap-4\">\n      {/* Left Panel - Room List */}\n      <div className=\"w-1/3 flex flex-col gap-4\">\n        <Card className=\"flex-1 flex flex-col\">\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <Users className=\"w-4 h-4\" />\n                <CardTitle className=\"text-sm font-medium\">Breakout Rooms</CardTitle>\n              </div>\n              <Button size=\"sm\" onClick={onCreateRoom}>\n                <Plus className=\"w-4 h-4 mr-1\" />\n                Create\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent className=\"flex-1 p-0\">\n            <ScrollArea className=\"h-[calc(100%-60px)] px-4\">\n              <div className=\"space-y-2 pb-4\">\n                {rooms.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <Users className=\"w-10 h-10 text-gray-300 mx-auto mb-2\" />\n                    <p className=\"text-sm text-gray-500\">No breakout rooms</p>\n                    <p className=\"text-xs text-gray-400 mt-1\">Create rooms for group activities</p>\n                  </div>\n                ) : (\n                  rooms.map((room) => (\n                    <div\n                      key={room.id}\n                      onClick={() => setSelectedRoom(room.id)}\n                      className={cn(\n                        \"p-3 rounded-lg border cursor-pointer transition-all\",\n                        selectedRoom === room.id \n                          ? \"border-blue-500 bg-blue-50\" \n                          : \"border-gray-200 hover:border-gray-300\"\n                      )}\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-medium text-sm\">{room.name}</span>\n                        {getStatusBadge(room.status)}\n                      </div>\n                      <div className=\"flex items-center gap-4 mt-2 text-xs text-gray-500\">\n                        <span className=\"flex items-center gap-1\">\n                          <Users className=\"w-3 h-3\" />\n                          {room.participants.length} students\n                        </span>\n                        {room.topic && (\n                          <span className=\"truncate max-w-[120px]\">\n                            {room.topic}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            </ScrollArea>\n          </CardContent>\n        </Card>\n\n        {/* Controls */}\n        {preparingRooms.length > 0 && (\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-2\">\n                  <Clock className=\"w-4 h-4 text-gray-500\" />\n                  <span className=\"text-sm\">Duration:</span>\n                  <Input\n                    type=\"number\"\n                    value={roomDuration}\n                    onChange={(e) => setRoomDuration(Number(e.target.value))}\n                    className=\"w-20 h-8\"\n                    min={1}\n                    max={60}\n                  />\n                  <span className=\"text-sm text-gray-500\">min</span>\n                </div>\n                <Button \n                  className=\"w-full\"\n                  onClick={() => onSendAll(preparingRooms.map(r => r.id))}\n                >\n                  <Play className=\"w-4 h-4 mr-2\" />\n                  Start Breakout Sessions\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {activeRooms.length > 0 && (\n          <Button variant=\"destructive\" onClick={onCloseAll}>\n            <Square className=\"w-4 h-4 mr-2\" />\n            End All Sessions\n          </Button>\n        )}\n      </div>\n\n      {/* Right Panel - Room Detail */}\n      <div className=\"flex-1\">\n        {selectedRoom ? (\n          <RoomDetail\n            room={rooms.find(r => r.id === selectedRoom)!}\n            unassignedStudents={unassignedStudents}\n            onAssignStudent={onAssignStudent}\n            onRemoveStudent={onRemoveStudent}\n            onJoinRoom={onJoinRoom}\n          />\n        ) : (\n          <Card className=\"h-full flex items-center justify-center\">\n            <div className=\"text-center p-8\">\n              <Users className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n              <p className=\"text-gray-500\">Select a room to view details</p>\n            </div>\n          </Card>\n        )}\n      </div>\n    </div>\n  )\n}\n\ninterface RoomDetailProps {\n  room: BreakoutRoom\n  unassignedStudents: LiveStudent[]\n  onAssignStudent: (studentId: string, roomId: string) => void\n  onRemoveStudent: (studentId: string) => void\n  onJoinRoom?: (roomId: string) => void\n}\n\nfunction RoomDetail({ room, unassignedStudents, onAssignStudent, onRemoveStudent, onJoinRoom }: RoomDetailProps) {\n  const [showAddStudents, setShowAddStudents] = useState(false)\n\n  return (\n    <Card className=\"h-full flex flex-col\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <CardTitle className=\"text-base\">{room.name}</CardTitle>\n            {room.topic && (\n              <p className=\"text-sm text-gray-500 mt-1\">{room.topic}</p>\n            )}\n          </div>\n          <Badge className={cn(\n            room.status === 'active' && \"bg-green-600\",\n            room.status === 'closed' && \"bg-gray-500\"\n          )}>\n            {room.status.charAt(0).toUpperCase() + room.status.slice(1)}\n          </Badge>\n        </div>\n      </CardHeader>\n      <CardContent className=\"flex-1 p-0\">\n        <ScrollArea className=\"h-full px-4\">\n          <div className=\"space-y-4 pb-4\">\n            {/* Assigned Students */}\n            <div>\n              <div className=\"flex items-center justify-between mb-2\">\n                <h3 className=\"text-sm font-medium text-gray-700\">\n                  Students ({room.participants.length})\n                </h3>\n                <Button \n                  variant=\"ghost\" \n                  size=\"sm\"\n                  onClick={() => setShowAddStudents(!showAddStudents)}\n                >\n                  <UserPlus className=\"w-4 h-4 mr-1\" />\n                  Add\n                </Button>\n              </div>\n              \n              {room.participants.length === 0 ? (\n                <p className=\"text-sm text-gray-400 italic\">No students assigned</p>\n              ) : (\n                <div className=\"space-y-2\">\n                  {room.participants.filter(p => p.role === 'student').map((participant) => (\n                    <div \n                      key={participant.userId}\n                      className=\"flex items-center justify-between p-2 bg-gray-50 rounded\"\n                    >\n                      <div className=\"flex items-center gap-2\">\n                        <div className={cn(\n                          \"w-2 h-2 rounded-full\",\n                          participant.isOnline ? \"bg-green-500\" : \"bg-gray-400\"\n                        )} />\n                        <span className=\"text-sm\">{participant.name}</span>\n                      </div>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-6 w-6\"\n                        onClick={() => onRemoveStudent(participant.userId)}\n                      >\n                        <LogOut className=\"w-3 h-3 text-gray-400\" />\n                      </Button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Add Students Panel */}\n            {showAddStudents && unassignedStudents.length > 0 && (\n              <div className=\"border rounded-lg p-3 bg-blue-50\">\n                <h4 className=\"text-sm font-medium mb-2\">Add Students</h4>\n                <div className=\"space-y-1 max-h-32 overflow-y-auto\">\n                  {unassignedStudents.map((student) => (\n                    <button\n                      key={student.id}\n                      className=\"w-full text-left px-2 py-1.5 text-sm hover:bg-blue-100 rounded flex items-center gap-2\"\n                      onClick={() => {\n                        onAssignStudent(student.id, room.id)\n                        if (unassignedStudents.length === 1) {\n                          setShowAddStudents(false)\n                        }\n                      }}\n                    >\n                      <UserPlus className=\"w-3 h-3\" />\n                      {student.name}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Room Actions */}\n            {room.status === 'active' && (\n              <div className=\"flex gap-2\">\n                <Button variant=\"outline\" className=\"flex-1\">\n                  <MessageSquare className=\"w-4 h-4 mr-2\" />\n                  Broadcast\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  className=\"flex-1\"\n                  onClick={() => onJoinRoom?.(room.id)}\n                  disabled={!onJoinRoom}\n                >\n                  <Users className=\"w-4 h-4 mr-2\" />\n                  Join Room\n                </Button>\n              </div>\n            )}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9422, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/BreakoutRoomModal.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect, useMemo } from 'react'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Input } from '@/components/ui/input'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { cn } from '@/lib/utils'\nimport type { BreakoutRoom, LiveStudent, ChatMessage } from '../types'\nimport {\n  Mic,\n  MicOff,\n  Video,\n  VideoOff,\n  MonitorUp,\n  MonitorOff,\n  PhoneOff,\n  MessageSquare,\n  Users,\n  Send,\n  Crown,\n  Timer,\n  AlertCircle,\n} from 'lucide-react'\n\ninterface BreakoutRoomModalProps {\n  room: BreakoutRoom | null\n  isOpen: boolean\n  onClose: () => void\n  onEndRoom?: (roomId: string) => void\n  onBroadcast?: (roomId: string, message: string) => void\n  onExtendTime?: (roomId: string, minutes: number) => void\n}\n\nexport function BreakoutRoomModal({\n  room,\n  isOpen,\n  onClose,\n  onEndRoom,\n  onBroadcast,\n  onExtendTime\n}: BreakoutRoomModalProps) {\n  const [activeTab, setActiveTab] = useState('video')\n  const [messagesByRoomId, setMessagesByRoomId] = useState<Record<string, ChatMessage[]>>({})\n  const [newMessage, setNewMessage] = useState('')\n  const [isMuted, setIsMuted] = useState(false)\n  const [isVideoOff, setIsVideoOff] = useState(false)\n  const [isScreenSharing, setIsScreenSharing] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  const messages = useMemo(\n    () => (room ? (messagesByRoomId[room.id] ?? []) : []),\n    [room, messagesByRoomId]\n  )\n\n  // Auto-scroll to bottom of messages\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }, [messages])\n\n  if (!room) return null\n\n  const handleSendMessage = () => {\n    if (!newMessage.trim()) return\n    \n    const message: ChatMessage = {\n      id: `tutor-msg-${Date.now()}`,\n      studentId: 'tutor',\n      studentName: 'You (Tutor)',\n      content: newMessage,\n      timestamp: new Date().toISOString(),\n      sentiment: 'neutral'\n    }\n    \n    setMessagesByRoomId((prev) => ({\n      ...prev,\n      [room.id]: [...(prev[room.id] || []), message],\n    }))\n    setNewMessage('')\n    \n    // Also broadcast to room if callback provided\n    onBroadcast?.(room.id, newMessage)\n  }\n\n  const handleEndRoom = () => {\n    if (confirm(`Are you sure you want to end ${room.name}? All students will return to the main room.`)) {\n      onEndRoom?.(room.id)\n      onClose()\n    }\n  }\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60)\n    const secs = seconds % 60\n    return `${mins}:${secs.toString().padStart(2, '0')}`\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"max-w-6xl w-[95vw] h-[90vh] p-0 gap-0 overflow-hidden\">\n        {/* Header */}\n        <DialogHeader className=\"px-6 py-4 border-b bg-slate-900 text-white shrink-0\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <DialogTitle className=\"text-white text-lg flex items-center gap-2\">\n                <Users className=\"h-5 w-5 text-blue-400\" />\n                {room.name}\n              </DialogTitle>\n              <Badge variant=\"secondary\" className=\"bg-green-600/50 text-white\">\n                Active\n              </Badge>\n              {room.topic && (\n                <span className=\"text-sm text-slate-400\">\n                  Topic: {room.topic}\n                </span>\n              )}\n            </div>\n            \n            <div className=\"flex items-center gap-3\">\n              {/* Timer */}\n              <div className={cn(\n                \"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium\",\n                room.timeRemaining < 60 ? \"bg-red-600/50 text-white\" : \"bg-slate-800 text-slate-300\"\n              )}>\n                <Timer className=\"h-4 w-4\" />\n                {formatTime(room.timeRemaining)}\n              </div>\n              \n              {/* Extend Time Button */}\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"border-slate-600 text-slate-300 hover:bg-slate-800\"\n                onClick={() => onExtendTime?.(room.id, 5)}\n              >\n                +5m\n              </Button>\n              \n              {/* End Room Button */}\n              <Button\n                variant=\"destructive\"\n                size=\"sm\"\n                onClick={handleEndRoom}\n                className=\"gap-1\"\n              >\n                <PhoneOff className=\"h-4 w-4\" />\n                End Room\n              </Button>\n            </div>\n          </div>\n        </DialogHeader>\n\n        {/* Main Content */}\n        <div className=\"flex flex-1 overflow-hidden\">\n          <Tabs value={activeTab} onValueChange={setActiveTab} className=\"flex-1 flex flex-col\">\n            <div className=\"border-b bg-slate-950 px-4\">\n              <TabsList className=\"bg-transparent h-12\">\n                <TabsTrigger \n                  value=\"video\" \n                  className=\"data-[state=active]:bg-slate-800 text-slate-400 data-[state=active]:text-white gap-2\"\n                >\n                  <Video className=\"h-4 w-4\" />\n                  Video\n                </TabsTrigger>\n                <TabsTrigger \n                  value=\"chat\"\n                  className=\"data-[state=active]:bg-slate-800 text-slate-400 data-[state=active]:text-white gap-2\"\n                >\n                  <MessageSquare className=\"h-4 w-4\" />\n                  Chat\n                  {messages.filter(m => m.isQuestion).length > 0 && (\n                    <span className=\"bg-yellow-600 text-white text-xs px-1.5 py-0.5 rounded-full\">\n                      ?\n                    </span>\n                  )}\n                </TabsTrigger>\n                <TabsTrigger \n                  value=\"students\"\n                  className=\"data-[state=active]:bg-slate-800 text-slate-400 data-[state=active]:text-white gap-2\"\n                >\n                  <Users className=\"h-4 w-4\" />\n                  Students ({room.participants.filter(p => p.role === 'student').length})\n                </TabsTrigger>\n              </TabsList>\n            </div>\n\n            {/* Video Tab */}\n            <TabsContent value=\"video\" className=\"flex-1 m-0 flex flex-col bg-slate-950\">\n              <div className=\"flex-1 p-4 overflow-auto\">\n                {/* Video Grid */}\n                <div className={cn(\n                  \"grid gap-3 h-full\",\n                  room.participants.filter(p => p.role === 'student').length === 0 ? \"grid-cols-1\" :\n                  room.participants.filter(p => p.role === 'student').length === 1 ? \"grid-cols-1\" :\n                  room.participants.filter(p => p.role === 'student').length === 2 ? \"grid-cols-2\" :\n                  room.participants.filter(p => p.role === 'student').length <= 4 ? \"grid-cols-2\" :\n                  \"grid-cols-3\"\n                )}>\n                  {/* Tutor Video (Self) */}\n                  <div className=\"relative bg-slate-800 rounded-xl overflow-hidden aspect-video flex items-center justify-center border-2 border-blue-500\">\n                    <div className=\"text-center\">\n                      <div className=\"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-2\">\n                        <Crown className=\"h-10 w-10 text-white\" />\n                      </div>\n                      <p className=\"text-white font-medium\">You (Tutor)</p>\n                      <Badge variant=\"outline\" className=\"mt-1 text-blue-400 border-blue-400\">\n                        Host\n                      </Badge>\n                    </div>\n                    \n                    {/* Self view controls */}\n                    <div className=\"absolute bottom-3 left-3 flex gap-2\">\n                      {isMuted && (\n                        <div className=\"bg-red-600 p-1.5 rounded-full\">\n                          <MicOff className=\"h-4 w-4 text-white\" />\n                        </div>\n                      )}\n                      {isVideoOff && (\n                        <div className=\"bg-red-600 p-1.5 rounded-full\">\n                          <VideoOff className=\"h-4 w-4 text-white\" />\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Student Videos */}\n                  {room.participants.filter(p => p.role === 'student').map((participant, index) => (\n                    <StudentVideoTile \n                      key={participant.userId} \n                      student={{\n                        id: participant.userId,\n                        name: participant.name,\n                        status: participant.isOnline ? 'online' : 'offline',\n                        engagementScore: participant.engagementScore,\n                        attentionLevel: participant.attentionLevel,\n                        handRaised: participant.handRaised,\n                        lastActive: new Date().toISOString(),\n                        joinedAt: participant.joinedAt,\n                        reactions: 0,\n                        chatMessages: 0\n                      }} \n                      index={index}\n                    />\n                  ))}\n\n                  {/* Empty slots */}\n                  {room.participants.filter(p => p.role === 'student').length === 0 && (\n                    <div className=\"bg-slate-800 rounded-xl flex items-center justify-center aspect-video\">\n                      <div className=\"text-center text-slate-500\">\n                        <Users className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\n                        <p>No students in this room yet</p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Media Controls */}\n              <div className=\"px-6 py-4 bg-slate-900 border-t flex items-center justify-center gap-4\">\n                <Button\n                  variant={isMuted ? 'destructive' : 'outline'}\n                  size=\"icon\"\n                  onClick={() => setIsMuted(!isMuted)}\n                  className=\"h-12 w-12 rounded-full\"\n                >\n                  {isMuted ? <MicOff className=\"h-5 w-5\" /> : <Mic className=\"h-5 w-5\" />}\n                </Button>\n                \n                <Button\n                  variant={isVideoOff ? 'destructive' : 'outline'}\n                  size=\"icon\"\n                  onClick={() => setIsVideoOff(!isVideoOff)}\n                  className=\"h-12 w-12 rounded-full\"\n                >\n                  {isVideoOff ? <VideoOff className=\"h-5 w-5\" /> : <Video className=\"h-5 w-5\" />}\n                </Button>\n                \n                <Button\n                  variant={isScreenSharing ? 'default' : 'outline'}\n                  size=\"icon\"\n                  onClick={() => setIsScreenSharing(!isScreenSharing)}\n                  className={cn(\n                    \"h-12 w-12 rounded-full\",\n                    isScreenSharing && \"bg-blue-600\"\n                  )}\n                >\n                  {isScreenSharing ? <MonitorOff className=\"h-5 w-5\" /> : <MonitorUp className=\"h-5 w-5\" />}\n                </Button>\n                \n                <Button\n                  variant=\"destructive\"\n                  size=\"icon\"\n                  onClick={handleEndRoom}\n                  className=\"h-12 w-12 rounded-full\"\n                >\n                  <PhoneOff className=\"h-5 w-5\" />\n                </Button>\n              </div>\n            </TabsContent>\n\n            {/* Chat Tab */}\n            <TabsContent value=\"chat\" className=\"flex-1 m-0 flex flex-col bg-slate-950\">\n              <ScrollArea className=\"flex-1 p-4\">\n                <div className=\"space-y-4\">\n                  {messages.length === 0 ? (\n                    <div className=\"text-center text-slate-500 py-8\">\n                      <MessageSquare className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\n                      <p>No messages yet</p>\n                      <p className=\"text-sm\">Start the conversation!</p>\n                    </div>\n                  ) : (\n                    messages.map((message) => (\n                      <ChatMessageItem \n                        key={message.id} \n                        message={message}\n                        isTutor={message.studentId === 'tutor'}\n                      />\n                    ))\n                  )}\n                  <div ref={messagesEndRef} />\n                </div>\n              </ScrollArea>\n              \n              {/* Message Input */}\n              <div className=\"p-4 bg-slate-900 border-t\">\n                <div className=\"flex gap-2\">\n                  <Input\n                    placeholder=\"Type a message to the room...\"\n                    value={newMessage}\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    onKeyDown={(e) => e.key === 'Enter' && handleSendMessage()}\n                    className=\"bg-slate-800 border-slate-700 text-white\"\n                  />\n                  <Button \n                    onClick={handleSendMessage}\n                    disabled={!newMessage.trim()}\n                    className=\"gap-2\"\n                  >\n                    <Send className=\"h-4 w-4\" />\n                    Send\n                  </Button>\n                </div>\n                <p className=\"text-xs text-slate-500 mt-2\">\n                  Your messages will be visible to all students in this room\n                </p>\n              </div>\n            </TabsContent>\n\n            {/* Students Tab */}\n            <TabsContent value=\"students\" className=\"flex-1 m-0 bg-slate-950\">\n              <ScrollArea className=\"h-full p-4\">\n                <div className=\"space-y-2\">\n                  {room.participants.filter(p => p.role === 'student').length === 0 ? (\n                    <div className=\"text-center text-slate-500 py-8\">\n                      <Users className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\n                      <p>No students in this room</p>\n                    </div>\n                  ) : (\n                    room.participants.filter(p => p.role === 'student').map((participant) => (\n                      <StudentListItem \n                        key={participant.userId} \n                        student={{\n                          id: participant.userId,\n                          name: participant.name,\n                          status: participant.isOnline ? 'online' : 'offline',\n                          engagementScore: participant.engagementScore,\n                          attentionLevel: participant.attentionLevel,\n                          handRaised: participant.handRaised,\n                          lastActive: new Date().toISOString(),\n                          joinedAt: participant.joinedAt,\n                          reactions: 0,\n                          chatMessages: 0\n                        }} \n                      />\n                    ))\n                  )}\n                </div>\n              </ScrollArea>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\n// Student Video Tile Component\nfunction StudentVideoTile({ student, index }: { student: LiveStudent; index: number }) {\n  const colors = ['bg-red-500', 'bg-green-500', 'bg-yellow-500', 'bg-purple-500', 'bg-pink-500', 'bg-indigo-500']\n  const bgColor = colors[index % colors.length]\n  \n  return (\n    <div className=\"relative bg-slate-800 rounded-xl overflow-hidden aspect-video flex items-center justify-center\">\n      {/* Avatar placeholder */}\n      <div className=\"text-center\">\n        <div className={cn(\"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-2\", bgColor)}>\n          <span className=\"text-white text-xl font-bold\">\n            {student.name.charAt(0).toUpperCase()}\n          </span>\n        </div>\n        <p className=\"text-white font-medium text-sm\">{student.name}</p>\n        <div className=\"flex items-center justify-center gap-1 mt-1\">\n          <span className={cn(\n            \"w-2 h-2 rounded-full\",\n            student.status === 'online' ? \"bg-green-500\" : \"bg-gray-500\"\n          )} />\n          <span className=\"text-xs text-slate-400\">\n            {student.status === 'online' ? 'Online' : 'Offline'}\n          </span>\n        </div>\n      </div>\n      \n      {/* Engagement indicator */}\n      <div className=\"absolute top-3 right-3\">\n        <Badge \n          variant=\"outline\" \n          className={cn(\n            \"text-xs\",\n            student.engagementScore >= 80 ? \"bg-green-600/50 text-green-400 border-green-500\" :\n            student.engagementScore >= 50 ? \"bg-yellow-600/50 text-yellow-400 border-yellow-500\" :\n            \"bg-red-600/50 text-red-400 border-red-500\"\n          )}\n        >\n          {student.engagementScore}% engaged\n        </Badge>\n      </div>\n      \n      {/* Hand raised indicator */}\n      {student.handRaised && (\n        <div className=\"absolute bottom-3 right-3 bg-yellow-600 p-2 rounded-full animate-pulse\">\n          <AlertCircle className=\"h-4 w-4 text-white\" />\n        </div>\n      )}\n    </div>\n  )\n}\n\n// Chat Message Item Component\nfunction ChatMessageItem({ message, isTutor }: { message: ChatMessage; isTutor: boolean }) {\n  return (\n    <div className={cn(\n      \"flex gap-3\",\n      isTutor && \"flex-row-reverse\"\n    )}>\n      <div className={cn(\n        \"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold shrink-0\",\n        isTutor ? \"bg-blue-600 text-white\" : \"bg-slate-700 text-slate-300\"\n      )}>\n        {message.studentName.charAt(0).toUpperCase()}\n      </div>\n      <div className={cn(\n        \"max-w-[70%]\",\n        isTutor && \"text-right\"\n      )}>\n        <div className=\"flex items-center gap-2 mb-1\">\n          <span className={cn(\n            \"text-sm font-medium\",\n            isTutor ? \"text-blue-400\" : \"text-slate-300\"\n          )}>\n            {message.studentName}\n          </span>\n          <span className=\"text-xs text-slate-500\">\n            {new Date(message.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n          </span>\n        </div>\n        <div className={cn(\n          \"inline-block px-3 py-2 rounded-lg text-sm text-left\",\n          isTutor ? \"bg-blue-600 text-white\" : \"bg-slate-800 text-slate-200\",\n          message.isQuestion && !isTutor && \"border-l-4 border-yellow-500\"\n        )}>\n          {message.content}\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// Student List Item Component\nfunction StudentListItem({ student }: { student: LiveStudent }) {\n  return (\n    <div className=\"flex items-center justify-between p-3 bg-slate-800 rounded-lg\">\n      <div className=\"flex items-center gap-3\">\n        <div className={cn(\n          \"w-10 h-10 rounded-full flex items-center justify-center font-bold\",\n          student.status === 'online' ? \"bg-green-600\" : \"bg-slate-600\"\n        )}>\n          {student.name.charAt(0).toUpperCase()}\n        </div>\n        <div>\n          <p className=\"text-white font-medium\">{student.name}</p>\n          <div className=\"flex items-center gap-2 text-xs text-slate-400\">\n            <span className={cn(\n              \"w-2 h-2 rounded-full\",\n              student.status === 'online' ? \"bg-green-500\" : \"bg-gray-500\"\n            )} />\n            {student.status === 'online' ? 'Online' : 'Offline'}\n            {student.handRaised && (\n              <span className=\"text-yellow-400 flex items-center gap-1\">\n                 Hand raised\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"flex items-center gap-3\">\n        <Badge \n          variant=\"outline\" \n          className={cn(\n            \"text-xs\",\n            student.engagementScore >= 80 ? \"text-green-400 border-green-500\" :\n            student.engagementScore >= 50 ? \"text-yellow-400 border-yellow-500\" :\n            \"text-red-400 border-red-500\"\n          )}\n        >\n          {student.engagementScore}% engaged\n        </Badge>\n        \n        {student.attentionLevel === 'low' && (\n          <Badge variant=\"outline\" className=\"text-xs text-red-400 border-red-500\">\n            Attention\n          </Badge>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10490, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/StudentEngagementMonitor.tsx"],"sourcesContent":["'use client'\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar'\nimport { Progress } from '@/components/ui/progress'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { cn } from '@/lib/utils'\nimport { \n  Wifi, \n  WifiOff, \n  Smartphone, \n  Laptop, \n  Tablet,\n  AlertTriangle,\n  CheckCircle2\n} from 'lucide-react'\nimport type { LiveStudent } from '../types'\n\ninterface StudentEngagementMonitorProps {\n  students: LiveStudent[]\n  onStudentClick?: (student: LiveStudent) => void\n}\n\nexport function StudentEngagementMonitor({ students, onStudentClick }: StudentEngagementMonitorProps) {\n  // Sort students: online first, then by attention level\n  const attentionLevelValue = { high: 3, medium: 2, low: 1 }\n  const sortedStudents = [...students].sort((a, b) => {\n    const aOnline = a.status === 'online'\n    const bOnline = b.status === 'online'\n    if (aOnline !== bOnline) return bOnline ? 1 : -1\n    return attentionLevelValue[b.attentionLevel] - attentionLevelValue[a.attentionLevel]\n  })\n\n  const getDeviceIcon = (device?: string) => {\n    switch (device) {\n      case 'mobile': return <Smartphone className=\"w-3 h-3\" />\n      case 'tablet': return <Tablet className=\"w-3 h-3\" />\n      default: return <Laptop className=\"w-3 h-3\" />\n    }\n  }\n\n  const getConnectionColor = (quality?: string) => {\n    switch (quality) {\n      case 'excellent': return 'text-green-500'\n      case 'good': return 'text-blue-500'\n      case 'fair': return 'text-yellow-500'\n      case 'poor': return 'text-red-500'\n      default: return 'text-gray-400'\n    }\n  }\n\n  const getEngagementColor = (score: number) => {\n    if (score >= 80) return 'bg-green-500'\n    if (score >= 50) return 'bg-yellow-500'\n    return 'bg-red-500'\n  }\n\n  const onlineCount = students.filter(s => s.status === 'online').length\n  const atRiskCount = students.filter(s => s.status === 'online' && s.attentionLevel === 'low').length\n\n  return (\n    <Card className=\"h-full flex flex-col\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-sm font-medium\">Students</CardTitle>\n          <div className=\"flex items-center gap-2\">\n            <Badge variant=\"outline\" className=\"text-xs\">\n              <CheckCircle2 className=\"w-3 h-3 mr-1 text-green-500\" />\n              {onlineCount} Online\n            </Badge>\n            {atRiskCount > 0 && (\n              <Badge variant=\"destructive\" className=\"text-xs\">\n                <AlertTriangle className=\"w-3 h-3 mr-1\" />\n                {atRiskCount} At Risk\n              </Badge>\n            )}\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent className=\"flex-1 p-0\">\n        <ScrollArea className=\"h-[calc(100%-60px)]\">\n          <div className=\"space-y-2 px-4 pb-4\">\n            {sortedStudents.map((student) => {\n              const isOnline = student.status === 'online'\n              const isAtRisk = isOnline && student.attentionLevel === 'low'\n              \n              return (\n                <div\n                  key={student.id}\n                  onClick={() => onStudentClick?.(student)}\n                  className={cn(\n                    \"p-3 rounded-lg border transition-all cursor-pointer\",\n                    isOnline \n                      ? \"bg-white hover:bg-gray-50\" \n                      : \"bg-gray-50 opacity-60\",\n                    isAtRisk && \"border-red-200 bg-red-50\"\n                  )}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"relative\">\n                      <Avatar className=\"w-8 h-8\">\n                        <AvatarFallback className={cn(\n                          \"text-xs\",\n                          isOnline ? \"bg-blue-100 text-blue-700\" : \"bg-gray-200 text-gray-500\"\n                        )}>\n                          {student.name.split(' ').map(n => n[0]).join('')}\n                        </AvatarFallback>\n                      </Avatar>\n                      <div className={cn(\n                        \"absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-white\",\n                        isOnline ? \"bg-green-500\" : \"bg-gray-400\"\n                      )} />\n                    </div>\n\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center justify-between\">\n                        <p className=\"font-medium text-sm truncate\">{student.name}</p>\n                        <div className=\"flex items-center gap-1\">\n                          <Laptop className=\"w-3 h-3 text-gray-400\" />\n                          {isOnline ? (\n                            <Wifi className=\"w-3 h-3 text-green-500\" />\n                          ) : (\n                            <WifiOff className=\"w-3 h-3 text-gray-400\" />\n                          )}\n                        </div>\n                      </div>\n\n                      {isOnline && (\n                        <div className=\"mt-2 space-y-1\">\n                          <div className=\"flex items-center justify-between text-xs\">\n                            <span className=\"text-gray-500\">Attention</span>\n                            <span className={cn(\n                              student.attentionLevel === 'low' ? \"text-red-600\" : \"text-gray-700\"\n                            )}>{student.attentionLevel}</span>\n                          </div>\n                          <Progress \n                            value={student.engagementScore} \n                            className=\"h-1.5\"\n                          />\n\n                          <div className=\"flex items-center justify-between text-xs mt-1\">\n                            <span className=\"text-gray-500\">Engagement</span>\n                            <span className=\"text-gray-700\">{student.engagementScore}%</span>\n                          </div>\n                          <div className={cn(\"h-1 rounded-full\", getEngagementColor(student.engagementScore))} \n                            style={{ width: `${student.engagementScore}%` }}\n                          />\n                        </div>\n                      )}\n\n                      {!isOnline && (\n                        <p className=\"text-xs text-gray-400 mt-1\">\n                          Last seen {new Date(student.lastActive).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10894, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/live-class/components/index.ts"],"sourcesContent":["export { LiveClassHub } from './LiveClassHub'\nexport { VideoClassroom } from './VideoClassroom'\nexport { ChatPanel } from './ChatPanel'\nexport { ParticipantsPanel } from './ParticipantsPanel'\nexport { WhiteboardPanel } from './WhiteboardPanel'\nexport { ScreenShareView } from './ScreenShareView'\nexport { RecordingIndicator } from './RecordingIndicator'\nexport { ReactionsOverlay } from './ReactionsOverlay'\nexport { PollCreator } from './PollCreator'\nexport { BreakoutRoomControl } from './BreakoutRoomControl'\nexport { StudentList } from './StudentList'\nexport { BreakoutRoomManager } from './BreakoutRoomManager'\nexport { BreakoutRoomModal } from './BreakoutRoomModal'\nexport { HandRaiseQueue } from './HandRaiseQueue'\nexport { ChatMonitor } from './ChatMonitor'\nexport { LiveAnalytics } from './LiveAnalytics'\nexport { AITeachingAssistant } from './AITeachingAssistant'\nexport { StudentProgressPanel } from './StudentProgressPanel'\nexport { StudentEngagementMonitor } from './StudentEngagementMonitor'\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}}]
}