{
  "version": 3,
  "sources": [],
  "debugId": "f4e1052d-dea7-5d33-5c59-06746707aa7f",
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/types.ts"],"sourcesContent":["/**\n * Poll System Types\n * Shared types for the polling functionality across Tutor Live Class and Class Room pages\n */\n\nexport type PollType = 'multiple_choice' | 'true_false' | 'rating' | 'short_answer' | 'word_cloud';\nexport type PollStatus = 'draft' | 'active' | 'closed';\n\nexport interface PollOption {\n  id: string;\n  label: string;  // A, B, C, D...\n  text: string;\n  color?: string;\n  responseCount?: number;\n  percentage?: number;\n}\n\nexport interface PollResponse {\n  id: string;\n  optionIds?: string[];\n  rating?: number;\n  textAnswer?: string;\n  studentId?: string;\n  createdAt: string;\n}\n\nexport interface Poll {\n  id: string;\n  sessionId: string;\n  tutorId: string;\n  question: string;\n  type: PollType;\n  options: PollOption[];\n  isAnonymous: boolean;\n  allowMultiple: boolean;\n  timeLimit?: number;\n  showResults: boolean;\n  correctOptionId?: string;\n  status: PollStatus;\n  startedAt?: string;\n  endedAt?: string;\n  responses: PollResponse[];\n  totalResponses: number;\n  createdAt: string;\n}\n\nexport interface PollTemplate {\n  id: string;\n  name: string;\n  icon: string;\n  description: string;\n  defaultQuestion: string;\n  type: PollType;\n  options?: string[];\n}\n\nexport interface CreatePollInput {\n  question: string;\n  type: PollType;\n  options: { label: string; text: string }[];\n  isAnonymous: boolean;\n  allowMultiple: boolean;\n  timeLimit?: number;\n  showResults: boolean;\n  correctOptionId?: string;\n}\n\nexport interface SubmitVoteInput {\n  optionIds?: string[];\n  rating?: number;\n  textAnswer?: string;\n}\n\nexport interface PollStatistics {\n  totalVotes: number;\n  participationRate: number;\n  optionStats: {\n    optionId: string;\n    count: number;\n    percentage: number;\n  }[];\n}\n"],"names":[],"mappings":"AAAA;;;CAGC"}},
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/utils/pollTemplates.ts"],"sourcesContent":["/**\n * Poll Templates\n * Pre-defined poll templates for quick creation\n */\n\nimport { PollTemplate } from '../types';\n\nexport const POLL_TEMPLATES: PollTemplate[] = [\n  {\n    id: 'understanding-check',\n    name: 'Understanding Check',\n    icon: 'HelpCircle',\n    description: 'Quick yes/no check for concept understanding',\n    defaultQuestion: 'Do you understand this concept?',\n    type: 'true_false',\n    options: ['Yes, I understand', 'No, I need clarification']\n  },\n  {\n    id: 'confidence-rating',\n    name: 'Confidence Rating',\n    icon: 'Gauge',\n    description: 'Rate confidence level on a scale of 1-5',\n    defaultQuestion: 'How confident are you with this topic?',\n    type: 'rating',\n    options: ['1 - Not confident', '2', '3', '4', '5 - Very confident']\n  },\n  {\n    id: 'topic-review',\n    name: 'Topic Review Vote',\n    icon: 'List',\n    description: 'Let students vote on what to review next',\n    defaultQuestion: 'Which topic should we review next?',\n    type: 'multiple_choice',\n    options: ['Topic A', 'Topic B', 'Topic C', 'Topic D']\n  },\n  {\n    id: 'ready-to-proceed',\n    name: 'Ready to Move On?',\n    icon: 'Play',\n    description: 'Check if students are ready to continue',\n    defaultQuestion: 'Are you ready to move on to the next section?',\n    type: 'true_false',\n    options: ['Yes, let\\'s continue', 'No, I need more time']\n  },\n  {\n    id: 'quick-quiz',\n    name: 'Quick Quiz',\n    icon: 'Brain',\n    description: 'Multiple choice question with correct answer',\n    defaultQuestion: 'What is the correct answer?',\n    type: 'multiple_choice',\n    options: ['Option A', 'Option B', 'Option C', 'Option D']\n  },\n  {\n    id: 'word-cloud',\n    name: 'Word Cloud',\n    icon: 'Cloud',\n    description: 'Collect single-word responses from students',\n    defaultQuestion: 'What\\'s one word that describes your understanding?',\n    type: 'word_cloud'\n  },\n  {\n    id: 'short-answer',\n    name: 'Short Answer',\n    icon: 'MessageSquare',\n    description: 'Open-ended question for detailed responses',\n    defaultQuestion: 'What questions do you have about this topic?',\n    type: 'short_answer'\n  },\n  {\n    id: 'pace-check',\n    name: 'Pace Check',\n    icon: 'Clock',\n    description: 'Check if the teaching pace is appropriate',\n    defaultQuestion: 'How is the pace of the lesson?',\n    type: 'multiple_choice',\n    options: ['Too slow', 'Just right', 'Too fast', 'Way too fast']\n  }\n];\n\nexport const getTemplateById = (id: string): PollTemplate | undefined => {\n  return POLL_TEMPLATES.find(t => t.id === id);\n};\n\nexport const getDefaultOptions = (type: string): string[] => {\n  switch (type) {\n    case 'true_false':\n      return ['Yes', 'No'];\n    case 'rating':\n      return ['1', '2', '3', '4', '5'];\n    case 'multiple_choice':\n      return ['Option A', 'Option B', 'Option C', 'Option D'];\n    default:\n      return [];\n  }\n};\n\n/**\n * Generate option labels (A, B, C, D...)\n */\nexport function generateOptionLabel(index: number): string {\n  return String.fromCharCode(65 + index); // 65 is 'A' in ASCII\n}\n\nexport const OPTION_COLORS = [\n  '#3b82f6', // blue-500\n  '#10b981', // emerald-500\n  '#f59e0b', // amber-500\n  '#ef4444', // red-500\n  '#8b5cf6', // violet-500\n  '#ec4899', // pink-500\n  '#06b6d4', // cyan-500\n  '#84cc16', // lime-500\n];\n\nexport const getOptionColor = (index: number): string => {\n  return OPTION_COLORS[index % OPTION_COLORS.length];\n};\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;AAIM,MAAM,iBAAiC;IAC5C;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,aAAa;QACb,iBAAiB;QACjB,MAAM;QACN,SAAS;YAAC;YAAqB;SAA2B;IAC5D;IACA;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,aAAa;QACb,iBAAiB;QACjB,MAAM;QACN,SAAS;YAAC;YAAqB;YAAK;YAAK;YAAK;SAAqB;IACrE;IACA;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,aAAa;QACb,iBAAiB;QACjB,MAAM;QACN,SAAS;YAAC;YAAW;YAAW;YAAW;SAAU;IACvD;IACA;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,aAAa;QACb,iBAAiB;QACjB,MAAM;QACN,SAAS;YAAC;YAAwB;SAAuB;IAC3D;IACA;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,aAAa;QACb,iBAAiB;QACjB,MAAM;QACN,SAAS;YAAC;YAAY;YAAY;YAAY;SAAW;IAC3D;IACA;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,aAAa;QACb,iBAAiB;QACjB,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,aAAa;QACb,iBAAiB;QACjB,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,aAAa;QACb,iBAAiB;QACjB,MAAM;QACN,SAAS;YAAC;YAAY;YAAc;YAAY;SAAe;IACjE;CACD;AAEM,MAAM,kBAAkB,CAAC;IAC9B,OAAO,eAAe,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;AAC3C;AAEO,MAAM,oBAAoB,CAAC;IAChC,OAAQ;QACN,KAAK;YACH,OAAO;gBAAC;gBAAO;aAAK;QACtB,KAAK;YACH,OAAO;gBAAC;gBAAK;gBAAK;gBAAK;gBAAK;aAAI;QAClC,KAAK;YACH,OAAO;gBAAC;gBAAY;gBAAY;gBAAY;aAAW;QACzD;YACE,OAAO,EAAE;IACb;AACF;AAKO,SAAS,oBAAoB,KAAa;IAC/C,OAAO,OAAO,YAAY,CAAC,KAAK,QAAQ,qBAAqB;AAC/D;AAEO,MAAM,gBAAgB;IAC3B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,iBAAiB,CAAC;IAC7B,OAAO,aAAa,CAAC,QAAQ,cAAc,MAAM,CAAC;AACpD"}},
    {"offset": {"line": 179, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/PollCreator.tsx"],"sourcesContent":["/**\n * PollCreator\n * Component for creating new polls with templates and custom options\n */\n\n'use client';\n\nimport React, { useState, useCallback } from 'react';\nimport { cn } from '@/lib/utils';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { \n  HelpCircle, \n  Gauge, \n  List, \n  Play, \n  Brain, \n  Cloud, \n  MessageSquare, \n  Clock,\n  Plus,\n  Trash2,\n  ArrowLeft\n} from 'lucide-react';\nimport { PollType, CreatePollInput } from './types';\nimport { POLL_TEMPLATES, getOptionColor, generateOptionLabel } from './utils/pollTemplates';\n\ninterface PollCreatorProps {\n  onSubmit: (input: CreatePollInput) => void;\n  onCancel: () => void;\n}\n\nconst ICON_MAP: Record<string, React.ComponentType<{ className?: string }>> = {\n  HelpCircle,\n  Gauge,\n  List,\n  Play,\n  Brain,\n  Cloud,\n  MessageSquare,\n  Clock\n};\n\nexport function PollCreator({ onSubmit, onCancel }: PollCreatorProps) {\n  const [step, setStep] = useState<'template' | 'customize'>('template');\n  const [selectedTemplate, setSelectedTemplate] = useState<string | null>(null);\n  \n  // Poll form state\n  const [question, setQuestion] = useState('');\n  const [pollType, setPollType] = useState<PollType>('multiple_choice');\n  const [options, setOptions] = useState<{ label: string; text: string }[]>([\n    { label: 'A', text: '' },\n    { label: 'B', text: '' }\n  ]);\n  const [isAnonymous, setIsAnonymous] = useState(true);\n  const [allowMultiple, setAllowMultiple] = useState(false);\n  const [showResults, setShowResults] = useState(true);\n  const [timeLimit, setTimeLimit] = useState<number | undefined>(undefined);\n\n  const handleSelectTemplate = useCallback((templateId: string) => {\n    const template = POLL_TEMPLATES.find(t => t.id === templateId);\n    if (!template) return;\n\n    setSelectedTemplate(templateId);\n    setQuestion(template.defaultQuestion);\n    setPollType(template.type);\n    \n    if (template.options) {\n      setOptions(template.options.map((text, i) => ({\n        label: generateOptionLabel(i),\n        text\n      })));\n    } else {\n      setOptions([\n        { label: 'A', text: '' },\n        { label: 'B', text: '' }\n      ]);\n    }\n    \n    setStep('customize');\n  }, []);\n\n  const handleAddOption = useCallback(() => {\n    if (options.length >= 6) return;\n    setOptions(prev => [...prev, { \n      label: generateOptionLabel(prev.length),\n      text: '' \n    }]);\n  }, [options.length]);\n\n  const handleRemoveOption = useCallback((index: number) => {\n    if (options.length <= 2) return;\n    setOptions(prev => {\n      const newOptions = prev.filter((_, i) => i !== index);\n      // Re-label options\n      return newOptions.map((opt, i) => ({\n        ...opt,\n        label: generateOptionLabel(i)\n      }));\n    });\n  }, [options.length]);\n\n  const handleOptionChange = useCallback((index: number, text: string) => {\n    setOptions(prev => prev.map((opt, i) => \n      i === index ? { ...opt, text } : opt\n    ));\n  }, []);\n\n  const handleSubmit = useCallback(() => {\n    if (!question.trim()) return;\n    if (pollType === 'multiple_choice' || pollType === 'true_false') {\n      if (options.some(o => !o.text.trim())) return;\n    }\n\n    onSubmit({\n      question: question.trim(),\n      type: pollType,\n      options,\n      isAnonymous,\n      allowMultiple,\n      showResults,\n      timeLimit\n    });\n  }, [question, pollType, options, isAnonymous, allowMultiple, showResults, timeLimit, onSubmit]);\n\n  if (step === 'template') {\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center gap-2 mb-4\">\n          <Button variant=\"ghost\" size=\"icon\" onClick={onCancel}>\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n          <h4 className=\"font-medium\">Choose a Template</h4>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-3\">\n          {POLL_TEMPLATES.map(template => {\n            const Icon = ICON_MAP[template.icon] || HelpCircle;\n            return (\n              <button\n                key={template.id}\n                onClick={() => handleSelectTemplate(template.id)}\n                className={cn(\n                  \"p-4 border rounded-lg text-left transition-all hover:border-blue-500 hover:bg-blue-50\",\n                  selectedTemplate === template.id && \"border-blue-500 bg-blue-50\"\n                )}\n              >\n                <Icon className=\"h-5 w-5 text-blue-600 mb-2\" />\n                <h5 className=\"font-medium text-sm\">{template.name}</h5>\n                <p className=\"text-xs text-gray-500 mt-1\">{template.description}</p>\n              </button>\n            );\n          })}\n        </div>\n\n        <Button \n          variant=\"outline\" \n          className=\"w-full\"\n          onClick={() => {\n            setSelectedTemplate(null);\n            setStep('customize');\n          }}\n        >\n          Start from Scratch\n        </Button>\n      </div>\n    );\n  }\n\n  const canSubmit = question.trim() && \n    (pollType === 'short_answer' || pollType === 'word_cloud' || \n     options.every(o => o.text.trim()));\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <Button variant=\"ghost\" size=\"icon\" onClick={() => setStep('template')}>\n          <ArrowLeft className=\"h-4 w-4\" />\n        </Button>\n        <h4 className=\"font-medium\">Customize Poll</h4>\n      </div>\n\n      {/* Question */}\n      <div className=\"space-y-2\">\n        <Label>Question</Label>\n        <Textarea\n          value={question}\n          onChange={(e) => setQuestion(e.target.value)}\n          placeholder=\"Enter your question...\"\n          className=\"min-h-[80px]\"\n        />\n      </div>\n\n      {/* Poll Type */}\n      <div className=\"space-y-2\">\n        <Label>Poll Type</Label>\n        <RadioGroup \n          value={pollType} \n          onValueChange={(v) => setPollType(v as PollType)}\n          className=\"grid grid-cols-2 gap-2\"\n        >\n          {[\n            { value: 'multiple_choice', label: 'Multiple Choice' },\n            { value: 'true_false', label: 'Yes / No' },\n            { value: 'rating', label: 'Rating (1-5)' },\n            { value: 'short_answer', label: 'Short Answer' },\n            { value: 'word_cloud', label: 'Word Cloud' }\n          ].map(type => (\n            <div key={type.value} className=\"flex items-center space-x-2\">\n              <RadioGroupItem value={type.value} id={type.value} />\n              <Label htmlFor={type.value} className=\"text-sm cursor-pointer\">\n                {type.label}\n              </Label>\n            </div>\n          ))}\n        </RadioGroup>\n      </div>\n\n      {/* Options (for multiple choice types) */}\n      {(pollType === 'multiple_choice' || pollType === 'true_false') && (\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between\">\n            <Label>Options</Label>\n            {options.length < 6 && (\n              <Button type=\"button\" variant=\"ghost\" size=\"sm\" onClick={handleAddOption}>\n                <Plus className=\"h-4 w-4 mr-1\" />\n                Add Option\n              </Button>\n            )}\n          </div>\n          <div className=\"space-y-2\">\n            {options.map((option, index) => (\n              <div key={index} className=\"flex items-center gap-2\">\n                <span \n                  className=\"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium text-white shrink-0\"\n                  style={{ backgroundColor: getOptionColor(index) }}\n                >\n                  {option.label}\n                </span>\n                <Input\n                  value={option.text}\n                  onChange={(e) => handleOptionChange(index, e.target.value)}\n                  placeholder={`Option ${option.label}`}\n                  className=\"flex-1\"\n                />\n                {options.length > 2 && (\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => handleRemoveOption(index)}\n                    className=\"text-red-500 hover:text-red-600 shrink-0\"\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Settings */}\n      <div className=\"space-y-3 pt-2 border-t\">\n        <h5 className=\"font-medium text-sm\">Settings</h5>\n        \n        <div className=\"flex items-center justify-between\">\n          <div className=\"space-y-0.5\">\n            <Label className=\"text-sm\">Anonymous Voting</Label>\n            <p className=\"text-xs text-gray-500\">Hide voter identities</p>\n          </div>\n          <Switch checked={isAnonymous} onCheckedChange={setIsAnonymous} />\n        </div>\n\n        {(pollType === 'multiple_choice' || pollType === 'true_false') && (\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label className=\"text-sm\">Allow Multiple Selections</Label>\n              <p className=\"text-xs text-gray-500\">Voters can choose multiple options</p>\n            </div>\n            <Switch checked={allowMultiple} onCheckedChange={setAllowMultiple} />\n          </div>\n        )}\n\n        <div className=\"flex items-center justify-between\">\n          <div className=\"space-y-0.5\">\n            <Label className=\"text-sm\">Show Results to Students</Label>\n            <p className=\"text-xs text-gray-500\">Display live results to participants</p>\n          </div>\n          <Switch checked={showResults} onCheckedChange={setShowResults} />\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label className=\"text-sm\">Time Limit (optional)</Label>\n          <div className=\"flex gap-2\">\n            {[30, 60, 120, 300].map(seconds => (\n              <Button\n                key={seconds}\n                type=\"button\"\n                variant={timeLimit === seconds ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setTimeLimit(timeLimit === seconds ? undefined : seconds)}\n              >\n                {seconds < 60 ? `${seconds}s` : `${Math.floor(seconds / 60)}m`}\n              </Button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Actions */}\n      <div className=\"flex gap-2 pt-4\">\n        <Button variant=\"outline\" onClick={onCancel} className=\"flex-1\">\n          Cancel\n        </Button>\n        <Button \n          onClick={handleSubmit} \n          disabled={!canSubmit}\n          className=\"flex-1\"\n        >\n          Create Poll\n        </Button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 887, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/utils/pollCalculations.ts"],"sourcesContent":["/**\n * Poll Calculations\n * Utility functions for computing poll statistics\n */\n\nimport { Poll, PollOption, PollStatistics } from '../types';\n\n/**\n * Calculate statistics for a poll\n */\nexport function calculatePollStatistics(\n  poll: Poll,\n  totalStudents: number\n): PollStatistics {\n  const totalVotes = poll.responses?.length || 0;\n  const participationRate = totalStudents > 0 \n    ? Math.round((totalVotes / totalStudents) * 100) \n    : 0;\n\n  const optionStats = poll.options.map(option => {\n    let count = 0;\n    \n    if (poll.type === 'rating') {\n      // For rating type, count responses with matching rating value\n      const ratingValue = parseInt(option.label);\n      count = poll.responses?.filter(r => r.rating === ratingValue).length || 0;\n    } else if (poll.type === 'word_cloud' || poll.type === 'short_answer') {\n      // For text responses, count non-empty text answers\n      count = poll.responses?.filter(r => r.textAnswer && r.textAnswer.trim()).length || 0;\n    } else {\n      // For multiple choice, count responses containing this option\n      count = poll.responses?.filter(r => \n        r.optionIds?.includes(option.id)\n      ).length || 0;\n    }\n\n    const percentage = totalVotes > 0 \n      ? Math.round((count / totalVotes) * 100) \n      : 0;\n\n    return {\n      optionId: option.id,\n      count,\n      percentage\n    };\n  });\n\n  return {\n    totalVotes,\n    participationRate,\n    optionStats\n  };\n}\n\n/**\n * Update poll options with calculated statistics\n */\nexport function updatePollWithStatistics(\n  poll: Poll,\n  totalStudents: number\n): Poll {\n  const stats = calculatePollStatistics(poll, totalStudents);\n  \n  const updatedOptions = poll.options.map((option, index) => {\n    const stat = stats.optionStats.find(s => s.optionId === option.id);\n    return {\n      ...option,\n      responseCount: stat?.count || 0,\n      percentage: stat?.percentage || 0\n    };\n  });\n\n  return {\n    ...poll,\n    options: updatedOptions,\n    totalResponses: stats.totalVotes\n  };\n}\n\n/**\n * Generate option labels (A, B, C, D...)\n */\nexport function generateOptionLabel(index: number): string {\n  return String.fromCharCode(65 + index); // 65 is 'A' in ASCII\n}\n\n/**\n * Get remaining time for an active poll\n */\nexport function getRemainingTime(poll: Poll): number | null {\n  if (!poll.startedAt || !poll.timeLimit) return null;\n  \n  const startTime = new Date(poll.startedAt).getTime();\n  const elapsed = Date.now() - startTime;\n  const remaining = (poll.timeLimit * 1000) - elapsed;\n  \n  return Math.max(0, Math.floor(remaining / 1000));\n}\n\n/**\n * Format remaining time as MM:SS\n */\nexport function formatRemainingTime(seconds: number): string {\n  const mins = Math.floor(seconds / 60);\n  const secs = seconds % 60;\n  return `${mins}:${secs.toString().padStart(2, '0')}`;\n}\n\n/**\n * Check if a poll has expired\n */\nexport function isPollExpired(poll: Poll): boolean {\n  const remaining = getRemainingTime(poll);\n  return remaining !== null && remaining <= 0;\n}\n\n/**\n * Get word cloud data (frequency count of words)\n */\nexport function getWordCloudData(poll: Poll): { word: string; count: number }[] {\n  if (poll.type !== 'word_cloud' && poll.type !== 'short_answer') {\n    return [];\n  }\n\n  const wordCounts: Record<string, number> = {};\n  \n  poll.responses?.forEach(response => {\n    if (response.textAnswer) {\n      const words = response.textAnswer\n        .toLowerCase()\n        .split(/\\s+/)\n        .map(w => w.replace(/[^\\w\\u4e00-\\u9fff]/g, '')) // Keep English and Chinese characters\n        .filter(w => w.length > 0);\n      \n      words.forEach(word => {\n        wordCounts[word] = (wordCounts[word] || 0) + 1;\n      });\n    }\n  });\n\n  return Object.entries(wordCounts)\n    .map(([word, count]) => ({ word, count }))\n    .sort((a, b) => b.count - a.count);\n}\n\n/**\n * Hash a string (for anonymous vote tracking)\n */\nexport async function hashString(input: string): Promise<string> {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(input);\n  const hashBuffer = await crypto.subtle.digest('SHA-256', data);\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1002, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/ActivePollView.tsx"],"sourcesContent":["/**\n * ActivePollView\n * Displays an active poll with live results\n */\n\n'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { cn } from '@/lib/utils';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Poll, PollType } from './types';\nimport { \n  calculatePollStatistics, \n  getRemainingTime, \n  formatRemainingTime,\n  isPollExpired,\n  getWordCloudData\n} from './utils/pollCalculations';\nimport { BarChart3, Clock, Users, Square, TrendingUp } from 'lucide-react';\n\ninterface ActivePollViewProps {\n  poll: Poll;\n  totalStudents: number;\n  onEnd: () => void;\n}\n\nexport function ActivePollView({ poll, totalStudents, onEnd }: ActivePollViewProps) {\n  const [currentTime, setCurrentTime] = useState(Date.now());\n  const stats = calculatePollStatistics(poll, totalStudents);\n  const remainingTime = getRemainingTime(poll);\n  const expired = isPollExpired(poll);\n\n  // Update timer every second\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentTime(Date.now());\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const renderPollResults = () => {\n    switch (poll.type) {\n      case 'word_cloud':\n        return <WordCloudResults poll={poll} />;\n      case 'short_answer':\n        return <ShortAnswerResults poll={poll} />;\n      case 'rating':\n        return <RatingResults poll={poll} stats={stats} />;\n      case 'multiple_choice':\n      case 'true_false':\n      default:\n        return <ChoiceResults poll={poll} stats={stats} />;\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header */}\n      <div className=\"flex items-start justify-between\">\n        <div>\n          <Badge className=\"bg-green-100 text-green-700 border-green-200 mb-2\">\n            ● Live\n          </Badge>\n          <h4 className=\"font-medium text-gray-900\">{poll.question}</h4>\n          <p className=\"text-sm text-gray-500 mt-1\">\n            {poll.type.replace('_', ' ')} • {poll.isAnonymous ? 'Anonymous' : 'Named'}\n          </p>\n        </div>\n        {remainingTime !== null && !expired && (\n          <div className=\"flex items-center gap-1 text-orange-600 bg-orange-50 px-2 py-1 rounded\">\n            <Clock className=\"h-4 w-4\" />\n            <span className=\"font-mono font-medium\">\n              {formatRemainingTime(remainingTime)}\n            </span>\n          </div>\n        )}\n      </div>\n\n      {/* Stats Summary */}\n      <div className=\"grid grid-cols-3 gap-2\">\n        <StatCard\n          icon={<Users className=\"h-4 w-4\" />}\n          value={stats.totalVotes}\n          label=\"Responses\"\n        />\n        <StatCard\n          icon={<TrendingUp className=\"h-4 w-4\" />}\n          value={`${stats.participationRate}%`}\n          label=\"Participation\"\n        />\n        <StatCard\n          icon={<BarChart3 className=\"h-4 w-4\" />}\n          value={totalStudents - stats.totalVotes}\n          label=\"Remaining\"\n        />\n      </div>\n\n      {/* Progress bar for participation */}\n      <div className=\"space-y-1\">\n        <div className=\"flex justify-between text-xs\">\n          <span className=\"text-gray-500\">Class Participation</span>\n          <span className=\"font-medium\">{stats.participationRate}%</span>\n        </div>\n        <Progress value={stats.participationRate} className=\"h-2\" />\n      </div>\n\n      {/* Results */}\n      <div className=\"border rounded-lg p-4 bg-gray-50\">\n        <h5 className=\"text-sm font-medium text-gray-700 mb-3\">Live Results</h5>\n        {renderPollResults()}\n      </div>\n\n      {/* Actions */}\n      <Button \n        onClick={onEnd} \n        variant=\"destructive\"\n        className=\"w-full\"\n      >\n        <Square className=\"h-4 w-4 mr-2\" />\n        End Poll\n      </Button>\n    </div>\n  );\n}\n\n// Choice Results (Multiple Choice / True-False)\nfunction ChoiceResults({ \n  poll, \n  stats \n}: { \n  poll: Poll; \n  stats: ReturnType<typeof calculatePollStatistics>;\n}) {\n  const maxCount = Math.max(...stats.optionStats.map(s => s.count), 1);\n\n  return (\n    <div className=\"space-y-3\">\n      {poll.options.map((option, index) => {\n        const stat = stats.optionStats.find(s => s.optionId === option.id);\n        const count = stat?.count || 0;\n        const percentage = stat?.percentage || 0;\n        const isLeader = count === maxCount && count > 0;\n\n        return (\n          <div key={option.id} className=\"space-y-1\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <div className=\"flex items-center gap-2\">\n                <span \n                  className=\"w-5 h-5 rounded-full flex items-center justify-center text-xs font-medium text-white\"\n                  style={{ backgroundColor: getOptionColor(index) }}\n                >\n                  {option.label}\n                </span>\n                <span className=\"font-medium\">{option.text}</span>\n                {isLeader && count > 0 && (\n                  <Badge variant=\"secondary\" className=\"text-xs\">Leading</Badge>\n                )}\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-gray-500\">{count} votes</span>\n                <span className=\"font-medium w-10 text-right\">{percentage}%</span>\n              </div>\n            </div>\n            <div className=\"h-2 bg-gray-200 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full transition-all duration-500 ease-out rounded-full\"\n                style={{ \n                  width: `${percentage}%`,\n                  backgroundColor: getOptionColor(index)\n                }}\n              />\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n// Rating Results\nfunction RatingResults({ \n  poll, \n  stats \n}: { \n  poll: Poll; \n  stats: ReturnType<typeof calculatePollStatistics>;\n}) {\n  const maxCount = Math.max(...stats.optionStats.map(s => s.count), 1);\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"flex items-center justify-center gap-1 mb-4\">\n        {[1, 2, 3, 4, 5].map(rating => {\n          const stat = stats.optionStats.find(s => {\n            const option = poll.options.find(o => o.id === s.optionId);\n            return option && parseInt(option.label) === rating;\n          });\n          const count = stat?.count || 0;\n          const hasVotes = count > 0;\n\n          return (\n            <div \n              key={rating}\n              className={cn(\n                \"w-10 h-10 rounded-lg flex items-center justify-center font-medium transition-colors\",\n                hasVotes \n                  ? \"bg-blue-500 text-white\" \n                  : \"bg-gray-200 text-gray-400\"\n              )}\n            >\n              {rating}\n            </div>\n          );\n        })}\n      </div>\n\n      {poll.options.map((option, index) => {\n        const stat = stats.optionStats.find(s => s.optionId === option.id);\n        const count = stat?.count || 0;\n        const percentage = stat?.percentage || 0;\n\n        return (\n          <div key={option.id} className=\"flex items-center gap-3\">\n            <span className=\"w-8 font-medium text-gray-700\">{option.label}</span>\n            <div className=\"flex-1 h-6 bg-gray-200 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-blue-500 transition-all duration-500 ease-out rounded-full flex items-center justify-end pr-2\"\n                style={{ width: `${percentage}%` }}\n              >\n                {percentage > 15 && (\n                  <span className=\"text-xs text-white font-medium\">{count}</span>\n                )}\n              </div>\n            </div>\n            <span className=\"w-10 text-right text-sm text-gray-500\">{percentage}%</span>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n// Word Cloud Results\nfunction WordCloudResults({ poll }: { poll: Poll }) {\n  const wordData = getWordCloudData(poll);\n  const maxCount = Math.max(...wordData.map(w => w.count), 1);\n\n  if (wordData.length === 0) {\n    return (\n      <div className=\"text-center py-8 text-gray-400\">\n        Waiting for responses...\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-wrap gap-2 justify-center p-4\">\n      {wordData.slice(0, 30).map(({ word, count }) => {\n        const size = Math.max(0.75, (count / maxCount) * 2);\n        const opacity = Math.max(0.5, count / maxCount);\n\n        return (\n          <span\n            key={word}\n            className=\"inline-block px-2 py-1 rounded-full bg-blue-100 text-blue-800 transition-all\"\n            style={{\n              fontSize: `${size}rem`,\n              opacity\n            }}\n          >\n            {word}\n            <span className=\"text-xs ml-1 opacity-60\">({count})</span>\n          </span>\n        );\n      })}\n    </div>\n  );\n}\n\n// Short Answer Results\nfunction ShortAnswerResults({ poll }: { poll: Poll }) {\n  const responses = poll.responses?.filter(r => r.textAnswer?.trim()) || [];\n\n  if (responses.length === 0) {\n    return (\n      <div className=\"text-center py-8 text-gray-400\">\n        Waiting for responses...\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n      {responses.map((response, index) => (\n        <div \n          key={response.id || index}\n          className=\"p-3 bg-white rounded-lg border text-sm\"\n        >\n          {response.textAnswer}\n        </div>\n      ))}\n    </div>\n  );\n}\n\n// Stat Card Component\nfunction StatCard({ \n  icon, \n  value, \n  label \n}: { \n  icon: React.ReactNode; \n  value: React.ReactNode; \n  label: string;\n}) {\n  return (\n    <div className=\"bg-white border rounded-lg p-3 text-center\">\n      <div className=\"flex justify-center text-gray-400 mb-1\">\n        {icon}\n      </div>\n      <div className=\"text-xl font-bold text-gray-900\">{value}</div>\n      <div className=\"text-xs text-gray-500\">{label}</div>\n    </div>\n  );\n}\n\n// Helper function for option colors\nfunction getOptionColor(index: number): string {\n  const colors = [\n    '#3b82f6', // blue-500\n    '#10b981', // emerald-500\n    '#f59e0b', // amber-500\n    '#ef4444', // red-500\n    '#8b5cf6', // violet-500\n    '#ec4899', // pink-500\n  ];\n  return colors[index % colors.length];\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1651, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/PollHistory.tsx"],"sourcesContent":["/**\n * PollHistory\n * Displays completed polls with results\n */\n\n'use client';\n\nimport React, { useState } from 'react';\nimport { cn } from '@/lib/utils';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\n\nimport { Poll } from './types';\nimport { calculatePollStatistics, getWordCloudData } from './utils/pollCalculations';\nimport { ChevronDown, ChevronUp, RotateCcw, Trash2, BarChart3, Clock, Users } from 'lucide-react';\n\ninterface PollHistoryProps {\n  polls: Poll[];\n  onReuse: (poll: Poll) => void;\n  onDelete: (pollId: string) => void;\n}\n\nexport function PollHistory({ polls, onReuse, onDelete }: PollHistoryProps) {\n  const [expandedPolls, setExpandedPolls] = useState<Set<string>>(new Set());\n\n  if (polls.length === 0) {\n    return (\n      <div className=\"text-center py-8 text-gray-400\">\n        <BarChart3 className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n        <p>No completed polls yet</p>\n        <p className=\"text-sm mt-1\">Ended polls will appear here</p>\n      </div>\n    );\n  }\n\n  const toggleExpand = (pollId: string) => {\n    setExpandedPolls(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(pollId)) {\n        newSet.delete(pollId);\n      } else {\n        newSet.add(pollId);\n      }\n      return newSet;\n    });\n  };\n\n  return (\n    <div className=\"space-y-3\">\n      {polls.map(poll => {\n        const isExpanded = expandedPolls.has(poll.id);\n        return (\n          <div key={poll.id} className=\"border rounded-lg bg-white overflow-hidden\">\n            <button \n              className=\"w-full p-3 text-left hover:bg-gray-50 transition-colors\"\n              onClick={() => toggleExpand(poll.id)}\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"font-medium text-gray-900 line-clamp-2\">{poll.question}</p>\n                  <div className=\"flex items-center gap-2 mt-1 flex-wrap\">\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      {poll.type.replace('_', ' ')}\n                    </Badge>\n                    <span className=\"text-xs text-gray-500\">\n                      {poll.totalResponses || 0} responses\n                    </span>\n                    <span className=\"text-xs text-gray-400\">\n                      {formatDate(poll.endedAt || poll.createdAt)}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"ml-2\">\n                  {isExpanded ? (\n                    <ChevronUp className=\"h-4 w-4 text-gray-400\" />\n                  ) : (\n                    <ChevronDown className=\"h-4 w-4 text-gray-400\" />\n                  )}\n                </div>\n              </div>\n            </button>\n\n            {isExpanded && (\n              <div className=\"px-3 pb-3 border-t bg-gray-50\">\n                <PollResultsView poll={poll} />\n                \n                {/* Actions */}\n                <div className=\"flex gap-2 mt-3\">\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => onReuse(poll)}\n                    className=\"flex-1\"\n                  >\n                    <RotateCcw className=\"h-4 w-4 mr-1\" />\n                    Reuse\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={() => onDelete(poll.id)}\n                    className=\"text-red-500 hover:text-red-600\"\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n// Poll Results View\nfunction PollResultsView({ poll }: { poll: Poll }) {\n  const stats = calculatePollStatistics(poll, poll.totalResponses || 0);\n\n  const renderResults = () => {\n    switch (poll.type) {\n      case 'word_cloud':\n        return <WordCloudResults poll={poll} />;\n      case 'short_answer':\n        return <ShortAnswerResults poll={poll} />;\n      case 'rating':\n        return <RatingResults poll={poll} stats={stats} />;\n      case 'multiple_choice':\n      case 'true_false':\n      default:\n        return <ChoiceResults poll={poll} stats={stats} />;\n    }\n  };\n\n  return (\n    <div className=\"mt-3 space-y-3\">\n      {/* Summary Stats */}\n      <div className=\"flex gap-4 text-sm\">\n        <div className=\"flex items-center gap-1 text-gray-600\">\n          <Users className=\"h-4 w-4\" />\n          <span>{stats.totalVotes} responses</span>\n        </div>\n        <div className=\"flex items-center gap-1 text-gray-600\">\n          <Clock className=\"h-4 w-4\" />\n          <span>\n            {poll.startedAt && poll.endedAt \n              ? `${Math.round((new Date(poll.endedAt).getTime() - new Date(poll.startedAt).getTime()) / 1000)}s`\n              : 'N/A'\n            }\n          </span>\n        </div>\n      </div>\n\n      {/* Results */}\n      {renderResults()}\n    </div>\n  );\n}\n\n// Choice Results\nfunction ChoiceResults({ \n  poll, \n  stats \n}: { \n  poll: Poll; \n  stats: ReturnType<typeof calculatePollStatistics>;\n}) {\n  return (\n    <div className=\"space-y-2\">\n      {poll.options.map((option, index) => {\n        const stat = stats.optionStats.find(s => s.optionId === option.id);\n        const count = stat?.count || 0;\n        const percentage = stat?.percentage || 0;\n\n        return (\n          <div key={option.id} className=\"flex items-center gap-2\">\n            <span \n              className=\"w-5 h-5 rounded-full flex items-center justify-center text-xs font-medium text-white shrink-0\"\n              style={{ backgroundColor: getOptionColor(index) }}\n            >\n              {option.label}\n            </span>\n            <span className=\"text-sm flex-1 truncate\">{option.text}</span>\n            <div className=\"flex items-center gap-2 w-24\">\n              <div className=\"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden\">\n                <div\n                  className=\"h-full rounded-full transition-all\"\n                  style={{ \n                    width: `${percentage}%`,\n                    backgroundColor: getOptionColor(index)\n                  }}\n                />\n              </div>\n              <span className=\"text-xs text-gray-500 w-8 text-right\">{percentage}%</span>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n// Rating Results\nfunction RatingResults({ \n  poll, \n  stats \n}: { \n  poll: Poll; \n  stats: ReturnType<typeof calculatePollStatistics>;\n}) {\n  return (\n    <div className=\"flex items-center justify-center gap-2\">\n      {[1, 2, 3, 4, 5].map(rating => {\n        const stat = stats.optionStats.find(s => {\n          const option = poll.options.find(o => o.id === s.optionId);\n          return option && parseInt(option.label) === rating;\n        });\n        const count = stat?.count || 0;\n        const total = stats.totalVotes || 1;\n        const percentage = Math.round((count / total) * 100);\n\n        return (\n          <div key={rating} className=\"text-center\">\n            <div \n              className={cn(\n                \"w-10 h-10 rounded-lg flex items-center justify-center font-medium mb-1\",\n                count > 0 ? \"bg-blue-500 text-white\" : \"bg-gray-200 text-gray-400\"\n              )}\n            >\n              {rating}\n            </div>\n            <div className=\"text-xs text-gray-500\">{percentage}%</div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n// Word Cloud Results\nfunction WordCloudResults({ poll }: { poll: Poll }) {\n  const wordData = getWordCloudData(poll);\n\n  if (wordData.length === 0) {\n    return <p className=\"text-sm text-gray-400 text-center py-4\">No responses</p>;\n  }\n\n  const maxCount = Math.max(...wordData.map(w => w.count), 1);\n\n  return (\n    <div className=\"flex flex-wrap gap-2 justify-center\">\n      {wordData.slice(0, 20).map(({ word, count }) => {\n        const size = Math.max(0.75, (count / maxCount) * 1.5);\n        return (\n          <span\n            key={word}\n            className=\"inline-block px-2 py-1 rounded-full bg-blue-100 text-blue-800\"\n            style={{ fontSize: `${size}rem` }}\n          >\n            {word}\n          </span>\n        );\n      })}\n    </div>\n  );\n}\n\n// Short Answer Results\nfunction ShortAnswerResults({ poll }: { poll: Poll }) {\n  const responses = poll.responses?.filter(r => r.textAnswer?.trim()) || [];\n\n  if (responses.length === 0) {\n    return <p className=\"text-sm text-gray-400 text-center py-4\">No responses</p>;\n  }\n\n  return (\n    <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n      {responses.slice(0, 10).map((response, index) => (\n        <div \n          key={response.id || index}\n          className=\"p-2 bg-white rounded border text-sm\"\n        >\n          {response.textAnswer}\n        </div>\n      ))}\n      {responses.length > 10 && (\n        <p className=\"text-xs text-gray-400 text-center\">\n          +{responses.length - 10} more responses\n        </p>\n      )}\n    </div>\n  );\n}\n\n// Helper Functions\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMs / 3600000);\n  const diffDays = Math.floor(diffMs / 86400000);\n\n  if (diffMins < 1) return 'Just now';\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n  \n  return date.toLocaleDateString('en-US', { \n    month: 'short', \n    day: 'numeric' \n  });\n}\n\nfunction getOptionColor(index: number): string {\n  const colors = [\n    '#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'\n  ];\n  return colors[index % colors.length];\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2255, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/hooks/usePollSocket.ts"],"sourcesContent":["/**\n * usePollSocket Hook\n * Real-time poll management using Socket.io\n */\n\n'use client';\n\nimport { useCallback, useEffect, useState, useRef } from 'react';\nimport { io, Socket } from 'socket.io-client';\nimport { Poll, CreatePollInput, SubmitVoteInput } from '../types';\n\ninterface UsePollSocketReturn {\n  polls: Poll[];\n  activePolls: Poll[];\n  draftPolls: Poll[];\n  closedPolls: Poll[];\n  isLoading: boolean;\n  error: string | null;\n  isConnected: boolean;\n  \n  // Actions\n  createPoll: (input: CreatePollInput) => void;\n  startPoll: (pollId: string) => void;\n  endPoll: (pollId: string) => void;\n  deletePoll: (pollId: string) => void;\n  submitVote: (pollId: string, input: SubmitVoteInput) => void;\n  \n  // Refresh\n  refreshPolls: () => void;\n}\n\ninterface PollSocketParticipant {\n  userId: string\n  name?: string\n  role: 'student' | 'tutor'\n}\n\nexport function usePollSocket(sessionId: string, participant?: PollSocketParticipant): UsePollSocketReturn {\n  const socketRef = useRef<Socket | null>(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [polls, setPolls] = useState<Poll[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Initialize socket connection\n  useEffect(() => {\n    if (!sessionId) return;\n\n    const connect = async () => {\n      const token = await import('@/lib/socket-auth').then((m) => m.getSocketToken());\n      if (!token) return;\n      const socket = io('/api/socket', {\n        path: '/api/socket',\n        transports: ['websocket', 'polling'],\n        auth: { token },\n      });\n      socketRef.current = socket;\n\n    socket.on('connect', () => {\n      setIsConnected(true);\n      if (participant?.userId) {\n        socket.emit('join_class', {\n          roomId: sessionId,\n          userId: participant.userId,\n          name: participant.name || participant.role,\n          role: participant.role,\n        })\n      }\n      // Join poll room\n      socket.emit('poll:join', { sessionId });\n      // Fetch initial polls\n      socket.emit('poll:list', { sessionId }, (response: { success: boolean; polls?: Poll[]; error?: string }) => {\n        setIsLoading(false);\n        if (response.success && response.polls) {\n          setPolls(response.polls);\n        } else {\n          setError(response.error || 'Failed to load polls');\n        }\n      });\n    });\n\n    socket.on('disconnect', () => {\n      setIsConnected(false);\n    });\n\n    socket.on('connect_error', (err) => {\n      setError('Connection error: ' + err.message);\n      setIsLoading(false);\n    });\n    };\n    connect();\n    return () => {\n      socketRef.current?.emit('poll:leave', { sessionId });\n      socketRef.current?.disconnect();\n      socketRef.current = null;\n    };\n  }, [sessionId, participant?.name, participant?.role, participant?.userId]);\n\n  // Listen for poll events\n  useEffect(() => {\n    const socket = socketRef.current;\n    if (!socket) return;\n\n    const handlePollCreated = (poll: Poll) => {\n      setPolls(prev => [...prev, poll]);\n    };\n\n    const handlePollUpdated = (updatedPoll: Poll) => {\n      setPolls(prev => prev.map(p => \n        p.id === updatedPoll.id ? updatedPoll : p\n      ));\n    };\n\n    const handlePollStarted = (poll: Poll) => {\n      setPolls(prev => prev.map(p => \n        p.id === poll.id ? { ...p, status: 'active', startedAt: new Date().toISOString() } : p\n      ));\n    };\n\n    const handlePollEnded = (poll: Poll) => {\n      setPolls(prev => prev.map(p => \n        p.id === poll.id ? { ...p, status: 'closed', endedAt: new Date().toISOString() } : p\n      ));\n    };\n\n    const handlePollDeleted = (pollId: string) => {\n      setPolls(prev => prev.filter(p => p.id !== pollId));\n    };\n\n    socket.on('poll:created', handlePollCreated);\n    socket.on('poll:updated', handlePollUpdated);\n    socket.on('poll:started', handlePollStarted);\n    socket.on('poll:ended', handlePollEnded);\n    socket.on('poll:deleted', handlePollDeleted);\n\n    return () => {\n      socket.off('poll:created', handlePollCreated);\n      socket.off('poll:updated', handlePollUpdated);\n      socket.off('poll:started', handlePollStarted);\n      socket.off('poll:ended', handlePollEnded);\n      socket.off('poll:deleted', handlePollDeleted);\n    };\n  }, []);\n\n  const createPoll = useCallback((input: CreatePollInput) => {\n    socketRef.current?.emit('poll:create', { sessionId, ...input });\n  }, [sessionId]);\n\n  const startPoll = useCallback((pollId: string) => {\n    socketRef.current?.emit('poll:start', { pollId, sessionId });\n  }, [sessionId]);\n\n  const endPoll = useCallback((pollId: string) => {\n    socketRef.current?.emit('poll:end', { pollId, sessionId });\n  }, [sessionId]);\n\n  const deletePoll = useCallback((pollId: string) => {\n    socketRef.current?.emit('poll:delete', { pollId, sessionId });\n  }, [sessionId]);\n\n  const submitVote = useCallback((pollId: string, input: SubmitVoteInput) => {\n    socketRef.current?.emit('poll:vote', { pollId, sessionId, ...input });\n  }, [sessionId]);\n\n  const refreshPolls = useCallback(() => {\n    if (!socketRef.current) return;\n    setIsLoading(true);\n    socketRef.current.emit('poll:list', { sessionId }, (response: { success: boolean; polls?: Poll[]; error?: string }) => {\n      setIsLoading(false);\n      if (response.success && response.polls) {\n        setPolls(response.polls);\n      }\n    });\n  }, [sessionId]);\n\n  const activePolls = polls.filter(p => p.status === 'active');\n  const draftPolls = polls.filter(p => p.status === 'draft');\n  const closedPolls = polls.filter(p => p.status === 'closed');\n\n  return {\n    polls,\n    activePolls,\n    draftPolls,\n    closedPolls,\n    isLoading,\n    error,\n    isConnected,\n    createPoll,\n    startPoll,\n    endPoll,\n    deletePoll,\n    submitVote,\n    refreshPolls\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2459, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/QuickPollPanel.tsx"],"sourcesContent":["/**\n * QuickPollPanel\n * Main poll management panel for tutors\n * Supports creating, managing, and viewing polls\n */\n\n'use client';\n\nimport React, { useState, useCallback } from 'react';\nimport { cn } from '@/lib/utils';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Poll, CreatePollInput } from './types';\nimport { PollCreator } from './PollCreator';\nimport { ActivePollView } from './ActivePollView';\nimport { PollHistory } from './PollHistory';\nimport { usePollSocket } from './hooks/usePollSocket';\n\ninterface QuickPollPanelProps {\n  sessionId: string;\n  tutorId: string;\n  totalStudents: number;\n  className?: string;\n}\n\nexport function QuickPollPanel({\n  sessionId,\n  tutorId,\n  totalStudents,\n  className\n}: QuickPollPanelProps) {\n  const [activeTab, setActiveTab] = useState<'create' | 'active' | 'history'>('create');\n  const [showCreator, setShowCreator] = useState(false);\n  \n  const {\n    activePolls,\n    draftPolls,\n    closedPolls,\n    isLoading,\n    error,\n    isConnected,\n    createPoll,\n    startPoll,\n    endPoll,\n    deletePoll\n  } = usePollSocket(sessionId, {\n    userId: tutorId,\n    role: 'tutor',\n    name: 'Tutor',\n  });\n\n  const activePoll = activePolls[0]; // Only one active poll at a time\n\n  const handleCreatePoll = useCallback((input: CreatePollInput) => {\n    createPoll(input);\n    setShowCreator(false);\n    setActiveTab('active');\n  }, [createPoll]);\n\n  const handleStartPoll = useCallback((pollId: string) => {\n    startPoll(pollId);\n    setActiveTab('active');\n  }, [startPoll]);\n\n  const handleEndPoll = useCallback((pollId: string) => {\n    endPoll(pollId);\n    setActiveTab('history');\n  }, [endPoll]);\n\n  if (isLoading) {\n    return (\n      <div className={cn(\"flex items-center justify-center h-64\", className)}>\n        <div className=\"animate-spin h-8 w-8 border-2 border-blue-600 border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className={cn(\"flex items-center justify-center h-64 text-red-500\", className)}>\n        {error}\n      </div>\n    );\n  }\n\n  return (\n    <div className={cn(\"flex flex-col h-full bg-white rounded-lg border\", className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b\">\n        <h3 className=\"font-semibold text-gray-900\">Quick Polls</h3>\n        <div className=\"flex items-center gap-2\">\n          <Badge variant={isConnected ? 'default' : 'secondary'}>\n            {isConnected ? 'Connected' : 'Connecting...'}\n          </Badge>\n          {activePolls.length > 0 && (\n            <Badge className=\"bg-green-100 text-green-700 border-green-200\">\n              {activePolls.length} Active\n            </Badge>\n          )}\n          {draftPolls.length > 0 && (\n            <Badge variant=\"outline\" className=\"text-gray-600\">\n              {draftPolls.length} Draft\n            </Badge>\n          )}\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as typeof activeTab)} className=\"flex-1 flex flex-col\">\n        {!isConnected && (\n          <div className=\"px-4 pt-3 text-xs text-muted-foreground\">\n            Waiting for poll socket connection. Creating or starting polls is disabled until connected.\n          </div>\n        )}\n        <TabsList className=\"grid w-full grid-cols-3 rounded-none border-b bg-transparent p-0\">\n          <TabsTrigger \n            value=\"create\"\n            className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-blue-600 data-[state=active]:bg-transparent data-[state=active]:shadow-none py-3\"\n          >\n            Create\n          </TabsTrigger>\n          <TabsTrigger \n            value=\"active\"\n            className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-blue-600 data-[state=active]:bg-transparent data-[state=active]:shadow-none py-3\"\n          >\n            Active\n            {activePolls.length > 0 && (\n              <span className=\"ml-2 w-5 h-5 rounded-full bg-blue-600 text-white text-xs flex items-center justify-center\">\n                {activePolls.length}\n              </span>\n            )}\n          </TabsTrigger>\n          <TabsTrigger \n            value=\"history\"\n            className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-blue-600 data-[state=active]:bg-transparent data-[state=active]:shadow-none py-3\"\n          >\n            History\n            {closedPolls.length > 0 && (\n              <span className=\"ml-2 text-xs text-gray-500\">\n                ({closedPolls.length})\n              </span>\n            )}\n          </TabsTrigger>\n        </TabsList>\n\n        <div className=\"flex-1 overflow-y-auto p-4\">\n          <TabsContent value=\"create\" className=\"mt-0 h-full\">\n            {showCreator ? (\n              <PollCreator\n                onSubmit={handleCreatePoll}\n                onCancel={() => setShowCreator(false)}\n              />\n            ) : (\n              <div className=\"space-y-4\">\n                <Button \n                  onClick={() => setShowCreator(true)}\n                  disabled={!isConnected}\n                  className=\"w-full h-16 text-lg gap-2\"\n                >\n                  <span className=\"text-2xl\">+</span>\n                  Create New Poll\n                </Button>\n\n                {draftPolls.length > 0 && (\n                  <div className=\"space-y-2\">\n                    <h4 className=\"text-sm font-medium text-gray-700\">Draft Polls</h4>\n                    {draftPolls.map(poll => (\n                      <DraftPollCard \n                        key={poll.id} \n                        poll={poll} \n                        onStart={() => handleStartPoll(poll.id)}\n                        onDelete={() => deletePoll(poll.id)}\n                      />\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"active\" className=\"mt-0 h-full\">\n            {activePoll ? (\n              <ActivePollView\n                poll={activePoll}\n                totalStudents={totalStudents}\n                onEnd={() => handleEndPoll(activePoll.id)}\n              />\n            ) : (\n              <EmptyState\n                icon=\"📊\"\n                title=\"No Active Poll\"\n                description=\"Create a poll to start collecting responses from students\"\n                action={{\n                  label: \"Create Poll\",\n                  onClick: () => setActiveTab('create')\n                }}\n              />\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"history\" className=\"mt-0 h-full\">\n            <PollHistory\n              polls={closedPolls}\n              onReuse={(poll) => {\n                // Clone poll and create new draft\n                const { id, status, createdAt, startedAt, endedAt, responses, ...pollData } = poll;\n                createPoll({\n                  ...pollData,\n                  options: pollData.options.map(o => ({ label: o.label, text: o.text }))\n                });\n              }}\n              onDelete={deletePoll}\n            />\n          </TabsContent>\n        </div>\n      </Tabs>\n    </div>\n  );\n}\n\n// Draft Poll Card Component\ninterface DraftPollCardProps {\n  poll: Poll;\n  onStart: () => void;\n  onDelete: () => void;\n}\n\nfunction DraftPollCard({ poll, onStart, onDelete }: DraftPollCardProps) {\n  return (\n    <div className=\"p-3 border rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors\">\n      <p className=\"font-medium text-gray-900 line-clamp-2\">{poll.question}</p>\n      <p className=\"text-sm text-gray-500 mt-1\">\n        {poll.type.replace('_', ' ')} • {poll.options.length} options\n      </p>\n      <div className=\"flex gap-2 mt-2\">\n        <Button size=\"sm\" onClick={onStart} className=\"flex-1\">Start Poll</Button>\n        <Button size=\"sm\" variant=\"ghost\" onClick={onDelete} className=\"text-red-500 hover:text-red-600\">\n          Delete\n        </Button>\n      </div>\n    </div>\n  );\n}\n\n// Empty State Component\ninterface EmptyStateProps {\n  icon: string;\n  title: string;\n  description: string;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n}\n\nfunction EmptyState({ icon, title, description, action }: EmptyStateProps) {\n  return (\n    <div className=\"flex flex-col items-center justify-center h-full text-center p-4\">\n      <span className=\"text-4xl mb-3\">{icon}</span>\n      <h4 className=\"font-medium text-gray-900\">{title}</h4>\n      <p className=\"text-sm text-gray-500 mt-1 max-w-xs\">{description}</p>\n      {action && (\n        <Button onClick={action.onClick} className=\"mt-4\">\n          {action.label}\n        </Button>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2933, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/PollResults.tsx"],"sourcesContent":["/**\n * PollResults\n * Displays final poll results after poll has ended\n */\n\n'use client';\n\nimport React from 'react';\nimport { cn } from '@/lib/utils';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Poll } from './types';\nimport { calculatePollStatistics, getWordCloudData } from './utils/pollCalculations';\nimport { Users, Clock, BarChart3 } from 'lucide-react';\n\ninterface PollResultsProps {\n  poll: Poll;\n  totalStudents?: number;\n  className?: string;\n}\n\nexport function PollResults({ poll, totalStudents = 0, className }: PollResultsProps) {\n  const stats = calculatePollStatistics(poll, totalStudents || poll.totalResponses);\n\n  return (\n    <div className={cn(\"bg-white rounded-lg border p-4\", className)}>\n      {/* Header */}\n      <div className=\"mb-4\">\n        <Badge variant=\"secondary\" className=\"mb-2\">\n          {poll.type.replace('_', ' ')}\n        </Badge>\n        <h4 className=\"font-medium text-gray-900\">{poll.question}</h4>\n        <div className=\"flex items-center gap-4 mt-2 text-sm text-gray-500\">\n          <span className=\"flex items-center gap-1\">\n            <Users className=\"h-4 w-4\" />\n            {stats.totalVotes} responses\n          </span>\n          {totalStudents > 0 && (\n            <span className=\"flex items-center gap-1\">\n              <BarChart3 className=\"h-4 w-4\" />\n              {stats.participationRate}% participation\n            </span>\n          )}\n          {poll.startedAt && poll.endedAt && (\n            <span className=\"flex items-center gap-1\">\n              <Clock className=\"h-4 w-4\" />\n              {Math.round((new Date(poll.endedAt).getTime() - new Date(poll.startedAt).getTime()) / 1000)}s\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Results Content */}\n      <div className=\"mt-4\">\n        <PollResultsContent poll={poll} stats={stats} />\n      </div>\n    </div>\n  );\n}\n\n// Results content based on poll type\nfunction PollResultsContent({ \n  poll, \n  stats \n}: { \n  poll: Poll; \n  stats: ReturnType<typeof calculatePollStatistics>;\n}) {\n  switch (poll.type) {\n    case 'word_cloud':\n      return <WordCloudResults poll={poll} />;\n    case 'short_answer':\n      return <ShortAnswerResults poll={poll} />;\n    case 'rating':\n      return <RatingResults poll={poll} stats={stats} />;\n    case 'multiple_choice':\n    case 'true_false':\n    default:\n      return <ChoiceResults poll={poll} stats={stats} />;\n  }\n}\n\n// Choice Results (Multiple Choice / True-False)\nfunction ChoiceResults({ \n  poll, \n  stats \n}: { \n  poll: Poll; \n  stats: ReturnType<typeof calculatePollStatistics>;\n}) {\n  const maxCount = Math.max(...stats.optionStats.map(s => s.count), 1);\n\n  return (\n    <div className=\"space-y-3\">\n      {poll.options.map((option, index) => {\n        const stat = stats.optionStats.find(s => s.optionId === option.id);\n        const count = stat?.count || 0;\n        const percentage = stat?.percentage || 0;\n        const isLeader = count === maxCount && count > 0;\n        const isCorrect = poll.correctOptionId === option.id;\n\n        return (\n          <div key={option.id} className=\"space-y-1\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <span \n                  className={cn(\n                    \"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium text-white\",\n                    isCorrect && \"ring-2 ring-green-400 ring-offset-1\"\n                  )}\n                  style={{ backgroundColor: getOptionColor(index) }}\n                >\n                  {option.label}\n                </span>\n                <span className=\"font-medium text-gray-900\">{option.text}</span>\n                {isLeader && (\n                  <Badge variant=\"secondary\" className=\"text-xs\">Most Voted</Badge>\n                )}\n                {isCorrect && (\n                  <Badge className=\"bg-green-100 text-green-700 border-green-200 text-xs\">\n                    Correct\n                  </Badge>\n                )}\n              </div>\n              <div className=\"flex items-center gap-3\">\n                <span className=\"text-sm text-gray-500\">{count} votes</span>\n                <span className=\"font-medium w-10 text-right\">{percentage}%</span>\n              </div>\n            </div>\n            <Progress value={percentage} className=\"h-2\" />\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n// Rating Results\nfunction RatingResults({ \n  poll, \n  stats \n}: { \n  poll: Poll; \n  stats: ReturnType<typeof calculatePollStatistics>;\n}) {\n  const maxCount = Math.max(...stats.optionStats.map(s => s.count), 1);\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex justify-center gap-2\">\n        {[1, 2, 3, 4, 5].map(rating => {\n          const stat = stats.optionStats.find(s => {\n            const option = poll.options.find(o => o.id === s.optionId);\n            return option && parseInt(option.label) === rating;\n          });\n          const count = stat?.count || 0;\n          const hasVotes = count > 0;\n          const isMax = count === maxCount && count > 0;\n\n          return (\n            <div key={rating} className=\"text-center\">\n              <div \n                className={cn(\n                  \"w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg transition-all\",\n                  isMax \n                    ? \"bg-blue-500 text-white scale-110 shadow-lg\" \n                    : hasVotes \n                      ? \"bg-blue-100 text-blue-700\" \n                      : \"bg-gray-100 text-gray-400\"\n                )}\n              >\n                {rating}\n              </div>\n              <div className=\"text-xs text-gray-500 mt-1\">{count}</div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Rating distribution bars */}\n      <div className=\"space-y-2\">\n        {[1, 2, 3, 4, 5].map(rating => {\n          const stat = stats.optionStats.find(s => {\n            const option = poll.options.find(o => o.id === s.optionId);\n            return option && parseInt(option.label) === rating;\n          });\n          const count = stat?.count || 0;\n          const percentage = stat?.percentage || 0;\n\n          return (\n            <div key={rating} className=\"flex items-center gap-3\">\n              <span className=\"w-6 font-medium text-gray-700\">{rating}</span>\n              <div className=\"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden\">\n                <div\n                  className=\"h-full bg-blue-500 transition-all duration-500 rounded-full\"\n                  style={{ width: `${percentage}%` }}\n                />\n              </div>\n              <span className=\"w-10 text-right text-sm text-gray-500\">{percentage}%</span>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\n// Word Cloud Results\nfunction WordCloudResults({ poll }: { poll: Poll }) {\n  const wordData = getWordCloudData(poll);\n  const maxCount = Math.max(...wordData.map(w => w.count), 1);\n\n  if (wordData.length === 0) {\n    return (\n      <div className=\"text-center py-8 text-gray-400\">\n        <p>No responses collected</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-wrap gap-3 justify-center p-4 bg-gray-50 rounded-lg\">\n      {wordData.map(({ word, count }) => {\n        const size = 0.75 + (count / maxCount) * 1.5;\n        const opacity = 0.5 + (count / maxCount) * 0.5;\n\n        return (\n          <span\n            key={word}\n            className=\"inline-block px-3 py-1.5 rounded-full bg-blue-500 text-white font-medium transition-all hover:scale-105 cursor-default\"\n            style={{\n              fontSize: `${size}rem`,\n              opacity\n            }}\n            title={`${word}: ${count} occurrences`}\n          >\n            {word}\n            <span className=\"text-xs ml-1.5 opacity-75\">({count})</span>\n          </span>\n        );\n      })}\n    </div>\n  );\n}\n\n// Short Answer Results\nfunction ShortAnswerResults({ poll }: { poll: Poll }) {\n  const responses = poll.responses?.filter(r => r.textAnswer?.trim()) || [];\n\n  if (responses.length === 0) {\n    return (\n      <div className=\"text-center py-8 text-gray-400\">\n        <p>No responses collected</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-2 max-h-80 overflow-y-auto\">\n      {responses.map((response, index) => (\n        <div \n          key={response.id || index}\n          className=\"p-3 bg-gray-50 rounded-lg border text-sm hover:bg-gray-100 transition-colors\"\n        >\n          <p className=\"text-gray-900\">{response.textAnswer}</p>\n          {!poll.isAnonymous && response.studentId && (\n            <p className=\"text-xs text-gray-400 mt-1\">Student ID: {response.studentId}</p>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}\n\n// Helper function for option colors\nfunction getOptionColor(index: number): string {\n  const colors = [\n    '#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'\n  ];\n  return colors[index % colors.length];\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3488, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/PollTemplates.tsx"],"sourcesContent":["/**\n * PollTemplates\n * Component for selecting from pre-defined poll templates\n */\n\n'use client';\n\nimport React from 'react';\nimport { cn } from '@/lib/utils';\nimport { POLL_TEMPLATES, getTemplateById } from './utils/pollTemplates';\nimport { \n  HelpCircle, \n  Gauge, \n  List, \n  Play, \n  Brain, \n  Cloud, \n  MessageSquare, \n  Clock \n} from 'lucide-react';\n\ninterface PollTemplatesProps {\n  selectedId?: string;\n  onSelect: (templateId: string) => void;\n  className?: string;\n}\n\nconst ICON_MAP: Record<string, React.ComponentType<{ className?: string }>> = {\n  HelpCircle,\n  Gauge,\n  List,\n  Play,\n  Brain,\n  Cloud,\n  MessageSquare,\n  Clock\n};\n\nexport function PollTemplates({ selectedId, onSelect, className }: PollTemplatesProps) {\n  return (\n    <div className={cn(\"grid grid-cols-2 gap-3\", className)}>\n      {POLL_TEMPLATES.map(template => {\n        const Icon = ICON_MAP[template.icon] || HelpCircle;\n        const isSelected = selectedId === template.id;\n\n        return (\n          <button\n            key={template.id}\n            onClick={() => onSelect(template.id)}\n            className={cn(\n              \"p-4 border rounded-lg text-left transition-all hover:border-blue-500 hover:bg-blue-50\",\n              isSelected && \"border-blue-500 bg-blue-50 ring-2 ring-blue-200\"\n            )}\n          >\n            <div className=\"flex items-start gap-3\">\n              <div className={cn(\n                \"p-2 rounded-lg\",\n                isSelected ? \"bg-blue-500 text-white\" : \"bg-blue-100 text-blue-600\"\n              )}>\n                <Icon className=\"h-5 w-5\" />\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <h5 className=\"font-medium text-sm text-gray-900\">{template.name}</h5>\n                <p className=\"text-xs text-gray-500 mt-0.5 line-clamp-2\">\n                  {template.description}\n                </p>\n              </div>\n            </div>\n            <div className=\"mt-2 text-xs text-gray-400\">\n              {template.type.replace('_', ' ')}\n            </div>\n          </button>\n        );\n      })}\n    </div>\n  );\n}\n\nexport { getTemplateById, POLL_TEMPLATES };\n"],"names":[],"mappings":";;;;;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAVA;;;CAGC,GAED;;;;;AAsBA,MAAM,WAAwE;IAC5E,YAAA,8RAAU;IACV,OAAA,+PAAK;IACL,MAAA,4PAAI;IACJ,MAAA,4PAAI;IACJ,OAAA,+PAAK;IACL,OAAA,+PAAK;IACL,eAAA,2RAAa;IACb,OAAA,+PAAK;AACP;AAEO,SAAS,cAAc,EAAE,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAsB;IACnF,qBACE,gSAAC;QAAI,WAAW,IAAA,2KAAE,EAAC,0BAA0B;kBAC1C,wNAAc,CAAC,GAAG,CAAC,CAAA;YAClB,MAAM,OAAO,QAAQ,CAAC,SAAS,IAAI,CAAC,IAAI,8RAAU;YAClD,MAAM,aAAa,eAAe,SAAS,EAAE;YAE7C,qBACE,gSAAC;gBAEC,SAAS,IAAM,SAAS,SAAS,EAAE;gBACnC,WAAW,IAAA,2KAAE,EACX,yFACA,cAAc;;kCAGhB,gSAAC;wBAAI,WAAU;;0CACb,gSAAC;gCAAI,WAAW,IAAA,2KAAE,EAChB,kBACA,aAAa,2BAA2B;0CAExC,cAAA,gSAAC;oCAAK,WAAU;;;;;;;;;;;0CAElB,gSAAC;gCAAI,WAAU;;kDACb,gSAAC;wCAAG,WAAU;kDAAqC,SAAS,IAAI;;;;;;kDAChE,gSAAC;wCAAE,WAAU;kDACV,SAAS,WAAW;;;;;;;;;;;;;;;;;;kCAI3B,gSAAC;wBAAI,WAAU;kCACZ,SAAS,IAAI,CAAC,OAAO,CAAC,KAAK;;;;;;;eAtBzB,SAAS,EAAE;;;;;QA0BtB;;;;;;AAGN"}},
    {"offset": {"line": 3605, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/StudentPollView.tsx"],"sourcesContent":["/**\n * StudentPollView\n * Component for students to view and vote in active polls\n */\n\n'use client';\n\nimport React, { useState, useCallback } from 'react';\nimport { cn } from '@/lib/utils';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Poll, PollType, SubmitVoteInput } from './types';\nimport { getRemainingTime, formatRemainingTime, isPollExpired } from './utils/pollCalculations';\nimport { Check, Clock, Users, AlertCircle } from 'lucide-react';\n\ninterface StudentPollViewProps {\n  poll: Poll;\n  totalStudents: number;\n  hasVoted: boolean;\n  onVote: (input: SubmitVoteInput) => void;\n  className?: string;\n}\n\nexport function StudentPollView({ \n  poll, \n  totalStudents, \n  hasVoted, \n  onVote,\n  className \n}: StudentPollViewProps) {\n  const [selectedOptions, setSelectedOptions] = useState<string[]>([]);\n  const [rating, setRating] = useState<number | null>(null);\n  const [textAnswer, setTextAnswer] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const remainingTime = getRemainingTime(poll);\n  const expired = isPollExpired(poll);\n\n  const handleOptionToggle = useCallback((optionId: string) => {\n    if (poll.allowMultiple) {\n      setSelectedOptions(prev => \n        prev.includes(optionId)\n          ? prev.filter(id => id !== optionId)\n          : [...prev, optionId]\n      );\n    } else {\n      setSelectedOptions([optionId]);\n    }\n  }, [poll.allowMultiple]);\n\n  const handleSubmit = useCallback(async () => {\n    setIsSubmitting(true);\n    \n    const voteInput: SubmitVoteInput = {};\n    \n    switch (poll.type) {\n      case 'multiple_choice':\n      case 'true_false':\n        voteInput.optionIds = selectedOptions;\n        break;\n      case 'rating':\n        if (rating !== null) {\n          voteInput.rating = rating;\n        }\n        break;\n      case 'short_answer':\n      case 'word_cloud':\n        voteInput.textAnswer = textAnswer.trim();\n        break;\n    }\n\n    await onVote(voteInput);\n    setIsSubmitting(false);\n  }, [poll.type, selectedOptions, rating, textAnswer, onVote]);\n\n  const canSubmit = () => {\n    switch (poll.type) {\n      case 'multiple_choice':\n      case 'true_false':\n        return selectedOptions.length > 0;\n      case 'rating':\n        return rating !== null;\n      case 'short_answer':\n      case 'word_cloud':\n        return textAnswer.trim().length > 0;\n      default:\n        return false;\n    }\n  };\n\n  // Show thank you message after voting\n  if (hasVoted) {\n    return (\n      <Card className={cn(\"p-6 text-center\", className)}>\n        <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n          <Check className=\"h-8 w-8 text-green-600\" />\n        </div>\n        <h4 className=\"font-semibold text-gray-900 mb-2\">Thank You!</h4>\n        <p className=\"text-gray-500 text-sm\">\n          Your response has been recorded.\n        </p>\n        {poll.showResults && poll.status === 'active' && (\n          <p className=\"text-sm text-blue-600 mt-3\">\n            Results will be shared by your tutor.\n          </p>\n        )}\n      </Card>\n    );\n  }\n\n  // Show expired message\n  if (expired) {\n    return (\n      <Card className={cn(\"p-6\", className)}>\n        <div className=\"flex items-center gap-3 text-amber-600 mb-3\">\n          <AlertCircle className=\"h-5 w-5\" />\n          <h4 className=\"font-semibold\">Poll Closed</h4>\n        </div>\n        <p className=\"text-gray-500 text-sm\">\n          This poll has ended. Wait for your tutor to start a new one.\n        </p>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className={cn(\"p-4\", className)}>\n      {/* Header */}\n      <div className=\"mb-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <Badge className=\"bg-blue-100 text-blue-700 border-blue-200\">\n            Live Poll\n          </Badge>\n          {remainingTime !== null && (\n            <div className=\"flex items-center gap-1 text-orange-600 text-sm\">\n              <Clock className=\"h-4 w-4\" />\n              <span className=\"font-mono font-medium\">\n                {formatRemainingTime(remainingTime)}\n              </span>\n            </div>\n          )}\n        </div>\n        <h4 className=\"font-semibold text-gray-900\">{poll.question}</h4>\n        <div className=\"flex items-center gap-3 mt-2 text-sm text-gray-500\">\n          <span className=\"flex items-center gap-1\">\n            <Users className=\"h-4 w-4\" />\n            {totalStudents} students\n          </span>\n          {poll.isAnonymous && (\n            <span className=\"text-xs bg-gray-100 px-2 py-0.5 rounded\">\n              Anonymous\n            </span>\n          )}\n          {poll.allowMultiple && (\n            <span className=\"text-xs bg-gray-100 px-2 py-0.5 rounded\">\n              Multiple choice\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Poll Content */}\n      <div className=\"space-y-3\">\n        {renderPollInput({\n          poll,\n          selectedOptions,\n          rating,\n          textAnswer,\n          onOptionToggle: handleOptionToggle,\n          onRatingChange: setRating,\n          onTextChange: setTextAnswer\n        })}\n      </div>\n\n      {/* Submit Button */}\n      <Button\n        onClick={handleSubmit}\n        disabled={!canSubmit() || isSubmitting}\n        className=\"w-full mt-4\"\n        size=\"lg\"\n      >\n        {isSubmitting ? 'Submitting...' : 'Submit Vote'}\n      </Button>\n    </Card>\n  );\n}\n\n// Render appropriate input based on poll type\ninterface PollInputProps {\n  poll: Poll;\n  selectedOptions: string[];\n  rating: number | null;\n  textAnswer: string;\n  onOptionToggle: (optionId: string) => void;\n  onRatingChange: (rating: number) => void;\n  onTextChange: (text: string) => void;\n}\n\nfunction renderPollInput({\n  poll,\n  selectedOptions,\n  rating,\n  textAnswer,\n  onOptionToggle,\n  onRatingChange,\n  onTextChange\n}: PollInputProps) {\n  switch (poll.type) {\n    case 'multiple_choice':\n    case 'true_false':\n      return (\n        <div className=\"space-y-2\">\n          {poll.options.map((option, index) => {\n            const isSelected = selectedOptions.includes(option.id);\n            return (\n              <button\n                key={option.id}\n                onClick={() => onOptionToggle(option.id)}\n                className={cn(\n                  \"w-full p-3 border-2 rounded-lg text-left transition-all flex items-center gap-3\",\n                  isSelected \n                    ? \"border-blue-500 bg-blue-50\" \n                    : \"border-gray-200 hover:border-gray-300\"\n                )}\n              >\n                <span \n                  className={cn(\n                    \"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors\",\n                    isSelected \n                      ? \"bg-blue-500 text-white\" \n                      : \"bg-gray-100 text-gray-700\"\n                  )}\n                  style={!isSelected ? { backgroundColor: getOptionColor(index, 0.2), color: getOptionColor(index, 1) } : undefined}\n                >\n                  {isSelected ? <Check className=\"h-4 w-4\" /> : option.label}\n                </span>\n                <span className={cn(\"flex-1\", isSelected && \"font-medium\")}>\n                  {option.text}\n                </span>\n              </button>\n            );\n          })}\n        </div>\n      );\n\n    case 'rating':\n      return (\n        <div className=\"flex justify-center gap-2 py-4\">\n          {[1, 2, 3, 4, 5].map(value => (\n            <button\n              key={value}\n              onClick={() => onRatingChange(value)}\n              className={cn(\n                \"w-14 h-14 rounded-xl text-xl font-bold transition-all\",\n                rating === value\n                  ? \"bg-blue-500 text-white scale-110 shadow-lg\"\n                  : rating !== null && value < rating\n                    ? \"bg-blue-200 text-blue-700\"\n                    : \"bg-gray-100 text-gray-400 hover:bg-gray-200\"\n              )}\n            >\n              {value}\n            </button>\n          ))}\n        </div>\n      );\n\n    case 'word_cloud':\n      return (\n        <div className=\"space-y-2\">\n          <label className=\"text-sm text-gray-600\">\n            Enter a single word or short phrase:\n          </label>\n          <Textarea\n            value={textAnswer}\n            onChange={(e) => onTextChange(e.target.value)}\n            placeholder=\"Type your answer...\"\n            className=\"min-h-[80px]\"\n            maxLength={50}\n          />\n          <p className=\"text-xs text-gray-400 text-right\">\n            {textAnswer.length}/50 characters\n          </p>\n        </div>\n      );\n\n    case 'short_answer':\n      return (\n        <div className=\"space-y-2\">\n          <label className=\"text-sm text-gray-600\">\n            Enter your answer:\n          </label>\n          <Textarea\n            value={textAnswer}\n            onChange={(e) => onTextChange(e.target.value)}\n            placeholder=\"Type your answer...\"\n            className=\"min-h-[100px]\"\n            maxLength={500}\n          />\n          <p className=\"text-xs text-gray-400 text-right\">\n            {textAnswer.length}/500 characters\n          </p>\n        </div>\n      );\n\n    default:\n      return null;\n  }\n}\n\n// Helper function for option colors\nfunction getOptionColor(index: number, alpha: number = 1): string {\n  const colors = [\n    `rgba(59, 130, 246, ${alpha})`,   // blue\n    `rgba(16, 185, 129, ${alpha})`,   // green\n    `rgba(245, 158, 11, ${alpha})`,   // amber\n    `rgba(239, 68, 68, ${alpha})`,    // red\n    `rgba(139, 92, 246, ${alpha})`,   // violet\n    `rgba(236, 72, 153, ${alpha})`,   // pink\n  ];\n  return colors[index % colors.length];\n}\n"],"names":[],"mappings":";;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAfA;;;CAGC,GAED;;;;;;;;;;AAoBO,SAAS,gBAAgB,EAC9B,IAAI,EACJ,aAAa,EACb,QAAQ,EACR,MAAM,EACN,SAAS,EACY;IACrB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,mQAAQ,EAAW,EAAE;IACnE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,mQAAQ,EAAgB;IACpD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,mQAAQ,EAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,mQAAQ,EAAC;IAEjD,MAAM,gBAAgB,IAAA,6NAAgB,EAAC;IACvC,MAAM,UAAU,IAAA,0NAAa,EAAC;IAE9B,MAAM,qBAAqB,IAAA,sQAAW,EAAC,CAAC;QACtC,IAAI,KAAK,aAAa,EAAE;YACtB,mBAAmB,CAAA,OACjB,KAAK,QAAQ,CAAC,YACV,KAAK,MAAM,CAAC,CAAA,KAAM,OAAO,YACzB;uBAAI;oBAAM;iBAAS;QAE3B,OAAO;YACL,mBAAmB;gBAAC;aAAS;QAC/B;IACF,GAAG;QAAC,KAAK,aAAa;KAAC;IAEvB,MAAM,eAAe,IAAA,sQAAW,EAAC;QAC/B,gBAAgB;QAEhB,MAAM,YAA6B,CAAC;QAEpC,OAAQ,KAAK,IAAI;YACf,KAAK;YACL,KAAK;gBACH,UAAU,SAAS,GAAG;gBACtB;YACF,KAAK;gBACH,IAAI,WAAW,MAAM;oBACnB,UAAU,MAAM,GAAG;gBACrB;gBACA;YACF,KAAK;YACL,KAAK;gBACH,UAAU,UAAU,GAAG,WAAW,IAAI;gBACtC;QACJ;QAEA,MAAM,OAAO;QACb,gBAAgB;IAClB,GAAG;QAAC,KAAK,IAAI;QAAE;QAAiB;QAAQ;QAAY;KAAO;IAE3D,MAAM,YAAY;QAChB,OAAQ,KAAK,IAAI;YACf,KAAK;YACL,KAAK;gBACH,OAAO,gBAAgB,MAAM,GAAG;YAClC,KAAK;gBACH,OAAO,WAAW;YACpB,KAAK;YACL,KAAK;gBACH,OAAO,WAAW,IAAI,GAAG,MAAM,GAAG;YACpC;gBACE,OAAO;QACX;IACF;IAEA,sCAAsC;IACtC,IAAI,UAAU;QACZ,qBACE,gSAAC,0LAAI;YAAC,WAAW,IAAA,2KAAE,EAAC,mBAAmB;;8BACrC,gSAAC;oBAAI,WAAU;8BACb,cAAA,gSAAC,+PAAK;wBAAC,WAAU;;;;;;;;;;;8BAEnB,gSAAC;oBAAG,WAAU;8BAAmC;;;;;;8BACjD,gSAAC;oBAAE,WAAU;8BAAwB;;;;;;gBAGpC,KAAK,WAAW,IAAI,KAAK,MAAM,KAAK,0BACnC,gSAAC;oBAAE,WAAU;8BAA6B;;;;;;;;;;;;IAMlD;IAEA,uBAAuB;IACvB,IAAI,SAAS;QACX,qBACE,gSAAC,0LAAI;YAAC,WAAW,IAAA,2KAAE,EAAC,OAAO;;8BACzB,gSAAC;oBAAI,WAAU;;sCACb,gSAAC,qRAAW;4BAAC,WAAU;;;;;;sCACvB,gSAAC;4BAAG,WAAU;sCAAgB;;;;;;;;;;;;8BAEhC,gSAAC;oBAAE,WAAU;8BAAwB;;;;;;;;;;;;IAK3C;IAEA,qBACE,gSAAC,0LAAI;QAAC,WAAW,IAAA,2KAAE,EAAC,OAAO;;0BAEzB,gSAAC;gBAAI,WAAU;;kCACb,gSAAC;wBAAI,WAAU;;0CACb,gSAAC,4LAAK;gCAAC,WAAU;0CAA4C;;;;;;4BAG5D,kBAAkB,sBACjB,gSAAC;gCAAI,WAAU;;kDACb,gSAAC,+PAAK;wCAAC,WAAU;;;;;;kDACjB,gSAAC;wCAAK,WAAU;kDACb,IAAA,gOAAmB,EAAC;;;;;;;;;;;;;;;;;;kCAK7B,gSAAC;wBAAG,WAAU;kCAA+B,KAAK,QAAQ;;;;;;kCAC1D,gSAAC;wBAAI,WAAU;;0CACb,gSAAC;gCAAK,WAAU;;kDACd,gSAAC,+PAAK;wCAAC,WAAU;;;;;;oCAChB;oCAAc;;;;;;;4BAEhB,KAAK,WAAW,kBACf,gSAAC;gCAAK,WAAU;0CAA0C;;;;;;4BAI3D,KAAK,aAAa,kBACjB,gSAAC;gCAAK,WAAU;0CAA0C;;;;;;;;;;;;;;;;;;0BAQhE,gSAAC;gBAAI,WAAU;0BACZ,gBAAgB;oBACf;oBACA;oBACA;oBACA;oBACA,gBAAgB;oBAChB,gBAAgB;oBAChB,cAAc;gBAChB;;;;;;0BAIF,gSAAC,8LAAM;gBACL,SAAS;gBACT,UAAU,CAAC,eAAe;gBAC1B,WAAU;gBACV,MAAK;0BAEJ,eAAe,kBAAkB;;;;;;;;;;;;AAI1C;AAaA,SAAS,gBAAgB,EACvB,IAAI,EACJ,eAAe,EACf,MAAM,EACN,UAAU,EACV,cAAc,EACd,cAAc,EACd,YAAY,EACG;IACf,OAAQ,KAAK,IAAI;QACf,KAAK;QACL,KAAK;YACH,qBACE,gSAAC;gBAAI,WAAU;0BACZ,KAAK,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ;oBACzB,MAAM,aAAa,gBAAgB,QAAQ,CAAC,OAAO,EAAE;oBACrD,qBACE,gSAAC;wBAEC,SAAS,IAAM,eAAe,OAAO,EAAE;wBACvC,WAAW,IAAA,2KAAE,EACX,mFACA,aACI,+BACA;;0CAGN,gSAAC;gCACC,WAAW,IAAA,2KAAE,EACX,+FACA,aACI,2BACA;gCAEN,OAAO,CAAC,aAAa;oCAAE,iBAAiB,eAAe,OAAO;oCAAM,OAAO,eAAe,OAAO;gCAAG,IAAI;0CAEvG,2BAAa,gSAAC,+PAAK;oCAAC,WAAU;;;;;2CAAe,OAAO,KAAK;;;;;;0CAE5D,gSAAC;gCAAK,WAAW,IAAA,2KAAE,EAAC,UAAU,cAAc;0CACzC,OAAO,IAAI;;;;;;;uBArBT,OAAO,EAAE;;;;;gBAyBpB;;;;;;QAIN,KAAK;YACH,qBACE,gSAAC;gBAAI,WAAU;0BACZ;oBAAC;oBAAG;oBAAG;oBAAG;oBAAG;iBAAE,CAAC,GAAG,CAAC,CAAA,sBACnB,gSAAC;wBAEC,SAAS,IAAM,eAAe;wBAC9B,WAAW,IAAA,2KAAE,EACX,yDACA,WAAW,QACP,+CACA,WAAW,QAAQ,QAAQ,SACzB,8BACA;kCAGP;uBAXI;;;;;;;;;;QAiBf,KAAK;YACH,qBACE,gSAAC;gBAAI,WAAU;;kCACb,gSAAC;wBAAM,WAAU;kCAAwB;;;;;;kCAGzC,gSAAC,kMAAQ;wBACP,OAAO;wBACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;wBAC5C,aAAY;wBACZ,WAAU;wBACV,WAAW;;;;;;kCAEb,gSAAC;wBAAE,WAAU;;4BACV,WAAW,MAAM;4BAAC;;;;;;;;;;;;;QAK3B,KAAK;YACH,qBACE,gSAAC;gBAAI,WAAU;;kCACb,gSAAC;wBAAM,WAAU;kCAAwB;;;;;;kCAGzC,gSAAC,kMAAQ;wBACP,OAAO;wBACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;wBAC5C,aAAY;wBACZ,WAAU;wBACV,WAAW;;;;;;kCAEb,gSAAC;wBAAE,WAAU;;4BACV,WAAW,MAAM;4BAAC;;;;;;;;;;;;;QAK3B;YACE,OAAO;IACX;AACF;AAEA,oCAAoC;AACpC,SAAS,eAAe,KAAa,EAAE,QAAgB,CAAC;IACtD,MAAM,SAAS;QACb,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;QAC9B,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;QAC9B,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;QAC9B,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAC;QAC7B,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;QAC9B,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;KAC/B;IACD,OAAO,MAAM,CAAC,QAAQ,OAAO,MAAM,CAAC;AACtC"}},
    {"offset": {"line": 4101, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/StudentPollWidget.tsx"],"sourcesContent":["/**\n * StudentPollWidget\n * A compact widget for students to see and vote in active polls\n * Can be used as an overlay or inline component\n */\n\n'use client';\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { cn } from '@/lib/utils';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { io, Socket } from 'socket.io-client';\nimport { StudentPollView } from './StudentPollView';\nimport { Poll, SubmitVoteInput } from './types';\nimport { ChevronDown, ChevronUp, BarChart2 } from 'lucide-react';\n\ninterface StudentPollWidgetProps {\n  sessionId: string;\n  userId: string;\n  totalStudents: number;\n  className?: string;\n  position?: 'bottom-right' | 'inline';\n}\n\nexport function StudentPollWidget({\n  sessionId,\n  userId,\n  totalStudents,\n  className,\n  position = 'bottom-right'\n}: StudentPollWidgetProps) {\n  const socketRef = useRef<Socket | null>(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [activePoll, setActivePoll] = useState<Poll | null>(null);\n  const [hasVoted, setHasVoted] = useState(false);\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [isMinimized, setIsMinimized] = useState(false);\n\n  // Initialize socket connection\n  useEffect(() => {\n    if (!sessionId) return;\n\n    const connect = async () => {\n      const token = await import('@/lib/socket-auth').then((m) => m.getSocketToken());\n      if (!token) return;\n      const socket = io('/api/socket', {\n        path: '/api/socket',\n        transports: ['websocket', 'polling'],\n        auth: { token },\n      });\n      socketRef.current = socket;\n\n    socket.on('connect', () => {\n      setIsConnected(true);\n      socket.emit('join_class', {\n        roomId: sessionId,\n        userId,\n        name: 'Student',\n        role: 'student',\n      })\n      socket.emit('poll:join', { sessionId });\n      \n      // Request current polls\n      socket.emit('poll:list', { sessionId }, (response: { success: boolean; polls?: Poll[] }) => {\n        if (response.success && response.polls) {\n          const active = response.polls.find(p => p.status === 'active');\n          if (active) {\n            setActivePoll(active);\n            const voted = active.responses.some(r => r.studentId === userId);\n            setHasVoted(voted);\n          }\n        }\n      });\n    });\n\n    socket.on('disconnect', () => {\n      setIsConnected(false);\n    });\n    };\n    connect();\n    return () => {\n      socketRef.current?.emit('poll:leave', { sessionId });\n      socketRef.current?.disconnect();\n      socketRef.current = null;\n    };\n  }, [sessionId, userId]);\n\n  // Listen for poll events\n  useEffect(() => {\n    const socket = socketRef.current;\n    if (!socket) return;\n\n    const handlePollStarted = (poll: Poll) => {\n      setActivePoll(poll);\n      setHasVoted(false);\n      setIsMinimized(false);\n      setIsExpanded(true);\n    };\n\n    const handlePollEnded = () => {\n      setActivePoll(null);\n      setHasVoted(false);\n    };\n\n    const handlePollUpdated = (poll: Poll) => {\n      if (poll.status === 'active') {\n        setActivePoll(poll);\n        const voted = poll.responses.some(r => r.studentId === userId);\n        setHasVoted(voted);\n      }\n    };\n\n    socket.on('poll:started', handlePollStarted);\n    socket.on('poll:ended', handlePollEnded);\n    socket.on('poll:updated', handlePollUpdated);\n\n    return () => {\n      socket.off('poll:started', handlePollStarted);\n      socket.off('poll:ended', handlePollEnded);\n      socket.off('poll:updated', handlePollUpdated);\n    };\n  }, [userId]);\n\n  const handleVote = useCallback((input: SubmitVoteInput) => {\n    const socket = socketRef.current;\n    if (!socket || !activePoll) return;\n\n    socket.emit('poll:vote', {\n      pollId: activePoll.id,\n      sessionId,\n      ...input\n    });\n\n    setHasVoted(true);\n  }, [activePoll, sessionId]);\n\n  // No active poll\n  if (!activePoll) {\n    return null;\n  }\n\n  // Inline position - show as card\n  if (position === 'inline') {\n    return (\n      <Card className={cn(\"p-4\", className)}>\n        <StudentPollView\n          poll={activePoll}\n          totalStudents={totalStudents}\n          hasVoted={hasVoted}\n          onVote={handleVote}\n        />\n      </Card>\n    );\n  }\n\n  // Bottom-right position - floating widget\n  if (isMinimized) {\n    return (\n      <div className={cn(\n        \"fixed bottom-4 right-4 z-50\",\n        className\n      )}>\n        <Button\n          onClick={() => setIsMinimized(false)}\n          className=\"gap-2 shadow-lg\"\n        >\n          <BarChart2 className=\"h-4 w-4\" />\n          Active Poll\n          <Badge variant=\"secondary\" className=\"ml-1 bg-white text-blue-600\">\n            New\n          </Badge>\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className={cn(\n      \"fixed bottom-4 right-4 z-50 w-80\",\n      className\n    )}>\n      <Card className=\"shadow-xl border-2 border-blue-200\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-3 border-b bg-blue-50\">\n          <div className=\"flex items-center gap-2\">\n            <BarChart2 className=\"h-4 w-4 text-blue-600\" />\n            <span className=\"font-medium text-sm\">Live Poll</span>\n            <Badge variant={isConnected ? 'secondary' : 'outline'} className=\"text-[10px]\">\n              {isConnected ? 'Live' : 'Reconnecting'}\n            </Badge>\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-6 w-6\"\n              onClick={() => setIsExpanded(!isExpanded)}\n            >\n              {isExpanded ? (\n                <ChevronDown className=\"h-4 w-4\" />\n              ) : (\n                <ChevronUp className=\"h-4 w-4\" />\n              )}\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-6 w-6\"\n              onClick={() => setIsMinimized(true)}\n            >\n              <span className=\"text-lg leading-none\">−</span>\n            </Button>\n          </div>\n        </div>\n\n        {/* Content */}\n        {isExpanded && (\n          <div className=\"p-3\">\n            <StudentPollView\n              poll={activePoll}\n              totalStudents={totalStudents}\n              hasVoted={hasVoted}\n              onVote={handleVote}\n            />\n          </div>\n        )}\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4431, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/polls/index.ts"],"sourcesContent":["/**\n * Polls Module\n * Shared polling components and utilities\n */\n\n// Types\nexport * from './types';\n\n// Components\nexport { QuickPollPanel } from './QuickPollPanel';\nexport { PollCreator } from './PollCreator';\nexport { ActivePollView } from './ActivePollView';\nexport { PollResults } from './PollResults';\nexport { PollHistory } from './PollHistory';\nexport { PollTemplates } from './PollTemplates';\nexport { StudentPollView } from './StudentPollView';\nexport { StudentPollWidget } from './StudentPollWidget';\n\n// Hooks\nexport { usePollSocket } from './hooks/usePollSocket';\n\n// Utils\nexport { \n  POLL_TEMPLATES, \n  getTemplateById, \n  getDefaultOptions,\n  getOptionColor \n} from './utils/pollTemplates';\nexport { \n  calculatePollStatistics,\n  updatePollWithStatistics,\n  generateOptionLabel,\n  getRemainingTime,\n  formatRemainingTime,\n  isPollExpired,\n  getWordCloudData,\n  hashString\n} from './utils/pollCalculations';\n"],"names":[],"mappings":";AAAA;;;CAGC,GAED,QAAQ;AACR;AAEA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,QAAQ;AACR;AAEA,QAAQ;AACR;AAMA"}}]
}