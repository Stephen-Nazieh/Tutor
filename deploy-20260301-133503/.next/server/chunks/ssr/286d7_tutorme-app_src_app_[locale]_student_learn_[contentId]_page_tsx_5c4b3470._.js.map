{
  "version": 3,
  "sources": [],
  "debugId": "d556b872-36c1-3acb-9a4d-cdf8e6be54c6",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/student/learn/%5BcontentId%5D/page.tsx","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/video-player/index.tsx","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/video-player/notes-sidebar.tsx","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/video-player/inline-quiz-overlay.tsx","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/ai-chat/use-ai-chat.ts","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/ai-chat/index.tsx","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/lucide-react/src/icons/skip-forward.ts","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/lucide-react/src/icons/battery-low.ts","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/lucide-react/src/icons/skip-back.ts","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/lucide-react/src/icons/maximize.ts","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/lucide-react/src/icons/picture-in-picture.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef, useCallback } from 'react'\nimport { useParams } from 'next/navigation'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { VideoPlayer } from '@/components/video-player'\nimport { NotesSidebar } from '@/components/video-player/notes-sidebar'\nimport { InlineQuizOverlay, type QuizQuestion } from '@/components/video-player/inline-quiz-overlay'\nimport { AIChat } from '@/components/ai-chat'\nimport { UserNav } from '@/components/user-nav'\nimport { ChevronLeft, AlertCircle, Bookmark } from 'lucide-react'\nimport Link from 'next/link'\n\ninterface QuizCheckpoint {\n  id: string\n  videoTimestampSec: number\n  title: string | null\n  questions: QuizQuestion[]\n}\n\ninterface Content {\n  id: string\n  subject: string\n  topic: string\n  videoUrl: string | null\n  transcript: string\n  duration: number\n  videoVariants?: Record<string, string>\n  quizTimestamps?: number[]\n  quizCheckpoints?: QuizCheckpoint[]\n}\n\nexport default function LearnPage() {\n  const params = useParams()\n  const contentId = params?.contentId as string\n\n  const [content, setContent] = useState<Content | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n  const [currentTime, setCurrentTime] = useState(0)\n  const [isBookmarked, setIsBookmarked] = useState(false)\n  const [activeQuiz, setActiveQuiz] = useState<QuizCheckpoint | null>(null)\n  const csrfRef = useRef<string | null>(null)\n  const watchEventsRef = useRef<Array<{ eventType: string; videoSeconds: number; metadata?: unknown }>>([])\n  const progressThrottleRef = useRef<ReturnType<typeof setTimeout> | null>(null)\n  const lastProgressRef = useRef({ progress: 0, lastPosition: 0 })\n\n  const getCsrf = useCallback(async () => {\n    if (csrfRef.current) return csrfRef.current\n    const res = await fetch('/api/csrf')\n    const data = await res.json().catch(() => ({}))\n    csrfRef.current = data?.token ?? null\n    return csrfRef.current\n  }, [])\n\n  const flushWatchEvents = useCallback(async () => {\n    if (watchEventsRef.current.length === 0) return\n    const events = [...watchEventsRef.current]\n    watchEventsRef.current = []\n    const token = await getCsrf()\n    fetch(`/api/content/${contentId}/watch-events`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', ...(token && { 'X-CSRF-Token': token }) },\n      body: JSON.stringify({ events }),\n      credentials: 'include',\n    }).catch(() => {})\n  }, [contentId, getCsrf])\n\n  const saveProgress = useCallback(\n    async (progress: number, lastPosition: number) => {\n      lastProgressRef.current = { progress, lastPosition }\n      const token = await getCsrf()\n      fetch('/api/progress', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', ...(token && { 'X-CSRF-Token': token }) },\n        body: JSON.stringify({ contentId, progress: Math.round(progress), lastPosition, completed: progress >= 99 }),\n        credentials: 'include',\n      }).catch(() => {})\n    },\n    [contentId, getCsrf]\n  )\n\n  useEffect(() => {\n    if (!contentId) {\n      setError('No content ID provided')\n      setLoading(false)\n      return\n    }\n\n    fetch(`/api/content/${contentId}`)\n      .then(async res => {\n        if (!res.ok) {\n          const err = await res.json().catch(() => ({ error: 'Unknown error' }))\n          throw new Error(err.error || `HTTP ${res.status}`)\n        }\n        return res.json()\n      })\n      .then(data => {\n        if (data.content) {\n          setContent(data.content)\n        } else {\n          setError('Content not found')\n        }\n        setLoading(false)\n      })\n      .catch(err => {\n        setError(err.message)\n        setLoading(false)\n      })\n  }, [contentId])\n\n  // Check bookmark status\n  useEffect(() => {\n    if (!contentId) return\n    fetch('/api/bookmarks')\n      .then(res => res.json())\n      .then(data => {\n        const bookmarked = data.bookmarks?.some((b: { contentId: string }) => b.contentId === contentId)\n        setIsBookmarked(bookmarked)\n      })\n      .catch(() => {})\n  }, [contentId])\n\n  useEffect(() => {\n    const t = progressThrottleRef.current\n    return () => { if (t) clearTimeout(t) }\n  }, [])\n\n  const handleQuizSkip = useCallback(\n    async (timestamp: number, note?: string) => {\n      const token = await getCsrf()\n      await fetch(`/api/content/${contentId}/quiz-skip`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', ...(token && { 'X-CSRF-Token': token }) },\n        body: JSON.stringify({ videoTimestampSeconds: timestamp, note }),\n        credentials: 'include',\n      }).catch(() => {})\n    },\n    [contentId, getCsrf]\n  )\n\n  const toggleBookmark = async () => {\n    try {\n      const res = await fetch('/api/bookmarks', {\n        method: isBookmarked ? 'DELETE' : 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ contentId })\n      })\n      if (res.ok) setIsBookmarked(!isBookmarked)\n    } catch (err) {\n      console.error('Bookmark error:', err)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-2 text-gray-600\">Loading lesson...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error || !content) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\n        <Card className=\"max-w-md w-full\">\n          <CardContent className=\"pt-8 pb-8 text-center\">\n            <AlertCircle className=\"w-16 h-16 text-red-500 mx-auto mb-4\" />\n            <h2 className=\"text-xl font-bold mb-2\">Content Not Found</h2>\n            <p className=\"text-gray-600 mb-4\">{error || 'The lesson does not exist.'}</p>\n            <Link href=\"/student/dashboard\">\n              <Button>Back to Dashboard</Button>\n            </Link>\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <header className=\"bg-white border-b sticky top-0 z-40 safe-top\">\n        <div className=\"container mx-auto px-4 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <Link href=\"/student/dashboard\">\n              <Button variant=\"ghost\" size=\"icon\">\n                <ChevronLeft className=\"w-5 h-5\" />\n              </Button>\n            </Link>\n            <div>\n              <h1 className=\"text-xl font-bold\">{content.topic}</h1>\n              <p className=\"text-sm text-gray-600\">{content.subject}</p>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={toggleBookmark}\n              className={isBookmarked ? 'text-yellow-500' : 'text-gray-400'}\n              title={isBookmarked ? 'Remove bookmark' : 'Add bookmark'}\n            >\n              <Bookmark className={`w-5 h-5 ${isBookmarked ? 'fill-current' : ''}`} />\n            </Button>\n          </div>\n          <UserNav />\n        </div>\n      </header>\n\n      <main className=\"container mx-auto px-4 py-6\">\n        <div className=\"grid lg:grid-cols-3 gap-6\">\n          <div className=\"lg:col-span-2 relative\">\n            {content.videoUrl ? (\n              <>\n                <VideoPlayer\n                  videoUrl={content.videoUrl}\n                  title={content.topic}\n                  videoVariants={content.videoVariants}\n                  quizTimestamps={content.quizTimestamps ?? []}\n                  onProgress={(data) => {\n                    setCurrentTime(data.currentTime)\n                    if (progressThrottleRef.current) clearTimeout(progressThrottleRef.current)\n                    progressThrottleRef.current = setTimeout(() => {\n                      saveProgress(data.percentage, Math.floor(data.currentTime))\n                      progressThrottleRef.current = null\n                    }, 5000)\n                  }}\n                  onPlay={(t) => {\n                    watchEventsRef.current.push({ eventType: 'play', videoSeconds: t })\n                  }}\n                  onPause={(t) => {\n                    watchEventsRef.current.push({ eventType: 'pause', videoSeconds: t })\n                    flushWatchEvents()\n                  }}\n                  onSeek={(from, to) => {\n                    watchEventsRef.current.push({\n                      eventType: 'seek',\n                      videoSeconds: to,\n                      metadata: { fromTime: from, toTime: to },\n                    })\n                  }}\n                  onComplete={() => {\n                    watchEventsRef.current.push({\n                      eventType: 'complete',\n                      videoSeconds: content.duration || 0,\n                    })\n                    flushWatchEvents()\n                    saveProgress(100, content.duration || 0)\n                  }}\n                  onQuizTrigger={(timestamp) => {\n                    const cp = content.quizCheckpoints?.find(\n                      (c) => Math.abs(c.videoTimestampSec - timestamp) < 2\n                    )\n                    setActiveQuiz(cp ?? null)\n                  }}\n                  onQuizSkip={handleQuizSkip}\n                  locale=\"zh\"\n                />\n                {activeQuiz && (\n                  <InlineQuizOverlay\n                    title={activeQuiz.title ?? undefined}\n                    questions={activeQuiz.questions}\n                    locale=\"zh\"\n                    onSubmit={() => {\n                      setActiveQuiz(null)\n                    }}\n                    onSkip={() => setActiveQuiz(null)}\n                  />\n                )}\n              </>\n            ) : (\n              <Card>\n                <CardContent className=\"py-8 text-center text-gray-500\">\n                  暂无视频链接。请先上传或设置视频地址。\n                </CardContent>\n              </Card>\n            )}\n\n            <Card className=\"mt-6\">\n              <CardHeader>\n                <CardTitle>About This Lesson</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-gray-700\">{content.transcript || '—'}</p>\n                <p className=\"text-sm text-gray-400 mt-4\">\n                  Duration: {content.duration ? Math.floor(content.duration / 60) : 0} minutes\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n\n          <div>\n            <NotesSidebar\n              videoId={contentId}\n              currentTime={currentTime}\n              onSeekToTimestamp={(timestamp) => console.log('Seek to:', timestamp)}\n            />\n          </div>\n        </div>\n      </main>\n\n      <AIChat\n        context={{\n          videoTitle: content.topic,\n          currentTimestamp: currentTime,\n          subject: content.subject\n        }}\n      />\n    </div>\n  )\n}\n","'use client'\n\nimport { useState, useRef, useEffect, useCallback } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Progress } from '@/components/ui/progress'\nimport {\n  Play,\n  Pause,\n  Volume2,\n  VolumeX,\n  Maximize,\n  SkipBack,\n  SkipForward,\n  Settings,\n  MessageSquare,\n  BatteryLow,\n  PictureInPicture\n} from 'lucide-react'\n\nconst LABELS_ZH = {\n  quickCheck: '随堂小测',\n  takeQuiz: '开始答题',\n  skipForNow: '暂不答题',\n  skipWithNote: '跳过并备注',\n  play: '播放',\n  pause: '暂停',\n  speed: '倍速',\n  fullscreen: '全屏',\n  pip: '画中画',\n  quality: '画质',\n  auto: '自动',\n}\n\ninterface VideoPlayerProps {\n  videoUrl: string\n  title: string\n  onProgress?: (progress: { currentTime: number; duration: number; percentage: number }) => void\n  onQuizTrigger?: (timestamp: number) => void\n  onQuizSkip?: (timestamp: number, note?: string) => void\n  onPlay?: (videoSeconds: number) => void\n  onPause?: (videoSeconds: number) => void\n  onSeek?: (fromTime: number, toTime: number) => void\n  onComplete?: () => void\n  quizTimestamps?: number[]\n  videoVariants?: Record<string, string>\n  locale?: 'zh' | 'en'\n}\n\nexport function VideoPlayer({\n  videoUrl,\n  title,\n  onProgress,\n  onQuizTrigger,\n  onQuizSkip,\n  onPlay,\n  onPause,\n  onSeek,\n  onComplete,\n  quizTimestamps = [],\n  videoVariants,\n  locale = 'zh',\n}: VideoPlayerProps) {\n  const videoRef = useRef<HTMLVideoElement>(null)\n  const containerRef = useRef<HTMLDivElement>(null)\n\n  const labels = locale === 'zh' ? LABELS_ZH : {\n    quickCheck: 'Quick Check!',\n    takeQuiz: 'Take Quiz',\n    skipForNow: 'Skip for Now',\n    skipWithNote: 'Skip with note',\n    play: 'Play',\n    pause: 'Pause',\n    speed: 'Speed',\n    fullscreen: 'Fullscreen',\n    pip: 'Picture-in-picture',\n    quality: 'Quality',\n    auto: 'Auto',\n  }\n\n  const variantKeys = videoVariants ? Object.keys(videoVariants).sort((a, b) => parseInt(b, 10) - parseInt(a, 10)) : []\n  const [currentQuality, setCurrentQuality] = useState<string>(variantKeys[0] ?? 'auto')\n  const effectiveUrl = currentQuality === 'auto' || !videoVariants?.[currentQuality] ? videoUrl : videoVariants[currentQuality]\n\n  const [isPlaying, setIsPlaying] = useState(false)\n  const [currentTime, setCurrentTime] = useState(0)\n  const [duration, setDuration] = useState(0)\n  const [volume, setVolume] = useState(1)\n  const [isMuted, setIsMuted] = useState(false)\n  const [playbackRate, setPlaybackRate] = useState(1)\n  const [showSettings, setShowSettings] = useState(false)\n  const [showQuizPrompt, setShowQuizPrompt] = useState(false)\n  const [quizTimestamp, setQuizTimestamp] = useState<number | null>(null)\n  const [skipNote, setSkipNote] = useState('')\n  const [watchedSegments, setWatchedSegments] = useState<Set<number>>(new Set())\n  const [showControls, setShowControls] = useState(false)\n  const [isMobile, setIsMobile] = useState(false)\n  const [lowBattery, setLowBattery] = useState(false)\n  const [pipActive, setPipActive] = useState(false)\n  const [showQualityMenu, setShowQualityMenu] = useState(false)\n  const touchStartX = useRef(0)\n\n  // Track which quiz timestamps have been triggered\n  const triggeredQuizzes = useRef<Set<number>>(new Set())\n\n  useEffect(() => {\n    const mq = window.matchMedia('(max-width: 640px)')\n    setIsMobile(mq.matches)\n    const onChange = () => setIsMobile(mq.matches)\n    mq.addEventListener('change', onChange)\n    return () => mq.removeEventListener('change', onChange)\n  }, [])\n\n  useEffect(() => {\n    if (typeof navigator === 'undefined' || !('getBattery' in navigator)) return\n    const nav = navigator as Navigator & { getBattery?: () => Promise<{ level: number; addEventListener?: (e: string, fn: () => void) => void }> }\n    nav.getBattery?.().then((b) => {\n      setLowBattery(b.level < 0.2)\n      b.addEventListener?.('levelchange', () => setLowBattery(b.level < 0.2))\n    }).catch(() => {})\n  }, [])\n\n  useEffect(() => {\n    const video = videoRef.current\n    if (!video) return\n\n    const handleTimeUpdate = () => {\n      setCurrentTime(video.currentTime)\n      \n      // Track watched segments (every 5 seconds)\n      const segment = Math.floor(video.currentTime / 5)\n      setWatchedSegments(prev => new Set([...prev, segment]))\n      \n      // Call progress callback\n      onProgress?.({\n        currentTime: video.currentTime,\n        duration: video.duration || 0,\n        percentage: video.duration ? (video.currentTime / video.duration) * 100 : 0\n      })\n\n      // Check for quiz triggers\n      quizTimestamps.forEach(timestamp => {\n        if (\n          Math.abs(video.currentTime - timestamp) < 0.5 &&\n          !triggeredQuizzes.current.has(timestamp)\n        ) {\n          triggeredQuizzes.current.add(timestamp)\n          video.pause()\n          setIsPlaying(false)\n          setQuizTimestamp(timestamp)\n          setShowQuizPrompt(true)\n          onQuizTrigger?.(timestamp)\n        }\n      })\n    }\n\n    const handleLoadedMetadata = () => {\n      setDuration(video.duration)\n    }\n\n    const handleEnded = () => {\n      setIsPlaying(false)\n      onComplete?.()\n    }\n\n    video.addEventListener('timeupdate', handleTimeUpdate)\n    video.addEventListener('loadedmetadata', handleLoadedMetadata)\n    video.addEventListener('ended', handleEnded)\n\n    return () => {\n      video.removeEventListener('timeupdate', handleTimeUpdate)\n      video.removeEventListener('loadedmetadata', handleLoadedMetadata)\n      video.removeEventListener('ended', handleEnded)\n    }\n  }, [onProgress, onQuizTrigger, onComplete, quizTimestamps])\n\n  const togglePlay = useCallback(() => {\n    const video = videoRef.current\n    if (!video) return\n\n    if (isPlaying) {\n      video.pause()\n      onPause?.(video.currentTime)\n    } else {\n      video.play()\n      onPlay?.(video.currentTime)\n    }\n    setIsPlaying(!isPlaying)\n  }, [isPlaying, onPlay, onPause])\n\n  const handleSeek = (value: number) => {\n    const video = videoRef.current\n    if (!video) return\n\n    const fromTime = video.currentTime\n    const newTime = (value / 100) * duration\n    video.currentTime = newTime\n    setCurrentTime(newTime)\n    onSeek?.(fromTime, newTime)\n  }\n\n  const skip = (seconds: number) => {\n    const video = videoRef.current\n    if (!video) return\n\n    video.currentTime = Math.max(0, Math.min(duration, video.currentTime + seconds))\n  }\n\n  const toggleMute = () => {\n    const video = videoRef.current\n    if (!video) return\n\n    video.muted = !isMuted\n    setIsMuted(!isMuted)\n  }\n\n  const handleVolumeChange = (value: number) => {\n    const video = videoRef.current\n    if (!video) return\n\n    video.volume = value\n    setVolume(value)\n    setIsMuted(value === 0)\n  }\n\n  const changePlaybackRate = (rate: number) => {\n    const video = videoRef.current\n    if (!video) return\n\n    video.playbackRate = rate\n    setPlaybackRate(rate)\n    setShowSettings(false)\n  }\n\n  const toggleFullscreen = () => {\n    const container = containerRef.current\n    if (!container) return\n\n    if (document.fullscreenElement) {\n      document.exitFullscreen()\n    } else {\n      container.requestFullscreen()\n    }\n  }\n\n  const togglePiP = useCallback(async () => {\n    const video = videoRef.current\n    if (!video || !document.pictureInPictureEnabled) return\n    try {\n      if (document.pictureInPictureElement) {\n        await document.exitPictureInPicture()\n        setPipActive(false)\n      } else {\n        await video.requestPictureInPicture()\n        setPipActive(true)\n      }\n    } catch {\n      setPipActive(false)\n    }\n  }, [])\n\n  useEffect(() => {\n    const video = videoRef.current\n    if (!video) return\n    const onEnterPiP = () => setPipActive(true)\n    const onLeavePiP = () => setPipActive(false)\n    video.addEventListener('enterpictureinpicture', onEnterPiP)\n    video.addEventListener('leavepictureinpicture', onLeavePiP)\n    return () => {\n      video.removeEventListener('enterpictureinpicture', onEnterPiP)\n      video.removeEventListener('leavepictureinpicture', onLeavePiP)\n    }\n  }, [])\n\n  useEffect(() => {\n    const container = containerRef.current\n    if (!container) return\n    const onKeyDown = (e: KeyboardEvent) => {\n      if (e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement) return\n      const video = videoRef.current\n      if (!video) return\n      switch (e.key) {\n        case ' ':\n          e.preventDefault()\n          togglePlay()\n          break\n        case 'ArrowLeft':\n          e.preventDefault()\n          skip(-10)\n          break\n        case 'ArrowRight':\n          e.preventDefault()\n          skip(10)\n          break\n        case 'ArrowUp':\n          e.preventDefault()\n          handleVolumeChange(Math.min(1, volume + 0.1))\n          break\n        case 'ArrowDown':\n          e.preventDefault()\n          handleVolumeChange(Math.max(0, volume - 0.1))\n          break\n        default:\n          break\n      }\n    }\n    container.setAttribute('tabIndex', '0')\n    container.addEventListener('keydown', onKeyDown)\n    return () => container.removeEventListener('keydown', onKeyDown)\n  }, [volume, togglePlay])\n\n  const formatTime = (time: number) => {\n    const minutes = Math.floor(time / 60)\n    const seconds = Math.floor(time % 60)\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`\n  }\n\n  const progress = duration ? (currentTime / duration) * 100 : 0\n  const watchProgress = duration ? (watchedSegments.size * 5 / duration) * 100 : 0\n\n  const onTouchStart = (e: React.TouchEvent) => {\n    touchStartX.current = e.touches[0].clientX\n    if (isMobile) setShowControls((c) => !c)\n  }\n  const onTouchEnd = (e: React.TouchEvent) => {\n    const dx = e.changedTouches[0].clientX - touchStartX.current\n    if (Math.abs(dx) > 50 && duration) {\n      const video = videoRef.current\n      if (video) {\n        const delta = dx > 0 ? 10 : -10\n        video.currentTime = Math.max(0, Math.min(duration, video.currentTime + delta))\n      }\n    }\n  }\n\n  const controlsOpacity = isMobile ? (showControls ? 1 : 0) : undefined\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"relative bg-black rounded-lg overflow-hidden group\"\n    >\n      {/* Video: portrait-friendly on narrow screens */}\n      <div className=\"w-full aspect-video sm:aspect-video max-h-[70vh] sm:max-h-none\">\n        <video\n          ref={videoRef}\n          src={effectiveUrl}\n          className=\"w-full h-full object-contain\"\n          onClick={() => (isMobile ? setShowControls((c) => !c) : togglePlay())}\n          onTouchStart={onTouchStart}\n          onTouchEnd={onTouchEnd}\n          playsInline\n        />\n      </div>\n\n      {/* Battery-aware hint */}\n      {lowBattery && isPlaying && (\n        <div className=\"absolute top-2 left-2 right-2 z-10 flex items-center gap-2 rounded bg-black/70 px-3 py-2 text-sm text-white\">\n          <BatteryLow className=\"h-4 w-4 shrink-0\" />\n          <span>省电：可降低播放速度或亮度以节省电量</span>\n        </div>\n      )}\n\n      {/* Quiz Prompt Overlay - Chinese localized */}\n      {showQuizPrompt && (\n        <div className=\"absolute inset-0 bg-black/80 flex items-center justify-center z-20 p-4\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full text-center\">\n            <MessageSquare className=\"w-12 h-12 text-blue-500 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-bold mb-2\">{labels.quickCheck}</h3>\n            <p className=\"text-gray-600 mb-4\">\n              {locale === 'zh' ? '来检验一下刚才的内容吧。' : \"Let's test your understanding of what you just watched.\"}\n            </p>\n            {onQuizSkip && (\n              <div className=\"mb-4\">\n                <label className=\"block text-left text-sm text-gray-600 mb-1\">\n                  {locale === 'zh' ? '跳过备注（可选）' : 'Skip note (optional)'}\n                </label>\n                <textarea\n                  value={skipNote}\n                  onChange={(e) => setSkipNote(e.target.value.slice(0, 300))}\n                  placeholder={locale === 'zh' ? '例如：稍后再做' : 'e.g. Do later'}\n                  className=\"w-full min-h-[44px] px-3 py-2 border rounded-md text-sm\"\n                  rows={2}\n                />\n              </div>\n            )}\n            <div className=\"flex flex-wrap gap-3 justify-center\">\n              <Button\n                variant=\"outline\"\n                className=\"touch-target min-h-[44px]\"\n                onClick={() => {\n                  if (quizTimestamp != null && onQuizSkip) onQuizSkip(quizTimestamp, skipNote || undefined)\n                  setShowQuizPrompt(false)\n                  setSkipNote('')\n                  videoRef.current?.play()\n                  setIsPlaying(true)\n                }}\n              >\n                {onQuizSkip && skipNote ? labels.skipWithNote : labels.skipForNow}\n              </Button>\n              <Button\n                className=\"touch-target min-h-[44px]\"\n                onClick={() => {\n                  setShowQuizPrompt(false)\n                  setSkipNote('')\n                  if (quizTimestamp != null) onQuizTrigger?.(quizTimestamp)\n                }}\n              >\n                {labels.takeQuiz}\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Controls: bottom-sheet style on mobile, hover on desktop */}\n      <div\n        className={`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 transition-opacity duration-200 sm:opacity-0 sm:group-hover:opacity-100 ${\n          isMobile ? 'rounded-t-xl pb-safe' : ''\n        }`}\n        style={controlsOpacity !== undefined ? { opacity: controlsOpacity } : undefined}\n      >\n        {/* Progress Bar - touch-friendly thumb on mobile */}\n        <div className=\"mb-4\">\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"100\"\n            value={progress}\n            onChange={(e) => handleSeek(Number(e.target.value))}\n            className=\"w-full h-2 sm:h-1 py-2 sm:py-0 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-blue-500 [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 sm:[&::-webkit-slider-thumb]:h-3 sm:[&::-webkit-slider-thumb]:w-3 touch-manipulation\"\n          />\n          <div className=\"flex justify-between text-xs text-white mt-1\">\n            <span>{formatTime(currentTime)}</span>\n            <span>{formatTime(duration)}</span>\n          </div>\n        </div>\n\n        {/* Control Buttons */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            {/* Play/Pause - touch 44px on mobile */}\n            <Button\n              variant=\"ghost\"\n              size={isMobile ? 'icon-touch' : 'icon'}\n              onClick={togglePlay}\n              className=\"text-white hover:bg-white/20\"\n            >\n              {isPlaying ? <Pause className=\"w-5 h-5\" /> : <Play className=\"w-5 h-5\" />}\n            </Button>\n\n            {/* Skip Buttons */}\n            <Button\n              variant=\"ghost\"\n              size={isMobile ? 'icon-touch' : 'icon'}\n              onClick={() => skip(-10)}\n              className=\"text-white hover:bg-white/20\"\n            >\n              <SkipBack className=\"w-5 h-5\" />\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size={isMobile ? 'icon-touch' : 'icon'}\n              onClick={() => skip(10)}\n              className=\"text-white hover:bg-white/20\"\n            >\n              <SkipForward className=\"w-5 h-5\" />\n            </Button>\n\n            {/* Volume - hide slider on small mobile */}\n            <div className=\"flex items-center gap-2\">\n              <Button\n                variant=\"ghost\"\n                size={isMobile ? 'icon-touch' : 'icon'}\n                onClick={toggleMute}\n                className=\"text-white hover:bg-white/20\"\n              >\n                {isMuted ? <VolumeX className=\"w-5 h-5\" /> : <Volume2 className=\"w-5 h-5\" />}\n              </Button>\n              <input\n                type=\"range\"\n                min=\"0\"\n                max=\"1\"\n                step=\"0.1\"\n                value={isMuted ? 0 : volume}\n                onChange={(e) => handleVolumeChange(Number(e.target.value))}\n                className=\"hidden sm:block w-20 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-white\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            {/* Playback Speed - touch target on mobile */}\n            <div className=\"relative\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setShowSettings(!showSettings)}\n                className={`text-white hover:bg-white/20 ${isMobile ? 'min-h-[44px] min-w-[44px]' : ''}`}\n              >\n                <Settings className=\"w-4 h-4 mr-1\" />\n                {playbackRate}x\n              </Button>\n              \n              {showSettings && (\n                <div className=\"absolute bottom-full right-0 mb-2 bg-black/90 rounded-lg p-2 min-w-[100px]\">\n                  {[0.5, 0.75, 1, 1.25, 1.5, 2].map((rate) => (\n                    <button\n                      key={rate}\n                      onClick={() => changePlaybackRate(rate)}\n                      className={`block w-full text-left px-3 py-2 sm:py-1 text-sm rounded min-h-[44px] sm:min-h-0 flex items-center ${\n                        playbackRate === rate\n                          ? 'bg-blue-500 text-white'\n                          : 'text-white hover:bg-white/20'\n                      }`}\n                    >\n                      {rate}x\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Picture-in-picture */}\n            {typeof document !== 'undefined' && document.pictureInPictureEnabled && (\n              <Button\n                variant=\"ghost\"\n                size={isMobile ? 'icon-touch' : 'icon'}\n                onClick={togglePiP}\n                className=\"text-white hover:bg-white/20\"\n                title={labels.pip}\n              >\n                <PictureInPicture className={`w-5 h-5 ${pipActive ? 'text-blue-400' : ''}`} />\n              </Button>\n            )}\n\n            {/* Fullscreen */}\n            <Button\n              variant=\"ghost\"\n              size={isMobile ? 'icon-touch' : 'icon'}\n              onClick={toggleFullscreen}\n              className=\"text-white hover:bg-white/20\"\n              title={labels.fullscreen}\n            >\n              <Maximize className=\"w-5 h-5\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Quality selector - when videoVariants provided */}\n      {variantKeys.length > 0 && (\n        <div className=\"absolute top-2 right-2 z-10\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => { setShowQualityMenu((q) => !q); setShowSettings(false); }}\n            className=\"text-white hover:bg-white/20\"\n          >\n            {labels.quality} {currentQuality === 'auto' ? labels.auto : currentQuality + 'p'}\n          </Button>\n          {showQualityMenu && (\n            <div className=\"absolute right-0 top-full mt-1 bg-black/90 rounded p-2 min-w-[80px]\">\n              {['auto', ...variantKeys].map((q) => (\n                <button\n                  key={q}\n                  onClick={() => {\n                    setCurrentQuality(q)\n                    setShowQualityMenu(false)\n                  }}\n                  className={`block w-full text-left text-sm px-2 py-1 rounded text-white ${\n                    currentQuality === q ? 'bg-blue-500' : 'hover:bg-white/20'\n                  }`}\n                >\n                  {q === 'auto' ? labels.auto : q + 'p'}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Quiz Markers on Progress Bar */}\n      <div className=\"absolute top-0 left-0 right-0 h-1 bg-gray-800\">\n        {quizTimestamps.map((timestamp, index) => (\n          <div\n            key={index}\n            className=\"absolute top-0 w-1 h-full bg-yellow-500\"\n            style={{ left: `${(timestamp / duration) * 100}%` }}\n            title={`Quiz at ${formatTime(timestamp)}`}\n          />\n        ))}\n      </div>\n    </div>\n  )\n}\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { Plus, Trash2, Clock, BookOpen } from 'lucide-react'\n\ninterface Note {\n  id: string\n  timestamp: number\n  content: string\n  createdAt: Date\n}\n\ninterface NotesSidebarProps {\n  videoId: string\n  currentTime: number\n  onSeekToTimestamp: (timestamp: number) => void\n}\n\nexport function NotesSidebar({ videoId, currentTime, onSeekToTimestamp }: NotesSidebarProps) {\n  const [notes, setNotes] = useState<Note[]>([])\n  const [newNote, setNewNote] = useState('')\n  const [isExpanded, setIsExpanded] = useState(true)\n\n  // Load notes from localStorage on mount\n  useEffect(() => {\n    const savedNotes = localStorage.getItem(`notes-${videoId}`)\n    if (savedNotes) {\n      try {\n        const parsed = JSON.parse(savedNotes)\n        setNotes(parsed.map((n: any) => ({\n          ...n,\n          createdAt: new Date(n.createdAt)\n        })))\n      } catch {\n        console.error('Failed to load notes')\n      }\n    }\n  }, [videoId])\n\n  // Save notes to localStorage whenever they change\n  useEffect(() => {\n    if (notes.length > 0) {\n      localStorage.setItem(`notes-${videoId}`, JSON.stringify(notes))\n    }\n  }, [notes, videoId])\n\n  const addNote = () => {\n    if (!newNote.trim()) return\n\n    const note: Note = {\n      id: Date.now().toString(),\n      timestamp: currentTime,\n      content: newNote,\n      createdAt: new Date()\n    }\n\n    setNotes(prev => [...prev, note].sort((a, b) => a.timestamp - b.timestamp))\n    setNewNote('')\n  }\n\n  const deleteNote = (id: string) => {\n    setNotes(prev => prev.filter(n => n.id !== id))\n  }\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60)\n    const secs = Math.floor(seconds % 60)\n    return `${mins}:${secs.toString().padStart(2, '0')}`\n  }\n\n  if (!isExpanded) {\n    return (\n      <Button\n        variant=\"outline\"\n        className=\"h-full w-10 flex flex-col items-center py-4\"\n        onClick={() => setIsExpanded(true)}\n      >\n        <BookOpen className=\"w-5 h-5 mb-2\" />\n        <span className=\"text-xs writing-mode-vertical rotate-180\" style={{ writingMode: 'vertical-rl' }}>\n          Notes\n        </span>\n      </Button>\n    )\n  }\n\n  return (\n    <Card className=\"w-80 h-full flex flex-col\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-lg flex items-center gap-2\">\n            <BookOpen className=\"w-5 h-5\" />\n            Notes\n          </CardTitle>\n          <Button variant=\"ghost\" size=\"sm\" onClick={() => setIsExpanded(false)}>\n            Hide\n          </Button>\n        </div>\n        <p className=\"text-xs text-gray-500\">\n          {notes.length} note{notes.length !== 1 ? 's' : ''}\n        </p>\n      </CardHeader>\n\n      <CardContent className=\"flex-1 flex flex-col\">\n        {/* Add Note */}\n        <div className=\"mb-4 space-y-2\">\n          <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n            <Clock className=\"w-4 h-4\" />\n            <span>At {formatTime(currentTime)}</span>\n          </div>\n          <div className=\"flex gap-2\">\n            <Input\n              placeholder=\"Add a note...\"\n              value={newNote}\n              onChange={(e) => setNewNote(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && addNote()}\n            />\n            <Button size=\"icon\" onClick={addNote} disabled={!newNote.trim()}>\n              <Plus className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n\n        {/* Notes List */}\n        <ScrollArea className=\"flex-1 -mx-2 px-2\">\n          <div className=\"space-y-3\">\n            {notes.length === 0 ? (\n              <div className=\"text-center text-gray-500 py-8\">\n                <BookOpen className=\"w-12 h-12 mx-auto mb-2 opacity-30\" />\n                <p className=\"text-sm\">No notes yet</p>\n                <p className=\"text-xs\">Click + to add a note at the current timestamp</p>\n              </div>\n            ) : (\n              notes.map((note) => (\n                <div\n                  key={note.id}\n                  className=\"border rounded-lg p-3 group hover:border-blue-300 transition-colors\"\n                >\n                  <div className=\"flex items-start justify-between gap-2\">\n                    <button\n                      onClick={() => onSeekToTimestamp(note.timestamp)}\n                      className=\"flex items-center gap-1 text-sm font-medium text-blue-600 hover:text-blue-800\"\n                    >\n                      <Clock className=\"w-3 h-3\" />\n                      {formatTime(note.timestamp)}\n                    </button>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-6 w-6 opacity-0 group-hover:opacity-100\"\n                      onClick={() => deleteNote(note.id)}\n                    >\n                      <Trash2 className=\"w-3 h-3 text-red-500\" />\n                    </Button>\n                  </div>\n                  <p className=\"text-sm mt-1 whitespace-pre-wrap\">{note.content}</p>\n                  <p className=\"text-xs text-gray-400 mt-2\">\n                    {note.createdAt.toLocaleDateString()}\n                  </p>\n                </div>\n              ))\n            )}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  )\n}\n","'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { MessageSquare } from 'lucide-react'\n\nexport interface QuizQuestion {\n  type: string\n  question: string\n  options?: string[]\n  answer?: string\n  rubric?: string\n}\n\ninterface InlineQuizOverlayProps {\n  title?: string\n  questions: QuizQuestion[]\n  onSubmit: (answers: Record<number, string>) => void\n  onSkip: () => void\n  locale?: 'zh' | 'en'\n}\n\nexport function InlineQuizOverlay({\n  title,\n  questions,\n  onSubmit,\n  onSkip,\n  locale = 'zh',\n}: InlineQuizOverlayProps) {\n  const [answers, setAnswers] = useState<Record<number, string>>({})\n  const [submitted, setSubmitted] = useState(false)\n\n  const handleSubmit = () => {\n    setSubmitted(true)\n    onSubmit(answers)\n  }\n\n  const labels = locale === 'zh'\n    ? { title: '随堂小测', submit: '提交', skip: '跳过', done: '完成' }\n    : { title: 'Quick Check', submit: 'Submit', skip: 'Skip', done: 'Done' }\n\n  if (questions.length === 0) {\n    return (\n      <div className=\"absolute inset-0 bg-black/80 flex items-center justify-center z-30 p-4\">\n        <div className=\"bg-white rounded-lg p-6 max-w-md text-center\">\n          <p className=\"text-gray-600 mb-4\">{locale === 'zh' ? '暂无题目' : 'No questions.'}</p>\n          <Button onClick={onSkip}>{labels.skip}</Button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"absolute inset-0 bg-black/80 flex items-center justify-center z-30 p-4 overflow-auto\">\n      <div className=\"bg-white rounded-lg p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center gap-2 mb-4\">\n          <MessageSquare className=\"w-8 h-8 text-blue-500 shrink-0\" />\n          <h3 className=\"text-lg font-bold\">{title || labels.title}</h3>\n        </div>\n        <div className=\"space-y-4\">\n          {questions.map((q, i) => (\n            <div key={i} className=\"text-left\">\n              <p className=\"font-medium text-gray-900 mb-2\">{i + 1}. {q.question}</p>\n              {q.options && q.options.length > 0 ? (\n                <div className=\"space-y-2\">\n                  {q.options.map((opt, j) => (\n                    <label key={j} className=\"flex items-center gap-2 cursor-pointer\">\n                      <input\n                        type=\"radio\"\n                        name={`q-${i}`}\n                        checked={answers[i] === String(j)} \n                        onChange={() => setAnswers((a) => ({ ...a, [i]: String(j) }))}\n                        className=\"rounded\"\n                      />\n                      <span>{opt}</span>\n                    </label>\n                  ))}\n                </div>\n              ) : (\n                <input\n                  type=\"text\"\n                  value={answers[i] ?? ''}\n                  onChange={(e) => setAnswers((a) => ({ ...a, [i]: e.target.value }))}\n                  placeholder={locale === 'zh' ? '输入答案' : 'Your answer'}\n                  className=\"w-full border rounded px-3 py-2 text-sm\"\n                />\n              )}\n            </div>\n          ))}\n        </div>\n        <div className=\"flex gap-3 mt-6\">\n          <Button variant=\"outline\" onClick={onSkip}>{labels.skip}</Button>\n          <Button onClick={handleSubmit} disabled={submitted}>{submitted ? labels.done : labels.submit}</Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n","'use client'\n\nimport { useState, useCallback } from 'react'\n\nexport interface Message {\n  id: string\n  role: 'user' | 'assistant'\n  content: string\n  timestamp: Date\n  hintType?: 'socratic' | 'direct' | 'encouragement' | 'clarification'\n  relevantConcepts?: string[]\n}\n\nexport interface AIChatContext {\n  videoTitle?: string\n  currentTimestamp?: number\n  subject?: string\n}\n\nconst WELCOME_MESSAGE: Message = {\n  id: 'welcome',\n  role: 'assistant',\n  content:\n    \"Hi! I'm your AI tutor. I'm here to help you learn using the Socratic method - I'll guide you to answers rather than giving them directly. What would you like to explore?\",\n  timestamp: new Date(),\n}\n\nexport function useAIChat(context?: AIChatContext) {\n  const [messages, setMessages] = useState<Message[]>([WELCOME_MESSAGE])\n  const [input, setInput] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n\n  const sendMessage = useCallback(async () => {\n    const text = input.trim()\n    if (!text || isLoading) return\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: text,\n      timestamp: new Date(),\n    }\n\n    setMessages((prev) => [...prev, userMessage])\n    setInput('')\n    setIsLoading(true)\n\n    try {\n      const response = await fetch('/api/ai/chat', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          message: text,\n          subject: context?.subject,\n          context: {\n            ...context,\n            previousMessages: messages.slice(-5).map((m) => ({\n              role: m.role,\n              content: m.content,\n            })),\n          },\n        }),\n      })\n\n      const data = await response.json()\n\n      const assistantMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content:\n          data.response ||\n          'I apologize, but I am having trouble responding right now. Please try again.',\n        timestamp: new Date(),\n        hintType: data.hintType,\n        relevantConcepts: data.relevantConcepts,\n      }\n\n      setMessages((prev) => [...prev, assistantMessage])\n    } catch {\n      const errorMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content:\n          'I apologize, but I am having trouble responding right now. Please try again.',\n        timestamp: new Date(),\n      }\n      setMessages((prev) => [...prev, errorMessage])\n    } finally {\n      setIsLoading(false)\n    }\n  }, [input, isLoading, messages, context])\n\n  const handleKeyPress = useCallback(\n    (e: React.KeyboardEvent) => {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault()\n        sendMessage()\n      }\n    },\n    [sendMessage]\n  )\n\n  return {\n    messages,\n    input,\n    setInput,\n    isLoading,\n    sendMessage,\n    handleKeyPress,\n  }\n}\n","'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Card } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { MessageSquare, X, Send, Bot, User } from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { useAIChat, type Message } from './use-ai-chat'\n\ninterface AIChatProps {\n  context?: {\n    videoTitle?: string\n    currentTimestamp?: number\n    subject?: string\n  }\n  className?: string\n}\n\nfunction formatTime(date: Date) {\n  return date.toLocaleTimeString('en-US', {\n    hour: 'numeric',\n    minute: '2-digit',\n    hour12: true,\n  })\n}\n\nexport function AIChat({ context, className }: AIChatProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  const {\n    messages,\n    input,\n    setInput,\n    isLoading,\n    sendMessage,\n    handleKeyPress,\n  } = useAIChat(context)\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }, [messages])\n\n  return (\n    <div className={cn('fixed bottom-4 right-4 z-50', className)}>\n      {isOpen && (\n        <Card className=\"w-96 h-[500px] mb-4 flex flex-col shadow-2xl border-2 border-blue-200\">\n          <div className=\"flex items-center justify-between p-4 border-b bg-blue-500 text-white rounded-t-lg\">\n            <div className=\"flex items-center gap-2\">\n              <Bot className=\"w-5 h-5\" />\n              <div>\n                <h3 className=\"font-semibold\">AI Tutor</h3>\n                <p className=\"text-xs text-blue-100\">\n                  {context?.subject || 'General'} Help\n                </p>\n              </div>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={() => setIsOpen(false)}\n              className=\"text-white hover:bg-blue-600\"\n            >\n              <X className=\"w-4 h-4\" />\n            </Button>\n          </div>\n\n          <ScrollArea className=\"flex-1 p-4\">\n            <div className=\"space-y-4\">\n              {messages.map((message) => (\n                <MessageBubble key={message.id} message={message} />\n              ))}\n              {isLoading && <LoadingBubble />}\n              <div ref={messagesEndRef} />\n            </div>\n          </ScrollArea>\n\n          <div className=\"p-4 border-t\">\n            <div className=\"flex gap-2\">\n              <Input\n                placeholder=\"Ask your question...\"\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyPress={handleKeyPress}\n                disabled={isLoading}\n                className=\"flex-1\"\n              />\n              <Button\n                onClick={sendMessage}\n                disabled={!input.trim() || isLoading}\n                size=\"icon\"\n              >\n                <Send className=\"w-4 h-4\" />\n              </Button>\n            </div>\n            <p className=\"text-xs text-gray-500 mt-2 text-center\">\n              AI uses Socratic method - guiding you to answers\n            </p>\n          </div>\n        </Card>\n      )}\n\n      <Button\n        onClick={() => setIsOpen(!isOpen)}\n        className={cn(\n          'rounded-full w-14 h-14 shadow-lg transition-all',\n          isOpen ? 'bg-gray-600 hover:bg-gray-700' : 'bg-blue-500 hover:bg-blue-600'\n        )}\n      >\n        {isOpen ? (\n          <X className=\"w-6 h-6\" />\n        ) : (\n          <MessageSquare className=\"w-6 h-6\" />\n        )}\n      </Button>\n    </div>\n  )\n}\n\nfunction MessageBubble({ message }: { message: Message }) {\n  return (\n    <div\n      className={cn(\n        'flex gap-2',\n        message.role === 'user' ? 'justify-end' : 'justify-start'\n      )}\n    >\n      {message.role === 'assistant' && (\n        <div className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0\">\n          <Bot className=\"w-4 h-4 text-blue-600\" />\n        </div>\n      )}\n\n      <div\n        className={cn(\n          'max-w-[80%] rounded-lg p-3',\n          message.role === 'user'\n            ? 'bg-blue-500 text-white'\n            : 'bg-gray-100 text-gray-800'\n        )}\n      >\n        <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\n        {message.hintType && (\n          <span\n            className={cn(\n              'inline-block text-xs px-2 py-0.5 rounded-full mt-2',\n              message.hintType === 'socratic' && 'bg-purple-100 text-purple-700',\n              message.hintType === 'encouragement' && 'bg-green-100 text-green-700',\n              message.hintType === 'direct' && 'bg-orange-100 text-orange-700',\n              message.hintType === 'clarification' && 'bg-blue-100 text-blue-700'\n            )}\n          >\n            {message.hintType === 'socratic' && '💡 Socratic'}\n            {message.hintType === 'encouragement' && '⭐ Encouragement'}\n            {message.hintType === 'direct' && '📖 Direct'}\n            {message.hintType === 'clarification' && '❓ Clarification'}\n          </span>\n        )}\n        {message.relevantConcepts && message.relevantConcepts.length > 0 && (\n          <div className=\"mt-2 flex flex-wrap gap-1\">\n            {message.relevantConcepts.map((concept, idx) => (\n              <span\n                key={idx}\n                className=\"text-xs px-2 py-0.5 bg-blue-50 text-blue-600 rounded\"\n              >\n                {concept}\n              </span>\n            ))}\n          </div>\n        )}\n        <p\n          className={cn(\n            'text-xs mt-1',\n            message.role === 'user' ? 'text-blue-100' : 'text-gray-500'\n          )}\n        >\n          {formatTime(message.timestamp)}\n        </p>\n      </div>\n\n      {message.role === 'user' && (\n        <div className=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0\">\n          <User className=\"w-4 h-4 text-gray-600\" />\n        </div>\n      )}\n    </div>\n  )\n}\n\nfunction LoadingBubble() {\n  return (\n    <div className=\"flex gap-2 justify-start\">\n      <div className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0\">\n        <Bot className=\"w-4 h-4 text-blue-600\" />\n      </div>\n      <div className=\"bg-gray-100 rounded-lg p-3\">\n        <div className=\"flex gap-1\">\n          <span className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" />\n          <span className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce delay-100\" />\n          <span className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce delay-200\" />\n        </div>\n      </div>\n    </div>\n  )\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21 4v16', key: '7j8fe9' }],\n  [\n    'path',\n    {\n      d: 'M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z',\n      key: 'zs4d6',\n    },\n  ],\n];\n\n/**\n * @component @name SkipForward\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgNHYxNiIgLz4KICA8cGF0aCBkPSJNNi4wMjkgNC4yODVBMiAyIDAgMCAwIDMgNnYxMmEyIDIgMCAwIDAgMy4wMjkgMS43MTVsOS45OTctNS45OThhMiAyIDAgMCAwIC4wMDMtMy40MzJ6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/skip-forward\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst SkipForward = createLucideIcon('skip-forward', __iconNode);\n\nexport default SkipForward;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M22 14v-4', key: '14q9d5' }],\n  ['path', { d: 'M6 14v-4', key: '14a6bd' }],\n  ['rect', { x: '2', y: '6', width: '16', height: '12', rx: '2', key: '13zb55' }],\n];\n\n/**\n * @component @name BatteryLow\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTR2LTQiIC8+CiAgPHBhdGggZD0iTTYgMTR2LTQiIC8+CiAgPHJlY3QgeD0iMiIgeT0iNiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjEyIiByeD0iMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/battery-low\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BatteryLow = createLucideIcon('battery-low', __iconNode);\n\nexport default BatteryLow;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z',\n      key: '15892j',\n    },\n  ],\n  ['path', { d: 'M3 20V4', key: '1ptbpl' }],\n];\n\n/**\n * @component @name SkipBack\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTcuOTcxIDQuMjg1QTIgMiAwIDAgMSAyMSA2djEyYTIgMiAwIDAgMS0zLjAyOSAxLjcxNWwtOS45OTctNS45OThhMiAyIDAgMCAxLS4wMDMtMy40MzJ6IiAvPgogIDxwYXRoIGQ9Ik0zIDIwVjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/skip-back\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst SkipBack = createLucideIcon('skip-back', __iconNode);\n\nexport default SkipBack;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M8 3H5a2 2 0 0 0-2 2v3', key: '1dcmit' }],\n  ['path', { d: 'M21 8V5a2 2 0 0 0-2-2h-3', key: '1e4gt3' }],\n  ['path', { d: 'M3 16v3a2 2 0 0 0 2 2h3', key: 'wsl5sc' }],\n  ['path', { d: 'M16 21h3a2 2 0 0 0 2-2v-3', key: '18trek' }],\n];\n\n/**\n * @component @name Maximize\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOCAzSDVhMiAyIDAgMCAwLTIgMnYzIiAvPgogIDxwYXRoIGQ9Ik0yMSA4VjVhMiAyIDAgMCAwLTItMmgtMyIgLz4KICA8cGF0aCBkPSJNMyAxNnYzYTIgMiAwIDAgMCAyIDJoMyIgLz4KICA8cGF0aCBkPSJNMTYgMjFoM2EyIDIgMCAwIDAgMi0ydi0zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/maximize\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Maximize = createLucideIcon('maximize', __iconNode);\n\nexport default Maximize;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M2 10h6V4', key: 'zwrco' }],\n  ['path', { d: 'm2 4 6 6', key: 'ug085t' }],\n  ['path', { d: 'M21 10V7a2 2 0 0 0-2-2h-7', key: 'git5jr' }],\n  ['path', { d: 'M3 14v2a2 2 0 0 0 2 2h3', key: '1f7fh3' }],\n  ['rect', { x: '12', y: '14', width: '10', height: '7', rx: '1', key: '1wjs3o' }],\n];\n\n/**\n * @component @name PictureInPicture\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMiAxMGg2VjQiIC8+CiAgPHBhdGggZD0ibTIgNCA2IDYiIC8+CiAgPHBhdGggZD0iTTIxIDEwVjdhMiAyIDAgMCAwLTItMmgtNyIgLz4KICA8cGF0aCBkPSJNMyAxNHYyYTIgMiAwIDAgMCAyIDJoMyIgLz4KICA8cmVjdCB4PSIxMiIgeT0iMTQiIHdpZHRoPSIxMCIgaGVpZ2h0PSI3IiByeD0iMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/picture-in-picture\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PictureInPicture = createLucideIcon('picture-in-picture', __iconNode);\n\nexport default PictureInPicture;\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QCAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,+BQgBiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAiB,AAAjB,CAAA,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,AAjBxC,CAAA,AFAA,ADAA,AIAA,CDAA,AFAA,ADAA,AIAA,CDAA,AFAA,ADAA,AIAA,CJAA,AIAA,ADAA,AFAA,CEAA,AHAA,ACAA,AGAA,CHAA,ADAA,AGAA,ACAA,CDAA,AHAA,ACAA,AGAA,CHAA,ADAA,AGAA,ACAA,CAAA,AHAA,AEAA,AHAA,CGAA,AHAA,ACAA,AGAA,CJAA,AGAA,AFAA,AGAA,cDA0B,IAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,2CACR,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,kHDoB1C,EAAA,OAAA,EAAA,mIAdd,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAE,AAAF,EAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAW,CAAA,CAAA,CAAA,CAAK,AAAL,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,kCCR7B,yIHMP,GAAA,CAAA,AAAK,CAAA,CAAA,CAAA,AGYL,CHZK,AGYL,CHZK,AGYL,ORhBN,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,2CMemD,kHAdD,CEAF,AFAE,AGAA,CDAF,AFAE,AGAA,CDAF,AFAE,AGAA,CDAF,AFAE,AGAA,CHAA,AEAF,ACAE,OHAe,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,GGgB1E,EAAA,CAAA,EAAmB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAnB,AAAoC,CAAjB,AAAiB,AAApC,CAAoC,AAApC,AAAmB,CAAiB,AAAjB,CAAiB,AAAjB,CAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAsB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,YAlB7C,CDAb,ACAa,AJAD,ACAC,CDAD,ACAC,AEAb,ACAa,CDAb,AHAY,ACAC,AGAA,CAAK,CAAA,ADAlB,AHAiB,ACAC,CEAlB,AHAiB,ACAC,AGAA,CDAlB,AHAiB,ACAC,AGAA,CAAA,ADAlB,AHAiB,ACAC,CDAD,AGAjB,ACAkB,AHAA,CAAA,ADAD,AGAjB,ACAkB,CHAA,AEAlB,+ECE6B,CAAA,AHAH,AEAC,CAAA,AFAD,AGAG,EAAA,UAAe,CAC1D,AHD0D,CGCzD,AHDyD,CAAA,MGCjD,CDAA,ADAF,AEAE,4BAAgC,CDA3B,ACA2B,AFAlC,GEAuC,CAAA,ADAH,ADApC,WECN,CJDC,ACaJ,ACbS,AECN,CJDC,ACaJ,AGZG,AFDM,MECI,CFAF,AFAF,AIAI,CFAF,AFAF,AIAI,KAAS,CHYH,AGZG,AJAb,CIAgB,AJAhB,ACYU,AGZG,CJAb,ACYU,AGZM,CJAhB,ACYU,AGZM,CAAA,AHYN,ADZV,CAAA,ACYU,AGZM,CHYN,ADZV,AIAgB,AAAM,CJAtB,ACYU,AGZY,CJAtB,AIAsB,AHYZ,CAAA,AGZY,AJAtB,GIA6B,CJA7B,ACY2B,AGZE,CAAA,AJA7B,ACY2B,CDZ3B,ACY2B,AGZE,CJA7B,ACY2B,AGZE,CJA7B,ACY2B,AGZE,AAAM,CHYR,ADZ3B,AIAmC,CJAnC,AIAmC,AHYR,CDZ3B,AIAmC,AHYR,CGZQ,AJAnC,ACY2B,CDZ3B,ACY2B,AGZQ,CJAnC,CAAA,IIAgD,CJAhD,ACY0C,AGZM,CAAA,AJAhD,ACY0C,CDZ1C,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","ignoreList":[6,7,8,9,10]}}]
}