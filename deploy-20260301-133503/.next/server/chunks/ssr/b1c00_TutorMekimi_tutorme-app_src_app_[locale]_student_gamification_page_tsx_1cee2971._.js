;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f7374748-a5d1-095a-c74f-8c2208063fee")}catch(e){}}();
module.exports=[2973,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(454069),e=a.i(113098),f=a.i(88684),g=a.i(868606),h=a.i(333340),i=a.i(724403),j=a.i(164504),k=a.i(660817),l=a.i(538431),m=a.i(562117),n=a.i(770446),o=a.i(425798),p=a.i(458563),q=a.i(302402),r=a.i(844194),s=a.i(618349),t=a.i(19926),u=a.i(479680),v=a.i(52028),w=a.i(846438),x=a.i(494176),y=a.i(236478),z=a.i(679238);let A={common:"bg-gray-100 text-gray-700 border-gray-200",rare:"bg-blue-100 text-blue-700 border-blue-200",epic:"bg-purple-100 text-purple-700 border-purple-200",legendary:"bg-yellow-100 text-yellow-700 border-yellow-200"},B={common:l.Medal,rare:m.Star,epic:k.Trophy,legendary:q.Crown};function C(){(0,d.useRouter)();let[a,i]=(0,c.useState)(!0),[j,l]=(0,c.useState)(null),[m,q]=(0,c.useState)("overview");(0,c.useEffect)(()=>{t()},[]);let t=async()=>{try{let a=await fetch("/api/gamification/dashboard",{credentials:"include"});if(a.ok){let b=await a.json();b.success&&l(b.data)}else w.toast.error("Failed to load gamification data")}catch(a){console.error("Error fetching dashboard:",a),w.toast.error("Error loading dashboard")}finally{i(!1)}};if(a)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin text-blue-500"})});if(!j)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsx)(e.Card,{className:"max-w-md",children:(0,b.jsxs)(e.CardContent,{className:"pt-6 text-center",children:[(0,b.jsx)(k.Trophy,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Data Unavailable"}),(0,b.jsx)("p",{className:"text-gray-500 mb-4",children:"Unable to load gamification data"}),(0,b.jsx)(f.Button,{onClick:t,children:"Retry"})]})})});let{profile:x,badges:A,leaderboard:B,dailyQuests:C,recentAchievements:I,recentActivity:J}=j;return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(v.default,{href:"/student/dashboard",children:(0,b.jsx)(f.Button,{variant:"ghost",children:"Back to Dashboard"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Achievements & Rewards"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Track your progress and earn rewards"})]})]})}),(0,b.jsxs)(g.Tabs,{value:m,onValueChange:q,children:[(0,b.jsxs)(g.TabsList,{className:"mb-6",children:[(0,b.jsxs)(g.TabsTrigger,{value:"overview",className:"gap-2",children:[(0,b.jsx)(o.Zap,{className:"h-4 w-4"}),"Overview"]}),(0,b.jsxs)(g.TabsTrigger,{value:"badges",className:"gap-2",children:[(0,b.jsx)(k.Trophy,{className:"h-4 w-4"}),"Badges"]}),(0,b.jsxs)(g.TabsTrigger,{value:"leaderboard",className:"gap-2",children:[(0,b.jsx)(r.TrendingUp,{className:"h-4 w-4"}),"Leaderboard"]}),(0,b.jsxs)(g.TabsTrigger,{value:"activity",className:"gap-2",children:[(0,b.jsx)(p.Target,{className:"h-4 w-4"}),"Activity"]})]}),(0,b.jsxs)(g.TabsContent,{value:"overview",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsx)(y.XpBar,{level:x.level,xp:x.xp,xpToNextLevel:x.xpToNextLevel,progress:x.progress,streakDays:x.streakDays})}),(0,b.jsx)(z.DailyQuestsWidget,{quests:C.map(a=>({id:a.id,quest:{title:a.title,description:a.description,type:"daily",xpReward:a.xpReward,requirement:a.requirement?.count||1},completed:a.completed,progress:+!!a.completed})),completedCount:C.filter(a=>a.completed).length,totalXp:C.reduce((a,b)=>a+(b.completed?b.xpReward:0),0)})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsx)(D,{title:"Current Level",value:x.level,icon:s.Award,color:"text-blue-600"}),(0,b.jsx)(D,{title:"Day Streak",value:x.streakDays,icon:n.Flame,color:"text-orange-600"}),(0,b.jsx)(D,{title:"Badges Earned",value:`${A.stats.totalEarned}/${A.stats.totalAvailable}`,icon:k.Trophy,color:"text-yellow-600"}),(0,b.jsx)(D,{title:"Global Rank",value:B.global.rank?`#${B.global.rank}`:"Unranked",icon:r.TrendingUp,color:"text-green-600"})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Skills Progress"}),(0,b.jsx)(e.CardDescription,{children:"Your proficiency across different areas"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsx)(E,{name:"Grammar",score:x.skills.grammar}),(0,b.jsx)(E,{name:"Vocabulary",score:x.skills.vocabulary}),(0,b.jsx)(E,{name:"Speaking",score:x.skills.speaking}),(0,b.jsx)(E,{name:"Listening",score:x.skills.listening}),(0,b.jsx)(E,{name:"Confidence",score:x.skills.confidence}),(0,b.jsx)(E,{name:"Fluency",score:x.skills.fluency})]})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"Recent Achievements"})}),(0,b.jsx)(e.CardContent,{children:I.length>0?(0,b.jsx)("div",{className:"space-y-3",children:I.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(k.Trophy,{className:"h-5 w-5 text-yellow-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.description})]}),(0,b.jsxs)(h.Badge,{className:"bg-yellow-100 text-yellow-700",children:["+",a.xpAwarded," XP"]})]},a.id))}):(0,b.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No achievements yet. Start learning to earn badges!"})})]})]}),(0,b.jsxs)(g.TabsContent,{value:"badges",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,b.jsx)(F,{label:"Total",value:A.stats.totalEarned,total:A.stats.totalAvailable}),(0,b.jsx)(F,{label:"Common",value:A.stats.byRarity.common,color:"text-gray-600"}),(0,b.jsx)(F,{label:"Rare",value:A.stats.byRarity.rare,color:"text-blue-600"}),(0,b.jsx)(F,{label:"Epic",value:A.stats.byRarity.epic,color:"text-purple-600"}),(0,b.jsx)(F,{label:"Legendary",value:A.stats.byRarity.legendary,color:"text-yellow-600"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:A.all.map(a=>(0,b.jsx)(G,{badge:a},a.id))})]}),(0,b.jsx)(g.TabsContent,{value:"leaderboard",className:"space-y-6",children:(0,b.jsx)(H,{userId:sessionStorage.getItem("userId")||""})}),(0,b.jsx)(g.TabsContent,{value:"activity",className:"space-y-6",children:(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"Recent Activity"})}),(0,b.jsx)(e.CardContent,{children:J.length>0?(0,b.jsx)("div",{className:"space-y-3",children:J.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(p.Target,{className:"h-5 w-5 text-blue-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium capitalize",children:a.type.replace(/_/g," ")}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:new Date(a.createdAt).toLocaleString()})]})]},a.id))}):(0,b.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No recent activity"})})]})})]})]})})}function D({title:a,value:c,icon:d,color:f}){return(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:(0,x.cn)("p-3 rounded-lg bg-gray-100",f),children:(0,b.jsx)(d,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:c})]})]})})})}function E({name:a,score:c}){return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:a}),(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:[c,"%"]})]}),(0,b.jsx)(i.Progress,{value:c,className:"h-2"})]})}function F({label:a,value:c,total:d,color:f="text-gray-900"}){return(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"pt-6 text-center",children:[(0,b.jsx)("p",{className:(0,x.cn)("text-3xl font-bold",f),children:c}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a}),d&&(0,b.jsxs)("p",{className:"text-xs text-gray-400",children:["of ",d]})]})})}function G({badge:a}){let c=B[a.rarity];return a.isSecret&&!a.earned?(0,b.jsx)(e.Card,{className:"opacity-50",children:(0,b.jsxs)(e.CardContent,{className:"pt-6 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 mx-auto mb-3 bg-gray-200 rounded-full flex items-center justify-center",children:(0,b.jsx)(t.Lock,{className:"h-8 w-8 text-gray-400"})}),(0,b.jsx)("p",{className:"font-medium text-gray-500",children:"Secret Badge"}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"???"})]})}):(0,b.jsx)(e.Card,{className:(0,x.cn)("transition-all",a.earned?"border-2":"opacity-60 grayscale"),style:{borderColor:a.earned?a.color:void 0},children:(0,b.jsxs)(e.CardContent,{className:"pt-6 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full flex items-center justify-center",style:{backgroundColor:a.earned?`${a.color}20`:"#f3f4f6"},children:(0,b.jsx)(c,{className:"h-8 w-8",style:{color:a.earned?a.color:"#9ca3af"}})}),(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:a.description}),(0,b.jsx)(h.Badge,{className:(0,x.cn)("text-xs",A[a.rarity]),children:a.rarity}),a.earned&&(0,b.jsxs)("p",{className:"text-xs text-green-600 mt-2",children:["+",a.xpBonus," XP"]})]})})}function H({userId:a}){let[d,g]=(0,c.useState)("global"),[h,i]=(0,c.useState)(null),[k,l]=(0,c.useState)(!0);(0,c.useEffect)(()=>{m()},[d]);let m=async()=>{l(!0);try{let a=await fetch(`/api/gamification/leaderboard?type=${d}`,{credentials:"include"});if(a.ok){let b=await a.json();b.success&&i(b.data)}}catch(a){console.error("Error fetching leaderboard:",a)}finally{l(!1)}};if(k)return(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin text-blue-500"})});let o=h?.entries||[];return(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{children:"Leaderboard"}),(0,b.jsx)(e.CardDescription,{children:"See how you rank against other learners"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:["global","weekly","monthly"].map(a=>(0,b.jsx)(f.Button,{variant:d===a?"default":"outline",size:"sm",onClick:()=>g(a),children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"space-y-2",children:o.map((c,d)=>(0,b.jsxs)("div",{className:(0,x.cn)("flex items-center gap-4 p-3 rounded-lg",c.userId===a?"bg-blue-50 border border-blue-200":"bg-gray-50",d<3&&"bg-gradient-to-r from-yellow-50 to-orange-50"),children:[(0,b.jsx)("div",{className:(0,x.cn)("w-8 h-8 rounded-full flex items-center justify-center font-bold",0===d?"bg-yellow-400 text-yellow-900":1===d?"bg-gray-300 text-gray-700":2===d?"bg-orange-400 text-orange-900":"bg-gray-200 text-gray-600"),children:c.rank}),(0,b.jsx)(j.Avatar,{className:"h-10 w-10",children:(0,b.jsx)(j.AvatarFallback,{className:"bg-blue-100 text-blue-700",children:c.name?.split(" ").map(a=>a[0]).join("")||"?"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:c.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Level ",c.level]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-bold",children:[c.score.toLocaleString()," XP"]}),c.streakDays>0&&(0,b.jsxs)("p",{className:"text-xs text-orange-500 flex items-center justify-end gap-1",children:[(0,b.jsx)(n.Flame,{className:"h-3 w-3"}),c.streakDays," days"]})]})]},c.userId))}),h?.userRank&&!o.find(b=>b.userId===a)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"my-4 text-center text-gray-400",children:"..."}),(0,b.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-blue-50 border border-blue-200",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold bg-blue-500 text-white",children:h.userRank.rank}),(0,b.jsx)(j.Avatar,{className:"h-10 w-10",children:(0,b.jsx)(j.AvatarFallback,{className:"bg-blue-100 text-blue-700",children:"You"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:"You"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Level ",h.userRank.level]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("p",{className:"font-bold",children:[h.userRank.score.toLocaleString()," XP"]})})]})]})]})]})}a.s(["default",()=>C])}];

//# debugId=f7374748-a5d1-095a-c74f-8c2208063fee
//# sourceMappingURL=b1c00_TutorMekimi_tutorme-app_src_app_%5Blocale%5D_student_gamification_page_tsx_1cee2971._.js.map