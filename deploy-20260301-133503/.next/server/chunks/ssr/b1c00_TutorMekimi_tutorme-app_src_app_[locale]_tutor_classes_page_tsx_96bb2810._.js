;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="283694a8-eb52-f341-5a7e-f74a26d9489e")}catch(e){}}();
module.exports=[784065,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(52028),e=a.i(454069),f=a.i(88684),g=a.i(238341),h=a.i(113098),i=a.i(333340),j=a.i(981354),k=a.i(414030),l=a.i(36094),m=a.i(342621),n=a.i(595484),o=a.i(458588),p=a.i(934469),q=a.i(927910),r=a.i(849639),s=a.i(50730),t=a.i(147779),u=a.i(141617),v=a.i(475045),w=a.i(283284),x=a.i(425798),y=a.i(892094),z=a.i(868606),A=a.i(846438),B=a.i(709176),C=a.i(494176);function D(){let a=(0,e.useRouter)(),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)("all"),[N,O]=(0,c.useState)("list"),[P,Q]=(0,c.useState)(new Date),[R,S]=(0,c.useState)([]);(0,c.useEffect)(()=>{fetch("/api/tutor/classes",{credentials:"include"}).then(a=>{if(!a.ok)throw Error("Failed to load classes");return a.json()}).then(a=>{E(a.classes??[]),I(null)}).catch(()=>I("Failed to load classes")).finally(()=>G(!1))},[]),(0,c.useEffect)(()=>{(async()=>{let a=P.getFullYear(),b=P.getMonth(),c=new Date(a,b,1).toISOString(),d=new Date(a,b+1,0,23,59,59).toISOString();try{let a=await fetch(`/api/tutor/calendar/events?start=${c}&end=${d}`,{credentials:"include"});if(a.ok){let b=await a.json();S(b.events||[])}}catch{}})()},[P]);let T=(0,c.useMemo)(()=>{let a=new Date;return D.reduce((b,c)=>{let d=new Date(c.scheduledAt),e="live"===c.status||d<=a&&d.getTime()+6e4*c.duration>a.getTime(),f=d.getTime()+6e4*c.duration<a.getTime()||"completed"===c.status,g=d>a&&d.getTime()-a.getTime()<864e5;return e?b.live.push(c):f?b.past.push(c):g?b.upcoming.push(c):b.scheduled.push(c),b},{live:[],upcoming:[],scheduled:[],past:[]})},[D]),U=(0,c.useMemo)(()=>{let a=D;if("all"!==L&&(a=({live:T.live,upcoming:T.upcoming,scheduled:T.scheduled,past:T.past})[L]||D),J){let b=J.toLowerCase();a=a.filter(a=>a.title.toLowerCase().includes(b)||a.subject.toLowerCase().includes(b))}return a},[D,L,T,J]),V=async()=>{try{let b=await fetch("/api/csrf",{credentials:"include"}),c=await b.json().catch(()=>({})),d=c?.token??null,e=await fetch("/api/class/rooms",{method:"POST",headers:{"Content-Type":"application/json",...d&&{"X-CSRF-Token":d}},credentials:"include",body:JSON.stringify({title:"Instant Live Class",subject:"General",gradeLevel:"mixed",maxStudents:50,duration:60,scheduledAt:new Date().toISOString()})});if(e.ok){let b=await e.json();A.toast.success("Instant class created!"),a.push(`/tutor/live-class/${b.room.id}`)}else A.toast.error("Failed to create instant class")}catch(a){A.toast.error("Failed to create instant class")}},W=(a,c=!1,e=!1)=>{let g=(0,B.formatClassTime)(a.scheduledAt),h=function(a){let b=new Date,c=Math.floor((new Date(a).getTime()-b.getTime())/6e4);if(c<0)return"Started";if(c<60)return`in ${c} min`;let d=Math.floor(c/60);if(d<24)return`in ${d} hr`;let e=Math.floor(d/24);return`in ${e} days`}(a.scheduledAt);return(0,b.jsxs)("div",{className:(0,C.cn)("flex items-center justify-between p-4 border rounded-lg transition-colors",c?"bg-red-50 border-red-200":"hover:bg-gray-50"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:(0,C.cn)("w-12 h-12 rounded-lg flex items-center justify-center",c?"bg-red-100":e?"bg-yellow-100":"bg-blue-100"),children:c?(0,b.jsx)(q.Video,{className:"w-6 h-6 text-red-600"}):(0,b.jsx)(m.BookOpen,{className:(0,C.cn)("w-6 h-6",e?"text-yellow-600":"text-blue-600")})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h3",{className:"font-medium",children:a.title}),c&&(0,b.jsx)(i.Badge,{className:"bg-red-500 text-white animate-pulse",children:"ðŸ”´ LIVE"}),e&&!c&&(0,b.jsxs)(i.Badge,{variant:"outline",className:"border-yellow-500 text-yellow-600",children:["â° ",h]})]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[a.subject," â€¢ ",g.formatted,g.relative&&!c&&!e&&(0,b.jsxs)("span",{className:"text-blue-600 font-medium",children:[" â€¢ ",g.relative]})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-400",children:[(0,b.jsx)(t.Users,{className:"w-3 h-3 inline mr-1"}),a.enrolledStudents,"/",a.maxStudents," students",a.duration>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.Clock,{className:"w-3 h-3 inline mx-1"}),a.duration," min"]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>(a.id,void("u">typeof navigator&&navigator.clipboard?.writeText&&navigator.clipboard.writeText("").then(()=>A.toast.success("Join link copied to clipboard")))),title:"Copy join link",children:(0,b.jsx)(l.Copy,{className:"w-4 h-4"})}),(0,b.jsx)(d.default,{href:`/tutor/live-class/${a.id}`,children:(0,b.jsx)(f.Button,{size:"sm",className:(0,C.cn)(c&&"bg-red-600 hover:bg-red-700"),children:c?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.Play,{className:"w-4 h-4 mr-1"})," Enter"]}):e?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.Zap,{className:"w-4 h-4 mr-1"})," Prepare"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.ChevronRight,{className:"w-4 h-4 mr-1"})," View"]})})})]})]},a.id)};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("nav",{className:"bg-white border-b sticky top-0 z-50 safe-top",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between h-16",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(d.default,{href:"/tutor/dashboard",className:"text-xl font-bold text-blue-600",children:"TutorMe"}),(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",onClick:()=>a.push("/tutor/dashboard"),children:[(0,b.jsx)(k.ArrowLeft,{className:"w-4 h-4 mr-1"})," Dashboard"]})]}),(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)(g.UserNav,{})})]})})}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"My Classes"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your classes and start live sessions"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(f.Button,{variant:"outline",onClick:V,children:[(0,b.jsx)(x.Zap,{className:"w-4 h-4 mr-2"})," Instant Class"]}),(0,b.jsx)(d.default,{href:"/tutor/dashboard?create=1",children:(0,b.jsxs)(f.Button,{children:[(0,b.jsx)(n.Plus,{className:"w-4 h-4 mr-2"})," Create Class"]})})]})]}),H&&(0,b.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm flex items-center justify-between",children:[H,(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"Retry"})]}),(0,b.jsxs)(z.Tabs,{value:N,onValueChange:a=>O(a),className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)(z.TabsList,{children:[(0,b.jsxs)(z.TabsTrigger,{value:"list",className:"gap-2",children:[(0,b.jsx)(w.List,{className:"w-4 h-4"})," List"]}),(0,b.jsxs)(z.TabsTrigger,{value:"calendar",className:"gap-2",children:[(0,b.jsx)(v.CalendarDays,{className:"w-4 h-4"})," Calendar"]})]})}),(0,b.jsxs)(z.TabsContent,{value:"list",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(o.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,b.jsx)(j.Input,{placeholder:"Search classes...",value:J,onChange:a=>K(a.target.value),className:"pl-9"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:["all","live","upcoming","scheduled","past"].map(a=>(0,b.jsxs)(f.Button,{variant:L===a?"default":"outline",size:"sm",onClick:()=>M(a),className:"capitalize",children:["live"===a&&T.live.length>0&&(0,b.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-1 animate-pulse"}),a,"all"!==a&&(0,b.jsxs)("span",{className:"ml-1 text-xs opacity-70",children:["(",T[a]?.length||0,")"]})]},a))})]}),F?(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"h-24 bg-gray-200 rounded-lg animate-pulse"},a))}):0===D.length?(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"py-12",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(u.Calendar,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No classes yet"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Create your first class to get started"}),(0,b.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,b.jsxs)(f.Button,{variant:"outline",onClick:V,children:[(0,b.jsx)(x.Zap,{className:"w-4 h-4 mr-2"})," Start Instant Class"]}),(0,b.jsx)(d.default,{href:"/tutor/dashboard?create=1",children:(0,b.jsxs)(f.Button,{children:[(0,b.jsx)(n.Plus,{className:"w-4 h-4 mr-2"})," Schedule Class"]})})]})]})})}):(0,b.jsxs)("div",{className:"space-y-6",children:[T.live.length>0&&"scheduled"!==L&&"past"!==L&&(0,b.jsxs)(h.Card,{className:"border-red-200",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center gap-2 text-red-600",children:[(0,b.jsx)("span",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),"ðŸ”´ Live Now (",T.live.length,")"]})}),(0,b.jsx)(h.CardContent,{className:"space-y-3",children:T.live.map(a=>W(a,!0))})]}),T.upcoming.length>0&&"live"!==L&&"past"!==L&&(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Clock,{className:"w-5 h-5 text-yellow-600"}),"â° Starting Soon (",T.upcoming.length,")"]})}),(0,b.jsx)(h.CardContent,{className:"space-y-3",children:T.upcoming.map(a=>W(a,!1,!0))})]}),("all"===L||"scheduled"===L)&&T.scheduled.length>0&&(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Calendar,{className:"w-5 h-5 text-blue-600"}),"ðŸ“… Scheduled (",T.scheduled.length,")"]})}),(0,b.jsx)(h.CardContent,{className:"space-y-3",children:T.scheduled.map(a=>W(a))})]}),("all"===L||"past"===L)&&T.past.length>0&&(0,b.jsxs)(h.Card,{className:"opacity-75",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center gap-2 text-gray-500",children:[(0,b.jsx)(s.Clock,{className:"w-5 h-5"}),"Past Classes (",T.past.length,")"]})}),(0,b.jsx)(h.CardContent,{className:"space-y-3",children:T.past.map(a=>W(a))})]}),0===U.length&&D.length>0&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(p.Filter,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-600",children:"No classes match your filter"}),(0,b.jsx)(f.Button,{variant:"outline",className:"mt-2",onClick:()=>{M("all"),K("")},children:"Clear Filters"})]})]})]}),(0,b.jsxs)(z.TabsContent,{value:"calendar",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>{Q(new Date(P.getFullYear(),P.getMonth()-1,1))},children:"â† Prev"}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:P.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>{Q(new Date(P.getFullYear(),P.getMonth()+1,1))},children:"Next â†’"})]}),(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-6",children:[(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>(0,b.jsx)("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:a},a))}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1",children:(a=>{let b=a.getFullYear(),c=a.getMonth(),d=new Date(b,c,1),e=new Date(b,c+1,0).getDate(),f=d.getDay(),g=[];for(let a=0;a<f;a++)g.push(null);for(let a=1;a<=e;a++)g.push(a);return g})(P).map((a,c)=>{if(null===a)return(0,b.jsx)("div",{className:"h-24"},`empty-${c}`);let e=R.filter(b=>{let c=new Date(b.scheduledAt);return c.getDate()===a&&c.getMonth()===P.getMonth()&&c.getFullYear()===P.getFullYear()}),f=new Date().getDate()===a&&new Date().getMonth()===P.getMonth()&&new Date().getFullYear()===P.getFullYear();return(0,b.jsxs)("div",{className:(0,C.cn)("h-24 border rounded-lg p-2 overflow-hidden",f&&"bg-blue-50 border-blue-300"),children:[(0,b.jsx)("div",{className:(0,C.cn)("text-sm font-medium mb-1",f&&"text-blue-600"),children:a}),(0,b.jsxs)("div",{className:"space-y-1",children:[e.slice(0,2).map(a=>(0,b.jsx)(d.default,{href:`/tutor/live-class/${a.id}`,className:"block text-xs p-1 bg-blue-100 rounded truncate hover:bg-blue-200",children:a.title},a.id)),e.length>2&&(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["+",e.length-2," more"]})]})]},a)})})]})}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Upcoming This Month"})}),(0,b.jsx)(h.CardContent,{className:"space-y-3",children:0===R.length?(0,b.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No classes scheduled this month"}):R.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.title}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[new Date(a.scheduledAt).toLocaleDateString()," â€¢ ",a.subject]})]}),(0,b.jsx)(d.default,{href:`/tutor/live-class/${a.id}`,children:(0,b.jsx)(f.Button,{size:"sm",children:"View"})})]},a.id))})]})]})]})]})]})}a.s(["default",()=>D])}];

//# debugId=283694a8-eb52-f341-5a7e-f74a26d9489e
//# sourceMappingURL=b1c00_TutorMekimi_tutorme-app_src_app_%5Blocale%5D_tutor_classes_page_tsx_96bb2810._.js.map