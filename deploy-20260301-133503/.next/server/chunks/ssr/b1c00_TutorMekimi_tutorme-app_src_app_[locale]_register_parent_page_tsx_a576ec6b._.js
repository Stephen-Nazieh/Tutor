;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="bbd54851-0109-db1b-d5ba-056bff32820a")}catch(e){}}();
module.exports=[952789,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(454069),e=a.i(52028),f=a.i(88684),g=a.i(259522),h=a.i(981354),i=a.i(529004),j=a.i(113098),k=a.i(206209),l=a.i(384076),m=a.i(846438),n=a.i(414030),o=a.i(845279),p=a.i(147779),q=a.i(822133),r=a.i(324666);function s(){let a=(0,d.useRouter)(),[s,t]=(0,c.useState)(1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phoneNumber:"",relationship:"parent",timezone:"Asia/Shanghai",preferredLanguage:"zh-CN",students:[{name:"",childEmail:"",childUniqueId:"",grade:"",subjects:[]}],emergencyContacts:[{name:"",relationship:"",phone:""}],notificationPreferences:{email:!0,sms:!0,app:!0,weeklyReports:!0,paymentNotifications:!0,emergencyContacts:!0},tosAccepted:!1}),y=(a,b,c)=>{x(d=>({...d,students:d.students.map((d,e)=>e===a?{...d,[b]:c}:d)}))},z=(a,b,c)=>{x(d=>({...d,emergencyContacts:d.emergencyContacts.map((d,e)=>e===a?{...d,[b]:c}:d)}))},A=async()=>{let b=`${w.firstName} ${w.lastName}`.trim();if(b.length<2)return void m.toast.error("Please enter your first and last name");let c={email:w.email,password:w.password,confirmPassword:w.confirmPassword,phoneNumber:w.phoneNumber,relationship:w.relationship,timezone:w.timezone,preferredLanguage:w.preferredLanguage,students:w.students,emergencyContacts:w.emergencyContacts.filter(a=>a.name&&a.relationship&&a.phone),notificationPreferences:w.notificationPreferences,tosAccepted:w.tosAccepted},d=g.parentRegistrationSchema.safeParse(c);if(!d.success){let a=d.error.issues[0];m.toast.error(a?.message??"Please check your form and try again");return}v(!0);try{let c=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:"PARENT",email:w.email,password:w.password,name:b,tosAccepted:w.tosAccepted,profileData:{phoneNumber:w.phoneNumber,relationship:w.relationship,timezone:w.timezone,preferredLanguage:w.preferredLanguage},additionalData:{students:w.students.map(a=>({childEmail:a.childEmail?.trim()||void 0,childUniqueId:a.childUniqueId?.trim()||void 0,name:a.name,grade:a.grade,subjects:a.subjects})),emergencyContacts:w.emergencyContacts.filter(a=>a.name&&a.relationship&&a.phone),notificationPreferences:w.notificationPreferences}})}),d=await c.json();c.ok?(m.toast.success("Parent account created successfully!"),a.push("/login")):m.toast.error(d.error||"Failed to create account")}catch{m.toast.error("An error occurred. Please try again.")}finally{v(!1)}},B=[{number:1,title:"Account",icon:o.UserPlus},{number:2,title:"Children",icon:p.Users},{number:3,title:"Emergency",icon:r.Bell},{number:4,title:"Preferences",icon:q.CreditCard}];return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)(e.default,{href:"/register",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4",children:[(0,b.jsx)(n.ArrowLeft,{className:"h-4 w-4 mr-1"}),"Back to Registration"]}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Parent Registration"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Create an account to manage your children's learning journey"})]}),(0,b.jsx)("div",{className:"flex items-center justify-between mb-8",children:B.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:`
                flex items-center justify-center w-10 h-10 rounded-full font-semibold text-sm
                ${s>=a.number?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"}
              `,children:(0,b.jsx)(a.icon,{className:"h-5 w-5"})}),(0,b.jsx)("span",{className:`ml-2 text-sm font-medium ${s>=a.number?"text-blue-600":"text-gray-500"}`,children:a.title}),c<B.length-1&&(0,b.jsx)("div",{className:`w-12 h-0.5 mx-4 ${s>a.number?"bg-blue-600":"bg-gray-200"}`})]},a.number))}),(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsxs)(j.CardTitle,{children:[1===s&&"Account Information",2===s&&"Add Your Children",3===s&&"Emergency Contacts",4===s&&"Notification Preferences"]}),(0,b.jsxs)(j.CardDescription,{children:[1===s&&"Enter your account details and personal information",2===s&&"Add information about the students you want to manage",3===s&&"Add emergency contacts for safety purposes",4===s&&"Choose how you want to receive notifications"]})]}),(0,b.jsxs)(j.CardContent,{className:"space-y-6",children:[1===s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"firstName",children:"First Name"}),(0,b.jsx)(h.Input,{id:"firstName",value:w.firstName,onChange:a=>x({...w,firstName:a.target.value}),placeholder:"John"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"lastName",children:"Last Name"}),(0,b.jsx)(h.Input,{id:"lastName",value:w.lastName,onChange:a=>x({...w,lastName:a.target.value}),placeholder:"Doe"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"email",children:"Email Address"}),(0,b.jsx)(h.Input,{id:"email",type:"email",value:w.email,onChange:a=>x({...w,email:a.target.value}),placeholder:"parent@example.com"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"phoneNumber",children:"Phone Number"}),(0,b.jsx)(h.Input,{id:"phoneNumber",value:w.phoneNumber,onChange:a=>x({...w,phoneNumber:a.target.value}),placeholder:"+86 138 0000 0000"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"password",children:"Password"}),(0,b.jsx)(h.Input,{id:"password",type:"password",value:w.password,onChange:a=>x({...w,password:a.target.value}),placeholder:"••••••••"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,b.jsx)(h.Input,{id:"confirmPassword",type:"password",value:w.confirmPassword,onChange:a=>x({...w,confirmPassword:a.target.value}),placeholder:"••••••••"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"relationship",children:"Relationship to Student"}),(0,b.jsxs)(k.Select,{value:w.relationship,onValueChange:a=>x({...w,relationship:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"parent",children:"Parent"}),(0,b.jsx)(k.SelectItem,{value:"guardian",children:"Guardian"}),(0,b.jsx)(k.SelectItem,{value:"step-parent",children:"Step-Parent"}),(0,b.jsx)(k.SelectItem,{value:"grandparent",children:"Grandparent"}),(0,b.jsx)(k.SelectItem,{value:"other",children:"Other"})]})]})]})]}),2===s&&(0,b.jsxs)("div",{className:"space-y-6",children:[w.students.map((a,c)=>(0,b.jsx)(j.Card,{className:"bg-gray-50",children:(0,b.jsxs)(j.CardContent,{className:"pt-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("h4",{className:"font-medium",children:["Child ",c+1]}),w.students.length>1&&(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>{x(a=>({...a,students:a.students.filter((a,b)=>b!==c)}))},className:"text-red-600",children:"Remove"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Child's Name"}),(0,b.jsx)(h.Input,{value:a.name,onChange:a=>y(c,"name",a.target.value),placeholder:"Enter child's name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Child's Email (Required - child must register first)"}),(0,b.jsx)(h.Input,{type:"email",value:a.childEmail,onChange:a=>y(c,"childEmail",a.target.value),placeholder:"child@example.com"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Or use Student ID below if child has one"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Student Unique ID (Alternative to email)"}),(0,b.jsx)(h.Input,{value:a.childUniqueId,onChange:a=>y(c,"childUniqueId",a.target.value),placeholder:"STU-xxxxxxxxxxxx"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Min 8 characters. Students can copy this from Student Dashboard → Settings → Account Security → Student ID."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Grade Level"}),(0,b.jsxs)(k.Select,{value:a.grade,onValueChange:a=>y(c,"grade",a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Select grade"})}),(0,b.jsx)(k.SelectContent,{children:["Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6","Grade 7","Grade 8","Grade 9","Grade 10","Grade 11","Grade 12","University"].map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))})]})]})]})},c)),(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>{x(a=>({...a,students:[...a.students,{name:"",childEmail:"",childUniqueId:"",grade:"",subjects:[]}]}))},className:"w-full",children:[(0,b.jsx)(o.UserPlus,{className:"h-4 w-4 mr-2"}),"Add Another Child"]})]}),3===s&&(0,b.jsxs)("div",{className:"space-y-6",children:[w.emergencyContacts.map((a,c)=>(0,b.jsx)(j.Card,{className:"bg-gray-50",children:(0,b.jsxs)(j.CardContent,{className:"pt-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("h4",{className:"font-medium",children:["Emergency Contact ",c+1]}),w.emergencyContacts.length>1&&(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>{x(a=>({...a,emergencyContacts:a.emergencyContacts.filter((a,b)=>b!==c)}))},className:"text-red-600",children:"Remove"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Name"}),(0,b.jsx)(h.Input,{value:a.name,onChange:a=>z(c,"name",a.target.value),placeholder:"Contact name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Relationship"}),(0,b.jsx)(h.Input,{value:a.relationship,onChange:a=>z(c,"relationship",a.target.value),placeholder:"e.g., Spouse, Aunt, Uncle"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Phone Number"}),(0,b.jsx)(h.Input,{value:a.phone,onChange:a=>z(c,"phone",a.target.value),placeholder:"+86 138 0000 0000"})]})]})},c)),w.emergencyContacts.length<3&&(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>{x(a=>({...a,emergencyContacts:[...a.emergencyContacts,{name:"",relationship:"",phone:""}]}))},className:"w-full",children:[(0,b.jsx)(o.UserPlus,{className:"h-4 w-4 mr-2"}),"Add Emergency Contact"]})]}),4===s&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-900",children:"Notification Channels"}),(0,b.jsx)("div",{className:"space-y-3",children:[{key:"email",label:"Email Notifications",description:"Receive updates via email"},{key:"sms",label:"SMS Notifications",description:"Receive text message alerts"},{key:"app",label:"In-App Notifications",description:"Receive notifications in the app"}].map(({key:a,label:c,description:d})=>(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)(l.Checkbox,{id:a,checked:w.notificationPreferences[a],onCheckedChange:b=>x(c=>({...c,notificationPreferences:{...c.notificationPreferences,[a]:b}}))}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(i.Label,{htmlFor:a,className:"font-medium",children:c}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:d})]})]},a))})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-900",children:"Notification Types"}),(0,b.jsx)("div",{className:"space-y-3",children:[{key:"weeklyReports",label:"Weekly Progress Reports",description:"Get weekly summaries of your child's progress"},{key:"paymentNotifications",label:"Payment Notifications",description:"Receive alerts about payments and invoices"},{key:"emergencyContacts",label:"Emergency Contact Alerts",description:"Get notified about important updates"}].map(({key:a,label:c,description:d})=>(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)(l.Checkbox,{id:a,checked:w.notificationPreferences[a],onCheckedChange:b=>x(c=>({...c,notificationPreferences:{...c.notificationPreferences,[a]:b}}))}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(i.Label,{htmlFor:a,className:"font-medium",children:c}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:d})]})]},a))})]}),(0,b.jsxs)("div",{className:"flex items-start space-x-3 rounded-lg border p-4",children:[(0,b.jsx)(l.Checkbox,{id:"tosAccepted",checked:w.tosAccepted,onCheckedChange:a=>x(b=>({...b,tosAccepted:!0===a}))}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(i.Label,{htmlFor:"tosAccepted",className:"font-medium cursor-pointer",children:"I accept the Terms of Service and Privacy Policy"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"You must accept the terms to create an account."})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between pt-6",children:[s>1?(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>t(s-1),disabled:u,children:"Previous"}):(0,b.jsx)("div",{}),s<4?(0,b.jsx)(f.Button,{onClick:()=>t(s+1),disabled:u,children:"Next"}):(0,b.jsx)(f.Button,{onClick:A,disabled:u,className:"bg-green-600 hover:bg-green-700",children:u?"Creating Account...":"Create Account"})]})]})]})]})})}a.s(["default",()=>s])}];

//# debugId=bbd54851-0109-db1b-d5ba-056bff32820a
//# sourceMappingURL=b1c00_TutorMekimi_tutorme-app_src_app_%5Blocale%5D_register_parent_page_tsx_a576ec6b._.js.map