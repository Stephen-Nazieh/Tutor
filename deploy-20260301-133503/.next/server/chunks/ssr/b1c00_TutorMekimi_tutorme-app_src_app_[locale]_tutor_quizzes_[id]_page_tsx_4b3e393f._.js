;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d249653b-2e04-85ed-9299-5f4c565ec231")}catch(e){}}();
module.exports=[658123,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(454069),e=a.i(88684),f=a.i(981354),g=a.i(529004),h=a.i(763485),i=a.i(113098),j=a.i(333340),k=a.i(206209),l=a.i(868606),m=a.i(384076),n=a.i(637757),o=a.i(846438),p=a.i(414030),q=a.i(192730),r=a.i(143650),s=a.i(849639),t=a.i(147779),u=a.i(290385),v=a.i(926388),w=a.i(946685),x=a.i(294532),y=a.i(479680),z=a.i(494176),A=a.i(595484),B=a.i(318498),C=a.i(801728),D=a.i(892094),E=a.i(615443),F=a.i(342202),G=a.i(36094),H=a.i(560467),I=a.i(924846);function J(){return`q-${Date.now()}-${Math.random().toString(36).slice(2,8)}`}let K=[{value:"mcq",label:"Multiple Choice"},{value:"truefalse",label:"True / False"},{value:"shortanswer",label:"Short Answer"},{value:"essay",label:"Essay"}];function L({questions:a,onChange:d,courseId:l,compact:m=!1}){let[n,p]=(0,c.useState)(new Set(a.map(a=>a.id))),[q,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(""),[L,M]=(0,c.useState)(!1),N=(0,c.useCallback)((b,c)=>{d(a.map(a=>a.id===b?{...a,...c}:a))},[a,d]),O=(b,c)=>{if(c<0||c>=a.length)return;let e=[...a],[f]=e.splice(b,1);e.splice(c,0,f),d(e)},P=async()=>{if(!v.trim())return void o.toast.error("Enter a topic to generate questions");u(!0);try{let b=await fetch("/api/tutor/questions/generate",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({topic:v,count:5,difficulty:"intermediate",types:["multiple_choice","short_answer"]})});if(b.ok){let c=((await b.json()).questions||[]).map(a=>({id:a.id||J(),type:"mcq"===a.type?"mcq":"shortanswer"===a.type?"shortanswer":"essay"===a.type?"essay":"mcq",question:a.question||"",options:a.options||void 0,correctAnswer:a.correctAnswer||"",points:a.points??1,explanation:a.explanation||""}));c.length>0?(d([...a,...c]),o.toast.success(`Imported ${c.length} AI-generated questions`),M(!1),w("")):o.toast.error("AI returned no questions")}else o.toast.error("AI generation failed")}catch{o.toast.error("AI generation failed")}finally{u(!1)}};return q?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium",children:["Student Preview (",a.length," questions)"]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>s(!1),className:"gap-1",children:[(0,b.jsx)(E.EyeOff,{className:"h-3 w-3"})," Exit Preview"]})]}),0===a.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No questions to preview"}):a.map((a,c)=>(0,b.jsx)(i.Card,{children:(0,b.jsxs)(i.CardContent,{className:"pt-4 pb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsxs)(j.Badge,{variant:"secondary",className:"text-xs",children:["Q",c+1]}),(0,b.jsx)(j.Badge,{variant:"outline",className:"text-xs capitalize",children:a.type}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground ml-auto",children:[a.points," pts"]})]}),(0,b.jsx)("p",{className:"font-medium text-sm mb-3",children:a.question||"(No question text)"}),"mcq"===a.type&&a.options&&(0,b.jsx)("div",{className:"space-y-1.5",children:a.options.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg border text-sm hover:bg-gray-50",children:[(0,b.jsxs)("span",{className:"font-medium text-muted-foreground w-5",children:[String.fromCharCode(65+c),"."]}),a||`Option ${c+1}`]},c))}),"truefalse"===a.type&&(0,b.jsx)("div",{className:"flex gap-2",children:["True","False"].map(a=>(0,b.jsx)("div",{className:"flex-1 p-2 rounded-lg border text-sm text-center",children:a},a))}),("shortanswer"===a.type||"essay"===a.type)&&(0,b.jsx)("div",{className:(0,z.cn)("border rounded-lg p-2 text-sm text-muted-foreground bg-gray-50","essay"===a.type?"h-24":"h-10"),children:"Type your answer here..."})]})},a.id))]}):(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"text-sm font-medium",children:["Questions (",a.length,")"]}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[a.reduce((a,b)=>a+b.points,0)," pts total"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>s(!0),className:"gap-1",children:[(0,b.jsx)(x.Eye,{className:"h-3 w-3"})," Preview"]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>M(!L),className:"gap-1",children:[(0,b.jsx)(F.Wand2,{className:"h-3 w-3"})," AI Import"]})]})]}),L&&(0,b.jsx)(i.Card,{className:"border-blue-200 bg-blue-50/50",children:(0,b.jsxs)(i.CardContent,{className:"pt-4 pb-4",children:[(0,b.jsx)(g.Label,{className:"text-xs font-medium mb-1 block",children:"Generate questions about:"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Input,{value:v,onChange:a=>w(a.target.value),placeholder:"e.g. Photosynthesis, World War II, Algebra...",className:"flex-1"}),(0,b.jsxs)(e.Button,{size:"sm",onClick:P,disabled:t,className:"gap-1",children:[t?(0,b.jsx)(y.Loader2,{className:"h-3 w-3 animate-spin"}):(0,b.jsx)(F.Wand2,{className:"h-3 w-3"}),"Generate"]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"AI will generate 5 questions and add them to your list"})]})}),a.map((c,l)=>(0,b.jsx)(i.Card,{className:"relative",children:(0,b.jsxs)(i.CardContent,{className:"pt-3 pb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{className:"cursor-grab text-muted-foreground hover:text-gray-600",title:"Drag to reorder",onMouseDown:()=>{},children:(0,b.jsx)(B.GripVertical,{className:"h-4 w-4"})}),(0,b.jsxs)("button",{onClick:()=>{var a;return a=c.id,void p(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},className:"flex items-center gap-1 text-sm font-medium",children:[n.has(c.id)?(0,b.jsx)(C.ChevronDown,{className:"h-4 w-4"}):(0,b.jsx)(D.ChevronRight,{className:"h-4 w-4"}),"Q",l+1]}),(0,b.jsx)(j.Badge,{variant:"outline",className:"text-xs capitalize",children:c.type}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground truncate flex-1",children:c.question||"(Untitled)"}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[c.points," pts"]}),(0,b.jsxs)("div",{className:"flex items-center gap-0.5",children:[l>0&&(0,b.jsx)("button",{onClick:()=>O(l,l-1),className:"p-1 text-muted-foreground hover:text-gray-600 text-xs",title:"Move up",children:"↑"}),l<a.length-1&&(0,b.jsx)("button",{onClick:()=>O(l,l+1),className:"p-1 text-muted-foreground hover:text-gray-600 text-xs",title:"Move down",children:"↓"}),(0,b.jsx)("button",{onClick:()=>(b=>{let c=a.findIndex(a=>a.id===b);if(-1===c)return;let e={...a[c],id:J()},f=[...a];f.splice(c+1,0,e),d(f)})(c.id),className:"p-1 text-muted-foreground hover:text-blue-600",title:"Duplicate",children:(0,b.jsx)(G.Copy,{className:"h-3 w-3"})}),(0,b.jsx)("button",{onClick:()=>{var b;return b=c.id,void d(a.filter(a=>a.id!==b))},className:"p-1 text-muted-foreground hover:text-red-600",title:"Remove",children:(0,b.jsx)(r.Trash2,{className:"h-3 w-3"})})]})]}),n.has(c.id)&&(0,b.jsxs)("div",{className:"mt-3 space-y-3 pl-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-xs",children:"Type"}),(0,b.jsxs)(k.Select,{value:c.type,onValueChange:a=>{let b={type:a};"mcq"!==a||c.options||(b.options=["","","",""]),"truefalse"===a&&(b.options=void 0,b.correctAnswer="True"),("shortanswer"===a||"essay"===a)&&(b.options=void 0),N(c.id,b)},children:[(0,b.jsx)(k.SelectTrigger,{className:"mt-1",children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsx)(k.SelectContent,{children:K.map(a=>(0,b.jsx)(k.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-xs",children:"Points"}),(0,b.jsx)(f.Input,{type:"number",min:1,value:c.points,onChange:a=>N(c.id,{points:parseInt(a.target.value)||1}),className:"mt-1"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-xs",children:"Question"}),(0,b.jsx)(h.Textarea,{value:c.question,onChange:a=>N(c.id,{question:a.target.value}),placeholder:"Enter your question...",rows:2,className:"mt-1"})]}),"mcq"===c.type&&(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-xs",children:"Options (click ✓ to set correct answer)"}),(0,b.jsxs)("div",{className:"space-y-1.5 mt-1",children:[(c.options||[]).map((a,d)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>N(c.id,{correctAnswer:a}),className:(0,z.cn)("w-6 h-6 rounded-full border flex items-center justify-center transition-all",c.correctAnswer===a?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-green-400"),children:c.correctAnswer===a?(0,b.jsx)(H.CheckCircle,{className:"h-3.5 w-3.5"}):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:String.fromCharCode(65+d)})}),(0,b.jsx)(f.Input,{value:a,onChange:a=>{let b=[...c.options||[]];b[d]=a.target.value,N(c.id,{options:b})},placeholder:`Option ${String.fromCharCode(65+d)}`,className:"flex-1"}),(c.options?.length||0)>2&&(0,b.jsx)("button",{onClick:()=>{let a=(c.options||[]).filter((a,b)=>b!==d);N(c.id,{options:a})},className:"text-muted-foreground hover:text-red-500",children:(0,b.jsx)(I.XCircle,{className:"h-4 w-4"})})]},d)),(0,b.jsxs)(e.Button,{variant:"ghost",size:"sm",onClick:()=>N(c.id,{options:[...c.options||[],""]}),className:"gap-1 text-xs",children:[(0,b.jsx)(A.Plus,{className:"h-3 w-3"})," Add Option"]})]})]}),"truefalse"===c.type&&(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-xs",children:"Correct Answer"}),(0,b.jsx)("div",{className:"flex gap-2 mt-1",children:["True","False"].map(a=>(0,b.jsx)("button",{onClick:()=>N(c.id,{correctAnswer:a}),className:(0,z.cn)("flex-1 p-2 rounded-lg border text-sm font-medium transition-all",c.correctAnswer===a?"border-green-500 bg-green-50 text-green-700":"hover:bg-gray-50"),children:a},a))})]}),"shortanswer"===c.type&&(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-xs",children:"Expected Answer"}),(0,b.jsx)(f.Input,{value:"string"==typeof c.correctAnswer?c.correctAnswer:"",onChange:a=>N(c.id,{correctAnswer:a.target.value}),placeholder:"The expected correct answer",className:"mt-1"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-xs",children:"Explanation (shown after grading)"}),(0,b.jsx)(h.Textarea,{value:c.explanation||"",onChange:a=>N(c.id,{explanation:a.target.value}),placeholder:"Why is this the correct answer?",rows:2,className:"mt-1"})]})]})]})},c.id)),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:K.map(c=>(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>((b="mcq")=>{let c=function(a="mcq"){return{id:J(),type:a,question:"",options:"mcq"===a?["","","",""]:void 0,correctAnswer:"truefalse"===a?"True":"",points:1,explanation:""}}(b);d([...a,c]),p(a=>new Set(a).add(c.id))})(c.value),className:"gap-1 text-xs",children:[(0,b.jsx)(A.Plus,{className:"h-3 w-3"})," ",c.label]},c.value))})]})}function M({params:a}){let n=(0,d.useRouter)(),[r,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)("questions"),[I,J]=(0,c.useState)({title:"",description:"",type:"graded",timeLimit:"",allowedAttempts:1,shuffleQuestions:!1,shuffleOptions:!1,showCorrectAnswers:"after_attempt",passingScore:"",tags:[],startDate:"",dueDate:""}),[K,M]=(0,c.useState)([]);(0,c.useEffect)(()=>{a.then(a=>z(a.id))},[a]);let P=(0,c.useCallback)(async()=>{if(r)try{let a=await fetch(`/api/tutor/quizzes/${r}`);if(a.ok){let b=(await a.json()).quiz;B(b),M(b.questions),J({title:b.title,description:b.description||"",type:b.type,timeLimit:b.timeLimit?.toString()||"",allowedAttempts:b.allowedAttempts,shuffleQuestions:b.shuffleQuestions,shuffleOptions:b.shuffleOptions,showCorrectAnswers:b.showCorrectAnswers,passingScore:b.passingScore?.toString()||"",tags:b.tags||[],startDate:b.startDate?new Date(b.startDate).toISOString().slice(0,16):"",dueDate:b.dueDate?new Date(b.dueDate).toISOString().slice(0,16):""})}else o.toast.error("Failed to load quiz")}catch(a){o.toast.error("An error occurred")}finally{D(!1)}},[r]);(0,c.useEffect)(()=>{P()},[P]);let Q=async()=>{if(r){F(!0);try{let a={...I,timeLimit:I.timeLimit?parseInt(I.timeLimit):null,passingScore:I.passingScore?parseInt(I.passingScore):null,questions:K,startDate:I.startDate||null,dueDate:I.dueDate||null};(await fetch(`/api/tutor/quizzes/${r}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?o.toast.success("Quiz saved"):o.toast.error("Failed to save quiz")}catch(a){o.toast.error("An error occurred")}finally{F(!1)}}},R=async()=>{if(r){if(0===K.length)return void o.toast.error("Add at least one question before publishing");try{(await fetch(`/api/tutor/quizzes/${r}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"published"})})).ok?(o.toast.success("Quiz published"),P()):o.toast.error("Failed to publish quiz")}catch(a){o.toast.error("An error occurred")}}};if(C)return(0,b.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,b.jsx)(y.Loader2,{className:"w-8 h-8 animate-spin"})});if(!A)return(0,b.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,b.jsx)("p",{children:"Quiz not found"})});let S=K.reduce((a,b)=>a+(b.points||1),0);return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white border-b sticky top-0 z-10",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>n.push("/tutor/quizzes"),children:(0,b.jsx)(p.ArrowLeft,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:I.title||"Untitled Quiz"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(j.Badge,{variant:"published"===A.status?"default":"secondary",children:A.status}),(0,b.jsxs)("span",{children:[K.length," questions"]}),(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:[S," points"]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",onClick:()=>{window.open(`/tutor/quizzes/${r}/preview`,"_blank")},children:[(0,b.jsx)(x.Eye,{className:"w-4 h-4 mr-2"}),"Preview"]}),(0,b.jsxs)(e.Button,{variant:"outline",onClick:Q,disabled:E,children:[E?(0,b.jsx)(y.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}):(0,b.jsx)(q.Save,{className:"w-4 h-4 mr-2"}),"Save"]}),"draft"===A.status&&(0,b.jsxs)(e.Button,{onClick:R,children:[(0,b.jsx)(s.Play,{className:"w-4 h-4 mr-2"}),"Publish"]})]})]})})}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,b.jsxs)(l.Tabs,{value:G,onValueChange:H,children:[(0,b.jsxs)(l.TabsList,{className:"mb-6",children:[(0,b.jsxs)(l.TabsTrigger,{value:"questions",children:[(0,b.jsx)(v.FileQuestion,{className:"w-4 h-4 mr-2"}),"Questions"]}),(0,b.jsxs)(l.TabsTrigger,{value:"settings",children:[(0,b.jsx)(u.Settings,{className:"w-4 h-4 mr-2"}),"Settings"]}),(0,b.jsxs)(l.TabsTrigger,{value:"assign",children:[(0,b.jsx)(t.Users,{className:"w-4 h-4 mr-2"}),"Assign"]}),(0,b.jsxs)(l.TabsTrigger,{value:"analytics",children:[(0,b.jsx)(w.BarChart3,{className:"w-4 h-4 mr-2"}),"Analytics"]})]}),(0,b.jsx)(l.TabsContent,{value:"questions",className:"space-y-6",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Quiz Questions"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(L,{questions:K,onChange:M,compact:!1})})]})}),(0,b.jsx)(l.TabsContent,{value:"settings",className:"space-y-6",children:(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Basic Information"})}),(0,b.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Quiz Title"}),(0,b.jsx)(f.Input,{value:I.title,onChange:a=>J(b=>({...b,title:a.target.value})),placeholder:"Enter quiz title"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Description"}),(0,b.jsx)(h.Textarea,{value:I.description,onChange:a=>J(b=>({...b,description:a.target.value})),placeholder:"Describe what this quiz covers...",rows:3})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Quiz Type"}),(0,b.jsxs)(k.Select,{value:I.type,onValueChange:a=>J(b=>({...b,type:a})),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"practice",children:"Practice"}),(0,b.jsx)(k.SelectItem,{value:"graded",children:"Graded"}),(0,b.jsx)(k.SelectItem,{value:"diagnostic",children:"Diagnostic"}),(0,b.jsx)(k.SelectItem,{value:"survey",children:"Survey"})]})]})]})]})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Quiz Options"})}),(0,b.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Time Limit (minutes)"}),(0,b.jsx)(f.Input,{type:"number",min:1,value:I.timeLimit,onChange:a=>J(b=>({...b,timeLimit:a.target.value})),placeholder:"No limit"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Allowed Attempts"}),(0,b.jsx)(f.Input,{type:"number",min:1,value:I.allowedAttempts,onChange:a=>J(b=>({...b,allowedAttempts:parseInt(a.target.value)||1}))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Passing Score (%)"}),(0,b.jsx)(f.Input,{type:"number",min:0,max:100,value:I.passingScore,onChange:a=>J(b=>({...b,passingScore:a.target.value})),placeholder:"No passing score"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Checkbox,{checked:I.shuffleQuestions,onCheckedChange:a=>J(b=>({...b,shuffleQuestions:a}))}),(0,b.jsx)(g.Label,{children:"Shuffle questions for each student"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Checkbox,{checked:I.shuffleOptions,onCheckedChange:a=>J(b=>({...b,shuffleOptions:a}))}),(0,b.jsx)(g.Label,{children:"Shuffle answer options"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"When to show correct answers"}),(0,b.jsxs)(k.Select,{value:I.showCorrectAnswers,onValueChange:a=>J(b=>({...b,showCorrectAnswers:a})),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"never",children:"Never"}),(0,b.jsx)(k.SelectItem,{value:"immediately",children:"Immediately after attempt"}),(0,b.jsx)(k.SelectItem,{value:"after_attempt",children:"After attempt is graded"}),(0,b.jsx)(k.SelectItem,{value:"after_due_date",children:"After due date"})]})]})]})]})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Scheduling"})}),(0,b.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Start Date (optional)"}),(0,b.jsx)(f.Input,{type:"datetime-local",value:I.startDate,onChange:a=>J(b=>({...b,startDate:a.target.value}))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Due Date (optional)"}),(0,b.jsx)(f.Input,{type:"datetime-local",value:I.dueDate,onChange:a=>J(b=>({...b,dueDate:a.target.value}))})]})]})]})]})}),(0,b.jsx)(l.TabsContent,{value:"assign",children:(0,b.jsx)(N,{quizId:r})}),(0,b.jsx)(l.TabsContent,{value:"analytics",children:(0,b.jsx)(O,{quizId:r})})]})})]})}function N({quizId:a}){let[d,h]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[p,q]=(0,c.useState)("all"),[s,u]=(0,c.useState)(""),v=(0,c.useCallback)(async()=>{try{let b=await fetch(`/api/tutor/quizzes/${a}/assign`);if(b.ok){let a=await b.json();h(a.assignments)}}catch(a){console.error("Failed to load assignments")}finally{m(!1)}},[a]);(0,c.useEffect)(()=>{v()},[v]);let w=async()=>{try{(await fetch(`/api/tutor/quizzes/${a}/assign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignedToType:p,assignedToAll:"all"===p,dueDate:s||null})})).ok?(o.toast.success("Quiz assigned"),v()):o.toast.error("Failed to assign quiz")}catch(a){o.toast.error("An error occurred")}};return l?(0,b.jsx)("div",{children:"Loading..."}):(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Assign Quiz"})}),(0,b.jsxs)(i.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Assign To"}),(0,b.jsxs)(k.Select,{value:p,onValueChange:a=>q(a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"all",children:"All Students"}),(0,b.jsx)(k.SelectItem,{value:"group",children:"Specific Group"}),(0,b.jsx)(k.SelectItem,{value:"student",children:"Specific Student"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Due Date (optional)"}),(0,b.jsx)(f.Input,{type:"datetime-local",value:s,onChange:a=>u(a.target.value)})]}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsxs)(e.Button,{onClick:w,className:"w-full",children:[(0,b.jsx)(t.Users,{className:"w-4 h-4 mr-2"}),"Assign Quiz"]})})]}),(0,b.jsx)(n.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium mb-4",children:"Active Assignments"}),0===d.length?(0,b.jsx)("p",{className:"text-muted-foreground",children:"No active assignments"}):(0,b.jsx)("div",{className:"space-y-2",children:d.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Badge,{variant:"outline",children:a.assignedToType}),(0,b.jsxs)("span",{className:"ml-2 text-sm",children:["Assigned ",new Date(a.assignedAt).toLocaleDateString()]}),a.dueDate&&(0,b.jsxs)("span",{className:"ml-2 text-sm text-muted-foreground",children:["Due ",new Date(a.dueDate).toLocaleDateString()]})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(r.Trash2,{className:"w-4 h-4 text-destructive"})})]},a.id))})]})]})]})}function O({quizId:a}){let[d,e]=(0,c.useState)(null),[f,g]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{(async()=>{try{let b=await fetch(`/api/tutor/quizzes/${a}/analytics`);if(b.ok){let a=await b.json();e(a.analytics)}}catch(a){console.error("Failed to load analytics")}finally{g(!1)}})()},[a]),f)?(0,b.jsx)("div",{children:"Loading analytics..."}):d?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsx)(i.Card,{children:(0,b.jsxs)(i.CardContent,{className:"pt-6",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:d.attemptsCount}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Attempts"})]})}),(0,b.jsx)(i.Card,{children:(0,b.jsxs)(i.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[d.averageScore,"%"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Average Score"})]})}),(0,b.jsx)(i.Card,{children:(0,b.jsxs)(i.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[d.completionRate,"%"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Completion Rate"})]})}),(0,b.jsx)(i.Card,{children:(0,b.jsxs)(i.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[Math.floor(d.averageTimeSpent/60),"m"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg. Time Spent"})]})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Score Distribution"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:Object.entries(d.scoreDistribution).map(([a,c])=>{let e=Math.round(c/(d.attemptsCount||1)*100);return(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"w-24 text-sm",children:[a.replace("-"," - "),"%"]}),(0,b.jsx)("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${e}%`}})}),(0,b.jsx)("div",{className:"w-16 text-right text-sm",children:c})]},a)})})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Question Performance"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:d.questionAnalytics.map((a,c)=>(0,b.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("span",{className:"font-medium",children:["Q",c+1,":"]}),(0,b.jsx)("span",{className:"ml-2",children:a.questionText})]}),(0,b.jsxs)(j.Badge,{variant:a.difficultyIndex>.7?"default":a.difficultyIndex>.4?"secondary":"destructive",children:[a.correctCount,"/",a.correctCount+a.incorrectCount+a.partialCount," correct"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Avg Score: ",a.averageScore.toFixed(1)]}),(0,b.jsxs)("span",{children:["Difficulty: ",(100*a.difficultyIndex).toFixed(0),"%"]})]})]},a.questionId))})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Student Performance"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:d.studentPerformance.slice(0,10).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium",children:a.studentName}),(0,b.jsxs)("span",{className:"ml-2 text-sm text-muted-foreground",children:[a.attemptCount," attempt",1!==a.attemptCount?"s":""]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"text-sm",children:["Best: ",(0,b.jsxs)("span",{className:"font-medium",children:[a.bestScore,"%"]})]}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Avg: ",a.averageScore,"%"]})]})]},a.studentId))})})]})]}):(0,b.jsx)("div",{children:"No analytics available"})}a.s(["default",()=>M],658123)}];

//# debugId=d249653b-2e04-85ed-9299-5f4c565ec231
//# sourceMappingURL=b1c00_TutorMekimi_tutorme-app_src_app_%5Blocale%5D_tutor_quizzes_%5Bid%5D_page_tsx_4b3e393f._.js.map