;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f94f5ea3-de6f-1190-e3aa-2efff24996fd")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,669750,e=>{"use strict";var s=e.i(251474),t=e.i(800592),a=e.i(536105),l=e.i(151651),i=e.i(196415),r=e.i(870368),n=e.i(587604),c=e.i(785784),d=e.i(674339),o=e.i(835855),m=e.i(598320),x=e.i(504913),h=e.i(264066),u=e.i(212739),g=e.i(596979),j=e.i(409455),p=e.i(960833),f=e.i(486258),N=e.i(414009),b=e.i(129340),v=e.i(359364),w=e.i(10313),y=e.i(319780),S=e.i(800103),C=e.i(146498),T=e.i(225702),k=e.i(942152),P=e.i(302883),E=e.i(239141),I=e.i(661179),A=e.i(591768),L=e.i(59235),M=e.i(505595),O=e.i(74043),B=e.i(874191),D=e.i(667957),R=e.i(819550),G=e.i(390553);function z({curriculum:e,currentLessonId:a,onSelectLesson:l,compact:i=!1,collapsed:n=!1,onToggleCollapse:o}){let[m,x]=(0,t.useState)(new Set);(0,t.useEffect)(()=>{if(e.modules.length>0){for(let s of e.modules)if(s.lessons.some(e=>!e.progress||"COMPLETED"!==e.progress.status)){x(new Set([s.id]));break}}},[e.modules]);let h=e.modules.reduce((e,s)=>e+s.lessons.length,0),u=e.modules.reduce((e,s)=>e+s.lessons.filter(e=>e.progress?.status==="COMPLETED").length,0),g=h>0?u/h*100:0;return n?(0,s.jsxs)("div",{className:"w-16 flex flex-col items-center py-3",children:[(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:o,className:"mb-2",children:(0,s.jsx)(D.PanelLeft,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"w-8 h-px bg-gray-200 my-2"}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-100 to-blue-100 flex items-center justify-center mb-2",children:(0,s.jsx)(N.GraduationCap,{className:"w-5 h-5 text-purple-600"})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("span",{className:"text-xs font-bold text-purple-600",children:[Math.round(g),"%"]})}),(0,s.jsx)("div",{className:"w-8 h-px bg-gray-200 my-2"}),(0,s.jsx)("div",{className:"flex flex-col items-center gap-1",children:e.modules.slice(0,4).map((e,t)=>(0,s.jsx)("div",{className:(0,G.cn)("w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium",e.lessons.some(e=>e.progress?.status==="COMPLETED")?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),title:e.title,children:t+1},e.id))})]}):i?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"p-3 bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(N.GraduationCap,{className:"w-5 h-5 text-purple-600"}),(0,s.jsx)("span",{className:"font-medium text-sm",children:e.name})]}),(0,s.jsx)(A.Progress,{value:g,className:"mt-2 h-1.5"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[u,"/",h," lessons completed"]})]}),(0,s.jsx)("div",{className:"space-y-1",children:e.modules.slice(0,2).map(e=>(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-gray-700 truncate",children:e.title}),(0,s.jsx)("div",{className:"flex gap-1 mt-1",children:e.skills.slice(0,2).map(e=>(0,s.jsx)(c.Badge,{variant:"secondary",className:"text-xs capitalize",children:e},e))})]},e.id))})]}):(0,s.jsxs)("div",{className:"h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"p-4 border-b bg-gradient-to-br from-purple-50 to-blue-50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(N.GraduationCap,{className:"w-5 h-5 text-purple-600"}),(0,s.jsx)("h3",{className:"font-semibold",children:e.name})]}),o&&(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:o,children:(0,s.jsx)(R.PanelLeftClose,{className:"w-4 h-4"})})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Progress"}),(0,s.jsxs)("span",{className:"font-medium",children:[Math.round(g),"%"]})]}),(0,s.jsx)(A.Progress,{value:g,className:"h-2"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[u," of ",h," lessons completed"]})]})]}),(0,s.jsx)(d.ScrollArea,{className:"flex-1",children:(0,s.jsx)("div",{className:"p-2 space-y-1",children:e.modules.map((e,t)=>{let i=m.has(e.id),r=e.lessons.filter(e=>e.progress?.status==="COMPLETED").length;return(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>{var s;return s=e.id,void x(e=>{let t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})},className:"w-full p-3 flex items-center gap-2 hover:bg-gray-50 transition-colors text-left",children:[i?(0,s.jsx)(L.ChevronDown,{className:"w-4 h-4 text-gray-400"}):(0,s.jsx)(S.ChevronRight,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("p",{className:"font-medium text-sm truncate",children:["Module ",t+1,": ",e.title]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[r,"/",e.lessons.length," lessons â€¢ ",e.estimatedHours,"h"]})]})]}),i&&(0,s.jsx)("div",{className:"border-t bg-gray-50/50",children:e.lessons.map(t=>(0,s.jsxs)("button",{onClick:()=>l?.(t,e),className:`w-full p-3 flex items-start gap-2 text-left hover:bg-white transition-colors ${a===t.id?"bg-blue-50 border-l-2 border-blue-500":""}`,children:[t.progress?.status==="COMPLETED"?(0,s.jsx)(M.CheckCircle,{className:"w-4 h-4 text-green-500"}):t.progress?.status==="IN_PROGRESS"?(0,s.jsx)(B.PlayCircle,{className:"w-4 h-4 text-blue-500"}):(0,s.jsx)(O.Circle,{className:"w-4 h-4 text-gray-300"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm truncate",children:t.title}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:[t.duration," min"]}),(0,s.jsx)(c.Badge,{className:`text-xs ${(e=>{switch(e){case"easy":return"bg-green-100 text-green-700";case"medium":return"bg-yellow-100 text-yellow-700";case"hard":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}})(t.difficulty)}`,children:t.difficulty})]})]})]},t.id))})]},e.id)})})})]})}var U=e.i(156155),$=e.i(949156),H=e.i(255114),_=e.i(619062),F=e.i(755142),W=e.i(545061),V=e.i(855437),K=e.i(775382),q=e.i(470322);function J({className:e,isListening:a=!1,transcriptions:l=[],onStartGame:n,currentActivity:o="idle",collapsed:m=!1,onToggleCollapse:x,collapseDirection:h="left"}){let[u,g]=(0,t.useState)("demo"),[j,f]=(0,t.useState)(null),[N,b]=(0,t.useState)(0);return m?(0,s.jsxs)(i.Card,{className:(0,G.cn)("w-16 flex flex-col items-center py-3",e),children:[(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:x,className:"mb-2",children:(0,s.jsx)(K.PanelRight,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"w-8 h-px bg-gray-200 my-2"}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 py-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:(0,s.jsx)(w.Zap,{className:"w-4 h-4 text-green-600"})}),(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center",children:(0,s.jsx)($.Gamepad2,{className:"w-4 h-4 text-purple-600"})}),(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:(0,s.jsx)(H.Presentation,{className:"w-4 h-4 text-blue-600"})})]})]}):(0,s.jsxs)(i.Card,{className:(0,G.cn)("h-full flex flex-col",e),children:[(0,s.jsx)(i.CardHeader,{className:"pb-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(i.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(F.Sparkles,{className:"w-4 h-4 text-purple-500"}),"AI Learning Space"]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[a&&(0,s.jsxs)(c.Badge,{variant:"default",className:"bg-red-500 animate-pulse mr-1",children:[(0,s.jsx)(p.Mic,{className:"w-3 h-3 mr-1"}),"Listening"]}),x&&(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:x,children:"right"===h?(0,s.jsx)(q.PanelRightClose,{className:"w-4 h-4"}):(0,s.jsx)(R.PanelLeftClose,{className:"w-4 h-4"})})]})]})}),(0,s.jsxs)(U.Tabs,{value:u,onValueChange:g,className:"flex-1 flex flex-col",children:[(0,s.jsxs)(U.TabsList,{className:"grid w-full grid-cols-3 mx-4 mb-2",children:[(0,s.jsxs)(U.TabsTrigger,{value:"demo",className:"text-xs",children:[(0,s.jsx)(H.Presentation,{className:"w-3 h-3 mr-1"}),"Demo"]}),(0,s.jsxs)(U.TabsTrigger,{value:"words",className:"text-xs",children:[(0,s.jsx)(_.Type,{className:"w-3 h-3 mr-1"}),"Words"]}),(0,s.jsxs)(U.TabsTrigger,{value:"games",className:"text-xs",children:[(0,s.jsx)($.Gamepad2,{className:"w-3 h-3 mr-1"}),"Games"]})]}),(0,s.jsx)(i.CardContent,{className:"flex-1 p-4 pt-0",children:(0,s.jsxs)(d.ScrollArea,{className:"h-[calc(100vh-350px)]",children:[(0,s.jsx)(U.TabsContent,{value:"demo",className:"mt-0",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg",children:[(0,s.jsxs)("h4",{className:"font-medium text-sm mb-3 flex items-center gap-2",children:[(0,s.jsx)(H.Presentation,{className:"w-4 h-4 text-blue-500"}),"Essay Structure"]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm font-bold",children:"1"}),(0,s.jsxs)("div",{className:"flex-1 bg-white p-2 rounded border-l-4 border-blue-500",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Introduction"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Hook + Background + Thesis"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center text-sm font-bold",children:"2"}),(0,s.jsxs)("div",{className:"flex-1 bg-white p-2 rounded border-l-4 border-green-500",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Body Paragraph 1"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Topic sentence + Evidence + Analysis"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center text-sm font-bold",children:"3"}),(0,s.jsxs)("div",{className:"flex-1 bg-white p-2 rounded border-l-4 border-green-500",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Body Paragraph 2"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Topic sentence + Evidence + Analysis"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center text-sm font-bold",children:"4"}),(0,s.jsxs)("div",{className:"flex-1 bg-white p-2 rounded border-l-4 border-purple-500",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Conclusion"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Restate thesis + Summarize + Final thought"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[(0,s.jsx)("h5",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Thesis Statement"}),(0,s.jsx)("p",{className:"text-xs text-yellow-700",children:"The main argument of your essay"})]}),(0,s.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[(0,s.jsx)("h5",{className:"text-sm font-medium text-green-800 mb-1",children:"Topic Sentence"}),(0,s.jsx)("p",{className:"text-xs text-green-700",children:"Introduces each paragraph's focus"})]})]})]})}),(0,s.jsx)(U.TabsContent,{value:"words",className:"mt-0",children:0!==l.length||a?(0,s.jsxs)("div",{className:"space-y-3",children:[a&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-blue-600 mb-4",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Listening..."})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:l.map(e=>(0,s.jsxs)("div",{className:"bg-white p-3 rounded-lg border shadow-sm hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsx)("span",{className:"text-lg font-medium text-gray-800",children:e.word}),(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",children:(0,s.jsx)(W.Volume2,{className:"w-3 h-3"})})]}),e.pronunciation&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["/",e.pronunciation,"/"]}),e.definition&&(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.definition})]},e.id))})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-48 text-gray-400",children:[(0,s.jsx)(p.Mic,{className:"w-12 h-12 mb-3 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"Start speaking to see key words"}),(0,s.jsx)("p",{className:"text-xs mt-1",children:"Important vocabulary will appear here"})]})}),(0,s.jsx)(U.TabsContent,{value:"games",className:"mt-0",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{id:"vocab-match",name:"Vocabulary Match",icon:"ðŸŽ¯",difficulty:"Easy"},{id:"grammar-fix",name:"Grammar Fix",icon:"ðŸ”§",difficulty:"Medium"},{id:"essay-race",name:"Essay Race",icon:"â±ï¸",difficulty:"Hard"},{id:"word-scramble",name:"Word Scramble",icon:"ðŸ§©",difficulty:"Easy"}].map(e=>(0,s.jsxs)("button",{onClick:()=>n?.(e.id),className:"p-4 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg border hover:border-blue-300 hover:shadow-md transition-all text-left group",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:e.icon}),(0,s.jsx)("h4",{className:"font-medium text-sm group-hover:text-blue-600",children:e.name}),(0,s.jsx)(c.Badge,{variant:"secondary",className:"mt-1 text-xs",children:e.difficulty})]},e.id))}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-lg border",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(V.Award,{className:"w-5 h-5 text-yellow-600"}),(0,s.jsx)("span",{className:"font-medium",children:"Your Score"})]}),(0,s.jsx)("span",{className:"text-2xl font-bold text-yellow-700",children:N})]})})]})})]})})]})]})}var X=e.i(374350),Y=e.i(894202);function Z({currentMode:e,currentMission:t,onModeChange:a,className:l}){return(0,s.jsxs)("div",{className:(0,G.cn)("flex items-center gap-2",l),children:[(0,s.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,s.jsxs)("button",{onClick:()=>a("free"),className:(0,G.cn)("flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all","free"===e?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,s.jsx)(Y.MessageCircle,{className:"w-4 h-4"}),"Free Chat"]}),(0,s.jsxs)("button",{onClick:()=>a("mission"),className:(0,G.cn)("flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all","mission"===e?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,s.jsx)(b.Target,{className:"w-4 h-4"}),"Mission Mode"]})]}),"mission"===e&&t&&(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm",children:[(0,s.jsx)("span",{children:t.emoji}),(0,s.jsx)("span",{className:"font-medium truncate max-w-[150px]",children:t.title}),(0,s.jsx)(S.ChevronRight,{className:"w-4 h-4"})]})]})}var Q=e.i(825627),ee=e.i(25125);function es({worlds:e,currentWorldId:a,currentMissionId:l,onSelectMission:i,className:r}){let[n,c]=(0,t.useState)(a?[a]:[]);return(0,s.jsxs)("div",{className:(0,G.cn)("bg-white rounded-xl border flex flex-col h-full",r),children:[(0,s.jsxs)("div",{className:"p-4 border-b",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-800",children:"Learning Worlds"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Choose a mission to start learning"})]}),(0,s.jsx)(d.ScrollArea,{className:"flex-1",children:(0,s.jsx)("div",{className:"p-2 space-y-1",children:e.map(e=>{let t=n.includes(e.id),a=e.missions.filter(e=>e.userProgress?.status==="COMPLETED").length;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{onClick:()=>{var s;return e.isUnlocked&&(s=e.id,void c(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]))},disabled:!e.isUnlocked,className:(0,G.cn)("w-full flex items-center gap-2 p-2 rounded-lg transition-colors",e.isUnlocked?"hover:bg-gray-100":"opacity-50 cursor-not-allowed"),children:[(0,s.jsx)("span",{className:"text-xl",children:e.emoji}),(0,s.jsxs)("div",{className:"flex-1 text-left",children:[(0,s.jsx)("p",{className:(0,G.cn)("font-medium text-sm",e.isUnlocked?"text-gray-800":"text-gray-500"),children:e.name}),e.isUnlocked&&(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[a,"/",e.missions.length," completed"]})]}),e.isUnlocked?(0,s.jsx)(S.ChevronRight,{className:(0,G.cn)("w-4 h-4 text-gray-400 transition-transform",t&&"rotate-90")}):(0,s.jsx)(Q.Lock,{className:"w-4 h-4 text-gray-400"})]}),t&&e.isUnlocked&&(0,s.jsx)("div",{className:"ml-6 mt-1 space-y-1",children:e.missions.map(t=>(0,s.jsx)(et,{mission:t,isActive:l===t.id,onClick:()=>i(e.id,t)},t.id))})]},e.id)})})})]})}function et({mission:e,isActive:t,onClick:a}){let l=e.userProgress?.status||"NOT_STARTED",i="COMPLETED"===l?ee.CheckCircle2:"IN_PROGRESS"===l?B.PlayCircle:O.Circle;return(0,s.jsxs)("button",{onClick:a,className:(0,G.cn)("w-full flex items-center gap-2 p-2 rounded-lg text-left transition-colors",t?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"),children:[(0,s.jsx)(i,{className:(0,G.cn)("w-4 h-4 flex-shrink-0","COMPLETED"===l&&"text-green-500","IN_PROGRESS"===l&&"text-blue-500","NOT_STARTED"===l&&"text-gray-400")}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:(0,G.cn)("text-sm truncate",t?"font-medium text-blue-700":"text-gray-700"),children:e.title}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,s.jsxs)("span",{children:[e.estimatedTime," min"]}),(0,s.jsx)("span",{children:"â€¢"}),(0,s.jsxs)("span",{children:["+",e.xpReward," XP"]})]})]})]})}var ea=e.i(540713),el=e.i(530661);let ei=(0,C.default)(()=>e.A(646460).then(e=>e.AIAvatar),{loadableGenerated:{modules:[609341]},ssr:!1});function er(){let e=(0,a.useRouter)(),C=(0,t.useRef)(null),[A,L]=(0,t.useState)([]),[M,O]=(0,t.useState)(""),[B,D]=(0,t.useState)(!1),[R,$]=(0,t.useState)(!1),[H,_]=(0,t.useState)(null),[F,W]=(0,t.useState)({remaining:5,total:5}),[V,K]=(0,t.useState)([]),[q,Y]=(0,t.useState)(),[Q,ee]=(0,t.useState)(!1),[et,er]=(0,t.useState)(!1),[en,ec]=(0,t.useState)(!1),[ed,eo]=(0,t.useState)(!1),[em,ex]=(0,t.useState)(!1),[eh,eu]=(0,t.useState)(null),[eg,ej]=(0,t.useState)(),[ep,ef]=(0,t.useState)([]),[eN,eb]=(0,t.useState)(!1),[ev,ew]=(0,t.useState)("friendly_mentor"),[ey,eS]=(0,t.useState)("free"),[eC,eT]=(0,t.useState)(null),[ek,eP]=(0,t.useState)([]),[eE,eI]=(0,t.useState)(null),[eA,eL]=(0,t.useState)(72),[eM,eO]=(0,t.useState)(!1),[eB,eD]=(0,t.useState)(!1),[eR,eG]=(0,t.useState)({amount:0,reason:""});(0,t.useEffect)(()=>{ez()},[]),(0,t.useEffect)(()=>{C.current?.scrollIntoView({behavior:"smooth"})},[A]);let ez=async()=>{try{let s=await fetch("/api/ai-tutor/enrollments"),t=await s.json(),a=t.enrollments?.find(e=>"english"===e.subject);if(!a){m.toast.error("Not enrolled in English tutor"),e.push("/student/ai-tutor/browse");return}_(a),a.avatarPersonality&&ew(a.avatarPersonality),a.curriculumId&&await eH();let[l,i,r]=await Promise.all([fetch("/api/ai-tutor/usage"),fetch("/api/gamification"),fetch("/api/gamification/worlds")]),n=await l.json();W({remaining:n.remainingMessages,total:n.remainingMessages+(n.messagesSent||0)});let c=await i.json();c.success&&(eI(c.data),eL(c.data.skills.confidence));let d=await r.json();d.success&&eP(d.data);let o=await fetch(`/api/ai-tutor/sessions?enrollmentId=${a.id}`),x=await o.json();if(x.sessions?.length>0){let e=x.sessions[0];L(e.messages||[]);let s=[];e.messages?.forEach(e=>{if("assistant"===e.role){let t=(0,P.extractWhiteboardItems)(e.content);s.push(...t)}}),K(s)}}catch(e){m.toast.error("Failed to load tutor session")}},eU=async()=>{if(!M.trim()||!H)return;if(0===F.remaining)return void m.toast.error("Daily message limit reached. Upgrade for more.");let e={id:Date.now().toString(),role:"user",content:M,timestamp:new Date().toISOString()};L(s=>[...s,e]),O(""),D(!0),$(!0);try{let e=await fetch("/api/ai-tutor/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:M,personality:ev,missionId:eC?.id,teachingMode:"mission"===ey?"socratic":"standard",chatHistory:A.slice(-5).map(e=>({role:e.role,content:e.content}))})}),s=await e.json();if(!e.ok)throw s.upgradeRequired&&m.toast.error("Daily limit reached. Upgrade for unlimited messages."),Error(s.error);let t={id:(Date.now()+1).toString(),role:"assistant",content:s.data.response,timestamp:new Date().toISOString(),hintType:s.data.hintType,relevantConcepts:s.data.relevantConcepts};L(e=>[...e,t]),s.data.xpEarned&&(eG({amount:s.data.xpEarned,reason:"AI Conversation"}),eO(!0)),s.data.leveledUp&&setTimeout(()=>eD(!0),2e3),s.data.gamification&&(eI(s.data.gamification),eL(s.data.gamification.skills.confidence)),W(e=>({...e,remaining:e.remaining-1}));let a=(0,P.extractWhiteboardItems)(s.data.response);a.length>0&&K(e=>[...e,...a])}catch(e){m.toast.error("Failed to get response")}finally{D(!1),$(!1)}},e$=e=>{Y(e);let s=E.ENGLISH_TOPICS.find(s=>s.id===e);s&&O(`I'd like to learn about ${s.name.toLowerCase()}. ${s.description}`)},eH=async()=>{try{let e=await fetch("/api/curriculum"),s=await e.json();if(s.curriculum&&(eu(s.curriculum),s.curriculum.modules)){for(let e of s.curriculum.modules)for(let s of e.lessons)if(s.progress?.status!=="COMPLETED")return void ej(s.id)}}catch(e){console.error("Failed to load curriculum:",e)}},e_=(e,s)=>{ej(e.id),O(`Let's work on "${e.title}" from ${s.title}. Can you walk me through this lesson?`),eb(!1),e.id&&eF(e.id)},eF=async e=>{try{let s=await fetch(`/api/ai-tutor/sessions?enrollmentId=${H?.id}`),t=await s.json();if(t.sessions?.length>0){let s=t.sessions[0];await fetch("/api/ai-tutor/lesson-context",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:s.id,lessonId:e})})}}catch(e){console.error("Failed to link session to lesson:",e)}},eW=e=>{switch(e){case"encouragement":return"encouraging";case"socratic":return"thinking";default:return"neutral"}};if(!H)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading English Tutor..."})]})});let eV=A.filter(e=>"assistant"===e.role).pop(),eK=eW(eV?.hintType);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,s.jsx)("header",{className:"bg-white border-b px-4 py-3 shrink-0",children:(0,s.jsxs)("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:()=>e.push("/student/ai-tutor"),children:(0,s.jsx)(j.ChevronLeft,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"font-semibold",children:"English AI Tutor"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,s.jsx)(c.Badge,{variant:"outline",children:H.englishLevel}),(0,s.jsxs)("span",{children:["Age: ",H.teachingAge]}),(0,s.jsx)("span",{children:H.voiceGender}),(0,s.jsx)("span",{children:"us"===H.voiceAccent?"ðŸ‡ºðŸ‡¸":"uk"===H.voiceAccent?"ðŸ‡¬ðŸ‡§":"ðŸ‡¦ðŸ‡º"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[eE&&(0,s.jsxs)("div",{className:"hidden md:flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-50 rounded-lg",children:[(0,s.jsx)(w.Zap,{className:"w-4 h-4 text-blue-500"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-blue-700",children:["Level ",eE.level]})]}),eE.streakDays>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-orange-50 rounded-lg",children:[(0,s.jsx)(v.Flame,{className:"w-4 h-4 text-orange-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-orange-700",children:eE.streakDays})]})]}),(0,s.jsx)(X.PersonalitySelector,{currentPersonality:ev,onSelect:ew}),(0,s.jsx)(ea.ConfidenceMeter,{isListening:et,confidenceScore:eA,className:"hidden lg:flex"}),(0,s.jsx)("div",{className:"text-right hidden sm:block",children:(0,s.jsx)("p",{className:"text-xs text-gray-500",children:-1===F.remaining?"Unlimited":`${F.remaining} left`})}),(0,s.jsxs)(o.Sheet,{open:Q,onOpenChange:ee,children:[(0,s.jsx)(o.SheetTrigger,{asChild:!0,children:(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",children:(0,s.jsx)(u.Settings,{className:"w-5 h-5"})})}),(0,s.jsxs)(o.SheetContent,{children:[(0,s.jsx)(o.SheetTitle,{children:"Preferences"}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(I.TutorPreferences,{enrollmentId:H.id,currentPreferences:{teachingAge:H.teachingAge,voiceGender:H.voiceGender,voiceAccent:H.voiceAccent,avatarStyle:H.avatarStyle},onUpdate:e=>{H&&_({...H,...e})}})})]})]})]})]})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto w-full px-4 pb-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-lg p-2 border",children:[(0,s.jsx)(Z,{currentMode:ey,currentMission:eC?{id:eC.id,title:eC.title,worldName:eC.worldName,emoji:eC.emoji}:void 0,onModeChange:eS}),"mission"===ey&&eC&&(0,s.jsxs)(c.Badge,{variant:"outline",className:"bg-blue-50 text-blue-700",children:[(0,s.jsx)(b.Target,{className:"w-3 h-3 mr-1"}),"Mission Mode"]}),(0,s.jsx)(l.default,{href:"/student/worlds",children:(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(y.Globe,{className:"w-4 h-4 mr-1"}),"Browse Worlds",(0,s.jsx)(S.ChevronRight,{className:"w-4 h-4 ml-1"})]})})]})}),(0,s.jsxs)("div",{className:"flex-1 max-w-7xl mx-auto w-full grid grid-cols-1 lg:grid-cols-4 gap-4 p-4",children:[(0,s.jsx)("div",{className:(0,G.cn)("hidden lg:block transition-all duration-300",en?"lg:w-16":"lg:col-span-1"),children:"mission"===ey&&ek.length>0?(0,s.jsx)(es,{worlds:ek,currentWorldId:eC?.worldId,currentMissionId:eC?.id,onSelectMission:(e,s)=>{eT({...s,worldId:e,worldName:ek.find(s=>s.id===e)?.name,emoji:ek.find(s=>s.id===e)?.emoji}),O(`I'd like to start the mission: ${s.title}`)},className:"h-full"}):eh?(0,s.jsx)(i.Card,{className:"h-full flex flex-col",children:(0,s.jsxs)(U.Tabs,{defaultValue:"curriculum",className:"flex-1 flex flex-col",children:[(0,s.jsxs)(U.TabsList,{className:(0,G.cn)("grid w-full mx-4 mt-4 mb-0",en?"grid-cols-1 w-10":"grid-cols-2"),children:[(0,s.jsxs)(U.TabsTrigger,{value:"curriculum",className:(0,G.cn)(en&&"px-2"),children:[(0,s.jsx)(N.GraduationCap,{className:"w-4 h-4"}),!en&&(0,s.jsx)("span",{className:"ml-1",children:"Course"})]}),!en&&(0,s.jsx)(U.TabsTrigger,{value:"topics",children:"Topics"})]}),(0,s.jsx)(U.TabsContent,{value:"curriculum",className:"flex-1 mt-0",children:(0,s.jsx)(z,{curriculum:eh,currentLessonId:eg,onSelectLesson:e_,collapsed:en,onToggleCollapse:()=>ec(!en)})}),!en&&(0,s.jsx)(U.TabsContent,{value:"topics",className:"flex-1 mt-0",children:(0,s.jsx)(E.TopicSidebar,{topics:E.ENGLISH_TOPICS,currentTopic:q,onSelectTopic:e$})})]})}):(0,s.jsx)(E.TopicSidebar,{topics:E.ENGLISH_TOPICS,currentTopic:q,onSelectTopic:e$,collapsed:en,onToggleCollapse:()=>ec(!en)})}),(0,s.jsxs)("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[(0,s.jsx)(i.Card,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)(ei,{isSpeaking:R,mood:eK,size:"md"}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Your English Tutor"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["I'm teaching you like a ",H.teachingAge,"-year-old with a ",H.voiceGender," ",H.voiceAccent," voice."]})]}),(0,s.jsxs)(o.Sheet,{children:[(0,s.jsx)(o.SheetTrigger,{asChild:!0,className:"lg:hidden mt-4",children:(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(g.Menu,{className:"w-4 h-4 mr-2"}),"Browse Topics"]})}),(0,s.jsxs)(o.SheetContent,{side:"left",className:"w-[300px] sm:w-[400px]",children:[(0,s.jsx)(o.SheetTitle,{children:eh?"Curriculum":"Topics"}),(0,s.jsx)("div",{className:"mt-4 h-full",children:eh?(0,s.jsx)(z,{curriculum:eh,currentLessonId:eg,onSelectLesson:e_}):(0,s.jsx)(E.TopicSidebar,{topics:E.ENGLISH_TOPICS,currentTopic:q,onSelectTopic:e$})})]})]})]})}),(0,s.jsx)(i.Card,{className:"flex-1 min-h-[200px] p-4",children:(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center text-gray-400",children:[(0,s.jsx)(h.Lightbulb,{className:"w-12 h-12 mb-3 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"Learning Content Area"}),(0,s.jsx)("p",{className:"text-xs mt-1",children:"Interactive lessons and exercises will appear here"})]})}),(0,s.jsxs)(i.Card,{className:"flex flex-col overflow-hidden",style:{maxHeight:"400px"},children:[(0,s.jsx)(d.ScrollArea,{className:"flex-1 p-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[A.map(e=>(0,s.jsxs)("div",{className:`flex gap-3 ${"user"===e.role?"justify-end":"justify-start"}`,children:["assistant"===e.role&&(0,s.jsx)(T.AIAvatarPlaceholder,{mood:eW(e.hintType),size:"sm"}),(0,s.jsxs)("div",{className:`max-w-[80%] rounded-lg p-3 ${"user"===e.role?"bg-blue-500 text-white":"bg-white border shadow-sm"}`,children:[(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),e.hintType&&(0,s.jsx)(c.Badge,{variant:"secondary",className:"mt-2 text-xs capitalize",children:e.hintType})]})]},e.id)),B&&(0,s.jsxs)("div",{className:"flex gap-3 justify-start",children:[(0,s.jsx)(T.AIAvatarPlaceholder,{mood:"thinking",size:"sm"}),(0,s.jsx)("div",{className:"bg-white border rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),(0,s.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce delay-100"}),(0,s.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce delay-200"})]})})]}),(0,s.jsx)("div",{ref:C})]})}),(0,s.jsxs)("div",{className:"p-4 border-t bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(r.Button,{variant:"outline",size:"icon",onClick:()=>er(!et),className:et?"text-red-500":"",children:et?(0,s.jsx)(p.Mic,{className:"w-4 h-4"}):(0,s.jsx)(f.MicOff,{className:"w-4 h-4"})}),(0,s.jsx)(n.Input,{placeholder:"Ask your English question...",value:M,onChange:e=>O(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),eU())},disabled:B||0===F.remaining,className:"flex-1"}),(0,s.jsx)(r.Button,{onClick:eU,disabled:!M.trim()||B||0===F.remaining,children:(0,s.jsx)(x.Send,{className:"w-4 h-4"})})]}),0===F.remaining&&(0,s.jsx)("p",{className:"text-sm text-orange-600 mt-2 text-center",children:"Daily message limit reached. Upgrade for unlimited messages."})]})]})]}),(0,s.jsxs)("div",{className:"hidden lg:flex flex-col gap-4 w-80",children:[(0,s.jsx)("div",{className:(0,G.cn)("transition-all duration-300 flex",ed?"justify-end":"w-full"),children:(0,s.jsx)(P.AIWhiteboard,{items:V,onClear:()=>K([]),collapsed:ed,onToggleCollapse:()=>eo(!ed),collapseDirection:"right"})}),(0,s.jsx)(k.SkillRadar,{skills:eE?.skills||null}),(0,s.jsx)("div",{className:(0,G.cn)("transition-all duration-300 flex flex-1 min-h-0",em?"justify-end":"w-full"),children:(0,s.jsx)(J,{className:(0,G.cn)("transition-all duration-300",em?"w-16":"flex-1"),collapsed:em})})]})]}),eM&&(0,s.jsx)(el.XpAnimation,{amount:eR.amount,reason:eR.reason,onComplete:()=>eO(!1)}),eB&&eE&&(0,s.jsx)(el.LevelUpAnimation,{level:eE.level,onComplete:()=>eD(!1)})]})}e.s(["default",()=>er],669750)}]);

//# debugId=f94f5ea3-de6f-1190-e3aa-2efff24996fd
//# sourceMappingURL=1afc8b953ed4bf42.js.map