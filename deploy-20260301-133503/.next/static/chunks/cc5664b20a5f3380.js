;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="01d6650a-eb85-106e-1a2a-cf42601f504e")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,196415,e=>{"use strict";var t=e.i(251474),a=e.i(800592),s=e.i(390553);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));r.displayName="Card";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));i.displayName="CardHeader";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...a}));n.displayName="CardDescription";let c=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent";let o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a}));o.displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>c,"CardDescription",()=>n,"CardFooter",()=>o,"CardHeader",()=>i,"CardTitle",()=>l])},800103,e=>{"use strict";let t=(0,e.i(879191).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],800103)},414009,e=>{"use strict";let t=(0,e.i(879191).default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);e.s(["GraduationCap",()=>t],414009)},715042,e=>{"use strict";let t=(0,e.i(879191).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],715042)},505595,e=>{"use strict";let t=(0,e.i(879191).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],505595)},36438,e=>{"use strict";let t=(0,e.i(879191).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>t],36438)},825627,e=>{"use strict";let t=(0,e.i(879191).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],825627)},504913,e=>{"use strict";let t=(0,e.i(879191).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],504913)},974584,e=>{"use strict";let t=(0,e.i(879191).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],974584)},913674,e=>{"use strict";var t=e.i(251474),a=e.i(800592),s=e.i(518696),r=e.i(894878),i=e.i(67343),l=e.i(307003),n=e.i(62853);e.i(312515);var c=Symbol("radix.slottable");function o(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}var d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{var i,l;let n,c,d,u=(l=i=`Primitive.${s}`,(n=a.forwardRef((e,t)=>{let{children:s,...i}=e;if(a.isValidElement(s)){var l;let e,n,c=(l=s,(n=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(n=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),o=function(e,t){let a={...t};for(let s in t){let r=e[s],i=t[s];/^on[A-Z]/.test(s)?r&&i?a[s]=(...e)=>{let t=i(...e);return r(...e),t}:r&&(a[s]=r):"style"===s?a[s]={...r,...i}:"className"===s&&(a[s]=[r,i].filter(Boolean).join(" "))}return{...e,...a}}(i,s.props);return s.type!==a.Fragment&&(o.ref=t?(0,r.composeRefs)(t,c):c),a.cloneElement(s,o)}return a.Children.count(s)>1?a.Children.only(null):null})).displayName=`${l}.SlotClone`,c=n,(d=a.forwardRef((e,s)=>{let{children:r,...i}=e,l=a.Children.toArray(r),n=l.find(o);if(n){let e=n.props.children,r=l.map(t=>t!==n?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,t.jsx)(c,{...i,ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,t.jsx)(c,{...i,ref:s,children:r})})).displayName=`${i}.Slot`,d),h=a.forwardRef((e,a)=>{let{asChild:r,...i}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(r?u:s,{...i,ref:a})});return h.displayName=`Primitive.${s}`,{...e,[s]:h}},{}),u="Switch",[h,p]=function(e,s=[]){let r=[],i=()=>{let t=r.map(e=>a.createContext(e));return function(s){let r=s?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...s,[e]:r}}),[s,r])}};return i.scopeName=e,[function(s,i){let l=a.createContext(i),n=r.length;r=[...r,i];let c=s=>{let{scope:r,children:i,...c}=s,o=r?.[e]?.[n]||l,d=a.useMemo(()=>c,Object.values(c));return(0,t.jsx)(o.Provider,{value:d,children:i})};return c.displayName=s+"Provider",[c,function(t,r){let c=r?.[e]?.[n]||l,o=a.useContext(c);if(o)return o;if(void 0!==i)return i;throw Error(`\`${t}\` must be used within \`${s}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=s.reduce((t,{useScope:a,scopeName:s})=>{let r=a(e)[`__scope${s}`];return{...t,...r}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}(i,...s)]}(u),[m,f]=h(u),x=a.forwardRef((e,l)=>{let{__scopeSwitch:n,name:c,checked:o,defaultChecked:h,required:p,disabled:f,value:x="on",onCheckedChange:y,form:g,...w}=e,[b,k]=a.useState(null),N=(0,r.useComposedRefs)(l,e=>k(e)),C=a.useRef(!1),S=!b||g||!!b.closest("form"),[T,M]=(0,i.useControllableState)({prop:o,defaultProp:h??!1,onChange:y,caller:u});return(0,t.jsxs)(m,{scope:n,checked:T,disabled:f,children:[(0,t.jsx)(d.button,{type:"button",role:"switch","aria-checked":T,"aria-required":p,"data-state":v(T),"data-disabled":f?"":void 0,disabled:f,value:x,...w,ref:N,onClick:(0,s.composeEventHandlers)(e.onClick,e=>{M(e=>!e),S&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),S&&(0,t.jsx)(j,{control:b,bubbles:!C.current,name:c,value:x,checked:T,required:p,disabled:f,form:g,style:{transform:"translateX(-100%)"}})]})});x.displayName=u;var y="SwitchThumb",g=a.forwardRef((e,a)=>{let{__scopeSwitch:s,...r}=e,i=f(y,s);return(0,t.jsx)(d.span,{"data-state":v(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:a})});g.displayName=y;var j=a.forwardRef(({__scopeSwitch:e,control:s,checked:i,bubbles:c=!0,...o},d)=>{let u=a.useRef(null),h=(0,r.useComposedRefs)(u,d),p=(0,l.usePrevious)(i),m=(0,n.useSize)(s);return a.useEffect(()=>{let e=u.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==i&&t){let a=new Event("click",{bubbles:c});t.call(e,i),e.dispatchEvent(a)}},[p,i,c]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...o,tabIndex:-1,ref:h,style:{...o.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function v(e){return e?"checked":"unchecked"}j.displayName="SwitchBubbleInput";var w=e.i(390553);let b=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(x,{className:(0,w.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...a,ref:s,children:(0,t.jsx)(g,{className:(0,w.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));b.displayName=x.displayName,e.s(["Switch",()=>b],913674)},264066,e=>{"use strict";let t=(0,e.i(879191).default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);e.s(["Lightbulb",()=>t],264066)},949156,e=>{"use strict";let t=(0,e.i(879191).default)("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);e.s(["Gamepad2",()=>t],949156)},960833,e=>{"use strict";let t=(0,e.i(879191).default)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]);e.s(["Mic",()=>t],960833)},341566,e=>{"use strict";let t=(0,e.i(879191).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>t],341566)},740868,e=>{"use strict";let t=(0,e.i(879191).default)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);e.s(["Paperclip",()=>t],740868)},656277,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>t])},177674,519627,e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=Array(t);a<t;a++)s[a]=e[a];return s}function a(e,a){if(e){if("string"==typeof e)return t(e,a);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t(e,a):void 0}}e.s(["default",()=>t],519627),e.s(["default",()=>a],177674)},249453,e=>{"use strict";let t=(0,e.i(879191).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],249453)},702319,868568,79749,e=>{"use strict";var t=e.i(879191);let a=(0,t.default)("signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);e.s(["Signal",()=>a],702319);let s=(0,t.default)("signal-high",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}]]);e.s(["SignalHigh",()=>s],868568);let r=(0,t.default)("signal-low",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}]]);e.s(["SignalLow",()=>r],79749)},416982,e=>{"use strict";let t=(0,e.i(879191).default)("file-question-mark",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]);e.s(["FileQuestion",()=>t],416982)},213007,e=>{"use strict";let t=(0,e.i(879191).default)("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);e.s(["PenTool",()=>t],213007)},313123,e=>{"use strict";var t=e.i(251474),a=e.i(800592),s=e.i(390553);let r=a.forwardRef(({className:e,orientation:a="horizontal",decorative:r=!0,...i},l)=>(0,t.jsx)("div",{ref:l,role:r?"none":"separator","aria-orientation":r?void 0:a,className:(0,s.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...i}));r.displayName="Separator",e.s(["Separator",()=>r])},298861,e=>{"use strict";let t=(0,e.i(879191).default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["GripVertical",()=>t],298861)},354212,e=>{"use strict";async function t(e){let t=e.name.toLowerCase(),l=e.type;if("text/plain"===l||l.startsWith("text/")||t.endsWith(".txt")||t.endsWith(".md")||t.endsWith(".markdown"))return a(e);if("application/pdf"===l||t.endsWith(".pdf"))return s(e);if("application/vnd.openxmlformats-officedocument.wordprocessingml.document"===l||t.endsWith(".docx"))return r(e);if(t.endsWith(".doc"))try{return r(e)}catch{return a(e).catch(()=>"")}return l.startsWith("image/")?i(e):a(e).catch(()=>"")}function a(e){return new Promise((t,a)=>{let s=new FileReader;s.onload=()=>t(String(s.result??"")),s.onerror=()=>a(s.error),s.readAsText(e)})}async function s(t){let a=await e.A(212496);{let e=a.GlobalWorkerOptions;e&&!e.workerSrc&&(e.workerSrc="/pdf.worker.min.mjs")}let s=await t.arrayBuffer(),r=await a.getDocument({data:s}).promise,i=r.numPages,l=[];for(let e=1;e<=i;e++){let t=await r.getPage(e),a=(await t.getTextContent()).items.map(e=>e.str??"").join(" ");l.push(a)}return l.join("\n\n").trim()||""}async function r(t){let a=await e.A(746421),s=await t.arrayBuffer();return((await a.extractRawText({arrayBuffer:s})).value||"").trim()}async function i(t){let a=await e.A(174678),s=a.default??a,{data:r}=await s.recognize(t,"eng",{logger:()=>{}});return(r?.text||"").trim()}e.s(["extractTextFromFile",()=>t])},494276,e=>{"use strict";var t=e.i(251474),a=e.i(536105),s=e.i(151651),r=e.i(800592),i=e.i(870368),l=e.i(196415),n=e.i(962825),c=e.i(462423),o=e.i(819724),d=e.i(383918),u=e.i(212739),h=e.i(522379),p=e.i(712316),m=e.i(598320),f=e.i(390553),x=e.i(703205),y=e.i(725399),g=e.i(247583),j=e.i(156155),v=e.i(785784),w=e.i(755142),b=e.i(715042),k=e.i(437524),N=e.i(956008),N=N,C=e.i(850873),S=e.i(588362);function T({courseId:e}){let[a,s]=(0,r.useState)(null),[n,c]=(0,r.useState)(""),[o,u]=(0,r.useState)(""),[p,x]=(0,r.useState)(!1),[T,M]=(0,r.useState)(!1),[P,R]=(0,r.useState)(!1),[L,A]=(0,r.useState)(!1),[$,F]=(0,r.useState)(!1),[O,B]=(0,r.useState)(!1),[D,E]=(0,r.useState)("ai");(0,r.useEffect)(()=>{z()},[e]);let z=async()=>{x(!0);try{let t=await fetch(`/api/tutor/courses/${e}/pitch`,{credentials:"include"});if(t.ok){let e=await t.json();s(e.pitch),c(e.pitch||""),u(e.pitch||"")}}catch{}finally{x(!1)}},W=async()=>{M(!0);try{let t=await fetch("/api/csrf",{credentials:"include"}),a=await t.json().catch(()=>({})),r=a?.token??null,i=await fetch(`/api/tutor/courses/${e}/pitch`,{method:"POST",headers:{"Content-Type":"application/json",...r?{"X-CSRF-Token":r}:{}},credentials:"include"});if(!i.ok){let e=await i.json();throw Error(e.error||"Failed to generate pitch")}let l=await i.json();s(l.pitch),c(l.pitch),u(l.pitch),E("ai"),m.toast.success("Course pitch generated successfully!")}catch(e){m.toast.error(e instanceof Error?e.message:"Failed to generate pitch")}finally{M(!1)}},H=async()=>{if(!o.trim())return void m.toast.error("Please enter a pitch");R(!0);try{let t=await fetch("/api/csrf",{credentials:"include"}),a=await t.json().catch(()=>({})),r=a?.token??null;if(!(await fetch(`/api/tutor/courses/${e}/pitch`,{method:"PATCH",headers:{"Content-Type":"application/json",...r?{"X-CSRF-Token":r}:{}},credentials:"include",body:JSON.stringify({pitch:o})})).ok)throw Error("Failed to save");s(o),c(o),m.toast.success("Course pitch saved!")}catch{m.toast.error("Failed to save pitch")}finally{R(!1)}},I=async()=>{B(!0);try{let t=await fetch("/api/csrf",{credentials:"include"}),a=await t.json().catch(()=>({})),r=a?.token??null;if(!(await fetch(`/api/tutor/courses/${e}/pitch`,{method:"PATCH",headers:{"Content-Type":"application/json",...r?{"X-CSRF-Token":r}:{}},credentials:"include",body:JSON.stringify({pitch:n})})).ok)throw Error("Failed to save");s(n),u(n),F(!1),m.toast.success("Course pitch saved!")}catch{m.toast.error("Failed to save pitch")}finally{B(!1)}},V=async()=>{try{let t=await fetch("/api/csrf",{credentials:"include"}),a=await t.json().catch(()=>({})),r=a?.token??null;if(!(await fetch(`/api/tutor/courses/${e}/pitch`,{method:"DELETE",headers:r?{"X-CSRF-Token":r}:{},credentials:"include"})).ok)throw Error("Failed to delete");s(null),c(""),u(""),m.toast.success("Course pitch deleted")}catch{m.toast.error("Failed to delete pitch")}},_=e=>e.replace(/^## (.*$)/gim,'<h2 class="text-xl font-bold mt-6 mb-3 text-slate-900">$1</h2>').replace(/^### (.*$)/gim,'<h3 class="text-lg font-semibold mt-4 mb-2 text-slate-800">$1</h3>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/^- (.*$)/gim,'<li class="ml-4 mb-1">$1</li>').replace(/(<li.*<\/li>\n?)+/g,'<ul class="list-disc mb-4">$&</ul>').replace(/\n\n/g,"<br/><br/>");return p?(0,t.jsx)(l.Card,{className:"mb-6",children:(0,t.jsx)(l.CardContent,{className:"py-8 text-center",children:(0,t.jsx)(d.Loader2,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"})})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Card,{className:(0,f.cn)("mb-6",a&&"border-green-200 bg-green-50/30"),children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(w.Sparkles,{className:"h-5 w-5 text-amber-500"}),"Course Pitch"]}),(0,t.jsx)(l.CardDescription,{children:"Create a compelling marketing description that persuades students to enroll"})]}),a&&(0,t.jsx)(v.Badge,{variant:"default",className:"bg-green-100 text-green-800",children:"Saved"})]})}),(0,t.jsx)(l.CardContent,{children:a?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg p-4 max-h-[300px] overflow-y-auto border",children:(0,t.jsx)("div",{className:"prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:_(a)}})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(i.Button,{variant:"outline",onClick:()=>A(!0),className:"gap-2",children:[(0,t.jsx)(k.Eye,{className:"h-4 w-4"}),"Full Preview"]}),(0,t.jsxs)(i.Button,{variant:"outline",onClick:()=>F(!0),className:"gap-2",children:[(0,t.jsx)(N.default,{className:"h-4 w-4"}),"Edit"]}),(0,t.jsxs)(i.Button,{variant:"outline",onClick:W,disabled:T,className:"gap-2",children:[T?(0,t.jsx)(d.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(C.Wand2,{className:"h-4 w-4"}),"Regenerate with AI"]}),(0,t.jsxs)(i.Button,{variant:"ghost",onClick:V,className:"gap-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[(0,t.jsx)(b.Trash2,{className:"h-4 w-4"}),"Delete"]})]}),(0,t.jsx)("div",{className:"rounded-lg border bg-amber-50 border-amber-200 p-4",children:(0,t.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,t.jsx)("strong",{children:"ðŸ’¡ Tip:"})," This pitch will be displayed on the course page for students to read. A compelling pitch can significantly increase enrollment rates!"]})})]}):(0,t.jsxs)(j.Tabs,{value:D,onValueChange:e=>E(e),children:[(0,t.jsxs)(j.TabsList,{className:"mb-4",children:[(0,t.jsxs)(j.TabsTrigger,{value:"ai",className:"gap-2",children:[(0,t.jsx)(C.Wand2,{className:"h-4 w-4"}),"AI Generate"]}),(0,t.jsxs)(j.TabsTrigger,{value:"manual",className:"gap-2",children:[(0,t.jsx)(S.PenLine,{className:"h-4 w-4"}),"Write My Own"]})]}),(0,t.jsx)(j.TabsContent,{value:"ai",children:(0,t.jsxs)("div",{className:"text-center py-8 bg-muted/30 rounded-lg",children:[(0,t.jsx)(C.Wand2,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Generate with AI"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4 max-w-md mx-auto",children:"Let AI create a persuasive course description that highlights what students will learn, who it's for, and why they should enroll."}),(0,t.jsx)(i.Button,{onClick:W,disabled:T,size:"lg",className:"gap-2",children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"h-4 w-4 animate-spin"}),"Generating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Sparkles,{className:"h-4 w-4"}),"Generate Course Pitch"]})})]})}),(0,t.jsx)(j.TabsContent,{value:"manual",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(g.Textarea,{placeholder:"Write your course pitch here... Describe what students will learn, who this course is for, and why they should enroll.",value:o,onChange:e=>u(e.target.value),rows:8,className:"resize-none"}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(i.Button,{onClick:H,disabled:P||!o.trim(),className:"gap-2",children:[P&&(0,t.jsx)(d.Loader2,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)(h.Save,{className:"h-4 w-4"}),"Save Pitch"]})})]})})]})})]}),(0,t.jsx)(y.Dialog,{open:L,onOpenChange:A,children:(0,t.jsxs)(y.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(y.DialogHeader,{children:[(0,t.jsx)(y.DialogTitle,{children:"Course Pitch Preview"}),(0,t.jsx)(y.DialogDescription,{children:"This is how students will see your course pitch"})]}),(0,t.jsx)("div",{className:"prose prose-slate max-w-none",children:(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:_(a||"")}})})]})}),(0,t.jsx)(y.Dialog,{open:$,onOpenChange:F,children:(0,t.jsxs)(y.DialogContent,{className:"max-w-3xl max-h-[90vh]",children:[(0,t.jsxs)(y.DialogHeader,{children:[(0,t.jsx)(y.DialogTitle,{children:"Edit Course Pitch"}),(0,t.jsx)(y.DialogDescription,{children:"Make adjustments to your course pitch"})]}),(0,t.jsx)(g.Textarea,{value:n,onChange:e=>c(e.target.value),rows:20,className:"font-mono text-sm"}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),(0,t.jsxs)(i.Button,{onClick:I,disabled:O,className:"gap-2",children:[O&&(0,t.jsx)(d.Loader2,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)(h.Save,{className:"h-4 w-4"}),"Save Changes"]})]})]})})]})}let M={beginner:0,intermediate:1,advanced:2};function P({courseId:e}){let[a,y]=(0,r.useState)(null),[g,j]=(0,r.useState)(!0),[v,w]=(0,r.useState)(!1),[b,k]=(0,r.useState)(!0),[N,C]=(0,r.useState)(null),[S,P]=(0,r.useState)([]),R=(0,r.useRef)(null),L=(0,r.useCallback)(async()=>{if(e){j(!0);try{let t=await fetch(`/api/tutor/courses/${e}`,{credentials:"include"});if(t.ok){let e=await t.json();y(e.course),k(e.course?.isLiveOnline??!0)}let a=await fetch(`/api/tutor/courses/${e}/curriculum`,{credentials:"include"});if(a.ok){let e=await a.json();Array.isArray(e.modules)&&e.modules.length>0?C(e.modules):C(null)}}catch{}finally{j(!1)}}},[e]);(0,r.useEffect)(()=>{L()},[L]);let A=async()=>{let t=!b;k(t),w(!0);try{let a=await fetch("/api/csrf",{credentials:"include"}),s=await a.json().catch(()=>({})),r=s?.token??null;(await fetch(`/api/tutor/courses/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",...r&&{"X-CSRF-Token":r}},credentials:"include",body:JSON.stringify({isLiveOnline:t})})).ok?(m.toast.success(t?"Course is now online":"Course is now offline"),y(e=>e?{...e,isLiveOnline:t}:null)):(k(!t),m.toast.error("Failed to update availability"))}catch{k(!t),m.toast.error("Failed to update availability")}finally{w(!1)}};if(!e)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:(0,t.jsxs)(l.Card,{className:"max-w-md w-full",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.BookOpen,{className:"h-5 w-5"}),"Course Builder"]}),(0,t.jsx)(l.CardDescription,{children:"Select a course to edit its curriculum. Open a course from the Course Catalogue or from your dashboard to use the builder."})]}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)(i.Button,{asChild:!0,className:"w-full",children:(0,t.jsx)(s.default,{href:"/curriculum",children:"Open Course Catalogue"})})})]})});let $=async(t,a)=>{w(!0);try{let r=await fetch("/api/csrf",{credentials:"include"}),i=await r.json().catch(()=>({})),l=i?.token??null,n=await fetch(`/api/tutor/courses/${e}/curriculum`,{method:"PUT",headers:{"Content-Type":"application/json",...l&&{"X-CSRF-Token":l}},credentials:"include",body:JSON.stringify({modules:t,developmentMode:a?.developmentMode??"single",previewDifficulty:a?.previewDifficulty??"all"})});if(n.ok){var s;let e=await n.json();m.toast.success(`Curriculum saved â€” ${e.moduleCount} modules, ${e.lessonCount} lessons`);let t=(s=e.variants,Array.isArray(s)?s.filter(e=>!!e&&"object"==typeof e&&("beginner"===e.difficulty||"intermediate"===e.difficulty||"advanced"===e.difficulty)&&"string"==typeof e.batchId&&"string"==typeof e.batchName&&"string"==typeof e.joinLink).sort((e,t)=>M[e.difficulty]-M[t.difficulty]):[]);t.length>0?(P(t),m.toast.success(`Adaptive variants ready: ${t.map(e=>e.difficulty).join(", ")}`)):P([])}else{let e=await n.json().catch(()=>({}));m.toast.error(e.error??"Failed to save curriculum")}}catch{m.toast.error("Failed to save curriculum")}finally{w(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white border-b sticky top-0 z-10",children:(0,t.jsx)("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,t.jsx)(s.default,{href:"/tutor/my-page?tab=drafts",children:(0,t.jsx)(n.ArrowLeft,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:g?"Loading...":a?.name??"Course Builder 2.0"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,t.jsx)(s.default,{href:"/tutor/my-page?tab=drafts",className:"hover:text-blue-600 hover:underline",children:"â† Back to Work in Progress"}),v&&(0,t.jsx)("span",{className:"ml-2 text-blue-600",children:"â€¢ Saving..."})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 pr-4 border-r",children:[(0,t.jsx)(o.Radio,{className:(0,f.cn)("h-4 w-4",b?"text-green-500":"text-gray-400")}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground hidden sm:inline",children:b?"Online":"Offline"}),(0,t.jsx)("button",{type:"button",onClick:A,disabled:v||g,className:(0,f.cn)("relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",b?"bg-green-500":"bg-gray-200",(v||g)&&"opacity-50 cursor-not-allowed"),children:(0,t.jsx)("span",{className:(0,f.cn)("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",b?"translate-x-6":"translate-x-1")})})]}),(0,t.jsxs)(i.Button,{variant:"default",className:"gap-2",onClick:()=>R.current?.save(),disabled:v,children:[v?(0,t.jsx)(d.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(h.Save,{className:"w-4 h-4"}),"Save Course"]}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.PublishStatusBadge,{isPublished:a.isPublished}),(0,t.jsx)(i.Button,{variant:"outline",asChild:!0,children:(0,t.jsxs)(s.default,{href:`/tutor/courses/${e}`,children:[(0,t.jsx)(u.Settings,{className:"w-4 h-4 mr-2"}),"Settings"]})})]})]})]})})}),(0,t.jsxs)("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 py-6",children:[S.length>0&&(0,t.jsxs)(l.Card,{className:"mb-4 border-emerald-200 bg-emerald-50/40",children:[(0,t.jsxs)(l.CardHeader,{className:"pb-2 pt-4",children:[(0,t.jsx)(l.CardTitle,{className:"text-sm",children:"Adaptive Variant Join Links"}),(0,t.jsx)(l.CardDescription,{children:"Share the correct link with students for each difficulty level."})]}),(0,t.jsx)(l.CardContent,{className:"space-y-2 pb-4",children:S.map(e=>(0,t.jsxs)("div",{className:"rounded-md border bg-white p-2.5",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("p",{className:"text-xs font-medium capitalize",children:e.difficulty}),(0,t.jsx)("p",{className:"truncate text-[11px] text-muted-foreground",children:e.batchName})]}),(0,t.jsx)(i.Button,{type:"button",size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:async()=>{try{await navigator.clipboard.writeText(e.joinLink),m.toast.success(`${e.difficulty} join link copied`)}catch{m.toast.error("Failed to copy link")}},children:"Copy Link"})]}),(0,t.jsx)("p",{className:"mt-1 break-all text-[11px] text-muted-foreground",children:e.joinLink})]},e.batchId))})]}),g?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(d.Loader2,{className:"h-8 w-8 animate-spin text-blue-500"})}):(0,t.jsx)(p.CourseBuilder,{ref:R,courseId:e,courseName:a?.name,initialModules:N??void 0,onSave:$}),e&&(0,t.jsx)(T,{courseId:e})]})]})}function R(){let e=(0,a.useParams)(),s=e?.id??null;return(0,t.jsx)(P,{courseId:s})}e.s(["default",()=>R],494276)},212496,e=>{e.v(t=>Promise.all(["static/chunks/eeae240ce306ce61.js","static/chunks/532fd208a40af2fb.js"].map(t=>e.l(t))).then(()=>t(885687)))},746421,e=>{e.v(t=>Promise.all(["static/chunks/eeae240ce306ce61.js","static/chunks/1446b2232a516d93.js","static/chunks/cbf2f21ad46d6d8d.js"].map(t=>e.l(t))).then(()=>t(637654)))},174678,e=>{e.v(t=>Promise.all(["static/chunks/85bdb63dea5af372.js"].map(t=>e.l(t))).then(()=>t(276673)))},221166,e=>{e.v(t=>Promise.all(["static/chunks/e39c1a897fea8bb7.js"].map(t=>e.l(t))).then(()=>t(549438)))},390992,e=>{e.v(t=>Promise.all(["static/chunks/8aaa90854103a33f.js"].map(t=>e.l(t))).then(()=>t(469719)))},94579,e=>{e.v(t=>Promise.all(["static/chunks/2ec63d37861791ab.js","static/chunks/ce32505a7b0332be.js"].map(t=>e.l(t))).then(()=>t(63203)))}]);

//# debugId=01d6650a-eb85-106e-1a2a-cf42601f504e
//# sourceMappingURL=116b860a1a8db86b.js.map