;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="dcce70bc-b34d-0460-62bd-2fca8969658d")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,307003,e=>{"use strict";var t=e.i(800592);function r(e){let r=t.useRef({value:e,previous:e});return t.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}e.s(["usePrevious",()=>r])},785784,e=>{"use strict";var t=e.i(251474),r=e.i(383753),s=e.i(390553);let i=(0,r.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:r,...n}){return(0,t.jsx)("div",{className:(0,s.cn)(i({variant:r}),e),...n})}e.s(["Badge",()=>n])},156155,e=>{"use strict";var t=e.i(251474),r=e.i(800592),s=e.i(518696),i=e.i(939130),n=e.i(895067);e.i(312515);var a=e.i(894878),o=Symbol("radix.slottable");function l(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}var u=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{var i,n;let o,u,c,d=(n=i=`Primitive.${s}`,(o=r.forwardRef((e,t)=>{let{children:s,...i}=e;if(r.isValidElement(s)){var n;let e,o,l=(n=s,(o=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(o=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),u=function(e,t){let r={...t};for(let s in t){let i=e[s],n=t[s];/^on[A-Z]/.test(s)?i&&n?r[s]=(...e)=>{let t=n(...e);return i(...e),t}:i&&(r[s]=i):"style"===s?r[s]={...i,...n}:"className"===s&&(r[s]=[i,n].filter(Boolean).join(" "))}return{...e,...r}}(i,s.props);return s.type!==r.Fragment&&(u.ref=t?(0,a.composeRefs)(t,l):l),r.cloneElement(s,u)}return r.Children.count(s)>1?r.Children.only(null):null})).displayName=`${n}.SlotClone`,u=o,(c=r.forwardRef((e,s)=>{let{children:i,...n}=e,a=r.Children.toArray(i),o=a.find(l);if(o){let e=o.props.children,i=a.map(t=>t!==o?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(u,{...n,ref:s,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,t.jsx)(u,{...n,ref:s,children:i})})).displayName=`${i}.Slot`,c),h=r.forwardRef((e,r)=>{let{asChild:i,...n}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?d:s,{...n,ref:r})});return h.displayName=`Primitive.${s}`,{...e,[s]:h}},{}),c=e.i(422955),d=e.i(67343),h=e.i(462835),p="Tabs",[f,m]=function(e,s=[]){let i=[],n=()=>{let t=i.map(e=>r.createContext(e));return function(s){let i=s?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...s,[e]:i}}),[s,i])}};return n.scopeName=e,[function(s,n){let a=r.createContext(n),o=i.length;i=[...i,n];let l=s=>{let{scope:i,children:n,...l}=s,u=i?.[e]?.[o]||a,c=r.useMemo(()=>l,Object.values(l));return(0,t.jsx)(u.Provider,{value:c,children:n})};return l.displayName=s+"Provider",[l,function(t,i){let l=i?.[e]?.[o]||a,u=r.useContext(l);if(u)return u;if(void 0!==n)return n;throw Error(`\`${t}\` must be used within \`${s}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=s.reduce((t,{useScope:r,scopeName:s})=>{let i=r(e)[`__scope${s}`];return{...t,...i}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return s.scopeName=t.scopeName,s}(n,...s)]}(p,[i.createRovingFocusGroupScope]),y=(0,i.createRovingFocusGroupScope)(),[v,b]=f(p),g=r.forwardRef((e,r)=>{let{__scopeTabs:s,value:i,onValueChange:n,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:f="automatic",...m}=e,y=(0,c.useDirection)(l),[b,g]=(0,d.useControllableState)({prop:i,onChange:n,defaultProp:a??"",caller:p});return(0,t.jsx)(v,{scope:s,baseId:(0,h.useId)(),value:b,onValueChange:g,orientation:o,dir:y,activationMode:f,children:(0,t.jsx)(u.div,{dir:y,"data-orientation":o,...m,ref:r})})});g.displayName=p;var x="TabsList",j=r.forwardRef((e,r)=>{let{__scopeTabs:s,loop:n=!0,...a}=e,o=b(x,s),l=y(s);return(0,t.jsx)(i.Root,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:n,children:(0,t.jsx)(u.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:r})})});j.displayName=x;var w="TabsTrigger",S=r.forwardRef((e,r)=>{let{__scopeTabs:n,value:a,disabled:o=!1,...l}=e,c=b(w,n),d=y(n),h=C(c.baseId,a),p=I(c.baseId,a),f=a===c.value;return(0,t.jsx)(i.Item,{asChild:!0,...d,focusable:!o,active:f,children:(0,t.jsx)(u.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":p,"data-state":f?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:h,...l,ref:r,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(a)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(a)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;f||o||!e||c.onValueChange(a)})})})});S.displayName=w;var R="TabsContent",T=r.forwardRef((e,s)=>{let{__scopeTabs:i,value:a,forceMount:o,children:l,...c}=e,d=b(R,i),h=C(d.baseId,a),p=I(d.baseId,a),f=a===d.value,m=r.useRef(f);return r.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(n.Presence,{present:o||f,children:({present:r})=>(0,t.jsx)(u.div,{"data-state":f?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":h,hidden:!r,id:p,tabIndex:0,...c,ref:s,style:{...e.style,animationDuration:m.current?"0s":void 0},children:r&&l})})});function C(e,t){return`${e}-trigger-${t}`}function I(e,t){return`${e}-content-${t}`}T.displayName=R;var E=e.i(390553);let O=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(j,{ref:s,className:(0,E.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...r}));O.displayName=j.displayName;let N=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(S,{ref:s,className:(0,E.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...r}));N.displayName=S.displayName;let A=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(T,{ref:s,className:(0,E.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r}));A.displayName=T.displayName,e.s(["Tabs",()=>g,"TabsContent",()=>A,"TabsList",()=>O,"TabsTrigger",()=>N],156155)},913674,e=>{"use strict";var t=e.i(251474),r=e.i(800592),s=e.i(518696),i=e.i(894878),n=e.i(67343),a=e.i(307003),o=e.i(62853);e.i(312515);var l=Symbol("radix.slottable");function u(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}var c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{var n,a;let o,l,c,d=(a=n=`Primitive.${s}`,(o=r.forwardRef((e,t)=>{let{children:s,...n}=e;if(r.isValidElement(s)){var a;let e,o,l=(a=s,(o=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(o=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),u=function(e,t){let r={...t};for(let s in t){let i=e[s],n=t[s];/^on[A-Z]/.test(s)?i&&n?r[s]=(...e)=>{let t=n(...e);return i(...e),t}:i&&(r[s]=i):"style"===s?r[s]={...i,...n}:"className"===s&&(r[s]=[i,n].filter(Boolean).join(" "))}return{...e,...r}}(n,s.props);return s.type!==r.Fragment&&(u.ref=t?(0,i.composeRefs)(t,l):l),r.cloneElement(s,u)}return r.Children.count(s)>1?r.Children.only(null):null})).displayName=`${a}.SlotClone`,l=o,(c=r.forwardRef((e,s)=>{let{children:i,...n}=e,a=r.Children.toArray(i),o=a.find(u);if(o){let e=o.props.children,i=a.map(t=>t!==o?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(l,{...n,ref:s,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,t.jsx)(l,{...n,ref:s,children:i})})).displayName=`${n}.Slot`,c),h=r.forwardRef((e,r)=>{let{asChild:i,...n}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?d:s,{...n,ref:r})});return h.displayName=`Primitive.${s}`,{...e,[s]:h}},{}),d="Switch",[h,p]=function(e,s=[]){let i=[],n=()=>{let t=i.map(e=>r.createContext(e));return function(s){let i=s?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...s,[e]:i}}),[s,i])}};return n.scopeName=e,[function(s,n){let a=r.createContext(n),o=i.length;i=[...i,n];let l=s=>{let{scope:i,children:n,...l}=s,u=i?.[e]?.[o]||a,c=r.useMemo(()=>l,Object.values(l));return(0,t.jsx)(u.Provider,{value:c,children:n})};return l.displayName=s+"Provider",[l,function(t,i){let l=i?.[e]?.[o]||a,u=r.useContext(l);if(u)return u;if(void 0!==n)return n;throw Error(`\`${t}\` must be used within \`${s}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=s.reduce((t,{useScope:r,scopeName:s})=>{let i=r(e)[`__scope${s}`];return{...t,...i}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return s.scopeName=t.scopeName,s}(n,...s)]}(d),[f,m]=h(d),y=r.forwardRef((e,a)=>{let{__scopeSwitch:o,name:l,checked:u,defaultChecked:h,required:p,disabled:m,value:y="on",onCheckedChange:v,form:b,...j}=e,[w,S]=r.useState(null),R=(0,i.useComposedRefs)(a,e=>S(e)),T=r.useRef(!1),C=!w||b||!!w.closest("form"),[I,E]=(0,n.useControllableState)({prop:u,defaultProp:h??!1,onChange:v,caller:d});return(0,t.jsxs)(f,{scope:o,checked:I,disabled:m,children:[(0,t.jsx)(c.button,{type:"button",role:"switch","aria-checked":I,"aria-required":p,"data-state":x(I),"data-disabled":m?"":void 0,disabled:m,value:y,...j,ref:R,onClick:(0,s.composeEventHandlers)(e.onClick,e=>{E(e=>!e),C&&(T.current=e.isPropagationStopped(),T.current||e.stopPropagation())})}),C&&(0,t.jsx)(g,{control:w,bubbles:!T.current,name:l,value:y,checked:I,required:p,disabled:m,form:b,style:{transform:"translateX(-100%)"}})]})});y.displayName=d;var v="SwitchThumb",b=r.forwardRef((e,r)=>{let{__scopeSwitch:s,...i}=e,n=m(v,s);return(0,t.jsx)(c.span,{"data-state":x(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:r})});b.displayName=v;var g=r.forwardRef(({__scopeSwitch:e,control:s,checked:n,bubbles:l=!0,...u},c)=>{let d=r.useRef(null),h=(0,i.useComposedRefs)(d,c),p=(0,a.usePrevious)(n),f=(0,o.useSize)(s);return r.useEffect(()=>{let e=d.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==n&&t){let r=new Event("click",{bubbles:l});t.call(e,n),e.dispatchEvent(r)}},[p,n,l]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...u,tabIndex:-1,ref:h,style:{...u.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function x(e){return e?"checked":"unchecked"}g.displayName="SwitchBubbleInput";var j=e.i(390553);let w=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(y,{className:(0,j.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...r,ref:s,children:(0,t.jsx)(b,{className:(0,j.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));w.displayName=y.displayName,e.s(["Switch",()=>w],913674)},704157,e=>{"use strict";var t=e.i(415160),r=e.i(800592),s=e.i(881230),i=e.i(331135),n=e.i(817257),a=e.i(802939),o=class extends n.Subscribable{#e;#t=void 0;#r;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,a.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,a.hashKey)(t.mutationKey)!==(0,a.hashKey)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#n(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#n()}mutate(e,t){return this.#s=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#i(){let e=this.#r?.state??(0,s.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#n(e){i.notifyManager.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#s.onSuccess?.(e.data,t,r,s)}catch(e){Promise.reject(e)}try{this.#s.onSettled?.(e.data,null,t,r,s)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#s.onError?.(e.error,t,r,s)}catch(e){Promise.reject(e)}try{this.#s.onSettled?.(void 0,e.error,t,r,s)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},l=e.i(801018);function u(e,t){let s=(0,l.useQueryClient)(t),[n]=r.useState(()=>new o(s,e));r.useEffect(()=>{n.setOptions(e)},[n,e]);let u=r.useSyncExternalStore(r.useCallback(e=>n.subscribe(i.notifyManager.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),c=r.useCallback((e,t)=>{n.mutate(e,t).catch(a.noop)},[n]);if(u.error&&(0,a.shouldThrowError)(n.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:c,mutateAsync:u.mutate}}function c(e){let r=e?"?"+new URLSearchParams(Object.entries(e).filter(([,e])=>void 0!==e)).toString():"";return(0,t.useQuery)({queryKey:["admin-users",e],queryFn:async()=>{let e=await fetch(`/api/admin/users${r}`);if(!e.ok)throw Error("Failed to fetch users");return e.json()}})}function d(){let e=(0,l.useQueryClient)(),{data:r,isLoading:s,error:i}=(0,t.useQuery)({queryKey:["feature-flags"],queryFn:async()=>{let e=await fetch("/api/admin/feature-flags");if(!e.ok)throw Error("Failed to fetch feature flags");return e.json()}}),n=u({mutationFn:async e=>{let t=await fetch("/api/admin/feature-flags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create feature flag");return t.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["feature-flags"]})}}),a=u({mutationFn:async({id:e,...t})=>{let r=await fetch("/api/admin/feature-flags",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,...t})});if(!r.ok)throw Error("Failed to update feature flag");return r.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["feature-flags"]})}}),o=u({mutationFn:async e=>{let t=await fetch(`/api/admin/feature-flags?id=${e}`,{method:"DELETE"});if(!t.ok)throw Error("Failed to delete feature flag");return t.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["feature-flags"]})}});return{flags:r?.flags||[],isLoading:s,error:i,createFlag:n.mutateAsync,updateFlag:a.mutateAsync,deleteFlag:o.mutateAsync}}function h(){let e=(0,l.useQueryClient)(),{data:r,isLoading:s,error:i}=(0,t.useQuery)({queryKey:["llm-providers"],queryFn:async()=>{let e=await fetch("/api/admin/llm/providers");if(!e.ok)throw Error("Failed to fetch providers");return e.json()}}),n=u({mutationFn:async e=>{let t=await fetch("/api/admin/llm/providers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create provider");return t.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["llm-providers"]})}}),a=u({mutationFn:async({id:e,...t})=>{let r=await fetch("/api/admin/llm/providers",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,...t})});if(!r.ok)throw Error("Failed to update provider");return r.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["llm-providers"]})}});return{providers:r?.providers||[],isLoading:s,error:i,createProvider:n.mutateAsync,updateProvider:a.mutateAsync}}function p(){let e=(0,l.useQueryClient)(),{data:r,isLoading:s,error:i}=(0,t.useQuery)({queryKey:["llm-routing-rules"],queryFn:async()=>{let e=await fetch("/api/admin/llm/routing");if(!e.ok)throw Error("Failed to fetch routing rules");return e.json()}}),n=u({mutationFn:async e=>{let t=await fetch("/api/admin/llm/routing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create routing rule");return t.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["llm-routing-rules"]})}}),a=u({mutationFn:async({id:e,...t})=>{let r=await fetch("/api/admin/llm/routing",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,...t})});if(!r.ok)throw Error("Failed to update routing rule");return r.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["llm-routing-rules"]})}}),o=u({mutationFn:async e=>{let t=await fetch(`/api/admin/llm/routing?id=${e}`,{method:"DELETE"});if(!t.ok)throw Error("Failed to delete routing rule");return t.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["llm-routing-rules"]})}});return{rules:r?.rules||[],isLoading:s,error:i,createRule:n.mutateAsync,updateRule:a.mutateAsync,deleteRule:o.mutateAsync}}function f(e){let r=(0,l.useQueryClient)(),{data:s,isLoading:i,error:n}=(0,t.useQuery)({queryKey:["settings",e],queryFn:async()=>{let t=e?`/api/admin/settings?category=${e}`:"/api/admin/settings",r=await fetch(t);if(!r.ok)throw Error("Failed to fetch settings");return r.json()}}),a=u({mutationFn:async e=>{let t=await fetch("/api/admin/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to update setting");return t.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["settings"]})}});return{settings:s?.settings||[],isLoading:i,error:n,updateSetting:a.mutateAsync}}function m(e){let r=e?"?"+new URLSearchParams(Object.entries(e).filter(([,e])=>void 0!==e)).toString():"";return(0,t.useQuery)({queryKey:["audit-logs",e],queryFn:async()=>{let e=await fetch(`/api/admin/audit-log${r}`);if(!e.ok)throw Error("Failed to fetch audit logs");return e.json()}})}function y(e=7){return(0,t.useQuery)({queryKey:["analytics",e],queryFn:async()=>{let t=await fetch(`/api/admin/analytics/overview?days=${e}`);if(!t.ok)throw Error("Failed to fetch analytics");return t.json()}})}function v(e=7){return(0,t.useQuery)({queryKey:["admin-topology",e],queryFn:async()=>{let t=await fetch(`/api/admin/analytics/topology?days=${e}`);if(!t.ok)throw Error("Failed to fetch topology analytics");return t.json()},refetchInterval:15e3})}e.s(["useAdminTopology",()=>v,"useAdminUsers",()=>c,"useAnalytics",()=>y,"useAuditLogs",()=>m,"useFeatureFlags",()=>d,"useLlmProviders",()=>h,"useLlmRoutingRules",()=>p,"useSettings",()=>f],704157)},811698,e=>{"use strict";var t=e.i(251474),r=e.i(390553);function s({className:e,...s}){return(0,t.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",e),...s})}e.s(["Skeleton",()=>s])},415160,e=>{"use strict";let t;var r=e.i(72274),s=e.i(331135),i=e.i(933006),n=e.i(817257),a=e.i(787855),o=e.i(802939),l=e.i(924004),u=class extends n.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=(0,a.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#l=void 0;#u=void 0;#t=void 0;#c;#d;#o;#a;#h;#p;#f;#m;#y;#v;#b=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#l.addObserver(this),c(this.#l,this.options)?this.#g():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return d(this.#l,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return d(this.#l,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#j(),this.#w(),this.#l.removeObserver(this)}setOptions(e){let t=this.options,r=this.#l;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,o.resolveEnabled)(this.options.enabled,this.#l))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#l.setOptions(this.options),t._defaulted&&!(0,o.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#l,observer:this});let s=this.hasListeners();s&&h(this.#l,r,this.options,t)&&this.#g(),this.updateResult(),s&&(this.#l!==r||(0,o.resolveEnabled)(this.options.enabled,this.#l)!==(0,o.resolveEnabled)(t.enabled,this.#l)||(0,o.resolveStaleTime)(this.options.staleTime,this.#l)!==(0,o.resolveStaleTime)(t.staleTime,this.#l))&&this.#R();let i=this.#T();s&&(this.#l!==r||(0,o.resolveEnabled)(this.options.enabled,this.#l)!==(0,o.resolveEnabled)(t.enabled,this.#l)||i!==this.#v)&&this.#C(i)}getOptimisticResult(e){var t,r;let s=this.#e.getQueryCache().build(this.#e,e),i=this.createResult(s,e);return t=this,r=i,(0,o.shallowEqualObjects)(t.getCurrentResult(),r)||(this.#t=i,this.#d=this.options,this.#c=this.#l.state),i}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"===r&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#o.status||this.#o.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,r))})}trackProp(e){this.#b.add(e)}getCurrentQuery(){return this.#l}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#g({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#g(e){this.#S();let t=this.#l.fetch(this.options,e);return e?.throwOnError||(t=t.catch(o.noop)),t}#R(){this.#j();let e=(0,o.resolveStaleTime)(this.options.staleTime,this.#l);if(o.isServer||this.#t.isStale||!(0,o.isValidTimeout)(e))return;let t=(0,o.timeUntilStale)(this.#t.dataUpdatedAt,e);this.#m=l.timeoutManager.setTimeout(()=>{this.#t.isStale||this.updateResult()},t+1)}#T(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#l):this.options.refetchInterval)??!1}#C(e){this.#w(),this.#v=e,!o.isServer&&!1!==(0,o.resolveEnabled)(this.options.enabled,this.#l)&&(0,o.isValidTimeout)(this.#v)&&0!==this.#v&&(this.#y=l.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||r.focusManager.isFocused())&&this.#g()},this.#v))}#x(){this.#R(),this.#C(this.#T())}#j(){this.#m&&(l.timeoutManager.clearTimeout(this.#m),this.#m=void 0)}#w(){this.#y&&(l.timeoutManager.clearInterval(this.#y),this.#y=void 0)}createResult(e,t){let r,s=this.#l,n=this.options,l=this.#t,u=this.#c,d=this.#d,f=e!==s?e.state:this.#u,{state:m}=e,y={...m},v=!1;if(t._optimisticResults){let r=this.hasListeners(),a=!r&&c(e,t),o=r&&h(e,s,t,n);(a||o)&&(y={...y,...(0,i.fetchState)(m.data,e.options)}),"isRestoring"===t._optimisticResults&&(y.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:x}=y;r=y.data;let j=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===x){let e;l?.isPlaceholderData&&t.placeholderData===d?.placeholderData?(e=l.data,j=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,void 0!==e&&(x="success",r=(0,o.replaceData)(l?.data,e,t),v=!0)}if(t.select&&void 0!==r&&!j)if(l&&r===u?.data&&t.select===this.#h)r=this.#p;else try{this.#h=t.select,r=t.select(r),r=(0,o.replaceData)(l?.data,r,t),this.#p=r,this.#a=null}catch(e){this.#a=e}this.#a&&(b=this.#a,r=this.#p,g=Date.now(),x="error");let w="fetching"===y.fetchStatus,S="pending"===x,R="error"===x,T=S&&w,C=void 0!==r,I={status:x,fetchStatus:y.fetchStatus,isPending:S,isSuccess:"success"===x,isError:R,isInitialLoading:T,isLoading:T,data:r,dataUpdatedAt:y.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>f.dataUpdateCount||y.errorUpdateCount>f.errorUpdateCount,isFetching:w,isRefetching:w&&!S,isLoadingError:R&&!C,isPaused:"paused"===y.fetchStatus,isPlaceholderData:v,isRefetchError:R&&C,isStale:p(e,t),refetch:this.refetch,promise:this.#o,isEnabled:!1!==(0,o.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=void 0!==I.data,r="error"===I.status&&!t,i=e=>{r?e.reject(I.error):t&&e.resolve(I.data)},n=()=>{i(this.#o=I.promise=(0,a.pendingThenable)())},o=this.#o;switch(o.status){case"pending":e.queryHash===s.queryHash&&i(o);break;case"fulfilled":(r||I.data!==o.value)&&n();break;case"rejected":r&&I.error===o.reason||n()}}return I}updateResult(){let e=this.#t,t=this.createResult(this.#l,this.options);if(this.#c=this.#l.state,this.#d=this.options,void 0!==this.#c.data&&(this.#f=this.#l),(0,o.shallowEqualObjects)(t,e))return;this.#t=t;let r=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#b.size)return!0;let s=new Set(r??this.#b);return this.options.throwOnError&&s.add("error"),Object.keys(this.#t).some(t=>this.#t[t]!==e[t]&&s.has(t))};this.#n({listeners:r()})}#S(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#l)return;let t=this.#l;this.#l=e,this.#u=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#n(e){s.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#t)}),this.#e.getQueryCache().notify({query:this.#l,type:"observerResultsUpdated"})})}};function c(e,t){return!1!==(0,o.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&d(e,t,t.refetchOnMount)}function d(e,t,r){if(!1!==(0,o.resolveEnabled)(t.enabled,e)&&"static"!==(0,o.resolveStaleTime)(t.staleTime,e)){let s="function"==typeof r?r(e):r;return"always"===s||!1!==s&&p(e,t)}return!1}function h(e,t,r,s){return(e!==t||!1===(0,o.resolveEnabled)(s.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&p(e,r)}function p(e,t){return!1!==(0,o.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,o.resolveStaleTime)(t.staleTime,e))}e.i(57020);var f=e.i(800592),m=e.i(801018);e.i(251474);var y=f.createContext((t=!1,{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t})),v=f.createContext(!1);v.Provider;var b=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function g(e,t){return function(e,t,r){let i,n=f.useContext(v),a=f.useContext(y),l=(0,m.useQueryClient)(r),u=l.defaultQueryOptions(e);l.getDefaultOptions().queries?._experimental_beforeQuery?.(u);let c=l.getQueryCache().get(u.queryHash);if(u._optimisticResults=n?"isRestoring":"optimistic",u.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=u.staleTime;u.staleTime="function"==typeof t?(...r)=>e(t(...r)):e(t),"number"==typeof u.gcTime&&(u.gcTime=Math.max(u.gcTime,1e3))}i=c?.state.error&&"function"==typeof u.throwOnError?(0,o.shouldThrowError)(u.throwOnError,[c.state.error,c]):u.throwOnError,(u.suspense||u.experimental_prefetchInRender||i)&&!a.isReset()&&(u.retryOnMount=!1),f.useEffect(()=>{a.clearReset()},[a]);let d=!l.getQueryCache().get(u.queryHash),[h]=f.useState(()=>new t(l,u)),p=h.getOptimisticResult(u),g=!n&&!1!==e.subscribed;if(f.useSyncExternalStore(f.useCallback(e=>{let t=g?h.subscribe(s.notifyManager.batchCalls(e)):o.noop;return h.updateResult(),t},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),f.useEffect(()=>{h.setOptions(u)},[u,h]),u?.suspense&&p.isPending)throw b(u,h,a);if((({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(i&&void 0===e.data||(0,o.shouldThrowError)(r,[e.error,s])))({result:p,errorResetBoundary:a,throwOnError:u.throwOnError,query:c,suspense:u.suspense}))throw p.error;if(l.getDefaultOptions().queries?._experimental_afterQuery?.(u,p),u.experimental_prefetchInRender&&!o.isServer&&p.isLoading&&p.isFetching&&!n){let e=d?b(u,h,a):c?.promise;e?.catch(o.noop).finally(()=>{h.updateResult()})}return u.notifyOnChangeProps?p:h.trackResult(p)}(e,u,t)}e.s(["useQuery",()=>g],415160)},117692,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return i}});let s=e.r(997661);function i({reason:e,children:t}){if("u"<typeof window)throw Object.defineProperty(new s.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},627240,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return l}});let s=e.r(251474),i=e.r(312515),n=e.r(58923),a=e.r(768782),o=e.r(930273);function l({moduleIds:e}){if("u">typeof window)return null;let t=n.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let s=t.reactLoadableManifest;for(let t of e){if(!s[t])continue;let e=s[t].files;r.push(...e)}}if(0===r.length)return null;let l=(0,o.getDeploymentIdQueryOrEmptyString)();return(0,s.jsx)(s.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,a.encodeURIPath)(e)}${l}`;return e.endsWith(".css")?(0,s.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,i.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},168861,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return u}});let s=e.r(251474),i=e.r(800592),n=e.r(117692),a=e.r(627240);function o(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},u=function(e){let t={...l,...e},r=(0,i.lazy)(()=>t.loader().then(o)),u=t.loading;function c(e){let o=u?(0,s.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,c=l?i.Suspense:i.Fragment,d=t.ssr?(0,s.jsxs)(s.Fragment,{children:["u"<typeof window?(0,s.jsx)(a.PreloadChunks,{moduleIds:t.modules}):null,(0,s.jsx)(r,{...e})]}):(0,s.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(c,{...l?{fallback:o}:{},children:d})}return c.displayName="LoadableComponent",c}},146498,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return i}});let s=e.r(39736)._(e.r(168861));function i(e,t){let r={};"function"==typeof e&&(r.loader=e);let i={...r,...t};return(0,s.default)({...i,modules:i.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},896846,e=>{"use strict";var t=e.i(251474),r=e.i(800592),s=e.i(156155),i=e.i(146498),n=e.i(785784),a=e.i(870368),o=e.i(811698),l=e.i(913674),u=e.i(704157);let c=[{id:"session-0-0",tutorId:"user-0",studentId:"user-1",tutorIp:"203.0.113.1",studentIp:"203.0.113.2",subject:"Mathematics",isActive:!0,startedAt:new Date(Date.now()-18e5).toISOString()},{id:"session-0-1",tutorId:"user-0",studentId:"user-4",tutorIp:"203.0.113.1",studentIp:"203.0.113.5",subject:"Physics",isActive:!0,startedAt:new Date(Date.now()-36e5).toISOString()},{id:"session-2-0",tutorId:"user-5",studentId:"user-3",tutorIp:"203.0.113.6",studentIp:"203.0.113.4",subject:"Chemistry",isActive:!0,startedAt:new Date(Date.now()-24e5).toISOString()},{id:"session-2-1",tutorId:"user-5",studentId:"user-7",tutorIp:"203.0.113.6",studentIp:"203.0.113.8",subject:"Biology",isActive:!1,startedAt:new Date(Date.now()-72e5).toISOString()},{id:"session-4-0",tutorId:"user-8",studentId:"user-9",tutorIp:"203.0.113.9",studentIp:"203.0.113.10",subject:"English",isActive:!0,startedAt:new Date(Date.now()-12e5).toISOString()},{id:"session-4-1",tutorId:"user-8",studentId:"user-10",tutorIp:"203.0.113.9",studentIp:"198.51.100.1",subject:"History",isActive:!0,startedAt:new Date(Date.now()-3e6).toISOString()},{id:"session-6-0",tutorId:"user-11",studentId:"user-13",tutorIp:"198.51.100.2",studentIp:"198.51.100.4",subject:"Computer Science",isActive:!0,startedAt:new Date(Date.now()-9e5).toISOString()},{id:"session-6-1",tutorId:"user-11",studentId:"user-15",tutorIp:"198.51.100.2",studentIp:"198.51.100.6",subject:"Mathematics",isActive:!1,startedAt:new Date(Date.now()-54e5).toISOString()},{id:"session-8-0",tutorId:"user-17",studentId:"user-18",tutorIp:"198.51.100.8",studentIp:"198.51.100.9",subject:"Physics",isActive:!0,startedAt:new Date(Date.now()-15e5).toISOString()},{id:"session-8-1",tutorId:"user-17",studentId:"user-19",tutorIp:"198.51.100.8",studentIp:"198.51.100.10",subject:"Chemistry",isActive:!0,startedAt:new Date(Date.now()-42e5).toISOString()}],d=[{id:"user-0",ip:"203.0.113.1",role:"TUTOR",name:"James Smith",isActive:!0},{id:"user-1",ip:"203.0.113.2",role:"STUDENT",name:"Maria Johnson",isActive:!0},{id:"user-2",ip:"203.0.113.3",role:"TUTOR",name:"Robert Williams",isActive:!1},{id:"user-3",ip:"203.0.113.4",role:"STUDENT",name:"Jennifer Brown",isActive:!0},{id:"user-4",ip:"203.0.113.5",role:"STUDENT",name:"Michael Jones",isActive:!0},{id:"user-5",ip:"203.0.113.6",role:"TUTOR",name:"Linda Garcia",isActive:!0},{id:"user-6",ip:"203.0.113.7",role:"STUDENT",name:"William Miller",isActive:!1},{id:"user-7",ip:"203.0.113.8",role:"STUDENT",name:"Patricia Davis",isActive:!0},{id:"user-8",ip:"203.0.113.9",role:"TUTOR",name:"David Rodriguez",isActive:!0},{id:"user-9",ip:"203.0.113.10",role:"STUDENT",name:"Elizabeth Martinez",isActive:!0},{id:"user-10",ip:"198.51.100.1",role:"STUDENT",name:"Thomas Anderson",isActive:!0},{id:"user-11",ip:"198.51.100.2",role:"TUTOR",name:"Sarah Wilson",isActive:!0},{id:"user-12",ip:"198.51.100.3",role:"STUDENT",name:"Christopher Moore",isActive:!1},{id:"user-13",ip:"198.51.100.4",role:"STUDENT",name:"Lisa Taylor",isActive:!0},{id:"user-14",ip:"198.51.100.5",role:"TUTOR",name:"Daniel Jackson",isActive:!0},{id:"user-15",ip:"198.51.100.6",role:"STUDENT",name:"Nancy White",isActive:!0},{id:"user-16",ip:"198.51.100.7",role:"STUDENT",name:"Paul Harris",isActive:!1},{id:"user-17",ip:"198.51.100.8",role:"TUTOR",name:"Sandra Martin",isActive:!0},{id:"user-18",ip:"198.51.100.9",role:"STUDENT",name:"Kevin Thompson",isActive:!0},{id:"user-19",ip:"198.51.100.10",role:"STUDENT",name:"Betty Gonzalez",isActive:!0}].map(e=>({...e,isActive:Math.random()>.2})),h=c.map(e=>{let t=d.find(t=>t.id===e.tutorId),r=d.find(t=>t.id===e.studentId),s=(t?.isActive&&r?.isActive)??!1;return{...e,isActive:s,tutorIp:t?.ip??e.tutorIp,studentIp:r?.ip??e.studentIp}}).filter(e=>e.isActive||Math.random()>.5),p=(0,i.default)(()=>e.A(432593),{loadableGenerated:{modules:[817434]},ssr:!1,loading:()=>(0,t.jsx)(o.Skeleton,{className:"h-full w-full"})}),f=(0,i.default)(()=>e.A(111379),{loadableGenerated:{modules:[652965]},ssr:!1,loading:()=>(0,t.jsx)(o.Skeleton,{className:"h-full w-full"})});function m({days:e}){let{data:s,isLoading:i}=(0,u.useAdminTopology)(e),{users:c,sessions:m,isLoading:v}=function(e={}){let{refreshInterval:t=0,days:s=7}=e,[i,n]=(0,r.useState)(d),[a,o]=(0,r.useState)(h),[l,u]=(0,r.useState)(!1),[c,p]=(0,r.useState)(null),f=(0,r.useRef)(null),m=(0,r.useRef)(d),y=(0,r.useRef)(h),v=(0,r.useCallback)(async()=>{try{n(m.current),o(y.current),p(null)}catch(e){p(e instanceof Error?e.message:"Failed to fetch live data")}},[s]);return(0,r.useEffect)(()=>{v()},[]),(0,r.useEffect)(()=>(t>0&&(f.current=setInterval(v,t)),()=>{f.current&&clearInterval(f.current)}),[v,t]),{users:i,sessions:a,isLoading:l,error:c,refetch:v}}({days:e}),[b,g]=(0,r.useState)("ALL"),[x,j]=(0,r.useState)("ALL"),[w,S]=(0,r.useState)(null),[R,T]=(0,r.useState)(!0),[C,I]=(0,r.useState)(!0),E=s?.topology?.stats,O=s?.topology?.nodes||[],N=s?.topology?.edges||[],A=(0,r.useMemo)(()=>{let e=new Map;return O.forEach(t=>{"TUTOR"===t.role&&e.set(t.id,t)}),e},[O]),k=(0,r.useMemo)(()=>["ALL",...Array.from(new Set(N.map(e=>e.subject))).sort((e,t)=>e.localeCompare(t))],[N]),F=(0,r.useMemo)(()=>N.filter(e=>("ALL"===b||e.subject===b)&&("ALL"===x||e.status===x)&&(!w||e.tutorId===w)),[N,w,x,b]),D=(0,r.useMemo)(()=>{let e=new Set;return F.forEach(t=>{e.add(t.tutorId),e.add(t.studentId)}),e},[F]),Q=(0,r.useMemo)(()=>0===F.length?w?O.filter(e=>e.id===w):O:O.filter(e=>D.has(e.id)),[F,D,O,w]),P=(0,r.useMemo)(()=>({tutors:Q.filter(e=>"TUTOR"===e.role).length,students:Q.filter(e=>"STUDENT"===e.role).length,liveConnections:F.filter(e=>e.isActive).length,totalConnections:F.length,liveUsers:c.length,liveSessions:m.length}),[F,Q,c.length,m.length]),M=w?A.get(w):null;return(0,t.jsxs)("div",{className:"absolute inset-0 overflow-hidden bg-slate-950",children:[i||v?(0,t.jsx)(o.Skeleton,{className:"h-full w-full"}):R?(0,t.jsx)(f,{className:"absolute inset-0",users:c,sessions:m,autoRotate:C,onAutoRotateChange:I}):(0,t.jsx)(p,{className:"absolute inset-0",nodes:Q,edges:F,focusedTutorId:w,onTutorFocus:e=>S(t=>t===e?null:e)}),(0,t.jsxs)("div",{className:"pointer-events-none absolute left-6 top-24 z-30 grid w-[420px] grid-cols-2 gap-3",children:[(0,t.jsx)(y,{title:"Tutors",value:P.tutors||E?.tutors||0}),(0,t.jsx)(y,{title:"Students",value:P.students||E?.students||0}),(0,t.jsx)(y,{title:"Live Links",value:P.liveConnections||E?.liveConnections||0,glow:!0}),(0,t.jsx)(y,{title:"Total Links",value:P.totalConnections||E?.totalConnections||0}),R&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y,{title:"Live Users",value:P.liveUsers,color:"#4FD1C5"}),(0,t.jsx)(y,{title:"Active Sessions",value:P.liveSessions,color:"#3A7CFF"})]})]}),(0,t.jsxs)("div",{className:"pointer-events-none absolute right-2 top-24 z-30 w-[360px] space-y-3",children:[(0,t.jsx)("div",{className:"pointer-events-auto rounded-xl border border-cyan-300/30 bg-slate-950/65 p-4 backdrop-blur-md",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.16em] text-cyan-300",children:"Live Data Mode"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-slate-400",children:"Show real-time user locations"})]}),(0,t.jsx)(l.Switch,{checked:R,onCheckedChange:T})]})}),!R&&(0,t.jsxs)("div",{className:"pointer-events-auto rounded-xl border border-cyan-300/30 bg-slate-950/65 p-4 backdrop-blur-md",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.16em] text-cyan-300",children:"Topology Filters"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-slate-200",children:"Floating overlays for mission-control feel."}),(0,t.jsxs)("div",{className:"mt-3 grid gap-3",children:[(0,t.jsxs)("label",{className:"space-y-1",children:[(0,t.jsx)("span",{className:"text-xs uppercase tracking-[0.14em] text-slate-400",children:"Subject"}),(0,t.jsx)("select",{value:b,onChange:e=>g(e.target.value),className:"w-full rounded-md border border-slate-600 bg-slate-900/90 px-3 py-2 text-sm text-slate-100",children:k.map(e=>(0,t.jsx)("option",{value:e,children:"ALL"===e?"All subjects":e},e))})]}),(0,t.jsxs)("label",{className:"space-y-1",children:[(0,t.jsx)("span",{className:"text-xs uppercase tracking-[0.14em] text-slate-400",children:"Session Status"}),(0,t.jsxs)("select",{value:x,onChange:e=>j(e.target.value),className:"w-full rounded-md border border-slate-600 bg-slate-900/90 px-3 py-2 text-sm text-slate-100",children:[(0,t.jsx)("option",{value:"ALL",children:"All sessions"}),(0,t.jsx)("option",{value:"ACTIVE",children:"Active only"}),(0,t.jsx)("option",{value:"RECENT",children:"Recent only"})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("span",{className:"text-xs uppercase tracking-[0.14em] text-slate-400",children:"Tutor Focus"}),(0,t.jsxs)("div",{className:"flex h-[42px] items-center gap-2 rounded-md border border-slate-600 bg-slate-900/90 px-3",children:[(0,t.jsx)("span",{className:"truncate text-sm text-slate-100",children:M?M.name:"No tutor focused"}),M?(0,t.jsx)(a.Button,{type:"button",variant:"outline",className:"ml-auto h-7 border-slate-500 bg-slate-800 px-2 py-1 text-xs text-slate-100",onClick:()=>S(null),children:"Clear"}):null]})]})]})]}),R&&(0,t.jsxs)("div",{className:"pointer-events-auto flex items-center justify-between rounded-xl border border-cyan-300/30 bg-slate-950/65 p-3 backdrop-blur-md",children:[(0,t.jsx)("span",{className:"text-xs uppercase tracking-[0.16em] text-cyan-300",children:"Globe Rotation"}),(0,t.jsx)("button",{onClick:()=>I(e=>!e),className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-slate-800 hover:bg-slate-700 border border-slate-600 text-xs text-slate-200 transition-colors",title:C?"Pause rotation":"Resume rotation",children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),(0,t.jsx)("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]}),"Pause"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M8 5v14l11-7z"})}),"Rotate"]})})]}),(0,t.jsx)("div",{className:"pointer-events-auto flex items-center gap-2 rounded-xl border border-cyan-300/30 bg-slate-950/65 p-3 backdrop-blur-md",children:R?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Badge,{className:"bg-[#4FD1C5]/20 text-[#4FD1C5] hover:bg-[#4FD1C5]/30",children:"Tutor"}),(0,t.jsx)(n.Badge,{className:"bg-[#3A7CFF]/20 text-[#3A7CFF] hover:bg-[#3A7CFF]/30",children:"Student"}),(0,t.jsx)(n.Badge,{className:"bg-emerald-500/15 text-emerald-200 hover:bg-emerald-500/20",children:"Active Session"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Badge,{className:"bg-cyan-500/15 text-cyan-200 hover:bg-cyan-500/20",children:"Tutor Node"}),(0,t.jsx)(n.Badge,{className:"bg-indigo-500/15 text-indigo-200 hover:bg-indigo-500/20",children:"Student Node"}),(0,t.jsx)(n.Badge,{className:"bg-emerald-500/15 text-emerald-200 hover:bg-emerald-500/20",children:"Active Link"})]})})]})]})}function y({title:e,value:r,glow:s=!1,color:i}){return(0,t.jsxs)("div",{className:"rounded-xl border border-cyan-300/30 bg-slate-950/65 p-3 text-slate-100 backdrop-blur-md",children:[(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-[0.16em] text-slate-300",children:e}),(0,t.jsx)("p",{className:"mt-1 text-2xl font-bold",style:{color:i||(s?"#6ee7b7":void 0),textShadow:s?"0 0 18px rgba(16,185,129,0.55)":void 0},children:r.toLocaleString()})]})}let v=[{value:"7",label:"7 Days"},{value:"30",label:"30 Days"},{value:"90",label:"90 Days"}];function b(){let[e,i]=(0,r.useState)(7);return(0,t.jsxs)("div",{className:"relative h-full w-full bg-slate-950",children:[(0,t.jsx)(m,{days:e}),(0,t.jsx)("div",{className:"absolute left-6 z-50",style:{bottom:"24px"},children:(0,t.jsx)("div",{className:"rounded-xl border border-cyan-300/30 bg-slate-950/80 p-2 backdrop-blur-md shadow-lg",children:(0,t.jsx)(s.Tabs,{value:String(e),onValueChange:e=>i(Number(e)),children:(0,t.jsx)(s.TabsList,{className:"bg-slate-900/90",children:v.map(e=>(0,t.jsx)(s.TabsTrigger,{value:e.value,children:e.label},e.value))})})})})]})}e.s(["default",()=>b],896846)},432593,e=>{e.v(t=>Promise.all(["static/chunks/6eb6095af18c97d3.js","static/chunks/f87efd162e3e3c98.js"].map(t=>e.l(t))).then(()=>t(817434)))},111379,e=>{e.v(t=>Promise.all(["static/chunks/f99bd77178979347.js","static/chunks/0394eb70838f1f85.js"].map(t=>e.l(t))).then(()=>t(652965)))}]);

//# debugId=dcce70bc-b34d-0460-62bd-2fca8969658d
//# sourceMappingURL=46b12cbf48134303.js.map