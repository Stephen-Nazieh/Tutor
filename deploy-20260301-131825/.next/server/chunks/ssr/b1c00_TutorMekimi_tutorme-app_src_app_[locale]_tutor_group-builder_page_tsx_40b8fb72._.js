;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="c296d62c-b986-a3e4-37b9-3b4ed2b19816")}catch(e){}}();
module.exports=[11548,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(52028),e=a.i(88684),f=a.i(113098),g=a.i(333340),h=a.i(981354),i=a.i(529004),j=a.i(868606),k=a.i(206209),l=a.i(147779),m=a.i(595484),n=a.i(36094),o=a.i(479680),p=a.i(414030),q=a.i(957512),r=a.i(927910),s=a.i(946685),t=a.i(431071),u=a.i(141617),v=a.i(143650),w=a.i(207870),x=a.i(951311),y=a.i(74459),z=a.i(748151),A=a.i(50730),B=a.i(771516),C=a.i(858901),D=a.i(192730),E=a.i(342621),F=a.i(656247),G=a.i(846438),H=a.i(494176),I=a.i(884225);let J=[{value:"beginner",label:"Beginner"},{value:"intermediate",label:"Intermediate"},{value:"advanced",label:"Advanced"}],K=["SGD","USD","CNY","MYR","EUR","GBP","AUD","CAD","JPY","INR","KRW","HKD"],L=[{value:"en",label:"English"},{value:"zh-CN",label:"Chinese (Simplified)"},{value:"zh-TW",label:"Chinese (Traditional)"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"ms",label:"Malay"},{value:"ta",label:"Tamil"}],M=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],N=[{id:"batch-1",name:"January 2025 - Beginner",startDate:"2025-01-15",order:1,difficulty:"beginner",languageOfInstruction:"en",price:99,currency:"USD",schedule:[{dayOfWeek:"Monday",startTime:"10:00",durationMinutes:60},{dayOfWeek:"Wednesday",startTime:"10:00",durationMinutes:60}],enrollmentCount:15,isLive:!0,assignedCourses:[]},{id:"batch-2",name:"February 2025 - Intermediate",startDate:"2025-02-01",order:2,difficulty:"intermediate",languageOfInstruction:"en",price:149,currency:"USD",schedule:[{dayOfWeek:"Tuesday",startTime:"14:00",durationMinutes:90}],enrollmentCount:12,isLive:!1,assignedCourses:[]}];function O(){let[a,O]=(0,c.useState)(N),[P,Q]=(0,c.useState)(N[0]?.id||""),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(!1),[X,Y]=(0,c.useState)(!1),[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)(!1),[ab,ac]=(0,c.useState)(null),[ad,ae]=(0,c.useState)([]),[af,ag]=(0,c.useState)(!1);(0,c.useEffect)(()=>{W(!0),setTimeout(()=>{let a=localStorage.getItem("tutor_groups");if(a)try{let b=JSON.parse(a);O(a=>[...b,...a.filter(a=>!b.find(b=>b.id===a.id))]),!P&&b.length>0&&Q(b[0].id)}catch{O(N)}else O(N),N.length>0&&Q(N[0].id);W(!1)},500)},[]),(0,c.useEffect)(()=>{_&&(ag(!0),fetch("/api/tutor/courses",{credentials:"include"}).then(a=>a.ok?a.json():{courses:[]}).then(a=>{ae((a.courses||[]).map(a=>({id:a.id,name:a.name,description:a.description,subject:a.subject,difficulty:a.difficulty,stats:{moduleCount:a._count?.modules||0,lessonCount:a._count?.lessons||0,quizCount:0,studentCount:a._count?.enrollments||0},assignments:{total:0,groups:[]}})))}).catch(()=>ae([])).finally(()=>ag(!1)))},[_]);let ah=async()=>{if(!R.trim())return;U(!0);let b={id:`batch-${Date.now()}`,name:R.trim(),startDate:null,order:a.length+1,difficulty:"beginner",languageOfInstruction:"en",price:null,currency:"USD",schedule:[],enrollmentCount:0,isLive:!1,assignedCourses:[]};O(a=>[...a,b]),Q(b.id),S(""),$(!0),G.toast.success("Group created. Click Save to persist changes."),U(!1)},ai=(a,b)=>{O(c=>c.map(c=>c.id===a?{...c,...b}:c)),$(!0)},aj=async b=>{Y(!0);let c=a.find(a=>a.id===b);if(!c){G.toast.error("Group not found"),Y(!1);return}let d=localStorage.getItem("tutor_groups"),e=[c,...(d?JSON.parse(d):[]).filter(a=>a.id!==c.id)];localStorage.setItem("tutor_groups",JSON.stringify(e)),$(!1),G.toast.success("Group saved successfully"),Y(!1)},ak=async()=>{Y(!0),localStorage.setItem("tutor_groups",JSON.stringify(a)),$(!1),G.toast.success("All groups saved successfully"),Y(!1)},al=a=>{let b=`${window.location.origin}/curriculum/enroll?group=${a}`;navigator.clipboard.writeText(b),G.toast.success("Group enrollment link copied")},am=(a,b,c)=>{O(d=>d.map(d=>{if(d.id!==a)return d;let e=[...d.schedule];return e[b]={...e[b],...c},{...d,schedule:e}})),$(!0)},an=a=>{ac(a),aa(!0)},ao=async(a,b)=>{let c=ad.find(b=>b.id===a);c&&(O(d=>d.map(d=>{if(d.id!==b)return d;let e=d.assignedCourses||[];return e.some(b=>b.courseId===a)?d:{...d,assignedCourses:[...e,{courseId:c.id,name:c.name,description:c.description||null,subject:c.subject,difficulty:c.difficulty||"beginner",assignedAt:new Date().toISOString()}]}})),$(!0),G.toast.success(`Course "${c.name}" assigned to group`))};if(V)return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,b.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-blue-500"})});let ap=a.find(a=>a.id===P);return(0,b.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,b.jsx)(d.default,{href:"/tutor/dashboard",children:(0,b.jsx)(p.ArrowLeft,{className:"h-5 w-5"})})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,b.jsx)(l.Users,{className:"h-6 w-6 text-blue-500"}),"Group Builder"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Create and manage your teaching groups and schedules"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[Z&&(0,b.jsxs)(e.Button,{variant:"default",onClick:ak,disabled:X,className:"gap-2",children:[X?(0,b.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(D.Save,{className:"h-4 w-4"}),"Save All Changes"]}),(0,b.jsx)(e.Button,{asChild:!0,variant:"outline",children:(0,b.jsx)(d.default,{href:"/tutor/groups",children:"View My Groups"})})]})]}),0===a.length?(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"p-8",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"No groups created yet."}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.Input,{placeholder:"Group name (e.g. Batch 1, Jan 2025)",value:R,onChange:a=>S(a.target.value),className:"max-w-[300px]"}),(0,b.jsxs)(e.Button,{onClick:ah,disabled:T||!R.trim(),children:[T?(0,b.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin mr-2"}):(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-2"}),"Create Group"]})]})]})}):(0,b.jsxs)(j.Tabs,{value:P,onValueChange:Q,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 border-b pb-4",children:[(0,b.jsx)(j.TabsList,{className:"bg-transparent h-auto p-0 flex-wrap gap-2",children:a.map(a=>(0,b.jsx)(j.TabsTrigger,{value:a.id,className:"data-[state=active]:bg-blue-50 data-[state=active]:border-blue-200 border px-4 py-2 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:a.name}),(0,b.jsx)(g.Badge,{variant:"secondary",className:"text-xs",children:String(a.enrollmentCount)}),a.isLive&&(0,b.jsx)(q.Radio,{className:"h-3 w-3 text-green-500 animate-pulse"})]})},a.id))}),(0,b.jsxs)("div",{className:"flex items-center gap-2 pl-4 border-l",children:[(0,b.jsx)(h.Input,{placeholder:"New group name",value:R,onChange:a=>S(a.target.value),className:"w-[180px]"}),(0,b.jsx)(e.Button,{size:"sm",onClick:ah,disabled:T||!R.trim(),children:T?(0,b.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(m.Plus,{className:"h-4 w-4"})})]})]}),a.map(a=>(0,b.jsxs)(j.TabsContent,{value:a.id,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[String(a.enrollmentCount)," student",1!==a.enrollmentCount?"s":""," enrolled"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>aj(a.id),disabled:X,className:"gap-2",children:[X?(0,b.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(D.Save,{className:"h-4 w-4"}),"Save Group"]}),(0,b.jsxs)(e.Button,{variant:a.isLive?"default":"outline",size:"sm",onClick:()=>{var b,c;return b=a.id,c=!a.isLive,void(O(a=>a.map(a=>a.id===b?{...a,isLive:c}:a)),G.toast.success(c?"Group is now online":"Group is now offline"))},className:(0,H.cn)("gap-2",a.isLive&&"bg-green-600 hover:bg-green-700"),children:[(0,b.jsx)(q.Radio,{className:(0,H.cn)("h-4 w-4",a.isLive&&"animate-pulse")}),a.isLive?"Online":"Offline"]}),(0,b.jsxs)(e.Button,{variant:"default",size:"sm",className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,b.jsx)(r.Video,{className:"h-4 w-4"}),"Enter Classroom"]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>al(a.id),children:[(0,b.jsx)(n.Copy,{className:"h-4 w-4 mr-2"}),"Copy Link"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(s.BarChart3,{className:"h-4 w-4"}),"Group Settings"]})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Difficulty Level"}),(0,b.jsx)("div",{className:"flex gap-2",children:J.map(c=>(0,b.jsxs)("button",{onClick:()=>ai(a.id,{difficulty:c.value}),className:(0,H.cn)("flex-1 py-2 px-3 rounded-lg border text-sm font-medium transition-all flex items-center justify-center gap-1",a.difficulty===c.value?"beginner"===c.value?"bg-green-500 text-white border-green-500":"intermediate"===c.value?"bg-blue-500 text-white border-blue-500":"bg-purple-500 text-white border-purple-500":"bg-white text-gray-700 hover:bg-gray-50"),children:["beginner"===c.value&&(0,b.jsx)(y.SignalLow,{className:"h-4 w-4"}),"intermediate"===c.value&&(0,b.jsx)(w.Signal,{className:"h-4 w-4"}),"advanced"===c.value&&(0,b.jsx)(x.SignalHigh,{className:"h-4 w-4"}),c.label]},c.value))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{className:"flex items-center gap-2",children:[(0,b.jsx)(B.Globe,{className:"h-4 w-4"}),"Language of Instruction"]}),(0,b.jsxs)(k.Select,{value:a.languageOfInstruction,onValueChange:b=>ai(a.id,{languageOfInstruction:b}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsx)(k.SelectContent,{children:L.map(a=>(0,b.jsx)(k.SelectItem,{value:a.value,children:a.label},a.value))})]})]})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(C.DollarSign,{className:"h-4 w-4"}),"Pricing"]})}),(0,b.jsx)(f.CardContent,{className:"space-y-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Group Price"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(h.Input,{type:"number",min:0,step:.01,placeholder:"0.00",value:a.price??"",onChange:b=>{let c=""===b.target.value?null:Number(b.target.value);ai(a.id,{price:c})}}),(0,b.jsxs)(k.Select,{value:a.currency||"USD",onValueChange:b=>ai(a.id,{currency:b}),children:[(0,b.jsx)(k.SelectTrigger,{className:"w-[100px]",children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsx)(k.SelectContent,{children:K.map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))})]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Set a custom price for this group. Leave empty to use the default course price."})]})})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(E.BookOpen,{className:"h-4 w-4"}),"Assigned Courses"]}),(0,b.jsxs)(e.Button,{size:"sm",onClick:()=>an(a.id),children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-1"}),"Assign Course"]})]}),(0,b.jsx)(f.CardContent,{children:a.assignedCourses&&0!==a.assignedCourses.length?(0,b.jsx)("div",{className:"space-y-3",children:a.assignedCourses.map(c=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h4",{className:"font-medium truncate",children:c.name}),(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs capitalize",children:c.difficulty})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-1",children:c.description||"No description"}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Subject: ",c.subject]}),(0,b.jsxs)("span",{children:["Assigned: ",new Date(c.assignedAt).toLocaleDateString()]})]})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>{var b,d;return b=a.id,d=c.courseId,void(O(a=>a.map(a=>a.id!==b?a:{...a,assignedCourses:(a.assignedCourses||[]).filter(a=>a.courseId!==d)})),$(!0),G.toast.success("Course removed from group"))},children:(0,b.jsx)(F.X,{className:"h-4 w-4"})})]},c.courseId))}):(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(E.BookOpen,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"No courses assigned to this group yet."}),(0,b.jsxs)(e.Button,{size:"sm",onClick:()=>an(a.id),children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-1"}),"Assign Your First Course"]})]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(u.Calendar,{className:"h-4 w-4"}),"Class Schedule"]}),(0,b.jsxs)(e.Button,{size:"sm",onClick:()=>{var b;return b=a.id,void(O(a=>a.map(a=>a.id!==b?a:{...a,schedule:[...a.schedule,{dayOfWeek:"Monday",startTime:"09:00",durationMinutes:60}]})),$(!0))},children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-1"}),"Add Class Slot"]})]}),(0,b.jsx)(f.CardContent,{children:0===a.schedule.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No schedule set. Add class slots to define when this group meets."}):(0,b.jsx)("div",{className:"space-y-3",children:a.schedule.map((c,d)=>(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)(k.Select,{value:c.dayOfWeek,onValueChange:b=>am(a.id,d,{dayOfWeek:b}),children:[(0,b.jsx)(k.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsx)(k.SelectContent,{children:M.map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))})]}),(0,b.jsx)(h.Input,{type:"time",value:c.startTime,onChange:b=>am(a.id,d,{startTime:b.target.value}),className:"w-[120px]"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,b.jsx)(A.Clock,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)(h.Input,{type:"number",min:15,max:240,step:15,value:c.durationMinutes,onChange:b=>am(a.id,d,{durationMinutes:parseInt(b.target.value)||60}),className:"w-[80px]"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"minutes"})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>{var b;return b=a.id,void(O(a=>a.map(a=>a.id!==b?a:{...a,schedule:a.schedule.filter((a,b)=>b!==d)})),$(!0))},children:(0,b.jsx)(v.Trash2,{className:"h-4 w-4"})})]},d))})})]}),(0,b.jsxs)(f.Card,{className:"bg-blue-50 border-blue-200",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(t.Link,{className:"h-4 w-4 text-blue-500"}),"Share & Enrollment"]})}),(0,b.jsxs)(f.CardContent,{className:"space-y-3",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Share this group link for students to join this specific group."}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.Input,{readOnly:!0,value:`/curriculum/enroll?group=${a.id}`,className:"font-mono text-sm bg-white flex-1"}),(0,b.jsxs)(e.Button,{variant:"outline",onClick:()=>al(a.id),children:[(0,b.jsx)(n.Copy,{className:"h-4 w-4 mr-2"}),"Copy"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(z.CheckCircle2,{className:"h-4 w-4 text-blue-500"}),(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{children:String(a.enrollmentCount)})," students enrolled in this group"]})]})]})]})]},a.id))]}),(0,b.jsx)(I.AssignCourseModal,{isOpen:_,onClose:()=>aa(!1),onAssign:ao,courses:ad,batches:ap&&ab===ap.id?[ap]:[],preselectedBatchId:ab||void 0})]})}a.s(["default",()=>O])}];

//# debugId=c296d62c-b986-a3e4-37b9-3b4ed2b19816
//# sourceMappingURL=b1c00_TutorMekimi_tutorme-app_src_app_%5Blocale%5D_tutor_group-builder_page_tsx_40b8fb72._.js.map