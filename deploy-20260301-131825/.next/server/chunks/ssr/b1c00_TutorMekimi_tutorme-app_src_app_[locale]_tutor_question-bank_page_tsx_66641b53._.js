;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b9a9ee95-b556-93ed-e190-2c75bd57ec08")}catch(e){}}();
module.exports=[934801,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(88684),e=a.i(981354),f=a.i(529004),g=a.i(763485),h=a.i(113098),i=a.i(333340),j=a.i(206209),k=a.i(263805),l=a.i(384076),m=a.i(846438),n=a.i(458588),o=a.i(595484),p=a.i(143650),q=a.i(268067),r=a.i(36094),s=a.i(342621),t=a.i(934469),u=a.i(656247),v=a.i(479680);let w=[{value:"multiple_choice",label:"Multiple Choice",icon:"◎"},{value:"true_false",label:"True / False",icon:"☑"},{value:"short_answer",label:"Short Answer",icon:"✎"},{value:"essay",label:"Essay",icon:"¶"},{value:"multi_select",label:"Multi-Select",icon:"☑☑"},{value:"fill_in_blank",label:"Fill in Blank",icon:"___"},{value:"matching",label:"Matching",icon:"⇄"}],x=[{value:"easy",label:"Easy",color:"bg-green-100 text-green-700"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-700"},{value:"hard",label:"Hard",color:"bg-red-100 text-red-700"}],y=["Mathematics","Physics","Chemistry","Biology","English","History","Geography","Computer Science","Economics","Other"];function z(){let[a,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)("all"),[G,H]=(0,c.useState)("all"),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)([]),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)({type:"multiple_choice",question:"",options:["","","",""],correctAnswer:"",explanation:"",hint:"",points:1,difficulty:"medium",tags:[],subject:"",isPublic:!1}),S=(0,c.useCallback)(async()=>{try{let a=new URLSearchParams;C&&a.set("q",C),"all"!==E&&a.set("type",E),"all"!==G&&a.set("difficulty",G);let b=await fetch(`/api/tutor/question-bank?${a}`);if(b.ok){let a=await b.json();z(a.questions)}}catch(a){m.toast.error("Failed to load questions")}finally{B(!1)}},[C,E,G]),T=(0,c.useCallback)(async()=>{try{let a=await fetch("/api/tutor/question-bank/tags");if(a.ok){let b=await a.json();N(b.tags)}}catch(a){console.error("Failed to load tags")}},[]);(0,c.useEffect)(()=>{S(),T()},[S,T]);let U=()=>{R({type:"multiple_choice",question:"",options:["","","",""],correctAnswer:"",explanation:"",hint:"",points:1,difficulty:"medium",tags:[],subject:"",isPublic:!1}),P(""),L(null)},V=(0,c.useCallback)(async()=>{try{let a=await fetch("/api/csrf",{credentials:"include"}),b=await a.json().catch(()=>({}));return b?.token??null}catch{return null}},[]),W=async()=>{try{let a=await V(),b="Other"===Q.subject?O.trim():Q.subject,c={...Q,subject:b||"",options:"multiple_choice"===Q.type||"multi_select"===Q.type?Q.options.filter(a=>a.trim()):void 0},d=K?`/api/tutor/question-bank/${K.id}`:"/api/tutor/question-bank",e=await fetch(d,{method:K?"PATCH":"POST",headers:{"Content-Type":"application/json",...a?{"X-CSRF-Token":a}:{}},credentials:"include",body:JSON.stringify(c)});if(e.ok)m.toast.success(K?"Question updated":"Question created"),J(!1),U(),S();else{let a=await e.json();m.toast.error(a.error||"Failed to save question")}}catch(a){m.toast.error("An error occurred")}},X=async a=>{if(confirm("Are you sure you want to delete this question?"))try{let b=await V();(await fetch(`/api/tutor/question-bank/${a}`,{method:"DELETE",headers:{...b?{"X-CSRF-Token":b}:{}},credentials:"include"})).ok?(m.toast.success("Question deleted"),S()):m.toast.error("Failed to delete question")}catch(a){m.toast.error("An error occurred")}},Y=async a=>{try{let b=await V();(await fetch("/api/tutor/question-bank",{method:"POST",headers:{"Content-Type":"application/json",...b?{"X-CSRF-Token":b}:{}},credentials:"include",body:JSON.stringify({type:a.type,question:`${a.question} (Copy)`,options:a.options,correctAnswer:a.correctAnswer,explanation:a.explanation,hint:a.hint,points:a.points,difficulty:a.difficulty,tags:a.tags,subject:a.subject,isPublic:a.isPublic})})).ok&&(m.toast.success("Question duplicated"),S())}catch(a){m.toast.error("Failed to duplicate question")}};return(0,b.jsxs)("div",{className:"container mx-auto p-6 max-w-7xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,b.jsx)(s.BookOpen,{className:"w-6 h-6"}),"Question Bank"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage your reusable questions for quizzes and assessments"})]}),(0,b.jsxs)(k.Dialog,{open:I,onOpenChange:J,children:[(0,b.jsx)(k.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{onClick:U,children:[(0,b.jsx)(o.Plus,{className:"w-4 h-4 mr-2"}),"Add Question"]})}),(0,b.jsxs)(k.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(k.DialogHeader,{children:(0,b.jsx)(k.DialogTitle,{children:K?"Edit Question":"Create New Question"})}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(f.Label,{children:"Subject"}),(0,b.jsxs)(j.Select,{value:Q.subject||"__none__",onValueChange:a=>R(b=>({...b,subject:"__none__"===a?"":a})),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Select subject"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"__none__",children:"Unspecified"}),y.map(a=>(0,b.jsx)(j.SelectItem,{value:a,children:a},a))]})]}),"Other"===Q.subject&&(0,b.jsx)(e.Input,{className:"mt-2",value:O,onChange:a=>P(a.target.value),placeholder:"Enter subject"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(f.Label,{children:"Type"}),(0,b.jsxs)(j.Select,{value:Q.type,onValueChange:a=>R(b=>({...b,type:a})),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsx)(j.SelectContent,{children:w.map(a=>(0,b.jsx)(j.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(f.Label,{children:"Difficulty"}),(0,b.jsxs)(j.Select,{value:Q.difficulty,onValueChange:a=>R(b=>({...b,difficulty:a})),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsx)(j.SelectContent,{children:x.map(a=>(0,b.jsx)(j.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(f.Label,{children:"Points"}),(0,b.jsx)(e.Input,{type:"number",min:1,value:Q.points,onChange:a=>R(b=>({...b,points:parseInt(a.target.value)||1}))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(f.Label,{children:"Question"}),(0,b.jsx)(g.Textarea,{value:Q.question,onChange:a=>R(b=>({...b,question:a.target.value})),placeholder:"Enter your question...",rows:3})]}),("multiple_choice"===Q.type||"multi_select"===Q.type)&&(0,b.jsxs)("div",{children:[(0,b.jsx)(f.Label,{children:"Options"}),(0,b.jsxs)("div",{className:"space-y-2",children:[Q.options.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"multi_select"===Q.type?"checkbox":"radio",name:"correctAnswer",checked:"multi_select"===Q.type?(Q.correctAnswer||[]).includes(a):Q.correctAnswer===a,onChange:()=>{if("multi_select"===Q.type){let b=Q.correctAnswer||[];R(c=>({...c,correctAnswer:b.includes(a)?b.filter(b=>b!==a):[...b,a]}))}else R(b=>({...b,correctAnswer:a}))},className:"w-4 h-4"}),(0,b.jsx)(e.Input,{value:a,onChange:a=>{var b;return b=a.target.value,void R(a=>({...a,options:a.options.map((a,d)=>d===c?b:a)}))},placeholder:`Option ${String.fromCharCode(65+c)}`,className:"flex-1"}),Q.options.length>2&&(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{R(a=>({...a,options:a.options.filter((a,b)=>b!==c)}))},children:(0,b.jsx)(u.X,{className:"w-4 h-4"})})]},c)),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{R(a=>({...a,options:[...a.options,""]}))},children:[(0,b.jsx)(o.Plus,{className:"w-4 h-4 mr-2"}),"Add Option"]})]})]}),"true_false"===Q.type&&(0,b.jsxs)("div",{children:[(0,b.jsx)(f.Label,{children:"Correct Answer"}),(0,b.jsx)("div",{className:"flex gap-2 mt-2",children:["true","false"].map(a=>(0,b.jsx)(d.Button,{type:"button",variant:Q.correctAnswer===a?"default":"outline",onClick:()=>R(b=>({...b,correctAnswer:a})),children:"true"===a?"True":"False"},a))})]}),("short_answer"===Q.type||"essay"===Q.type)&&(0,b.jsxs)("div",{children:[(0,b.jsx)(f.Label,{children:"Expected Answer / Rubric"}),(0,b.jsx)(g.Textarea,{value:Q.correctAnswer,onChange:a=>R(b=>({...b,correctAnswer:a.target.value})),placeholder:"Expected answer or grading rubric...",rows:3})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(f.Label,{children:"Explanation (shown after answering)"}),(0,b.jsx)(g.Textarea,{value:Q.explanation,onChange:a=>R(b=>({...b,explanation:a.target.value})),placeholder:"Why this is the correct answer...",rows:2})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(f.Label,{children:"Hint (optional)"}),(0,b.jsx)(g.Textarea,{value:Q.hint,onChange:a=>R(b=>({...b,hint:a.target.value})),placeholder:"Hint to help students...",rows:2})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(f.Label,{children:"Tags"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[M.map(a=>(0,b.jsx)(i.Badge,{variant:Q.tags.includes(a)?"default":"outline",className:"cursor-pointer",onClick:()=>{R(b=>({...b,tags:b.tags.includes(a)?b.tags.filter(b=>b!==a):[...b.tags,a]}))},children:a},a)),(0,b.jsx)(e.Input,{placeholder:"Add new tag...",className:"w-32",onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();let b=a.target.value.trim();b&&!Q.tags.includes(b)&&(R(a=>({...a,tags:[...a.tags,b]})),a.target.value="")}}})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Checkbox,{checked:Q.isPublic,onCheckedChange:a=>R(b=>({...b,isPublic:a}))}),(0,b.jsx)(f.Label,{children:"Make this question public for other tutors"})]})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),(0,b.jsx)(d.Button,{onClick:W,children:K?"Update":"Create"})]})]})]})]}),(0,b.jsx)(h.Card,{className:"mb-6",children:(0,b.jsx)(h.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,b.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(e.Input,{placeholder:"Search questions...",value:C,onChange:a=>D(a.target.value),className:"pl-9"})]})}),(0,b.jsxs)(j.Select,{value:E,onValueChange:a=>F(a),children:[(0,b.jsxs)(j.SelectTrigger,{className:"w-[180px]",children:[(0,b.jsx)(t.Filter,{className:"w-4 h-4 mr-2"}),(0,b.jsx)(j.SelectValue,{placeholder:"All Types"})]}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Types"}),w.map(a=>(0,b.jsx)(j.SelectItem,{value:a.value,children:a.label},a.value))]})]}),(0,b.jsxs)(j.Select,{value:G,onValueChange:a=>H(a),children:[(0,b.jsx)(j.SelectTrigger,{className:"w-[150px]",children:(0,b.jsx)(j.SelectValue,{placeholder:"All Difficulties"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Difficulties"}),x.map(a=>(0,b.jsx)(j.SelectItem,{value:a.value,children:a.label},a.value))]})]})]})})}),A?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(v.Loader2,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):0===a.length?(0,b.jsxs)(h.Card,{className:"p-12 text-center",children:[(0,b.jsx)(s.BookOpen,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No questions yet"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create your first question to start building your question bank"}),(0,b.jsxs)(d.Button,{onClick:()=>{U(),J(!0)},children:[(0,b.jsx)(o.Plus,{className:"w-4 h-4 mr-2"}),"Add Question"]})]}):(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>{var c;let e,f;return(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(i.Badge,{variant:"outline",children:(e=a.type,w.find(a=>a.value===e)?.label||e)}),(0,b.jsx)(i.Badge,{className:(c=a.difficulty,f=x.find(a=>a.value===c),f?.color||"bg-gray-100"),children:a.difficulty}),(0,b.jsxs)(i.Badge,{variant:"secondary",children:[a.points," pts"]}),a.subject&&(0,b.jsx)(i.Badge,{variant:"outline",children:a.subject})]}),(0,b.jsx)("p",{className:"font-medium mb-2",children:a.question}),a.options?.length>0&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground mb-2",children:["Options: ",a.options.map((c,d)=>(0,b.jsxs)("span",{className:a.correctAnswer===c?"text-green-600 font-medium":"",children:[c,d<a.options.length-1?", ":""]},d))]}),a.tags.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:a.tags.map(a=>(0,b.jsx)(i.Badge,{variant:"secondary",className:"text-xs",children:a},a))})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{L(a),P(""),R({type:a.type,question:a.question,options:a.options||["","","",""],correctAnswer:String(a.correctAnswer||""),explanation:a.explanation||"",hint:a.hint||"",points:a.points,difficulty:a.difficulty,tags:a.tags,subject:a.subject&&y.includes(a.subject)?a.subject:a.subject?"Other":"",isPublic:a.isPublic}),a.subject&&!y.includes(a.subject)&&P(a.subject),J(!0)},children:(0,b.jsx)(q.Edit,{className:"w-4 h-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>Y(a),children:(0,b.jsx)(r.Copy,{className:"w-4 h-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>X(a.id),children:(0,b.jsx)(p.Trash2,{className:"w-4 h-4 text-destructive"})})]})]})})},a.id)})})]})}a.s(["default",()=>z])}];

//# debugId=b9a9ee95-b556-93ed-e190-2c75bd57ec08
//# sourceMappingURL=b1c00_TutorMekimi_tutorme-app_src_app_%5Blocale%5D_tutor_question-bank_page_tsx_66641b53._.js.map