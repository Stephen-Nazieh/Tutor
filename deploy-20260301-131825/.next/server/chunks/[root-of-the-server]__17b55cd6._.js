;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="1fd90022-250f-db0f-dd3b-f32875091186")}catch(e){}}();
module.exports=[908286,e=>{"use strict";async function t(e,t){var r=e instanceof Promise?await e:e;if(!r||"object"!=typeof r)return;let i=r[t];return null!=i?Array.isArray(i)?i[0]:i:void 0}e.s(["getParamAsync",()=>t])},902157,(e,t,r)=>{t.exports=e.x("node:fs",()=>require("node:fs"))},750227,(e,t,r)=>{t.exports=e.x("node:path",()=>require("node:path"))},450869,e=>{"use strict";let t="tutorme:query:",r=null,i=null,a=!1,s=!(void 0!==globalThis.EdgeRuntime||"u">typeof process&&0);function n(){return s?(i||(i=new Map),i):null}async function l(){if(!s)return null;if(a)return r;try{let t=process.env.REDIS_URL;if(!t)return console.log("[DB] Redis URL not configured, using in-memory cache"),a=!0,null;let{Redis:i}=await e.A(443460);return(r=new i(t,{retryStrategy:e=>Math.min(50*e,2e3),maxRetriesPerRequest:3})).on("error",e=>{console.error("[Redis] Connection error:",e),r=null}),console.log("[DB] Redis cache initialized"),a=!0,r}catch(e){return console.warn("[DB] Failed to initialize Redis, using in-memory cache"),a=!0,null}}if(s)try{let{drizzleDb:t}=e.r(738597);console.log("[DB] Drizzle client (default db) initialized")}catch(e){console.error("[DB] Failed to initialize Drizzle:",e)}e.s(["cache",0,{ensureRedis:async()=>s?(a||await l(),r):null,async get(e){if(!s)return null;let r=t+e,i=await this.ensureRedis();if(i)try{let e=await i.get(r);if(e)return JSON.parse(e)}catch(e){console.error("[Cache] Redis get error:",e)}let a=n();if(!a)return null;let l=a.get(r);return l&&l.expires>Date.now()?l.data:(a.delete(r),null)},async set(e,r,i=60){if(!s)return;let a=t+e,l=await this.ensureRedis();if(l)try{await l.setex(a,i,JSON.stringify(r));return}catch(e){console.error("[Cache] Redis set error:",e)}let o=n();o&&o.set(a,{data:r,expires:Date.now()+1e3*i})},async delete(e){if(!s)return;let r=t+e,i=await this.ensureRedis();if(i)try{await i.del(r)}catch(e){console.error("[Cache] Redis del error:",e)}let a=n();a&&a.delete(r)},async clear(){if(!s)return;let e=await this.ensureRedis();if(e)try{let r=await e.keys(t+"*");r.length>0&&await e.del(...r)}catch(e){console.error("[Cache] Redis clear error:",e)}let r=n();r&&r.clear()},async getOrSet(e,t,r=60){let i=await this.get(e);if(null!==i)return i;let a=await t();return await this.set(e,a,r),a},async invalidatePattern(e){if(!s)return;let r=await this.ensureRedis();if(r)try{let i=await r.keys(t+e);i.length>0&&await r.del(...i)}catch(e){console.error("[Cache] Pattern invalidation error:",e)}let i=n();if(i){let r=new RegExp(t+e.replace("*",".*"));for(let e of i.keys())r.test(e)&&i.delete(e)}}}])},412171,e=>{e.v(t=>Promise.all(["server/chunks/b1c00_TutorMekimi_tutorme-app_src_lib_security_suspicious-activity_ts_7865686f._.js"].map(t=>e.l(t))).then(()=>t(145830)))},443460,e=>{e.v(t=>Promise.all(["server/chunks/[externals]_ioredis_c74819ca._.js"].map(t=>e.l(t))).then(()=>t(693545)))},571363,e=>{e.v(t=>Promise.all(["server/chunks/ADK_WORKSPACE_TutorMekimi_tutorme-app_src_lib_security_api-key_ts_45091e81._.js"].map(t=>e.l(t))).then(()=>t(175922)))},639477,e=>{e.v(t=>Promise.all(["server/chunks/ADK_WORKSPACE_TutorMekimi_tutorme-app_src_lib_gamification_fb57774d._.js","server/chunks/ADK_WORKSPACE_TutorMekimi_tutorme-app_src_lib_gamification_a22ba6d4._.js"].map(t=>e.l(t))).then(()=>t(433122)))}];

//# debugId=1fd90022-250f-db0f-dd3b-f32875091186
//# sourceMappingURL=%5Broot-of-the-server%5D__17b55cd6._.js.map