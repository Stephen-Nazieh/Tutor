;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="4689a6b1-3dfa-7006-934f-7e3da2c35c9c")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,716657,e=>{"use strict";var s=e.i(251474),t=e.i(800592),a=e.i(624842),r=e.i(536105),l=e.i(151651),n=e.i(870368),i=e.i(196415),c=e.i(256288),d=e.i(956208),o=e.i(311679),x=e.i(462423),m=e.i(647667),u=e.i(192858),h=e.i(795624),g=e.i(257418),j=e.i(10313),p=e.i(446143),N=e.i(828977),f=e.i(390553),y=e.i(388798);function v(){let[e,a]=(0,t.useState)([]),[r,i]=(0,t.useState)(0),[c,v]=(0,t.useState)(!1),[b,w]=(0,t.useState)(!1),C=(0,t.useRef)(null),k=(0,t.useRef)(null),S=(0,t.useCallback)(async()=>{try{let e=await fetch("/api/notifications?limit=10",{credentials:"include"});if(!e.ok)return;let s=await e.json();a(s.notifications||[]),i(s.unreadCount||0)}catch{}},[]);(0,t.useEffect)(()=>{S();let e=new EventSource("/api/notifications/stream");return k.current=e,e.addEventListener("notification",e=>{try{let s=JSON.parse(e.data);a(e=>[s,...e].slice(0,10)),i(e=>e+1)}catch{}}),e.addEventListener("error",()=>{}),()=>{e.close(),k.current=null}},[S]),(0,t.useEffect)(()=>{let e=e=>{C.current&&!C.current.contains(e.target)&&v(!1)};return c&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[c]);let T=async()=>{w(!0);try{await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({markAll:!0})}),a(e=>e.map(e=>({...e,read:!0}))),i(0)}catch{}w(!1)},R=async e=>{try{await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notificationIds:[e]})}),a(s=>s.map(s=>s.id===e?{...s,read:!0}:s)),i(e=>Math.max(0,e-1))}catch{}};return(0,s.jsxs)("div",{className:"relative",ref:C,children:[(0,s.jsxs)(n.Button,{variant:"ghost",size:"icon",onClick:()=>v(!c),className:"relative","aria-label":`Notifications${r>0?` (${r} unread)`:""}`,children:[(0,s.jsx)(d.Bell,{className:"h-5 w-5"}),r>0&&(0,s.jsx)("span",{className:"absolute -top-0.5 -right-0.5 flex h-4 min-w-[16px] items-center justify-center rounded-full bg-red-500 px-1 text-[10px] font-bold text-white animate-in zoom-in-50",children:r>99?"99+":r})]}),c&&(0,s.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-96 max-h-[480px] bg-white rounded-xl shadow-xl border z-50 flex flex-col animate-in slide-in-from-top-2 duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm",children:"Notifications"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[r>0&&(0,s.jsxs)(n.Button,{variant:"ghost",size:"sm",onClick:T,disabled:b,className:"text-xs gap-1 h-7",children:[(0,s.jsx)(p.CheckCheck,{className:"w-3 h-3"}),"Mark all read"]}),(0,s.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>v(!1),className:"h-7 w-7",children:(0,s.jsx)(N.X,{className:"w-3.5 h-3.5"})})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===e.length?(0,s.jsxs)("div",{className:"py-12 text-center text-gray-500",children:[(0,s.jsx)(d.Bell,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),(0,s.jsx)("p",{className:"text-sm",children:"No notifications yet"})]}):e.map(e=>(0,s.jsxs)("div",{className:(0,f.cn)("flex gap-3 px-4 py-3 border-b last:border-b-0 cursor-pointer transition-colors hover:bg-gray-50",!e.read&&"bg-blue-50/40"),onClick:()=>{e.read||R(e.id),e.actionUrl&&(v(!1),window.location.href=e.actionUrl)},children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center mt-0.5",children:(e=>{let t="w-4 h-4";switch(e){case"class":return(0,s.jsx)(o.Calendar,{className:(0,f.cn)(t,"text-blue-500")});case"assignment":return(0,s.jsx)(x.BookOpen,{className:(0,f.cn)(t,"text-amber-500")});case"achievement":return(0,s.jsx)(u.Trophy,{className:(0,f.cn)(t,"text-purple-500")});case"message":return(0,s.jsx)(m.MessageSquare,{className:(0,f.cn)(t,"text-green-500")});case"grade":return(0,s.jsx)(j.Zap,{className:(0,f.cn)(t,"text-indigo-500")});case"payment":return(0,s.jsx)(g.CreditCard,{className:(0,f.cn)(t,"text-emerald-500")});case"reminder":return(0,s.jsx)(h.AlertCircle,{className:(0,f.cn)(t,"text-orange-500")});default:return(0,s.jsx)(d.Bell,{className:(0,f.cn)(t,"text-gray-500")})}})(e.type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("p",{className:(0,f.cn)("text-sm",e.read?"text-gray-700":"font-medium"),children:[e.title,!e.read&&(0,s.jsx)("span",{className:"ml-1.5 w-1.5 h-1.5 bg-blue-500 rounded-full inline-block"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:e.message}),(0,s.jsx)("p",{className:"text-[11px] text-gray-400 mt-1",children:(e=>{try{return(0,y.formatDistanceToNow)(new Date(e),{addSuffix:!0})}catch{return""}})(e.createdAt)})]})]},e.id))}),(0,s.jsx)("div",{className:"border-t px-4 py-2",children:(0,s.jsx)(l.default,{href:"/student/notifications",onClick:()=>v(!1),children:(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",className:"w-full text-xs",children:"View all notifications"})})})]})]})}var b=e.i(598320),w=e.i(359364),C=e.i(212739),k=e.i(610570),S=e.i(58310),T=e.i(530661),R=e.i(785784),D=e.i(591768),B=e.i(129340),M=e.i(855437),I=e.i(476319);function A({gamification:e}){return e?(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,s.jsx)(i.Card,{children:(0,s.jsxs)(i.CardContent,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Level"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.level})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(I.TrendingUp,{className:"w-6 h-6 text-blue-600"})})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(D.Progress,{value:e.progress,className:"h-2"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.xpToNextLevel," XP to next level"]})]})]})}),(0,s.jsx)(i.Card,{children:(0,s.jsx)(i.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total XP"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.xp.toLocaleString()})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(M.Award,{className:"w-6 h-6 text-green-600"})})]})})}),(0,s.jsx)(i.Card,{children:(0,s.jsxs)(i.CardContent,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Current Streak"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.streakDays}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"days"})]})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(w.Flame,{className:"w-6 h-6 text-orange-600"})})]}),e.streakDays>0&&(0,s.jsx)(R.Badge,{className:"mt-2 bg-orange-100 text-orange-800",children:"Keep it up!"})]})}),(0,s.jsx)(i.Card,{children:(0,s.jsx)(i.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Best Streak"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.longestStreak}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"days"})]})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(B.Target,{className:"w-6 h-6 text-purple-600"})})]})})})]}):(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,s.jsx)(i.Card,{children:(0,s.jsxs)(i.CardContent,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Level"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:"1"})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(I.TrendingUp,{className:"w-6 h-6 text-blue-600"})})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Start learning to earn XP"})]})}),(0,s.jsx)(i.Card,{children:(0,s.jsxs)(i.CardContent,{className:"p-6",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total XP"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:"0"})]})}),(0,s.jsx)(i.Card,{children:(0,s.jsxs)(i.CardContent,{className:"p-6",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Current Streak"}),(0,s.jsxs)("p",{className:"text-3xl font-bold",children:["0 ",(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"days"})]})]})}),(0,s.jsx)(i.Card,{children:(0,s.jsxs)(i.CardContent,{className:"p-6",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Best Streak"}),(0,s.jsxs)("p",{className:"text-3xl font-bold",children:["0 ",(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"days"})]})]})})]})}var P=e.i(942152),L=e.i(396233),O=e.i(383918);function $({groups:e,joiningGroupId:t,onJoinGroup:a}){return(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(i.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(L.Users,{className:"w-5 h-5 text-blue-500"}),"Study Groups"]}),(0,s.jsx)(l.default,{href:"/student/study-groups",children:(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",children:"View All"})})]})}),(0,s.jsx)(i.CardContent,{children:0===e.length?(0,s.jsxs)("div",{className:"py-8 text-center text-gray-500",children:[(0,s.jsx)(L.Users,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,s.jsx)("p",{className:"font-medium text-gray-700",children:"No study groups yet"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"Join or create a group to study with others."}),(0,s.jsx)(l.default,{href:"/student/study-groups",children:(0,s.jsx)(n.Button,{className:"mt-4",children:"Browse study groups"})})]}):(0,s.jsx)("div",{className:"space-y-3",children:e.slice(0,3).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.subject}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:[e.currentMembers,"/",e.maxMembers," members"]})]}),e.isMember?(0,s.jsx)(R.Badge,{className:"bg-green-100 text-green-800",children:"Member"}):(0,s.jsx)(n.Button,{size:"sm",disabled:t===e.id,onClick:()=>a(e.id),children:t===e.id?(0,s.jsx)(O.Loader2,{className:"h-4 w-4 animate-spin"}):"Join"})]},e.id))})})]})}function z({loadingLabel:e="Loading your dashboard..."}){return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8","aria-live":"polite","aria-busy":"true",children:[(0,s.jsx)("p",{className:"sr-only",children:e}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("div",{className:"h-9 w-64 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-5 w-80 mt-2 bg-gray-100 rounded animate-pulse"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(e=>(0,s.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,s.jsx)("div",{className:"h-4 w-16 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-9 w-12 mt-3 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-2 w-full mt-4 bg-gray-100 rounded animate-pulse"})]},e))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,s.jsx)("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"space-y-3 mt-4",children:[1,2,3].map(e=>(0,s.jsxs)("div",{className:"flex gap-4 p-3 border rounded-lg",children:[(0,s.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gray-100 animate-pulse"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"h-4 w-3/4 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-3 w-1/2 mt-2 bg-gray-100 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-2 w-full mt-2 bg-gray-100 rounded animate-pulse"})]})]},e))})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,s.jsx)("div",{className:"h-6 w-44 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"space-y-3 mt-4",children:[1,2].map(e=>(0,s.jsx)("div",{className:"h-20 bg-gray-50 rounded-lg animate-pulse"},e))})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,s.jsx)("div",{className:"h-6 w-32 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-24 mt-4 bg-gray-50 rounded animate-pulse"})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,s.jsx)("div",{className:"h-6 w-20 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"space-y-3 mt-4",children:[1,2,3,4].map(e=>(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"h-3 w-full bg-gray-100 rounded animate-pulse"})},e))})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,s.jsx)("div",{className:"h-6 w-36 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"space-y-3 mt-4",children:[1,2].map(e=>(0,s.jsx)("div",{className:"h-16 bg-gray-50 rounded-lg animate-pulse"},e))})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,s.jsx)("div",{className:"h-6 w-28 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"space-y-3 mt-4",children:[1,2].map(e=>(0,s.jsx)("div",{className:"h-14 bg-gray-50 rounded-lg animate-pulse"},e))})]})]})]})]})}var U=e.i(879191);let E=(0,U.default)("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);function F(){return(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsx)(i.CardTitle,{className:"text-lg",children:"Quick actions"})}),(0,s.jsx)(i.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(n.Button,{variant:"outline",className:"w-full justify-center",asChild:!0,children:(0,s.jsxs)(l.default,{href:"/student/live/join",children:[(0,s.jsx)(k.Video,{className:"w-4 h-4 mr-2"})," Join Class"]})}),(0,s.jsx)(n.Button,{variant:"outline",className:"w-full justify-center",asChild:!0,children:(0,s.jsxs)(l.default,{href:"/student/subjects/browse",children:[(0,s.jsx)(x.BookOpen,{className:"w-4 h-4 mr-2"})," Browse"]})}),(0,s.jsx)(n.Button,{variant:"outline",className:"w-full justify-center",asChild:!0,children:(0,s.jsxs)(l.default,{href:"/student/ai-tutor",children:[(0,s.jsx)(m.MessageSquare,{className:"w-4 h-4 mr-2"})," AI Tutor"]})}),(0,s.jsx)(n.Button,{variant:"outline",className:"w-full justify-center",asChild:!0,children:(0,s.jsxs)(l.default,{href:"/student/missions",children:[(0,s.jsx)(B.Target,{className:"w-4 h-4 mr-2"})," Missions"]})}),(0,s.jsx)(n.Button,{variant:"outline",className:"w-full justify-center",asChild:!0,children:(0,s.jsxs)(l.default,{href:"/student/scores",children:[(0,s.jsx)(E,{className:"w-4 h-4 mr-2"})," Scores"]})})]})})]})}var H=e.i(800103),W=e.i(53169),G=e.i(545078),q=e.i(673419),V=e.i(104444);let Q=(0,U.default)("school",[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);function Y({courses:e,onCourseRemoved:a}){let[r,c]=(0,t.useState)(!1),[d,o]=(0,t.useState)(null),m=r||e.length<=5?e:e.slice(0,5),h=e.length>5,g=async()=>{let e=await fetch("/api/csrf",{credentials:"include"}),s=await e.json().catch(()=>({}));return s?.token??null},j=async e=>{o(e.subject);try{let s=await g(),t=await fetch("/api/student/subjects/unenroll",{method:"POST",headers:{"Content-Type":"application/json",...s&&{"X-CSRF-Token":s}},credentials:"include",body:JSON.stringify({subjectCode:e.subject})}),r=await t.json().catch(()=>({}));if(!t.ok)return void b.toast.error(r?.message??"Failed to remove subject");b.toast.success("Subject removed"),a?.()}catch{b.toast.error("Failed to remove subject")}finally{o(null)}};return(0,s.jsxs)(i.Card,{className:"mb-8",children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,s.jsxs)(i.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(x.BookOpen,{className:"w-5 h-5 text-blue-500"}),"My courses"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.default,{href:"/student/courses?tab=browse",children:(0,s.jsxs)(n.Button,{variant:"ghost",size:"sm",children:[(0,s.jsx)(W.Plus,{className:"w-4 h-4 mr-1"}),"Add subject"]})}),e.length>0&&(0,s.jsxs)(n.Button,{variant:"ghost",size:"sm",onClick:()=>c(e=>!e),children:[(0,s.jsx)(G.List,{className:"w-4 h-4 mr-1"}),r&&h?"Show less":"Browse all"]})]})]})}),(0,s.jsx)(i.CardContent,{children:0===e.length?(0,s.jsxs)("div",{className:"py-8 text-center text-gray-500",children:[(0,s.jsx)(x.BookOpen,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,s.jsx)("p",{className:"font-medium text-gray-700",children:"No courses yet"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"Browse subjects and enroll in a course to get started."}),(0,s.jsx)(l.default,{href:"/student/courses?tab=browse",children:(0,s.jsx)(n.Button,{className:"mt-4",children:"Add subject"})})]}):(0,s.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4 px-3 py-4 sm:py-3 rounded-lg border hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)(l.default,{href:`/student/subjects/${encodeURIComponent(e.subject)}`,className:"flex flex-1 min-w-0 items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(x.BookOpen,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-medium truncate",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:e.subject}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)(D.Progress,{value:e.progress,className:"h-2 flex-1"}),(0,s.jsxs)("span",{className:"text-xs text-gray-500 w-10 text-right",children:[e.progress,"%"]})]})]}),(0,s.jsx)(H.ChevronRight,{className:"w-5 h-5 text-gray-400 shrink-0"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-1 shrink-0 flex-wrap justify-end",children:[(0,s.jsx)(n.Button,{variant:"default",size:"sm",className:"h-8 text-xs",asChild:!0,children:(0,s.jsxs)(l.default,{href:"browse"===e.enrollmentSource?`/student/subjects/${encodeURIComponent(e.subject)}/signup`:`/student/courses?subject=${encodeURIComponent(e.subject)}`,onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(Q,{className:"w-3 h-3 mr-1"}),"Enter classroom"]})}),"signup"===e.enrollmentSource||null==e.enrollmentSource?(0,s.jsxs)(n.Button,{variant:"outline",size:"sm",className:"h-8 text-xs",disabled:!0,children:[(0,s.jsx)(q.UserPlus,{className:"w-3 h-3 mr-1"}),"Enrolled"]}):(0,s.jsx)(n.Button,{variant:"outline",size:"sm",className:"h-8 text-xs",asChild:!0,children:(0,s.jsxs)(l.default,{href:`/student/subjects/${encodeURIComponent(e.subject)}/signup`,onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(q.UserPlus,{className:"w-3 h-3 mr-1"}),"Sign up"]})}),(0,s.jsx)(n.Button,{variant:"outline",size:"sm",className:"h-8 text-xs",asChild:!0,children:(0,s.jsxs)(l.default,{href:"/student/scores",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(u.Trophy,{className:"w-3 h-3 mr-1"}),"My scores"]})}),(0,s.jsx)(n.Button,{variant:"outline",size:"sm",className:"h-8 text-xs",asChild:!0,children:(0,s.jsxs)(l.default,{href:`/student/subjects/${encodeURIComponent(e.subject)}/courses/${encodeURIComponent(e.id)}/details`,onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(V.FileText,{className:"w-3 h-3 mr-1"}),"View course details"]})}),(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",className:"h-8 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>j(e),disabled:d===e.subject,children:d===e.subject?(0,s.jsx)(O.Loader2,{className:"w-4 h-4 animate-spin"}):"Remove"})]})]},e.id))})})]})}var _=e.i(156155),J=e.i(871764),X=e.i(652743),K=e.i(358469),Z=e.i(143794),ee=e.i(36438);function es(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function et(e){return new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function ea(e){return new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function er({initialEvents:e,onRefresh:a,contents:c=[],upcomingClasses:d=[],bookingClassId:o,onBookClass:m}){(0,r.useRouter)();let[u,h]=(0,t.useState)("calendar"),[g,j]=(0,t.useState)(()=>new Date),[p,N]=(0,t.useState)(void 0),[y,v]=(0,t.useState)(e??[]),[b,w]=(0,t.useState)(!e?.length),[C,S]=(0,t.useState)([]),[T,B]=(0,t.useState)(!0),M=(0,t.useMemo)(()=>new Date(g.getFullYear(),g.getMonth(),1),[g]),I=(0,t.useMemo)(()=>new Date(g.getFullYear(),g.getMonth()+1,0),[g]);(0,t.useEffect)(()=>{let e=!1,s=M.toISOString(),t=I.toISOString();return w(!0),fetch(`/api/student/calendar/events?start=${encodeURIComponent(s)}&end=${encodeURIComponent(t)}`,{credentials:"include"}).then(e=>e.json()).then(s=>{e||(v(Array.isArray(s?.events)?s.events:[]),w(!1))}).catch(()=>{e||(v([]),w(!1))}),()=>{e=!0}},[M,I,a]),(0,t.useEffect)(()=>{let e=!1;return B(!0),fetch("/api/classes?myBookings=true",{credentials:"include"}).then(e=>e.json()).then(s=>{e||(S(Array.isArray(s?.classes)?s.classes.map(e=>({id:e.id,title:e.title,subject:e.subject,tutorName:e.tutor?.name||"Unknown Tutor",scheduledAt:e.scheduledAt,duration:e.duration||60,type:e.type||"online",students:e._count?.participants||0,maxStudents:e.maxStudents||50,gradeLevel:e.gradeLevel,isBooked:e.isBooked,requiresPayment:e.requiresPayment,price:e.price})):[]),B(!1))}).catch(()=>{e||(S([]),B(!1))}),()=>{e=!0}},[a]);let A=(0,t.useMemo)(()=>{let e=new Map;for(let s of y){let t=es(new Date(s.start));e.has(t)||e.set(t,[]),e.get(t).push(s)}return e},[y]),P=(0,t.useMemo)(()=>y.filter(e=>{let s=new Date(e.start);return s>=M&&s<=I}).sort((e,s)=>new Date(e.start).getTime()-new Date(s.start).getTime()),[y,M,I]),$=p?es(p):null,z=$?(A.get($)||[]).sort((e,s)=>new Date(e.start).getTime()-new Date(s.start).getTime()):[],U=(0,t.useMemo)(()=>{let e={};for(let[s,t]of A.entries())t.length>0&&(e[`day-${t.length}`]=e[`day-${t.length}`]||[],e[`day-${t.length}`].push(new Date(s+"T00:00:00")));return e},[A]),E=(0,t.useMemo)(()=>{let e={};for(let s=1;s<=5;s++)e[`day-${s}`]="bg-blue-100 text-blue-700 font-semibold rounded-full";return e},[]),F=(0,t.useMemo)(()=>({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse",head_row:"flex w-full mb-2",head_cell:"flex-1 h-8 flex items-center justify-center text-[0.7rem] font-medium text-muted-foreground",row:"flex w-full mt-1",cell:"flex-1 h-10 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:"w-9 h-9 p-0 font-normal aria-selected:opacity-100 hover:bg-accent rounded-md mx-auto",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50"}),[]),W=c.filter(e=>e.progress>0&&e.progress<100);return(0,s.jsx)(i.Card,{className:"w-full",children:(0,s.jsxs)(_.Tabs,{value:u,onValueChange:h,children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsxs)(_.TabsList,{className:"grid w-full grid-cols-4",children:[(0,s.jsxs)(_.TabsTrigger,{value:"calendar",className:"flex items-center gap-2",children:[(0,s.jsx)(X.CalendarDays,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"My Calendar"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Calendar"})]}),(0,s.jsxs)(_.TabsTrigger,{value:"classes",className:"flex items-center gap-2",children:[(0,s.jsx)(x.BookOpen,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"My Classes"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Classes"})]}),(0,s.jsxs)(_.TabsTrigger,{value:"learning",className:"flex items-center gap-2",children:[(0,s.jsx)(ee.Play,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Continue"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Learn"})]}),(0,s.jsxs)(_.TabsTrigger,{value:"upcoming",className:"flex items-center gap-2",children:[(0,s.jsx)(K.Clock,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Upcoming"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Soon"})]})]})}),(0,s.jsxs)(i.CardContent,{children:[(0,s.jsxs)(_.TabsContent,{value:"calendar",className:"mt-0 space-y-4",children:[(0,s.jsx)("div",{className:"calendar-single-letter-weekdays",children:(0,s.jsx)(J.Calendar,{mode:"single",month:g,onMonthChange:j,selected:p,onSelect:N,modifiers:U,modifiersClassNames:E,className:"rounded-md border w-full p-4",classNames:F,disabled:b,showOutsideDays:!1,weekStartsOn:0})}),(0,s.jsx)("style",{children:`
              .calendar-single-letter-weekdays .rdp-head_cell {
                font-size: 0.7rem;
                text-transform: uppercase;
              }
              .calendar-single-letter-weekdays .rdp-head_cell abbr {
                text-decoration: none;
              }
            `}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-1",children:[(0,s.jsx)(K.Clock,{className:"w-4 h-4"}),p?`Classes on ${p.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}`:"Classes this month"]}),b?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Loading…"}):0===(p?z:P).length?(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[p?"No classes on this day.":"No classes this month."," Book a class from the classes page."]}):(0,s.jsx)("ul",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:(p?z:P).map(e=>(0,s.jsx)("li",{children:(0,s.jsxs)(l.default,{href:"/student/courses",className:"block p-3 rounded-lg border bg-gray-50/80 hover:bg-gray-100 transition-colors text-sm",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.title}),(0,s.jsxs)("span",{className:"text-gray-500 ml-1",children:["· ",e.subject]}),(0,s.jsxs)("span",{className:"text-gray-500 block text-xs mt-0.5",children:[et(e.start)," – ",et(e.end),e.tutorName?` \xb7 ${e.tutorName}`:""]})]})},e.id))})]})]}),(0,s.jsx)(_.TabsContent,{value:"classes",className:"mt-0",children:T?(0,s.jsx)("div",{className:"py-8 text-center",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Loading your classes..."})}):0===C.length?(0,s.jsxs)("div",{className:"py-8 text-center",children:[(0,s.jsx)(x.BookOpen,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-gray-500",children:"You haven't booked any classes yet."}),(0,s.jsx)(n.Button,{className:"mt-4",asChild:!0,children:(0,s.jsx)(l.default,{href:"/student/courses",children:"Browse Classes"})})]}):(0,s.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:C.map(e=>(0,s.jsx)("div",{className:"p-4 rounded-lg border bg-gray-50/50 hover:bg-gray-100 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.subject}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(X.CalendarDays,{className:"w-3 h-3"}),ea(e.scheduledAt)]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(K.Clock,{className:"w-3 h-3"}),et(e.scheduledAt)]}),(0,s.jsxs)("span",{className:(0,f.cn)("flex items-center gap-1","online"===e.type?"text-green-600":"text-blue-600"),children:["online"===e.type?(0,s.jsx)(k.Video,{className:"w-3 h-3"}):(0,s.jsx)(Z.MapPin,{className:"w-3 h-3"}),"online"===e.type?"Online":"In-Person"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(L.Users,{className:"w-3 h-3"}),e.students,"/",e.maxStudents," students"]}),(0,s.jsxs)("span",{children:["Tutor: ",e.tutorName]})]})]}),(0,s.jsx)(n.Button,{size:"sm",variant:"outline",asChild:!0,children:(0,s.jsx)(l.default,{href:`/student/courses/${e.id}`,children:"Details"})})]})},e.id))})}),(0,s.jsx)(_.TabsContent,{value:"learning",className:"mt-0",children:0===W.length?(0,s.jsxs)("div",{className:"py-8 text-center text-gray-500",children:[(0,s.jsx)(x.BookOpen,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,s.jsx)("p",{className:"font-medium text-gray-700",children:"No courses in progress"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"Browse subjects and start learning."}),(0,s.jsx)(l.default,{href:"/student/courses?tab=browse",children:(0,s.jsx)(n.Button,{className:"mt-4",children:"Browse subjects"})})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[W.slice(0,5).map(e=>(0,s.jsx)(l.default,{href:`/student/learn/${e.id}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-lg border hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(x.BookOpen,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-medium truncate",children:e.topic}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.subject}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsx)(D.Progress,{value:e.progress,className:"h-2 flex-1"}),(0,s.jsxs)("span",{className:"text-xs text-gray-500 w-10 text-right",children:[e.progress,"%"]})]})]}),(0,s.jsx)(H.ChevronRight,{className:"w-5 h-5 text-gray-400"})]})},e.id)),W.length>5&&(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(l.default,{href:"/student/courses?tab=browse",children:(0,s.jsxs)(n.Button,{variant:"outline",size:"sm",children:["View all ",W.length," courses"]})})})]})}),(0,s.jsx)(_.TabsContent,{value:"upcoming",className:"mt-0",children:0===d.length?(0,s.jsxs)("div",{className:"py-8 text-center text-gray-500",children:[(0,s.jsx)(K.Clock,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,s.jsx)("p",{className:"font-medium text-gray-700",children:"No upcoming classes"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"View available classes to book."}),(0,s.jsx)(l.default,{href:"/student/courses",children:(0,s.jsx)(n.Button,{className:"mt-4",children:"View classes"})})]}):(0,s.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:d.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h4",{className:"font-medium",children:e.title}),e.isBooked&&(0,s.jsx)(R.Badge,{className:"bg-green-100 text-green-800",children:"Booked"})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.subject," • ",ea(e.scheduledAt)]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-1",children:[(0,s.jsx)(L.Users,{className:"w-3 h-3"}),e.students,"/",e.maxStudents," students",null!=e.price&&e.price>0&&(0,s.jsxs)("span",{className:"text-green-600 font-medium",children:["SGD ",e.price.toFixed(2)]})]})]}),!e.isBooked&&m&&(0,s.jsx)(n.Button,{size:"sm",disabled:o===e.id||e.students>=e.maxStudents,onClick:()=>m(e.id),children:o===e.id?(0,s.jsx)(O.Loader2,{className:"h-4 w-4 animate-spin"}):e.students>=e.maxStudents?"Full":"Book"})]},e.id))})})]})]})})}var el=e.i(280193),en=e.i(336566),ei=e.i(25125),ec=e.i(874191),ed=e.i(74043);function eo(){let[e,a]=(0,t.useState)(null),[r,n]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{fetch("/api/student/learning-path").then(e=>e.json()).then(e=>{e.success&&a(e.data)}).catch(console.error).finally(()=>n(!1))},[]),r)?(0,s.jsxs)(i.Card,{className:"mb-8 animate-pulse",children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsx)("div",{className:"h-5 bg-gray-200 rounded w-40"})}),(0,s.jsx)(i.CardContent,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"h-16 bg-gray-100 rounded"}),(0,s.jsx)("div",{className:"h-12 bg-gray-100 rounded"}),(0,s.jsx)("div",{className:"h-12 bg-gray-100 rounded"})]})})]}):e&&0!==e.totalCount?(0,s.jsxs)(i.Card,{className:"mb-8",children:[(0,s.jsxs)(i.CardHeader,{className:"pb-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(i.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(el.Route,{className:"w-5 h-5 text-indigo-500"}),"Your Learning Path"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,s.jsxs)("span",{children:[e.completedCount,"/",e.totalCount," lessons"]}),(0,s.jsxs)(R.Badge,{variant:"secondary",className:"text-xs",children:[e.progressPercent,"%"]})]})]}),(0,s.jsx)(D.Progress,{value:e.progressPercent,className:"h-1.5 mt-2"})]}),(0,s.jsxs)(i.CardContent,{children:[e.currentLesson&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"in_progress"===e.currentLesson.status?"Continue where you left off":"Start here"}),(0,s.jsx)(l.default,{href:`/student/learn/${e.currentLesson.lessonId}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border-2 border-blue-200 bg-blue-50/50 hover:bg-blue-50 transition-colors",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(ec.PlayCircle,{className:"w-5 h-5 text-blue-600"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-sm truncate",children:e.currentLesson.title}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[e.currentLesson.courseName," · ",e.currentLesson.moduleTitle]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,s.jsx)(K.Clock,{className:"w-3 h-3"}),e.currentLesson.duration,"m"]}),(0,s.jsx)(H.ChevronRight,{className:"w-4 h-4 text-blue-400"})]})})]}),e.nextLessons.length>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Up next"}),(0,s.jsx)("div",{className:"space-y-1.5",children:e.nextLessons.map((e,t)=>{var a;return(0,s.jsxs)("div",{className:"flex items-center gap-3 p-2.5 rounded-lg border hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("span",{className:"text-xs font-medium text-gray-400 w-5 text-center",children:t+1}),"completed"===(a=e.status)?(0,s.jsx)(ei.CheckCircle2,{className:"w-4 h-4 text-green-500"}):"in_progress"===a?(0,s.jsx)(ec.PlayCircle,{className:"w-4 h-4 text-blue-500"}):(0,s.jsx)(ed.Circle,{className:"w-4 h-4 text-gray-300"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm truncate",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-gray-400 truncate",children:e.courseName})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,s.jsx)(K.Clock,{className:"w-3 h-3"}),e.duration,"m"]})]},e.lessonId)})})]}),e.focusAreas.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Focus areas"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.focusAreas.map(e=>(0,s.jsxs)(R.Badge,{variant:"outline",className:"text-xs border-orange-200 text-orange-700 bg-orange-50 gap-1",children:[(0,s.jsx)(en.AlertTriangle,{className:"w-3 h-3"}),e.topic]},e.topic))})]})]})]}):null}function ex(){let[e,a]=(0,t.useState)([]),[r,c]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{fetch("/api/student/missed-classes?filter=week").then(e=>e.json()).then(e=>{e.success&&a(e.data.sessions)}).catch(console.error).finally(()=>c(!1))},[]),r)?(0,s.jsxs)(i.Card,{className:"mb-8 animate-pulse",children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsx)("div",{className:"h-5 bg-gray-200 rounded w-36"})}),(0,s.jsx)(i.CardContent,{children:(0,s.jsx)("div",{className:"h-16 bg-gray-100 rounded"})})]}):(0,s.jsxs)(i.Card,{className:"mb-8",children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(i.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(k.Video,{className:"w-5 h-5 text-red-500"}),"Missed Classes",e.length>0&&(0,s.jsx)(R.Badge,{variant:"destructive",className:"text-xs ml-1",children:e.length})]}),(0,s.jsx)(l.default,{href:"/student/missed-classes",children:(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",children:"View All"})})]})}),(0,s.jsx)(i.CardContent,{children:0===e.length?(0,s.jsxs)("div",{className:"py-4 text-center text-gray-500",children:[(0,s.jsx)(ei.CheckCircle2,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"All caught up!"}),(0,s.jsx)("p",{className:"text-xs mt-0.5",children:"No missed classes this week"})]}):(0,s.jsx)("div",{className:"space-y-2.5",children:e.slice(0,2).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2.5 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:e.title}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[e.subject," · ",new Date(e.scheduledAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),e.hasRecording?(0,s.jsx)("a",{href:e.recordingUrl,target:"_blank",rel:"noopener noreferrer",children:(0,s.jsxs)(n.Button,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:[(0,s.jsx)(ee.Play,{className:"w-3 h-3"})," Watch"]})}):(0,s.jsx)(R.Badge,{variant:"secondary",className:"text-xs",children:"No recording"})]},e.id))})})]})}var em=e.i(916653);function eu(){let[e,a]=(0,t.useState)([]),[r,c]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{fetch("/api/student/assignments").then(e=>e.json()).then(e=>{a((e.assignments||[]).filter(e=>"pending"===e.status).sort((e,s)=>e.dueDate?s.dueDate?new Date(e.dueDate).getTime()-new Date(s.dueDate).getTime():-1:1))}).catch(console.error).finally(()=>c(!1))},[]),r)?(0,s.jsxs)(i.Card,{className:"mb-8 animate-pulse",children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsx)("div",{className:"h-5 bg-gray-200 rounded w-44"})}),(0,s.jsx)(i.CardContent,{children:(0,s.jsx)("div",{className:"h-16 bg-gray-100 rounded"})})]}):(0,s.jsxs)(i.Card,{className:"mb-8",children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(i.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(em.ClipboardList,{className:"w-5 h-5 text-blue-500"}),"Pending Assignments",e.length>0&&(0,s.jsx)(R.Badge,{className:"bg-blue-100 text-blue-800 text-xs ml-1",children:e.length})]}),(0,s.jsx)(l.default,{href:"/student/assignments",children:(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",children:"View All"})})]})}),(0,s.jsx)(i.CardContent,{children:0===e.length?(0,s.jsxs)("div",{className:"py-4 text-center text-gray-500",children:[(0,s.jsx)(ei.CheckCircle2,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"All done!"}),(0,s.jsx)("p",{className:"text-xs mt-0.5",children:"No pending assignments"})]}):(0,s.jsx)("div",{className:"space-y-2.5",children:e.slice(0,3).map(e=>{let t=e.dueDate?(e=>{let s=new Date(e).getTime()-Date.now();if(s<=0)return{text:"Overdue",urgent:!0};let t=Math.floor(s/36e5),a=Math.floor(t/24);return a>0?{text:`${a}d left`,urgent:a<=1}:{text:`${t}h left`,urgent:t<=6}})(e.dueDate):null;return(0,s.jsx)(l.default,{href:"/student/assignments",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-2.5 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:e.title}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,s.jsx)(R.Badge,{variant:"secondary",className:"text-xs capitalize",children:e.type}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:[e.maxScore," pts"]})]})]}),t&&(0,s.jsxs)(R.Badge,{variant:t.urgent?"destructive":"outline",className:"text-xs gap-1 flex-shrink-0",children:[t.urgent?(0,s.jsx)(h.AlertCircle,{className:"w-3 h-3"}):(0,s.jsx)(K.Clock,{className:"w-3 h-3"}),t.text]})]})},e.id)})})})]})}var eh=e.i(921236),eg=e.i(393758),ej=e.i(772686),ep=e.i(879534);function eN({subjectCurves:e,upcomingReviews:a,overdueReviews:r,totalDue:l,onReviewClick:c,onContentClick:d,className:o}){var m;let u,g,[j,p]=(0,t.useState)(null),[N,y]=(0,t.useState)(null),v=(0,t.useCallback)(e=>50+e/30*720,[800]),b=(0,t.useCallback)(e=>240-e/100*220,[]),w=(0,t.useCallback)(e=>{if(e.length<2)return"";let s=e.map(e=>({x:v(e.day),y:b(e.retention)})),t=`M ${s[0].x} ${s[0].y}`;for(let a=0;a<s.length-1;a++){let r=s[a],l=s[a+1];if(e[a],e[a+1].isReviewPoint){let e=(r.x+l.x)/2;t+=` L ${e} ${r.y} L ${l.x} ${l.y}`}else{let e=r.x+(l.x-r.x)*.5,s=r.y,a=r.x+(l.x-r.x)*.5,n=l.y+(r.y-l.y)*.3;t+=` C ${e} ${s}, ${a} ${n}, ${l.x} ${l.y}`}}return t},[v,b]),C=(0,t.useMemo)(()=>j?e.filter(e=>e.subjectId===j):e,[e,j]),k=(0,t.useMemo)(()=>j?e.filter(e=>e.subjectId!==j):[],[e,j]),S=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":e>=40?"text-orange-600":"text-red-600";return(0,s.jsx)(eh.TooltipProvider,{children:(0,s.jsxs)(i.Card,{className:(0,f.cn)("overflow-hidden",o),children:[(0,s.jsx)(i.CardHeader,{className:"pb-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eg.Brain,{className:"w-5 h-5 text-purple-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.CardTitle,{className:"text-lg",children:"Memory Retention"}),(0,s.jsx)(i.CardDescription,{children:"Spaced repetition review schedule based on forgetting curve"})]})]}),l>0&&(0,s.jsxs)(R.Badge,{variant:r.length>0?"destructive":"default",className:"gap-1",children:[(0,s.jsx)(h.AlertCircle,{className:"w-3 h-3"}),l," due"]})]})}),(0,s.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Subjects:"}),e.map(e=>(0,s.jsxs)("button",{onMouseEnter:()=>p(e.subjectId),onMouseLeave:()=>p(null),onClick:()=>p(j===e.subjectId?null:e.subjectId),className:(0,f.cn)("flex items-center gap-1.5 px-2 py-1 rounded-full transition-all",j===e.subjectId?"bg-gray-100 ring-2 ring-offset-1":j?"opacity-40":"hover:bg-gray-50"),style:{"--ring-color":e.color,ringColor:j===e.subjectId?e.color:void 0},children:[(0,s.jsx)("span",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"font-medium",children:e.subjectName})]},e.subjectId)),0===e.length&&(0,s.jsx)("span",{className:"text-gray-400 italic",children:"No subjects with review data"})]}),(0,s.jsxs)("div",{className:"relative w-full overflow-x-auto",children:[(0,s.jsxs)("svg",{viewBox:"0 0 800 280",className:"w-full min-w-[600px]",preserveAspectRatio:"xMidYMid meet",children:[(0,s.jsxs)("defs",{children:[(0,s.jsx)("pattern",{id:"grid",width:"50",height:"28",patternUnits:"userSpaceOnUse",children:(0,s.jsx)("path",{d:"M 50 0 L 0 0 0 28",fill:"none",stroke:"#f0f0f0",strokeWidth:"1"})}),(0,s.jsxs)("linearGradient",{id:"areaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.1"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:"0"})]})]}),(0,s.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),[0,25,50,75,100].map(e=>(0,s.jsxs)("g",{children:[(0,s.jsxs)("text",{x:40,y:b(e)+4,textAnchor:"end",className:"text-xs fill-gray-400",children:[e,"%"]}),(0,s.jsx)("line",{x1:50,y1:b(e),x2:770,y2:b(e),stroke:"#e5e5e5",strokeDasharray:0===e?void 0:"4,4"})]},e)),[0,7,14,21,30].map(e=>(0,s.jsxs)("g",{children:[(0,s.jsx)("text",{x:v(e),y:270,textAnchor:"middle",className:"text-xs fill-gray-400",children:0===e?"Today":`+${e}d`}),(0,s.jsx)("line",{x1:v(e),y1:20,x2:v(e),y2:240,stroke:"#e5e5e5",strokeDasharray:"2,2"})]},e)),(0,s.jsx)("text",{x:20,y:140,textAnchor:"middle",transform:"rotate(-90, 20, 140)",className:"text-xs fill-gray-500 font-medium",children:"Retention"}),(0,s.jsx)("text",{x:400,y:278,textAnchor:"middle",className:"text-xs fill-gray-500 font-medium",children:"Time"}),k.map(e=>(0,s.jsx)("g",{opacity:.2,children:(0,s.jsx)("path",{d:w(e.dataPoints),fill:"none",stroke:e.color,strokeWidth:2})},e.subjectId)),C.map(e=>(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:`${w(e.dataPoints)} L ${v(30)} ${b(0)} L ${v(0)} ${b(0)} Z`,fill:e.color,opacity:.05}),(0,s.jsx)("path",{d:w(e.dataPoints),fill:"none",stroke:e.color,strokeWidth:j===e.subjectId?3:2,className:"transition-all duration-200"}),e.dataPoints.filter(e=>e.isReviewPoint).map((t,a)=>{let r=v(t.day),l=b(t.retention),n=new Date(t.date)<new Date&&0===t.day;return(0,s.jsxs)("g",{children:[n&&(0,s.jsxs)("circle",{cx:r,cy:l,r:8,fill:e.color,opacity:.3,children:[(0,s.jsx)("animate",{attributeName:"r",values:"8;12;8",dur:"2s",repeatCount:"indefinite"}),(0,s.jsx)("animate",{attributeName:"opacity",values:"0.3;0;0.3",dur:"2s",repeatCount:"indefinite"})]}),(0,s.jsx)("circle",{cx:r,cy:l,r:6,fill:n?"#ef4444":"white",stroke:e.color,strokeWidth:3,className:"cursor-pointer transition-all duration-200 hover:r-8",onClick:()=>{t.contentId&&d&&d(t.contentId,t.contentTitle||""),y({subject:e,point:t,x:r,y:l})}})]},a)})]},e.subjectId))]}),N&&(0,s.jsxs)("div",{className:"absolute bg-white border rounded-lg shadow-lg p-3 z-10 min-w-[200px]",style:{left:`${N.x/800*100}%`,top:`${N.y/280*100}%`,transform:"translate(-50%, -120%)"},children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:N.subject.color}}),(0,s.jsx)("span",{className:"font-medium text-sm",children:N.subject.subjectName})]}),(0,s.jsx)("p",{className:"text-sm font-medium",children:N.point.contentTitle}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:(u=new Date(N.point.date),g=new Date,u.toDateString()===g.toDateString()?"Today":u.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(m=N.point.retention)>=80?(0,s.jsx)(R.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Strong"}):m>=60?(0,s.jsx)(R.Badge,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Good"}):m>=40?(0,s.jsx)(R.Badge,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Fading"}):(0,s.jsx)(R.Badge,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Critical"}),N.point.contentId&&(0,s.jsx)(n.Button,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>d?.(N.point.contentId,N.point.contentTitle||""),children:"Review"})]}),(0,s.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 -bottom-2 w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-t-[8px] border-t-white"})]})]}),(a.length>0||r.length>0)&&(0,s.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,s.jsxs)("h4",{className:"font-medium text-sm flex items-center gap-2",children:[(0,s.jsx)(K.Clock,{className:"w-4 h-4"}),"Upcoming Reviews"]}),r.slice(0,3).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(h.AlertCircle,{className:"w-5 h-5 text-red-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:e.contentTitle}),(0,s.jsxs)("p",{className:"text-xs text-red-600",children:[e.daysOverdue," day",1!==e.daysOverdue?"s":""," overdue"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:(0,f.cn)("text-sm font-medium",S(e.currentRetention)),children:[e.currentRetention,"%"]}),(0,s.jsx)(n.Button,{size:"sm",variant:"destructive",onClick:()=>c?.(e),children:"Review Now"})]})]},e.id)),a.slice(0,r.length>0?2:4).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.subjectColor}}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:e.contentTitle}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:0===e.daysUntilDue?"Due today":`In ${e.daysUntilDue} day${1!==e.daysUntilDue?"s":""}`})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:(0,f.cn)("text-sm font-medium",S(e.currentRetention)),children:[e.currentRetention,"%"]}),(0,s.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>c?.(e),children:0===e.daysUntilDue?"Review":"Preview"})]})]},e.id)),a.length+r.length>5&&(0,s.jsxs)(n.Button,{variant:"ghost",size:"sm",className:"w-full",children:["View all ",a.length+r.length," reviews"]})]}),0===a.length&&0===r.length&&0===e.length&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(eg.Brain,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,s.jsx)("h4",{className:"font-medium text-gray-700",children:"No reviews scheduled yet"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Start learning and complete quizzes to build your review schedule"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 pt-2 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(ej.TrendingDown,{className:"w-3 h-3"}),"Lines show memory decay over time"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(ep.RotateCcw,{className:"w-3 h-3"}),"Dots indicate scheduled reviews"]})]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(x.BookOpen,{className:"w-3 h-3"}),"Based on Ebbinghaus forgetting curve"]})]})]})]})})}var ef=e.i(725399),ey=e.i(313123),ev=e.i(488672);function eb({isOpen:e,onClose:a,review:l,onReviewComplete:i,onSnooze:c,onMarkKnown:d}){var o,m;let u=(0,r.useRouter)(),[h,g]=(0,t.useState)(!1);if(!l)return null;let p=l.isOverdue||l.daysOverdue&&l.daysOverdue>0,N=l.daysOverdue||0,y=l.daysUntilDue||0,v=(o=l.currentRetention)>=80?{label:"Strong",color:"text-green-600",bg:"bg-green-50"}:o>=60?{label:"Good",color:"text-yellow-600",bg:"bg-yellow-50"}:o>=40?{label:"Fading",color:"text-orange-600",bg:"bg-orange-50"}:{label:"Critical",color:"text-red-600",bg:"bg-red-50"},w=()=>{u.push(`/student/review/${l.contentId}?reviewId=${l.id}`),a()},C=async()=>{g(!0);try{if((await fetch("/api/student/reviews/snooze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewId:l.id,days:1})})).ok)b.toast.success("Review postponed until tomorrow"),c?.(),a();else throw Error("Failed to snooze")}catch(e){b.toast.error("Failed to postpone review")}finally{g(!1)}},k=async()=>{g(!0);try{if((await fetch("/api/student/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentId:l.contentId,performance:95})})).ok)b.toast.success("Marked as known! Next review extended."),d?.(),a();else throw Error("Failed to update")}catch(e){b.toast.error("Failed to update review status")}finally{g(!1)}},S={lastScore:Math.round(.9*l.currentRetention+10*Math.random()),averageScore:Math.round(.85*l.currentRetention+15*Math.random()),totalReviews:l.repetitionCount,streakDays:Math.floor(7*Math.random())+1,studyTimeMinutes:Math.floor(60*Math.random())+15};return(0,s.jsx)(ef.Dialog,{open:e,onOpenChange:a,children:(0,s.jsxs)(ef.DialogContent,{className:"sm:max-w-[650px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(ef.DialogHeader,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l.subjectColor}}),(0,s.jsx)(ef.DialogTitle,{className:"text-lg",children:l.contentTitle})]}),((e,t)=>{if(t)return(0,s.jsx)(R.Badge,{variant:"destructive",children:"Overdue"});switch(e){case"high":return(0,s.jsx)(R.Badge,{variant:"default",className:"bg-orange-500",children:"High Priority"});case"medium":return(0,s.jsx)(R.Badge,{variant:"outline",className:"text-yellow-600",children:"Medium"});case"low":return(0,s.jsx)(R.Badge,{variant:"secondary",children:"Low"});default:return null}})(l.priority,!!p)]}),(0,s.jsxs)(ef.DialogDescription,{className:"flex items-center gap-2 pt-1",children:[(0,s.jsx)(x.BookOpen,{className:"w-4 h-4"}),l.subjectName,(0,s.jsx)("span",{className:"mx-1",children:"•"}),(0,s.jsx)(K.Clock,{className:"w-4 h-4"}),p?`${N} day${1!==N?"s":""} overdue`:0===y?"Due today":`Due in ${y} day${1!==y?"s":""}`]})]}),(0,s.jsxs)("div",{className:(0,f.cn)("p-4 rounded-lg",v.bg),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eg.Brain,{className:(0,f.cn)("w-5 h-5",v.color)}),(0,s.jsx)("span",{className:"font-medium",children:"Current Retention"})]}),(0,s.jsxs)("span",{className:(0,f.cn)("text-2xl font-bold",v.color),children:[l.currentRetention,"%"]})]}),(0,s.jsx)(D.Progress,{value:l.currentRetention,className:"h-2"}),(0,s.jsx)("p",{className:"text-sm mt-2 text-gray-600",children:l.currentRetention>=80?"You remember this well! Quick review recommended.":l.currentRetention>=60?"Memory is stable. Review to maintain retention.":l.currentRetention>=40?"Content is fading. Review soon to strengthen memory.":"Urgent! You're at risk of forgetting this content."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[(0,s.jsx)(ep.RotateCcw,{className:"w-4 h-4"}),"Times Reviewed"]}),(0,s.jsx)("p",{className:"text-xl font-semibold",children:S.totalReviews})]}),(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[(0,s.jsx)(K.Clock,{className:"w-4 h-4"}),"Study Time"]}),(0,s.jsxs)("p",{className:"text-xl font-semibold",children:[S.studyTimeMinutes,"m"]})]}),(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[(0,s.jsx)(B.Target,{className:"w-4 h-4"}),"Last Score"]}),(0,s.jsxs)("p",{className:(0,f.cn)("text-xl font-semibold",S.lastScore>=70?"text-green-600":"text-yellow-600"),children:[S.lastScore,"%"]})]}),(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[(0,s.jsx)(ev.BarChart3,{className:"w-4 h-4"}),"Average"]}),(0,s.jsxs)("p",{className:"text-xl font-semibold",children:[S.averageScore,"%"]})]})]}),(0,s.jsx)(ey.Separator,{}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h4",{className:"font-medium text-sm flex items-center gap-2",children:[(0,s.jsx)(j.Zap,{className:"w-4 h-4 text-yellow-500"}),"Recommended Actions"]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",onClick:w,children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,s.jsx)(eg.Brain,{className:"w-5 h-5 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:"Full Review Session"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Recommended time: ",(m=l.currentRetention)<40?"20-30 min":m<60?"15-20 min":m<80?"10-15 min":"5-10 min"]})]})]}),(0,s.jsx)(H.ChevronRight,{className:"w-5 h-5 text-gray-400"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,s.jsx)(x.BookOpen,{className:"w-5 h-5 text-green-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:"Quick Flashcards"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"5-minute rapid review"})]})]}),(0,s.jsx)(H.ChevronRight,{className:"w-5 h-5 text-gray-400"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,s.jsx)(B.Target,{className:"w-5 h-5 text-purple-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:"Practice Quiz"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Test your knowledge"})]})]}),(0,s.jsx)(H.ChevronRight,{className:"w-5 h-5 text-gray-400"})]})]})]}),(0,s.jsx)(ey.Separator,{}),(0,s.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(eg.Brain,{className:"w-4 h-4 text-blue-500 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-blue-900",children:"Spaced Repetition"}),(0,s.jsx)("p",{className:"text-blue-700 mt-1",children:"This review is scheduled based on your learning patterns. Reviewing at the optimal time strengthens long-term memory."})]})]})}),(0,s.jsxs)(ef.DialogFooter,{className:"flex-col sm:flex-row gap-2",children:[(0,s.jsxs)(n.Button,{variant:"outline",onClick:C,disabled:h,className:"w-full sm:w-auto",children:[(0,s.jsx)(K.Clock,{className:"w-4 h-4 mr-2"}),"Snooze 1 Day"]}),(0,s.jsxs)(n.Button,{variant:"outline",onClick:k,disabled:h,className:"w-full sm:w-auto",children:[(0,s.jsx)(ei.CheckCircle2,{className:"w-4 h-4 mr-2"}),"Mark as Known"]}),(0,s.jsxs)(n.Button,{onClick:w,disabled:h,className:"w-full sm:w-auto",children:[(0,s.jsx)(eg.Brain,{className:"w-4 h-4 mr-2"}),"Start Review"]})]})]})})}var ew=e.i(182126),eC=e.i(943992);function ek({reviews:e,streakDays:a=0,onReviewComplete:l}){let c=(0,r.useRouter)(),[d,o]=(0,t.useState)(new Set),[x,m]=(0,t.useState)(!1),u=[...e].sort((e,s)=>{let t={critical:4,high:3,medium:2,low:1},a=e=>{let s=25*t[e.priority];return s+((100-e.currentRetention)*.5+10*e.daysOverdue)};return a(s)-a(e)}),g=u.reduce((e,s)=>e+s.estimatedMinutes,0),p=u.filter(e=>"critical"===e.priority).length,N=u.filter(e=>e.daysOverdue>0).length,y=e=>{c.push(`/student/review/${e.contentId}?quick=true`)},v=e=>{if(e<60)return`${e}m`;let s=Math.floor(e/60),t=e%60;return t>0?`${s}h ${t}m`:`${s}h`};return 0===u.length?(0,s.jsx)(i.Card,{className:"bg-green-50 border-green-200",children:(0,s.jsxs)(i.CardContent,{className:"py-8 text-center",children:[(0,s.jsx)(ei.CheckCircle2,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),(0,s.jsx)("h3",{className:"font-medium text-green-900",children:"All Caught Up!"}),(0,s.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"You have no reviews due. Great job maintaining your memory!"}),a>0&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-3",children:[(0,s.jsx)(w.Flame,{className:"w-4 h-4 text-orange-500"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-orange-700",children:[a," day streak!"]})]})]})}):(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{className:"pb-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j.Zap,{className:"w-5 h-5 text-yellow-500"}),(0,s.jsx)(i.CardTitle,{className:"text-lg",children:"Smart Review Queue"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[a>0&&(0,s.jsxs)(R.Badge,{variant:"outline",className:"gap-1 bg-orange-50",children:[(0,s.jsx)(w.Flame,{className:"w-3 h-3 text-orange-500"}),a," day streak"]}),(0,s.jsxs)(R.Badge,{variant:N>0?"destructive":"default",children:[u.length," due"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mt-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(K.Clock,{className:"w-4 h-4"}),v(g)," total"]}),p>0&&(0,s.jsxs)("span",{className:"flex items-center gap-1 text-red-600",children:[(0,s.jsx)(h.AlertCircle,{className:"w-4 h-4"}),p," critical"]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>m(!x),children:x?"Done":"Select Multiple"})})]})]}),(0,s.jsxs)(i.CardContent,{className:"space-y-3",children:[x&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(ew.Checkbox,{checked:d.size===u.length,onCheckedChange:()=>{d.size===u.length?o(new Set):o(new Set(u.map(e=>e.id)))}}),(0,s.jsx)("span",{className:"text-sm font-medium",children:0===d.size?"Select all":`${d.size} selected`})]}),(0,s.jsxs)(n.Button,{size:"sm",onClick:()=>{let e=u.filter(e=>d.has(e.id));if(0===e.length)return void b.toast.error("Please select at least one review");let s=e.map(e=>e.contentId).join(",");c.push(`/student/review/batch?ids=${s}`)},disabled:0===d.size,children:[(0,s.jsx)(ee.Play,{className:"w-4 h-4 mr-2"}),"Start Batch (",v(u.filter(e=>d.has(e.id)).reduce((e,s)=>e+s.estimatedMinutes,0)),")"]})]}),(0,s.jsxs)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:[u.slice(0,8).map((e,t)=>{var a,r;return(0,s.jsxs)("div",{className:(0,f.cn)("flex items-center gap-3 p-3 rounded-lg border transition-all",e.daysOverdue>0?"bg-red-50 border-red-200":"bg-white border-gray-200 hover:border-gray-300",0===t&&!x&&"ring-2 ring-yellow-400 ring-offset-1"),children:[x&&(0,s.jsx)(ew.Checkbox,{checked:d.has(e.id),onCheckedChange:()=>{var s;let t;return s=e.id,void((t=new Set(d)).has(s)?t.delete(s):t.add(s),o(t))}}),(0,s.jsx)("div",{className:"w-1 h-10 rounded-full flex-shrink-0",style:{backgroundColor:e.subjectColor}}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"font-medium text-sm truncate",children:e.contentTitle}),(0,s.jsx)(R.Badge,{variant:"outline",className:(0,f.cn)("text-xs",(e=>{switch(e){case"critical":return"bg-red-100 text-red-700 border-red-200 animate-pulse";case"high":return"bg-orange-100 text-orange-700 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-blue-100 text-blue-700 border-blue-200"}})(e.priority)),children:e.priority})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-1",children:[(0,s.jsx)("span",{children:e.subjectName}),(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(K.Clock,{className:"w-3 h-3"}),e.estimatedMinutes,"m"]}),e.daysOverdue>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{className:"text-red-600 font-medium",children:[e.daysOverdue,"d overdue"]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(a=e.currentRetention)>=80?(0,s.jsx)(ei.CheckCircle2,{className:"w-4 h-4 text-green-500"}):a>=60?(0,s.jsx)(eg.Brain,{className:"w-4 h-4 text-yellow-500"}):a>=40?(0,s.jsx)(ej.TrendingDown,{className:"w-4 h-4 text-orange-500"}):(0,s.jsx)(h.AlertCircle,{className:"w-4 h-4 text-red-500"}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:(0,f.cn)("text-sm font-bold",(r=e.currentRetention)>=80?"text-green-600":r>=60?"text-yellow-600":r>=40?"text-orange-600":"text-red-600"),children:[e.currentRetention,"%"]}),(0,s.jsx)(D.Progress,{value:e.currentRetention,className:"w-16 h-1"})]})]}),!x&&(0,s.jsx)(n.Button,{size:"sm",variant:0===t?"default":"outline",onClick:()=>y(e),children:0===t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ee.Play,{className:"w-3 h-3 mr-1"}),"Start"]}):(0,s.jsx)(H.ChevronRight,{className:"w-4 h-4"})})]},e.id)}),u.length>8&&(0,s.jsxs)(n.Button,{variant:"ghost",className:"w-full",children:[(0,s.jsx)(eC.MoreHorizontal,{className:"w-4 h-4 mr-2"}),"View ",u.length-8," more reviews"]})]}),!x&&u.length>0&&(0,s.jsxs)(n.Button,{className:"w-full",size:"lg",onClick:()=>y(u[0]),children:[(0,s.jsx)(ee.Play,{className:"w-4 h-4 mr-2"}),"Start Top Priority Review",(0,s.jsxs)("span",{className:"ml-2 text-xs opacity-70",children:["(",v(u[0].estimatedMinutes),")"]})]})]})]})}var eS=e.i(621053),eT=e.i(755142);function eR({weakTopics:e}){let t=(0,r.useRouter)(),a=e.filter(e=>e.currentRetention<40).slice(0,3);return 0===a.length?null:(0,s.jsx)(i.Card,{className:"bg-gradient-to-br from-purple-50 to-blue-50 border-purple-200",children:(0,s.jsx)(i.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"p-3 bg-purple-100 rounded-full flex-shrink-0",children:(0,s.jsx)(eT.Sparkles,{className:"w-6 h-6 text-purple-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"AI Tutor Can Help"}),(0,s.jsxs)(R.Badge,{variant:"outline",className:"bg-purple-100 text-purple-700",children:[a.length," topics"]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"You're having trouble remembering some key concepts. Our AI Tutor can explain these topics in a new way."}),(0,s.jsx)("div",{className:"space-y-2 mb-4",children:a.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-white/60 rounded-lg",children:[(0,s.jsx)(en.AlertTriangle,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:e.contentTitle}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(D.Progress,{value:e.currentRetention,className:"w-16 h-1"}),(0,s.jsxs)("span",{className:"text-xs text-red-600",children:[e.currentRetention,"% retention"]})]})]})]},e.contentId))}),(0,s.jsxs)(n.Button,{onClick:()=>t.push("/student/ai-tutor"),className:"w-full bg-purple-600 hover:bg-purple-700",children:[(0,s.jsx)(m.MessageSquare,{className:"w-4 h-4 mr-2"}),"Get Help from AI Tutor",(0,s.jsx)(eS.ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})})})}let eD=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],eB=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function eM({reviewHistory:e,streakDays:a,longestStreak:r,totalReviews:l}){let n=(0,t.useMemo)(()=>{let s=new Date,t=[];for(let a=364;a>=0;a--){let r=new Date(s);r.setDate(r.getDate()-a);let l=r.toISOString().split("T")[0],n=e.find(e=>e.date===l);t.push({date:r,dateStr:l,count:n?.count||0,level:n?.level||0})}return t},[e]),c=(0,t.useMemo)(()=>{let e=[];for(let s=0;s<n.length;s+=7)e.push(n.slice(s,s+7));return e},[n]),d=(0,t.useMemo)(()=>{let e=[],s=-1;return c.forEach((t,a)=>{let r=t[0];r&&r.date.getMonth()!==s&&(s=r.date.getMonth(),e.push({month:eB[s],index:a}))}),e},[c]),o=e=>{switch(e){case 0:default:return"bg-gray-100";case 1:return"bg-green-200";case 2:return"bg-green-300";case 3:return"bg-green-500";case 4:return"bg-green-700"}},x=e=>{switch(e){case 0:default:return"No reviews";case 1:return"1 review";case 2:return"2 reviews";case 3:return"3-4 reviews";case 4:return"5+ reviews"}};return(0,s.jsx)(eh.TooltipProvider,{children:(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(i.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(X.CalendarDays,{className:"w-5 h-5"}),"Review Activity"]}),(0,s.jsx)(i.CardDescription,{children:"Your review history over the past year"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w.Flame,{className:"w-4 h-4 text-orange-500"}),(0,s.jsx)("span",{className:"font-medium",children:a}),(0,s.jsx)("span",{className:"text-gray-500",children:"day streak"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(B.Target,{className:"w-4 h-4 text-blue-500"}),(0,s.jsx)("span",{className:"font-medium",children:l}),(0,s.jsx)("span",{className:"text-gray-500",children:"total"})]})]})]})}),(0,s.jsxs)(i.CardContent,{children:[(0,s.jsxs)("div",{className:"flex mb-1",children:[(0,s.jsx)("div",{className:"w-8"})," ",(0,s.jsx)("div",{className:"flex-1 relative h-5",children:d.map((e,t)=>(0,s.jsx)("span",{className:"absolute text-xs text-gray-400",style:{left:`${e.index/c.length*100}%`},children:e.month},t))})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex flex-col justify-around mr-2 py-1",children:eD.filter((e,s)=>[1,3,5].includes(s)).map(e=>(0,s.jsx)("span",{className:"text-xs text-gray-400 h-3 leading-3",children:e},e))}),(0,s.jsx)("div",{className:"flex gap-[2px] overflow-x-auto pb-2 flex-1",children:c.map((e,t)=>(0,s.jsx)("div",{className:"flex flex-col gap-[2px]",children:e.map((e,t)=>(0,s.jsxs)(eh.Tooltip,{children:[(0,s.jsx)(eh.TooltipTrigger,{asChild:!0,children:(0,s.jsx)("div",{className:(0,f.cn)("w-3 h-3 rounded-sm cursor-pointer transition-colors hover:ring-2 hover:ring-offset-1 hover:ring-blue-400",o(e.level))})}),(0,s.jsxs)(eh.TooltipContent,{side:"top",className:"text-xs",children:[(0,s.jsx)("p",{className:"font-medium",children:e.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),(0,s.jsx)("p",{children:x(e.level)})]})]},t))},t))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4 text-xs text-gray-500",children:[(0,s.jsx)("span",{children:"Less"}),(0,s.jsx)("div",{className:"flex gap-1",children:[0,1,2,3,4].map(e=>(0,s.jsx)("div",{className:(0,f.cn)("w-3 h-3 rounded-sm",o(e)),title:x(e)},e))}),(0,s.jsx)("span",{children:"More"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600",children:a}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Current Streak"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:r}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Longest Streak"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[Math.round(l/365*7),"/7"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Weekly Average"})]})]})]})]})})}var eI=e.i(329134);function eA({subjects:e}){let a=e.slice(0,6),r=(0,t.useMemo)(()=>{if(0===e.length)return null;let s=Math.round(e.reduce((e,s)=>e+s.currentRetention,0)/e.length),t=e.reduce((e,s)=>s.currentRetention>e.currentRetention?s:e);return{avgRetention:s,strongest:t,weakest:e.reduce((e,s)=>s.currentRetention<e.currentRetention?s:e),totalReviews:e.reduce((e,s)=>e+s.reviewsCount,0)}},[e]),l=(e,s,t)=>{let a=s/t*2*Math.PI-Math.PI/2,r=e/100*80,l=100+r*Math.cos(a),n=100+r*Math.sin(a);return`${l},${n}`},n=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":e>=40?"text-orange-600":"text-red-600";return 0===e.length?(0,s.jsx)(i.Card,{className:"h-full",children:(0,s.jsx)(i.CardContent,{className:"flex items-center justify-center h-64 text-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(B.Target,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No subject data yet"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Complete some reviews to see your retention"})]})})}):(0,s.jsx)(eh.TooltipProvider,{children:(0,s.jsxs)(i.Card,{className:"h-full",children:[(0,s.jsxs)(i.CardHeader,{className:"pb-2",children:[(0,s.jsxs)(i.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(B.Target,{className:"w-5 h-5"}),"Subject Retention"]}),(0,s.jsx)(i.CardDescription,{children:"Compare retention across all subjects"})]}),(0,s.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative flex justify-center",children:[(0,s.jsxs)("svg",{viewBox:"0 0 200 200",className:"w-48 h-48",children:[[25,50,75,100].map(e=>(0,s.jsx)("circle",{cx:"100",cy:"100",r:.8*e,fill:"none",stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:100===e?void 0:"4,4"},e)),a.map((e,t)=>{let r=((e,s,t=95)=>{let a=e/s*2*Math.PI-Math.PI/2;return{x:100+t*Math.cos(a),y:100+t*Math.sin(a),angle:a}})(t,a.length,80);return(0,s.jsx)("line",{x1:"100",y1:"100",x2:r.x,y2:r.y,stroke:"#e5e7eb",strokeWidth:"1"},t)}),a.map((e,t)=>{let r=a.map((e,s)=>l(e.currentRetention,s,a.length)).join(" ");return(0,s.jsx)("polygon",{points:r,fill:e.color,fillOpacity:.3*(0===t),stroke:0===t?e.color:"none",strokeWidth:"2",className:0===t?"":"hidden"},e.subjectId)}),a.map((e,t)=>{let[r,n]=l(e.currentRetention,t,a.length).split(",").map(Number);return(0,s.jsxs)(eh.Tooltip,{children:[(0,s.jsx)(eh.TooltipTrigger,{asChild:!0,children:(0,s.jsx)("circle",{cx:r,cy:n,r:"6",fill:e.color,stroke:"white",strokeWidth:"2",className:"cursor-pointer hover:r-8 transition-all"})}),(0,s.jsxs)(eh.TooltipContent,{children:[(0,s.jsx)("p",{className:"font-medium",children:e.subjectName}),(0,s.jsxs)("p",{className:"text-sm",children:[e.currentRetention,"% retention"]})]})]},e.subjectId)}),(0,s.jsx)("circle",{cx:"100",cy:"100",r:"3",fill:"#9ca3af"})]}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center",children:(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-gray-300"}),"Center: 0%"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-gray-300"}),"Edge: 100%"]})]})})]}),r&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Average"}),(0,s.jsxs)("p",{className:(0,f.cn)("text-xl font-bold",n(r.avgRetention)),children:[r.avgRetention,"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Total Reviews"}),(0,s.jsx)("p",{className:"text-xl font-bold text-blue-600",children:r.totalReviews})]})]}),(0,s.jsx)("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:e.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"font-medium text-sm",children:e.subjectName})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(e=>{switch(e){case"up":return(0,s.jsx)(I.TrendingUp,{className:"w-4 h-4 text-green-500"});case"down":return(0,s.jsx)(ej.TrendingDown,{className:"w-4 h-4 text-red-500"});default:return(0,s.jsx)(eI.Minus,{className:"w-4 h-4 text-gray-400"})}})(e.trend),(0,s.jsxs)(R.Badge,{variant:"outline",className:(0,f.cn)("text-xs",n(e.currentRetention)),children:[e.currentRetention,"%"]})]})]},e.subjectId))})]})]})})}function eP({contentTitle:e,beforeRetention:t,afterRetention:a,nextReviewDate:r,intervalDays:l,previousInterval:n}){let c=(e,s,t)=>{let a=[];for(let r=0;r<=t;r++){let t=e*Math.exp(-(24*r)/s);a.push({day:r,retention:Math.max(0,t)})}return a},d=e=>-(24*e)/Math.log(.85),x=d(n||3),m=d(l),u=c(t,x,14),h=c(a,m,l+7),g=350,j=110,p=(e,s)=>40+e/s*g,N=e=>10+j-e/100*j,f=(e,s)=>e.map((e,t)=>`${0===t?"M":"L"} ${p(e.day,s)} ${N(e.retention)}`).join(" "),y=a-t,v=((l-n)/n*100).toFixed(0);return(0,s.jsxs)(i.Card,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:[(0,s.jsx)(i.CardHeader,{className:"pb-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(i.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(I.TrendingUp,{className:"w-5 h-5 text-green-600"}),"Review Impact"]}),(0,s.jsx)(i.CardDescription,{children:"How this review strengthened your memory"})]}),(0,s.jsxs)(R.Badge,{className:"bg-green-100 text-green-700 hover:bg-green-100",children:["+",y.toFixed(0),"% boost"]})]})}),(0,s.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,s.jsx)("p",{className:"font-medium text-gray-700",children:e}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("svg",{viewBox:"0 0 400 150",className:"w-full",children:[[0,50,100].map(e=>(0,s.jsx)("line",{x1:40,y1:N(e),x2:390,y2:N(e),stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4,4"},e)),[0,50,100].map(e=>(0,s.jsxs)("text",{x:35,y:N(e)+4,textAnchor:"end",className:"text-xs fill-gray-400",children:[e,"%"]},e)),(0,s.jsx)("path",{d:f(u,14),fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.5"}),(0,s.jsx)("path",{d:f(h,l+7),fill:"none",stroke:"#22c55e",strokeWidth:"3"}),(0,s.jsx)("circle",{cx:p(0,l+7),cy:N(t),r:"5",fill:"#ef4444",stroke:"white",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:p(0,l+7),cy:N(a),r:"6",fill:"#22c55e",stroke:"white",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:p(l,l+7),cy:N(85),r:"5",fill:"#3b82f6",stroke:"white",strokeWidth:"2"}),(0,s.jsx)("text",{x:40,y:145,className:"text-xs fill-gray-400",textAnchor:"middle",children:"Now"}),(0,s.jsxs)("text",{x:p(l,l+7),y:145,className:"text-xs fill-gray-400",textAnchor:"middle",children:["+",l,"d"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-2 text-xs",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"w-3 h-0.5 bg-red-400 border-dashed",style:{borderTop:"2px dashed"}}),"Before review"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"w-3 h-0.5 bg-green-500",style:{borderTop:"3px solid"}}),"After review"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Next review"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{className:"text-center p-3 bg-white rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Was"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-red-500",children:[t.toFixed(0),"%"]})]}),(0,s.jsxs)("div",{className:"text-center p-3 bg-white rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Now"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-green-600",children:[a.toFixed(0),"%"]})]}),(0,s.jsxs)("div",{className:"text-center p-3 bg-white rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Next Review"}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,s.jsx)(o.Calendar,{className:"w-4 h-4 text-blue-500"}),(0,s.jsxs)("p",{className:"text-sm font-bold",children:[l,"d"]})]})]})]}),Number(v)>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-100 rounded-lg text-sm",children:[(0,s.jsx)(I.TrendingUp,{className:"w-4 h-4 text-green-600"}),(0,s.jsxs)("span",{className:"text-green-700",children:["Great job! Next review extended by ",v,"% due to strong performance."]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(K.Clock,{className:"w-4 h-4"}),"Next review scheduled"]}),(0,s.jsx)("span",{className:"font-medium",children:new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]})]})}var eL=e.i(102558),eO=e.i(315726),e$=e.i(286472);let ez=(0,U.default)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),eU={flame:w.Flame,trophy:u.Trophy,target:B.Target,zap:j.Zap,star:eL.Star,crown:eO.Crown,medal:e$.Medal,award:M.Award,rocket:ez,brain:eg.Brain,clock:K.Clock,calendar:o.Calendar};function eE({streakDays:e,longestStreak:t,totalReviews:a,weeklyReviews:r,achievements:l}){let n=e>=30?{label:"Unstoppable!",color:"text-purple-600",bg:"bg-purple-100"}:e>=14?{label:"On Fire!",color:"text-orange-600",bg:"bg-orange-100"}:e>=7?{label:"Heating Up!",color:"text-yellow-600",bg:"bg-yellow-100"}:e>=3?{label:"Getting Started",color:"text-green-600",bg:"bg-green-100"}:{label:"Start Today!",color:"text-gray-600",bg:"bg-gray-100"},c=e<3?{target:3,label:"3-day streak"}:e<7?{target:7,label:"Week warrior"}:e<14?{target:14,label:"2-week streak"}:e<30?{target:30,label:"Month master"}:{target:60,label:"2-month legend"},d=Math.min(100,e/c.target*100);return(0,s.jsxs)(i.Card,{className:"overflow-hidden",children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(i.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(u.Trophy,{className:"w-5 h-5 text-yellow-500"}),"Achievements & Streaks"]}),(0,s.jsx)(R.Badge,{className:(0,f.cn)(n.bg,n.color),children:n.label})]})}),(0,s.jsxs)(i.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:(0,f.cn)("p-4 rounded-xl",n.bg),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(w.Flame,{className:(0,f.cn)("w-10 h-10",n.color)}),e>0&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-white rounded-full flex items-center justify-center text-xs font-bold shadow-sm",children:e})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:(0,f.cn)("text-2xl font-bold",n.color),children:[e," Day",1!==e?"s":""]}),(0,s.jsx)("p",{className:"text-sm opacity-70",children:"Current Streak"})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-medium",children:["Longest: ",t]}),(0,s.jsx)("p",{className:"text-xs opacity-60",children:"days"})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsxs)("span",{className:"opacity-70",children:["Next: ",c.label]}),(0,s.jsxs)("span",{className:"font-medium",children:[e,"/",c.target]})]}),(0,s.jsx)(D.Progress,{value:d,className:"h-2"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)(eg.Brain,{className:"w-5 h-5 text-blue-500 mx-auto mb-1"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:a}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Total Reviews"})]}),(0,s.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)(o.Calendar,{className:"w-5 h-5 text-green-500 mx-auto mb-1"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:r}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"This Week"})]}),(0,s.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)(B.Target,{className:"w-5 h-5 text-purple-500 mx-auto mb-1"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:Math.round(a/(e||1)*10)/10}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Per Day"})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h4",{className:"font-medium text-sm flex items-center gap-2",children:[(0,s.jsx)(M.Award,{className:"w-4 h-4"}),"Recent Achievements"]}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:l.slice(0,8).map(e=>{let t=eU[e.icon]||eL.Star;return(0,s.jsxs)("div",{className:(0,f.cn)("relative p-3 rounded-lg text-center transition-all cursor-pointer group",e.unlocked?"bg-gradient-to-br from-yellow-50 to-orange-50 border border-yellow-200":"bg-gray-50 border border-gray-200 opacity-60"),title:e.description,children:[(0,s.jsx)(t,{className:(0,f.cn)("w-6 h-6 mx-auto mb-1",e.unlocked?"text-yellow-500":"text-gray-400")}),(0,s.jsx)("p",{className:"text-xs font-medium truncate",children:e.title}),!e.unlocked&&e.maxProgress>1&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)(D.Progress,{value:e.progress/e.maxProgress*100,className:"h-1"}),(0,s.jsxs)("p",{className:"text-[10px] text-gray-400 mt-1",children:[e.progress,"/",e.maxProgress]})]}),e.unlocked&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,s.jsx)(R.Badge,{variant:"default",className:"h-4 w-4 p-0 flex items-center justify-center bg-yellow-400 text-yellow-900",children:"✓"})})]},e.id)})}),0===l.length&&(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:[{icon:"flame",title:"First Review",unlocked:a>=1},{icon:"target",title:"Week Warrior",unlocked:t>=7},{icon:"zap",title:"Speed Demon",unlocked:!1},{icon:"brain",title:"Memory Master",unlocked:a>=50},{icon:"crown",title:"30-Day King",unlocked:t>=30},{icon:"rocket",title:"Quick Learner",unlocked:r>=10},{icon:"calendar",title:"Consistent",unlocked:e>=14},{icon:"award",title:"Century Club",unlocked:a>=100}].map((e,t)=>{let a=eU[e.icon]||eL.Star;return(0,s.jsxs)("div",{className:(0,f.cn)("p-3 rounded-lg text-center",e.unlocked?"bg-gradient-to-br from-yellow-50 to-orange-50 border border-yellow-200":"bg-gray-50 border border-gray-200 opacity-50"),children:[(0,s.jsx)(a,{className:(0,f.cn)("w-6 h-6 mx-auto mb-1",e.unlocked?"text-yellow-500":"text-gray-400")}),(0,s.jsx)("p",{className:"text-xs font-medium truncate",children:e.title})]},t)})})]})]})]})}var eF=e.i(311),eH=e.i(604766);let eW=(0,U.default)("apple",[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]]);function eG(e){new Date().toISOString().replace(/[-:]/g,"").split(".")[0];let s=e.map(e=>{let s=new Date(e.scheduledFor),t=new Date(s.getTime()+18e5),a=e=>e.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z";return`BEGIN:VEVENT
UID:${e.id}@tutorme.com
DTSTART:${a(s)}
DTEND:${a(t)}
SUMMARY:Review: ${e.contentTitle}
DESCRIPTION:Time to review ${e.contentTitle} from ${e.subjectName}. Spaced repetition review to strengthen long-term memory.
CATEGORIES:Study,Review,Education
BEGIN:VALARM
ACTION:DISPLAY
DESCRIPTION:Review Reminder
TRIGGER:-PT15M
END:VALARM
END:VEVENT`}).join("\n");return`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//TutorMe//Spaced Repetition//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
X-WR-CALNAME:TutorMe Review Schedule
X-WR-TIMEZONE:UTC
${s}
END:VCALENDAR`}function eq({upcomingReviews:e}){let[a,r]=(0,t.useState)(!1),l=function(e){if(0===e.length)return"";let s=e[0],t=new Date(s.scheduledFor),a=new Date(t.getTime()+18e5),r=e=>e.toISOString().replace(/[-:]/g,"").split(".")[0],l=new URLSearchParams({action:"TEMPLATE",text:`Review: ${s.contentTitle}`,details:`Time to review ${s.contentTitle} from ${s.subjectName}. Spaced repetition review to strengthen long-term memory.`,dates:`${r(t)}/${r(a)}`});return`https://calendar.google.com/calendar/render?${l.toString()}`}(e),c=function(e){if(0===e.length)return"";let s=e[0],t=new Date(s.scheduledFor),a=new Date(t.getTime()+18e5),r=new URLSearchParams({subject:`Review: ${s.contentTitle}`,body:`Time to review ${s.contentTitle} from ${s.subjectName}. Spaced repetition review to strengthen long-term memory.`,startdt:t.toISOString(),enddt:a.toISOString()});return`https://outlook.live.com/calendar/0/deeplink/compose?${r.toString()}`}(e);return 0===e.length?null:(0,s.jsxs)(i.Card,{className:"w-full",children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(i.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(o.Calendar,{className:"w-5 h-5"}),"Calendar Sync"]}),(0,s.jsx)(i.CardDescription,{children:"Export reviews to your calendar"})]}),(0,s.jsxs)(R.Badge,{variant:"outline",children:[e.length," events"]})]})}),(0,s.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,s.jsxs)(n.Button,{variant:"outline",className:"w-full justify-center",onClick:()=>window.open(l,"_blank"),children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})}),"Google"]}),(0,s.jsxs)(n.Button,{variant:"outline",className:"w-full justify-center",onClick:()=>window.open(c,"_blank"),children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M7.88 12.04q0 .48-.19.91t-.54.74q-.35.31-.84.49-.48.19-1.08.19-.65 0-1.18-.22-.53-.22-.9-.64t-.58-1.01q-.21-.59-.21-1.32 0-.74.21-1.33.22-.59.59-1t.89-.63 1.15-.22q.62 0 1.09.19.47.19.81.51.34.33.53.77.19.44.19.92zm5.48 0q0 .48-.19.91t-.54.74q-.35.31-.84.49-.48.19-1.08.19-.65 0-1.18-.22-.53-.22-.9-.64t-.58-1.01q-.21-.59-.21-1.32 0-.74.21-1.33.22-.59.59-1t.89-.63 1.15-.22q.62 0 1.09.19.47.19.81.51.34.33.53.77.19.44.19.92zm5.5 0q0 .48-.19.91t-.54.74q-.35.31-.84.49-.48.19-1.08.19-.65 0-1.18-.22-.53-.22-.9-.64t-.58-1.01q-.21-.59-.21-1.32 0-.74.21-1.33.22-.59.59-1t.89-.63 1.15-.22q.62 0 1.09.19.47.19.81.51.34.33.53.77.19.44.19.92zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"})}),"Outlook"]}),(0,s.jsxs)(n.Button,{variant:"outline",className:"w-full justify-center",onClick:()=>{let s=new Blob([eG(e)],{type:"text/calendar;charset=utf-8"}),t=URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="tutorme-reviews.ics",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t),b.toast.success("Calendar file downloaded!")},children:[(0,s.jsx)(eW,{className:"w-5 h-5 mr-2"}),"Apple"]})]}),(0,s.jsxs)("div",{className:"pt-3 border-t",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"What you'll get:"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(eH.Check,{className:"w-4 h-4 text-green-500"}),(0,s.jsxs)("span",{children:[e.length," review events"]})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(eH.Check,{className:"w-4 h-4 text-green-500"}),(0,s.jsx)("span",{children:"15-minute reminder before each review"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(eH.Check,{className:"w-4 h-4 text-green-500"}),(0,s.jsx)("span",{children:"Auto-syncs with your calendar app"})]})]})]}),(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>{let s=eG(e);navigator.clipboard.writeText(s),r(!0),b.toast.success("Calendar data copied to clipboard!"),setTimeout(()=>r(!1),2e3)},children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eH.Check,{className:"w-4 h-4 mr-2"}),"Copied!"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eF.Download,{className:"w-4 h-4 mr-2"}),"Copy Calendar Data"]})})]})]})}var eV=e.i(121162);function eQ({reviewData:e,onRefresh:a,fullWidth:r=!1}){let l,c,d,[o,x]=(0,t.useState)(null),[m,h]=(0,t.useState)(!1),[g,j]=(0,t.useState)("overview"),[p,N]=(0,t.useState)(!1),y=e||(p?(l=[{id:"math",name:"Mathematics",color:"#3B82F6"},{id:"english",name:"English",color:"#10B981"},{id:"science",name:"Science",color:"#8B5CF6"},{id:"history",name:"History",color:"#F59E0B"}].map(e=>{let s=[];for(let t=0;t<=30;t++){let a=100*Math.exp(-t/8);(0===t||7===t||14===t)&&(a=95),s.push({day:t,date:new Date(Date.now()+24*t*36e5).toISOString(),retention:Math.round(a),isReviewPoint:0===t||7===t||14===t,reviewId:0===t||7===t||14===t?`review-${e.id}-${t}`:void 0,contentTitle:0===t?`${e.name} - Chapter 1`:7===t?`${e.name} - Chapter 2`:14===t?`${e.name} - Chapter 3`:void 0,contentId:0===t||7===t||14===t?`content-${e.id}-${t}`:void 0})}return{subjectId:e.id,subjectName:e.name,color:e.color,dataPoints:s}}),d=(c=[{id:"review-1",contentId:"content-math-1",contentTitle:"Quadratic Equations",subjectId:"math",subjectName:"Mathematics",subjectColor:"#3B82F6",scheduledFor:new Date(Date.now()+864e5).toISOString(),isOverdue:!1,daysUntilDue:1,currentRetention:35,repetitionCount:2,priority:"high"},{id:"review-2",contentId:"content-english-1",contentTitle:"Shakespeare Sonnets",subjectId:"english",subjectName:"English",subjectColor:"#10B981",scheduledFor:new Date().toISOString(),isOverdue:!0,daysUntilDue:0,daysOverdue:1,currentRetention:28,repetitionCount:1,priority:"critical"},{id:"review-3",contentId:"content-science-1",contentTitle:"Cell Biology",subjectId:"science",subjectName:"Science",subjectColor:"#8B5CF6",scheduledFor:new Date(Date.now()+1728e5).toISOString(),isOverdue:!1,daysUntilDue:2,currentRetention:62,repetitionCount:3,priority:"medium"},{id:"review-4",contentId:"content-history-1",contentTitle:"World War II",subjectId:"history",subjectName:"History",subjectColor:"#F59E0B",scheduledFor:new Date(Date.now()+2592e5).toISOString(),isOverdue:!1,daysUntilDue:3,currentRetention:78,repetitionCount:4,priority:"low"},{id:"review-5",contentId:"content-math-2",contentTitle:"Linear Algebra",subjectId:"math",subjectName:"Mathematics",subjectColor:"#3B82F6",scheduledFor:new Date(Date.now()+432e6).toISOString(),isOverdue:!1,daysUntilDue:5,currentRetention:85,repetitionCount:5,priority:"low"}]).filter(e=>e.isOverdue),{subjectCurves:l,upcomingReviews:c,overdueReviews:d,totalDue:c.length,reviewHistory:Array.from({length:365},(e,s)=>{let t=new Date;t.setDate(t.getDate()-(364-s));let a=Math.random()<.3+s/365*.4?Math.floor(4*Math.random())+1:0;return{date:t.toISOString().split("T")[0],count:a,level:0===a?0:1===a?1:2===a?2:a<4?3:4}})}):null),v=e=>{x(e),h(!0)};if(!y)return(0,s.jsx)(i.Card,{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200",children:(0,s.jsxs)(i.CardContent,{className:"py-12 text-center",children:[(0,s.jsx)("div",{className:"p-4 bg-white rounded-full w-fit mx-auto mb-4 shadow-sm",children:(0,s.jsx)(eg.Brain,{className:"w-12 h-12 text-blue-500"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Spaced Repetition System"}),(0,s.jsx)("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Optimize your learning with scientifically-backed review scheduling. Reviews are scheduled based on the forgetting curve to maximize retention."}),(0,s.jsxs)(n.Button,{size:"lg",onClick:()=>N(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[(0,s.jsx)(eT.Sparkles,{className:"w-5 h-5 mr-2"}),"See Demo with Mock Data"]}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-4",children:"Start learning and completing quizzes to generate your own review schedule"})]})});let b=y.upcomingReviews?.filter(e=>e.currentRetention<40).map(e=>({contentId:e.contentId,contentTitle:e.contentTitle,subject:e.subjectName,currentRetention:e.currentRetention,lastQuizScore:null}))||[],w=y.reviewHistory||[],C=[{id:"1",title:"First Review",description:"Complete your first review",icon:"star",unlocked:!0,progress:1,maxProgress:1},{id:"2",title:"Week Warrior",description:"7-day streak",icon:"flame",unlocked:!0,progress:7,maxProgress:7},{id:"3",title:"Memory Master",description:"50 reviews completed",icon:"brain",unlocked:!1,progress:12,maxProgress:50},{id:"4",title:"Quick Learner",description:"10 reviews in a week",icon:"zap",unlocked:!0,progress:10,maxProgress:10},{id:"5",title:"Consistency King",description:"14-day streak",icon:"crown",unlocked:!1,progress:5,maxProgress:14},{id:"6",title:"Century Club",description:"100 reviews completed",icon:"award",unlocked:!1,progress:12,maxProgress:100}],k=y.subjectCurves.map(e=>({subjectId:e.subjectId,subjectName:e.subjectName,color:e.color,currentRetention:e.dataPoints[0]?.retention||70,averageRetention:Math.round(e.dataPoints.reduce((e,s)=>e+s.retention,0)/e.dataPoints.length),trend:Math.random()>.5?"up":"stable",reviewsCount:Math.floor(20*Math.random())+5})),S=y.upcomingReviews?.filter(e=>0===e.daysUntilDue).length||0,T=y.upcomingReviews?.filter(e=>e.daysUntilDue<=7).length||0;return r?(0,s.jsxs)("div",{className:"space-y-4",children:[p&&(0,s.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-yellow-800",children:[(0,s.jsx)(eT.Sparkles,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Viewing demo data. Start learning to see your own review schedule!"})]}),(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>N(!1),children:"Hide Demo"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,s.jsx)(i.Card,{className:(0,f.cn)(y.totalDue>0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"),children:(0,s.jsx)(i.CardContent,{className:"pt-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Due Now"}),(0,s.jsx)("p",{className:(0,f.cn)("text-2xl font-bold",y.totalDue>0?"text-red-600":"text-green-600"),children:S})]}),(0,s.jsx)(eg.Brain,{className:(0,f.cn)("w-8 h-8",y.totalDue>0?"text-red-400":"text-green-400")})]})})}),(0,s.jsx)(i.Card,{children:(0,s.jsx)(i.CardContent,{className:"pt-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"This Week"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:T})]}),(0,s.jsx)(X.CalendarDays,{className:"w-8 h-8 text-blue-400"})]})})}),(0,s.jsx)(i.Card,{children:(0,s.jsx)(i.CardContent,{className:"pt-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Streak"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:"5"})]}),(0,s.jsx)(u.Trophy,{className:"w-8 h-8 text-orange-400"})]})})}),(0,s.jsx)(i.Card,{children:(0,s.jsx)(i.CardContent,{className:"pt-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Subjects"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:y.subjectCurves?.length||0})]}),(0,s.jsx)(eV.LayoutGrid,{className:"w-8 h-8 text-purple-400"})]})})})]}),b.length>0&&(0,s.jsx)(eR,{weakTopics:b}),(0,s.jsxs)(_.Tabs,{value:g,onValueChange:e=>j(e),className:"w-full",children:[(0,s.jsxs)(_.TabsList,{className:"grid w-full grid-cols-3",children:[(0,s.jsxs)(_.TabsTrigger,{value:"overview",className:"flex items-center gap-2",children:[(0,s.jsx)(eV.LayoutGrid,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Overview"})]}),(0,s.jsxs)(_.TabsTrigger,{value:"queue",className:"flex items-center gap-2",children:[(0,s.jsx)(G.List,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Queue"}),y.totalDue>0&&(0,s.jsx)(R.Badge,{variant:"destructive",className:"h-5 px-1.5 text-xs",children:y.totalDue})]}),(0,s.jsxs)(_.TabsTrigger,{value:"stats",className:"flex items-center gap-2",children:[(0,s.jsx)(u.Trophy,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Stats"})]})]}),(0,s.jsxs)(_.TabsContent,{value:"overview",className:"space-y-4 mt-4",children:[(0,s.jsx)(eN,{subjectCurves:y.subjectCurves,upcomingReviews:y.upcomingReviews,overdueReviews:y.overdueReviews,totalDue:y.totalDue,onReviewClick:v,onContentClick:(e,s)=>{let t=y.upcomingReviews.find(s=>s.contentId===e);t?v(t):v({id:`temp-${e}`,contentId:e,contentTitle:s||"Review Item",subjectName:"General",subjectColor:"#3B82F6",currentRetention:50,daysUntilDue:0,priority:"medium"})}}),(0,s.jsx)(eA,{subjects:k}),(0,s.jsx)(eq,{upcomingReviews:y.upcomingReviews})]}),(0,s.jsx)(_.TabsContent,{value:"queue",className:"mt-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(ek,{reviews:y.upcomingReviews.map(e=>({id:e.id,contentId:e.contentId,contentTitle:e.contentTitle,subjectId:e.subjectId,subjectName:e.subjectName,subjectColor:e.subjectColor,currentRetention:e.currentRetention,estimatedMinutes:e.currentRetention<40?20:e.currentRetention<70?15:10,priority:e.priority,daysOverdue:e.daysOverdue||0,lastReviewed:null,difficulty:e.currentRetention>70?"easy":e.currentRetention>40?"medium":"hard"})),streakDays:5})}),(0,s.jsx)("div",{children:(0,s.jsx)(eP,{contentTitle:"Example: Cell Biology Review",beforeRetention:45,afterRetention:95,nextReviewDate:new Date(Date.now()+6048e5).toISOString(),intervalDays:7,previousInterval:3})})]})}),(0,s.jsx)(_.TabsContent,{value:"stats",className:"space-y-4 mt-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(eM,{reviewHistory:w,streakDays:5,longestStreak:12,totalReviews:156}),(0,s.jsx)(eE,{streakDays:5,longestStreak:12,totalReviews:156,weeklyReviews:8,achievements:C})]})})]}),(0,s.jsx)(eb,{isOpen:m,onClose:()=>h(!1),review:o,onMarkKnown:()=>{a?.()},onSnooze:()=>{a?.()}})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[p&&(0,s.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-yellow-800",children:[(0,s.jsx)(eT.Sparkles,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Viewing demo data. Start learning to see your own review schedule!"})]}),(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>N(!1),children:"Hide Demo"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,s.jsx)(i.Card,{className:(0,f.cn)(y.totalDue>0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"),children:(0,s.jsx)(i.CardContent,{className:"pt-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Due Now"}),(0,s.jsx)("p",{className:(0,f.cn)("text-2xl font-bold",y.totalDue>0?"text-red-600":"text-green-600"),children:S})]}),(0,s.jsx)(eg.Brain,{className:(0,f.cn)("w-8 h-8",y.totalDue>0?"text-red-400":"text-green-400")})]})})}),(0,s.jsx)(i.Card,{children:(0,s.jsx)(i.CardContent,{className:"pt-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"This Week"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:T})]}),(0,s.jsx)(X.CalendarDays,{className:"w-8 h-8 text-blue-400"})]})})}),(0,s.jsx)(i.Card,{children:(0,s.jsx)(i.CardContent,{className:"pt-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Streak"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:"5"})]}),(0,s.jsx)(u.Trophy,{className:"w-8 h-8 text-orange-400"})]})})}),(0,s.jsx)(i.Card,{children:(0,s.jsx)(i.CardContent,{className:"pt-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Subjects"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:y.subjectCurves?.length||0})]}),(0,s.jsx)(eV.LayoutGrid,{className:"w-8 h-8 text-purple-400"})]})})})]}),b.length>0&&(0,s.jsx)(eR,{weakTopics:b}),(0,s.jsxs)(_.Tabs,{value:g,onValueChange:e=>j(e),className:"w-full",children:[(0,s.jsxs)(_.TabsList,{className:"grid w-full grid-cols-3",children:[(0,s.jsxs)(_.TabsTrigger,{value:"overview",className:"flex items-center gap-2",children:[(0,s.jsx)(eV.LayoutGrid,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Overview"})]}),(0,s.jsxs)(_.TabsTrigger,{value:"queue",className:"flex items-center gap-2",children:[(0,s.jsx)(G.List,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Queue"}),y.totalDue>0&&(0,s.jsx)(R.Badge,{variant:"destructive",className:"h-5 px-1.5 text-xs",children:y.totalDue})]}),(0,s.jsxs)(_.TabsTrigger,{value:"stats",className:"flex items-center gap-2",children:[(0,s.jsx)(u.Trophy,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Stats"})]})]}),(0,s.jsxs)(_.TabsContent,{value:"overview",className:"space-y-4 mt-4",children:[(0,s.jsx)(eN,{subjectCurves:y.subjectCurves,upcomingReviews:y.upcomingReviews,overdueReviews:y.overdueReviews,totalDue:y.totalDue,onReviewClick:v,onContentClick:(e,s)=>{let t=y.upcomingReviews.find(s=>s.contentId===e);t&&v(t)}}),(0,s.jsx)(eA,{subjects:k}),(0,s.jsx)(eq,{upcomingReviews:y.upcomingReviews})]}),(0,s.jsx)(_.TabsContent,{value:"queue",className:"mt-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(ek,{reviews:y.upcomingReviews.map(e=>({id:e.id,contentId:e.contentId,contentTitle:e.contentTitle,subjectId:e.subjectId,subjectName:e.subjectName,subjectColor:e.subjectColor,currentRetention:e.currentRetention,estimatedMinutes:e.currentRetention<40?20:e.currentRetention<70?15:10,priority:e.priority,daysOverdue:e.daysOverdue||0,lastReviewed:null,difficulty:e.currentRetention>70?"easy":e.currentRetention>40?"medium":"hard"})),streakDays:5})}),(0,s.jsx)("div",{children:(0,s.jsx)(eP,{contentTitle:"Example: Cell Biology Review",beforeRetention:45,afterRetention:95,nextReviewDate:new Date(Date.now()+6048e5).toISOString(),intervalDays:7,previousInterval:3})})]})}),(0,s.jsx)(_.TabsContent,{value:"stats",className:"space-y-4 mt-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(eM,{reviewHistory:w,streakDays:5,longestStreak:12,totalReviews:156}),(0,s.jsx)(eE,{streakDays:5,longestStreak:12,totalReviews:156,weeklyReviews:8,achievements:C})]})})]}),(0,s.jsx)(eb,{isOpen:m,onClose:()=>h(!1),review:o,onMarkKnown:()=>{a?.()},onSnooze:()=>{a?.()}})]})}let eY={en:{welcomeTitle:"Welcome back,",welcomeSubtitle:"Ready to continue your learning journey?",continueLearning:"Continue Learning",browseSubjects:"Browse subjects",noCoursesInProgress:"No courses in progress",browseSubjectsEmpty:"Browse subjects and start learning.",recommendedForYou:"Recommended for you",noRecommendationsYet:"No recommendations yet",noRecommendationsHint:"Complete lessons and quizzes to get personalized suggestions.",dailyQuests:"Daily Quests",noDailyQuests:"No daily quests today",noDailyQuestsHint:"Complete lessons to unlock quests and earn XP.",goToMissions:"Go to Missions",learningWorlds:"Learning Worlds",noWorldsYet:"No worlds unlocked yet",noWorldsHint:"Level up to unlock learning worlds.",viewWorlds:"View Worlds",upcomingClasses:"Upcoming Classes",viewAll:"View All",noUpcomingClasses:"No upcoming classes",noUpcomingClassesHint:"View available classes to book.",viewClasses:"View classes",skills:"Skills",skillsEmpty:"Skills will appear as you learn",skillsEmptyHint:"Complete lessons and quizzes to build your skill profile.",studyGroups:"Study Groups",noStudyGroupsYet:"No study groups yet",noStudyGroupsHint:"Join or create a group to study with others.",browseStudyGroups:"Browse study groups",quickActions:"Quick actions",aiTutor:"AI Tutor",missions:"Missions",myClasses:"My classes",errorLoading:"Something went wrong loading your dashboard.",retry:"Retry",loadingDashboard:"Loading your dashboard..."},zh:{welcomeTitle:"欢迎回来，",welcomeSubtitle:"继续你的学习之旅吧。",continueLearning:"继续学习",browseSubjects:"浏览科目",noCoursesInProgress:"暂无进行中的课程",browseSubjectsEmpty:"浏览科目并开始学习。",recommendedForYou:"为你推荐",noRecommendationsYet:"暂无推荐",noRecommendationsHint:"完成课程和测验后可获得个性化推荐。",dailyQuests:"每日任务",noDailyQuests:"今日暂无每日任务",noDailyQuestsHint:"完成课程以解锁任务并赚取经验。",goToMissions:"前往任务",learningWorlds:"学习世界",noWorldsYet:"尚未解锁世界",noWorldsHint:"升级以解锁学习世界。",viewWorlds:"查看世界",upcomingClasses:"即将开始的课",viewAll:"查看全部",noUpcomingClasses:"暂无即将开始的课",noUpcomingClassesHint:"查看可预约的课程。",viewClasses:"查看课程",skills:"技能",skillsEmpty:"学习过程中将显示技能",skillsEmptyHint:"完成课程和测验以建立技能档案。",studyGroups:"学习小组",noStudyGroupsYet:"暂无学习小组",noStudyGroupsHint:"加入或创建小组与大家一起学习。",browseStudyGroups:"浏览学习小组",quickActions:"快捷操作",aiTutor:"AI 辅导",missions:"任务",myClasses:"我的课程",errorLoading:"加载仪表盘时出错。",retry:"重试",loadingDashboard:"正在加载仪表盘..."}};function e_(){let e=(0,r.useRouter)(),{data:d,status:o}=(0,a.useSession)(),[x,m]=(0,t.useState)(!0),[u,g]=(0,t.useState)(null),[j,p]=(0,t.useState)(!1),[N,f]=(0,t.useState)(null),[y,R]=(0,t.useState)(!1),[D,B]=(0,t.useState)(null),[M,I]=(0,t.useState)(null),[L,O]=(0,t.useState)(null),[U,E]=(0,t.useState)(null),H=function(e="zh"){return eY[e]}("en"),W=(0,t.useCallback)(async()=>{if("authenticated"===o){O(null),m(!0);try{let s=await Promise.all([fetch("/api/content").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({contents:[]})})),fetch("/api/gamification").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({success:!1})})),fetch("/api/gamification/worlds").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({success:!1,data:[]})})),fetch("/api/gamification/quests").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({success:!1,data:{quests:[]}})})),fetch("/api/recommendations").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({recommendations:[]})})),fetch("/api/classes?limit=3").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({classes:[]})})),fetch("/api/study-groups?limit=3").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({groups:[]})})),fetch("/api/student/subjects").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({subjects:[]})})),fetch("/api/student/reviews").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({success:!1,data:null})}))]);if(s.filter(e=>401===e.status).length>0)return void e.replace("/login");let[t,a,r,l,n,i,c,d,o]=await Promise.all(s.map(e=>e.json())),x=d?.subjects??[];g({contents:t?.contents??[],gamification:a?.data??null,worlds:r?.data??[],dailyQuests:l?.data?.quests??[],recommendations:n?.recommendations??[],classes:i?.classes??[],studyGroups:c?.groups??[],courses:x.map(e=>({id:e.id,name:e.name,subject:e.subject,description:e.description??null,progress:e.progress??0,completedLessons:e.completedLessons??0,totalLessons:e.totalLessons??0,lastStudied:e.lastStudied??null,enrollmentSource:e.enrollmentSource??null}))}),E(o?.data||null),m(!1)}catch(e){console.error("Dashboard fetch error:",e),O("error"),m(!1)}}},[o,e]);(0,t.useEffect)(()=>{if("unauthenticated"===o)return void e.replace("/login")},[o,e]),(0,t.useEffect)(()=>{"authenticated"===o&&W()},[o,W]),(0,t.useEffect)(()=>{"authenticated"===o&&u?.gamification&&fetch("/api/gamification/daily-login",{method:"POST"}).then(e=>e.json()).then(e=>{e.success&&e.data.firstLoginToday&&(f({amount:e.data.xpEarned,reason:"Daily Login"}),p(!0),e.data.leveledUp&&setTimeout(()=>R(!0),2e3))})},[o,u?.gamification]);let G=async e=>{B(e);try{let s=await fetch("/api/classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({classId:e})}),t=await s.json();if(s.ok){if(t.checkoutUrl){b.toast.success("Redirecting to payment..."),window.location.href=t.checkoutUrl;return}b.toast.success("Successfully booked class!"),g(s=>s?{...s,classes:s.classes.map(s=>s.id===e?{...s,isBooked:!0,bookingId:t.booking?.id,currentBookings:(s.currentBookings??0)+1}:s)}:null)}else b.toast.error(t.error||"Failed to book class")}catch{b.toast.error("An error occurred while booking")}finally{B(null)}},q=async e=>{I(e);try{let s=await fetch("/api/study-groups/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupId:e})}),t=await s.json();s.ok?(b.toast.success("Successfully joined study group!"),g(s=>s?{...s,studyGroups:s.studyGroups.map(s=>s.id===e?{...s,isMember:!0,currentMembers:s.currentMembers+1}:s)}:null)):b.toast.error(t.error||"Failed to join group")}catch{b.toast.error("An error occurred while joining")}finally{I(null)}};return"loading"===o||x?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("nav",{className:"bg-white border-b sticky top-0 z-50 safe-top",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[(0,s.jsx)("div",{className:"h-7 w-24 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-9 w-9 bg-gray-100 rounded animate-pulse"})]})})}),(0,s.jsx)(z,{loadingLabel:H.loadingDashboard})]}):"unauthenticated"===o?null:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[j&&N&&(0,s.jsx)(T.XpAnimation,{amount:N.amount,reason:N.reason,onComplete:()=>p(!1)}),y&&u?.gamification&&(0,s.jsx)(T.LevelUpAnimation,{level:u.gamification.level,onComplete:()=>R(!1)}),(0,s.jsx)("nav",{className:"bg-white border-b sticky top-0 z-50 safe-top",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(l.default,{href:"/student/dashboard",className:"text-xl font-bold text-blue-600",children:"TutorMe"})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[u?.gamification&&(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-orange-50 px-3 py-1 rounded-full",children:[(0,s.jsx)(w.Flame,{className:"h-4 w-4 text-orange-500"}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[u.gamification.streakDays," day streak"]})]}),(0,s.jsx)(v,{}),(0,s.jsx)(l.default,{href:"/student/settings",children:(0,s.jsx)(n.Button,{variant:"ghost",size:"icon",children:(0,s.jsx)(C.Settings,{className:"h-5 w-5"})})}),(0,s.jsx)(c.UserNav,{})]})]})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8","aria-busy":x,children:[L&&(0,s.jsxs)("div",{role:"alert",className:"mb-6 flex items-center justify-between gap-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-red-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.AlertCircle,{className:"h-5 w-5 shrink-0","aria-hidden":!0}),(0,s.jsx)("p",{className:"text-sm font-medium",children:H.errorLoading})]}),(0,s.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>W(),className:"shrink-0 focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:H.retry})]}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold",children:[H.welcomeTitle," ",d?.user?.name?.split(" ")[0]||"Student","!"]}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:H.welcomeSubtitle})]}),(0,s.jsx)(n.Button,{asChild:!0,children:(0,s.jsxs)(l.default,{href:"/student/live/join",children:[(0,s.jsx)(k.Video,{className:"w-4 h-4 mr-2"}),"Join Live Class"]})})]})}),(0,s.jsx)(A,{gamification:u?.gamification||null}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(Y,{courses:u?.courses??[],onCourseRemoved:W}),(0,s.jsx)(eo,{}),(0,s.jsx)(eu,{}),(0,s.jsx)(ex,{}),(0,s.jsx)(er,{onRefresh:W,contents:u?.contents??[],upcomingClasses:(u?.classes||[]).map(e=>({id:e.id,title:e.title,subject:e.subject,scheduledAt:e.startTime||e.scheduledAt||"",duration:e.duration,maxStudents:e.maxStudents,students:e.currentBookings||e._count?.participants||0,tutorName:e.tutor?.name||"Unknown Tutor",type:e.type||"online"})),bookingClassId:D,onBookClass:G}),u?.dailyQuests&&u.dailyQuests.length>0?(0,s.jsx)(S.DailyQuestsWidget,{quests:u.dailyQuests,completedCount:u.dailyQuests.filter(e=>e.completed).length,totalXp:u.dailyQuests.reduce((e,s)=>e+(s.completed?s.quest.xpReward:0),0),onQuestClick:s=>!s.completed&&e.push("/student/missions")}):(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsx)(i.CardTitle,{className:"text-lg",children:H.dailyQuests})}),(0,s.jsx)(i.CardContent,{children:(0,s.jsxs)("div",{className:"py-6 text-center text-gray-500",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:H.noDailyQuests}),(0,s.jsx)("p",{className:"text-xs mt-1",children:H.noDailyQuestsHint}),(0,s.jsx)(n.Button,{variant:"outline",size:"sm",className:"mt-3 focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",onClick:()=>e.push("/student/missions"),children:H.goToMissions})]})})]}),(0,s.jsx)(eQ,{reviewData:U,onRefresh:W,fullWidth:!0}),u?.gamification?.skills&&(0,s.jsx)(P.SkillRadar,{skills:u.gamification.skills}),u?.studyGroups&&u.studyGroups.length>0&&(0,s.jsx)($,{groups:u.studyGroups,joiningGroupId:M,onJoinGroup:q}),(0,s.jsx)(F,{})]})]})]})}e.s(["default",()=>e_],716657)}]);

//# debugId=4689a6b1-3dfa-7006-934f-7e3da2c35c9c
//# sourceMappingURL=3b35145544428189.js.map