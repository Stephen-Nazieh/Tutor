{
  "version": 3,
  "sources": [],
  "debugId": "7c23b29e-9537-3c8e-00c7-96995e030367",
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/globals/environment.ts"],"sourcesContent":["import { atom } from '@tldraw/state'\n\n/**\n * An object that contains information about the current device and environment.\n * This object is not reactive and will not update automatically when the environment changes,\n * so only include values that are fixed, such as the user's browser and operating system.\n *\n * @public\n */\nconst tlenv = {\n\tisSafari: false,\n\tisIos: false,\n\tisChromeForIos: false,\n\tisFirefox: false,\n\tisAndroid: false,\n\tisWebview: false,\n\tisDarwin: false,\n\thasCanvasSupport: false,\n}\n\nlet isForcedFinePointer = false\n\nif (typeof window !== 'undefined') {\n\tif ('navigator' in window) {\n\t\ttlenv.isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n\t\ttlenv.isIos = !!navigator.userAgent.match(/iPad/i) || !!navigator.userAgent.match(/iPhone/i)\n\t\ttlenv.isChromeForIos = /crios.*safari/i.test(navigator.userAgent)\n\t\ttlenv.isFirefox = /firefox/i.test(navigator.userAgent)\n\t\ttlenv.isAndroid = /android/i.test(navigator.userAgent)\n\t\ttlenv.isDarwin = window.navigator.userAgent.toLowerCase().indexOf('mac') > -1\n\t}\n\ttlenv.hasCanvasSupport = 'Promise' in window && 'HTMLCanvasElement' in window\n\tisForcedFinePointer = tlenv.isFirefox && !tlenv.isAndroid && !tlenv.isIos\n}\n\n/**\n * An atom that contains information about the current device and environment.\n * This object is reactive and will update automatically when the environment changes.\n * Use it for values that may change over time, such as the pointer type.\n *\n * @public\n */\nconst tlenvReactive = atom('tlenvReactive', {\n\t// Whether the user's device has a coarse pointer. This is dynamic on many systems, especially\n\t// on touch-screen laptops, which will become \"coarse\" if the user touches the screen.\n\t// See https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/At-rules/@media/pointer#coarse\n\tisCoarsePointer: false,\n})\n\nif (typeof window !== 'undefined' && !isForcedFinePointer) {\n\tconst mql = window.matchMedia && window.matchMedia('(any-pointer: coarse)')\n\n\tconst isCurrentCoarsePointer = () => tlenvReactive.__unsafe__getWithoutCapture().isCoarsePointer\n\n\tif (mql) {\n\t\t// 1. Update the coarse pointer automatically when the media query changes\n\t\tconst updateIsCoarsePointer = () => {\n\t\t\tconst isCoarsePointer = mql.matches\n\t\t\tif (isCoarsePointer !== isCurrentCoarsePointer()) {\n\t\t\t\ttlenvReactive.update((prev) => ({ ...prev, isCoarsePointer: isCoarsePointer }))\n\t\t\t}\n\t\t}\n\t\tupdateIsCoarsePointer()\n\t\tmql.addEventListener('change', updateIsCoarsePointer)\n\t}\n\n\t// 2. Also update the coarse pointer state when a pointer down event occurs. We need `capture: true`\n\t// here because the tldraw component itself stops propagation on pointer events it receives.\n\twindow.addEventListener(\n\t\t'pointerdown',\n\t\t(e: PointerEvent) => {\n\t\t\t// when the user interacts with a mouse, we assume they have a fine pointer.\n\t\t\t// otherwise, we assume they have a coarse pointer.\n\t\t\tconst isCoarseEvent = e.pointerType !== 'mouse'\n\t\t\tif (isCoarseEvent !== isCurrentCoarsePointer()) {\n\t\t\t\ttlenvReactive.update((prev) => ({ ...prev, isCoarsePointer: isCoarseEvent }))\n\t\t\t}\n\t\t},\n\t\t{ capture: true }\n\t)\n}\n\nexport { tlenv, tlenvReactive }\n"],"names":[],"mappings":";;;;;;;AAAA,SAAS,YAAY;;AASrB,MAAM,QAAQ;IACb,UAAU;IACV,OAAO;IACP,gBAAgB;IAChB,WAAW;IACX,WAAW;IACX,WAAW;IACX,UAAU;IACV,kBAAkB;AACnB;AAEA,IAAI,sBAAsB;AAE1B,IAAI,OAAO,WAAW,aAAa;IAClC,IAAI,eAAe,QAAQ;QAC1B,MAAM,QAAA,GAAW,iCAAiC,IAAA,CAAK,UAAU,SAAS;QAC1E,MAAM,KAAA,GAAQ,CAAC,CAAC,UAAU,SAAA,CAAU,KAAA,CAAM,OAAO,KAAK,CAAC,CAAC,UAAU,SAAA,CAAU,KAAA,CAAM,SAAS;QAC3F,MAAM,cAAA,GAAiB,iBAAiB,IAAA,CAAK,UAAU,SAAS;QAChE,MAAM,SAAA,GAAY,WAAW,IAAA,CAAK,UAAU,SAAS;QACrD,MAAM,SAAA,GAAY,WAAW,IAAA,CAAK,UAAU,SAAS;QACrD,MAAM,QAAA,GAAW,OAAO,SAAA,CAAU,SAAA,CAAU,WAAA,CAAY,EAAE,OAAA,CAAQ,KAAK,IAAI,CAAA;IAC5E;IACA,MAAM,gBAAA,GAAmB,aAAa,UAAU,uBAAuB;IACvE,sBAAsB,MAAM,SAAA,IAAa,CAAC,MAAM,SAAA,IAAa,CAAC,MAAM,KAAA;AACrE;AASA,MAAM,oBAAgB,6NAAA,EAAK,iBAAiB;IAAA,8FAAA;IAAA,sFAAA;IAAA,gGAAA;IAI3C,iBAAiB;AAClB,CAAC;AAED,IAAI,OAAO,WAAW,eAAe,CAAC,qBAAqB;IAC1D,MAAM,MAAM,OAAO,UAAA,IAAc,OAAO,UAAA,CAAW,uBAAuB;IAE1E,MAAM,yBAAyB,IAAM,cAAc,2BAAA,CAA4B,EAAE,eAAA;IAEjF,IAAI,KAAK;QAER,MAAM,wBAAwB,MAAM;YACnC,MAAM,kBAAkB,IAAI,OAAA;YAC5B,IAAI,oBAAoB,uBAAuB,GAAG;gBACjD,cAAc,MAAA,CAAO,CAAC,OAAA,CAAU;wBAAE,GAAG,IAAA;wBAAM;oBAAiC,CAAA,CAAE;YAC/E;QACD;QACA,sBAAsB;QACtB,IAAI,gBAAA,CAAiB,UAAU,qBAAqB;IACrD;IAIA,OAAO,gBAAA,CACN,eACA,CAAC,MAAoB;QAGpB,MAAM,gBAAgB,EAAE,WAAA,KAAgB;QACxC,IAAI,kBAAkB,uBAAuB,GAAG;YAC/C,cAAc,MAAA,CAAO,CAAC,OAAA,CAAU;oBAAE,GAAG,IAAA;oBAAM,iBAAiB;gBAAc,CAAA,CAAE;QAC7E;IACD,GACA;QAAE,SAAS;IAAK;AAElB"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/globals/menus.ts"],"sourcesContent":["import { atom } from '@tldraw/state'\n\n/** @public */\nexport const tlmenus = {\n\t/**\n\t * A set of strings representing any open menus. When menus are open,\n\t * certain interactions will behave differently; for example, when a\n\t * draw tool is selected and a menu is open, a pointer-down will not\n\t * create a dot (because the user is probably trying to close the menu)\n\t * however a pointer-down event followed by a drag will begin drawing\n\t * a line (because the user is BOTH trying to close the menu AND start\n\t * drawing a line).\n\t *\n\t * @public\n\t */\n\tmenus: atom<string[]>('open menus', []),\n\n\t/**\n\t * Get the current open menus.\n\t *\n\t * @param contextId - An optional context to get menus for.\n\t *\n\t * @public\n\t */\n\tgetOpenMenus(contextId?: string) {\n\t\tif (contextId) return this.menus.get().filter((m) => m.endsWith('-' + contextId))\n\t\treturn this.menus.get()\n\t},\n\n\t/**\n\t * Add an open menu.\n\t *\n\t * @example\n\t * ```ts\n\t * addOpenMenu('menu-id')\n\t * addOpenMenu('menu-id', myEditorId)\n\t * ```\n\t *\n\t * @param id - The id of the menu to add.\n\t * @param contextId - An optional context to add the menu to.\n\t *\n\t * @public\n\t */\n\taddOpenMenu(id: string, contextId = '') {\n\t\tconst idWithContext = contextId ? `${id}-${contextId}` : id\n\t\tconst menus = new Set(this.menus.get())\n\t\tif (!menus.has(idWithContext)) {\n\t\t\tmenus.add(idWithContext)\n\t\t\tthis.menus.set([...menus])\n\t\t}\n\t},\n\n\t/**\n\t * Delete an open menu.\n\t *\n\t * @example\n\t * ```ts\n\t * deleteOpenMenu('menu-id')\n\t * deleteOpenMenu('menu-id', myEditorId)\n\t * ```\n\t *\n\t * @param id - The id of the menu to delete.\n\t * @param contextId - An optional context to delete the menu from.\n\t *\n\t * @public\n\t */\n\tdeleteOpenMenu(id: string, contextId = '') {\n\t\tconst idWithContext = contextId ? `${id}-${contextId}` : id\n\t\tconst menus = new Set(this.menus.get())\n\t\tif (menus.has(idWithContext)) {\n\t\t\tmenus.delete(idWithContext)\n\t\t\tthis.menus.set([...menus])\n\t\t}\n\t},\n\n\t/**\n\t * Clear all open menus.\n\t *\n\t * @example\n\t * ```ts\n\t * clearOpenMenus()\n\t * clearOpenMenus(myEditorId)\n\t * ```\n\t *\n\t * @param contextId - An optional context to clear menus for.\n\t *\n\t * @public\n\t */\n\tclearOpenMenus(contextId?: string) {\n\t\tthis.menus.set(contextId ? this.menus.get().filter((m) => !m.endsWith('-' + contextId)) : [])\n\t},\n\n\t_hiddenMenus: [] as string[],\n\n\t/**\n\t * Hide all open menus. Restore them with the `showOpenMenus` method.\n\t *\n\t * @example\n\t * ```ts\n\t * hideOpenMenus()\n\t * hideOpenMenus(myEditorId)\n\t * ```\n\t *\n\t * @param contextId - An optional context to hide menus for.\n\t *\n\t * @public\n\t */\n\thideOpenMenus(contextId?: string) {\n\t\tthis._hiddenMenus = [...this.getOpenMenus(contextId)]\n\t\tif (this._hiddenMenus.length === 0) return\n\t\tfor (const menu of this._hiddenMenus) {\n\t\t\tthis.deleteOpenMenu(menu, contextId)\n\t\t}\n\t},\n\n\t/**\n\t * Show all hidden menus.\n\t *\n\t * @example\n\t * ```ts\n\t * showOpenMenus()\n\t * showOpenMenus(myEditorId)\n\t * ```\n\t *\n\t * @param contextId - An optional context to show menus for.\n\t *\n\t * @public\n\t */\n\tshowOpenMenus(contextId?: string) {\n\t\tif (this._hiddenMenus.length === 0) return\n\t\tfor (const menu of this._hiddenMenus) {\n\t\t\tthis.addOpenMenu(menu, contextId)\n\t\t}\n\t\tthis._hiddenMenus = []\n\t},\n\n\t/**\n\t * Get whether a menu is open for a given context.\n\t *\n\t * @example\n\t * ```ts\n\t * isMenuOpem(id, myEditorId)\n\t * ```\n\t *\n\t * @param id - The id of the menu to check.\n\t * @param contextId - An optional context to check menus for.\n\t *\n\t * @public\n\t */\n\tisMenuOpen(id: string, contextId?: string): boolean {\n\t\treturn this.getOpenMenus(contextId).includes(`${id}-${contextId}`)\n\t},\n\n\t/**\n\t * Get whether any menus are open for a given context.\n\t *\n\t * @example\n\t * ```ts\n\t * hasOpenMenus(myEditorId)\n\t * ```\n\t *\n\t * @param contextId - A context to check menus for.\n\t *\n\t * @public\n\t */\n\thasOpenMenus(contextId: string): boolean {\n\t\treturn this.getOpenMenus(contextId).length > 0\n\t},\n\n\t/**\n\t * Get whether any menus are open for any context.\n\t *\n\t * @example\n\t * ```ts\n\t * hasAnyOpenMenus()\n\t * ```\n\t *\n\t * @public\n\t */\n\thasAnyOpenMenus(): boolean {\n\t\treturn this.getOpenMenus().length > 0\n\t},\n\n\tforContext(contextId: string) {\n\t\treturn {\n\t\t\tgetOpenMenus: () => this.getOpenMenus(contextId),\n\t\t\taddOpenMenu: (id: string) => this.addOpenMenu(id, contextId),\n\t\t\tdeleteOpenMenu: (id: string) => this.deleteOpenMenu(id, contextId),\n\t\t\tclearOpenMenus: () => this.clearOpenMenus(contextId),\n\t\t\t// Gets whether any menus are open\n\t\t\tisMenuOpen: (id: string) => this.isMenuOpen(id, contextId),\n\t\t\thasOpenMenus: () => this.hasOpenMenus(contextId),\n\t\t\thasAnyOpenMenus: () => this.hasAnyOpenMenus(),\n\t\t}\n\t},\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 268, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/globals/time.ts"],"sourcesContent":["import { Timers } from '@tldraw/utils'\n\n/**\n * A global timer manager.\n *\n * @public\n */\nexport const tltime = new Timers()\n"],"names":[],"mappings":";;;;;AAAA,SAAS,cAAc;;AAOhB,MAAM,SAAS,IAAI,iOAAA,CAAO"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/constants.ts"],"sourcesContent":["import { TLCameraOptions } from './editor/types/misc-types'\nimport { EASINGS } from './primitives/easings'\n\n/** @internal */\nexport const DEFAULT_CAMERA_OPTIONS: TLCameraOptions = {\n\tisLocked: false,\n\twheelBehavior: 'pan',\n\tpanSpeed: 1,\n\tzoomSpeed: 1,\n\tzoomSteps: [0.05, 0.1, 0.25, 0.5, 1, 2, 4, 8],\n}\n\n/** @internal */\nexport const DEFAULT_ANIMATION_OPTIONS = {\n\tduration: 0,\n\teasing: EASINGS.easeInOutCubic,\n}\n\n/**\n * Negative pointer ids are reserved for internal use.\n *\n * @internal */\nexport const INTERNAL_POINTER_IDS = {\n\tCAMERA_MOVE: -10,\n} as const\n\n/** @public */\nexport const SIDES = ['top', 'right', 'bottom', 'left'] as const\n\nexport const LEFT_MOUSE_BUTTON = 0\nexport const RIGHT_MOUSE_BUTTON = 2\nexport const MIDDLE_MOUSE_BUTTON = 1\nexport const STYLUS_ERASER_BUTTON = 5\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AACA,SAAS,eAAe;;AAGjB,MAAM,yBAA0C;IACtD,UAAU;IACV,eAAe;IACf,UAAU;IACV,WAAW;IACX,WAAW;QAAC;QAAM;QAAK;QAAM;QAAK;QAAG;QAAG;QAAG,CAAC;KAAA;AAC7C;AAGO,MAAM,4BAA4B;IACxC,UAAU;IACV,QAAQ,kPAAA,CAAQ,cAAA;AACjB;AAMO,MAAM,uBAAuB;IACnC,aAAa,CAAA;AACd;AAGO,MAAM,QAAQ;IAAC;IAAO;IAAS;IAAU,MAAM;CAAA;AAE/C,MAAM,oBAAoB;AAC1B,MAAM,qBAAqB;AAC3B,MAAM,sBAAsB;AAC5B,MAAM,uBAAuB"}},
    {"offset": {"line": 341, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/config/TLUserPreferences.ts"],"sourcesContent":["import { atom } from '@tldraw/state'\nimport { getDefaultTranslationLocale } from '@tldraw/tlschema'\nimport { getFromLocalStorage, setInLocalStorage, structuredClone, uniqueId } from '@tldraw/utils'\nimport { T } from '@tldraw/validate'\n\nconst USER_DATA_KEY = 'TLDRAW_USER_DATA_v3'\n\n/**\n * A user of tldraw\n *\n * @public\n */\nexport interface TLUserPreferences {\n\tid: string\n\tname?: string | null\n\tcolor?: string | null\n\t// N.B. These are duplicated in TLdrawAppUser.\n\tlocale?: string | null\n\tanimationSpeed?: number | null\n\tareKeyboardShortcutsEnabled?: boolean | null\n\tedgeScrollSpeed?: number | null\n\tcolorScheme?: 'light' | 'dark' | 'system'\n\tisSnapMode?: boolean | null\n\tisWrapMode?: boolean | null\n\tisDynamicSizeMode?: boolean | null\n\tisPasteAtCursorMode?: boolean | null\n\tenhancedA11yMode?: boolean | null\n\tinputMode?: 'trackpad' | 'mouse' | null\n\tisZoomDirectionInverted?: boolean | null\n}\n\ninterface UserDataSnapshot {\n\tversion: number\n\tuser: TLUserPreferences\n}\n\ninterface UserChangeBroadcastMessage {\n\ttype: typeof broadcastEventKey\n\torigin: string\n\tdata: UserDataSnapshot\n}\n\n/** @public */\nexport const userTypeValidator: T.Validator<TLUserPreferences> = T.object<TLUserPreferences>({\n\tid: T.string,\n\tname: T.string.nullable().optional(),\n\tcolor: T.string.nullable().optional(),\n\t// N.B. These are duplicated in TLdrawAppUser.\n\tlocale: T.string.nullable().optional(),\n\tanimationSpeed: T.number.nullable().optional(),\n\tareKeyboardShortcutsEnabled: T.boolean.nullable().optional(),\n\tedgeScrollSpeed: T.number.nullable().optional(),\n\tcolorScheme: T.literalEnum('light', 'dark', 'system').optional(),\n\tisSnapMode: T.boolean.nullable().optional(),\n\tisWrapMode: T.boolean.nullable().optional(),\n\tisDynamicSizeMode: T.boolean.nullable().optional(),\n\tisPasteAtCursorMode: T.boolean.nullable().optional(),\n\tenhancedA11yMode: T.boolean.nullable().optional(),\n\tinputMode: T.literalEnum('trackpad', 'mouse').nullable().optional(),\n\tisZoomDirectionInverted: T.boolean.nullable().optional(),\n})\n\nconst Versions = {\n\tAddAnimationSpeed: 1,\n\tAddIsSnapMode: 2,\n\tMakeFieldsNullable: 3,\n\tAddEdgeScrollSpeed: 4,\n\tAddExcalidrawSelectMode: 5,\n\tAddDynamicSizeMode: 6,\n\tAllowSystemColorScheme: 7,\n\tAddPasteAtCursor: 8,\n\tAddKeyboardShortcuts: 9,\n\tAddShowUiLabels: 10,\n\tAddPointerPeripheral: 11,\n\tRenameShowUiLabelsToEnhancedA11yMode: 12,\n\tAddZoomDirectionInverted: 13,\n} as const\n\nconst CURRENT_VERSION = Math.max(...Object.values(Versions))\n\nfunction migrateSnapshot(data: { version: number; user: any }) {\n\tif (data.version < Versions.AddAnimationSpeed) {\n\t\tdata.user.animationSpeed = 1\n\t}\n\tif (data.version < Versions.AddIsSnapMode) {\n\t\tdata.user.isSnapMode = false\n\t}\n\tif (data.version < Versions.MakeFieldsNullable) {\n\t\t// noop\n\t}\n\tif (data.version < Versions.AddEdgeScrollSpeed) {\n\t\tdata.user.edgeScrollSpeed = 1\n\t}\n\tif (data.version < Versions.AddExcalidrawSelectMode) {\n\t\tdata.user.isWrapMode = false\n\t}\n\tif (data.version < Versions.AllowSystemColorScheme) {\n\t\tif (data.user.isDarkMode === true) {\n\t\t\tdata.user.colorScheme = 'dark'\n\t\t} else if (data.user.isDarkMode === false) {\n\t\t\tdata.user.colorScheme = 'light'\n\t\t}\n\t\tdelete data.user.isDarkMode\n\t}\n\n\tif (data.version < Versions.AddDynamicSizeMode) {\n\t\tdata.user.isDynamicSizeMode = false\n\t}\n\tif (data.version < Versions.AddPasteAtCursor) {\n\t\tdata.user.isPasteAtCursorMode = false\n\t}\n\tif (data.version < Versions.AddKeyboardShortcuts) {\n\t\tdata.user.areKeyboardShortcutsEnabled = true\n\t}\n\tif (data.version < Versions.AddShowUiLabels) {\n\t\tdata.user.showUiLabels = false\n\t}\n\tif (data.version < Versions.RenameShowUiLabelsToEnhancedA11yMode) {\n\t\tdata.user.enhancedA11yMode = data.user.showUiLabels\n\t\tdelete data.user.showUiLabels\n\t}\n\n\tif (data.version < Versions.AddPointerPeripheral) {\n\t\tdata.user.inputMode = null\n\t}\n\n\tif (data.version < Versions.AddZoomDirectionInverted) {\n\t\tdata.user.isZoomDirectionInverted = false\n\t}\n\n\t// finally\n\tdata.version = CURRENT_VERSION\n}\n\n/** @internal */\nexport const USER_COLORS = [\n\t'#FF802B',\n\t'#EC5E41',\n\t'#F2555A',\n\t'#F04F88',\n\t'#E34BA9',\n\t'#BD54C6',\n\t'#9D5BD2',\n\t'#7B66DC',\n\t'#02B1CC',\n\t'#11B3A3',\n\t'#39B178',\n\t'#55B467',\n] as const\n\nfunction getRandomColor() {\n\treturn USER_COLORS[Math.floor(Math.random() * USER_COLORS.length)]\n}\n\n/** @internal */\nexport function userPrefersReducedMotion() {\n\tif (typeof window !== 'undefined' && window.matchMedia) {\n\t\treturn window.matchMedia?.('(prefers-reduced-motion: reduce)')?.matches ?? false\n\t}\n\n\treturn false\n}\n\n/** @public */\nexport const defaultUserPreferences = Object.freeze({\n\tname: '',\n\tlocale: getDefaultTranslationLocale(),\n\tcolor: getRandomColor(),\n\n\t// N.B. These are duplicated in TLdrawAppUser.\n\tedgeScrollSpeed: 1,\n\tanimationSpeed: userPrefersReducedMotion() ? 0 : 1,\n\tareKeyboardShortcutsEnabled: true,\n\tisSnapMode: false,\n\tisWrapMode: false,\n\tisDynamicSizeMode: false,\n\tisPasteAtCursorMode: false,\n\tenhancedA11yMode: false,\n\tcolorScheme: 'light',\n\tinputMode: null,\n\tisZoomDirectionInverted: false,\n}) satisfies Readonly<Omit<TLUserPreferences, 'id'>>\n\n/** @public */\nexport function getFreshUserPreferences(): TLUserPreferences {\n\treturn {\n\t\tid: uniqueId(),\n\t\tcolor: getRandomColor(),\n\t}\n}\n\nfunction migrateUserPreferences(userData: unknown): TLUserPreferences {\n\tif (userData === null || typeof userData !== 'object') {\n\t\treturn getFreshUserPreferences()\n\t}\n\n\tif (!('version' in userData) || !('user' in userData) || typeof userData.version !== 'number') {\n\t\treturn getFreshUserPreferences()\n\t}\n\n\tconst snapshot = structuredClone(userData) as any\n\n\tmigrateSnapshot(snapshot)\n\n\ttry {\n\t\treturn userTypeValidator.validate(snapshot.user)\n\t} catch {\n\t\treturn getFreshUserPreferences()\n\t}\n}\n\nfunction loadUserPreferences(): TLUserPreferences {\n\tconst userData = (JSON.parse(getFromLocalStorage(USER_DATA_KEY) || 'null') ??\n\t\tnull) as null | UserDataSnapshot\n\n\treturn migrateUserPreferences(userData)\n}\n\nconst globalUserPreferences = atom<TLUserPreferences | null>('globalUserData', null)\n\nfunction storeUserPreferences() {\n\tsetInLocalStorage(\n\t\tUSER_DATA_KEY,\n\t\tJSON.stringify({\n\t\t\tversion: CURRENT_VERSION,\n\t\t\tuser: globalUserPreferences.get(),\n\t\t})\n\t)\n}\n\n/** @public */\nexport function setUserPreferences(user: TLUserPreferences) {\n\tuserTypeValidator.validate(user)\n\tglobalUserPreferences.set(user)\n\tstoreUserPreferences()\n\tbroadcastUserPreferencesChange()\n}\n\nconst isTest = typeof process !== 'undefined' && process.env.NODE_ENV === 'test'\n\nconst channel =\n\ttypeof BroadcastChannel !== 'undefined' && !isTest\n\t\t? new BroadcastChannel('tldraw-user-sync')\n\t\t: null\n\nchannel?.addEventListener('message', (e) => {\n\tconst data = e.data as undefined | UserChangeBroadcastMessage\n\tif (data?.type === broadcastEventKey && data?.origin !== getBroadcastOrigin()) {\n\t\tglobalUserPreferences.set(migrateUserPreferences(data.data))\n\t}\n})\n\nlet _broadcastOrigin = null as null | string\nfunction getBroadcastOrigin() {\n\tif (_broadcastOrigin === null) {\n\t\t_broadcastOrigin = uniqueId()\n\t}\n\treturn _broadcastOrigin\n}\nconst broadcastEventKey = 'tldraw-user-preferences-change' as const\n\nfunction broadcastUserPreferencesChange() {\n\tchannel?.postMessage({\n\t\ttype: broadcastEventKey,\n\t\torigin: getBroadcastOrigin(),\n\t\tdata: {\n\t\t\tuser: getUserPreferences(),\n\t\t\tversion: CURRENT_VERSION,\n\t\t},\n\t} satisfies UserChangeBroadcastMessage)\n}\n\n/** @public */\nexport function getUserPreferences(): TLUserPreferences {\n\tlet prefs = globalUserPreferences.get()\n\tif (!prefs) {\n\t\tprefs = loadUserPreferences()\n\t\tsetUserPreferences(prefs)\n\t}\n\treturn prefs\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 571, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/config/createTLUser.ts"],"sourcesContent":["import { Signal, computed, isSignal } from '@tldraw/state'\nimport { useAtom } from '@tldraw/state-react'\nimport { useEffect, useMemo } from 'react'\nimport { useShallowObjectIdentity } from '../hooks/useIdentity'\nimport { TLUserPreferences, getUserPreferences, setUserPreferences } from './TLUserPreferences'\n\n/** @public */\nexport interface TLUser {\n\treadonly userPreferences: Signal<TLUserPreferences>\n\t// eslint-disable-next-line @typescript-eslint/method-signature-style\n\treadonly setUserPreferences: (userPreferences: TLUserPreferences) => void\n}\n\nconst defaultLocalStorageUserPrefs = computed('defaultLocalStorageUserPrefs', () =>\n\tgetUserPreferences()\n)\n\n/** @public */\nexport function createTLUser(\n\topts = {} as {\n\t\tuserPreferences?: Signal<TLUserPreferences>\n\t\t// eslint-disable-next-line @typescript-eslint/method-signature-style\n\t\tsetUserPreferences?: (userPreferences: TLUserPreferences) => void\n\t}\n): TLUser {\n\treturn {\n\t\tuserPreferences: opts.userPreferences ?? defaultLocalStorageUserPrefs,\n\t\tsetUserPreferences: opts.setUserPreferences ?? setUserPreferences,\n\t}\n}\n\n/**\n * @public\n */\nexport function useTldrawUser(opts: {\n\tuserPreferences?: Signal<TLUserPreferences> | TLUserPreferences\n\t// eslint-disable-next-line @typescript-eslint/method-signature-style\n\tsetUserPreferences?: (userPreferences: TLUserPreferences) => void\n}): TLUser {\n\tconst prefs = useShallowObjectIdentity(opts.userPreferences ?? defaultLocalStorageUserPrefs)\n\tconst userAtom = useAtom<TLUserPreferences | Signal<TLUserPreferences>>('userAtom', prefs)\n\tuseEffect(() => {\n\t\tuserAtom.set(prefs)\n\t}, [prefs, userAtom])\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tcreateTLUser({\n\t\t\t\tuserPreferences: computed('userPreferences', () => {\n\t\t\t\t\tconst userStuff = userAtom.get()\n\t\t\t\t\treturn isSignal(userStuff) ? userStuff.get() : userStuff\n\t\t\t\t}),\n\t\t\t\tsetUserPreferences: opts.setUserPreferences,\n\t\t\t}),\n\t\t[userAtom, opts.setUserPreferences]\n\t)\n}\n"],"names":[],"mappings":";;;;;;;;AAAA,SAAiB,UAAU,gBAAgB;;AAC3C,SAAS,eAAe;AACxB,SAAS,WAAW,eAAe;AACnC,SAAS,gCAAgC;AACzC,SAA4B,oBAAoB,0BAA0B;;;;;;AAS1E,MAAM,mCAA+B,qOAAA,EAAS,gCAAgC,QAC7E,mQAAA,CAAmB;AAIb,SAAS,aACf,OAAO,CAAC,CAAA,EAKC;IACT,OAAO;QACN,iBAAiB,KAAK,eAAA,IAAmB;QACzC,oBAAoB,KAAK,kBAAA,IAAsB,mQAAA;IAChD;AACD;AAKO,SAAS,cAAc,IAAA,EAInB;IACV,MAAM,YAAQ,kQAAA,EAAyB,KAAK,eAAA,IAAmB,4BAA4B;IAC3F,MAAM,eAAW,4OAAA,EAAuD,YAAY,KAAK;IACzF,IAAA,4NAAA;mCAAU,MAAM;YACf,SAAS,GAAA,CAAI,KAAK;QACnB;kCAAG;QAAC;QAAO,QAAQ;KAAC;IAEpB,WAAO,0NAAA;iCACN,IACC,aAAa;gBACZ,qBAAiB,qOAAA,EAAS;6CAAmB,MAAM;wBAClD,MAAM,YAAY,SAAS,GAAA,CAAI;wBAC/B,WAAO,qOAAA,EAAS,SAAS,IAAI,UAAU,GAAA,CAAI,IAAI;oBAChD,CAAC;;gBACD,oBAAoB,KAAK,kBAAA;YAC1B,CAAC;gCACF;QAAC;QAAU,KAAK,kBAAkB;KAAA;AAEpC"}},
    {"offset": {"line": 629, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/config/TLSessionStateSnapshot.ts"],"sourcesContent":["import { Signal, computed } from '@tldraw/state'\nimport { UnknownRecord } from '@tldraw/store'\nimport {\n\tCameraRecordType,\n\tInstancePageStateRecordType,\n\tTLINSTANCE_ID,\n\tTLPageId,\n\tTLShapeId,\n\tTLStore,\n\tpageIdValidator,\n\tpluckPreservingValues,\n\tshapeIdValidator,\n} from '@tldraw/tlschema'\nimport {\n\tdeleteFromSessionStorage,\n\tgetFromSessionStorage,\n\tisEqual,\n\tsetInSessionStorage,\n\tstructuredClone,\n\tuniqueId,\n} from '@tldraw/utils'\nimport { T } from '@tldraw/validate'\nimport { tlenv } from '../globals/environment'\n\nconst tabIdKey = 'TLDRAW_TAB_ID_v2' as const\n\nconst window = globalThis.window as\n\t| {\n\t\t\tnavigator: Window['navigator']\n\t\t\taddEventListener: Window['addEventListener']\n\t\t\tTLDRAW_TAB_ID_v2?: string\n\t  }\n\t| undefined\n\n// https://stackoverflow.com/a/9039885\nfunction iOS() {\n\tif (!window) return false\n\treturn (\n\t\t['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-deprecated\n\t\t\twindow.navigator.platform\n\t\t) ||\n\t\t// iPad on iOS 13 detection\n\t\t(tlenv.isDarwin && 'ontouchend' in document)\n\t)\n}\n\n/**\n * A string that is unique per browser tab\n * @public\n */\nexport const TAB_ID: string = window\n\t? (window[tabIdKey] ??\n\t\tgetFromSessionStorage(tabIdKey) ??\n\t\t`TLDRAW_INSTANCE_STATE_V1_` + uniqueId())\n\t: '<error>'\nif (window) {\n\twindow[tabIdKey] = TAB_ID\n\tif (iOS()) {\n\t\t// iOS does not trigger beforeunload\n\t\t// so we need to keep the sessionStorage value around\n\t\t// and hope the user doesn't figure out a way to duplicate their tab\n\t\t// in which case they'll have two tabs with the same UI state.\n\t\t// It's not a big deal, but it's not ideal.\n\t\t// And anyway I can't see a way to duplicate a tab in iOS Safari.\n\t\tsetInSessionStorage(tabIdKey, TAB_ID)\n\t} else {\n\t\tdeleteFromSessionStorage(tabIdKey)\n\t}\n}\n\nwindow?.addEventListener('beforeunload', () => {\n\tsetInSessionStorage(tabIdKey, TAB_ID)\n})\n\nconst Versions = {\n\tInitial: 0,\n} as const\n\nconst CURRENT_SESSION_STATE_SNAPSHOT_VERSION = Math.max(...Object.values(Versions))\n\nfunction migrate(snapshot: any) {\n\tif (snapshot.version < Versions.Initial) {\n\t\t// initial version\n\t\t// noop\n\t}\n\t// add further migrations down here. see TLUserPreferences.ts for an example.\n\n\t// finally\n\tsnapshot.version = CURRENT_SESSION_STATE_SNAPSHOT_VERSION\n}\n\n/**\n * The state of the editor instance, not including any document state.\n *\n * @public\n */\nexport interface TLSessionStateSnapshot {\n\tversion: number\n\tcurrentPageId?: TLPageId\n\tisFocusMode?: boolean\n\texportBackground?: boolean\n\tisDebugMode?: boolean\n\tisToolLocked?: boolean\n\tisGridMode?: boolean\n\tpageStates?: Array<{\n\t\tpageId: TLPageId\n\t\tcamera?: { x: number; y: number; z: number }\n\t\tselectedShapeIds?: TLShapeId[]\n\t\tfocusedGroupId?: TLShapeId | null\n\t}>\n}\n\nconst sessionStateSnapshotValidator: T.Validator<TLSessionStateSnapshot> = T.object({\n\tversion: T.number,\n\tcurrentPageId: pageIdValidator.optional(),\n\tisFocusMode: T.boolean.optional(),\n\texportBackground: T.boolean.optional(),\n\tisDebugMode: T.boolean.optional(),\n\tisToolLocked: T.boolean.optional(),\n\tisGridMode: T.boolean.optional(),\n\tpageStates: T.arrayOf(\n\t\tT.object({\n\t\t\tpageId: pageIdValidator,\n\t\t\tcamera: T.object({\n\t\t\t\tx: T.number,\n\t\t\t\ty: T.number,\n\t\t\t\tz: T.number,\n\t\t\t}).optional(),\n\t\t\tselectedShapeIds: T.arrayOf(shapeIdValidator).optional(),\n\t\t\tfocusedGroupId: shapeIdValidator.nullable().optional(),\n\t\t})\n\t).optional(),\n})\n\nfunction migrateAndValidateSessionStateSnapshot(state: unknown): TLSessionStateSnapshot | null {\n\tif (!state || typeof state !== 'object') {\n\t\tconsole.warn('Invalid instance state')\n\t\treturn null\n\t}\n\tif (!('version' in state) || typeof state.version !== 'number') {\n\t\tconsole.warn('No version in instance state')\n\t\treturn null\n\t}\n\tif (state.version !== CURRENT_SESSION_STATE_SNAPSHOT_VERSION) {\n\t\tstate = structuredClone(state)\n\t\tmigrate(state)\n\t}\n\n\ttry {\n\t\treturn sessionStateSnapshotValidator.validate(state)\n\t} catch (e) {\n\t\tconsole.warn(e)\n\t\treturn null\n\t}\n}\n\n/**\n * Creates a signal of the instance state for a given store.\n * @public\n * @param store - The store to create the instance state snapshot signal for\n * @returns\n */\nexport function createSessionStateSnapshotSignal(\n\tstore: TLStore\n): Signal<TLSessionStateSnapshot | null> {\n\tconst $allPageIds = store.query.ids('page')\n\n\treturn computed<TLSessionStateSnapshot | null>(\n\t\t'sessionStateSnapshot',\n\t\t() => {\n\t\t\tconst instanceState = store.get(TLINSTANCE_ID)\n\t\t\tif (!instanceState) return null\n\n\t\t\tconst allPageIds = [...$allPageIds.get()]\n\t\t\treturn {\n\t\t\t\tversion: CURRENT_SESSION_STATE_SNAPSHOT_VERSION,\n\t\t\t\tcurrentPageId: instanceState.currentPageId,\n\t\t\t\texportBackground: instanceState.exportBackground,\n\t\t\t\tisFocusMode: instanceState.isFocusMode,\n\t\t\t\tisDebugMode: instanceState.isDebugMode,\n\t\t\t\tisToolLocked: instanceState.isToolLocked,\n\t\t\t\tisGridMode: instanceState.isGridMode,\n\t\t\t\tpageStates: allPageIds.map((id) => {\n\t\t\t\t\tconst ps = store.get(InstancePageStateRecordType.createId(id))\n\t\t\t\t\tconst camera = store.get(CameraRecordType.createId(id))\n\t\t\t\t\treturn {\n\t\t\t\t\t\tpageId: id,\n\t\t\t\t\t\tcamera: {\n\t\t\t\t\t\t\tx: camera?.x ?? 0,\n\t\t\t\t\t\t\ty: camera?.y ?? 0,\n\t\t\t\t\t\t\tz: camera?.z ?? 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectedShapeIds: ps?.selectedShapeIds ?? [],\n\t\t\t\t\t\tfocusedGroupId: ps?.focusedGroupId ?? null,\n\t\t\t\t\t} satisfies NonNullable<TLSessionStateSnapshot['pageStates']>[0]\n\t\t\t\t}),\n\t\t\t} satisfies TLSessionStateSnapshot\n\t\t},\n\t\t{ isEqual }\n\t)\n}\n\n/**\n * Options for {@link loadSessionStateSnapshotIntoStore}\n * @public\n */\nexport interface TLLoadSessionStateSnapshotOptions {\n\t/**\n\t * By default, some session state flags like `isDebugMode` are not overwritten when loading a snapshot.\n\t * These are usually considered \"sticky\" by users while the document data is not.\n\t * If you want to overwrite these flags, set this to `true`.\n\t */\n\tforceOverwrite?: boolean\n}\n\n/**\n * Loads a snapshot of the editor's instance state into the store of a new editor instance.\n *\n * @public\n * @param store - The store to load the instance state into\n * @param snapshot - The instance state snapshot to load\n * @returns\n */\nexport function loadSessionStateSnapshotIntoStore(\n\tstore: TLStore,\n\tsnapshot: TLSessionStateSnapshot,\n\topts?: TLLoadSessionStateSnapshotOptions\n) {\n\tconst res = migrateAndValidateSessionStateSnapshot(snapshot)\n\tif (!res) return\n\n\tconst preserved = pluckPreservingValues(store.get(TLINSTANCE_ID))\n\tconst primary = opts?.forceOverwrite ? res : preserved\n\tconst secondary = opts?.forceOverwrite ? preserved : res\n\n\tconst instanceState = store.schema.types.instance.create({\n\t\tid: TLINSTANCE_ID,\n\t\t...preserved,\n\t\t// the integrity checker will ensure that the currentPageId is valid\n\t\tcurrentPageId: res.currentPageId,\n\t\tisDebugMode: primary?.isDebugMode ?? secondary?.isDebugMode,\n\t\tisFocusMode: primary?.isFocusMode ?? secondary?.isFocusMode,\n\t\tisToolLocked: primary?.isToolLocked ?? secondary?.isToolLocked,\n\t\tisGridMode: primary?.isGridMode ?? secondary?.isGridMode,\n\t\texportBackground: primary?.exportBackground ?? secondary?.exportBackground,\n\t})\n\n\tstore.atomic(() => {\n\t\tfor (const ps of res.pageStates ?? []) {\n\t\t\tif (!store.has(ps.pageId)) continue\n\t\t\tconst cameraId = CameraRecordType.createId(ps.pageId)\n\t\t\tconst instancePageState = InstancePageStateRecordType.createId(ps.pageId)\n\t\t\tconst previousCamera = store.get(cameraId)\n\t\t\tconst previousInstanceState = store.get(instancePageState)\n\t\t\tstore.put([\n\t\t\t\tCameraRecordType.create({\n\t\t\t\t\tid: cameraId,\n\t\t\t\t\tx: ps.camera?.x ?? previousCamera?.x,\n\t\t\t\t\ty: ps.camera?.y ?? previousCamera?.y,\n\t\t\t\t\tz: ps.camera?.z ?? previousCamera?.z,\n\t\t\t\t}),\n\t\t\t\tInstancePageStateRecordType.create({\n\t\t\t\t\tid: instancePageState,\n\t\t\t\t\tpageId: ps.pageId,\n\t\t\t\t\tselectedShapeIds: ps.selectedShapeIds ?? previousInstanceState?.selectedShapeIds,\n\t\t\t\t\tfocusedGroupId: ps.focusedGroupId ?? previousInstanceState?.focusedGroupId,\n\t\t\t\t}),\n\t\t\t])\n\t\t}\n\n\t\tstore.put([instanceState])\n\t\tstore.ensureStoreIsUsable()\n\t})\n}\n\n/**\n * @internal\n */\nexport function extractSessionStateFromLegacySnapshot(\n\tstore: Record<string, UnknownRecord>\n): TLSessionStateSnapshot | null {\n\tconst instanceRecords = []\n\tfor (const record of Object.values(store)) {\n\t\tif (record.typeName?.match(/^(instance.*|pointer|camera)$/)) {\n\t\t\tinstanceRecords.push(record)\n\t\t}\n\t}\n\n\t// for scratch documents, we need to extract the most recently-used instance and it's associated page states\n\t// but oops we don't have the concept of \"most recently-used\" so we'll just take the first one\n\tconst oldInstance = instanceRecords.filter(\n\t\t(r) => r.typeName === 'instance' && r.id !== TLINSTANCE_ID\n\t)[0] as any\n\tif (!oldInstance) return null\n\n\tconst result: TLSessionStateSnapshot = {\n\t\tversion: CURRENT_SESSION_STATE_SNAPSHOT_VERSION,\n\t\tcurrentPageId: oldInstance.currentPageId,\n\t\texportBackground: !!oldInstance.exportBackground,\n\t\tisFocusMode: !!oldInstance.isFocusMode,\n\t\tisDebugMode: !!oldInstance.isDebugMode,\n\t\tisToolLocked: !!oldInstance.isToolLocked,\n\t\tisGridMode: false,\n\t\tpageStates: instanceRecords\n\t\t\t.filter((r: any) => r.typeName === 'instance_page_state' && r.instanceId === oldInstance.id)\n\t\t\t.map((ps: any) => {\n\t\t\t\tconst camera = (store[ps.cameraId] as any) ?? { x: 0, y: 0, z: 1 }\n\t\t\t\treturn {\n\t\t\t\t\tpageId: ps.pageId,\n\t\t\t\t\tcamera: {\n\t\t\t\t\t\tx: camera.x,\n\t\t\t\t\t\ty: camera.y,\n\t\t\t\t\t\tz: camera.z,\n\t\t\t\t\t},\n\t\t\t\t\tselectedShapeIds: ps.selectedShapeIds,\n\t\t\t\t\tfocusedGroupId: ps.focusedGroupId,\n\t\t\t\t} satisfies NonNullable<TLSessionStateSnapshot['pageStates']>[0]\n\t\t\t}),\n\t}\n\n\ttry {\n\t\tsessionStateSnapshotValidator.validate(result)\n\t\treturn result\n\t} catch {\n\t\treturn null\n\t}\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 862, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/config/TLEditorSnapshot.ts"],"sourcesContent":["import { Signal } from '@tldraw/state'\nimport { TLINSTANCE_ID, TLStore, TLStoreSnapshot, pluckPreservingValues } from '@tldraw/tlschema'\nimport { WeakCache, filterEntries } from '@tldraw/utils'\nimport {\n\tTLSessionStateSnapshot,\n\tcreateSessionStateSnapshotSignal,\n\tloadSessionStateSnapshotIntoStore,\n} from './TLSessionStateSnapshot'\n\n/** @public */\nexport interface TLEditorSnapshot {\n\tdocument: TLStoreSnapshot\n\tsession: TLSessionStateSnapshot\n}\n\n/**\n * Options for {@link loadSnapshot}\n * @public\n */\nexport interface TLLoadSnapshotOptions {\n\t/**\n\t * By default, some session state flags like `isDebugMode` are not overwritten when loading a snapshot.\n\t * These are usually considered \"sticky\" by users while the document data is not.\n\t * If you want to overwrite these flags, set this to `true`.\n\t */\n\tforceOverwriteSessionState?: boolean\n}\n\n/**\n * Loads a snapshot into a store.\n * @public\n */\nexport function loadSnapshot(\n\tstore: TLStore,\n\t_snapshot: Partial<TLEditorSnapshot> | TLStoreSnapshot,\n\topts?: TLLoadSnapshotOptions\n) {\n\tlet snapshot: Partial<TLEditorSnapshot> = {}\n\tif ('store' in _snapshot) {\n\t\t// regular old TLStoreSnapshot\n\t\t// let's migrate it and then filter out the non-doc state to help folks out\n\t\tconst migrationResult = store.schema.migrateStoreSnapshot(_snapshot)\n\t\tif (migrationResult.type !== 'success') {\n\t\t\tthrow new Error('Failed to migrate store snapshot: ' + migrationResult.reason)\n\t\t}\n\n\t\tsnapshot.document = {\n\t\t\tschema: store.schema.serialize(),\n\t\t\tstore: filterEntries(migrationResult.value, (_, { typeName }) =>\n\t\t\t\tstore.scopedTypes.document.has(typeName)\n\t\t\t),\n\t\t}\n\t} else {\n\t\t// TLEditorSnapshot\n\t\tsnapshot = _snapshot\n\t}\n\n\t// We need to preserve a bunch of instance state properties that the Editor sets\n\t// to avoid breaking the editor or causing jarring changes when loading a snapshot.\n\tconst preservingInstanceState = pluckPreservingValues(store.get(TLINSTANCE_ID))\n\tconst preservingSessionState = sessionStateCache\n\t\t.get(store, createSessionStateSnapshotSignal)\n\t\t.get()\n\n\tstore.atomic(() => {\n\t\t// first load the document state (this will wipe the store if it happens)\n\t\tif (snapshot.document) {\n\t\t\tstore.loadStoreSnapshot(snapshot.document)\n\t\t}\n\n\t\t// then make sure we preserve those instance state properties that must be preserved\n\t\t// this is a noop if the document state wasn't loaded above\n\t\tif (preservingInstanceState) {\n\t\t\tstore.update(TLINSTANCE_ID, (r) => ({ ...r, ...preservingInstanceState }))\n\t\t}\n\t\tif (preservingSessionState) {\n\t\t\t// there's some duplication here with the instanceState but it's fine\n\t\t\tloadSessionStateSnapshotIntoStore(store, preservingSessionState)\n\t\t}\n\n\t\t// finally reinstate the UI state\n\t\tif (snapshot.session) {\n\t\t\tloadSessionStateSnapshotIntoStore(store, snapshot.session, {\n\t\t\t\tforceOverwrite: opts?.forceOverwriteSessionState,\n\t\t\t})\n\t\t}\n\t})\n}\n\nconst sessionStateCache = new WeakCache<\n\tTLStore,\n\tSignal<TLSessionStateSnapshot | undefined | null>\n>()\n\n/** @public */\nexport function getSnapshot(store: TLStore): TLEditorSnapshot {\n\tconst sessionState$ = sessionStateCache.get(store, createSessionStateSnapshotSignal)\n\tconst session = sessionState$.get()\n\tif (!session) {\n\t\tthrow new Error('Session state is not ready yet')\n\t}\n\n\treturn {\n\t\tdocument: store.getStoreSnapshot(),\n\t\tsession,\n\t}\n}\n"],"names":[],"mappings":";;;;;;;AACA,SAAS,eAAyC,6BAA6B;;;AAC/E,SAAS,WAAW,qBAAqB;AACzC;;;;AA6BO,SAAS,aACf,KAAA,EACA,SAAA,EACA,IAAA,EACC;IACD,IAAI,WAAsC,CAAC;IAC3C,IAAI,WAAW,WAAW;QAGzB,MAAM,kBAAkB,MAAM,MAAA,CAAO,oBAAA,CAAqB,SAAS;QACnE,IAAI,gBAAgB,IAAA,KAAS,WAAW;YACvC,MAAM,IAAI,MAAM,uCAAuC,gBAAgB,MAAM;QAC9E;QAEA,SAAS,QAAA,GAAW;YACnB,QAAQ,MAAM,MAAA,CAAO,SAAA,CAAU;YAC/B,WAAO,wOAAA,EAAc,gBAAgB,KAAA,EAAO,CAAC,GAAG,EAAE,QAAA,CAAS,CAAA,GAC1D,MAAM,WAAA,CAAY,QAAA,CAAS,GAAA,CAAI,QAAQ;QAEzC;IACD,OAAO;QAEN,WAAW;IACZ;IAIA,MAAM,8BAA0B,2PAAA,EAAsB,MAAM,GAAA,CAAI,mPAAa,CAAC;IAC9E,MAAM,yBAAyB,kBAC7B,GAAA,CAAI,OAAO,sRAAgC,EAC3C,GAAA,CAAI;IAEN,MAAM,MAAA,CAAO,MAAM;QAElB,IAAI,SAAS,QAAA,EAAU;YACtB,MAAM,iBAAA,CAAkB,SAAS,QAAQ;QAC1C;QAIA,IAAI,yBAAyB;YAC5B,MAAM,MAAA,CAAO,mPAAA,EAAe,CAAC,IAAA,CAAO;oBAAE,GAAG,CAAA;oBAAG,GAAG,uBAAA;gBAAwB,CAAA,CAAE;QAC1E;QACA,IAAI,wBAAwB;YAE3B,IAAA,uRAAA,EAAkC,OAAO,sBAAsB;QAChE;QAGA,IAAI,SAAS,OAAA,EAAS;YACrB,IAAA,uRAAA,EAAkC,OAAO,SAAS,OAAA,EAAS;gBAC1D,gBAAgB,MAAM;YACvB,CAAC;QACF;IACD,CAAC;AACF;AAEA,MAAM,oBAAoB,IAAI,mOAAA,CAG5B;AAGK,SAAS,YAAY,KAAA,EAAkC;IAC7D,MAAM,gBAAgB,kBAAkB,GAAA,CAAI,OAAO,sRAAgC;IACnF,MAAM,UAAU,cAAc,GAAA,CAAI;IAClC,IAAI,CAAC,SAAS;QACb,MAAM,IAAI,MAAM,gCAAgC;IACjD;IAEA,OAAO;QACN,UAAU,MAAM,gBAAA,CAAiB;QACjC;IACD;AACD"}},
    {"offset": {"line": 931, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/config/defaultBindings.ts"],"sourcesContent":["import { TLBindingUtilConstructor } from '../editor/bindings/BindingUtil'\n\n/** @public */\nexport type TLAnyBindingUtilConstructor = TLBindingUtilConstructor<any>\n\nexport function checkBindings(customBindings: readonly TLAnyBindingUtilConstructor[]) {\n\tconst bindings = [] as TLAnyBindingUtilConstructor[]\n\n\tconst addedCustomBindingTypes = new Set<string>()\n\tfor (const customBinding of customBindings) {\n\t\tif (addedCustomBindingTypes.has(customBinding.type)) {\n\t\t\tthrow new Error(`Binding type \"${customBinding.type}\" is defined more than once`)\n\t\t}\n\t\tbindings.push(customBinding)\n\t\taddedCustomBindingTypes.add(customBinding.type)\n\t}\n\n\treturn bindings\n}\n"],"names":[],"mappings":";;;;AAKO,SAAS,cAAc,cAAA,EAAwD;IACrF,MAAM,WAAW,CAAC,CAAA;IAElB,MAAM,0BAA0B,aAAA,GAAA,IAAI,IAAY;IAChD,KAAA,MAAW,iBAAiB,eAAgB;QAC3C,IAAI,wBAAwB,GAAA,CAAI,cAAc,IAAI,GAAG;YACpD,MAAM,IAAI,MAAM,CAAA,cAAA,EAAiB,cAAc,IAAI,CAAA,2BAAA,CAA6B;QACjF;QACA,SAAS,IAAA,CAAK,aAAa;QAC3B,wBAAwB,GAAA,CAAI,cAAc,IAAI;IAC/C;IAEA,OAAO;AACR"}},
    {"offset": {"line": 953, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/config/defaultShapes.ts"],"sourcesContent":["import { TLShapeUtilConstructor } from '../editor/shapes/ShapeUtil'\nimport { GroupShapeUtil } from '../editor/shapes/group/GroupShapeUtil'\n\n/** @public */\nexport type TLAnyShapeUtilConstructor = TLShapeUtilConstructor<any>\n\n/** @public */\nexport const coreShapes = [\n\t// created by grouping interactions, probably the corest core shape that we have\n\tGroupShapeUtil,\n] as const\n\nconst coreShapeTypes = new Set<string>(coreShapes.map((s) => s.type))\n\nexport function checkShapesAndAddCore(customShapes: readonly TLAnyShapeUtilConstructor[]) {\n\tconst shapes = [...coreShapes] as TLAnyShapeUtilConstructor[]\n\n\tconst addedCustomShapeTypes = new Set<string>()\n\tfor (const customShape of customShapes) {\n\t\tif (coreShapeTypes.has(customShape.type)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Shape type \"${customShape.type}\" is a core shapes type and cannot be overridden`\n\t\t\t)\n\t\t}\n\t\tif (addedCustomShapeTypes.has(customShape.type)) {\n\t\t\tthrow new Error(`Shape type \"${customShape.type}\" is defined more than once`)\n\t\t}\n\t\tshapes.push(customShape)\n\t\taddedCustomShapeTypes.add(customShape.type)\n\t}\n\n\treturn shapes\n}\n"],"names":[],"mappings":";;;;;;AACA,SAAS,sBAAsB;;AAMxB,MAAM,aAAa;IAAA,gFAAA;IAEzB,+QAAA;CACD;AAEA,MAAM,iBAAiB,IAAI,IAAY,WAAW,GAAA,CAAI,CAAC,IAAM,EAAE,IAAI,CAAC;AAE7D,SAAS,sBAAsB,YAAA,EAAoD;IACzF,MAAM,SAAS,CAAC;WAAG,UAAU;KAAA;IAE7B,MAAM,wBAAwB,aAAA,GAAA,IAAI,IAAY;IAC9C,KAAA,MAAW,eAAe,aAAc;QACvC,IAAI,eAAe,GAAA,CAAI,YAAY,IAAI,GAAG;YACzC,MAAM,IAAI,MACT,CAAA,YAAA,EAAe,YAAY,IAAI,CAAA,gDAAA,CAAA;QAEjC;QACA,IAAI,sBAAsB,GAAA,CAAI,YAAY,IAAI,GAAG;YAChD,MAAM,IAAI,MAAM,CAAA,YAAA,EAAe,YAAY,IAAI,CAAA,2BAAA,CAA6B;QAC7E;QACA,OAAO,IAAA,CAAK,WAAW;QACvB,sBAAsB,GAAA,CAAI,YAAY,IAAI;IAC3C;IAEA,OAAO;AACR"}},
    {"offset": {"line": 989, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/config/createTLStore.ts"],"sourcesContent":["import { Signal } from '@tldraw/state'\nimport { HistoryEntry, MigrationSequence, SerializedStore, Store, StoreSchema } from '@tldraw/store'\nimport {\n\tSchemaPropsInfo,\n\tTLAssetStore,\n\tTLRecord,\n\tTLStore,\n\tTLStoreProps,\n\tTLStoreSnapshot,\n\tcreateTLSchema,\n} from '@tldraw/tlschema'\nimport { FileHelpers, assert } from '@tldraw/utils'\nimport { Editor } from '../editor/Editor'\nimport { TLEditorSnapshot, loadSnapshot } from './TLEditorSnapshot'\nimport { TLAnyBindingUtilConstructor, checkBindings } from './defaultBindings'\nimport { TLAnyShapeUtilConstructor, checkShapesAndAddCore } from './defaultShapes'\n\n/** @public */\nexport interface TLStoreBaseOptions {\n\t/** The initial data for the store. */\n\tinitialData?: SerializedStore<TLRecord>\n\n\t/** A snapshot of initial data to migrate and load into the store. */\n\tsnapshot?: Partial<TLEditorSnapshot> | TLStoreSnapshot\n\n\t/** The default name for the store. */\n\tdefaultName?: string\n\n\t/** How should this store upload & resolve assets? */\n\tassets?: TLAssetStore\n\n\t/** Called when the store is connected to an {@link @tldraw/editor#Editor}. */\n\tonMount?(editor: Editor): void | (() => void)\n}\n\n/** @public */\nexport type TLStoreSchemaOptions =\n\t| {\n\t\t\tschema?: StoreSchema<TLRecord, TLStoreProps>\n\t  }\n\t| {\n\t\t\tshapeUtils?: readonly TLAnyShapeUtilConstructor[]\n\t\t\tmigrations?: readonly MigrationSequence[]\n\t\t\tbindingUtils?: readonly TLAnyBindingUtilConstructor[]\n\t  }\n\n/** @public */\nexport type TLStoreOptions = TLStoreBaseOptions & {\n\tid?: string\n\t/** Collaboration options for the store. */\n\tcollaboration?: {\n\t\tstatus: Signal<'online' | 'offline'> | null\n\t\tmode?: Signal<'readonly' | 'readwrite'> | null\n\t}\n} & TLStoreSchemaOptions\n\n/** @public */\nexport type TLStoreEventInfo = HistoryEntry<TLRecord>\n\nconst defaultAssetResolve: NonNullable<TLAssetStore['resolve']> = (asset) => asset.props.src\n\n/** @public */\nexport const inlineBase64AssetStore: TLAssetStore = {\n\tupload: async (_, file) => {\n\t\treturn { src: await FileHelpers.blobToDataUrl(file) }\n\t},\n}\n\n/**\n * A helper for creating a TLStore schema from either an object with shapeUtils, bindingUtils, and\n * migrations, or a schema.\n *\n * @param opts - Options for creating the schema.\n *\n * @public\n */\nexport function createTLSchemaFromUtils(\n\topts: TLStoreSchemaOptions\n): StoreSchema<TLRecord, TLStoreProps> {\n\tif ('schema' in opts && opts.schema) return opts.schema\n\n\treturn createTLSchema({\n\t\tshapes:\n\t\t\t'shapeUtils' in opts && opts.shapeUtils\n\t\t\t\t? utilsToMap(checkShapesAndAddCore(opts.shapeUtils))\n\t\t\t\t: undefined,\n\t\tbindings:\n\t\t\t'bindingUtils' in opts && opts.bindingUtils\n\t\t\t\t? utilsToMap(checkBindings(opts.bindingUtils))\n\t\t\t\t: undefined,\n\t\tmigrations: 'migrations' in opts ? opts.migrations : undefined,\n\t})\n}\n\n/**\n * A helper for creating a TLStore.\n *\n * @param opts - Options for creating the store.\n *\n * @public\n */\nexport function createTLStore({\n\tinitialData,\n\tdefaultName = '',\n\tid,\n\tassets = inlineBase64AssetStore,\n\tonMount,\n\tcollaboration,\n\t...rest\n}: TLStoreOptions = {}): TLStore {\n\tconst schema = createTLSchemaFromUtils(rest)\n\n\tconst store = new Store({\n\t\tid,\n\t\tschema,\n\t\tinitialData,\n\t\tprops: {\n\t\t\tdefaultName,\n\t\t\tassets: {\n\t\t\t\tupload: assets.upload,\n\t\t\t\tresolve: assets.resolve ?? defaultAssetResolve,\n\t\t\t\tremove: assets.remove ?? (() => Promise.resolve()),\n\t\t\t},\n\t\t\tonMount: (editor) => {\n\t\t\t\tassert(editor instanceof Editor)\n\t\t\t\tonMount?.(editor)\n\t\t\t},\n\t\t\tcollaboration,\n\t\t},\n\t})\n\n\tif (rest.snapshot) {\n\t\tif (initialData) throw new Error('Cannot provide both initialData and snapshot')\n\t\tloadSnapshot(store, rest.snapshot, { forceOverwriteSessionState: true })\n\t}\n\n\treturn store\n}\n\nfunction utilsToMap<T extends SchemaPropsInfo & { type: string }>(utils: T[]) {\n\treturn Object.fromEntries(\n\t\tutils.map((s): [string, SchemaPropsInfo] => [\n\t\t\ts.type,\n\t\t\t{\n\t\t\t\tprops: s.props,\n\t\t\t\tmigrations: s.migrations,\n\t\t\t},\n\t\t])\n\t)\n}\n"],"names":[],"mappings":";;;;;;;;;AACA,SAA2D,aAA0B;;AACrF;;;AASA,SAAS,aAAa,cAAc;AACpC,SAAS,cAAc;AACvB,SAA2B,oBAAoB;AAC/C,SAAsC,qBAAqB;AAC3D,SAAoC,6BAA6B;;;;;;;;AA4CjE,MAAM,sBAA4D,CAAC,QAAU,MAAM,KAAA,CAAM,GAAA;AAGlF,MAAM,yBAAuC;IACnD,QAAQ,OAAO,GAAG,SAAS;QAC1B,OAAO;YAAE,KAAK,MAAM,oOAAA,CAAY,aAAA,CAAc,IAAI;QAAE;IACrD;AACD;AAUO,SAAS,wBACf,IAAA,EACsC;IACtC,IAAI,YAAY,QAAQ,KAAK,MAAA,CAAQ,CAAA,OAAO,KAAK,MAAA;IAEjD,WAAO,6OAAA,EAAe;QACrB,QACC,gBAAgB,QAAQ,KAAK,UAAA,GAC1B,eAAW,kQAAA,EAAsB,KAAK,UAAU,CAAC,IACjD,KAAA;QACJ,UACC,kBAAkB,QAAQ,KAAK,YAAA,GAC5B,eAAW,4PAAA,EAAc,KAAK,YAAY,CAAC,IAC3C,KAAA;QACJ,YAAY,gBAAgB,OAAO,KAAK,UAAA,GAAa,KAAA;IACtD,CAAC;AACF;AASO,SAAS,cAAc,EAC7B,WAAA,EACA,cAAc,EAAA,EACd,EAAA,EACA,SAAS,sBAAA,EACT,OAAA,EACA,aAAA,EACA,GAAG,MACJ,GAAoB,CAAC,CAAA,EAAY;IAChC,MAAM,SAAS,wBAAwB,IAAI;IAE3C,MAAM,QAAQ,IAAI,+NAAA,CAAM;QACvB;QACA;QACA;QACA,OAAO;YACN;YACA,QAAQ;gBACP,QAAQ,OAAO,MAAA;gBACf,SAAS,OAAO,OAAA,IAAW;gBAC3B,QAAQ,OAAO,MAAA,IAAA,CAAW,IAAM,QAAQ,OAAA,CAAQ,CAAA;YACjD;YACA,SAAS,CAAC,WAAW;gBACpB,IAAA,kOAAA,EAAO,kBAAkB,4OAAM;gBAC/B,UAAU,MAAM;YACjB;YACA;QACD;IACD,CAAC;IAED,IAAI,KAAK,QAAA,EAAU;QAClB,IAAI,YAAa,CAAA,MAAM,IAAI,MAAM,8CAA8C;QAC/E,IAAA,4PAAA,EAAa,OAAO,KAAK,QAAA,EAAU;YAAE,4BAA4B;QAAK,CAAC;IACxE;IAEA,OAAO;AACR;AAEA,SAAS,WAAyD,KAAA,EAAY;IAC7E,OAAO,OAAO,WAAA,CACb,MAAM,GAAA,CAAI,CAAC,IAAiC;YAC3C,EAAE,IAAA;YACF;gBACC,OAAO,EAAE,KAAA;gBACT,YAAY,EAAE,UAAA;YACf;SACA;AAEH"}},
    {"offset": {"line": 1074, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/exports/fetchCache.ts"],"sourcesContent":["import { FileHelpers, assert, fetch } from '@tldraw/utils'\n\n// TODO(alex): currently, this cache will grow unbounded. we should come up with a better strategy\n// for clearing items from the cache over time.\nexport function fetchCache<T>(cb: (response: Response) => Promise<T>, init?: RequestInit) {\n\tconst cache = new Map<string, Promise<T | null>>()\n\n\treturn async function fetchCached(url: string): Promise<T | null> {\n\t\tconst existing = cache.get(url)\n\t\tif (existing) return existing\n\n\t\tconst promise = (async () => {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(url, init)\n\t\t\t\tassert(response.ok)\n\t\t\t\treturn await cb(response)\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err)\n\t\t\t\treturn null\n\t\t\t}\n\t\t})()\n\t\tcache.set(url, promise)\n\t\treturn promise\n\t}\n}\n\nexport const resourceToDataUrl = fetchCache(async (response) => {\n\treturn await FileHelpers.blobToDataUrl(await response.blob())\n})\n"],"names":[],"mappings":";;;;;;;;;AAAA,SAAS,aAAa,QAAQ,aAAa;;AAIpC,SAAS,WAAc,EAAA,EAAwC,IAAA,EAAoB;IACzF,MAAM,QAAQ,aAAA,GAAA,IAAI,IAA+B;IAEjD,OAAO,eAAe,YAAY,GAAA,EAAgC;QACjE,MAAM,WAAW,MAAM,GAAA,CAAI,GAAG;QAC9B,IAAI,SAAU,CAAA,OAAO;QAErB,MAAM,UAAA,CAAW,YAAY;YAC5B,IAAI;gBACH,MAAM,WAAW,UAAM,iOAAA,EAAM,KAAK,IAAI;gBACtC,IAAA,kOAAA,EAAO,SAAS,EAAE;gBAClB,OAAO,MAAM,GAAG,QAAQ;YACzB,EAAA,OAAS,KAAK;gBACb,QAAQ,KAAA,CAAM,GAAG;gBACjB,OAAO;YACR;QACD,CAAA,EAAG;QACH,MAAM,GAAA,CAAI,KAAK,OAAO;QACtB,OAAO;IACR;AACD;AAEO,MAAM,oBAAoB,WAAW,OAAO,aAAa;IAC/D,OAAO,MAAM,oOAAA,CAAY,aAAA,CAAc,MAAM,SAAS,IAAA,CAAK,CAAC;AAC7D,CAAC"}},
    {"offset": {"line": 1113, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/exports/parseCss.ts"],"sourcesContent":["import { safeParseUrl } from '@tldraw/utils'\n\nexport interface ParsedFontFace {\n\tfontFace: string\n\turls: { original: string; resolved: string | null; embedded?: Promise<string | null> }[]\n\tfontFamilies: Set<string>\n}\n\n// parsing CSS with regular expressions doesn't really work. There are almost certainly edge cases\n// in the regular expressions we're using here. They're based formal grammars of CSS, but aren't\n// perfect. These were written with https://regexper.com/ - give it a go if you're editing these.\n\n// The regexes themselves would be nicer to work with if we were using named capturing groups\n// (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Regular_expressions/Named_capturing_group).\n// We use a lot of disjunctions (the `|`) to cover different syntaxes though, and at the time of\n// writing, browser support for using named capturing groups across disjunctions is rough.\n\n// Parse @import declarations:\n// https://developer.mozilla.org/en-US/docs/Web/CSS/@import#formal_syntax\nconst importsRegex =\n\t/@import\\s+(?:\"([^\"]+)\"|'([^']+)'|url\\s*\\(\\s*(?:\"([^\"]+)\"|'([^']+)'|([^'\")]+))\\s*\\))([^;]+);/gi\n\n// Locate @font-face declarations:\nconst fontFaceRegex = /@font-face\\s*{([^}]+)}/gi\n\n// Parse url() calls within a CSS value:\n// https://developer.mozilla.org/en-US/docs/Web/CSS/url#syntax\nconst urlsRegex = /url\\s*\\(\\s*(?:\"([^\"]+)\"|'([^']+)'|([^'\")]+))\\s*\\)/gi\n\n// Locate and parse the value of `font-family` within a @font-face declaration:\n// https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-family#formal_syntax\nconst fontFamilyRegex =\n\t/(?:^|;)\\s*font-family\\s*:\\s*(?:([^'\"][^;\\n]+)|\"([^\"]+)\"|'([^']+)')\\s*(?:;|$)/gi\n\nexport function parseCssImports(css: string) {\n\treturn Array.from(css.matchAll(importsRegex), (m) => ({\n\t\turl: m[1] || m[2] || m[3] || m[4] || m[5],\n\t\textras: m[6],\n\t}))\n}\n\nexport function parseCssFontFaces(css: string, baseUrl: string) {\n\treturn Array.from(css.matchAll(fontFaceRegex), (m): ParsedFontFace => {\n\t\tconst fontFace = m[1]\n\t\tconst urls = Array.from(fontFace.matchAll(urlsRegex), (m) => {\n\t\t\tconst original = m[1] || m[2] || m[3]\n\t\t\treturn {\n\t\t\t\toriginal,\n\t\t\t\tresolved: safeParseUrl(original, baseUrl)?.href ?? null,\n\t\t\t}\n\t\t})\n\t\tconst fontFamilies = new Set(\n\t\t\tArray.from(fontFace.matchAll(fontFamilyRegex), (m) => (m[1] || m[2] || m[3]).toLowerCase())\n\t\t)\n\n\t\treturn { fontFace, urls, fontFamilies }\n\t})\n}\n\nexport function parseCssFontFamilyValue(value: string) {\n\t// https://developer.mozilla.org/en-US/docs/Web/CSS/font-family#formal_syntax\n\t// we use two regexes here to parse each value in a comma separated list of font families\n\tconst valueRegex = /\\s*(?:([^'\"][^;\\n\\s,]+)|\"([^\"]+)\"|'([^']+)')\\s*/gi\n\tconst separatorRegex = /\\s*,\\s*/gi\n\n\tconst fontFamilies = new Set<string>()\n\n\twhile (true) {\n\t\tconst valueMatch = valueRegex.exec(value)\n\t\tif (!valueMatch) {\n\t\t\tbreak\n\t\t}\n\n\t\tconst fontFamily = valueMatch[1] || valueMatch[2] || valueMatch[3]\n\t\tfontFamilies.add(fontFamily.toLowerCase())\n\n\t\tseparatorRegex.lastIndex = valueRegex.lastIndex\n\t\tconst separatorMatch = separatorRegex.exec(value)\n\t\tif (!separatorMatch) {\n\t\t\tbreak\n\t\t}\n\n\t\tvalueRegex.lastIndex = separatorRegex.lastIndex\n\t}\n\n\treturn fontFamilies\n}\n\nexport function shouldIncludeCssProperty(property: string) {\n\tif (property.startsWith('-')) return false\n\tif (property.startsWith('animation')) return false\n\tif (property.startsWith('transition')) return false\n\tif (property === 'cursor') return false\n\tif (property === 'pointer-events') return false\n\tif (property === 'user-select') return false\n\tif (property === 'touch-action') return false\n\treturn true\n}\n\nexport function parseCss(css: string, baseUrl: string) {\n\treturn {\n\t\timports: parseCssImports(css),\n\t\tfontFaces: parseCssFontFaces(css, baseUrl),\n\t}\n}\n\nexport function parseCssValueUrls(value: string) {\n\treturn Array.from(value.matchAll(urlsRegex), (m) => ({\n\t\toriginal: m[0],\n\t\turl: m[1] || m[2] || m[3],\n\t})).filter((m) => !m.url.startsWith('#'))\n}\n"],"names":["m"],"mappings":";;;;;;;;;;;;;;;AAAA,SAAS,oBAAoB;;AAmB7B,MAAM,eACL;AAGD,MAAM,gBAAgB;AAItB,MAAM,YAAY;AAIlB,MAAM,kBACL;AAEM,SAAS,gBAAgB,GAAA,EAAa;IAC5C,OAAO,MAAM,IAAA,CAAK,IAAI,QAAA,CAAS,YAAY,GAAG,CAAC,IAAA,CAAO;YACrD,KAAK,CAAA,CAAE,CAAC,CAAA,IAAK,CAAA,CAAE,CAAC,CAAA,IAAK,CAAA,CAAE,CAAC,CAAA,IAAK,CAAA,CAAE,CAAC,CAAA,IAAK,CAAA,CAAE,CAAC,CAAA;YACxC,QAAQ,CAAA,CAAE,CAAC,CAAA;QACZ,CAAA,CAAE;AACH;AAEO,SAAS,kBAAkB,GAAA,EAAa,OAAA,EAAiB;IAC/D,OAAO,MAAM,IAAA,CAAK,IAAI,QAAA,CAAS,aAAa,GAAG,CAAC,MAAsB;QACrE,MAAM,WAAW,CAAA,CAAE,CAAC,CAAA;QACpB,MAAM,OAAO,MAAM,IAAA,CAAK,SAAS,QAAA,CAAS,SAAS,GAAG,CAACA,OAAM;YAC5D,MAAM,WAAWA,EAAAA,CAAE,CAAC,CAAA,IAAKA,EAAAA,CAAE,CAAC,CAAA,IAAKA,EAAAA,CAAE,CAAC,CAAA;YACpC,OAAO;gBACN;gBACA,cAAU,oOAAA,EAAa,UAAU,OAAO,GAAG,QAAQ;YACpD;QACD,CAAC;QACD,MAAM,eAAe,IAAI,IACxB,MAAM,IAAA,CAAK,SAAS,QAAA,CAAS,eAAe,GAAG,CAACA,KAAAA,CAAOA,EAAAA,CAAE,CAAC,CAAA,IAAKA,EAAAA,CAAE,CAAC,CAAA,IAAKA,EAAAA,CAAE,CAAC,CAAA,EAAG,WAAA,CAAY,CAAC;QAG3F,OAAO;YAAE;YAAU;YAAM;QAAa;IACvC,CAAC;AACF;AAEO,SAAS,wBAAwB,KAAA,EAAe;IAGtD,MAAM,aAAa;IACnB,MAAM,iBAAiB;IAEvB,MAAM,eAAe,aAAA,GAAA,IAAI,IAAY;IAErC,MAAO,KAAM;QACZ,MAAM,aAAa,WAAW,IAAA,CAAK,KAAK;QACxC,IAAI,CAAC,YAAY;YAChB;QACD;QAEA,MAAM,aAAa,UAAA,CAAW,CAAC,CAAA,IAAK,UAAA,CAAW,CAAC,CAAA,IAAK,UAAA,CAAW,CAAC,CAAA;QACjE,aAAa,GAAA,CAAI,WAAW,WAAA,CAAY,CAAC;QAEzC,eAAe,SAAA,GAAY,WAAW,SAAA;QACtC,MAAM,iBAAiB,eAAe,IAAA,CAAK,KAAK;QAChD,IAAI,CAAC,gBAAgB;YACpB;QACD;QAEA,WAAW,SAAA,GAAY,eAAe,SAAA;IACvC;IAEA,OAAO;AACR;AAEO,SAAS,yBAAyB,QAAA,EAAkB;IAC1D,IAAI,SAAS,UAAA,CAAW,GAAG,EAAG,CAAA,OAAO;IACrC,IAAI,SAAS,UAAA,CAAW,WAAW,EAAG,CAAA,OAAO;IAC7C,IAAI,SAAS,UAAA,CAAW,YAAY,EAAG,CAAA,OAAO;IAC9C,IAAI,aAAa,SAAU,CAAA,OAAO;IAClC,IAAI,aAAa,iBAAkB,CAAA,OAAO;IAC1C,IAAI,aAAa,cAAe,CAAA,OAAO;IACvC,IAAI,aAAa,eAAgB,CAAA,OAAO;IACxC,OAAO;AACR;AAEO,SAAS,SAAS,GAAA,EAAa,OAAA,EAAiB;IACtD,OAAO;QACN,SAAS,gBAAgB,GAAG;QAC5B,WAAW,kBAAkB,KAAK,OAAO;IAC1C;AACD;AAEO,SAAS,kBAAkB,KAAA,EAAe;IAChD,OAAO,MAAM,IAAA,CAAK,MAAM,QAAA,CAAS,SAAS,GAAG,CAAC,IAAA,CAAO;YACpD,UAAU,CAAA,CAAE,CAAC,CAAA;YACb,KAAK,CAAA,CAAE,CAAC,CAAA,IAAK,CAAA,CAAE,CAAC,CAAA,IAAK,CAAA,CAAE,CAAC,CAAA;QACzB,CAAA,CAAE,EAAE,MAAA,CAAO,CAAC,IAAM,CAAC,EAAE,GAAA,CAAI,UAAA,CAAW,GAAG,CAAC;AACzC"}},
    {"offset": {"line": 1206, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/exports/FontEmbedder.ts"],"sourcesContent":["import { assert, bind, compact } from '@tldraw/utils'\nimport { fetchCache, resourceToDataUrl } from './fetchCache'\nimport { ParsedFontFace, parseCss, parseCssFontFaces, parseCssFontFamilyValue } from './parseCss'\n\nexport const SVG_EXPORT_CLASSNAME = 'tldraw-svg-export'\n\n/**\n * Because SVGs cannot refer to external CSS/font resources, any web fonts used in the SVG must be\n * embedded as data URLs in inlined @font-face declarations. This class is responsible for\n * collecting used font faces and creating a CSS string with embedded fonts that can be used in the\n * SVG.\n *\n * It works in three steps:\n * 1. `startFindingCurrentDocumentFontFaces` - this traverses the current document, finding all the\n *    stylesheets in use (including those imported via `@import` rules etc) and extracting the\n *    @font-face declarations from them.\n * 2. `onFontFamilyValue` - as `StyleEmbedder` traverses the SVG, it will call this method with the\n *    value of the `font-family` property for each element. We parse out the font names in use, and\n *    mark them as needing to be embedded.\n * 3. `createCss` - once all the font families have been collected, this method will return a CSS\n *    string with embedded fonts.\n */\nexport class FontEmbedder {\n\tprivate fontFacesPromise: Promise<ParsedFontFace[]> | null = null\n\tprivate readonly foundFontNames = new Set<string>()\n\tprivate readonly fontFacesToEmbed = new Set<ParsedFontFace>()\n\tprivate readonly pendingPromises: Promise<void>[] = []\n\n\tstartFindingCurrentDocumentFontFaces() {\n\t\tassert(!this.fontFacesPromise, 'FontEmbedder already started')\n\t\tthis.fontFacesPromise = getCurrentDocumentFontFaces()\n\t}\n\n\t@bind onFontFamilyValue(fontFamilyValue: string) {\n\t\tassert(this.fontFacesPromise, 'FontEmbedder not started')\n\n\t\tconst fonts = parseCssFontFamilyValue(fontFamilyValue)\n\t\tfor (const font of fonts) {\n\t\t\tif (this.foundFontNames.has(font)) return\n\t\t\tthis.foundFontNames.add(font)\n\n\t\t\tthis.pendingPromises.push(\n\t\t\t\tthis.fontFacesPromise.then((fontFaces) => {\n\t\t\t\t\tconst relevantFontFaces = fontFaces.filter((fontFace) => fontFace.fontFamilies.has(font))\n\t\t\t\t\tfor (const fontFace of relevantFontFaces) {\n\t\t\t\t\t\tif (this.fontFacesToEmbed.has(fontFace)) continue\n\n\t\t\t\t\t\tthis.fontFacesToEmbed.add(fontFace)\n\t\t\t\t\t\tfor (const url of fontFace.urls) {\n\t\t\t\t\t\t\tif (!url.resolved || url.embedded) continue\n\t\t\t\t\t\t\t// kick off fetching this font\n\t\t\t\t\t\t\turl.embedded = resourceToDataUrl(url.resolved)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t)\n\t\t}\n\t}\n\n\tasync createCss() {\n\t\tawait Promise.all(this.pendingPromises)\n\n\t\tlet css = ''\n\n\t\tfor (const fontFace of this.fontFacesToEmbed) {\n\t\t\tlet fontFaceString = `@font-face {${fontFace.fontFace}}`\n\n\t\t\tfor (const url of fontFace.urls) {\n\t\t\t\tif (!url.embedded) continue\n\t\t\t\tconst dataUrl = await url.embedded\n\t\t\t\tif (!dataUrl) continue\n\n\t\t\t\tfontFaceString = fontFaceString.replace(url.original, dataUrl)\n\t\t\t}\n\n\t\t\tcss += fontFaceString\n\t\t}\n\n\t\treturn css\n\t}\n}\n\nasync function getCurrentDocumentFontFaces() {\n\tconst fontFaces: (ParsedFontFace[] | Promise<ParsedFontFace[] | null>)[] = []\n\n\t// In exportToSvg we add the exported node to the DOM temporarily.\n\t// Because of this, and because we do a setTimeout to delay removing that node from the\n\t// DOM, when looking at document.styleSheets the number of nodes and stylesheets\n\t// can grow unbounded (especially when using \"Debug svg\" and moving shapes around).\n\t// To avoid this, we filter out the stylesheets that are part of the SVG export.\n\tconst styleSheetsWithoutSvgExports = Array.from(document.styleSheets).filter(\n\t\t(styleSheet) =>\n\t\t\t!(styleSheet.ownerNode as HTMLElement | null)?.closest(`.${SVG_EXPORT_CLASSNAME}`)\n\t)\n\n\tfor (const styleSheet of styleSheetsWithoutSvgExports) {\n\t\tlet cssRules\n\t\ttry {\n\t\t\tcssRules = styleSheet.cssRules\n\t\t} catch {\n\t\t\t// some stylesheets don't allow access through the DOM. We'll try to fetch them instead.\n\t\t}\n\n\t\tif (cssRules) {\n\t\t\tfor (const rule of styleSheet.cssRules) {\n\t\t\t\tif (rule instanceof CSSFontFaceRule) {\n\t\t\t\t\tfontFaces.push(parseCssFontFaces(rule.cssText, styleSheet.href ?? document.baseURI))\n\t\t\t\t} else if (rule instanceof CSSImportRule) {\n\t\t\t\t\tconst absoluteUrl = new URL(rule.href, rule.parentStyleSheet?.href ?? document.baseURI)\n\t\t\t\t\tfontFaces.push(fetchCssFontFaces(absoluteUrl.href))\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (styleSheet.href) {\n\t\t\tfontFaces.push(fetchCssFontFaces(styleSheet.href))\n\t\t}\n\t}\n\n\treturn compact(await Promise.all(fontFaces)).flat()\n}\n\nconst fetchCssFontFaces = fetchCache(async (response: Response): Promise<ParsedFontFace[]> => {\n\tconst parsed = parseCss(await response.text(), response.url)\n\n\tconst importedFontFaces = await Promise.all(\n\t\tparsed.imports.map(({ url }) => fetchCssFontFaces(new URL(url, response.url).href))\n\t)\n\n\treturn [...parsed.fontFaces, ...compact(importedFontFaces).flat()]\n})\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1397, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/exports/cssRules.ts"],"sourcesContent":["export type Styles = { [K in string]?: string }\nexport type ReadonlyStyles = { readonly [K in string]?: string }\n\ntype CanSkipRule = (\n\tvalue: string,\n\tproperty: string,\n\toptions: {\n\t\tgetStyle(property: string): string\n\t\tparentStyles: ReadonlyStyles\n\t\tdefaultStyles: ReadonlyStyles\n\t\tcurrentColor: string\n\t}\n) => boolean\n\nconst isCoveredByCurrentColor: CanSkipRule = (value, property, { currentColor }) => {\n\treturn value === 'currentColor' || value === currentColor\n}\n\nconst isInherited: CanSkipRule = (value, property, { parentStyles }) => {\n\treturn parentStyles[property] === value\n}\n\n// see comment below about why we exclude border styles\nconst isExcludedBorder =\n\t(borderDirection: string): CanSkipRule =>\n\t(value, property, { getStyle }) => {\n\t\tconst borderWidth = getStyle(`border-${borderDirection}-width`)\n\t\tconst borderStyle = getStyle(`border-${borderDirection}-style`)\n\n\t\tif (borderWidth === '0px') return true\n\t\tif (borderStyle === 'none') return true\n\t\treturn false\n\t}\n\nexport const cssRules = {\n\t// currentColor properties:\n\t'border-block-end-color': isCoveredByCurrentColor,\n\t'border-block-start-color': isCoveredByCurrentColor,\n\t'border-bottom-color': isCoveredByCurrentColor,\n\t'border-inline-end-color': isCoveredByCurrentColor,\n\t'border-inline-start-color': isCoveredByCurrentColor,\n\t'border-left-color': isCoveredByCurrentColor,\n\t'border-right-color': isCoveredByCurrentColor,\n\t'border-top-color': isCoveredByCurrentColor,\n\t'caret-color': isCoveredByCurrentColor,\n\t'column-rule-color': isCoveredByCurrentColor,\n\t'outline-color': isCoveredByCurrentColor,\n\t'text-decoration': (value, property, { currentColor }) => {\n\t\treturn value === 'none solid currentColor' || value === 'none solid ' + currentColor\n\t},\n\t'text-decoration-color': isCoveredByCurrentColor,\n\t'text-emphasis-color': isCoveredByCurrentColor,\n\n\t// inherited properties:\n\t'border-collapse': isInherited,\n\t'border-spacing': isInherited,\n\t'caption-side': isInherited,\n\t// N.B. We shouldn't inherit 'color' because there's some UA styling, e.g. `mark` elements\n\t// 'color': isInherited,\n\tcursor: isInherited,\n\tdirection: isInherited,\n\t'empty-cells': isInherited,\n\t'font-family': isInherited,\n\t'font-size': isInherited,\n\t'font-style': isInherited,\n\t'font-variant': isInherited,\n\t'font-weight': isInherited,\n\t'font-size-adjust': isInherited,\n\t'font-stretch': isInherited,\n\tfont: isInherited,\n\t'letter-spacing': isInherited,\n\t'line-height': isInherited,\n\t'list-style-image': isInherited,\n\t'list-style-position': isInherited,\n\t'list-style-type': isInherited,\n\t'list-style': isInherited,\n\torphans: isInherited,\n\t'overflow-wrap': isInherited,\n\tquotes: isInherited,\n\t'stroke-linecap': isInherited,\n\t'stroke-linejoin': isInherited,\n\t'tab-size': isInherited,\n\t'text-align': isInherited,\n\t'text-align-last': isInherited,\n\t'text-indent': isInherited,\n\t'text-justify': isInherited,\n\t'text-shadow': isInherited,\n\t'text-transform': isInherited,\n\tvisibility: isInherited,\n\t'white-space': isInherited,\n\t'white-space-collapse': isInherited,\n\twidows: isInherited,\n\t'word-break': isInherited,\n\t'word-spacing': isInherited,\n\t'word-wrap': isInherited,\n\n\t// special border cases - we have a weird case (tailwind seems to trigger this) where all\n\t// border-styles sometimes get set to 'solid', but the border-width is 0 so they don't render.\n\t// but in SVGs, **sometimes**, the border-width defaults (i think from a UA style-sheet? but\n\t// honestly can't tell) to 1.5px so the border displays. we work around this by only including\n\t// border styles at all if both the border-width and border-style are set to something that\n\t// would show a border.\n\t'border-top': isExcludedBorder('top'),\n\t'border-right': isExcludedBorder('right'),\n\t'border-bottom': isExcludedBorder('bottom'),\n\t'border-left': isExcludedBorder('left'),\n\t'border-block-end': isExcludedBorder('block-end'),\n\t'border-block-start': isExcludedBorder('block-start'),\n\t'border-inline-end': isExcludedBorder('inline-end'),\n\t'border-inline-start': isExcludedBorder('inline-start'),\n\t'border-top-style': isExcludedBorder('top'),\n\t'border-right-style': isExcludedBorder('right'),\n\t'border-bottom-style': isExcludedBorder('bottom'),\n\t'border-left-style': isExcludedBorder('left'),\n\t'border-block-end-style': isExcludedBorder('block-end'),\n\t'border-block-start-style': isExcludedBorder('block-start'),\n\t'border-inline-end-style': isExcludedBorder('inline-end'),\n\t'border-inline-start-style': isExcludedBorder('inline-start'),\n\t'border-top-width': isExcludedBorder('top'),\n\t'border-right-width': isExcludedBorder('right'),\n\t'border-bottom-width': isExcludedBorder('bottom'),\n\t'border-left-width': isExcludedBorder('left'),\n\t'border-block-end-width': isExcludedBorder('block-end'),\n\t'border-block-start-width': isExcludedBorder('block-start'),\n\t'border-inline-end-width': isExcludedBorder('inline-end'),\n} satisfies Record<string, CanSkipRule>\n"],"names":[],"mappings":";;;;AAcA,MAAM,0BAAuC,CAAC,OAAO,UAAU,EAAE,YAAA,CAAa,CAAA,KAAM;IACnF,OAAO,UAAU,kBAAkB,UAAU;AAC9C;AAEA,MAAM,cAA2B,CAAC,OAAO,UAAU,EAAE,YAAA,CAAa,CAAA,KAAM;IACvE,OAAO,YAAA,CAAa,QAAQ,CAAA,KAAM;AACnC;AAGA,MAAM,mBACL,CAAC,kBACD,CAAC,OAAO,UAAU,EAAE,QAAA,CAAS,CAAA,KAAM;QAClC,MAAM,cAAc,SAAS,CAAA,OAAA,EAAU,eAAe,CAAA,MAAA,CAAQ;QAC9D,MAAM,cAAc,SAAS,CAAA,OAAA,EAAU,eAAe,CAAA,MAAA,CAAQ;QAE9D,IAAI,gBAAgB,MAAO,CAAA,OAAO;QAClC,IAAI,gBAAgB,OAAQ,CAAA,OAAO;QACnC,OAAO;IACR;AAEM,MAAM,WAAW;IAAA,2BAAA;IAEvB,0BAA0B;IAC1B,4BAA4B;IAC5B,uBAAuB;IACvB,2BAA2B;IAC3B,6BAA6B;IAC7B,qBAAqB;IACrB,sBAAsB;IACtB,oBAAoB;IACpB,eAAe;IACf,qBAAqB;IACrB,iBAAiB;IACjB,mBAAmB,CAAC,OAAO,UAAU,EAAE,YAAA,CAAa,CAAA,KAAM;QACzD,OAAO,UAAU,6BAA6B,UAAU,gBAAgB;IACzE;IACA,yBAAyB;IACzB,uBAAuB;IAAA,wBAAA;IAGvB,mBAAmB;IACnB,kBAAkB;IAClB,gBAAgB;IAAA,0FAAA;IAAA,wBAAA;IAGhB,QAAQ;IACR,WAAW;IACX,eAAe;IACf,eAAe;IACf,aAAa;IACb,cAAc;IACd,gBAAgB;IAChB,eAAe;IACf,oBAAoB;IACpB,gBAAgB;IAChB,MAAM;IACN,kBAAkB;IAClB,eAAe;IACf,oBAAoB;IACpB,uBAAuB;IACvB,mBAAmB;IACnB,cAAc;IACd,SAAS;IACT,iBAAiB;IACjB,QAAQ;IACR,kBAAkB;IAClB,mBAAmB;IACnB,YAAY;IACZ,cAAc;IACd,mBAAmB;IACnB,eAAe;IACf,gBAAgB;IAChB,eAAe;IACf,kBAAkB;IAClB,YAAY;IACZ,eAAe;IACf,wBAAwB;IACxB,QAAQ;IACR,cAAc;IACd,gBAAgB;IAChB,aAAa;IAAA,yFAAA;IAAA,8FAAA;IAAA,4FAAA;IAAA,8FAAA;IAAA,2FAAA;IAAA,uBAAA;IAQb,cAAc,iBAAiB,KAAK;IACpC,gBAAgB,iBAAiB,OAAO;IACxC,iBAAiB,iBAAiB,QAAQ;IAC1C,eAAe,iBAAiB,MAAM;IACtC,oBAAoB,iBAAiB,WAAW;IAChD,sBAAsB,iBAAiB,aAAa;IACpD,qBAAqB,iBAAiB,YAAY;IAClD,uBAAuB,iBAAiB,cAAc;IACtD,oBAAoB,iBAAiB,KAAK;IAC1C,sBAAsB,iBAAiB,OAAO;IAC9C,uBAAuB,iBAAiB,QAAQ;IAChD,qBAAqB,iBAAiB,MAAM;IAC5C,0BAA0B,iBAAiB,WAAW;IACtD,4BAA4B,iBAAiB,aAAa;IAC1D,2BAA2B,iBAAiB,YAAY;IACxD,6BAA6B,iBAAiB,cAAc;IAC5D,oBAAoB,iBAAiB,KAAK;IAC1C,sBAAsB,iBAAiB,OAAO;IAC9C,uBAAuB,iBAAiB,QAAQ;IAChD,qBAAqB,iBAAiB,MAAM;IAC5C,0BAA0B,iBAAiB,WAAW;IACtD,4BAA4B,iBAAiB,aAAa;IAC1D,2BAA2B,iBAAiB,YAAY;AACzD"}},
    {"offset": {"line": 1510, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/exports/domUtils.ts"],"sourcesContent":["export function getRenderedChildNodes(node: Element): Iterable<Node> {\n\tif (node.shadowRoot) {\n\t\t// if this is a custom element with a shadow root, then it's the shadow root's children that\n\t\t// are visible in the DOM. This is only accessible if they created the shadow root with\n\t\t// `mode: 'open'` though.\n\t\treturn node.shadowRoot.childNodes\n\t}\n\tif (isShadowSlotElement(node)) {\n\t\t// if this is a `<slot>` within a shadow root, we should render the nodes that are being\n\t\t// templated into the slot instead of the slot children itself.\n\t\tconst assignedNodes = node.assignedNodes()\n\t\tif (assignedNodes?.length) {\n\t\t\treturn assignedNodes\n\t\t}\n\t}\n\treturn node.childNodes\n}\n\nexport function* getRenderedChildren(node: Element) {\n\tfor (const child of getRenderedChildNodes(node)) {\n\t\tif (isElement(child)) yield child\n\t}\n}\n\nfunction getWindow(node: Node) {\n\treturn node.ownerDocument?.defaultView ?? globalThis\n}\n\nexport function isElement(node: Node): node is Element {\n\treturn node instanceof getWindow(node).Element\n}\n\nfunction isShadowRoot(node: Node): node is ShadowRoot {\n\treturn node instanceof getWindow(node).ShadowRoot\n}\n\nfunction isInShadowRoot(node: Node) {\n\treturn 'getRootNode' in node && isShadowRoot(node.getRootNode())\n}\n\nfunction isShadowSlotElement(node: Node): node is HTMLSlotElement {\n\treturn isInShadowRoot(node) && node instanceof getWindow(node).HTMLSlotElement\n}\n\nexport function elementStyle(element: Element) {\n\treturn (element as HTMLElement | SVGElement).style\n}\n\nexport function getComputedStyle(element: Element, pseudoElement?: string) {\n\treturn getWindow(element).getComputedStyle(element, pseudoElement)\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,SAAS,sBAAsB,IAAA,EAA+B;IACpE,IAAI,KAAK,UAAA,EAAY;QAIpB,OAAO,KAAK,UAAA,CAAW,UAAA;IACxB;IACA,IAAI,oBAAoB,IAAI,GAAG;QAG9B,MAAM,gBAAgB,KAAK,aAAA,CAAc;QACzC,IAAI,eAAe,QAAQ;YAC1B,OAAO;QACR;IACD;IACA,OAAO,KAAK,UAAA;AACb;AAEO,UAAU,oBAAoB,IAAA,EAAe;IACnD,KAAA,MAAW,SAAS,sBAAsB,IAAI,EAAG;QAChD,IAAI,UAAU,KAAK,EAAG,CAAA,MAAM;IAC7B;AACD;AAEA,SAAS,UAAU,IAAA,EAAY;IAC9B,OAAO,KAAK,aAAA,EAAe,eAAe;AAC3C;AAEO,SAAS,UAAU,IAAA,EAA6B;IACtD,OAAO,gBAAgB,UAAU,IAAI,EAAE,OAAA;AACxC;AAEA,SAAS,aAAa,IAAA,EAAgC;IACrD,OAAO,gBAAgB,UAAU,IAAI,EAAE,UAAA;AACxC;AAEA,SAAS,eAAe,IAAA,EAAY;IACnC,OAAO,iBAAiB,QAAQ,aAAa,KAAK,WAAA,CAAY,CAAC;AAChE;AAEA,SAAS,oBAAoB,IAAA,EAAqC;IACjE,OAAO,eAAe,IAAI,KAAK,gBAAgB,UAAU,IAAI,EAAE,eAAA;AAChE;AAEO,SAAS,aAAa,OAAA,EAAkB;IAC9C,OAAQ,QAAqC,KAAA;AAC9C;AAEO,SAAS,iBAAiB,OAAA,EAAkB,aAAA,EAAwB;IAC1E,OAAO,UAAU,OAAO,EAAE,gBAAA,CAAiB,SAAS,aAAa;AAClE"}},
    {"offset": {"line": 1566, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/exports/StyleEmbedder.ts"],"sourcesContent":["import { assertExists, getOwnProperty, objectMapValues, uniqueId } from '@tldraw/utils'\nimport { FontEmbedder } from './FontEmbedder'\nimport { ReadonlyStyles, Styles, cssRules } from './cssRules'\nimport {\n\telementStyle,\n\tgetComputedStyle,\n\tgetRenderedChildNodes,\n\tgetRenderedChildren,\n} from './domUtils'\nimport { resourceToDataUrl } from './fetchCache'\nimport { parseCssValueUrls, shouldIncludeCssProperty } from './parseCss'\n\nconst NO_STYLES = {} as const\n\ninterface ElementStyleInfo {\n\tself: Styles\n\tbefore: Styles | undefined\n\tafter: Styles | undefined\n}\n\nexport class StyleEmbedder {\n\tconstructor(private readonly root: Element) {}\n\tprivate readonly styles = new Map<Element, ElementStyleInfo>()\n\treadonly fonts = new FontEmbedder()\n\n\treadRootElementStyles(rootElement: Element) {\n\t\t// when reading a root, we always apply _all_ the styles, even if they match the defaults\n\t\tthis.readElementStyles(rootElement, {\n\t\t\tshouldRespectDefaults: false,\n\t\t\tshouldSkipInheritedParentStyles: false,\n\t\t})\n\n\t\tconst children = Array.from(getRenderedChildren(rootElement))\n\t\twhile (children.length) {\n\t\t\tconst child = children.pop()!\n\t\t\tchildren.push(...getRenderedChildren(child))\n\n\t\t\t// when reading children, we don't apply styles that match the defaults for that\n\t\t\t// element, or that would be inherited from the parent\n\t\t\tthis.readElementStyles(child, {\n\t\t\t\tshouldRespectDefaults: true,\n\t\t\t\tshouldSkipInheritedParentStyles: true,\n\t\t\t})\n\t\t}\n\t}\n\n\tprivate readElementStyles(\n\t\telement: Element,\n\t\t{ shouldRespectDefaults = true, shouldSkipInheritedParentStyles = true }\n\t) {\n\t\tconst defaultStyles = shouldRespectDefaults\n\t\t\t? getDefaultStylesForTagName(element.tagName.toLowerCase())\n\t\t\t: NO_STYLES\n\n\t\tconst parentStyles = Object.assign({}, NO_STYLES) as Styles\n\t\tif (shouldSkipInheritedParentStyles) {\n\t\t\tlet el = element.parentElement\n\t\t\t// Keep going up the tree to find all the relevant styles\n\t\t\twhile (el) {\n\t\t\t\tconst currentStyles = this.styles.get(el)?.self\n\t\t\t\tfor (const style in currentStyles) {\n\t\t\t\t\tif (!parentStyles[style]) {\n\t\t\t\t\t\tparentStyles[style] = currentStyles[style]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tel = el.parentElement\n\t\t\t}\n\t\t}\n\n\t\tconst info: ElementStyleInfo = {\n\t\t\tself: styleFromElement(element, { defaultStyles, parentStyles }),\n\t\t\tbefore: styleFromPseudoElement(element, '::before'),\n\t\t\tafter: styleFromPseudoElement(element, '::after'),\n\t\t}\n\t\tthis.styles.set(element, info)\n\t}\n\n\tfetchResources() {\n\t\tconst promises: Promise<void>[] = []\n\n\t\tfor (const info of this.styles.values()) {\n\t\t\tfor (const styles of objectMapValues(info)) {\n\t\t\t\tif (!styles) continue\n\t\t\t\tfor (const [property, value] of Object.entries(styles)) {\n\t\t\t\t\tif (!value) continue\n\t\t\t\t\tif (property === 'font-family') {\n\t\t\t\t\t\tthis.fonts.onFontFamilyValue(value)\n\t\t\t\t\t}\n\n\t\t\t\t\tconst urlMatches = parseCssValueUrls(value)\n\t\t\t\t\tif (urlMatches.length === 0) continue\n\n\t\t\t\t\tpromises.push(\n\t\t\t\t\t\t...urlMatches.map(async ({ url, original }) => {\n\t\t\t\t\t\t\tconst dataUrl = (await resourceToDataUrl(url)) ?? 'data:'\n\t\t\t\t\t\t\tstyles[property] = value.replace(original, `url(\"${dataUrl}\")`)\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn Promise.all(promises)\n\t}\n\n\t// custom elements are tricky. if we serialize the dom as-is, the custom elements wont have\n\t// their shadow-dom contents serialized. after we've read all the styles, we need to unwrap the\n\t// contents of each custom elements shadow dom directly into the parent element itself.\n\tunwrapCustomElements() {\n\t\tconst visited = new Set<Node>()\n\n\t\tconst visit = (element: Element, clonedParent: Element | null) => {\n\t\t\tif (visited.has(element)) return\n\t\t\tvisited.add(element)\n\n\t\t\tconst shadowRoot = element.shadowRoot\n\n\t\t\tif (shadowRoot) {\n\t\t\t\tconst clonedCustomEl = document.createElement('div')\n\t\t\t\tthis.styles.set(clonedCustomEl, this.styles.get(element)!)\n\n\t\t\t\tclonedCustomEl.setAttribute('data-tl-custom-element', element.tagName)\n\t\t\t\t;(clonedParent ?? element.parentElement!).appendChild(clonedCustomEl)\n\n\t\t\t\tfor (const child of shadowRoot.childNodes) {\n\t\t\t\t\tif (child instanceof Element) {\n\t\t\t\t\t\tvisit(child, clonedCustomEl)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclonedCustomEl.appendChild(child.cloneNode(true))\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\telement.remove()\n\t\t\t} else if (clonedParent) {\n\t\t\t\tif (element.tagName.toLowerCase() === 'style') {\n\t\t\t\t\t// we don't clone style tags at that would break the style scoping. instead we\n\t\t\t\t\t// rely on the computed styles we've already read\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst clonedEl = element.cloneNode(false) as Element\n\t\t\t\tthis.styles.set(clonedEl, this.styles.get(element)!)\n\n\t\t\t\tclonedParent.appendChild(clonedEl)\n\n\t\t\t\tfor (const child of getRenderedChildNodes(element)) {\n\t\t\t\t\tif (child instanceof Element) {\n\t\t\t\t\t\tvisit(child, clonedEl)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclonedEl.appendChild(child.cloneNode(true))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (const element of this.styles.keys()) {\n\t\t\tvisit(element, null)\n\t\t}\n\t}\n\n\tembedStyles(): string {\n\t\tlet css = ''\n\n\t\tfor (const [element, info] of this.styles) {\n\t\t\tif (info.after || info.before) {\n\t\t\t\tconst className = `pseudo-${uniqueId()}`\n\t\t\t\telement.classList.add(className)\n\n\t\t\t\tif (info.before) {\n\t\t\t\t\tcss += `.${className}::before {${formatCss(info.before)}}\\n`\n\t\t\t\t}\n\t\t\t\tif (info.after) {\n\t\t\t\t\tcss += `.${className}::after {${formatCss(info.after)}}\\n`\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst style = elementStyle(element)\n\t\t\tfor (const [property, value] of Object.entries(info.self)) {\n\t\t\t\tif (!value) continue\n\t\t\t\tstyle.setProperty(property, value)\n\t\t\t}\n\n\t\t\t// in HTML, font-kerning: auto is equivalent to font-kerning: normal. But in SVG, it's\n\t\t\t// none. We set it to normal here to match the HTML behavior, as otherwise this can\n\t\t\t// cause rendering differences.\n\t\t\tif (style.fontKerning === 'auto') {\n\t\t\t\tstyle.fontKerning = 'normal'\n\t\t\t}\n\t\t}\n\n\t\treturn css\n\t}\n\n\tasync getFontFaceCss() {\n\t\treturn await this.fonts.createCss()\n\t}\n\n\tdispose() {\n\t\tdestroyDefaultStyleFrame()\n\t}\n}\n\ninterface ReadStyleOpts {\n\tdefaultStyles: ReadonlyStyles\n\tparentStyles: ReadonlyStyles\n}\n\nfunction styleFromElement(element: Element, { defaultStyles, parentStyles }: ReadStyleOpts) {\n\t// `computedStyleMap` produces a more accurate representation of the styles, but it's not\n\t// supported in firefox at the time of writing. So we fall back to `getComputedStyle` if it's\n\t// not available.\n\tif (element.computedStyleMap) {\n\t\treturn styleFromComputedStyleMap(element.computedStyleMap(), { defaultStyles, parentStyles })\n\t}\n\treturn styleFromComputedStyle(getComputedStyle(element), { defaultStyles, parentStyles })\n}\n\nfunction styleFromPseudoElement(element: Element, pseudo: string) {\n\t// the equivalent of `computedStyleMap` for pseudo-elements isn't even fully specced out yet, so\n\t// for those we have to use `getComputedStyle` in all browsers.\n\tconst style = getComputedStyle(element, pseudo)\n\n\tconst content = style.getPropertyValue('content')\n\tif (content === '' || content === 'none') {\n\t\treturn undefined\n\t}\n\n\treturn styleFromComputedStyle(style, { defaultStyles: NO_STYLES, parentStyles: NO_STYLES })\n}\n\nfunction styleFromComputedStyleMap(\n\tstyle: StylePropertyMapReadOnly,\n\t{ defaultStyles, parentStyles }: ReadStyleOpts\n) {\n\tconst styles: Record<string, string> = {}\n\tconst currentColor = style.get('color')?.toString() || ''\n\tconst ruleOptions = {\n\t\tcurrentColor,\n\t\tparentStyles,\n\t\tdefaultStyles,\n\t\tgetStyle: (property: string) => style.get(property)?.toString() ?? '',\n\t}\n\tfor (const property of style.keys()) {\n\t\tif (!shouldIncludeCssProperty(property)) continue\n\n\t\tconst value = style.get(property)!.toString()\n\n\t\tif (defaultStyles[property] === value) continue\n\n\t\tconst rule = getOwnProperty(cssRules, property)\n\t\tif (rule && rule(value, property, ruleOptions)) continue\n\n\t\tstyles[property] = value\n\t}\n\n\treturn styles\n}\n\nfunction styleFromComputedStyle(\n\tstyle: CSSStyleDeclaration,\n\t{ defaultStyles, parentStyles }: ReadStyleOpts\n) {\n\tconst styles: Record<string, string> = {}\n\tconst currentColor = style.color\n\tconst ruleOptions = {\n\t\tcurrentColor,\n\t\tparentStyles,\n\t\tdefaultStyles,\n\t\tgetStyle: (property: string) => style.getPropertyValue(property),\n\t}\n\n\tfor (const property in style) {\n\t\tif (!shouldIncludeCssProperty(property)) continue\n\n\t\tconst value = style.getPropertyValue(property)\n\n\t\tif (defaultStyles[property] === value) continue\n\n\t\tconst rule = getOwnProperty(cssRules, property)\n\t\tif (rule && rule(value, property, ruleOptions)) continue\n\n\t\tstyles[property] = value\n\t}\n\treturn styles\n}\n\nfunction formatCss(style: ReadonlyStyles) {\n\tlet cssText = ''\n\tfor (const [property, value] of Object.entries(style)) {\n\t\tcssText += `${property}: ${value};`\n\t}\n\treturn cssText\n}\n\n// when we're figuring out the default values for a tag, we need read them from a separate document\n// so they're not affected by the current document's styles\nlet defaultStyleFrame:\n\t| { iframe: HTMLIFrameElement; foreignObject: SVGForeignObjectElement; document: Document }\n\t| undefined\nconst defaultStylesByTagName: Record<string, ReadonlyStyles> = {}\nfunction getDefaultStyleFrame() {\n\tif (!defaultStyleFrame) {\n\t\tconst frame = document.createElement('iframe')\n\t\tframe.style.display = 'none'\n\t\tdocument.body.appendChild(frame)\n\t\tconst frameDocument = assertExists(frame.contentDocument, 'frame must have a document')\n\t\tconst svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n\t\tconst foreignObject = document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')\n\t\tsvg.appendChild(foreignObject)\n\t\tframeDocument.body.appendChild(svg)\n\t\tdefaultStyleFrame = { iframe: frame, foreignObject, document: frameDocument }\n\t}\n\treturn defaultStyleFrame\n}\n\nfunction destroyDefaultStyleFrame() {\n\tif (defaultStyleFrame) {\n\t\tdocument.body.removeChild(defaultStyleFrame.iframe)\n\t\tdefaultStyleFrame = undefined\n\t}\n}\n\nconst defaultStyleReadOptions: ReadStyleOpts = { defaultStyles: NO_STYLES, parentStyles: NO_STYLES }\nfunction getDefaultStylesForTagName(tagName: string) {\n\tlet existing = defaultStylesByTagName[tagName]\n\tif (!existing) {\n\t\tconst { foreignObject, document } = getDefaultStyleFrame()\n\t\tconst element = document.createElement(tagName)\n\t\tforeignObject.appendChild(element)\n\t\texisting = element.computedStyleMap\n\t\t\t? styleFromComputedStyleMap(element.computedStyleMap(), defaultStyleReadOptions)\n\t\t\t: styleFromComputedStyle(getComputedStyle(element), defaultStyleReadOptions)\n\t\tforeignObject.removeChild(element)\n\t\tdefaultStylesByTagName[tagName] = existing\n\t}\n\treturn existing\n}\n"],"names":["document"],"mappings":"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"}},
    {"offset": {"line": 1844, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/exports/embedMedia.ts"],"sourcesContent":["import { MediaHelpers } from '@tldraw/utils'\nimport { getRenderedChildren } from './domUtils'\nimport { resourceToDataUrl } from './fetchCache'\n\nfunction copyAttrs(source: Element, target: Element) {\n\tconst attrs = Array.from(source.attributes)\n\tattrs.forEach((attr) => {\n\t\ttarget.setAttribute(attr.name, attr.value)\n\t})\n}\n\nfunction replace(original: HTMLElement, replacement: HTMLElement) {\n\toriginal.replaceWith(replacement)\n\treturn replacement\n}\n\nasync function createImage(dataUrl: string | null, cloneAttributesFrom?: HTMLElement) {\n\tconst image = document.createElement('img')\n\n\tif (cloneAttributesFrom) {\n\t\tcopyAttrs(cloneAttributesFrom, image)\n\t}\n\n\timage.setAttribute('src', dataUrl ?? 'data:')\n\timage.setAttribute('decoding', 'sync')\n\timage.setAttribute('loading', 'eager')\n\n\ttry {\n\t\tawait image.decode()\n\t} catch {\n\t\t// this is fine\n\t}\n\treturn image\n}\n\nasync function getCanvasReplacement(canvas: HTMLCanvasElement) {\n\ttry {\n\t\tconst dataURL = canvas.toDataURL()\n\t\treturn await createImage(dataURL, canvas)\n\t} catch {\n\t\treturn await createImage(null, canvas)\n\t}\n}\n\nasync function getVideoReplacement(video: HTMLVideoElement) {\n\ttry {\n\t\tconst dataUrl = await MediaHelpers.getVideoFrameAsDataUrl(video)\n\t\treturn createImage(dataUrl, video)\n\t} catch (err) {\n\t\tconsole.error('Could not get video frame', err)\n\t}\n\n\tif (video.poster) {\n\t\tconst dataUrl = await resourceToDataUrl(video.poster)\n\t\treturn createImage(dataUrl, video)\n\t}\n\n\treturn createImage(null, video)\n}\n\nexport async function embedMedia(node: HTMLElement) {\n\tif (node instanceof HTMLCanvasElement) {\n\t\treturn replace(node, await getCanvasReplacement(node))\n\t} else if (node instanceof HTMLVideoElement) {\n\t\treturn replace(node, await getVideoReplacement(node))\n\t} else if (node instanceof HTMLImageElement) {\n\t\tconst src = node.currentSrc || node.src\n\t\tconst dataUrl = await resourceToDataUrl(src)\n\t\tnode.setAttribute('src', dataUrl ?? 'data:')\n\t\tnode.setAttribute('decoding', 'sync')\n\t\tnode.setAttribute('loading', 'eager')\n\t\ttry {\n\t\t\tawait node.decode()\n\t\t} catch {\n\t\t\t// this is fine\n\t\t}\n\t\treturn node\n\t} else if (node instanceof HTMLInputElement) {\n\t\t// if an input has a value, make sure it's serialized when we convert to svg\n\t\tnode.setAttribute('value', node.value)\n\t} else if (node instanceof HTMLTextAreaElement) {\n\t\tnode.textContent = node.value\n\t}\n\n\tawait Promise.all(\n\t\tArray.from(getRenderedChildren(node), (child) => embedMedia(child as HTMLElement))\n\t)\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,oBAAoB;AAC7B,SAAS,2BAA2B;AACpC,SAAS,yBAAyB;;;;AAElC,SAAS,UAAU,MAAA,EAAiB,MAAA,EAAiB;IACpD,MAAM,QAAQ,MAAM,IAAA,CAAK,OAAO,UAAU;IAC1C,MAAM,OAAA,CAAQ,CAAC,SAAS;QACvB,OAAO,YAAA,CAAa,KAAK,IAAA,EAAM,KAAK,KAAK;IAC1C,CAAC;AACF;AAEA,SAAS,QAAQ,QAAA,EAAuB,WAAA,EAA0B;IACjE,SAAS,WAAA,CAAY,WAAW;IAChC,OAAO;AACR;AAEA,eAAe,YAAY,OAAA,EAAwB,mBAAA,EAAmC;IACrF,MAAM,QAAQ,SAAS,aAAA,CAAc,KAAK;IAE1C,IAAI,qBAAqB;QACxB,UAAU,qBAAqB,KAAK;IACrC;IAEA,MAAM,YAAA,CAAa,OAAO,WAAW,OAAO;IAC5C,MAAM,YAAA,CAAa,YAAY,MAAM;IACrC,MAAM,YAAA,CAAa,WAAW,OAAO;IAErC,IAAI;QACH,MAAM,MAAM,MAAA,CAAO;IACpB,EAAA,OAAQ,CAER;IACA,OAAO;AACR;AAEA,eAAe,qBAAqB,MAAA,EAA2B;IAC9D,IAAI;QACH,MAAM,UAAU,OAAO,SAAA,CAAU;QACjC,OAAO,MAAM,YAAY,SAAS,MAAM;IACzC,EAAA,OAAQ;QACP,OAAO,MAAM,YAAY,MAAM,MAAM;IACtC;AACD;AAEA,eAAe,oBAAoB,KAAA,EAAyB;IAC3D,IAAI;QACH,MAAM,UAAU,MAAM,+OAAA,CAAa,sBAAA,CAAuB,KAAK;QAC/D,OAAO,YAAY,SAAS,KAAK;IAClC,EAAA,OAAS,KAAK;QACb,QAAQ,KAAA,CAAM,6BAA6B,GAAG;IAC/C;IAEA,IAAI,MAAM,MAAA,EAAQ;QACjB,MAAM,UAAU,UAAM,4PAAA,EAAkB,MAAM,MAAM;QACpD,OAAO,YAAY,SAAS,KAAK;IAClC;IAEA,OAAO,YAAY,MAAM,KAAK;AAC/B;AAEA,eAAsB,WAAW,IAAA,EAAmB;IACnD,IAAI,gBAAgB,mBAAmB;QACtC,OAAO,QAAQ,MAAM,MAAM,qBAAqB,IAAI,CAAC;IACtD,OAAA,IAAW,gBAAgB,kBAAkB;QAC5C,OAAO,QAAQ,MAAM,MAAM,oBAAoB,IAAI,CAAC;IACrD,OAAA,IAAW,gBAAgB,kBAAkB;QAC5C,MAAM,MAAM,KAAK,UAAA,IAAc,KAAK,GAAA;QACpC,MAAM,UAAU,UAAM,4PAAA,EAAkB,GAAG;QAC3C,KAAK,YAAA,CAAa,OAAO,WAAW,OAAO;QAC3C,KAAK,YAAA,CAAa,YAAY,MAAM;QACpC,KAAK,YAAA,CAAa,WAAW,OAAO;QACpC,IAAI;YACH,MAAM,KAAK,MAAA,CAAO;QACnB,EAAA,OAAQ,CAER;QACA,OAAO;IACR,OAAA,IAAW,gBAAgB,kBAAkB;QAE5C,KAAK,YAAA,CAAa,SAAS,KAAK,KAAK;IACtC,OAAA,IAAW,gBAAgB,qBAAqB;QAC/C,KAAK,WAAA,GAAc,KAAK,KAAA;IACzB;IAEA,MAAM,QAAQ,GAAA,CACb,MAAM,IAAA,KAAK,4PAAA,EAAoB,IAAI,GAAG,CAAC,QAAU,WAAW,KAAoB,CAAC;AAEnF"}},
    {"offset": {"line": 1927, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/exports/ExportDelay.tsx"],"sourcesContent":["import { bind, sleep } from '@tldraw/utils'\n\n/**\n * Export delay is a helper class that allows you to wait for a set of promises to resolve before\n * proceeding with an export. Over time, promises can be added by calling `waitUntil`.\n *\n * When `resolve` is called, we'll wait for all the promises already added (and any new ones added\n * in the mean time) to resolve before proceeding. The class is designed to be used once: after\n * `resolve` has been called and finished, new promises cannot be added.\n */\nexport class ExportDelay {\n\tprivate isResolved = false\n\tprivate readonly promisesToWaitFor: Promise<void>[] = []\n\n\tconstructor(private readonly maxDelayTimeMs: number) {}\n\n\t@bind waitUntil(promise: Promise<void>): void {\n\t\tif (this.isResolved) {\n\t\t\tthrow new Error(\n\t\t\t\t'Cannot `waitUntil` - the export has already been resolved. Make sure to call `waitUntil` as soon as possible during an export - ie within the first react effect after rendering.'\n\t\t\t)\n\t\t}\n\t\tthis.promisesToWaitFor.push(\n\t\t\tpromise.catch((err) => console.error('Error while waiting for export:', err))\n\t\t)\n\t}\n\n\tprivate async resolvePromises() {\n\t\tlet lastLength = null\n\t\twhile (this.promisesToWaitFor.length !== lastLength) {\n\t\t\tlastLength = this.promisesToWaitFor.length\n\t\t\tawait Promise.allSettled(this.promisesToWaitFor)\n\n\t\t\t// wait for a cycle of the event loop to allow any of those promises to add more if needed.\n\t\t\tawait sleep(0)\n\t\t}\n\t}\n\n\tasync resolve() {\n\t\tconst timeoutPromise = sleep(this.maxDelayTimeMs).then(() => 'timeout' as const)\n\t\tconst resolvePromise = this.resolvePromises().then(() => 'resolved' as const)\n\n\t\tconst result = await Promise.race([timeoutPromise, resolvePromise])\n\t\tif (result === 'timeout') {\n\t\t\tconsole.warn('[tldraw] Export delay timed out after ${this.maxDelayTimeMs}ms')\n\t\t}\n\n\t\tthis.isResolved = true\n\t}\n}\n"],"names":[],"mappings":";;;;;;AAAA,SAAS,MAAM,aAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAA5B,IAAA,gBAAA;;AAgBC,iBAAA;IAAC,6NAAA;CAAA;AANK,MAAM,YAAY;IAIxB,YAA6B,cAAA,CAAwB;QAAxB,IAAA,CAAA,cAAA,GAAA;QAJvB,kBAAA,OAAA,GAAA,IAAA;QACN,cAAA,IAAA,EAAQ,cAAa;QACrB,cAAA,IAAA,EAAiB,qBAAqC,CAAC,CAAA;IAED;IAEhD,UAAU,OAAA,EAA8B;QAC7C,IAAI,IAAA,CAAK,UAAA,EAAY;YACpB,MAAM,IAAI,MACT;QAEF;QACA,IAAA,CAAK,iBAAA,CAAkB,IAAA,CACtB,QAAQ,KAAA,CAAM,CAAC,MAAQ,QAAQ,KAAA,CAAM,mCAAmC,GAAG,CAAC;IAE9E;IAEA,MAAc,kBAAkB;QAC/B,IAAI,aAAa;QACjB,MAAO,IAAA,CAAK,iBAAA,CAAkB,MAAA,KAAW,WAAY;YACpD,aAAa,IAAA,CAAK,iBAAA,CAAkB,MAAA;YACpC,MAAM,QAAQ,UAAA,CAAW,IAAA,CAAK,iBAAiB;YAG/C,UAAM,iOAAA,EAAM,CAAC;QACd;IACD;IAEA,MAAM,UAAU;QACf,MAAM,qBAAiB,iOAAA,EAAM,IAAA,CAAK,cAAc,EAAE,IAAA,CAAK,IAAM,SAAkB;QAC/E,MAAM,iBAAiB,IAAA,CAAK,eAAA,CAAgB,EAAE,IAAA,CAAK,IAAM,UAAmB;QAE5E,MAAM,SAAS,MAAM,QAAQ,IAAA,CAAK;YAAC;YAAgB,cAAc;SAAC;QAClE,IAAI,WAAW,WAAW;YACzB,QAAQ,IAAA,CAAK,gEAAgE;QAC9E;QAEA,IAAA,CAAK,UAAA,GAAa;IACnB;AACD;AAvCO,QAAA,iBAAA;AAMA,kBAAA,OAAA,GAAA,aAAN,gBANY;AAAN,oBAAA,OAAM"}},
    {"offset": {"line": 2066, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/exports/getSvgJsx.tsx"],"sourcesContent":["import { useAtom, useValue } from '@tldraw/state-react'\nimport {\n\tTLFrameShape,\n\tTLShape,\n\tTLShapeId,\n\tgetColorValue,\n\tgetDefaultColorTheme,\n} from '@tldraw/tlschema'\nimport { hasOwnProperty, promiseWithResolve, uniqueId } from '@tldraw/utils'\nimport {\n\tComponentType,\n\tFragment,\n\tReactElement,\n\tReactNode,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseMemo,\n\tuseRef,\n} from 'react'\nimport { flushSync } from 'react-dom'\nimport { ErrorBoundary } from '../components/ErrorBoundary'\nimport { InnerShape, InnerShapeBackground } from '../components/Shape'\nimport { Editor, TLRenderingShape } from '../editor/Editor'\nimport { TLFontFace } from '../editor/managers/FontManager/FontManager'\nimport { ShapeUtil } from '../editor/shapes/ShapeUtil'\nimport {\n\tSvgExportContext,\n\tSvgExportContextProvider,\n\tSvgExportDef,\n} from '../editor/types/SvgExportContext'\nimport { TLImageExportOptions } from '../editor/types/misc-types'\nimport { useEditor } from '../hooks/useEditor'\nimport { useEvent } from '../hooks/useEvent'\nimport { suffixSafeId, useUniqueSafeId } from '../hooks/useSafeId'\nimport { Box } from '../primitives/Box'\nimport { Mat } from '../primitives/Mat'\nimport { ExportDelay } from './ExportDelay'\n\nexport function getSvgJsx(editor: Editor, ids: TLShapeId[], opts: TLImageExportOptions = {}) {\n\tif (!window.document) throw Error('No document')\n\n\tconst {\n\t\tscale = 1,\n\t\t// should we include the background in the export? or is it transparent?\n\t\tbackground = editor.getInstanceState().exportBackground,\n\t\tpadding = editor.options.defaultSvgPadding,\n\t\tpreserveAspectRatio,\n\t} = opts\n\n\tconst isDarkMode = opts.darkMode ?? editor.user.getIsDarkMode()\n\n\t// ---Figure out which shapes we need to include\n\tconst shapeIdsToInclude = editor.getShapeAndDescendantIds(ids)\n\tconst renderingShapes = editor\n\t\t.getUnorderedRenderingShapes(false)\n\t\t.filter(({ id }) => shapeIdsToInclude.has(id))\n\n\t// --- Common bounding box of all shapes\n\tconst singleFrameShapeId =\n\t\tids.length === 1 && editor.isShapeOfType(editor.getShape(ids[0])!, 'frame') ? ids[0] : null\n\n\tlet bbox: null | Box = null\n\tif (opts.bounds) {\n\t\tbbox = opts.bounds.clone().expandBy(padding)\n\t} else {\n\t\tbbox = getExportDefaultBounds(editor, renderingShapes, padding, singleFrameShapeId)\n\t}\n\n\t// no unmasked shapes to export\n\tif (!bbox) return\n\n\t// We want the svg image to be BIGGER THAN USUAL to account for image quality\n\tconst w = bbox.width * scale\n\tconst h = bbox.height * scale\n\n\ttry {\n\t\tdocument.body.focus?.() // weird but necessary\n\t} catch {\n\t\t// not implemented\n\t}\n\n\tconst exportDelay = new ExportDelay(editor.options.maxExportDelayMs)\n\n\tconst initialEffectPromise = promiseWithResolve<void>()\n\texportDelay.waitUntil(initialEffectPromise)\n\n\tconst svg = (\n\t\t<SvgExport\n\t\t\teditor={editor}\n\t\t\tpreserveAspectRatio={preserveAspectRatio}\n\t\t\tscale={scale}\n\t\t\tpixelRatio={opts.pixelRatio ?? null}\n\t\t\tbbox={bbox}\n\t\t\tbackground={background}\n\t\t\tsingleFrameShapeId={singleFrameShapeId}\n\t\t\tisDarkMode={isDarkMode}\n\t\t\trenderingShapes={renderingShapes}\n\t\t\tonMount={initialEffectPromise.resolve}\n\t\t\twaitUntil={exportDelay.waitUntil}\n\t\t>\n\t\t\t{}\n\t\t</SvgExport>\n\t)\n\n\treturn { jsx: svg, width: w, height: h, exportDelay }\n}\n\n/**\n * Calculates the default bounds for an SVG export. This function handles:\n * 1. Computing masked page bounds for each shape\n * 2. Container logic: if a shape is marked as an export bounds container and it\n *    contains all other shapes, use its bounds and skip padding\n * 3. Otherwise, create a union of all shape bounds and apply padding\n *\n * The container logic is useful for cases like annotating on an image - if the image\n * contains all annotations, we want to export exactly the image bounds without extra padding.\n *\n * @param editor - The editor instance\n * @param renderingShapes - The shapes to include in the export\n * @param padding - Padding to add around the bounds (only applied if no container bounds)\n * @param singleFrameShapeId - If exporting a single frame, this is its ID (skips padding)\n * @returns The calculated bounds box, or null if no shapes to export\n */\nexport function getExportDefaultBounds(\n\teditor: Editor,\n\trenderingShapes: TLRenderingShape[],\n\tpadding: number,\n\tsingleFrameShapeId: TLShapeId | null\n) {\n\tlet isBoundedByContainer = false\n\tlet bbox: null | Box = null\n\n\tfor (const { id } of renderingShapes) {\n\t\tconst maskedPageBounds = editor.getShapeMaskedPageBounds(id)\n\t\tif (!maskedPageBounds) continue\n\n\t\t// Check if this shape is an export bounds container (e.g., an image being annotated)\n\t\tconst shape = editor.getShape(id)!\n\t\tconst isContainer = editor.getShapeUtil(shape).isExportBoundsContainer(shape)\n\n\t\tif (bbox) {\n\t\t\t// Container logic: if this is a container and it contains all shapes processed so far,\n\t\t\t// use the container's bounds instead of the union. This prevents extra padding around\n\t\t\t// things like annotated images.\n\t\t\tif (isContainer && Box.ContainsApproximately(maskedPageBounds, bbox)) {\n\t\t\t\tisBoundedByContainer = true\n\t\t\t\tbbox = maskedPageBounds.clone()\n\t\t\t} else {\n\t\t\t\t// If we were previously bounded by a container but this shape extends outside it,\n\t\t\t\t// we're no longer bounded by a container\n\t\t\t\tif (isBoundedByContainer && !Box.ContainsApproximately(bbox, maskedPageBounds)) {\n\t\t\t\t\tisBoundedByContainer = false\n\t\t\t\t}\n\t\t\t\t// Expand the bounding box to include this shape\n\t\t\t\tbbox.union(maskedPageBounds)\n\t\t\t}\n\t\t} else {\n\t\t\t// First shape sets the initial bounds\n\t\t\tisBoundedByContainer = isContainer\n\t\t\tbbox = maskedPageBounds.clone()\n\t\t}\n\t}\n\n\t// No unmasked shapes to export\n\tif (!bbox) return null\n\n\t// Only apply padding if:\n\t// - Not exporting a single frame (frames have their own padding rules)\n\t// - Not bounded by a container (containers define their own bounds precisely)\n\tif (!singleFrameShapeId && !isBoundedByContainer) {\n\t\tbbox.expandBy(padding)\n\t}\n\n\treturn bbox\n}\n\nfunction SvgExport({\n\teditor,\n\tpreserveAspectRatio,\n\tscale,\n\tpixelRatio,\n\tbbox,\n\tbackground,\n\tsingleFrameShapeId,\n\tisDarkMode,\n\trenderingShapes,\n\tonMount,\n\twaitUntil,\n}: {\n\teditor: Editor\n\tpreserveAspectRatio?: string\n\tscale: number\n\tpixelRatio: number | null\n\tbbox: Box\n\tbackground: boolean\n\tsingleFrameShapeId: TLShapeId | null\n\tisDarkMode: boolean\n\trenderingShapes: TLRenderingShape[]\n\tonMount(): void\n\twaitUntil(promise: Promise<void>): void\n}) {\n\tconst masksId = useUniqueSafeId()\n\tconst theme = getDefaultColorTheme({ isDarkMode })\n\n\tconst stateAtom = useAtom<{\n\t\tdefsById: Record<\n\t\t\tstring,\n\t\t\t{ pending: false; element: ReactNode } | { pending: true; element: Promise<ReactNode> }\n\t\t>\n\t\tshapeElements: ReactElement[] | null\n\t}>('export state', { defsById: {}, shapeElements: null })\n\tconst { defsById, shapeElements } = useValue(stateAtom)\n\n\tconst addExportDef = useEvent((def: SvgExportDef) => {\n\t\tstateAtom.update((state) => {\n\t\t\tif (hasOwnProperty(state.defsById, def.key)) return state\n\n\t\t\tconst promise = Promise.resolve(def.getElement())\n\t\t\twaitUntil(\n\t\t\t\tpromise.then((result) => {\n\t\t\t\t\tstateAtom.update((state) => ({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tdefsById: { ...state.defsById, [def.key]: { pending: false, element: result } },\n\t\t\t\t\t}))\n\t\t\t\t})\n\t\t\t)\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdefsById: { ...state.defsById, [def.key]: { pending: true, element: promise } },\n\t\t\t}\n\t\t})\n\t})\n\n\tconst exportContext = useMemo(\n\t\t(): SvgExportContext => ({\n\t\t\tisDarkMode,\n\t\t\twaitUntil,\n\t\t\taddExportDef,\n\t\t\tscale,\n\t\t\tpixelRatio,\n\t\t\tasync resolveAssetUrl(assetId, width) {\n\t\t\t\tconst asset = editor.getAsset(assetId)\n\t\t\t\tif (!asset || (asset.type !== 'image' && asset.type !== 'video')) return null\n\n\t\t\t\treturn await editor.resolveAssetUrl(assetId, {\n\t\t\t\t\tscreenScale: scale * (width / asset.props.w),\n\t\t\t\t\tshouldResolveToOriginal: pixelRatio === null,\n\t\t\t\t\tdpr: pixelRatio ?? undefined,\n\t\t\t\t})\n\t\t\t},\n\t\t}),\n\t\t[isDarkMode, waitUntil, addExportDef, scale, pixelRatio, editor]\n\t)\n\n\tconst didRenderRef = useRef(false)\n\tuseLayoutEffect(() => {\n\t\tif (didRenderRef.current) {\n\t\t\tthrow new Error('SvgExport should only render once - do not use with react strict mode')\n\t\t}\n\t\tdidRenderRef.current = true\n\t\t;(async () => {\n\t\t\tconst shapeDefs: Record<string, { pending: false; element: ReactElement }> = {}\n\n\t\t\t// Then render everything. The shapes with assets should all hit the cache\n\t\t\tconst unorderedShapeElementPromises = renderingShapes.map(\n\t\t\t\tasync ({ id, opacity, index, backgroundIndex }) => {\n\t\t\t\t\t// Don't render the frame if we're only exporting a single frame and it's children\n\t\t\t\t\tif (id === singleFrameShapeId) return []\n\n\t\t\t\t\tconst shape = editor.getShape(id)!\n\n\t\t\t\t\tif (editor.isShapeOfType(shape, 'group')) return []\n\n\t\t\t\t\tconst elements = []\n\t\t\t\t\tconst util = editor.getShapeUtil(shape)\n\n\t\t\t\t\tif (util.toSvg || util.toBackgroundSvg) {\n\t\t\t\t\t\t// If the shape has any sort of custom svg export, let's use that.\n\t\t\t\t\t\tconst [toSvgResult, toBackgroundSvgResult] = await Promise.all([\n\t\t\t\t\t\t\tutil.toSvg?.(shape, exportContext),\n\t\t\t\t\t\t\tutil.toBackgroundSvg?.(shape, exportContext),\n\t\t\t\t\t\t])\n\n\t\t\t\t\t\tconst pageTransform = editor.getShapePageTransform(shape)\n\t\t\t\t\t\tlet pageTransformString = pageTransform!.toCssString()\n\t\t\t\t\t\tlet scale = 1\n\t\t\t\t\t\tif ('scale' in shape.props) {\n\t\t\t\t\t\t\tif (shape.props.scale !== 1) {\n\t\t\t\t\t\t\t\tscale = shape.props.scale\n\t\t\t\t\t\t\t\tpageTransformString = `${pageTransformString} scale(${shape.props.scale}, ${shape.props.scale})`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Create svg mask if shape has a frame as parent\n\t\t\t\t\t\tconst pageMask = editor.getShapeMask(shape.id)\n\t\t\t\t\t\tconst shapeMask = pageMask\n\t\t\t\t\t\t\t? Mat.From(Mat.Inverse(pageTransform)).applyToPoints(pageMask)\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t\tconst shapeMaskId = suffixSafeId(masksId, shape.id)\n\t\t\t\t\t\tif (shapeMask) {\n\t\t\t\t\t\t\t// Create a clip path and add it to defs\n\t\t\t\t\t\t\tshapeDefs[shapeMaskId] = {\n\t\t\t\t\t\t\t\tpending: false,\n\t\t\t\t\t\t\t\telement: (\n\t\t\t\t\t\t\t\t\t<clipPath id={shapeMaskId}>\n\t\t\t\t\t\t\t\t\t\t{/* Create a polyline mask that does the clipping */}\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\td={`M${shapeMask.map(({ x, y }) => `${x / scale},${y / scale}`).join('L')}Z`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</clipPath>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (toSvgResult) {\n\t\t\t\t\t\t\telements.push({\n\t\t\t\t\t\t\t\tzIndex: index,\n\t\t\t\t\t\t\t\telement: (\n\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\tkey={`fg_${shape.id}`}\n\t\t\t\t\t\t\t\t\t\ttransform={pageTransformString}\n\t\t\t\t\t\t\t\t\t\topacity={opacity}\n\t\t\t\t\t\t\t\t\t\tclipPath={pageMask ? `url(#${shapeMaskId})` : undefined}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{toSvgResult}\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (toBackgroundSvgResult) {\n\t\t\t\t\t\t\telements.push({\n\t\t\t\t\t\t\t\tzIndex: backgroundIndex,\n\t\t\t\t\t\t\t\telement: (\n\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\tkey={`bg_${shape.id}`}\n\t\t\t\t\t\t\t\t\t\ttransform={pageTransformString}\n\t\t\t\t\t\t\t\t\t\topacity={opacity}\n\t\t\t\t\t\t\t\t\t\tclipPath={pageMask ? `url(#${shapeMaskId})` : undefined}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{toBackgroundSvgResult}\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// If the shape doesn't have a custom svg export, we'll use its normal HTML\n\t\t\t\t\t\t// renderer in a foreignObject.\n\t\t\t\t\t\telements.push({\n\t\t\t\t\t\t\tzIndex: index,\n\t\t\t\t\t\t\telement: (\n\t\t\t\t\t\t\t\t<ForeignObjectShape\n\t\t\t\t\t\t\t\t\tkey={`fg_${shape.id}`}\n\t\t\t\t\t\t\t\t\tshape={shape}\n\t\t\t\t\t\t\t\t\tutil={util}\n\t\t\t\t\t\t\t\t\tcomponent={InnerShape}\n\t\t\t\t\t\t\t\t\tclassName=\"tl-shape\"\n\t\t\t\t\t\t\t\t\tbbox={bbox}\n\t\t\t\t\t\t\t\t\topacity={opacity}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tif (util.backgroundComponent) {\n\t\t\t\t\t\t\telements.push({\n\t\t\t\t\t\t\t\tzIndex: backgroundIndex,\n\t\t\t\t\t\t\t\telement: (\n\t\t\t\t\t\t\t\t\t<ForeignObjectShape\n\t\t\t\t\t\t\t\t\t\tkey={`bg_${shape.id}`}\n\t\t\t\t\t\t\t\t\t\tshape={shape}\n\t\t\t\t\t\t\t\t\t\tutil={util}\n\t\t\t\t\t\t\t\t\t\tcomponent={InnerShapeBackground}\n\t\t\t\t\t\t\t\t\t\tclassName=\"tl-shape tl-shape-background\"\n\t\t\t\t\t\t\t\t\t\tbbox={bbox}\n\t\t\t\t\t\t\t\t\t\topacity={opacity}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn elements\n\t\t\t\t}\n\t\t\t)\n\n\t\t\tconst unorderedShapeElements = (await Promise.all(unorderedShapeElementPromises)).flat()\n\n\t\t\tflushSync(() => {\n\t\t\t\tstateAtom.update((state) => ({\n\t\t\t\t\t...state,\n\t\t\t\t\tshapeElements: unorderedShapeElements\n\t\t\t\t\t\t.sort((a, b) => a.zIndex - b.zIndex)\n\t\t\t\t\t\t.map(({ element }) => element),\n\t\t\t\t\tdefsById: { ...state.defsById, ...shapeDefs },\n\t\t\t\t}))\n\t\t\t})\n\t\t})()\n\t}, [bbox, editor, exportContext, masksId, renderingShapes, singleFrameShapeId, stateAtom])\n\n\tuseEffect(() => {\n\t\tconst fontsInUse = new Set<TLFontFace>()\n\t\tfor (const { id } of renderingShapes) {\n\t\t\tfor (const font of editor.fonts.getShapeFontFaces(id)) {\n\t\t\t\tfontsInUse.add(font)\n\t\t\t}\n\t\t}\n\n\t\tfor (const font of fontsInUse) {\n\t\t\taddExportDef({\n\t\t\t\tkey: uniqueId(),\n\t\t\t\tgetElement: async () => {\n\t\t\t\t\tconst declaration = await editor.fonts.toEmbeddedCssDeclaration(font)\n\t\t\t\t\treturn <style nonce={editor.options.nonce}>{declaration}</style>\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t}, [editor, renderingShapes, addExportDef])\n\n\tuseEffect(() => {\n\t\tif (shapeElements === null) return\n\t\tonMount()\n\t}, [onMount, shapeElements])\n\n\tlet backgroundColor = background ? theme.background : 'transparent'\n\n\tif (singleFrameShapeId && background) {\n\t\tconst frameShapeUtil = editor.getShapeUtil('frame') as any as\n\t\t\t| undefined\n\t\t\t| { options: { showColors: boolean } }\n\t\tif (frameShapeUtil?.options.showColors) {\n\t\t\tconst shape = editor.getShape(singleFrameShapeId)! as TLFrameShape\n\t\t\tbackgroundColor = getColorValue(theme, shape.props.color, 'frameFill')\n\t\t} else {\n\t\t\tbackgroundColor = theme.solid\n\t\t}\n\t}\n\n\treturn (\n\t\t<SvgExportContextProvider editor={editor} context={exportContext}>\n\t\t\t<svg\n\t\t\t\tpreserveAspectRatio={preserveAspectRatio}\n\t\t\t\tdirection=\"ltr\"\n\t\t\t\twidth={bbox.width * scale}\n\t\t\t\theight={bbox.height * scale}\n\t\t\t\tviewBox={`${bbox.minX} ${bbox.minY} ${bbox.width} ${bbox.height}`}\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\tstyle={{ backgroundColor }}\n\t\t\t\tdata-color-mode={isDarkMode ? 'dark' : 'light'}\n\t\t\t\tclassName={`tl-container tl-theme__force-sRGB ${isDarkMode ? 'tl-theme__dark' : 'tl-theme__light'}`}\n\t\t\t>\n\t\t\t\t<defs>\n\t\t\t\t\t{Object.entries(defsById).map(([key, def]) =>\n\t\t\t\t\t\tdef.pending ? null : <Fragment key={key}>{def.element}</Fragment>\n\t\t\t\t\t)}\n\t\t\t\t</defs>\n\t\t\t\t{shapeElements}\n\t\t\t</svg>\n\t\t</SvgExportContextProvider>\n\t)\n}\n\nfunction ForeignObjectShape({\n\tshape,\n\tutil,\n\tclassName,\n\tcomponent: Component,\n\tbbox,\n\topacity,\n}: {\n\tshape: TLShape\n\tutil: ShapeUtil\n\tclassName?: string\n\tcomponent: ComponentType<{ shape: TLShape; util: ShapeUtil }>\n\tbbox: Box\n\topacity: number\n}) {\n\tconst editor = useEditor()\n\n\tconst transform = Mat.Translate(-bbox.minX, -bbox.minY).multiply(\n\t\teditor.getShapePageTransform(shape.id)!\n\t)\n\n\tconst bounds = editor.getShapeGeometry(shape.id).bounds\n\tconst width = Math.max(bounds.width, 1)\n\tconst height = Math.max(bounds.height, 1)\n\n\treturn (\n\t\t<ErrorBoundary fallback={() => null}>\n\t\t\t<foreignObject\n\t\t\t\tx={bbox.minX}\n\t\t\t\ty={bbox.minY}\n\t\t\t\twidth={bbox.w}\n\t\t\t\theight={bbox.h}\n\t\t\t\tclassName=\"tl-shape-foreign-object tl-export-embed-styles\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tdata-shape-type={shape.type}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tclipPath: editor.getShapeClipPath(shape.id),\n\t\t\t\t\t\ttransform: transform.toCssString(),\n\t\t\t\t\t\twidth,\n\t\t\t\t\t\theight,\n\t\t\t\t\t\topacity,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Component shape={shape} util={util} />\n\t\t\t\t</div>\n\t\t\t</foreignObject>\n\t\t</ErrorBoundary>\n\t)\n}\n"],"names":["state", "scale"],"mappings":"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"}},
    {"offset": {"line": 2492, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/exports/exportToSvg.tsx"],"sourcesContent":["import { TLShapeId } from '@tldraw/tlschema'\nimport { assert } from '@tldraw/utils'\nimport { flushSync } from 'react-dom'\nimport { createRoot } from 'react-dom/client'\nimport { Editor } from '../editor/Editor'\nimport { TLSvgExportOptions } from '../editor/types/misc-types'\nimport { SVG_EXPORT_CLASSNAME } from './FontEmbedder'\nimport { StyleEmbedder } from './StyleEmbedder'\nimport { embedMedia } from './embedMedia'\nimport { getSvgJsx } from './getSvgJsx'\n\nlet idCounter = 1\n\nexport async function exportToSvg(\n\teditor: Editor,\n\tshapeIds: TLShapeId[],\n\topts: TLSvgExportOptions = {}\n) {\n\t// when rendering to SVG, we start by creating a JSX representation of the SVG that we can\n\t// render with react. Hopefully elements will have a `toSvg` method that renders them to SVG,\n\t// but if they don't we'll render their normal HTML content into an svg <foreignObject> element.\n\tconst result = getSvgJsx(editor, shapeIds, opts)\n\tif (!result) return undefined\n\n\t// we need to render that SVG into a real DOM element that's actually laid out in the document.\n\t// without this CSS and layout aren't computed correctly, which we need to make sure any\n\t// <foreignObject> elements have their styles and content inlined correctly.\n\tconst container = editor.getContainer()\n\tconst renderTarget = document.createElement('div')\n\trenderTarget.className = SVG_EXPORT_CLASSNAME\n\t// we hide the element visually, but we don't want it to be focusable or interactive in any way either\n\trenderTarget.inert = true\n\trenderTarget.tabIndex = -1\n\tObject.assign(renderTarget.style, {\n\t\tposition: 'absolute',\n\t\ttop: '0px',\n\t\tleft: '0px',\n\t\twidth: result.width + 'px',\n\t\theight: result.height + 'px',\n\t\tpointerEvents: 'none',\n\t\topacity: 0,\n\t})\n\t// we have to add the element to the document as otherwise styles won't be computed correctly.\n\tcontainer.appendChild(renderTarget)\n\n\t// create a react root...\n\tconst root = createRoot(renderTarget, { identifierPrefix: `export_${idCounter++}_` })\n\ttry {\n\t\t// ...wait for a tick so we know we're not in e.g. a react lifecycle method...\n\t\tawait Promise.resolve()\n\n\t\t// ...and render the SVG into it.\n\t\tflushSync(() => {\n\t\t\troot.render(result.jsx)\n\t\t})\n\n\t\t// Some operations take a while - for example, waiting for an asset to load in. We give\n\t\t// shape authors a way to delay snap-shotting the export until they're ready.\n\t\tawait result.exportDelay.resolve()\n\n\t\t// Extract the rendered SVG element from the react root\n\t\tconst svg = renderTarget.firstElementChild\n\t\tassert(svg instanceof SVGSVGElement, 'Expected an SVG element')\n\n\t\t// And apply any changes to <foreignObject> elements that we need to make. while we're in\n\t\t// the document, these elements work exactly as we'd expect from other dom elements - they\n\t\t// can load external resources, and any stylesheets in the document apply to them as we\n\t\t// would expect them to. But when we pull the SVG into its own file or draw it to a canvas\n\t\t// though, it has to be completely self-contained. We embed any external resources, and\n\t\t// apply any styles directly to the elements themselves.\n\t\tawait applyChangesToForeignObjects(svg)\n\n\t\treturn { svg, width: result.width, height: result.height }\n\t} finally {\n\t\t// eslint-disable-next-line no-restricted-globals\n\t\tsetTimeout(() => {\n\t\t\t// we wait for a cycle of the event loop to allow the svg to be cloned etc. before\n\t\t\t// unmounting\n\t\t\troot.unmount()\n\t\t\tcontainer.removeChild(renderTarget)\n\t\t}, 0)\n\t}\n}\n\nasync function applyChangesToForeignObjects(svg: SVGSVGElement) {\n\t// If any shapes have their own <foreignObject> elements, we don't want to mess with them. Our\n\t// ones that we need to embed will have a class of `tl-export-embed-styles`.\n\tconst foreignObjectChildren = [\n\t\t...svg.querySelectorAll('foreignObject.tl-export-embed-styles > *'),\n\t]\n\tif (!foreignObjectChildren.length) return\n\n\t// StyleEmbedder embeds any CSS - including resources like fonts and images.\n\tconst styleEmbedder = new StyleEmbedder(svg)\n\n\ttry {\n\t\t// begin traversing stylesheets to find @font-face declarations we might need to embed\n\t\tstyleEmbedder.fonts.startFindingCurrentDocumentFontFaces()\n\n\t\t// embed any media elements in the foreignObject children. images will get converted to data\n\t\t// urls, and things like videos will be converted to images.\n\t\tawait Promise.all(foreignObjectChildren.map((el) => embedMedia(el as HTMLElement)))\n\n\t\t// read the computed styles of every element (+ it's children & pseudo-elements) in the\n\t\t// document. we do this in a single pass before we start embedding any CSS stuff to avoid\n\t\t// constantly forcing the browser to recompute styles & layout.\n\t\tfor (const el of foreignObjectChildren) {\n\t\t\tstyleEmbedder.readRootElementStyles(el as HTMLElement)\n\t\t}\n\n\t\t// fetch any resources that we need to embed in the CSS, like background images.\n\t\tawait styleEmbedder.fetchResources()\n\t\tconst fontCss = await styleEmbedder.getFontFaceCss()\n\n\t\t// custom elements that make use of the shadow dom won't be serialized correctly by default:\n\t\t// the contents of the shadow dom will be ignored. once we've read the styles from the\n\t\t// document, we go through and replace any custom elements with plain `<div>`s. as we do so,\n\t\t// we traverse the shadow dom and clone it into the new plain div. any scoped stylesheets\n\t\t// are removed, as we've already read all the computed styles above.\n\t\tstyleEmbedder.unwrapCustomElements()\n\n\t\t// apply the computed styles (with their embedded resources) directly to the elements with\n\t\t// their `style` attribute. Anything that can't be done this way (pseudo-elements) will be\n\t\t// returned as a string of CSS.\n\t\tconst pseudoCss = styleEmbedder.embedStyles()\n\n\t\t// add the CSS to the SVG\n\t\tif (fontCss || pseudoCss) {\n\t\t\tconst style = document.createElementNS('http://www.w3.org/2000/svg', 'style')\n\t\t\tstyle.textContent = `${fontCss}\\n${pseudoCss}`\n\t\t\tsvg.prepend(style)\n\t\t}\n\t} finally {\n\t\tstyleEmbedder.dispose()\n\t}\n}\n"],"names":[],"mappings":";;;;;AACA,SAAS,cAAc;AACvB,SAAS,iBAAiB;AAC1B,SAAS,kBAAkB;AAG3B,SAAS,4BAA4B;AACrC,SAAS,qBAAqB;AAC9B,SAAS,kBAAkB;AAC3B,SAAS,iBAAiB;;;;;;;;AAE1B,IAAI,YAAY;AAEhB,eAAsB,YACrB,MAAA,EACA,QAAA,EACA,OAA2B,CAAC,CAAA,EAC3B;IAID,MAAM,aAAS,mPAAA,EAAU,QAAQ,UAAU,IAAI;IAC/C,IAAI,CAAC,OAAQ,CAAA,OAAO,KAAA;IAKpB,MAAM,YAAY,OAAO,YAAA,CAAa;IACtC,MAAM,eAAe,SAAS,aAAA,CAAc,KAAK;IACjD,aAAa,SAAA,GAAY,iQAAA;IAEzB,aAAa,KAAA,GAAQ;IACrB,aAAa,QAAA,GAAW,CAAA;IACxB,OAAO,MAAA,CAAO,aAAa,KAAA,EAAO;QACjC,UAAU;QACV,KAAK;QACL,MAAM;QACN,OAAO,OAAO,KAAA,GAAQ;QACtB,QAAQ,OAAO,MAAA,GAAS;QACxB,eAAe;QACf,SAAS;IACV,CAAC;IAED,UAAU,WAAA,CAAY,YAAY;IAGlC,MAAM,WAAO,qOAAA,EAAW,cAAc;QAAE,kBAAkB,CAAA,OAAA,EAAU,WAAW,CAAA,CAAA,CAAA;IAAI,CAAC;IACpF,IAAI;QAEH,MAAM,QAAQ,OAAA,CAAQ;QAGtB,IAAA,mOAAA,EAAU,MAAM;YACf,KAAK,MAAA,CAAO,OAAO,GAAG;QACvB,CAAC;QAID,MAAM,OAAO,WAAA,CAAY,OAAA,CAAQ;QAGjC,MAAM,MAAM,aAAa,iBAAA;QACzB,IAAA,kOAAA,EAAO,eAAe,eAAe,yBAAyB;QAQ9D,MAAM,6BAA6B,GAAG;QAEtC,OAAO;YAAE;YAAK,OAAO,OAAO,KAAA;YAAO,QAAQ,OAAO,MAAA;QAAO;IAC1D,SAAE;QAED,WAAW,MAAM;YAGhB,KAAK,OAAA,CAAQ;YACb,UAAU,WAAA,CAAY,YAAY;QACnC,GAAG,CAAC;IACL;AACD;AAEA,eAAe,6BAA6B,GAAA,EAAoB;IAG/D,MAAM,wBAAwB;WAC1B,IAAI,gBAAA,CAAiB,0CAA0C;KACnE;IACA,IAAI,CAAC,sBAAsB,MAAA,CAAQ,CAAA;IAGnC,MAAM,gBAAgB,IAAI,2PAAA,CAAc,GAAG;IAE3C,IAAI;QAEH,cAAc,KAAA,CAAM,oCAAA,CAAqC;QAIzD,MAAM,QAAQ,GAAA,CAAI,sBAAsB,GAAA,CAAI,CAAC,SAAO,qPAAA,EAAW,EAAiB,CAAC,CAAC;QAKlF,KAAA,MAAW,MAAM,sBAAuB;YACvC,cAAc,qBAAA,CAAsB,EAAiB;QACtD;QAGA,MAAM,cAAc,cAAA,CAAe;QACnC,MAAM,UAAU,MAAM,cAAc,cAAA,CAAe;QAOnD,cAAc,oBAAA,CAAqB;QAKnC,MAAM,YAAY,cAAc,WAAA,CAAY;QAG5C,IAAI,WAAW,WAAW;YACzB,MAAM,QAAQ,SAAS,eAAA,CAAgB,8BAA8B,OAAO;YAC5E,MAAM,WAAA,GAAc,GAAG,OAAO,CAAA;AAAA,EAAK,SAAS,EAAA;YAC5C,IAAI,OAAA,CAAQ,KAAK;QAClB;IACD,SAAE;QACD,cAAc,OAAA,CAAQ;IACvB;AACD"}},
    {"offset": {"line": 2586, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/exports/getSvgAsImage.ts"],"sourcesContent":["import { FileHelpers, Image, PngHelpers, sleep } from '@tldraw/utils'\nimport { tlenv } from '../globals/environment'\nimport { clampToBrowserMaxCanvasSize } from '../utils/browserCanvasMaxSize'\nimport { debugFlags } from '../utils/debug-flags'\n\n/** @public */\nexport async function getSvgAsImage(\n\tsvgString: string,\n\toptions: {\n\t\ttype: 'png' | 'jpeg' | 'webp'\n\t\twidth: number\n\t\theight: number\n\t\tquality?: number\n\t\tpixelRatio?: number\n\t}\n) {\n\tconst { type, width, height, quality = 1, pixelRatio = 2 } = options\n\n\tlet [clampedWidth, clampedHeight] = clampToBrowserMaxCanvasSize(\n\t\twidth * pixelRatio,\n\t\theight * pixelRatio\n\t)\n\tclampedWidth = Math.floor(clampedWidth)\n\tclampedHeight = Math.floor(clampedHeight)\n\tconst effectiveScale = clampedWidth / width\n\n\t// usually we would use `URL.createObjectURL` here, but chrome has a bug where `blob:` URLs of\n\t// SVGs that use <foreignObject> mark the canvas as tainted, where data: ones do not.\n\t// https://issues.chromium.org/issues/41054640\n\tconst svgUrl = await FileHelpers.blobToDataUrl(new Blob([svgString], { type: 'image/svg+xml' }))\n\n\tconst canvas = await new Promise<HTMLCanvasElement | null>((resolve) => {\n\t\tconst image = Image()\n\t\timage.crossOrigin = 'anonymous'\n\n\t\timage.onload = async () => {\n\t\t\t// safari will fire `onLoad` before the fonts in the SVG are\n\t\t\t// actually loaded. just waiting around a while is brittle, but\n\t\t\t// there doesn't seem to be any better solution for now :( see\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=219770\n\t\t\tif (tlenv.isSafari) {\n\t\t\t\tawait sleep(250)\n\t\t\t}\n\n\t\t\tconst canvas = document.createElement('canvas') as HTMLCanvasElement\n\t\t\tconst ctx = canvas.getContext('2d')!\n\n\t\t\tcanvas.width = clampedWidth\n\t\t\tcanvas.height = clampedHeight\n\n\t\t\tctx.imageSmoothingEnabled = true\n\t\t\tctx.imageSmoothingQuality = 'high'\n\t\t\tctx.drawImage(image, 0, 0, clampedWidth, clampedHeight)\n\n\t\t\tURL.revokeObjectURL(svgUrl)\n\n\t\t\tresolve(canvas)\n\t\t}\n\n\t\timage.onerror = () => {\n\t\t\tresolve(null)\n\t\t}\n\n\t\timage.src = svgUrl\n\t})\n\n\tif (!canvas) return null\n\n\tconst blob = await new Promise<Blob | null>((resolve) =>\n\t\tcanvas.toBlob(\n\t\t\t(blob) => {\n\t\t\t\tif (!blob || debugFlags.throwToBlob.get()) {\n\t\t\t\t\tresolve(null)\n\t\t\t\t}\n\t\t\t\tresolve(blob)\n\t\t\t},\n\t\t\t'image/' + type,\n\t\t\tquality\n\t\t)\n\t)\n\n\tif (!blob) return null\n\n\tif (type === 'png') {\n\t\tconst view = new DataView(await blob.arrayBuffer())\n\t\treturn PngHelpers.setPhysChunk(view, effectiveScale, {\n\t\t\ttype: 'image/' + type,\n\t\t})\n\t} else {\n\t\treturn blob\n\t}\n}\n"],"names":["canvas", "blob"],"mappings":";;;;;;;;AAAA,SAAS,aAAa,OAAO,YAAY,aAAa;AACtD,SAAS,aAAa;AACtB,SAAS,mCAAmC;AAC5C,SAAS,kBAAkB;;;;;AAG3B,eAAsB,cACrB,SAAA,EACA,OAAA,EAOC;IACD,MAAM,EAAE,IAAA,EAAM,KAAA,EAAO,MAAA,EAAQ,UAAU,CAAA,EAAG,aAAa,CAAA,CAAE,CAAA,GAAI;IAE7D,IAAI,CAAC,cAAc,aAAa,CAAA,OAAI,8QAAA,EACnC,QAAQ,YACR,SAAS;IAEV,eAAe,KAAK,KAAA,CAAM,YAAY;IACtC,gBAAgB,KAAK,KAAA,CAAM,aAAa;IACxC,MAAM,iBAAiB,eAAe;IAKtC,MAAM,SAAS,MAAM,oOAAA,CAAY,aAAA,CAAc,IAAI,KAAK;QAAC,SAAS;KAAA,EAAG;QAAE,MAAM;IAAgB,CAAC,CAAC;IAE/F,MAAM,SAAS,MAAM,IAAI,QAAkC,CAAC,YAAY;QACvE,MAAM,YAAQ,iOAAA,CAAM;QACpB,MAAM,WAAA,GAAc;QAEpB,MAAM,MAAA,GAAS,YAAY;YAK1B,IAAI,iPAAA,CAAM,QAAA,EAAU;gBACnB,UAAM,iOAAA,EAAM,GAAG;YAChB;YAEA,MAAMA,UAAS,SAAS,aAAA,CAAc,QAAQ;YAC9C,MAAM,MAAMA,QAAO,UAAA,CAAW,IAAI;YAElCA,QAAO,KAAA,GAAQ;YACfA,QAAO,MAAA,GAAS;YAEhB,IAAI,qBAAA,GAAwB;YAC5B,IAAI,qBAAA,GAAwB;YAC5B,IAAI,SAAA,CAAU,OAAO,GAAG,GAAG,cAAc,aAAa;YAEtD,IAAI,eAAA,CAAgB,MAAM;YAE1B,QAAQA,OAAM;QACf;QAEA,MAAM,OAAA,GAAU,MAAM;YACrB,QAAQ,IAAI;QACb;QAEA,MAAM,GAAA,GAAM;IACb,CAAC;IAED,IAAI,CAAC,OAAQ,CAAA,OAAO;IAEpB,MAAM,OAAO,MAAM,IAAI,QAAqB,CAAC,UAC5C,OAAO,MAAA,CACN,CAACC,UAAS;YACT,IAAI,CAACA,SAAQ,uPAAA,CAAW,WAAA,CAAY,GAAA,CAAI,GAAG;gBAC1C,QAAQ,IAAI;YACb;YACA,QAAQA,KAAI;QACb,GACA,WAAW,MACX;IAIF,IAAI,CAAC,KAAM,CAAA,OAAO;IAElB,IAAI,SAAS,OAAO;QACnB,MAAM,OAAO,IAAI,SAAS,MAAM,KAAK,WAAA,CAAY,CAAC;QAClD,OAAO,2OAAA,CAAW,YAAA,CAAa,MAAM,gBAAgB;YACpD,MAAM,WAAW;QAClB,CAAC;IACF,OAAO;QACN,OAAO;IACR;AACD"}},
    {"offset": {"line": 2658, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/options.ts"],"sourcesContent":["import { ComponentType, Fragment } from 'react'\nimport { DEFAULT_CAMERA_OPTIONS } from './constants'\nimport { TLCameraOptions } from './editor/types/misc-types'\nimport { TLDeepLinkOptions } from './utils/deepLinks'\nimport { TLTextOptions } from './utils/richText'\n\n/**\n * Options for configuring tldraw. For defaults, see {@link defaultTldrawOptions}.\n *\n * @example\n * ```tsx\n * const options: Partial<TldrawOptions> = {\n *     maxPages: 3,\n *     maxShapesPerPage: 1000,\n * }\n *\n * function MyTldrawComponent() {\n *     return <Tldraw options={options} />\n * }\n * ```\n *\n * @public\n */\nexport interface TldrawOptions {\n\treadonly maxShapesPerPage: number\n\treadonly maxFilesAtOnce: number\n\treadonly maxPages: number\n\treadonly animationMediumMs: number\n\treadonly followChaseViewportSnap: number\n\treadonly doubleClickDurationMs: number\n\treadonly multiClickDurationMs: number\n\treadonly coarseDragDistanceSquared: number\n\treadonly dragDistanceSquared: number\n\treadonly uiDragDistanceSquared: number\n\treadonly uiCoarseDragDistanceSquared: number\n\treadonly defaultSvgPadding: number\n\treadonly cameraSlideFriction: number\n\treadonly gridSteps: readonly {\n\t\treadonly min: number\n\t\treadonly mid: number\n\t\treadonly step: number\n\t}[]\n\treadonly collaboratorInactiveTimeoutMs: number\n\treadonly collaboratorIdleTimeoutMs: number\n\treadonly collaboratorCheckIntervalMs: number\n\treadonly cameraMovingTimeoutMs: number\n\treadonly hitTestMargin: number\n\treadonly edgeScrollDelay: number\n\treadonly edgeScrollEaseDuration: number\n\treadonly edgeScrollSpeed: number\n\treadonly edgeScrollDistance: number\n\treadonly coarsePointerWidth: number\n\treadonly coarseHandleRadius: number\n\treadonly handleRadius: number\n\treadonly longPressDurationMs: number\n\treadonly textShadowLod: number\n\treadonly adjacentShapeMargin: number\n\treadonly flattenImageBoundsExpand: number\n\treadonly flattenImageBoundsPadding: number\n\treadonly laserDelayMs: number\n\t/**\n\t * How long (in milliseconds) to fade all laser scribbles after the session ends.\n\t * The total points across all scribbles will be removed proportionally over this duration.\n\t * Defaults to 500ms (0.5 seconds).\n\t */\n\treadonly laserFadeoutMs: number\n\treadonly maxExportDelayMs: number\n\treadonly tooltipDelayMs: number\n\t/**\n\t * How long should previews created by {@link Editor.createTemporaryAssetPreview} last before\n\t * they expire? Defaults to 3 minutes.\n\t */\n\treadonly temporaryAssetPreviewLifetimeMs: number\n\treadonly actionShortcutsLocation: 'menu' | 'toolbar' | 'swap'\n\treadonly createTextOnCanvasDoubleClick: boolean\n\t/**\n\t * The react provider to use when exporting an image. This is useful if your shapes depend on\n\t * external context providers. By default, this is `React.Fragment`.\n\t */\n\treadonly exportProvider: ComponentType<{ children: React.ReactNode }>\n\t/**\n\t * By default, the toolbar items are accessible via number shortcuts according to their order. To disable this, set this option to false.\n\t */\n\treadonly enableToolbarKeyboardShortcuts: boolean\n\t/**\n\t * The maximum number of fonts that will be loaded while blocking the main rendering of the\n\t * canvas. If there are more than this number of fonts needed, we'll just show the canvas right\n\t * away and let the fonts load in in the background.\n\t */\n\treadonly maxFontsToLoadBeforeRender: number\n\t/**\n\t * If you have a CSP policy that blocks inline styles, you can use this prop to provide a\n\t * nonce to use in the editor's styles.\n\t */\n\treadonly nonce: string | undefined\n\t/**\n\t * Branding name of the app, currently only used for adding aria-label for the application.\n\t */\n\treadonly branding?: string\n\t/**\n\t * Whether to use debounced zoom level for certain rendering optimizations. When true,\n\t * `editor.getEfficientZoomLevel()` returns a cached zoom value while the camera is moving,\n\t * reducing re-renders. When false, it always returns the current zoom level.\n\t */\n\treadonly debouncedZoom: boolean\n\t/**\n\t * The number of shapes that must be on the page for the debounced zoom level to be used.\n\t * Defaults to 500 shapes.\n\t */\n\treadonly debouncedZoomThreshold: number\n\t/**\n\t * Whether to allow spacebar panning. When true, the spacebar will pan the camera when held down.\n\t * When false, the spacebar will not pan the camera.\n\t */\n\treadonly spacebarPanning: boolean\n\t/**\n\t * The default padding (in pixels) used when zooming to fit content in the viewport.\n\t * This affects methods like `zoomToFit()`, `zoomToSelection()`, and `zoomToBounds()`.\n\t * The actual padding used is the minimum of this value and 28% of the viewport width.\n\t * Defaults to 128 pixels.\n\t */\n\treadonly zoomToFitPadding: number\n\t/**\n\t * The distance (in screen pixels) at which shapes snap to guides and other shapes.\n\t */\n\treadonly snapThreshold: number\n\t/**\n\t * Options for the editor's camera. These are the initial camera options.\n\t * Use {@link Editor.setCameraOptions} to update camera options at runtime.\n\t */\n\treadonly camera: Partial<TLCameraOptions>\n\t/**\n\t * Options for the editor's text rendering. These include TipTap configuration and\n\t * font handling. These are the initial text options and cannot be changed at runtime.\n\t */\n\treadonly text: TLTextOptions\n\t/**\n\t * Options for syncing the editor's camera state with the URL. Set to `true` to enable\n\t * with default options, or pass an options object to customize behavior.\n\t *\n\t * @example\n\t * ```tsx\n\t * // Enable with defaults\n\t * <Tldraw options={{ deepLinks: true }} />\n\t *\n\t * // Enable with custom options\n\t * <Tldraw options={{ deepLinks: { param: 'd', debounceMs: 500 } }} />\n\t * ```\n\t */\n\treadonly deepLinks: true | TLDeepLinkOptions | undefined\n\t/**\n\t * Whether the quick-zoom brush preserves its screen-pixel size when the user\n\t * zooms the overview. When true, zooming in shrinks the target viewport (higher\n\t * return zoom); zooming out expands it. When false, the brush keeps the original\n\t * viewport's page dimensions regardless of overview zoom changes.\n\t */\n\treadonly quickZoomPreservesScreenBounds: boolean\n}\n\n/** @public */\nexport const defaultTldrawOptions = {\n\tmaxShapesPerPage: 4000,\n\tmaxFilesAtOnce: 100,\n\tmaxPages: 40,\n\tanimationMediumMs: 320,\n\tfollowChaseViewportSnap: 2,\n\tdoubleClickDurationMs: 450,\n\tmultiClickDurationMs: 200,\n\tcoarseDragDistanceSquared: 36, // 6 squared\n\tdragDistanceSquared: 16, // 4 squared\n\tuiDragDistanceSquared: 16, // 4 squared\n\t// it's really easy to accidentally drag from the toolbar on mobile, so we use a much larger\n\t// threshold than usual here to try and prevent accidental drags.\n\tuiCoarseDragDistanceSquared: 625, // 25 squared\n\tdefaultSvgPadding: 32,\n\tcameraSlideFriction: 0.09,\n\tgridSteps: [\n\t\t{ min: -1, mid: 0.15, step: 64 },\n\t\t{ min: 0.05, mid: 0.375, step: 16 },\n\t\t{ min: 0.15, mid: 1, step: 4 },\n\t\t{ min: 0.7, mid: 2.5, step: 1 },\n\t],\n\tcollaboratorInactiveTimeoutMs: 60000,\n\tcollaboratorIdleTimeoutMs: 3000,\n\tcollaboratorCheckIntervalMs: 1200,\n\tcameraMovingTimeoutMs: 64,\n\thitTestMargin: 8,\n\tedgeScrollDelay: 200,\n\tedgeScrollEaseDuration: 200,\n\tedgeScrollSpeed: 25,\n\tedgeScrollDistance: 8,\n\tcoarsePointerWidth: 12,\n\tcoarseHandleRadius: 20,\n\thandleRadius: 12,\n\tlongPressDurationMs: 500,\n\ttextShadowLod: 0.35,\n\tadjacentShapeMargin: 10,\n\tflattenImageBoundsExpand: 64,\n\tflattenImageBoundsPadding: 16,\n\tlaserDelayMs: 1200,\n\tlaserFadeoutMs: 500,\n\tmaxExportDelayMs: 5000,\n\ttooltipDelayMs: 700,\n\ttemporaryAssetPreviewLifetimeMs: 180000,\n\tactionShortcutsLocation: 'swap',\n\tcreateTextOnCanvasDoubleClick: true,\n\texportProvider: Fragment,\n\tenableToolbarKeyboardShortcuts: true,\n\tmaxFontsToLoadBeforeRender: Infinity,\n\tnonce: undefined,\n\tdebouncedZoom: true,\n\tdebouncedZoomThreshold: 500,\n\tspacebarPanning: true,\n\tzoomToFitPadding: 128,\n\tsnapThreshold: 8,\n\tcamera: DEFAULT_CAMERA_OPTIONS,\n\ttext: {},\n\tdeepLinks: undefined,\n\tquickZoomPreservesScreenBounds: true,\n} as const satisfies TldrawOptions\n"],"names":[],"mappings":";;;;AAAA,SAAwB,gBAAgB;AACxC,SAAS,8BAA8B;;;AA+JhC,MAAM,uBAAuB;IACnC,kBAAkB;IAClB,gBAAgB;IAChB,UAAU;IACV,mBAAmB;IACnB,yBAAyB;IACzB,uBAAuB;IACvB,sBAAsB;IACtB,2BAA2B;IAAA,YAAA;IAC3B,qBAAqB;IAAA,YAAA;IACrB,uBAAuB;IAAA,YAAA;IAAA,4FAAA;IAAA,iEAAA;IAGvB,6BAA6B;IAAA,aAAA;IAC7B,mBAAmB;IACnB,qBAAqB;IACrB,WAAW;QACV;YAAE,KAAK,CAAA;YAAI,KAAK;YAAM,MAAM;QAAG;QAC/B;YAAE,KAAK;YAAM,KAAK;YAAO,MAAM;QAAG;QAClC;YAAE,KAAK;YAAM,KAAK;YAAG,MAAM;QAAE;QAC7B;YAAE,KAAK;YAAK,KAAK;YAAK,MAAM;QAAE;KAC/B;IACA,+BAA+B;IAC/B,2BAA2B;IAC3B,6BAA6B;IAC7B,uBAAuB;IACvB,eAAe;IACf,iBAAiB;IACjB,wBAAwB;IACxB,iBAAiB;IACjB,oBAAoB;IACpB,oBAAoB;IACpB,oBAAoB;IACpB,cAAc;IACd,qBAAqB;IACrB,eAAe;IACf,qBAAqB;IACrB,0BAA0B;IAC1B,2BAA2B;IAC3B,cAAc;IACd,gBAAgB;IAChB,kBAAkB;IAClB,gBAAgB;IAChB,iCAAiC;IACjC,yBAAyB;IACzB,+BAA+B;IAC/B,gBAAgB,2NAAA;IAChB,gCAAgC;IAChC,4BAA4B;IAC5B,OAAO,KAAA;IACP,eAAe;IACf,wBAAwB;IACxB,iBAAiB;IACjB,kBAAkB;IAClB,eAAe;IACf,QAAQ,qPAAA;IACR,MAAM,CAAC;IACP,WAAW,KAAA;IACX,gCAAgC;AACjC"}},
    {"offset": {"line": 2752, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/license/LicenseManager.ts"],"sourcesContent":["import { atom } from '@tldraw/state'\nimport { publishDates, version } from '../../version'\nimport { getDefaultCdnBaseUrl } from '../utils/assets'\nimport { importPublicKey, str2ab } from '../utils/licensing'\n\nconst GRACE_PERIOD_DAYS = 30\n\nexport const FLAGS = {\n\t// -- MUTUALLY EXCLUSIVE FLAGS --\n\t// Annual means the license expires after a time period, usually 1 year.\n\tANNUAL_LICENSE: 1,\n\t// Perpetual means the license never expires up to the max supported version.\n\tPERPETUAL_LICENSE: 1 << 1,\n\n\t// -- ADDITIVE FLAGS --\n\t// Internal means the license is for internal use only.\n\tINTERNAL_LICENSE: 1 << 2,\n\t// Watermark means the product is watermarked.\n\tWITH_WATERMARK: 1 << 3,\n\t// Evaluation means the license is for evaluation purposes only.\n\tEVALUATION_LICENSE: 1 << 4,\n\t// Native means the license is for native apps which switches\n\t// on special-case logic.\n\tNATIVE_LICENSE: 1 << 5,\n}\nconst HIGHEST_FLAG = Math.max(...Object.values(FLAGS))\n\nexport const PROPERTIES = {\n\tID: 0,\n\tHOSTS: 1,\n\tFLAGS: 2,\n\tEXPIRY_DATE: 3,\n}\nconst NUMBER_OF_KNOWN_PROPERTIES = Object.keys(PROPERTIES).length\n\nconst LICENSE_EMAIL = 'sales@tldraw.com'\n\nconst WATERMARK_TRACK_SRC = `${getDefaultCdnBaseUrl()}/watermarks/watermark-track.svg`\n\n/** @internal */\nexport interface LicenseInfo {\n\tid: string\n\thosts: string[]\n\tflags: number\n\texpiryDate: string\n}\n\n/** @internal */\nexport type LicenseState =\n\t| 'pending' // License validation is in progress\n\t| 'licensed' // License is valid and active (no restrictions)\n\t| 'licensed-with-watermark' // License is valid but shows watermark (evaluation licenses, WITH_WATERMARK licenses)\n\t| 'unlicensed' // No valid license found or license is invalid (development)\n\t| 'unlicensed-production' // No valid license in production deployment (missing, invalid, or wrong domain)\n\t| 'expired' // License has been expired (30 days past expiration for regular licenses, immediately for evaluation licenses)\n/** @internal */\nexport type InvalidLicenseReason =\n\t| 'invalid-license-key'\n\t| 'no-key-provided'\n\t| 'has-key-development-mode'\n\n/** @internal */\nexport type LicenseFromKeyResult = InvalidLicenseKeyResult | ValidLicenseKeyResult\n\n/** @internal */\nexport interface InvalidLicenseKeyResult {\n\tisLicenseParseable: false\n\treason: InvalidLicenseReason\n}\n\n/** @internal */\nexport interface ValidLicenseKeyResult {\n\tisLicenseParseable: true\n\tlicense: LicenseInfo\n\tisDevelopment: boolean\n\tisDomainValid: boolean\n\texpiryDate: Date\n\tisAnnualLicense: boolean\n\tisAnnualLicenseExpired: boolean\n\tisPerpetualLicense: boolean\n\tisPerpetualLicenseExpired: boolean\n\tisInternalLicense: boolean\n\tisNativeLicense: boolean\n\tisLicensedWithWatermark: boolean\n\tisEvaluationLicense: boolean\n\tisEvaluationLicenseExpired: boolean\n\tdaysSinceExpiry: number\n}\n\n/** @internal */\nexport type TrackType = 'unlicensed' | 'with_watermark' | 'evaluation' | null\n\n/** @internal */\nexport class LicenseManager {\n\tprivate publicKey =\n\t\t'MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEHJh0uUfxHtCGyerXmmatE368Hd9rI6LH9oPDQihnaCryRFWEVeOvf9U/SPbyxX74LFyJs5tYeAHq5Nc0Ax25LQ'\n\tpublic isDevelopment: boolean\n\tpublic isTest: boolean\n\tpublic isCryptoAvailable: boolean\n\tstate = atom<LicenseState>('license state', 'pending')\n\tpublic verbose = true\n\n\tconstructor(licenseKey: string | undefined, testPublicKey?: string) {\n\t\tthis.isTest = process.env.NODE_ENV === 'test'\n\t\tthis.isDevelopment = this.getIsDevelopment()\n\t\tthis.publicKey = testPublicKey || this.publicKey\n\t\tthis.isCryptoAvailable = !!crypto.subtle\n\n\t\tthis.getLicenseFromKey(licenseKey)\n\t\t\t.then((result) => {\n\t\t\t\tconst licenseState = getLicenseState(\n\t\t\t\t\tresult,\n\t\t\t\t\t(messages: string[]) => this.outputMessages(messages),\n\t\t\t\t\tthis.isDevelopment\n\t\t\t\t)\n\n\t\t\t\tthis.maybeTrack(result, licenseState)\n\n\t\t\t\tthis.state.set(licenseState)\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error('License validation failed:', error)\n\t\t\t\tthis.state.set('unlicensed')\n\t\t\t})\n\t}\n\n\tprivate getIsDevelopment() {\n\t\t// If we are using https on a non-localhost domain we assume it's a production env and a development one otherwise\n\t\treturn (\n\t\t\t!['https:', 'vscode-webview:'].includes(window.location.protocol) ||\n\t\t\twindow.location.hostname === 'localhost' ||\n\t\t\tprocess.env.NODE_ENV !== 'production'\n\t\t)\n\t}\n\n\tprivate getTrackType(result: LicenseFromKeyResult, licenseState: LicenseState): TrackType {\n\t\t// Track watermark for unlicensed production deployments\n\t\tif (licenseState === 'unlicensed-production') {\n\t\t\treturn 'unlicensed'\n\t\t}\n\n\t\tif (this.isDevelopment) {\n\t\t\treturn null\n\t\t}\n\n\t\tif (!result.isLicenseParseable) {\n\t\t\treturn null\n\t\t}\n\n\t\t// Track evaluation licenses (for analytics, even though no watermark is shown)\n\t\tif (result.isEvaluationLicense) {\n\t\t\treturn 'evaluation'\n\t\t}\n\n\t\t// Track licenses that show watermarks\n\t\tif (licenseState === 'licensed-with-watermark') {\n\t\t\treturn 'with_watermark'\n\t\t}\n\n\t\treturn null\n\t}\n\n\tprivate maybeTrack(result: LicenseFromKeyResult, licenseState: LicenseState): void {\n\t\tconst trackType = this.getTrackType(result, licenseState)\n\t\tif (!trackType) {\n\t\t\treturn\n\t\t}\n\n\t\tconst url = new URL(WATERMARK_TRACK_SRC)\n\t\turl.searchParams.set('version', version)\n\t\turl.searchParams.set('license_type', trackType)\n\t\tif ('license' in result) {\n\t\t\turl.searchParams.set('license_id', result.license.id)\n\t\t\tconst sku = this.isFlagEnabled(result.license.flags, FLAGS.EVALUATION_LICENSE)\n\t\t\t\t? 'evaluation'\n\t\t\t\t: this.isFlagEnabled(result.license.flags, FLAGS.ANNUAL_LICENSE)\n\t\t\t\t\t? 'annual'\n\t\t\t\t\t: this.isFlagEnabled(result.license.flags, FLAGS.PERPETUAL_LICENSE)\n\t\t\t\t\t\t? 'perpetual'\n\t\t\t\t\t\t: 'unknown'\n\t\t\turl.searchParams.set('sku', sku)\n\t\t}\n\t\turl.searchParams.set('url', window.location.href)\n\t\tif (process.env.NODE_ENV) {\n\t\t\turl.searchParams.set('environment', process.env.NODE_ENV)\n\t\t}\n\n\t\t// eslint-disable-next-line no-restricted-globals\n\t\tfetch(url.toString())\n\t}\n\n\tprivate async extractLicenseKey(licenseKey: string): Promise<LicenseInfo> {\n\t\tconst [data, signature] = licenseKey.split('.')\n\t\tconst [prefix, encodedData] = data.split('/')\n\n\t\tif (!prefix.startsWith('tldraw-')) {\n\t\t\tthrow new Error(`Unsupported prefix '${prefix}'`)\n\t\t}\n\n\t\tconst publicCryptoKey = await importPublicKey(this.publicKey)\n\n\t\tlet isVerified\n\t\ttry {\n\t\t\tisVerified = await crypto.subtle.verify(\n\t\t\t\t{\n\t\t\t\t\tname: 'ECDSA',\n\t\t\t\t\thash: { name: 'SHA-256' },\n\t\t\t\t},\n\t\t\t\tpublicCryptoKey,\n\t\t\t\tnew Uint8Array(str2ab(atob(signature))),\n\t\t\t\tnew Uint8Array(str2ab(atob(encodedData)))\n\t\t\t)\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t\tthrow new Error('Could not perform signature validation')\n\t\t}\n\n\t\tif (!isVerified) {\n\t\t\tthrow new Error('Invalid signature')\n\t\t}\n\n\t\tlet decodedData: any\n\t\ttry {\n\t\t\tdecodedData = JSON.parse(atob(encodedData))\n\t\t} catch {\n\t\t\tthrow new Error('Could not parse object')\n\t\t}\n\t\tif (decodedData.length > NUMBER_OF_KNOWN_PROPERTIES) {\n\t\t\tthis.outputMessages([\n\t\t\t\t'License key contains some unknown properties.',\n\t\t\t\t'You may want to update tldraw packages to a newer version to get access to new functionality.',\n\t\t\t])\n\t\t}\n\n\t\treturn {\n\t\t\tid: decodedData[PROPERTIES.ID],\n\t\t\thosts: decodedData[PROPERTIES.HOSTS],\n\t\t\tflags: decodedData[PROPERTIES.FLAGS],\n\t\t\texpiryDate: decodedData[PROPERTIES.EXPIRY_DATE],\n\t\t}\n\t}\n\n\tasync getLicenseFromKey(licenseKey?: string): Promise<LicenseFromKeyResult> {\n\t\tif (!licenseKey) {\n\t\t\tif (!this.isDevelopment) {\n\t\t\t\tthis.outputNoLicenseKeyProvided()\n\t\t\t}\n\n\t\t\treturn { isLicenseParseable: false, reason: 'no-key-provided' }\n\t\t}\n\n\t\tif (this.isDevelopment && !this.isCryptoAvailable) {\n\t\t\tif (this.verbose) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log(\n\t\t\t\t\t'tldraw: you seem to be in a development environment that does not support crypto. License not verified.'\n\t\t\t\t)\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log('You should check that this works in production separately.')\n\t\t\t}\n\t\t\t// We can't parse the license if we are in development mode since crypto\n\t\t\t// is not available on http\n\t\t\treturn { isLicenseParseable: false, reason: 'has-key-development-mode' }\n\t\t}\n\n\t\t// Borrowed idea from AG Grid:\n\t\t// Copying from various sources (like PDFs) can include zero-width characters.\n\t\t// This helps makes sure the key validation doesn't fail.\n\t\tlet cleanedLicenseKey = licenseKey.replace(/[\\u200B-\\u200D\\uFEFF]/g, '')\n\t\tcleanedLicenseKey = cleanedLicenseKey.replace(/\\r?\\n|\\r/g, '')\n\n\t\ttry {\n\t\t\tconst licenseInfo = await this.extractLicenseKey(cleanedLicenseKey)\n\t\t\tconst expiryDate = new Date(licenseInfo.expiryDate)\n\t\t\tconst isAnnualLicense = this.isFlagEnabled(licenseInfo.flags, FLAGS.ANNUAL_LICENSE)\n\t\t\tconst isPerpetualLicense = this.isFlagEnabled(licenseInfo.flags, FLAGS.PERPETUAL_LICENSE)\n\n\t\t\tconst isEvaluationLicense = this.isFlagEnabled(licenseInfo.flags, FLAGS.EVALUATION_LICENSE)\n\t\t\tconst daysSinceExpiry = this.getDaysSinceExpiry(expiryDate)\n\n\t\t\tconst result: ValidLicenseKeyResult = {\n\t\t\t\tlicense: licenseInfo,\n\t\t\t\tisLicenseParseable: true,\n\t\t\t\tisDevelopment: this.isDevelopment,\n\t\t\t\tisDomainValid: this.isDomainValid(licenseInfo),\n\t\t\t\texpiryDate,\n\t\t\t\tisAnnualLicense,\n\t\t\t\tisAnnualLicenseExpired: isAnnualLicense && this.isAnnualLicenseExpired(expiryDate),\n\t\t\t\tisPerpetualLicense,\n\t\t\t\tisPerpetualLicenseExpired: isPerpetualLicense && this.isPerpetualLicenseExpired(expiryDate),\n\t\t\t\tisInternalLicense: this.isFlagEnabled(licenseInfo.flags, FLAGS.INTERNAL_LICENSE),\n\t\t\t\tisNativeLicense: this.isNativeLicense(licenseInfo),\n\t\t\t\tisLicensedWithWatermark: this.isFlagEnabled(licenseInfo.flags, FLAGS.WITH_WATERMARK),\n\t\t\t\tisEvaluationLicense,\n\t\t\t\tisEvaluationLicenseExpired:\n\t\t\t\t\tisEvaluationLicense && this.isEvaluationLicenseExpired(expiryDate),\n\t\t\t\tdaysSinceExpiry,\n\t\t\t}\n\t\t\tthis.outputLicenseInfoIfNeeded(result)\n\n\t\t\treturn result\n\t\t} catch (e: any) {\n\t\t\tthis.outputInvalidLicenseKey(e.message)\n\t\t\t// If the license can't be parsed, it's invalid\n\t\t\treturn { isLicenseParseable: false, reason: 'invalid-license-key' }\n\t\t}\n\t}\n\n\tprivate isDomainValid(licenseInfo: LicenseInfo) {\n\t\tconst currentHostname = window.location.hostname.toLowerCase()\n\n\t\treturn licenseInfo.hosts.some((host) => {\n\t\t\tconst normalizedHostOrUrlRegex = host.toLowerCase().trim()\n\n\t\t\t// Allow the domain if listed and www variations, 'example.com' allows 'example.com' and 'www.example.com'\n\t\t\tif (\n\t\t\t\tnormalizedHostOrUrlRegex === currentHostname ||\n\t\t\t\t`www.${normalizedHostOrUrlRegex}` === currentHostname ||\n\t\t\t\tnormalizedHostOrUrlRegex === `www.${currentHostname}`\n\t\t\t) {\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\t// If host is '*', we allow all domains.\n\t\t\tif (host === '*') {\n\t\t\t\t// All domains allowed.\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\t// Native license support\n\t\t\t// In this case, `normalizedHost` is actually a protocol, e.g. `app-bundle:`\n\t\t\tif (this.isNativeLicense(licenseInfo)) {\n\t\t\t\treturn new RegExp(normalizedHostOrUrlRegex).test(window.location.href)\n\t\t\t}\n\n\t\t\t// Glob testing, we only support '*.somedomain.com' right now.\n\t\t\tif (host.includes('*')) {\n\t\t\t\tconst globToRegex = new RegExp(host.replace(/\\*/g, '.*?'))\n\t\t\t\treturn globToRegex.test(currentHostname) || globToRegex.test(`www.${currentHostname}`)\n\t\t\t}\n\n\t\t\t// VSCode support\n\t\t\tif (window.location.protocol === 'vscode-webview:') {\n\t\t\t\tconst currentUrl = new URL(window.location.href)\n\t\t\t\tconst extensionId = currentUrl.searchParams.get('extensionId')\n\t\t\t\tif (normalizedHostOrUrlRegex === extensionId) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false\n\t\t})\n\t}\n\n\tprivate isNativeLicense(licenseInfo: LicenseInfo) {\n\t\treturn this.isFlagEnabled(licenseInfo.flags, FLAGS.NATIVE_LICENSE)\n\t}\n\n\tprivate getExpirationDateWithoutGracePeriod(expiryDate: Date) {\n\t\treturn new Date(expiryDate.getFullYear(), expiryDate.getMonth(), expiryDate.getDate())\n\t}\n\n\tprivate getExpirationDateWithGracePeriod(expiryDate: Date) {\n\t\treturn new Date(\n\t\t\texpiryDate.getFullYear(),\n\t\t\texpiryDate.getMonth(),\n\t\t\texpiryDate.getDate() + GRACE_PERIOD_DAYS + 1 // Add 1 day to include the expiration day\n\t\t)\n\t}\n\n\tprivate isAnnualLicenseExpired(expiryDate: Date) {\n\t\tconst expiration = this.getExpirationDateWithGracePeriod(expiryDate)\n\t\treturn new Date() >= expiration\n\t}\n\n\tprivate isPerpetualLicenseExpired(expiryDate: Date) {\n\t\tconst expiration = this.getExpirationDateWithGracePeriod(expiryDate)\n\t\tconst dates = {\n\t\t\tmajor: new Date(publishDates.major),\n\t\t\tminor: new Date(publishDates.minor),\n\t\t}\n\t\t// We allow patch releases, but the major and minor releases should be within the expiration date\n\t\treturn dates.major >= expiration || dates.minor >= expiration\n\t}\n\n\tprivate getDaysSinceExpiry(expiryDate: Date): number {\n\t\tconst now = new Date()\n\t\tconst expiration = this.getExpirationDateWithoutGracePeriod(expiryDate)\n\t\tconst diffTime = now.getTime() - expiration.getTime()\n\t\tconst diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24))\n\t\treturn Math.max(0, diffDays)\n\t}\n\n\tprivate isEvaluationLicenseExpired(expiryDate: Date): boolean {\n\t\t// Evaluation licenses have no grace period - they expire immediately\n\t\tconst now = new Date()\n\t\tconst expiration = this.getExpirationDateWithoutGracePeriod(expiryDate)\n\t\treturn now >= expiration\n\t}\n\n\tprivate isFlagEnabled(flags: number, flag: number) {\n\t\treturn (flags & flag) === flag\n\t}\n\n\tprivate outputNoLicenseKeyProvided() {\n\t\t// Noop, we don't need to show this message.\n\t\t// this.outputMessages([\n\t\t// \t'No tldraw license key provided!',\n\t\t// \t`Please reach out to ${LICENSE_EMAIL} if you would like to license tldraw or if you'd like a trial.`,\n\t\t// ])\n\t}\n\n\tprivate outputInvalidLicenseKey(msg: string) {\n\t\tthis.outputMessages(['Invalid tldraw license key', `Reason: ${msg}`])\n\t}\n\n\tprivate outputLicenseInfoIfNeeded(result: ValidLicenseKeyResult) {\n\t\t// If we added a new flag it will be twice the value of the currently highest flag.\n\t\t// And if all the current flags are on we would get the `HIGHEST_FLAG * 2 - 1`, so anything higher than that means there are new flags.\n\t\tif (result.license.flags >= HIGHEST_FLAG * 2) {\n\t\t\tthis.outputMessages(\n\t\t\t\t[\n\t\t\t\t\t'Warning: This tldraw license contains some unknown flags.',\n\t\t\t\t\t'This will still work, however, you may want to update tldraw packages to a newer version to get access to new functionality.',\n\t\t\t\t],\n\t\t\t\t'warning'\n\t\t\t)\n\t\t}\n\t}\n\n\tprivate outputMessages(messages: string[], type: 'warning' | 'error' = 'error') {\n\t\tif (this.isTest) return\n\t\tif (this.verbose) {\n\t\t\tthis.outputDelimiter(type)\n\t\t\tfor (const message of messages) {\n\t\t\t\tconst bgColor = type === 'warning' ? 'orange' : 'crimson'\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log(\n\t\t\t\t\t`%c${message}`,\n\t\t\t\t\t`color: white; background: ${bgColor}; padding: 2px; border-radius: 3px;`\n\t\t\t\t)\n\t\t\t}\n\t\t\tthis.outputDelimiter(type)\n\t\t}\n\t}\n\n\tprivate outputDelimiter(type: 'warning' | 'error' = 'error') {\n\t\tconst bgColor = type === 'warning' ? 'orange' : 'crimson'\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.log(\n\t\t\t'%c-------------------------------------------------------------------',\n\t\t\t`color: white; background: ${bgColor}; padding: 2px; border-radius: 3px;`\n\t\t)\n\t}\n\n\tstatic className = 'tl-watermark_SEE-LICENSE'\n}\n\nexport function getLicenseState(\n\tresult: LicenseFromKeyResult,\n\toutputMessages: (messages: string[]) => void,\n\tisDevelopment: boolean\n): LicenseState {\n\tif (!result.isLicenseParseable) {\n\t\tif (isDevelopment) {\n\t\t\treturn 'unlicensed'\n\t\t}\n\n\t\t// All unlicensed scenarios should not work in production\n\t\tif (result.reason === 'no-key-provided') {\n\t\t\toutputMessages([\n\t\t\t\t'No tldraw license key provided!',\n\t\t\t\t'A license is required for production deployments.',\n\t\t\t\t`Please reach out to ${LICENSE_EMAIL} to purchase a license.`,\n\t\t\t])\n\t\t} else {\n\t\t\toutputMessages([\n\t\t\t\t'Invalid license key. tldraw requires a valid license for production use.',\n\t\t\t\t`Please reach out to ${LICENSE_EMAIL} to purchase a license.`,\n\t\t\t])\n\t\t}\n\t\treturn 'unlicensed-production'\n\t}\n\n\tif (!result.isDomainValid && !result.isDevelopment) {\n\t\toutputMessages([\n\t\t\t'License key is not valid for this domain.',\n\t\t\t'A license is required for production deployments.',\n\t\t\t`Please reach out to ${LICENSE_EMAIL} to purchase a license.`,\n\t\t])\n\t\treturn 'unlicensed-production'\n\t}\n\n\t// Handle evaluation licenses - they expire immediately with no grace period\n\tif (result.isEvaluationLicense) {\n\t\tif (result.isEvaluationLicenseExpired) {\n\t\t\toutputMessages([\n\t\t\t\t'Your tldraw evaluation license has expired!',\n\t\t\t\t`Please reach out to ${LICENSE_EMAIL} to purchase a full license.`,\n\t\t\t])\n\t\t\treturn 'expired'\n\t\t} else {\n\t\t\t// Valid evaluation license - tracked but no watermark shown\n\t\t\treturn 'licensed'\n\t\t}\n\t}\n\n\t// Handle expired regular licenses (both annual and perpetual)\n\tif (result.isPerpetualLicenseExpired || result.isAnnualLicenseExpired) {\n\t\toutputMessages([\n\t\t\t'Your tldraw license has been expired for more than 30 days!',\n\t\t\t`Please reach out to ${LICENSE_EMAIL} to renew your license.`,\n\t\t])\n\t\treturn 'expired'\n\t}\n\n\t// Check if license is past expiry date but within grace period\n\tconst daysSinceExpiry = result.daysSinceExpiry\n\tif (daysSinceExpiry > 0 && !result.isEvaluationLicense) {\n\t\toutputMessages([\n\t\t\t'Your tldraw license has expired.',\n\t\t\t`License expired ${daysSinceExpiry} days ago.`,\n\t\t\t`Please reach out to ${LICENSE_EMAIL} to renew your license.`,\n\t\t])\n\t\t// Within 30-day grace period: still licensed (no watermark)\n\t\treturn 'licensed'\n\t}\n\n\t// License is valid, determine if it has watermark\n\tif (result.isLicensedWithWatermark) {\n\t\treturn 'licensed-with-watermark'\n\t}\n\n\treturn 'licensed'\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3121, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/license/LicenseProvider.tsx"],"sourcesContent":["import { useValue } from '@tldraw/state-react'\nimport { createContext, ReactNode, useContext, useEffect, useState } from 'react'\nimport { LicenseManager } from './LicenseManager'\n\n/** @internal */\nexport const LicenseContext = createContext({} as LicenseManager)\n\n/** @internal */\nexport const useLicenseContext = () => useContext(LicenseContext)\n\nfunction shouldHideEditorAfterDelay(licenseState: string): boolean {\n\treturn licenseState === 'expired' || licenseState === 'unlicensed-production'\n}\n\n/** @internal */\nexport const LICENSE_TIMEOUT = 5000\n\n/** @internal */\nexport function LicenseProvider({\n\tlicenseKey = getLicenseKeyFromEnv() ?? undefined,\n\tchildren,\n}: {\n\tlicenseKey?: string\n\tchildren: ReactNode\n}) {\n\tconst [licenseManager] = useState(() => new LicenseManager(licenseKey))\n\tconst licenseState = useValue(licenseManager.state)\n\tconst [showEditor, setShowEditor] = useState(true)\n\n\t// When license expires or no license in production, show for 5 seconds then hide\n\tuseEffect(() => {\n\t\tif (shouldHideEditorAfterDelay(licenseState) && showEditor) {\n\t\t\t// eslint-disable-next-line no-restricted-globals\n\t\t\tconst timer = setTimeout(() => {\n\t\t\t\tsetShowEditor(false)\n\t\t\t}, LICENSE_TIMEOUT)\n\n\t\t\treturn () => clearTimeout(timer)\n\t\t}\n\t}, [licenseState, showEditor])\n\n\t// If license is expired or no license in production and 5 seconds have passed, don't render anything (blank screen)\n\tif (shouldHideEditorAfterDelay(licenseState) && !showEditor) {\n\t\treturn <LicenseGate />\n\t}\n\n\treturn <LicenseContext.Provider value={licenseManager}>{children}</LicenseContext.Provider>\n}\n\n// Renders as a hidden div that can be detected by tests\nfunction LicenseGate() {\n\treturn <div data-testid=\"tl-license-expired\" style={{ display: 'none' }} />\n}\n\nlet envLicenseKey: string | undefined | null = undefined\nfunction getLicenseKeyFromEnv() {\n\tif (envLicenseKey !== undefined) {\n\t\treturn envLicenseKey\n\t}\n\t// it's important here that we write out the full process.env.WHATEVER expression instead of\n\t// doing something like process.env[someVariable]. This is because most bundlers do something\n\t// like a find-replace inject environment variables, and so won't pick up on dynamic ones. It\n\t// also means we can't do checks like `process.env && process.env.WHATEVER`, which is why we use\n\t// the `getEnv` try/catch approach.\n\n\t// framework-specific prefixes borrowed from the ones vercel uses, but trimmed down to just the\n\t// react-y ones: https://vercel.com/docs/environment-variables/framework-environment-variables\n\tenvLicenseKey =\n\t\tgetEnv(() => process.env.TLDRAW_LICENSE_KEY) ||\n\t\tgetEnv(() => process.env.NEXT_PUBLIC_TLDRAW_LICENSE_KEY) ||\n\t\tgetEnv(() => process.env.REACT_APP_TLDRAW_LICENSE_KEY) ||\n\t\tgetEnv(() => process.env.GATSBY_TLDRAW_LICENSE_KEY) ||\n\t\tgetEnv(() => process.env.VITE_TLDRAW_LICENSE_KEY) ||\n\t\tgetEnv(() => process.env.PUBLIC_TLDRAW_LICENSE_KEY) ||\n\t\tgetEnv(() => (import.meta as any).env.TLDRAW_LICENSE_KEY) ||\n\t\tgetEnv(() => (import.meta as any).env.NEXT_PUBLIC_TLDRAW_LICENSE_KEY) ||\n\t\tgetEnv(() => (import.meta as any).env.REACT_APP_TLDRAW_LICENSE_KEY) ||\n\t\tgetEnv(() => (import.meta as any).env.GATSBY_TLDRAW_LICENSE_KEY) ||\n\t\tgetEnv(() => (import.meta as any).env.VITE_TLDRAW_LICENSE_KEY) ||\n\t\tgetEnv(() => (import.meta as any).env.PUBLIC_TLDRAW_LICENSE_KEY) ||\n\t\tnull\n\n\treturn envLicenseKey\n}\n\nfunction getEnv(cb: () => string | undefined) {\n\ttry {\n\t\treturn cb()\n\t} catch {\n\t\treturn undefined\n\t}\n}\n"],"names":[],"mappings":";;;;;;;;;;AAoEe;AAzBN;AA3CT,SAAS,gBAAgB;;AACzB,SAAS,eAA0B,YAAY,WAAW,gBAAgB;AAC1E,SAAS,sBAAsB;;;;;;;;;;AAGxB,MAAM,qBAAiB,gOAAA,EAAc,CAAC,CAAmB;AAGzD,MAAM,oBAAoB,QAAM,6NAAA,EAAW,cAAc;AAEhE,SAAS,2BAA2B,YAAA,EAA+B;IAClE,OAAO,iBAAiB,aAAa,iBAAiB;AACvD;AAGO,MAAM,kBAAkB;AAGxB,SAAS,gBAAgB,EAC/B,aAAa,qBAAqB,KAAK,KAAA,CAAA,EACvC,QAAA,EACD,EAGG;IACF,MAAM,CAAC,cAAc,CAAA,GAAI,+NAAA;oCAAS,IAAM,IAAI,6PAAA,CAAe,UAAU,CAAC;;IACtE,MAAM,mBAAe,8OAAA,EAAS,eAAe,KAAK;IAClD,MAAM,CAAC,YAAY,aAAa,CAAA,OAAI,2NAAA,EAAS,IAAI;IAGjD,IAAA,4NAAA;qCAAU,MAAM;YACf,IAAI,2BAA2B,YAAY,KAAK,YAAY;gBAE3D,MAAM,QAAQ;uDAAW,MAAM;wBAC9B,cAAc,KAAK;oBACpB;sDAAG,eAAe;gBAElB;iDAAO,IAAM,aAAa,KAAK;;YAChC;QACD;oCAAG;QAAC;QAAc,UAAU;KAAC;IAG7B,IAAI,2BAA2B,YAAY,KAAK,CAAC,YAAY;QAC5D,OAAO,aAAA,GAAA,IAAA,+NAAA,EAAC,aAAA,CAAA,CAAY;IACrB;IAEA,OAAO,aAAA,GAAA,IAAA,+NAAA,EAAC,eAAe,QAAA,EAAf;QAAwB,OAAO;QAAiB;IAAA,CAAS;AAClE;AAGA,SAAS,cAAc;IACtB,OAAO,aAAA,GAAA,IAAA,+NAAA,EAAC,OAAA;QAAI,eAAY;QAAqB,OAAO;YAAE,SAAS;QAAO;IAAA,CAAG;AAC1E;AAEA,IAAI,gBAA2C,KAAA;AAC/C,SAAS,uBAAuB;IAC/B,IAAI,kBAAkB,KAAA,GAAW;QAChC,OAAO;IACR;IASA,gBACC,OAAO,iOAAM,CAAQ,GAAA,CAAI,kBAAkB,KAC3C,OAAO,IAAM,6NAAA,CAAQ,GAAA,CAAI,8BAA8B,KACvD,OAAO,IAAM,6NAAA,CAAQ,GAAA,CAAI,4BAA4B,KACrD,OAAO,IAAM,6NAAA,CAAQ,GAAA,CAAI,yBAAyB,KAClD,OAAO,IAAM,6NAAA,CAAQ,GAAA,CAAI,uBAAuB,KAChD,OAAO,IAAM,6NAAA,CAAQ,GAAA,CAAI,yBAAyB,KAClD,OAAO,IAAO,8BAAoB,GAAA,CAAI,kBAAkB,KACxD,OAAO,IAAO,8BAAoB,GAAA,CAAI,8BAA8B,KACpE,OAAO,IAAO,8BAAoB,GAAA,CAAI,4BAA4B,KAClE,OAAO,IAAO,8BAAoB,GAAA,CAAI,yBAAyB,KAC/D,OAAO,IAAO,8BAAoB,GAAA,CAAI,uBAAuB,KAC7D,OAAO,IAAO,8BAAoB,GAAA,CAAI,yBAAyB,KAC/D;IAED,OAAO;AACR;AAEA,SAAS,OAAO,EAAA,EAA8B;IAC7C,IAAI;QACH,OAAO,GAAG;IACX,EAAA,OAAQ;QACP,OAAO,KAAA;IACR;AACD"}},
    {"offset": {"line": 3212, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/license/useLicenseManagerState.ts"],"sourcesContent":["import { useValue } from '@tldraw/state-react'\nimport { LicenseManager, LicenseState } from './LicenseManager'\n\n/** @internal */\nexport function useLicenseManagerState(licenseManager: LicenseManager): LicenseState {\n\treturn useValue('watermarkState', () => licenseManager.state.get(), [licenseManager])\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,gBAAgB;;AAIlB,SAAS,uBAAuB,cAAA,EAA8C;IACpF,WAAO,8OAAA,EAAS;2CAAkB,IAAM,eAAe,KAAA,CAAM,GAAA,CAAI;0CAAG;QAAC,cAAc;KAAC;AACrF"}},
    {"offset": {"line": 3232, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/license/Watermark.tsx"],"sourcesContent":["import { useValue } from '@tldraw/state-react'\nimport { memo, useRef } from 'react'\nimport { useCanvasEvents } from '../hooks/useCanvasEvents'\nimport { useEditor } from '../hooks/useEditor'\nimport { usePassThroughWheelEvents } from '../hooks/usePassThroughWheelEvents'\nimport { preventDefault } from '../utils/dom'\nimport { runtime } from '../utils/runtime'\nimport { watermarkDesktopSvg, watermarkMobileSvg } from '../watermarks'\nimport { LicenseManager } from './LicenseManager'\nimport { useLicenseContext } from './LicenseProvider'\nimport { useLicenseManagerState } from './useLicenseManagerState'\n\nconst WATERMARK_DESKTOP_LOCAL_SRC = `data:image/svg+xml;utf8,${encodeURIComponent(watermarkDesktopSvg)}`\nconst WATERMARK_MOBILE_LOCAL_SRC = `data:image/svg+xml;utf8,${encodeURIComponent(watermarkMobileSvg)}`\n\n/** @internal */\nexport const Watermark = memo(function Watermark() {\n\tconst licenseManager = useLicenseContext()\n\tconst editor = useEditor()\n\tconst isMobile = useValue('is mobile', () => editor.getViewportScreenBounds().width < 700, [\n\t\teditor,\n\t])\n\n\tconst licenseManagerState = useLicenseManagerState(licenseManager)\n\n\tif (!['licensed-with-watermark', 'unlicensed'].includes(licenseManagerState)) return null\n\n\treturn (\n\t\t<>\n\t\t\t<LicenseStyles />\n\t\t\t<WatermarkInner\n\t\t\t\tsrc={isMobile ? WATERMARK_MOBILE_LOCAL_SRC : WATERMARK_DESKTOP_LOCAL_SRC}\n\t\t\t\tisUnlicensed={licenseManagerState === 'unlicensed'}\n\t\t\t/>\n\t\t</>\n\t)\n})\n\nconst UnlicensedWatermark = memo(function UnlicensedWatermark({\n\tisDebugMode,\n\tisMobile,\n}: {\n\tisDebugMode: boolean\n\tisMobile: boolean\n}) {\n\tconst editor = useEditor()\n\tconst events = useCanvasEvents()\n\tconst ref = useRef<HTMLDivElement>(null)\n\tusePassThroughWheelEvents(ref)\n\n\tconst url = 'https://tldraw.dev/pricing?utm_source=sdk&utm_medium=organic&utm_campaign=watermark'\n\n\treturn (\n\t\t<div\n\t\t\tref={ref}\n\t\t\tclassName={LicenseManager.className}\n\t\t\tdata-debug={isDebugMode}\n\t\t\tdata-mobile={isMobile}\n\t\t\tdata-unlicensed={true}\n\t\t\tdata-testid=\"tl-watermark-unlicensed\"\n\t\t\tdraggable={false}\n\t\t\t{...events}\n\t\t>\n\t\t\t<button\n\t\t\t\tdraggable={false}\n\t\t\t\trole=\"button\"\n\t\t\t\tonPointerDown={(e) => {\n\t\t\t\t\teditor.markEventAsHandled(e)\n\t\t\t\t\tpreventDefault(e)\n\t\t\t\t}}\n\t\t\t\ttitle=\"The tldraw SDK requires a license key to work in production. You can get a free 100-day trial license at tldraw.dev/pricing.\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\truntime.openWindow(url, '_blank', true)\n\t\t\t\t}} // allow referrer\n\t\t\t>\n\t\t\t\tGet a license for production\n\t\t\t</button>\n\t\t</div>\n\t)\n})\n\nconst WatermarkInner = memo(function WatermarkInner({\n\tsrc,\n\tisUnlicensed,\n}: {\n\tsrc: string\n\tisUnlicensed: boolean\n}) {\n\tconst editor = useEditor()\n\tconst isDebugMode = useValue('debug mode', () => editor.getInstanceState().isDebugMode, [editor])\n\tconst isMobile = useValue('is mobile', () => editor.getViewportScreenBounds().width < 700, [\n\t\teditor,\n\t])\n\tconst events = useCanvasEvents()\n\n\tconst ref = useRef<HTMLDivElement>(null)\n\tusePassThroughWheelEvents(ref)\n\n\tconst maskCss = `url('${src}') center 100% / 100% no-repeat`\n\tconst url = 'https://tldraw.dev/?utm_source=sdk&utm_medium=organic&utm_campaign=watermark'\n\n\tif (isUnlicensed) {\n\t\treturn <UnlicensedWatermark isDebugMode={isDebugMode} isMobile={isMobile} />\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tref={ref}\n\t\t\tclassName={LicenseManager.className}\n\t\t\tdata-debug={isDebugMode}\n\t\t\tdata-mobile={isMobile}\n\t\t\tdata-testid=\"tl-watermark-licensed\"\n\t\t\tdraggable={false}\n\t\t\t{...events}\n\t\t>\n\t\t\t<button\n\t\t\t\tdraggable={false}\n\t\t\t\trole=\"button\"\n\t\t\t\tonPointerDown={(e) => {\n\t\t\t\t\teditor.markEventAsHandled(e)\n\t\t\t\t\tpreventDefault(e)\n\t\t\t\t}}\n\t\t\t\ttitle=\"Build infinite canvas applications with the tldraw SDK. Learn more at https://tldraw.dev.\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\truntime.openWindow(url, '_blank')\n\t\t\t\t}}\n\t\t\t\tstyle={{ mask: maskCss, WebkitMask: maskCss }}\n\t\t\t/>\n\t\t</div>\n\t)\n})\n\nconst LicenseStyles = memo(function LicenseStyles() {\n\tconst editor = useEditor()\n\tconst className = LicenseManager.className\n\n\tconst CSS = `\n/* ------------------- SEE LICENSE -------------------\nThe tldraw watermark is part of tldraw's license. It is shown for unlicensed\nor \"licensed-with-watermark\" users. By using this library, you agree to\npreserve the watermark's behavior, keeping it visible, unobscured, and\navailable to user-interaction.\n\nTo remove the watermark, please purchase a license at tldraw.dev.\n*/\n\n.${className} {\n\tposition: absolute;\n\tbottom: max(var(--tl-space-2), env(safe-area-inset-bottom));\n\tright: max(var(--tl-space-2), env(safe-area-inset-right));\n\twidth: 96px;\n\theight: 32px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: var(--tl-layer-watermark) !important;\n\tbackground-color: color-mix(in srgb, var(--tl-color-background) 62%, transparent);\n\topacity: 1;\n\tborder-radius: 5px;\n\tpointer-events: all;\n\tpadding: 2px;\n\tbox-sizing: content-box;\n}\n\n.${className} > button {\n\tposition: absolute;\n\twidth: 96px;\n\theight: 32px;\n\tpointer-events: all;\n\tcursor: inherit;\n\tcolor: var(--tl-color-text);\n\topacity: .38;\n\tborder: 0;\n\tpadding: 0;\n\tbackground-color: currentColor;\n}\n\n.${className}[data-debug='true'] {\n\tbottom: max(46px, env(safe-area-inset-bottom));\n}\n\n.${className}[data-mobile='true'] {\n\tborder-radius: 4px 0px 0px 4px;\n\tright: max(-2px, calc(env(safe-area-inset-right) - 2px));\n\twidth: 8px;\n\theight: 48px;\n}\n\n.${className}[data-mobile='true'] > button {\n\twidth: 8px;\n\theight: 32px;\n}\n\n.${className}[data-unlicensed='true'] > button {\n\tfont-size: 100px;\n\tposition: absolute;\n\tpointer-events: all;\n\tcursor: pointer;\n\tcolor: var(--tl-color-text);\n\topacity: 0.8;\n\tborder: 0;\n\tpadding: 0;\n\tbackground-color: transparent;\n\tfont-size: 11px;\n\tfont-weight: 600;\n\ttext-align: center;\n}\n\n.${className}[data-mobile='true'][data-unlicensed='true'] > button {\n\tdisplay: none;\n}\n\n@media (hover: hover) {\n\t.${className} > button {\n\t\tpointer-events: none;\n\t}\n\n\t.${className}:hover {\n\t\tbackground-color: var(--tl-color-background);\n\t\ttransition: background-color 0.2s ease-in-out;\n\t\ttransition-delay: 0.32s;\n\t}\n\n\t.${className}:hover > button {\n\t\tanimation: ${className}_delayed_link 0.2s forwards ease-in-out;\n\t\tanimation-delay: 0.32s;\n\t}\n\n\t.${className} > button:focus-visible {\n\t\topacity: 1;\n\t}\n}\n\n@keyframes ${className}_delayed_link {\n\t0% {\n\t\tcursor: inherit;\n\t\topacity: .38;\n\t\tpointer-events: none;\n\t}\n\t100% {\n\t\tcursor: pointer;\n\t\topacity: 1;\n\t\tpointer-events: all;\n\t}\n}`\n\n\treturn <style nonce={editor.options.nonce}>{CSS}</style>\n})\n"],"names":["Watermark", "UnlicensedWatermark", "WatermarkInner", "LicenseStyles"],"mappings":";;;;AA4BE,mBACC,KADD;;AA5BF,SAAS,gBAAgB;AACzB,SAAS,MAAM,cAAc;AAC7B,SAAS,uBAAuB;AAChC,SAAS,iBAAiB;AAC1B,SAAS,iCAAiC;AAC1C,SAAS,sBAAsB;AAC/B,SAAS,eAAe;AACxB,SAAS,qBAAqB,0BAA0B;AACxD,SAAS,sBAAsB;AAC/B,SAAS,yBAAyB;AAClC,SAAS,8BAA8B;;;;;;;;;;;;;AAEvC,MAAM,8BAA8B,CAAA,wBAAA,EAA2B,mBAAmB,mPAAmB,CAAC,EAAA;AACtG,MAAM,6BAA6B,CAAA,wBAAA,EAA2B,mBAAmB,kPAAkB,CAAC,EAAA;AAG7F,MAAM,gBAAY,uNAAA,EAAK,SAASA,aAAY;IAClD,MAAM,qBAAiB,iQAAA,CAAkB;IACzC,MAAM,aAAS,iPAAA,CAAU;IACzB,MAAM,eAAW,8OAAA,EAAS;mDAAa,IAAM,OAAO,uBAAA,CAAwB,EAAE,KAAA,GAAQ;kDAAK;QAC1F;KACA;IAED,MAAM,0BAAsB,6QAAA,EAAuB,cAAc;IAEjE,IAAI,CAAC;QAAC;QAA2B,YAAY;KAAA,CAAE,QAAA,CAAS,mBAAmB,EAAG,CAAA,OAAO;IAErF,OACC,aAAA,GAAA,IAAA,gOAAA,EAAA,oOAAA,EAAA;QACC,UAAA;YAAA,aAAA,GAAA,IAAA,+NAAA,EAAC,eAAA,CAAA,CAAc;YACf,aAAA,GAAA,IAAA,+NAAA,EAAC,gBAAA;gBACA,KAAK,WAAW,6BAA6B;gBAC7C,cAAc,wBAAwB;YAAA;SACvC;IAAA,CACD;AAEF,CAAC;AAED,MAAM,0BAAsB,uNAAA,EAAK,SAASC,qBAAoB,EAC7D,WAAA,EACA,QAAA,EACD,EAGG;IACF,MAAM,aAAS,iPAAA,CAAU;IACzB,MAAM,aAAS,6PAAA,CAAgB;IAC/B,MAAM,UAAM,yNAAA,EAAuB,IAAI;IACvC,IAAA,iRAAA,EAA0B,GAAG;IAE7B,MAAM,MAAM;IAEZ,OACC,aAAA,GAAA,IAAA,+NAAA,EAAC,OAAA;QACA;QACA,WAAW,6PAAA,CAAe,SAAA;QAC1B,cAAY;QACZ,eAAa;QACb,mBAAiB;QACjB,eAAY;QACZ,WAAW;QACV,GAAG,MAAA;QAEJ,UAAA,aAAA,GAAA,IAAA,+NAAA,EAAC,UAAA;YACA,WAAW;YACX,MAAK;YACL,eAAe,CAAC,MAAM;gBACrB,OAAO,kBAAA,CAAmB,CAAC;gBAC3B,IAAA,gPAAA,EAAe,CAAC;YACjB;YACA,OAAM;YACN,SAAS,MAAM;gBACd,6OAAA,CAAQ,UAAA,CAAW,KAAK,UAAU,IAAI;YACvC;YACA,UAAA;QAAA;IAED;AAGH,CAAC;AAED,MAAM,qBAAiB,uNAAA,EAAK,SAASC,gBAAe,EACnD,GAAA,EACA,YAAA,EACD,EAGG;IACF,MAAM,aAAS,iPAAA,CAAU;IACzB,MAAM,kBAAc,8OAAA,EAAS;gEAAc,IAAM,OAAO,gBAAA,CAAiB,EAAE,WAAA;+DAAa;QAAC,MAAM;KAAC;IAChG,MAAM,eAAW,8OAAA,EAAS;6DAAa,IAAM,OAAO,uBAAA,CAAwB,EAAE,KAAA,GAAQ;4DAAK;QAC1F;KACA;IACD,MAAM,aAAS,6PAAA,CAAgB;IAE/B,MAAM,UAAM,yNAAA,EAAuB,IAAI;IACvC,IAAA,iRAAA,EAA0B,GAAG;IAE7B,MAAM,UAAU,CAAA,KAAA,EAAQ,GAAG,CAAA,+BAAA,CAAA;IAC3B,MAAM,MAAM;IAEZ,IAAI,cAAc;QACjB,OAAO,aAAA,GAAA,IAAA,+NAAA,EAAC,qBAAA;YAAoB;YAA0B;QAAA,CAAoB;IAC3E;IAEA,OACC,aAAA,GAAA,IAAA,+NAAA,EAAC,OAAA;QACA;QACA,WAAW,6PAAA,CAAe,SAAA;QAC1B,cAAY;QACZ,eAAa;QACb,eAAY;QACZ,WAAW;QACV,GAAG,MAAA;QAEJ,UAAA,aAAA,GAAA,IAAA,+NAAA,EAAC,UAAA;YACA,WAAW;YACX,MAAK;YACL,eAAe,CAAC,MAAM;gBACrB,OAAO,kBAAA,CAAmB,CAAC;gBAC3B,IAAA,gPAAA,EAAe,CAAC;YACjB;YACA,OAAM;YACN,SAAS,MAAM;gBACd,6OAAA,CAAQ,UAAA,CAAW,KAAK,QAAQ;YACjC;YACA,OAAO;gBAAE,MAAM;gBAAS,YAAY;YAAQ;QAAA;IAC7C;AAGH,CAAC;AAED,MAAM,oBAAgB,uNAAA,EAAK,SAASC,iBAAgB;IACnD,MAAM,aAAS,iPAAA,CAAU;IACzB,MAAM,YAAY,6PAAA,CAAe,SAAA;IAEjC,MAAM,MAAM,CAAA;;;;;;;;;;CAAA,EAUV,SAAS,CAAA;;;;;;;;;;;;;;;;;;CAAA,EAkBT,SAAS,CAAA;;;;;;;;;;;;;CAAA,EAaT,SAAS,CAAA;;;;CAAA,EAIT,SAAS,CAAA;;;;;;;CAAA,EAOT,SAAS,CAAA;;;;;CAAA,EAKT,SAAS,CAAA;;;;;;;;;;;;;;;CAAA,EAeT,SAAS,CAAA;;;;;EAAA,EAKR,SAAS,CAAA;;;;EAAA,EAIT,SAAS,CAAA;;;;;;EAAA,EAMT,SAAS,CAAA;aAAA,EACE,SAAS,CAAA;;;;EAAA,EAIpB,SAAS,CAAA;;;;;WAAA,EAKA,SAAS,CAAA;;;;;;;;;;;CAAA,CAAA;IAarB,OAAO,aAAA,GAAA,IAAA,+NAAA,EAAC,SAAA;QAAM,OAAO,OAAO,OAAA,CAAQ,KAAA;QAAQ,UAAA;IAAA,CAAI;AACjD,CAAC"}},
    {"offset": {"line": 3488, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/watermarks.ts"],"sourcesContent":["// This file is automatically generated by internal/scripts/refresh-assets.ts.\n// Do not edit manually. Or do, I'm a comment, not a cop.\n\nexport const watermarkDesktopSvg =\n\t'<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"3001\" height=\"1000\" fill=\"none\"><path fill=\"#000\" d=\"M590.656 300.449c0 49.706-40.294 90-90 90-49.705 0-90-40.294-90-90 0-49.705 40.295-90 90-90 49.706 0 90 40.295 90 90M569.431 719.011c-15.247 32.821-56.006 91.589-98.338 91.438-32.004-.115-38.642-30.904-17.414-50.856 17.381-16.337 28.246-48.075 31.995-72.719.415-2.728-1.556-5.197-4.272-5.679-39.666-7.04-70.746-40.877-70.746-83.417 0-48.23 38.983-87.329 87.07-87.329 39.936 0 70.172 22.237 83.369 52.397 18.839 43.055 7.117 115.733-11.664 156.165M2613.29 385.681V239.319c0-11.363 9.22-20.569 20.59-20.569h8.26c11.37 0 20.59 9.206 20.59 20.569v36.911c0 8.629 7 15.625 15.63 15.625h35.25c8.63 0 15.63-6.996 15.63-15.625v-36.911c0-11.363 9.22-20.569 20.59-20.569h8.17c11.37 0 20.59 9.206 20.59 20.569v146.362c0 11.363-9.22 20.569-20.59 20.569h-8.17c-11.37 0-20.59-9.206-20.59-20.569v-36.999c0-8.63-7-15.625-15.63-15.625h-35.25c-8.63 0-15.63 6.995-15.63 15.625v36.999c0 11.363-9.22 20.569-20.59 20.569h-8.26c-11.37 0-20.59-9.206-20.59-20.569M2391.97 239.319v146.362c0 11.348-9.16 20.569-20.49 20.569h-8.2c-11.33 0-20.49-9.221-20.49-20.569V239.319c0-11.348 9.16-20.569 20.49-20.569h8.2c11.33 0 20.49 9.221 20.49 20.569M2098.23 391.43l-42.69-146.361c-3.85-13.171 6.06-26.319 19.79-26.319h10.6c9.59 0 17.93 6.611 20.08 15.952l17.01 73.045c1.48 6.348 10.47 6.478 12.14.176l19.47-73.838c2.38-9.04 10.57-15.335 19.93-15.335h12.1c9.37 0 17.56 6.3 19.94 15.346l19.49 74.067c1.66 6.305 10.65 6.178 12.13-.171l17.09-73.294c2.15-9.339 10.49-15.948 20.08-15.948h10.53c13.72 0 23.63 13.141 19.79 26.31l-42.63 146.361c-2.56 8.789-10.63 14.829-19.79 14.829h-15.68c-9.12 0-17.16-5.98-19.76-14.709l-21.17-71.059c-1.77-5.948-10.19-5.957-11.97-.012l-21.33 71.071c-2.6 8.729-10.64 14.709-19.76 14.709h-15.59c-9.17 0-17.23-6.035-19.8-14.82M2443.23 218.75h118.59c11.38 0 20.62 9.195 20.62 20.557s-9.24 20.556-20.62 20.556h-24.79c-5.53 0-10 4.477-10 10v115.818c0 11.368-9.25 20.569-20.63 20.569h-7.65c-11.39 0-20.63-9.201-20.63-20.569V269.863c0-5.523-4.48-10-10-10h-24.89c-11.37 0-20.61-9.195-20.61-20.556s9.24-20.557 20.61-20.557M1174.15 218.75h24.64c8.35 0 15.88 5.042 19.04 12.764l34.61 83.942c2.13 5.161 9.44 5.155 11.56-.01l34.43-83.932a20.58 20.58 0 0 1 19.04-12.764h24.64c11.37 0 20.58 9.208 20.58 20.569v146.362c0 11.361-9.21 20.569-20.58 20.569h-7.09c-11.36 0-20.58-9.208-20.58-20.569l-.12-50.645c-.01-6.888-9.53-8.688-12.06-2.283l-23.46 59.332a20.57 20.57 0 0 1-19.14 13.009h-3.03a20.57 20.57 0 0 1-19.15-13.046l-23.47-59.68c-2.52-6.416-12.05-4.623-12.06 2.271l-.13 51.042c0 11.361-9.21 20.569-20.57 20.569h-7.1c-11.36 0-20.57-9.208-20.57-20.569V239.319c0-11.361 9.21-20.569 20.57-20.569\"/><path fill=\"#000\" fill-rule=\"evenodd\" d=\"m1449.94 391.836 6.12-19.392a6.255 6.255 0 0 1 5.96-4.369l50.22-.061a6.24 6.24 0 0 1 5.96 4.348l6.23 19.486c2.71 8.581 10.71 14.402 19.74 14.402h9.34c14.13 0 24.15-13.791 19.61-27.151l-49.74-146.361c-2.85-8.37-10.74-13.988-19.61-13.988h-33.16c-8.87 0-16.77 5.618-19.61 13.988l-49.74 146.361c-4.54 13.36 5.48 27.151 19.61 27.151h9.32c9.04 0 17.04-5.827 19.75-14.414m31.1-98.858c1.85-5.807 10.08-5.796 11.91.016l8.83 27.916c1.28 4.028-1.73 8.134-5.96 8.134h-17.74c-4.23 0-7.24-4.119-5.95-8.151zM1681.81 406.25c18.91 0 35.39-3.686 49.36-11.168 13.97-7.544 24.73-18.394 32.24-32.489 7.56-14.105 11.29-30.866 11.29-50.182 0-19.256-3.73-35.957-11.29-50.004-7.57-14.094-18.35-24.912-32.32-32.397-13.91-7.545-30.4-11.26-49.37-11.26h-49.5c-11.38 0-20.63 9.201-20.63 20.569v146.362c0 11.368 9.25 20.569 20.63 20.569zm23.13-47.701c-6.62 3.215-14.85 4.886-24.79 4.886-10.49 0-19-8.507-19-19v-64.34c0-10.149 8.23-18.376 18.38-18.376 10.18 0 18.56 1.703 25.23 4.974 6.59 3.149 11.63 8.315 15.08 15.633 3.45 7.269 5.28 17.268 5.28 30.162 0 12.891-1.82 22.951-5.28 30.347-3.39 7.319-8.36 12.509-14.9 15.714\" clip-rule=\"evenodd\"/><path fill=\"#000\" d=\"M1804.21 385.681V239.319c0-11.361 9.21-20.569 20.58-20.569h91.28c11.36 0 20.57 9.202 20.57 20.557s-9.21 20.556-20.57 20.556h-54.64a7.807 7.807 0 0 0-7.81 7.813v16.366a7.806 7.806 0 0 0 7.81 7.812h48.13c11.37 0 20.58 9.246 20.58 20.602s-9.21 20.601-20.58 20.601h-48.13a7.806 7.806 0 0 0-7.81 7.812v16.455a7.807 7.807 0 0 0 7.81 7.813h54.64c11.36 0 20.57 9.202 20.57 20.556s-9.21 20.557-20.57 20.557h-91.28c-11.37 0-20.58-9.208-20.58-20.569\"/><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2875.5 68.75h-2750c-31.066 0-56.25 25.184-56.25 56.25v750c0 31.066 25.184 56.25 56.25 56.25h2750c31.07 0 56.25-25.184 56.25-56.25V125c0-31.066-25.18-56.25-56.25-56.25M125.5 0C56.464 0 .5 55.964.5 125v750c0 69.036 55.965 125 125 125h2750c69.04 0 125-55.964 125-125V125c0-69.036-55.96-125-125-125z\" clip-rule=\"evenodd\"/><path fill=\"#000\" d=\"M2476.06 804.813c-10.54 0-19.82-6.947-22.81-17.068L2390.79 575.7c-4.49-15.248 6.92-30.534 22.8-30.534h27.75c11.1 0 20.72 7.686 23.18 18.52L2489 671.402c2.07 9.093 14.93 9.321 17.32.308l28.83-108.844c2.76-10.435 12.19-17.7 22.98-17.7h25.17c10.8 0 20.25 7.293 22.99 17.755l28.27 107.739c2.36 9.001 15.18 8.829 17.3-.232l25.01-106.888c2.51-10.763 12.1-18.374 23.14-18.374h27.87c15.88 0 27.29 15.286 22.8 30.534l-62.46 212.045a23.78 23.78 0 0 1-22.81 17.068h-32.12c-10.39 0-19.58-6.763-22.69-16.696l-32.08-102.694c-2.62-8.397-14.51-8.331-17.04.095l-30.74 102.346c-3.02 10.061-12.27 16.949-22.76 16.949zM1742.44 804.813h-75.81c-13.09 0-23.71-10.656-23.71-23.801V568.967c0-13.145 10.62-23.801 23.71-23.801h74.8c26.6 0 49.59 5.198 68.95 15.594 19.45 10.312 34.44 25.187 44.96 44.627 10.61 19.355 15.91 42.556 15.91 69.602q0 40.57-15.78 69.73c-10.53 19.355-25.43 34.231-44.71 44.627-19.28 10.311-42.05 15.467-68.32 15.467m-29.3-83.642c0 13.145 10.61 23.801 23.71 23.801h3.06c12.8 0 23.7-2.07 32.71-6.212 9.09-4.141 16-11.283 20.71-21.426q7.2-15.213 7.2-42.345 0-27.13-7.32-42.344c-4.8-10.143-11.87-17.285-21.22-21.426-9.26-4.142-20.63-6.212-34.1-6.212h-1.04c-13.1 0-23.71 10.656-23.71 23.801zM1460.86 804.813c-13.12 0-23.76-10.656-23.76-23.801V568.967c0-13.145 10.64-23.801 23.76-23.801h22.84c13.13 0 23.76 10.656 23.76 23.801v155.247c0 13.145 10.64 23.801 23.76 23.801h57.27c13.12 0 23.76 10.656 23.76 23.801v9.196c0 13.145-10.64 23.801-23.76 23.801zM1204.45 601.964c-13.13 0-23.77-10.656-23.77-23.801v-9.196c0-13.145 10.64-23.801 23.77-23.801h177.89c13.13 0 23.78 10.656 23.78 23.801v9.196c0 13.145-10.65 23.801-23.78 23.801h-39.38c-8.21 0-14.86 6.66-14.86 14.875v164.173c0 13.145-10.64 23.801-23.78 23.801h-21.85c-13.13 0-23.78-10.656-23.78-23.801V616.839c0-8.215-6.65-14.875-14.86-14.875z\"/><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2223.05 787.891c-3.02 10.047-12.27 16.922-22.74 16.922h-25.43c-16.19 0-27.64-15.862-22.57-31.261l69.88-212.045c3.21-9.753 12.31-16.341 22.56-16.341h61.84c10.25 0 19.35 6.588 22.56 16.341l69.87 212.045c5.08 15.399-6.37 31.261-22.56 31.261h-25.43c-10.48 0-19.72-6.875-22.74-16.922l-6.7-22.2a14.84 14.84 0 0 0-14.21-10.576h-63.42c-6.55 0-12.32 4.296-14.22 10.576zm76.13-96.945-14.13-48.436c-2.46-8.451-14.36-8.602-17.04-.217l-15.46 48.436c-1.84 5.759 2.45 11.645 8.48 11.645h29.6c5.94 0 10.22-5.715 8.55-11.428\" clip-rule=\"evenodd\"/><path fill=\"#000\" d=\"M1939.6 804.813c-13.13 0-23.77-10.656-23.77-23.801V568.967c0-13.145 10.64-23.801 23.77-23.801h88.13c19.24 0 36.08 3.508 50.51 10.523s25.65 17.115 33.67 30.3q12.03 19.779 12.03 47.416c0 18.595-4.14 34.273-12.41 47.036-7.64 11.913-18.18 21.101-31.63 27.564-16.98 8.159-36 11.104-54.7 11.104h-43.07c-76.56 0 4.08-135.84 4.08-84.706v7.996c0 12.117 9.81 21.941 21.91 21.941 8.12 0 16.3-.345 24.04-3.043 5.91-2.113 10.43-5.451 13.55-10.015 3.2-4.565 4.81-10.523 4.81-17.877 0-7.437-1.61-13.481-4.81-18.129-3.12-4.733-7.64-8.199-13.55-10.396-7.05-2.766-14.67-3.423-22.18-3.423-13.13 0-23.77 10.656-23.77 23.801v47.71c0 11.825 11.14 16.003 19.91 20.752 12.31 6.671 7.58 25.389-6.42 25.389-7.45 0-13.49 6.048-13.49 13.508v48.395c0 13.145-10.63 23.801-23.76 23.801zm134.89-106.758 5.41 9.95 33.51 61.622c8.62 15.86-2.84 35.186-20.87 35.186h-22.27c-8.74 0-16.77-4.798-20.92-12.496l-35.05-65.04a15.52 15.52 0 0 0-13.66-8.168c-42.24 0 40.62-82.154 73.85-21.054M931.652 0h68.748v1000h-68.748z\"/></svg>'\nexport const watermarkMobileSvg =\n\t'<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400\" height=\"1601\" fill=\"none\"><path fill=\"#000\" d=\"M72 1319.8c0-10.73 7.071-20.18 17.372-23.22l215.823-63.62c15.519-4.57 31.078 7.05 31.078 23.22v28.26c0 11.31-7.824 21.1-18.85 23.61l-109.636 24.94c-9.254 2.1-9.487 15.2-.313 17.63l110.784 29.37a24.21 24.21 0 0 1 18.015 23.4v25.64c0 11-7.423 20.62-18.071 23.41l-109.659 28.79c-9.162 2.41-8.986 15.47.236 17.63l108.792 25.46c10.955 2.56 18.702 12.33 18.702 23.57v28.39c0 16.17-15.559 27.79-31.078 23.22l-215.823-63.62c-10.3-3.04-17.372-12.49-17.372-23.22v-32.72c0-10.59 6.883-19.95 16.994-23.11l104.523-32.67c8.547-2.67 8.479-14.79-.096-17.36l-104.17-31.3C79.01 1372.42 72 1363 72 1352.31zM72 572.638V495.43c0-13.336 10.846-24.147 24.225-24.147h215.823c13.379 0 24.225 10.811 24.225 24.147v76.179q0 40.645-15.872 70.228-15.743 29.712-45.422 45.79-29.55 16.206-70.843 16.206-41.292 0-70.971-16.078-29.55-16.077-45.422-45.532Q72 612.767 72 572.638m85.132-29.84c-13.379 0-24.225 10.81-24.225 24.146v3.122q0 19.55 6.323 33.313 6.323 13.89 21.807 21.094 15.485 7.332 43.099 7.331t43.1-7.46q15.484-7.33 21.807-21.608 6.323-14.15 6.323-34.728v-1.064c0-13.336-10.846-24.146-24.225-24.146zM72 285.858c0-13.363 10.846-24.197 24.225-24.197h215.823c13.379 0 24.225 10.834 24.225 24.197v23.27c0 13.364-10.846 24.197-24.225 24.197H154.035c-13.379 0-24.225 10.834-24.225 24.197v58.328c0 13.364-10.846 24.197-24.225 24.197h-9.36C82.845 440.047 72 429.214 72 415.85zM278.463 24.72c0-13.374 10.846-24.216 24.225-24.216h9.36c13.379 0 24.225 10.842 24.225 24.216v181.174c0 13.374-10.846 24.216-24.225 24.216h-9.36c-13.379 0-24.225-10.842-24.225-24.216v-40.108c0-8.359-6.779-15.135-15.141-15.135H96.225c-13.38 0-24.225-10.842-24.225-24.216v-22.256c0-13.374 10.846-24.216 24.225-24.216h167.097c8.362 0 15.141-6.776 15.141-15.135z\"/><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M89.224 1062.13C78.997 1059.04 72 1049.63 72 1038.96v-25.9c0-16.486 16.145-28.147 31.818-22.979l215.823 71.169a24.19 24.19 0 0 1 16.632 22.98v62.97c0 10.45-6.706 19.71-16.632 22.98l-215.823 71.17C88.145 1246.51 72 1234.86 72 1218.37v-25.9c0-10.67 6.997-20.08 17.224-23.17l22.595-6.81a15.13 15.13 0 0 0 10.765-14.48v-64.59a15.13 15.13 0 0 0-10.765-14.48zm98.672 77.53 49.299-14.39c8.601-2.51 8.755-14.62.22-17.35l-49.299-15.75c-5.861-1.88-11.852 2.49-11.852 8.64v30.14c0 6.05 5.817 10.41 11.632 8.71\" clip-rule=\"evenodd\"/><path fill=\"#000\" d=\"M72 773.439c0-13.367 10.846-24.203 24.225-24.203h215.823c13.379 0 24.225 10.836 24.225 24.203v89.762q0 29.395-10.711 51.439-10.71 22.046-30.84 34.293t-48.261 12.248q-28.388 0-47.873-12.635-18.187-11.672-28.056-32.218c-8.303-17.289-11.301-36.661-11.301-55.705v-43.867c0-77.976 138.26 4.16 86.215 4.16h-8.138c-12.334 0-22.332 9.989-22.332 22.311 0 8.269.351 16.6 3.097 24.487q3.225 9.024 10.194 13.794 6.968 4.899 18.194 4.899 11.356 0 18.453-4.899 7.226-4.77 10.581-13.794c2.815-7.188 3.484-14.944 3.484-22.596 0-13.366-10.846-24.202-24.225-24.202h-48.56c-12.036 0-16.288 11.345-21.122 20.272-6.79 12.539-25.841 7.72-25.841-6.536 0-7.586-6.156-13.736-13.749-13.736H96.225C82.845 820.916 72 810.08 72 796.714zm108.66 137.378-10.128 5.511-62.72 34.131C91.67 959.243 72 947.569 72 929.205V906.52a24.2 24.2 0 0 1 12.719-21.299l66.199-35.696a15.82 15.82 0 0 0 8.313-13.921c0-43.012 83.618 41.371 21.429 75.213\"/></svg>'\nexport const watermarkTrackSvg = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1\" height=\"1\"/>'\n"],"names":[],"mappings":";;;;;;;;AAGO,MAAM,sBACZ;AACM,MAAM,qBACZ;AACM,MAAM,oBAAoB"}},
    {"offset": {"line": 3505, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/%40tldraw/editor/src/lib/TldrawEditor.tsx"],"sourcesContent":["import { MigrationSequence, Store } from '@tldraw/store'\nimport { TLShape, TLStore, TLStoreSnapshot } from '@tldraw/tlschema'\nimport { annotateError, Required } from '@tldraw/utils'\nimport classNames from 'classnames'\nimport React, {\n\tmemo,\n\tReactNode,\n\tuseCallback,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseMemo,\n\tuseRef,\n\tuseState,\n\tuseSyncExternalStore,\n} from 'react'\nimport { version } from '../version'\nimport { DefaultErrorFallback } from './components/default-components/DefaultErrorFallback'\nimport { OptionalErrorBoundary } from './components/ErrorBoundary'\nimport { TLStoreBaseOptions } from './config/createTLStore'\nimport { createTLUser, TLUser } from './config/createTLUser'\nimport { TLAnyBindingUtilConstructor } from './config/defaultBindings'\nimport { TLAnyShapeUtilConstructor } from './config/defaultShapes'\nimport { TLEditorSnapshot } from './config/TLEditorSnapshot'\nimport { Editor } from './editor/Editor'\nimport { TLStateNodeConstructor } from './editor/tools/StateNode'\nimport { TLCameraOptions } from './editor/types/misc-types'\nimport { ContainerProvider, useContainer } from './hooks/useContainer'\nimport { useCursor } from './hooks/useCursor'\nimport { useDarkMode } from './hooks/useDarkMode'\nimport { EditorProvider, useEditor } from './hooks/useEditor'\nimport {\n\tEditorComponentsProvider,\n\tTLEditorComponents,\n\tuseEditorComponents,\n} from './hooks/useEditorComponents'\nimport { useEvent } from './hooks/useEvent'\nimport { useForceUpdate } from './hooks/useForceUpdate'\nimport { useShallowObjectIdentity } from './hooks/useIdentity'\nimport { useLocalStore } from './hooks/useLocalStore'\nimport { useRefState } from './hooks/useRefState'\nimport { useStateAttribute } from './hooks/useStateAttribute'\nimport { useZoomCss } from './hooks/useZoomCss'\nimport { LicenseProvider } from './license/LicenseProvider'\nimport { Watermark } from './license/Watermark'\nimport { TldrawOptions } from './options'\nimport { TLDeepLinkOptions } from './utils/deepLinks'\nimport { TLTextOptions } from './utils/richText'\nimport { TLStoreWithStatus } from './utils/sync/StoreWithStatus'\n\n/**\n * Props for the {@link tldraw#Tldraw} and {@link TldrawEditor} components, when passing in a\n * `TLStore` directly. If you would like tldraw to create a store for you, use\n * {@link TldrawEditorWithoutStoreProps}.\n *\n * @public\n */\nexport interface TldrawEditorWithStoreProps {\n\t/**\n\t * The store to use in the editor.\n\t */\n\tstore: TLStore | TLStoreWithStatus\n}\n\n/**\n * Props for the {@link tldraw#Tldraw} and {@link TldrawEditor} components, when not passing in a\n * `TLStore` directly. If you would like to pass in a store directly, use\n * {@link TldrawEditorWithStoreProps}.\n *\n * @public\n */\nexport interface TldrawEditorWithoutStoreProps extends TLStoreBaseOptions {\n\tstore?: undefined\n\n\t/**\n\t * Additional migrations to use in the store\n\t */\n\tmigrations?: readonly MigrationSequence[]\n\n\t/**\n\t * A starting snapshot of data to pre-populate the store. Do not supply both this and\n\t * `initialData`.\n\t */\n\tsnapshot?: TLEditorSnapshot | TLStoreSnapshot\n\n\t/**\n\t * If you would like to persist the store to the browser's local IndexedDB storage and sync it\n\t * across tabs, provide a key here. Each key represents a single tldraw document.\n\t */\n\tpersistenceKey?: string\n\n\tsessionId?: string\n}\n\n/** @public */\nexport type TldrawEditorStoreProps = TldrawEditorWithStoreProps | TldrawEditorWithoutStoreProps\n\n/**\n * Props for the {@link tldraw#Tldraw} and {@link TldrawEditor} components.\n *\n * @public\n **/\nexport type TldrawEditorProps = TldrawEditorBaseProps & TldrawEditorStoreProps\n\n/**\n * Base props for the {@link tldraw#Tldraw} and {@link TldrawEditor} components.\n *\n * @public\n */\nexport interface TldrawEditorBaseProps {\n\t/**\n\t * The component's children.\n\t */\n\tchildren?: ReactNode\n\n\t/**\n\t * An array of shape utils to use in the editor.\n\t */\n\tshapeUtils?: readonly TLAnyShapeUtilConstructor[]\n\n\t/**\n\t * An array of binding utils to use in the editor.\n\t */\n\tbindingUtils?: readonly TLAnyBindingUtilConstructor[]\n\n\t/**\n\t * An array of tools to add to the editor's state chart.\n\t */\n\ttools?: readonly TLStateNodeConstructor[]\n\n\t/**\n\t * Whether to automatically focus the editor when it mounts.\n\t */\n\tautoFocus?: boolean\n\n\t/**\n\t * Overrides for the editor's components, such as handles, collaborator cursors, etc.\n\t */\n\tcomponents?: TLEditorComponents\n\n\t/**\n\t * Called when the editor has mounted.\n\t */\n\tonMount?: TLOnMountHandler\n\n\t/**\n\t * The editor's initial state (usually the id of the first active tool).\n\t */\n\tinitialState?: string\n\n\t/**\n\t * A classname to pass to the editor's container.\n\t */\n\tclassName?: string\n\n\t/**\n\t * The user interacting with the editor.\n\t */\n\tuser?: TLUser\n\n\t/**\n\t * Whether to infer dark mode from the user's OS. Defaults to false.\n\t */\n\tinferDarkMode?: boolean\n\n\t/**\n\t * Camera options for the editor.\n\t *\n\t * @deprecated Use `options.cameraOptions` instead. This will be removed in a future release.\n\t */\n\tcameraOptions?: Partial<TLCameraOptions>\n\n\t/**\n\t * Options for the editor.\n\t */\n\toptions?: Partial<TldrawOptions>\n\n\t/**\n\t * Text options for the editor.\n\t *\n\t * @deprecated Use `options.text` instead. This prop will be removed in a future release.\n\t */\n\ttextOptions?: TLTextOptions\n\n\t/**\n\t * The license key.\n\t */\n\tlicenseKey?: string\n\n\t/**\n\t * Options for syncing the editor's camera state with the URL.\n\t *\n\t * @deprecated Use `options.deepLinks` instead. This prop will be removed in a future release.\n\t */\n\tdeepLinks?: true | TLDeepLinkOptions\n\n\t/**\n\t * Provides a way to hide shapes.\n\t *\n\t * Hidden shapes will not render in the editor, and they will not be eligible for hit test via\n\t * {@link @tldraw/editor#Editor.getShapeAtPoint} and {@link @tldraw/editor#Editor.getShapesAtPoint}. But otherwise they will\n\t * remain in the store and participate in all other operations.\n\t *\n\t * @example\n\t * ```ts\n\t * getShapeVisibility={(shape, editor) => shape.meta.hidden ? 'hidden' : 'inherit'}\n\t * ```\n\t *\n\t * - `'inherit' | undefined` - (default) The shape will be visible unless its parent is hidden.\n\t * - `'hidden'` - The shape will be hidden.\n\t * - `'visible'` - The shape will be visible.\n\t *\n\t * @param shape - The shape to check.\n\t * @param editor - The editor instance.\n\t */\n\tgetShapeVisibility?(\n\t\tshape: TLShape,\n\t\teditor: Editor\n\t): 'visible' | 'hidden' | 'inherit' | null | undefined\n\n\t/**\n\t * The URLs for the fonts to use in the editor.\n\t */\n\tassetUrls?: { fonts?: { [key: string]: string | undefined } }\n}\n\n/**\n * Called when the editor has mounted.\n * @example\n * ```ts\n * <Tldraw onMount={(editor) => editor.selectAll()} />\n * ```\n * @param editor - The editor instance.\n *\n * @public\n */\nexport type TLOnMountHandler = (editor: Editor) => (() => void | undefined) | undefined | void\n\ndeclare global {\n\tinterface Window {\n\t\ttldrawReady: boolean\n\t}\n}\n\nconst EMPTY_SHAPE_UTILS_ARRAY = [] as const\nconst EMPTY_BINDING_UTILS_ARRAY = [] as const\nconst EMPTY_TOOLS_ARRAY = [] as const\n/** @internal */\nexport const TL_CONTAINER_CLASS = 'tl-container'\n\n/** @public @react */\nexport const TldrawEditor = memo(function TldrawEditor({\n\tstore,\n\tcomponents,\n\tclassName,\n\tuser: _user,\n\toptions: _options,\n\t// eslint-disable-next-line @typescript-eslint/no-deprecated\n\ttextOptions: _textOptions,\n\t// eslint-disable-next-line @typescript-eslint/no-deprecated\n\tdeepLinks: _deepLinks,\n\t...rest\n}: TldrawEditorProps) {\n\tconst [container, setContainer] = useState<HTMLElement | null>(null)\n\tconst user = useMemo(() => _user ?? createTLUser(), [_user])\n\n\tconst ErrorFallback =\n\t\tcomponents?.ErrorFallback === undefined ? DefaultErrorFallback : components?.ErrorFallback\n\n\t// Merge deprecated props with options\n\t// options values take precedence over the deprecated props\n\tconst mergedOptions = useMemo(() => {\n\t\tlet result = _options\n\t\tif (_textOptions) {\n\t\t\tresult = { ...result, text: result?.text ?? _textOptions }\n\t\t}\n\t\tif (_deepLinks !== undefined) {\n\t\t\tresult = { ...result, deepLinks: result?.deepLinks ?? _deepLinks }\n\t\t}\n\t\treturn result\n\t}, [_options, _textOptions, _deepLinks])\n\n\t// apply defaults. if you're using the bare @tldraw/editor package, we\n\t// default these to the \"tldraw zero\" configuration. We have different\n\t// defaults applied in tldraw.\n\tconst withDefaults = {\n\t\t...rest,\n\t\tshapeUtils: rest.shapeUtils ?? EMPTY_SHAPE_UTILS_ARRAY,\n\t\tbindingUtils: rest.bindingUtils ?? EMPTY_BINDING_UTILS_ARRAY,\n\t\ttools: rest.tools ?? EMPTY_TOOLS_ARRAY,\n\t\tcomponents,\n\t\toptions: useShallowObjectIdentity(mergedOptions),\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tref={setContainer}\n\t\t\tdata-tldraw={version}\n\t\t\tdraggable={false}\n\t\t\tclassName={classNames(`${TL_CONTAINER_CLASS} tl-theme__light`, className)}\n\t\t\ttabIndex={-1}\n\t\t\trole=\"application\"\n\t\t\taria-label={_options?.branding ?? 'tldraw'}\n\t\t>\n\t\t\t<OptionalErrorBoundary\n\t\t\t\tfallback={ErrorFallback}\n\t\t\t\tonError={(error) => annotateError(error, { tags: { origin: 'react.tldraw-before-app' } })}\n\t\t\t>\n\t\t\t\t{container && (\n\t\t\t\t\t<LicenseProvider licenseKey={rest.licenseKey}>\n\t\t\t\t\t\t<ContainerProvider container={container}>\n\t\t\t\t\t\t\t<EditorComponentsProvider overrides={components}>\n\t\t\t\t\t\t\t\t{store ? (\n\t\t\t\t\t\t\t\t\tstore instanceof Store ? (\n\t\t\t\t\t\t\t\t\t\t// Store is ready to go, whether externally synced or not\n\t\t\t\t\t\t\t\t\t\t<TldrawEditorWithReadyStore {...withDefaults} store={store} user={user} />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t// Store is a synced store, so handle syncing stages internally\n\t\t\t\t\t\t\t\t\t\t<TldrawEditorWithLoadingStore {...withDefaults} store={store} user={user} />\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t// We have no store (it's undefined) so create one and possibly sync it\n\t\t\t\t\t\t\t\t\t<TldrawEditorWithOwnStore {...withDefaults} store={store} user={user} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</EditorComponentsProvider>\n\t\t\t\t\t\t</ContainerProvider>\n\t\t\t\t\t</LicenseProvider>\n\t\t\t\t)}\n\t\t\t</OptionalErrorBoundary>\n\t\t</div>\n\t)\n})\n\nfunction TldrawEditorWithOwnStore(\n\tprops: Required<\n\t\tTldrawEditorProps & { store: undefined; user: TLUser },\n\t\t'shapeUtils' | 'bindingUtils' | 'tools'\n\t>\n) {\n\tconst {\n\t\tdefaultName,\n\t\tsnapshot,\n\t\tinitialData,\n\t\tshapeUtils,\n\t\tbindingUtils,\n\t\tpersistenceKey,\n\t\tsessionId,\n\t\tuser,\n\t\tassets,\n\t\tmigrations,\n\t} = props\n\n\tconst syncedStore = useLocalStore({\n\t\tshapeUtils,\n\t\tbindingUtils,\n\t\tinitialData,\n\t\tpersistenceKey,\n\t\tsessionId,\n\t\tdefaultName,\n\t\tsnapshot,\n\t\tassets,\n\t\tmigrations,\n\t})\n\n\treturn <TldrawEditorWithLoadingStore {...props} store={syncedStore} user={user} />\n}\n\nconst TldrawEditorWithLoadingStore = memo(function TldrawEditorBeforeLoading({\n\tstore,\n\tuser,\n\t...rest\n}: Required<\n\tTldrawEditorProps & { store: TLStoreWithStatus; user: TLUser },\n\t'shapeUtils' | 'bindingUtils' | 'tools'\n>) {\n\tconst container = useContainer()\n\n\tuseLayoutEffect(() => {\n\t\tif (user.userPreferences.get().colorScheme === 'dark') {\n\t\t\tcontainer.classList.remove('tl-theme__light')\n\t\t\tcontainer.classList.add('tl-theme__dark')\n\t\t}\n\t}, [container, user])\n\n\tconst { LoadingScreen } = useEditorComponents()\n\n\tswitch (store.status) {\n\t\tcase 'error': {\n\t\t\t// for error handling, we fall back to the default error boundary.\n\t\t\t// if users want to handle this error differently, they can render\n\t\t\t// their own error screen before the TldrawEditor component\n\t\t\tthrow store.error\n\t\t}\n\t\tcase 'loading': {\n\t\t\treturn LoadingScreen ? <LoadingScreen /> : null\n\t\t}\n\t\tcase 'not-synced': {\n\t\t\tbreak\n\t\t}\n\t\tcase 'synced-local': {\n\t\t\tbreak\n\t\t}\n\t\tcase 'synced-remote': {\n\t\t\tbreak\n\t\t}\n\t}\n\n\treturn <TldrawEditorWithReadyStore {...rest} store={store.store} user={user} />\n})\n\nconst noAutoFocus = () => document.location.search.includes('tldraw_preserve_focus') // || !document.hasFocus() // breaks in nextjs\n\nfunction TldrawEditorWithReadyStore({\n\tonMount,\n\tchildren,\n\tstore,\n\ttools,\n\tshapeUtils,\n\tbindingUtils,\n\tuser,\n\tinitialState,\n\tautoFocus = true,\n\tinferDarkMode,\n\t// eslint-disable-next-line @typescript-eslint/no-deprecated\n\tcameraOptions,\n\toptions,\n\tlicenseKey,\n\tgetShapeVisibility,\n\tassetUrls,\n}: Required<\n\tTldrawEditorProps & {\n\t\tstore: TLStore\n\t\tuser: TLUser\n\t},\n\t'shapeUtils' | 'bindingUtils' | 'tools'\n>) {\n\tconst { ErrorFallback } = useEditorComponents()\n\tconst container = useContainer()\n\n\tconst [editor, setEditor] = useRefState<Editor | null>(null)\n\n\tconst canvasRef = useRef<HTMLDivElement | null>(null)\n\n\tconst _deepLinks = options?.deepLinks\n\tconst deepLinks = useShallowObjectIdentity(_deepLinks === true ? {} : _deepLinks)\n\n\t// props in this ref can be changed without causing the editor to be recreated.\n\tconst editorOptionsRef = useRef({\n\t\t// for these, it's because they're only used when the editor first mounts:\n\t\tautoFocus: autoFocus && !noAutoFocus(),\n\t\tinferDarkMode,\n\t\tinitialState,\n\n\t\t// for these, it's because we keep them up to date in a separate effect:\n\t\tcameraOptions,\n\t\tdeepLinks,\n\t})\n\n\tuseLayoutEffect(() => {\n\t\teditorOptionsRef.current = {\n\t\t\tautoFocus: autoFocus && !noAutoFocus(),\n\t\t\tinferDarkMode,\n\t\t\tinitialState,\n\t\t\tcameraOptions,\n\t\t\tdeepLinks,\n\t\t}\n\t}, [autoFocus, inferDarkMode, initialState, cameraOptions, deepLinks])\n\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tconst { autoFocus, inferDarkMode, initialState, cameraOptions, deepLinks } =\n\t\t\t\teditorOptionsRef.current\n\t\t\tconst editor = new Editor({\n\t\t\t\tstore,\n\t\t\t\tshapeUtils,\n\t\t\t\tbindingUtils,\n\t\t\t\ttools,\n\t\t\t\tgetContainer: () => container,\n\t\t\t\tuser,\n\t\t\t\tinitialState,\n\t\t\t\t// we should check for some kind of query parameter that turns off autofocus\n\t\t\t\tautoFocus,\n\t\t\t\tinferDarkMode,\n\t\t\t\tcameraOptions,\n\t\t\t\toptions,\n\t\t\t\tlicenseKey,\n\t\t\t\tgetShapeVisibility,\n\t\t\t\tfontAssetUrls: assetUrls?.fonts,\n\t\t\t})\n\n\t\t\teditor.updateViewportScreenBounds(canvasRef.current ?? container)\n\n\t\t\t// Use the ref here because we only want to do this once when the editor is created.\n\t\t\t// We don't want changes to the urlStateSync prop to trigger creating new editors.\n\t\t\tif (deepLinks) {\n\t\t\t\tif (!deepLinks?.getUrl) {\n\t\t\t\t\t// load the state from window.location\n\t\t\t\t\teditor.navigateToDeepLink(deepLinks)\n\t\t\t\t} else {\n\t\t\t\t\t// load the state from the provided URL\n\t\t\t\t\teditor.navigateToDeepLink({ ...deepLinks, url: deepLinks.getUrl(editor) })\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetEditor(editor)\n\n\t\t\treturn () => {\n\t\t\t\teditor.dispose()\n\t\t\t}\n\t\t},\n\t\t// if any of these change, we need to recreate the editor.\n\t\t[\n\t\t\tbindingUtils,\n\t\t\tcontainer,\n\t\t\toptions,\n\t\t\tshapeUtils,\n\t\t\tstore,\n\t\t\ttools,\n\t\t\tuser,\n\t\t\tsetEditor,\n\t\t\tlicenseKey,\n\t\t\tgetShapeVisibility,\n\t\t\tassetUrls,\n\t\t]\n\t)\n\n\tuseLayoutEffect(() => {\n\t\tif (!editor) return\n\t\tif (deepLinks) {\n\t\t\treturn editor.registerDeepLinkListener(deepLinks)\n\t\t}\n\t}, [editor, deepLinks])\n\n\t// keep the editor up to date with the latest camera options\n\t// options.cameraOptions takes precedence over the deprecated cameraOptions prop\n\tuseLayoutEffect(() => {\n\t\tif (editor && (cameraOptions || options?.camera)) {\n\t\t\teditor.setCameraOptions({ ...cameraOptions, ...options?.camera })\n\t\t}\n\t}, [editor, cameraOptions, options?.camera])\n\n\tconst crashingError = useSyncExternalStore(\n\t\tuseCallback(\n\t\t\t(onStoreChange) => {\n\t\t\t\tif (editor) {\n\t\t\t\t\teditor.on('crash', onStoreChange)\n\t\t\t\t\treturn () => editor.off('crash', onStoreChange)\n\t\t\t\t}\n\t\t\t\treturn () => {\n\t\t\t\t\t// noop\n\t\t\t\t}\n\t\t\t},\n\t\t\t[editor]\n\t\t),\n\t\t() => editor?.getCrashingError() ?? null\n\t)\n\n\t// For our examples site, we want autoFocus to be true on the examples site, but not\n\t// when embedded in our docs site. If present, the `tldraw_preserve_focus` search param\n\t// overrides the `autoFocus` prop and prevents the editor from focusing immediately,\n\t// however here we also add some logic to focus the editor when the user clicks\n\t// on it and unfocus it when the user clicks away from it.\n\tuseEffect(\n\t\tfunction handleFocusOnPointerDownForPreserveFocusMode() {\n\t\t\tif (!editor) return\n\n\t\t\tfunction handleFocusOnPointerDown() {\n\t\t\t\tif (!editor) return\n\t\t\t\teditor.focus()\n\t\t\t}\n\n\t\t\tfunction handleBlurOnPointerDown() {\n\t\t\t\tif (!editor) return\n\t\t\t\teditor.blur()\n\t\t\t}\n\n\t\t\tif (autoFocus && noAutoFocus()) {\n\t\t\t\teditor.getContainer().addEventListener('pointerdown', handleFocusOnPointerDown)\n\t\t\t\tdocument.body.addEventListener('pointerdown', handleBlurOnPointerDown)\n\n\t\t\t\treturn () => {\n\t\t\t\t\teditor.getContainer()?.removeEventListener('pointerdown', handleFocusOnPointerDown)\n\t\t\t\t\tdocument.body.removeEventListener('pointerdown', handleBlurOnPointerDown)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[editor, autoFocus]\n\t)\n\n\tconst [_fontLoadingState, setFontLoadingState] = useState<{\n\t\teditor: Editor\n\t\tisLoaded: boolean\n\t} | null>(null)\n\tlet fontLoadingState = _fontLoadingState\n\tif (editor !== fontLoadingState?.editor) {\n\t\tfontLoadingState = null\n\t}\n\tuseLayoutEffect(() => {\n\t\tif (!editor) return\n\t\tif (editor.options.maxFontsToLoadBeforeRender === 0) {\n\t\t\tsetFontLoadingState({ editor, isLoaded: true })\n\t\t\treturn\n\t\t}\n\n\t\tlet isCancelled = false\n\n\t\tsetFontLoadingState({ editor, isLoaded: false })\n\n\t\teditor.fonts\n\t\t\t.loadRequiredFontsForCurrentPage(editor.options.maxFontsToLoadBeforeRender)\n\t\t\t.finally(() => {\n\t\t\t\tif (isCancelled) return\n\t\t\t\tsetFontLoadingState({ editor, isLoaded: true })\n\t\t\t})\n\n\t\treturn () => {\n\t\t\tisCancelled = true\n\t\t}\n\t}, [editor])\n\n\tconst { Canvas, LoadingScreen } = useEditorComponents()\n\n\tif (!editor || !fontLoadingState?.isLoaded) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{LoadingScreen && <LoadingScreen />}\n\t\t\t\t<div className=\"tl-canvas\" ref={canvasRef} />\n\t\t\t</>\n\t\t)\n\t}\n\n\treturn (\n\t\t// the top-level tldraw component also renders an error boundary almost\n\t\t// identical to this one. the reason we have two is because this one has\n\t\t// access to `App`, which means that here we can enrich errors with data\n\t\t// from app for reporting, and also still attempt to render the user's\n\t\t// document in the event of an error to reassure them that their work is\n\t\t// not lost.\n\t\t<OptionalErrorBoundary\n\t\t\tfallback={ErrorFallback as any}\n\t\t\tonError={(error) =>\n\t\t\t\teditor.annotateError(error, { origin: 'react.tldraw', willCrashApp: true })\n\t\t\t}\n\t\t>\n\t\t\t{crashingError ? (\n\t\t\t\t<Crash crashingError={crashingError} />\n\t\t\t) : (\n\t\t\t\t<EditorProvider editor={editor}>\n\t\t\t\t\t<Layout onMount={onMount}>\n\t\t\t\t\t\t{children ?? (Canvas ? <Canvas key={editor.contextId} /> : null)}\n\t\t\t\t\t\t<Watermark />\n\t\t\t\t\t</Layout>\n\t\t\t\t</EditorProvider>\n\t\t\t)}\n\t\t</OptionalErrorBoundary>\n\t)\n}\n\nfunction Layout({ children, onMount }: { children: ReactNode; onMount?: TLOnMountHandler }) {\n\tuseZoomCss()\n\tuseCursor()\n\tuseDarkMode()\n\tuseForceUpdate()\n\tuseStateAttribute()\n\tuseOnMount((editor) => {\n\t\tconst teardownStore = editor.store.props.onMount(editor)\n\t\tconst teardownCallback = onMount?.(editor)\n\n\t\treturn () => {\n\t\t\tteardownStore?.()\n\t\t\tteardownCallback?.()\n\t\t}\n\t})\n\n\treturn children\n}\n\nfunction Crash({ crashingError }: { crashingError: unknown }): null {\n\tthrow crashingError\n}\n\n/** @public */\nexport interface LoadingScreenProps {\n\tchildren: ReactNode\n}\n\n/** @public @react */\nexport function LoadingScreen({ children }: LoadingScreenProps) {\n\treturn (\n\t\t<div className=\"tl-loading\" aria-busy=\"true\" tabIndex={0}>\n\t\t\t{children}\n\t\t</div>\n\t)\n}\n\n/** @public @react */\nexport function ErrorScreen({ children }: LoadingScreenProps) {\n\treturn <div className=\"tl-loading\">{children}</div>\n}\n\n/** @internal */\nexport function useOnMount(onMount?: TLOnMountHandler) {\n\tconst editor = useEditor()\n\n\tconst onMountEvent = useEvent((editor: Editor) => {\n\t\tlet teardown: (() => void) | void = undefined\n\t\t// If the user wants to do something when the editor mounts, we make sure it doesn't effect the history.\n\t\t// todo: is this reeeeally what we want to do, or should we leave it up to the caller?\n\t\teditor.run(\n\t\t\t() => {\n\t\t\t\tteardown = onMount?.(editor)\n\t\t\t\teditor.emit('mount')\n\t\t\t},\n\t\t\t{ history: 'ignore' }\n\t\t)\n\t\twindow.tldrawReady = true\n\t\treturn teardown\n\t})\n\n\tReact.useLayoutEffect(() => {\n\t\tif (editor) return onMountEvent?.(editor)\n\t}, [editor, onMountEvent])\n}\n"],"names":["TldrawEditor", "LoadingScreen", "autoFocus", "inferDarkMode", "initialState", "cameraOptions", "deepLinks", "editor"],"mappings":"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"}}]
}