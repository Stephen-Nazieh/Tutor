;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="341448a5-8e2d-7c45-9228-2442b4ef9a3f")}catch(e){}}();
module.exports=[833735,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(326684),e=a.i(454069),f=a.i(52028),g=a.i(88684),h=a.i(113098),i=a.i(238341),j=a.i(324666),k=a.i(141617),l=a.i(342621),m=a.i(856187),n=a.i(660817),o=a.i(619886),p=a.i(822133),q=a.i(425798),r=a.i(207587),s=a.i(656247),t=a.i(494176),u=a.i(750464);function v(){let[a,d]=(0,c.useState)([]),[e,h]=(0,c.useState)(0),[i,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),y=(0,c.useRef)(null),z=(0,c.useRef)(null),A=(0,c.useCallback)(async()=>{try{let a=await fetch("/api/notifications?limit=10",{credentials:"include"});if(!a.ok)return;let b=await a.json();d(b.notifications||[]),h(b.unreadCount||0)}catch{}},[]);(0,c.useEffect)(()=>{A();let a=new EventSource("/api/notifications/stream");return z.current=a,a.addEventListener("notification",a=>{try{let b=JSON.parse(a.data);d(a=>[b,...a].slice(0,10)),h(a=>a+1)}catch{}}),a.addEventListener("error",()=>{}),()=>{a.close(),z.current=null}},[A]),(0,c.useEffect)(()=>{let a=a=>{y.current&&!y.current.contains(a.target)&&v(!1)};return i&&document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[i]);let B=async()=>{x(!0);try{await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({markAll:!0})}),d(a=>a.map(a=>({...a,read:!0}))),h(0)}catch{}x(!1)},C=async a=>{try{await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notificationIds:[a]})}),d(b=>b.map(b=>b.id===a?{...b,read:!0}:b)),h(a=>Math.max(0,a-1))}catch{}};return(0,b.jsxs)("div",{className:"relative",ref:y,children:[(0,b.jsxs)(g.Button,{variant:"ghost",size:"icon",onClick:()=>v(!i),className:"relative","aria-label":`Notifications${e>0?` (${e} unread)`:""}`,children:[(0,b.jsx)(j.Bell,{className:"h-5 w-5"}),e>0&&(0,b.jsx)("span",{className:"absolute -top-0.5 -right-0.5 flex h-4 min-w-[16px] items-center justify-center rounded-full bg-red-500 px-1 text-[10px] font-bold text-white animate-in zoom-in-50",children:e>99?"99+":e})]}),i&&(0,b.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-96 max-h-[480px] bg-white rounded-xl shadow-xl border z-50 flex flex-col animate-in slide-in-from-top-2 duration-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm",children:"Notifications"}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[e>0&&(0,b.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:B,disabled:w,className:"text-xs gap-1 h-7",children:[(0,b.jsx)(r.CheckCheck,{className:"w-3 h-3"}),"Mark all read"]}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:()=>v(!1),className:"h-7 w-7",children:(0,b.jsx)(s.X,{className:"w-3.5 h-3.5"})})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===a.length?(0,b.jsxs)("div",{className:"py-12 text-center text-gray-500",children:[(0,b.jsx)(j.Bell,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),(0,b.jsx)("p",{className:"text-sm",children:"No notifications yet"})]}):a.map(a=>(0,b.jsxs)("div",{className:(0,t.cn)("flex gap-3 px-4 py-3 border-b last:border-b-0 cursor-pointer transition-colors hover:bg-gray-50",!a.read&&"bg-blue-50/40"),onClick:()=>{a.read||C(a.id),a.actionUrl&&(v(!1),window.location.href=a.actionUrl)},children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center mt-0.5",children:(a=>{let c="w-4 h-4";switch(a){case"class":return(0,b.jsx)(k.Calendar,{className:(0,t.cn)(c,"text-blue-500")});case"assignment":return(0,b.jsx)(l.BookOpen,{className:(0,t.cn)(c,"text-amber-500")});case"achievement":return(0,b.jsx)(n.Trophy,{className:(0,t.cn)(c,"text-purple-500")});case"message":return(0,b.jsx)(m.MessageSquare,{className:(0,t.cn)(c,"text-green-500")});case"grade":return(0,b.jsx)(q.Zap,{className:(0,t.cn)(c,"text-indigo-500")});case"payment":return(0,b.jsx)(p.CreditCard,{className:(0,t.cn)(c,"text-emerald-500")});case"reminder":return(0,b.jsx)(o.AlertCircle,{className:(0,t.cn)(c,"text-orange-500")});default:return(0,b.jsx)(j.Bell,{className:(0,t.cn)(c,"text-gray-500")})}})(a.type)}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("p",{className:(0,t.cn)("text-sm",a.read?"text-gray-700":"font-medium"),children:[a.title,!a.read&&(0,b.jsx)("span",{className:"ml-1.5 w-1.5 h-1.5 bg-blue-500 rounded-full inline-block"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:a.message}),(0,b.jsx)("p",{className:"text-[11px] text-gray-400 mt-1",children:(a=>{try{return(0,u.formatDistanceToNow)(new Date(a),{addSuffix:!0})}catch{return""}})(a.createdAt)})]})]},a.id))}),(0,b.jsx)("div",{className:"border-t px-4 py-2",children:(0,b.jsx)(f.default,{href:"/student/notifications",onClick:()=>v(!1),children:(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",className:"w-full text-xs",children:"View all notifications"})})})]})]})}var w=a.i(846438),x=a.i(770446),y=a.i(290385),z=a.i(927910),A=a.i(679238),B=a.i(369125),C=a.i(333340),D=a.i(724403),E=a.i(458563),F=a.i(618349),G=a.i(844194);function H({gamification:a}){return a?(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Level"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:a.level})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(G.TrendingUp,{className:"w-6 h-6 text-blue-600"})})]}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)(D.Progress,{value:a.progress,className:"h-2"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[a.xpToNextLevel," XP to next level"]})]})]})}),(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total XP"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:a.xp.toLocaleString()})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(F.Award,{className:"w-6 h-6 text-green-600"})})]})})}),(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Current Streak"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("p",{className:"text-3xl font-bold",children:a.streakDays}),(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"days"})]})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(x.Flame,{className:"w-6 h-6 text-orange-600"})})]}),a.streakDays>0&&(0,b.jsx)(C.Badge,{className:"mt-2 bg-orange-100 text-orange-800",children:"Keep it up!"})]})}),(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Best Streak"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("p",{className:"text-3xl font-bold",children:a.longestStreak}),(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"days"})]})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(E.Target,{className:"w-6 h-6 text-purple-600"})})]})})})]}):(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Level"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:"1"})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(G.TrendingUp,{className:"w-6 h-6 text-blue-600"})})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Start learning to earn XP"})]})}),(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-6",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total XP"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:"0"})]})}),(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-6",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Current Streak"}),(0,b.jsxs)("p",{className:"text-3xl font-bold",children:["0 ",(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"days"})]})]})}),(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-6",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Best Streak"}),(0,b.jsxs)("p",{className:"text-3xl font-bold",children:["0 ",(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"days"})]})]})})]})}var I=a.i(334760),J=a.i(147779),K=a.i(479680);function L({groups:a,joiningGroupId:c,onJoinGroup:d}){return(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(J.Users,{className:"w-5 h-5 text-blue-500"}),"Study Groups"]}),(0,b.jsx)(f.default,{href:"/student/study-groups",children:(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",children:"View All"})})]})}),(0,b.jsx)(h.CardContent,{children:0===a.length?(0,b.jsxs)("div",{className:"py-8 text-center text-gray-500",children:[(0,b.jsx)(J.Users,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,b.jsx)("p",{className:"font-medium text-gray-700",children:"No study groups yet"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Join or create a group to study with others."}),(0,b.jsx)(f.default,{href:"/student/study-groups",children:(0,b.jsx)(g.Button,{className:"mt-4",children:"Browse study groups"})})]}):(0,b.jsx)("div",{className:"space-y-3",children:a.slice(0,3).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.subject}),(0,b.jsxs)("p",{className:"text-xs text-gray-400",children:[a.currentMembers,"/",a.maxMembers," members"]})]}),a.isMember?(0,b.jsx)(C.Badge,{className:"bg-green-100 text-green-800",children:"Member"}):(0,b.jsx)(g.Button,{size:"sm",disabled:c===a.id,onClick:()=>d(a.id),children:c===a.id?(0,b.jsx)(K.Loader2,{className:"h-4 w-4 animate-spin"}):"Join"})]},a.id))})})]})}function M({loadingLabel:a="Loading your dashboard..."}){return(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8","aria-live":"polite","aria-busy":"true",children:[(0,b.jsx)("p",{className:"sr-only",children:a}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("div",{className:"h-9 w-64 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-5 w-80 mt-2 bg-gray-100 rounded animate-pulse"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(a=>(0,b.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,b.jsx)("div",{className:"h-4 w-16 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-9 w-12 mt-3 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-2 w-full mt-4 bg-gray-100 rounded animate-pulse"})]},a))}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,b.jsx)("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"space-y-3 mt-4",children:[1,2,3].map(a=>(0,b.jsxs)("div",{className:"flex gap-4 p-3 border rounded-lg",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gray-100 animate-pulse"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"h-4 w-3/4 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-3 w-1/2 mt-2 bg-gray-100 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-2 w-full mt-2 bg-gray-100 rounded animate-pulse"})]})]},a))})]}),(0,b.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,b.jsx)("div",{className:"h-6 w-44 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"space-y-3 mt-4",children:[1,2].map(a=>(0,b.jsx)("div",{className:"h-20 bg-gray-50 rounded-lg animate-pulse"},a))})]}),(0,b.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,b.jsx)("div",{className:"h-6 w-32 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-24 mt-4 bg-gray-50 rounded animate-pulse"})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,b.jsx)("div",{className:"h-6 w-20 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"space-y-3 mt-4",children:[1,2,3,4].map(a=>(0,b.jsx)("div",{children:(0,b.jsx)("div",{className:"h-3 w-full bg-gray-100 rounded animate-pulse"})},a))})]}),(0,b.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,b.jsx)("div",{className:"h-6 w-36 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"space-y-3 mt-4",children:[1,2].map(a=>(0,b.jsx)("div",{className:"h-16 bg-gray-50 rounded-lg animate-pulse"},a))})]}),(0,b.jsxs)("div",{className:"rounded-lg border bg-white p-6",children:[(0,b.jsx)("div",{className:"h-6 w-28 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"space-y-3 mt-4",children:[1,2].map(a=>(0,b.jsx)("div",{className:"h-14 bg-gray-50 rounded-lg animate-pulse"},a))})]})]})]})]})}var N=a.i(293357);let O=(0,N.default)("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);function P(){return(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"Quick actions"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsx)(g.Button,{variant:"outline",className:"w-full justify-center",asChild:!0,children:(0,b.jsxs)(f.default,{href:"/student/live/join",children:[(0,b.jsx)(z.Video,{className:"w-4 h-4 mr-2"})," Join Class"]})}),(0,b.jsx)(g.Button,{variant:"outline",className:"w-full justify-center",asChild:!0,children:(0,b.jsxs)(f.default,{href:"/student/subjects/browse",children:[(0,b.jsx)(l.BookOpen,{className:"w-4 h-4 mr-2"})," Browse"]})}),(0,b.jsx)(g.Button,{variant:"outline",className:"w-full justify-center",asChild:!0,children:(0,b.jsxs)(f.default,{href:"/student/ai-tutor",children:[(0,b.jsx)(m.MessageSquare,{className:"w-4 h-4 mr-2"})," AI Tutor"]})}),(0,b.jsx)(g.Button,{variant:"outline",className:"w-full justify-center",asChild:!0,children:(0,b.jsxs)(f.default,{href:"/student/missions",children:[(0,b.jsx)(E.Target,{className:"w-4 h-4 mr-2"})," Missions"]})}),(0,b.jsx)(g.Button,{variant:"outline",className:"w-full justify-center",asChild:!0,children:(0,b.jsxs)(f.default,{href:"/student/scores",children:[(0,b.jsx)(O,{className:"w-4 h-4 mr-2"})," Scores"]})})]})})]})}var Q=a.i(892094),R=a.i(595484),S=a.i(283284),T=a.i(845279),U=a.i(361749);let V=(0,N.default)("school",[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);function W({courses:a,onCourseRemoved:d}){let[e,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),m=e||a.length<=5?a:a.slice(0,5),o=a.length>5,p=async()=>{let a=await fetch("/api/csrf",{credentials:"include"}),b=await a.json().catch(()=>({}));return b?.token??null},q=async a=>{k(a.subject);try{let b=await p(),c=await fetch("/api/student/subjects/unenroll",{method:"POST",headers:{"Content-Type":"application/json",...b&&{"X-CSRF-Token":b}},credentials:"include",body:JSON.stringify({subjectCode:a.subject})}),e=await c.json().catch(()=>({}));if(!c.ok)return void w.toast.error(e?.message??"Failed to remove subject");w.toast.success("Subject removed"),d?.()}catch{w.toast.error("Failed to remove subject")}finally{k(null)}};return(0,b.jsxs)(h.Card,{className:"mb-8",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,b.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(l.BookOpen,{className:"w-5 h-5 text-blue-500"}),"My courses"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.default,{href:"/student/courses?tab=browse",children:(0,b.jsxs)(g.Button,{variant:"ghost",size:"sm",children:[(0,b.jsx)(R.Plus,{className:"w-4 h-4 mr-1"}),"Add subject"]})}),a.length>0&&(0,b.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:()=>i(a=>!a),children:[(0,b.jsx)(S.List,{className:"w-4 h-4 mr-1"}),e&&o?"Show less":"Browse all"]})]})]})}),(0,b.jsx)(h.CardContent,{children:0===a.length?(0,b.jsxs)("div",{className:"py-8 text-center text-gray-500",children:[(0,b.jsx)(l.BookOpen,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,b.jsx)("p",{className:"font-medium text-gray-700",children:"No courses yet"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Browse subjects and enroll in a course to get started."}),(0,b.jsx)(f.default,{href:"/student/courses?tab=browse",children:(0,b.jsx)(g.Button,{className:"mt-4",children:"Add subject"})})]}):(0,b.jsx)("div",{className:"space-y-4",children:m.map(a=>(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4 px-3 py-4 sm:py-3 rounded-lg border hover:bg-gray-50 transition-colors",children:[(0,b.jsxs)(f.default,{href:`/student/subjects/${encodeURIComponent(a.subject)}`,className:"flex flex-1 min-w-0 items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(l.BookOpen,{className:"w-6 h-6 text-blue-600"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-medium truncate",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:a.subject}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)(D.Progress,{value:a.progress,className:"h-2 flex-1"}),(0,b.jsxs)("span",{className:"text-xs text-gray-500 w-10 text-right",children:[a.progress,"%"]})]})]}),(0,b.jsx)(Q.ChevronRight,{className:"w-5 h-5 text-gray-400 shrink-0"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-1 shrink-0 flex-wrap justify-end",children:[(0,b.jsx)(g.Button,{variant:"default",size:"sm",className:"h-8 text-xs",asChild:!0,children:(0,b.jsxs)(f.default,{href:"browse"===a.enrollmentSource?`/student/subjects/${encodeURIComponent(a.subject)}/signup`:`/student/courses?subject=${encodeURIComponent(a.subject)}`,onClick:a=>a.stopPropagation(),children:[(0,b.jsx)(V,{className:"w-3 h-3 mr-1"}),"Enter classroom"]})}),"signup"===a.enrollmentSource||null==a.enrollmentSource?(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",className:"h-8 text-xs",disabled:!0,children:[(0,b.jsx)(T.UserPlus,{className:"w-3 h-3 mr-1"}),"Enrolled"]}):(0,b.jsx)(g.Button,{variant:"outline",size:"sm",className:"h-8 text-xs",asChild:!0,children:(0,b.jsxs)(f.default,{href:`/student/subjects/${encodeURIComponent(a.subject)}/signup`,onClick:a=>a.stopPropagation(),children:[(0,b.jsx)(T.UserPlus,{className:"w-3 h-3 mr-1"}),"Sign up"]})}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",className:"h-8 text-xs",asChild:!0,children:(0,b.jsxs)(f.default,{href:"/student/scores",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)(n.Trophy,{className:"w-3 h-3 mr-1"}),"My scores"]})}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",className:"h-8 text-xs",asChild:!0,children:(0,b.jsxs)(f.default,{href:`/student/subjects/${encodeURIComponent(a.subject)}/courses/${encodeURIComponent(a.id)}/details`,onClick:a=>a.stopPropagation(),children:[(0,b.jsx)(U.FileText,{className:"w-3 h-3 mr-1"}),"View course details"]})}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",className:"h-8 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>q(a),disabled:j===a.subject,children:j===a.subject?(0,b.jsx)(K.Loader2,{className:"w-4 h-4 animate-spin"}):"Remove"})]})]},a.id))})})]})}var X=a.i(868606),Y=a.i(945347),Z=a.i(475045),$=a.i(50730),_=a.i(378232),aa=a.i(849639);function ab(a){return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}function ac(a){return new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function ad(a){return new Date(a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function ae({initialEvents:a,onRefresh:d,contents:i=[],upcomingClasses:j=[],bookingClassId:k,onBookClass:m}){(0,e.useRouter)();let[n,o]=(0,c.useState)("calendar"),[p,q]=(0,c.useState)(()=>new Date),[r,s]=(0,c.useState)(void 0),[u,v]=(0,c.useState)(a??[]),[w,x]=(0,c.useState)(!a?.length),[y,A]=(0,c.useState)([]),[B,E]=(0,c.useState)(!0),F=(0,c.useMemo)(()=>new Date(p.getFullYear(),p.getMonth(),1),[p]),G=(0,c.useMemo)(()=>new Date(p.getFullYear(),p.getMonth()+1,0),[p]);(0,c.useEffect)(()=>{let a=!1,b=F.toISOString(),c=G.toISOString();return x(!0),fetch(`/api/student/calendar/events?start=${encodeURIComponent(b)}&end=${encodeURIComponent(c)}`,{credentials:"include"}).then(a=>a.json()).then(b=>{a||(v(Array.isArray(b?.events)?b.events:[]),x(!1))}).catch(()=>{a||(v([]),x(!1))}),()=>{a=!0}},[F,G,d]),(0,c.useEffect)(()=>{let a=!1;return E(!0),fetch("/api/classes?myBookings=true",{credentials:"include"}).then(a=>a.json()).then(b=>{a||(A(Array.isArray(b?.classes)?b.classes.map(a=>({id:a.id,title:a.title,subject:a.subject,tutorName:a.tutor?.name||"Unknown Tutor",scheduledAt:a.scheduledAt,duration:a.duration||60,type:a.type||"online",students:a._count?.participants||0,maxStudents:a.maxStudents||50,gradeLevel:a.gradeLevel,isBooked:a.isBooked,requiresPayment:a.requiresPayment,price:a.price})):[]),E(!1))}).catch(()=>{a||(A([]),E(!1))}),()=>{a=!0}},[d]);let H=(0,c.useMemo)(()=>{let a=new Map;for(let b of u){let c=ab(new Date(b.start));a.has(c)||a.set(c,[]),a.get(c).push(b)}return a},[u]),I=(0,c.useMemo)(()=>u.filter(a=>{let b=new Date(a.start);return b>=F&&b<=G}).sort((a,b)=>new Date(a.start).getTime()-new Date(b.start).getTime()),[u,F,G]),L=r?ab(r):null,M=L?(H.get(L)||[]).sort((a,b)=>new Date(a.start).getTime()-new Date(b.start).getTime()):[],N=(0,c.useMemo)(()=>{let a={};for(let[b,c]of H.entries())c.length>0&&(a[`day-${c.length}`]=a[`day-${c.length}`]||[],a[`day-${c.length}`].push(new Date(b+"T00:00:00")));return a},[H]),O=(0,c.useMemo)(()=>{let a={};for(let b=1;b<=5;b++)a[`day-${b}`]="bg-blue-100 text-blue-700 font-semibold rounded-full";return a},[]),P=(0,c.useMemo)(()=>({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse",head_row:"flex w-full mb-2",head_cell:"flex-1 h-8 flex items-center justify-center text-[0.7rem] font-medium text-muted-foreground",row:"flex w-full mt-1",cell:"flex-1 h-10 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:"w-9 h-9 p-0 font-normal aria-selected:opacity-100 hover:bg-accent rounded-md mx-auto",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50"}),[]),R=i.filter(a=>a.progress>0&&a.progress<100);return(0,b.jsx)(h.Card,{className:"w-full",children:(0,b.jsxs)(X.Tabs,{value:n,onValueChange:o,children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)(X.TabsList,{className:"grid w-full grid-cols-4",children:[(0,b.jsxs)(X.TabsTrigger,{value:"calendar",className:"flex items-center gap-2",children:[(0,b.jsx)(Z.CalendarDays,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"My Calendar"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Calendar"})]}),(0,b.jsxs)(X.TabsTrigger,{value:"classes",className:"flex items-center gap-2",children:[(0,b.jsx)(l.BookOpen,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"My Classes"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Classes"})]}),(0,b.jsxs)(X.TabsTrigger,{value:"learning",className:"flex items-center gap-2",children:[(0,b.jsx)(aa.Play,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Continue"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Learn"})]}),(0,b.jsxs)(X.TabsTrigger,{value:"upcoming",className:"flex items-center gap-2",children:[(0,b.jsx)($.Clock,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Upcoming"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Soon"})]})]})}),(0,b.jsxs)(h.CardContent,{children:[(0,b.jsxs)(X.TabsContent,{value:"calendar",className:"mt-0 space-y-4",children:[(0,b.jsx)("div",{className:"calendar-single-letter-weekdays",children:(0,b.jsx)(Y.Calendar,{mode:"single",month:p,onMonthChange:q,selected:r,onSelect:s,modifiers:N,modifiersClassNames:O,className:"rounded-md border w-full p-4",classNames:P,disabled:w,showOutsideDays:!1,weekStartsOn:0})}),(0,b.jsx)("style",{children:`
              .calendar-single-letter-weekdays .rdp-head_cell {
                font-size: 0.7rem;
                text-transform: uppercase;
              }
              .calendar-single-letter-weekdays .rdp-head_cell abbr {
                text-decoration: none;
              }
            `}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-1",children:[(0,b.jsx)($.Clock,{className:"w-4 h-4"}),r?`Classes on ${r.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}`:"Classes this month"]}),w?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Loading…"}):0===(r?M:I).length?(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[r?"No classes on this day.":"No classes this month."," Book a class from the classes page."]}):(0,b.jsx)("ul",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:(r?M:I).map(a=>(0,b.jsx)("li",{children:(0,b.jsxs)(f.default,{href:"/student/courses",className:"block p-3 rounded-lg border bg-gray-50/80 hover:bg-gray-100 transition-colors text-sm",children:[(0,b.jsx)("span",{className:"font-medium text-gray-900",children:a.title}),(0,b.jsxs)("span",{className:"text-gray-500 ml-1",children:["· ",a.subject]}),(0,b.jsxs)("span",{className:"text-gray-500 block text-xs mt-0.5",children:[ac(a.start)," – ",ac(a.end),a.tutorName?` \xb7 ${a.tutorName}`:""]})]})},a.id))})]})]}),(0,b.jsx)(X.TabsContent,{value:"classes",className:"mt-0",children:B?(0,b.jsx)("div",{className:"py-8 text-center",children:(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Loading your classes..."})}):0===y.length?(0,b.jsxs)("div",{className:"py-8 text-center",children:[(0,b.jsx)(l.BookOpen,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-500",children:"You haven't booked any classes yet."}),(0,b.jsx)(g.Button,{className:"mt-4",asChild:!0,children:(0,b.jsx)(f.default,{href:"/student/courses",children:"Browse Classes"})})]}):(0,b.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:y.map(a=>(0,b.jsx)("div",{className:"p-4 rounded-lg border bg-gray-50/50 hover:bg-gray-100 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-900",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.subject}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(Z.CalendarDays,{className:"w-3 h-3"}),ad(a.scheduledAt)]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)($.Clock,{className:"w-3 h-3"}),ac(a.scheduledAt)]}),(0,b.jsxs)("span",{className:(0,t.cn)("flex items-center gap-1","online"===a.type?"text-green-600":"text-blue-600"),children:["online"===a.type?(0,b.jsx)(z.Video,{className:"w-3 h-3"}):(0,b.jsx)(_.MapPin,{className:"w-3 h-3"}),"online"===a.type?"Online":"In-Person"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(J.Users,{className:"w-3 h-3"}),a.students,"/",a.maxStudents," students"]}),(0,b.jsxs)("span",{children:["Tutor: ",a.tutorName]})]})]}),(0,b.jsx)(g.Button,{size:"sm",variant:"outline",asChild:!0,children:(0,b.jsx)(f.default,{href:`/student/courses/${a.id}`,children:"Details"})})]})},a.id))})}),(0,b.jsx)(X.TabsContent,{value:"learning",className:"mt-0",children:0===R.length?(0,b.jsxs)("div",{className:"py-8 text-center text-gray-500",children:[(0,b.jsx)(l.BookOpen,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,b.jsx)("p",{className:"font-medium text-gray-700",children:"No courses in progress"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Browse subjects and start learning."}),(0,b.jsx)(f.default,{href:"/student/courses?tab=browse",children:(0,b.jsx)(g.Button,{className:"mt-4",children:"Browse subjects"})})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[R.slice(0,5).map(a=>(0,b.jsx)(f.default,{href:`/student/learn/${a.id}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-lg border hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(l.BookOpen,{className:"w-6 h-6 text-blue-600"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-medium truncate",children:a.topic}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.subject}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)(D.Progress,{value:a.progress,className:"h-2 flex-1"}),(0,b.jsxs)("span",{className:"text-xs text-gray-500 w-10 text-right",children:[a.progress,"%"]})]})]}),(0,b.jsx)(Q.ChevronRight,{className:"w-5 h-5 text-gray-400"})]})},a.id)),R.length>5&&(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)(f.default,{href:"/student/courses?tab=browse",children:(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",children:["View all ",R.length," courses"]})})})]})}),(0,b.jsx)(X.TabsContent,{value:"upcoming",className:"mt-0",children:0===j.length?(0,b.jsxs)("div",{className:"py-8 text-center text-gray-500",children:[(0,b.jsx)($.Clock,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,b.jsx)("p",{className:"font-medium text-gray-700",children:"No upcoming classes"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"View available classes to book."}),(0,b.jsx)(f.default,{href:"/student/courses",children:(0,b.jsx)(g.Button,{className:"mt-4",children:"View classes"})})]}):(0,b.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:j.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h4",{className:"font-medium",children:a.title}),a.isBooked&&(0,b.jsx)(C.Badge,{className:"bg-green-100 text-green-800",children:"Booked"})]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[a.subject," • ",ad(a.scheduledAt)]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-1",children:[(0,b.jsx)(J.Users,{className:"w-3 h-3"}),a.students,"/",a.maxStudents," students",null!=a.price&&a.price>0&&(0,b.jsxs)("span",{className:"text-green-600 font-medium",children:["SGD ",a.price.toFixed(2)]})]})]}),!a.isBooked&&m&&(0,b.jsx)(g.Button,{size:"sm",disabled:k===a.id||a.students>=a.maxStudents,onClick:()=>m(a.id),children:k===a.id?(0,b.jsx)(K.Loader2,{className:"h-4 w-4 animate-spin"}):a.students>=a.maxStudents?"Full":"Book"})]},a.id))})})]})]})})}var af=a.i(725845),ag=a.i(121538),ah=a.i(748151),ai=a.i(635668),aj=a.i(879442);function ak(){let[a,d]=(0,c.useState)(null),[e,g]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{fetch("/api/student/learning-path").then(a=>a.json()).then(a=>{a.success&&d(a.data)}).catch(console.error).finally(()=>g(!1))},[]),e)?(0,b.jsxs)(h.Card,{className:"mb-8 animate-pulse",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsx)("div",{className:"h-5 bg-gray-200 rounded w-40"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"h-16 bg-gray-100 rounded"}),(0,b.jsx)("div",{className:"h-12 bg-gray-100 rounded"}),(0,b.jsx)("div",{className:"h-12 bg-gray-100 rounded"})]})})]}):a&&0!==a.totalCount?(0,b.jsxs)(h.Card,{className:"mb-8",children:[(0,b.jsxs)(h.CardHeader,{className:"pb-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(af.Route,{className:"w-5 h-5 text-indigo-500"}),"Your Learning Path"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,b.jsxs)("span",{children:[a.completedCount,"/",a.totalCount," lessons"]}),(0,b.jsxs)(C.Badge,{variant:"secondary",className:"text-xs",children:[a.progressPercent,"%"]})]})]}),(0,b.jsx)(D.Progress,{value:a.progressPercent,className:"h-1.5 mt-2"})]}),(0,b.jsxs)(h.CardContent,{children:[a.currentLesson&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"in_progress"===a.currentLesson.status?"Continue where you left off":"Start here"}),(0,b.jsx)(f.default,{href:`/student/learn/${a.currentLesson.lessonId}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border-2 border-blue-200 bg-blue-50/50 hover:bg-blue-50 transition-colors",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(ai.PlayCircle,{className:"w-5 h-5 text-blue-600"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h4",{className:"font-medium text-sm truncate",children:a.currentLesson.title}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.currentLesson.courseName," · ",a.currentLesson.moduleTitle]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,b.jsx)($.Clock,{className:"w-3 h-3"}),a.currentLesson.duration,"m"]}),(0,b.jsx)(Q.ChevronRight,{className:"w-4 h-4 text-blue-400"})]})})]}),a.nextLessons.length>0&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Up next"}),(0,b.jsx)("div",{className:"space-y-1.5",children:a.nextLessons.map((a,c)=>{var d;return(0,b.jsxs)("div",{className:"flex items-center gap-3 p-2.5 rounded-lg border hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("span",{className:"text-xs font-medium text-gray-400 w-5 text-center",children:c+1}),"completed"===(d=a.status)?(0,b.jsx)(ah.CheckCircle2,{className:"w-4 h-4 text-green-500"}):"in_progress"===d?(0,b.jsx)(ai.PlayCircle,{className:"w-4 h-4 text-blue-500"}):(0,b.jsx)(aj.Circle,{className:"w-4 h-4 text-gray-300"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm truncate",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-gray-400 truncate",children:a.courseName})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,b.jsx)($.Clock,{className:"w-3 h-3"}),a.duration,"m"]})]},a.lessonId)})})]}),a.focusAreas.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Focus areas"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:a.focusAreas.map(a=>(0,b.jsxs)(C.Badge,{variant:"outline",className:"text-xs border-orange-200 text-orange-700 bg-orange-50 gap-1",children:[(0,b.jsx)(ag.AlertTriangle,{className:"w-3 h-3"}),a.topic]},a.topic))})]})]})]}):null}function al(){let[a,d]=(0,c.useState)([]),[e,i]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{fetch("/api/student/missed-classes?filter=week").then(a=>a.json()).then(a=>{a.success&&d(a.data.sessions)}).catch(console.error).finally(()=>i(!1))},[]),e)?(0,b.jsxs)(h.Card,{className:"mb-8 animate-pulse",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsx)("div",{className:"h-5 bg-gray-200 rounded w-36"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"h-16 bg-gray-100 rounded"})})]}):(0,b.jsxs)(h.Card,{className:"mb-8",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(z.Video,{className:"w-5 h-5 text-red-500"}),"Missed Classes",a.length>0&&(0,b.jsx)(C.Badge,{variant:"destructive",className:"text-xs ml-1",children:a.length})]}),(0,b.jsx)(f.default,{href:"/student/missed-classes",children:(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",children:"View All"})})]})}),(0,b.jsx)(h.CardContent,{children:0===a.length?(0,b.jsxs)("div",{className:"py-4 text-center text-gray-500",children:[(0,b.jsx)(ah.CheckCircle2,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"All caught up!"}),(0,b.jsx)("p",{className:"text-xs mt-0.5",children:"No missed classes this week"})]}):(0,b.jsx)("div",{className:"space-y-2.5",children:a.slice(0,2).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2.5 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium truncate",children:a.title}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.subject," · ",new Date(a.scheduledAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),a.hasRecording?(0,b.jsx)("a",{href:a.recordingUrl,target:"_blank",rel:"noopener noreferrer",children:(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:[(0,b.jsx)(aa.Play,{className:"w-3 h-3"})," Watch"]})}):(0,b.jsx)(C.Badge,{variant:"secondary",className:"text-xs",children:"No recording"})]},a.id))})})]})}var am=a.i(79703);function an(){let[a,d]=(0,c.useState)([]),[e,i]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{fetch("/api/student/assignments").then(a=>a.json()).then(a=>{d((a.assignments||[]).filter(a=>"pending"===a.status).sort((a,b)=>a.dueDate?b.dueDate?new Date(a.dueDate).getTime()-new Date(b.dueDate).getTime():-1:1))}).catch(console.error).finally(()=>i(!1))},[]),e)?(0,b.jsxs)(h.Card,{className:"mb-8 animate-pulse",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsx)("div",{className:"h-5 bg-gray-200 rounded w-44"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"h-16 bg-gray-100 rounded"})})]}):(0,b.jsxs)(h.Card,{className:"mb-8",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(am.ClipboardList,{className:"w-5 h-5 text-blue-500"}),"Pending Assignments",a.length>0&&(0,b.jsx)(C.Badge,{className:"bg-blue-100 text-blue-800 text-xs ml-1",children:a.length})]}),(0,b.jsx)(f.default,{href:"/student/assignments",children:(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",children:"View All"})})]})}),(0,b.jsx)(h.CardContent,{children:0===a.length?(0,b.jsxs)("div",{className:"py-4 text-center text-gray-500",children:[(0,b.jsx)(ah.CheckCircle2,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"All done!"}),(0,b.jsx)("p",{className:"text-xs mt-0.5",children:"No pending assignments"})]}):(0,b.jsx)("div",{className:"space-y-2.5",children:a.slice(0,3).map(a=>{let c=a.dueDate?(a=>{let b=new Date(a).getTime()-Date.now();if(b<=0)return{text:"Overdue",urgent:!0};let c=Math.floor(b/36e5),d=Math.floor(c/24);return d>0?{text:`${d}d left`,urgent:d<=1}:{text:`${c}h left`,urgent:c<=6}})(a.dueDate):null;return(0,b.jsx)(f.default,{href:"/student/assignments",children:(0,b.jsxs)("div",{className:"flex items-center justify-between p-2.5 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium truncate",children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,b.jsx)(C.Badge,{variant:"secondary",className:"text-xs capitalize",children:a.type}),(0,b.jsxs)("span",{className:"text-xs text-gray-400",children:[a.maxScore," pts"]})]})]}),c&&(0,b.jsxs)(C.Badge,{variant:c.urgent?"destructive":"outline",className:"text-xs gap-1 flex-shrink-0",children:[c.urgent?(0,b.jsx)(o.AlertCircle,{className:"w-3 h-3"}):(0,b.jsx)($.Clock,{className:"w-3 h-3"}),c.text]})]})},a.id)})})})]})}var ao=a.i(94261),ap=a.i(970034),aq=a.i(308557),ar=a.i(311514);function as({subjectCurves:a,upcomingReviews:d,overdueReviews:e,totalDue:f,onReviewClick:i,onContentClick:j,className:k}){var m;let n,p,[q,r]=(0,c.useState)(null),[s,u]=(0,c.useState)(null),v=(0,c.useCallback)(a=>50+a/30*720,[800]),w=(0,c.useCallback)(a=>240-a/100*220,[]),x=(0,c.useCallback)(a=>{if(a.length<2)return"";let b=a.map(a=>({x:v(a.day),y:w(a.retention)})),c=`M ${b[0].x} ${b[0].y}`;for(let d=0;d<b.length-1;d++){let e=b[d],f=b[d+1];if(a[d],a[d+1].isReviewPoint){let a=(e.x+f.x)/2;c+=` L ${a} ${e.y} L ${f.x} ${f.y}`}else{let a=e.x+(f.x-e.x)*.5,b=e.y,d=e.x+(f.x-e.x)*.5,g=f.y+(e.y-f.y)*.3;c+=` C ${a} ${b}, ${d} ${g}, ${f.x} ${f.y}`}}return c},[v,w]),y=(0,c.useMemo)(()=>q?a.filter(a=>a.subjectId===q):a,[a,q]),z=(0,c.useMemo)(()=>q?a.filter(a=>a.subjectId!==q):[],[a,q]),A=a=>a>=80?"text-green-600":a>=60?"text-yellow-600":a>=40?"text-orange-600":"text-red-600";return(0,b.jsx)(ao.TooltipProvider,{children:(0,b.jsxs)(h.Card,{className:(0,t.cn)("overflow-hidden",k),children:[(0,b.jsx)(h.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ap.Brain,{className:"w-5 h-5 text-purple-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"Memory Retention"}),(0,b.jsx)(h.CardDescription,{children:"Spaced repetition review schedule based on forgetting curve"})]})]}),f>0&&(0,b.jsxs)(C.Badge,{variant:e.length>0?"destructive":"default",className:"gap-1",children:[(0,b.jsx)(o.AlertCircle,{className:"w-3 h-3"}),f," due"]})]})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Subjects:"}),a.map(a=>(0,b.jsxs)("button",{onMouseEnter:()=>r(a.subjectId),onMouseLeave:()=>r(null),onClick:()=>r(q===a.subjectId?null:a.subjectId),className:(0,t.cn)("flex items-center gap-1.5 px-2 py-1 rounded-full transition-all",q===a.subjectId?"bg-gray-100 ring-2 ring-offset-1":q?"opacity-40":"hover:bg-gray-50"),style:{"--ring-color":a.color,ringColor:q===a.subjectId?a.color:void 0},children:[(0,b.jsx)("span",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:a.color}}),(0,b.jsx)("span",{className:"font-medium",children:a.subjectName})]},a.subjectId)),0===a.length&&(0,b.jsx)("span",{className:"text-gray-400 italic",children:"No subjects with review data"})]}),(0,b.jsxs)("div",{className:"relative w-full overflow-x-auto",children:[(0,b.jsxs)("svg",{viewBox:"0 0 800 280",className:"w-full min-w-[600px]",preserveAspectRatio:"xMidYMid meet",children:[(0,b.jsxs)("defs",{children:[(0,b.jsx)("pattern",{id:"grid",width:"50",height:"28",patternUnits:"userSpaceOnUse",children:(0,b.jsx)("path",{d:"M 50 0 L 0 0 0 28",fill:"none",stroke:"#f0f0f0",strokeWidth:"1"})}),(0,b.jsxs)("linearGradient",{id:"areaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.1"}),(0,b.jsx)("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:"0"})]})]}),(0,b.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),[0,25,50,75,100].map(a=>(0,b.jsxs)("g",{children:[(0,b.jsxs)("text",{x:40,y:w(a)+4,textAnchor:"end",className:"text-xs fill-gray-400",children:[a,"%"]}),(0,b.jsx)("line",{x1:50,y1:w(a),x2:770,y2:w(a),stroke:"#e5e5e5",strokeDasharray:0===a?void 0:"4,4"})]},a)),[0,7,14,21,30].map(a=>(0,b.jsxs)("g",{children:[(0,b.jsx)("text",{x:v(a),y:270,textAnchor:"middle",className:"text-xs fill-gray-400",children:0===a?"Today":`+${a}d`}),(0,b.jsx)("line",{x1:v(a),y1:20,x2:v(a),y2:240,stroke:"#e5e5e5",strokeDasharray:"2,2"})]},a)),(0,b.jsx)("text",{x:20,y:140,textAnchor:"middle",transform:"rotate(-90, 20, 140)",className:"text-xs fill-gray-500 font-medium",children:"Retention"}),(0,b.jsx)("text",{x:400,y:278,textAnchor:"middle",className:"text-xs fill-gray-500 font-medium",children:"Time"}),z.map(a=>(0,b.jsx)("g",{opacity:.2,children:(0,b.jsx)("path",{d:x(a.dataPoints),fill:"none",stroke:a.color,strokeWidth:2})},a.subjectId)),y.map(a=>(0,b.jsxs)("g",{children:[(0,b.jsx)("path",{d:`${x(a.dataPoints)} L ${v(30)} ${w(0)} L ${v(0)} ${w(0)} Z`,fill:a.color,opacity:.05}),(0,b.jsx)("path",{d:x(a.dataPoints),fill:"none",stroke:a.color,strokeWidth:q===a.subjectId?3:2,className:"transition-all duration-200"}),a.dataPoints.filter(a=>a.isReviewPoint).map((c,d)=>{let e=v(c.day),f=w(c.retention),g=new Date(c.date)<new Date&&0===c.day;return(0,b.jsxs)("g",{children:[g&&(0,b.jsxs)("circle",{cx:e,cy:f,r:8,fill:a.color,opacity:.3,children:[(0,b.jsx)("animate",{attributeName:"r",values:"8;12;8",dur:"2s",repeatCount:"indefinite"}),(0,b.jsx)("animate",{attributeName:"opacity",values:"0.3;0;0.3",dur:"2s",repeatCount:"indefinite"})]}),(0,b.jsx)("circle",{cx:e,cy:f,r:6,fill:g?"#ef4444":"white",stroke:a.color,strokeWidth:3,className:"cursor-pointer transition-all duration-200 hover:r-8",onClick:()=>{c.contentId&&j&&j(c.contentId,c.contentTitle||""),u({subject:a,point:c,x:e,y:f})}})]},d)})]},a.subjectId))]}),s&&(0,b.jsxs)("div",{className:"absolute bg-white border rounded-lg shadow-lg p-3 z-10 min-w-[200px]",style:{left:`${s.x/800*100}%`,top:`${s.y/280*100}%`,transform:"translate(-50%, -120%)"},children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.subject.color}}),(0,b.jsx)("span",{className:"font-medium text-sm",children:s.subject.subjectName})]}),(0,b.jsx)("p",{className:"text-sm font-medium",children:s.point.contentTitle}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:(n=new Date(s.point.date),p=new Date,n.toDateString()===p.toDateString()?"Today":n.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(m=s.point.retention)>=80?(0,b.jsx)(C.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Strong"}):m>=60?(0,b.jsx)(C.Badge,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Good"}):m>=40?(0,b.jsx)(C.Badge,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Fading"}):(0,b.jsx)(C.Badge,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Critical"}),s.point.contentId&&(0,b.jsx)(g.Button,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>j?.(s.point.contentId,s.point.contentTitle||""),children:"Review"})]}),(0,b.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 -bottom-2 w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-t-[8px] border-t-white"})]})]}),(d.length>0||e.length>0)&&(0,b.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,b.jsxs)("h4",{className:"font-medium text-sm flex items-center gap-2",children:[(0,b.jsx)($.Clock,{className:"w-4 h-4"}),"Upcoming Reviews"]}),e.slice(0,3).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(o.AlertCircle,{className:"w-5 h-5 text-red-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:a.contentTitle}),(0,b.jsxs)("p",{className:"text-xs text-red-600",children:[a.daysOverdue," day",1!==a.daysOverdue?"s":""," overdue"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:(0,t.cn)("text-sm font-medium",A(a.currentRetention)),children:[a.currentRetention,"%"]}),(0,b.jsx)(g.Button,{size:"sm",variant:"destructive",onClick:()=>i?.(a),children:"Review Now"})]})]},a.id)),d.slice(0,e.length>0?2:4).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:a.subjectColor}}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:a.contentTitle}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:0===a.daysUntilDue?"Due today":`In ${a.daysUntilDue} day${1!==a.daysUntilDue?"s":""}`})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:(0,t.cn)("text-sm font-medium",A(a.currentRetention)),children:[a.currentRetention,"%"]}),(0,b.jsx)(g.Button,{size:"sm",variant:"outline",onClick:()=>i?.(a),children:0===a.daysUntilDue?"Review":"Preview"})]})]},a.id)),d.length+e.length>5&&(0,b.jsxs)(g.Button,{variant:"ghost",size:"sm",className:"w-full",children:["View all ",d.length+e.length," reviews"]})]}),0===d.length&&0===e.length&&0===a.length&&(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(ap.Brain,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,b.jsx)("h4",{className:"font-medium text-gray-700",children:"No reviews scheduled yet"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Start learning and complete quizzes to build your review schedule"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 pt-2 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(aq.TrendingDown,{className:"w-3 h-3"}),"Lines show memory decay over time"]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(ar.RotateCcw,{className:"w-3 h-3"}),"Dots indicate scheduled reviews"]})]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(l.BookOpen,{className:"w-3 h-3"}),"Based on Ebbinghaus forgetting curve"]})]})]})]})})}var at=a.i(263805),au=a.i(637757),av=a.i(946685);function aw({isOpen:a,onClose:d,review:f,onReviewComplete:h,onSnooze:i,onMarkKnown:j}){var k,m;let n=(0,e.useRouter)(),[o,p]=(0,c.useState)(!1);if(!f)return null;let r=f.isOverdue||f.daysOverdue&&f.daysOverdue>0,s=f.daysOverdue||0,u=f.daysUntilDue||0,v=(k=f.currentRetention)>=80?{label:"Strong",color:"text-green-600",bg:"bg-green-50"}:k>=60?{label:"Good",color:"text-yellow-600",bg:"bg-yellow-50"}:k>=40?{label:"Fading",color:"text-orange-600",bg:"bg-orange-50"}:{label:"Critical",color:"text-red-600",bg:"bg-red-50"},x=()=>{n.push(`/student/review/${f.contentId}?reviewId=${f.id}`),d()},y=async()=>{p(!0);try{if((await fetch("/api/student/reviews/snooze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewId:f.id,days:1})})).ok)w.toast.success("Review postponed until tomorrow"),i?.(),d();else throw Error("Failed to snooze")}catch(a){w.toast.error("Failed to postpone review")}finally{p(!1)}},z=async()=>{p(!0);try{if((await fetch("/api/student/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentId:f.contentId,performance:95})})).ok)w.toast.success("Marked as known! Next review extended."),j?.(),d();else throw Error("Failed to update")}catch(a){w.toast.error("Failed to update review status")}finally{p(!1)}},A={lastScore:Math.round(.9*f.currentRetention+10*Math.random()),averageScore:Math.round(.85*f.currentRetention+15*Math.random()),totalReviews:f.repetitionCount,streakDays:Math.floor(7*Math.random())+1,studyTimeMinutes:Math.floor(60*Math.random())+15};return(0,b.jsx)(at.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(at.DialogContent,{className:"sm:max-w-[650px] max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(at.DialogHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.subjectColor}}),(0,b.jsx)(at.DialogTitle,{className:"text-lg",children:f.contentTitle})]}),((a,c)=>{if(c)return(0,b.jsx)(C.Badge,{variant:"destructive",children:"Overdue"});switch(a){case"high":return(0,b.jsx)(C.Badge,{variant:"default",className:"bg-orange-500",children:"High Priority"});case"medium":return(0,b.jsx)(C.Badge,{variant:"outline",className:"text-yellow-600",children:"Medium"});case"low":return(0,b.jsx)(C.Badge,{variant:"secondary",children:"Low"});default:return null}})(f.priority,!!r)]}),(0,b.jsxs)(at.DialogDescription,{className:"flex items-center gap-2 pt-1",children:[(0,b.jsx)(l.BookOpen,{className:"w-4 h-4"}),f.subjectName,(0,b.jsx)("span",{className:"mx-1",children:"•"}),(0,b.jsx)($.Clock,{className:"w-4 h-4"}),r?`${s} day${1!==s?"s":""} overdue`:0===u?"Due today":`Due in ${u} day${1!==u?"s":""}`]})]}),(0,b.jsxs)("div",{className:(0,t.cn)("p-4 rounded-lg",v.bg),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ap.Brain,{className:(0,t.cn)("w-5 h-5",v.color)}),(0,b.jsx)("span",{className:"font-medium",children:"Current Retention"})]}),(0,b.jsxs)("span",{className:(0,t.cn)("text-2xl font-bold",v.color),children:[f.currentRetention,"%"]})]}),(0,b.jsx)(D.Progress,{value:f.currentRetention,className:"h-2"}),(0,b.jsx)("p",{className:"text-sm mt-2 text-gray-600",children:f.currentRetention>=80?"You remember this well! Quick review recommended.":f.currentRetention>=60?"Memory is stable. Review to maintain retention.":f.currentRetention>=40?"Content is fading. Review soon to strengthen memory.":"Urgent! You're at risk of forgetting this content."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[(0,b.jsx)(ar.RotateCcw,{className:"w-4 h-4"}),"Times Reviewed"]}),(0,b.jsx)("p",{className:"text-xl font-semibold",children:A.totalReviews})]}),(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[(0,b.jsx)($.Clock,{className:"w-4 h-4"}),"Study Time"]}),(0,b.jsxs)("p",{className:"text-xl font-semibold",children:[A.studyTimeMinutes,"m"]})]}),(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[(0,b.jsx)(E.Target,{className:"w-4 h-4"}),"Last Score"]}),(0,b.jsxs)("p",{className:(0,t.cn)("text-xl font-semibold",A.lastScore>=70?"text-green-600":"text-yellow-600"),children:[A.lastScore,"%"]})]}),(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[(0,b.jsx)(av.BarChart3,{className:"w-4 h-4"}),"Average"]}),(0,b.jsxs)("p",{className:"text-xl font-semibold",children:[A.averageScore,"%"]})]})]}),(0,b.jsx)(au.Separator,{}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h4",{className:"font-medium text-sm flex items-center gap-2",children:[(0,b.jsx)(q.Zap,{className:"w-4 h-4 text-yellow-500"}),"Recommended Actions"]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",onClick:x,children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,b.jsx)(ap.Brain,{className:"w-5 h-5 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:"Full Review Session"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Recommended time: ",(m=f.currentRetention)<40?"20-30 min":m<60?"15-20 min":m<80?"10-15 min":"5-10 min"]})]})]}),(0,b.jsx)(Q.ChevronRight,{className:"w-5 h-5 text-gray-400"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,b.jsx)(l.BookOpen,{className:"w-5 h-5 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:"Quick Flashcards"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"5-minute rapid review"})]})]}),(0,b.jsx)(Q.ChevronRight,{className:"w-5 h-5 text-gray-400"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,b.jsx)(E.Target,{className:"w-5 h-5 text-purple-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:"Practice Quiz"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Test your knowledge"})]})]}),(0,b.jsx)(Q.ChevronRight,{className:"w-5 h-5 text-gray-400"})]})]})]}),(0,b.jsx)(au.Separator,{}),(0,b.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(ap.Brain,{className:"w-4 h-4 text-blue-500 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:"font-medium text-blue-900",children:"Spaced Repetition"}),(0,b.jsx)("p",{className:"text-blue-700 mt-1",children:"This review is scheduled based on your learning patterns. Reviewing at the optimal time strengthens long-term memory."})]})]})}),(0,b.jsxs)(at.DialogFooter,{className:"flex-col sm:flex-row gap-2",children:[(0,b.jsxs)(g.Button,{variant:"outline",onClick:y,disabled:o,className:"w-full sm:w-auto",children:[(0,b.jsx)($.Clock,{className:"w-4 h-4 mr-2"}),"Snooze 1 Day"]}),(0,b.jsxs)(g.Button,{variant:"outline",onClick:z,disabled:o,className:"w-full sm:w-auto",children:[(0,b.jsx)(ah.CheckCircle2,{className:"w-4 h-4 mr-2"}),"Mark as Known"]}),(0,b.jsxs)(g.Button,{onClick:x,disabled:o,className:"w-full sm:w-auto",children:[(0,b.jsx)(ap.Brain,{className:"w-4 h-4 mr-2"}),"Start Review"]})]})]})})}var ax=a.i(384076),ay=a.i(43081);function az({reviews:a,streakDays:d=0,onReviewComplete:f}){let i=(0,e.useRouter)(),[j,k]=(0,c.useState)(new Set),[l,m]=(0,c.useState)(!1),n=[...a].sort((a,b)=>{let c={critical:4,high:3,medium:2,low:1},d=a=>{let b=25*c[a.priority];return b+((100-a.currentRetention)*.5+10*a.daysOverdue)};return d(b)-d(a)}),p=n.reduce((a,b)=>a+b.estimatedMinutes,0),r=n.filter(a=>"critical"===a.priority).length,s=n.filter(a=>a.daysOverdue>0).length,u=a=>{i.push(`/student/review/${a.contentId}?quick=true`)},v=a=>{if(a<60)return`${a}m`;let b=Math.floor(a/60),c=a%60;return c>0?`${b}h ${c}m`:`${b}h`};return 0===n.length?(0,b.jsx)(h.Card,{className:"bg-green-50 border-green-200",children:(0,b.jsxs)(h.CardContent,{className:"py-8 text-center",children:[(0,b.jsx)(ah.CheckCircle2,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),(0,b.jsx)("h3",{className:"font-medium text-green-900",children:"All Caught Up!"}),(0,b.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"You have no reviews due. Great job maintaining your memory!"}),d>0&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-3",children:[(0,b.jsx)(x.Flame,{className:"w-4 h-4 text-orange-500"}),(0,b.jsxs)("span",{className:"text-sm font-medium text-orange-700",children:[d," day streak!"]})]})]})}):(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{className:"pb-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Zap,{className:"w-5 h-5 text-yellow-500"}),(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"Smart Review Queue"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[d>0&&(0,b.jsxs)(C.Badge,{variant:"outline",className:"gap-1 bg-orange-50",children:[(0,b.jsx)(x.Flame,{className:"w-3 h-3 text-orange-500"}),d," day streak"]}),(0,b.jsxs)(C.Badge,{variant:s>0?"destructive":"default",children:[n.length," due"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mt-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)($.Clock,{className:"w-4 h-4"}),v(p)," total"]}),r>0&&(0,b.jsxs)("span",{className:"flex items-center gap-1 text-red-600",children:[(0,b.jsx)(o.AlertCircle,{className:"w-4 h-4"}),r," critical"]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>m(!l),children:l?"Done":"Select Multiple"})})]})]}),(0,b.jsxs)(h.CardContent,{className:"space-y-3",children:[l&&(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(ax.Checkbox,{checked:j.size===n.length,onCheckedChange:()=>{j.size===n.length?k(new Set):k(new Set(n.map(a=>a.id)))}}),(0,b.jsx)("span",{className:"text-sm font-medium",children:0===j.size?"Select all":`${j.size} selected`})]}),(0,b.jsxs)(g.Button,{size:"sm",onClick:()=>{let a=n.filter(a=>j.has(a.id));if(0===a.length)return void w.toast.error("Please select at least one review");let b=a.map(a=>a.contentId).join(",");i.push(`/student/review/batch?ids=${b}`)},disabled:0===j.size,children:[(0,b.jsx)(aa.Play,{className:"w-4 h-4 mr-2"}),"Start Batch (",v(n.filter(a=>j.has(a.id)).reduce((a,b)=>a+b.estimatedMinutes,0)),")"]})]}),(0,b.jsxs)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:[n.slice(0,8).map((a,c)=>{var d,e;return(0,b.jsxs)("div",{className:(0,t.cn)("flex items-center gap-3 p-3 rounded-lg border transition-all",a.daysOverdue>0?"bg-red-50 border-red-200":"bg-white border-gray-200 hover:border-gray-300",0===c&&!l&&"ring-2 ring-yellow-400 ring-offset-1"),children:[l&&(0,b.jsx)(ax.Checkbox,{checked:j.has(a.id),onCheckedChange:()=>{var b;let c;return b=a.id,void((c=new Set(j)).has(b)?c.delete(b):c.add(b),k(c))}}),(0,b.jsx)("div",{className:"w-1 h-10 rounded-full flex-shrink-0",style:{backgroundColor:a.subjectColor}}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("p",{className:"font-medium text-sm truncate",children:a.contentTitle}),(0,b.jsx)(C.Badge,{variant:"outline",className:(0,t.cn)("text-xs",(a=>{switch(a){case"critical":return"bg-red-100 text-red-700 border-red-200 animate-pulse";case"high":return"bg-orange-100 text-orange-700 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-blue-100 text-blue-700 border-blue-200"}})(a.priority)),children:a.priority})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-1",children:[(0,b.jsx)("span",{children:a.subjectName}),(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)($.Clock,{className:"w-3 h-3"}),a.estimatedMinutes,"m"]}),a.daysOverdue>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{className:"text-red-600 font-medium",children:[a.daysOverdue,"d overdue"]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(d=a.currentRetention)>=80?(0,b.jsx)(ah.CheckCircle2,{className:"w-4 h-4 text-green-500"}):d>=60?(0,b.jsx)(ap.Brain,{className:"w-4 h-4 text-yellow-500"}):d>=40?(0,b.jsx)(aq.TrendingDown,{className:"w-4 h-4 text-orange-500"}):(0,b.jsx)(o.AlertCircle,{className:"w-4 h-4 text-red-500"}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:(0,t.cn)("text-sm font-bold",(e=a.currentRetention)>=80?"text-green-600":e>=60?"text-yellow-600":e>=40?"text-orange-600":"text-red-600"),children:[a.currentRetention,"%"]}),(0,b.jsx)(D.Progress,{value:a.currentRetention,className:"w-16 h-1"})]})]}),!l&&(0,b.jsx)(g.Button,{size:"sm",variant:0===c?"default":"outline",onClick:()=>u(a),children:0===c?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aa.Play,{className:"w-3 h-3 mr-1"}),"Start"]}):(0,b.jsx)(Q.ChevronRight,{className:"w-4 h-4"})})]},a.id)}),n.length>8&&(0,b.jsxs)(g.Button,{variant:"ghost",className:"w-full",children:[(0,b.jsx)(ay.MoreHorizontal,{className:"w-4 h-4 mr-2"}),"View ",n.length-8," more reviews"]})]}),!l&&n.length>0&&(0,b.jsxs)(g.Button,{className:"w-full",size:"lg",onClick:()=>u(n[0]),children:[(0,b.jsx)(aa.Play,{className:"w-4 h-4 mr-2"}),"Start Top Priority Review",(0,b.jsxs)("span",{className:"ml-2 text-xs opacity-70",children:["(",v(n[0].estimatedMinutes),")"]})]})]})]})}var aA=a.i(987386),aB=a.i(226886);function aC({weakTopics:a}){let c=(0,e.useRouter)(),d=a.filter(a=>a.currentRetention<40).slice(0,3);return 0===d.length?null:(0,b.jsx)(h.Card,{className:"bg-gradient-to-br from-purple-50 to-blue-50 border-purple-200",children:(0,b.jsx)(h.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"p-3 bg-purple-100 rounded-full flex-shrink-0",children:(0,b.jsx)(aB.Sparkles,{className:"w-6 h-6 text-purple-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"AI Tutor Can Help"}),(0,b.jsxs)(C.Badge,{variant:"outline",className:"bg-purple-100 text-purple-700",children:[d.length," topics"]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"You're having trouble remembering some key concepts. Our AI Tutor can explain these topics in a new way."}),(0,b.jsx)("div",{className:"space-y-2 mb-4",children:d.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-white/60 rounded-lg",children:[(0,b.jsx)(ag.AlertTriangle,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium truncate",children:a.contentTitle}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(D.Progress,{value:a.currentRetention,className:"w-16 h-1"}),(0,b.jsxs)("span",{className:"text-xs text-red-600",children:[a.currentRetention,"% retention"]})]})]})]},a.contentId))}),(0,b.jsxs)(g.Button,{onClick:()=>c.push("/student/ai-tutor"),className:"w-full bg-purple-600 hover:bg-purple-700",children:[(0,b.jsx)(m.MessageSquare,{className:"w-4 h-4 mr-2"}),"Get Help from AI Tutor",(0,b.jsx)(aA.ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})})})}let aD=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],aE=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function aF({reviewHistory:a,streakDays:d,longestStreak:e,totalReviews:f}){let g=(0,c.useMemo)(()=>{let b=new Date,c=[];for(let d=364;d>=0;d--){let e=new Date(b);e.setDate(e.getDate()-d);let f=e.toISOString().split("T")[0],g=a.find(a=>a.date===f);c.push({date:e,dateStr:f,count:g?.count||0,level:g?.level||0})}return c},[a]),i=(0,c.useMemo)(()=>{let a=[];for(let b=0;b<g.length;b+=7)a.push(g.slice(b,b+7));return a},[g]),j=(0,c.useMemo)(()=>{let a=[],b=-1;return i.forEach((c,d)=>{let e=c[0];e&&e.date.getMonth()!==b&&(b=e.date.getMonth(),a.push({month:aE[b],index:d}))}),a},[i]),k=a=>{switch(a){case 0:default:return"bg-gray-100";case 1:return"bg-green-200";case 2:return"bg-green-300";case 3:return"bg-green-500";case 4:return"bg-green-700"}},l=a=>{switch(a){case 0:default:return"No reviews";case 1:return"1 review";case 2:return"2 reviews";case 3:return"3-4 reviews";case 4:return"5+ reviews"}};return(0,b.jsx)(ao.TooltipProvider,{children:(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(Z.CalendarDays,{className:"w-5 h-5"}),"Review Activity"]}),(0,b.jsx)(h.CardDescription,{children:"Your review history over the past year"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(x.Flame,{className:"w-4 h-4 text-orange-500"}),(0,b.jsx)("span",{className:"font-medium",children:d}),(0,b.jsx)("span",{className:"text-gray-500",children:"day streak"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(E.Target,{className:"w-4 h-4 text-blue-500"}),(0,b.jsx)("span",{className:"font-medium",children:f}),(0,b.jsx)("span",{className:"text-gray-500",children:"total"})]})]})]})}),(0,b.jsxs)(h.CardContent,{children:[(0,b.jsxs)("div",{className:"flex mb-1",children:[(0,b.jsx)("div",{className:"w-8"})," ",(0,b.jsx)("div",{className:"flex-1 relative h-5",children:j.map((a,c)=>(0,b.jsx)("span",{className:"absolute text-xs text-gray-400",style:{left:`${a.index/i.length*100}%`},children:a.month},c))})]}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"flex flex-col justify-around mr-2 py-1",children:aD.filter((a,b)=>[1,3,5].includes(b)).map(a=>(0,b.jsx)("span",{className:"text-xs text-gray-400 h-3 leading-3",children:a},a))}),(0,b.jsx)("div",{className:"flex gap-[2px] overflow-x-auto pb-2 flex-1",children:i.map((a,c)=>(0,b.jsx)("div",{className:"flex flex-col gap-[2px]",children:a.map((a,c)=>(0,b.jsxs)(ao.Tooltip,{children:[(0,b.jsx)(ao.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("div",{className:(0,t.cn)("w-3 h-3 rounded-sm cursor-pointer transition-colors hover:ring-2 hover:ring-offset-1 hover:ring-blue-400",k(a.level))})}),(0,b.jsxs)(ao.TooltipContent,{side:"top",className:"text-xs",children:[(0,b.jsx)("p",{className:"font-medium",children:a.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),(0,b.jsx)("p",{children:l(a.level)})]})]},c))},c))})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4 text-xs text-gray-500",children:[(0,b.jsx)("span",{children:"Less"}),(0,b.jsx)("div",{className:"flex gap-1",children:[0,1,2,3,4].map(a=>(0,b.jsx)("div",{className:(0,t.cn)("w-3 h-3 rounded-sm",k(a)),title:l(a)},a))}),(0,b.jsx)("span",{children:"More"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600",children:d}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Current Streak"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:e}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Longest Streak"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[Math.round(f/365*7),"/7"]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Weekly Average"})]})]})]})]})})}var aG=a.i(609931);function aH({subjects:a}){let d=a.slice(0,6),e=(0,c.useMemo)(()=>{if(0===a.length)return null;let b=Math.round(a.reduce((a,b)=>a+b.currentRetention,0)/a.length),c=a.reduce((a,b)=>b.currentRetention>a.currentRetention?b:a);return{avgRetention:b,strongest:c,weakest:a.reduce((a,b)=>b.currentRetention<a.currentRetention?b:a),totalReviews:a.reduce((a,b)=>a+b.reviewsCount,0)}},[a]),f=(a,b,c)=>{let d=b/c*2*Math.PI-Math.PI/2,e=a/100*80,f=100+e*Math.cos(d),g=100+e*Math.sin(d);return`${f},${g}`},g=a=>a>=80?"text-green-600":a>=60?"text-yellow-600":a>=40?"text-orange-600":"text-red-600";return 0===a.length?(0,b.jsx)(h.Card,{className:"h-full",children:(0,b.jsx)(h.CardContent,{className:"flex items-center justify-center h-64 text-center",children:(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Target,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-gray-500",children:"No subject data yet"}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Complete some reviews to see your retention"})]})})}):(0,b.jsx)(ao.TooltipProvider,{children:(0,b.jsxs)(h.Card,{className:"h-full",children:[(0,b.jsxs)(h.CardHeader,{className:"pb-2",children:[(0,b.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(E.Target,{className:"w-5 h-5"}),"Subject Retention"]}),(0,b.jsx)(h.CardDescription,{children:"Compare retention across all subjects"})]}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"relative flex justify-center",children:[(0,b.jsxs)("svg",{viewBox:"0 0 200 200",className:"w-48 h-48",children:[[25,50,75,100].map(a=>(0,b.jsx)("circle",{cx:"100",cy:"100",r:.8*a,fill:"none",stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:100===a?void 0:"4,4"},a)),d.map((a,c)=>{let e=((a,b,c=95)=>{let d=a/b*2*Math.PI-Math.PI/2;return{x:100+c*Math.cos(d),y:100+c*Math.sin(d),angle:d}})(c,d.length,80);return(0,b.jsx)("line",{x1:"100",y1:"100",x2:e.x,y2:e.y,stroke:"#e5e7eb",strokeWidth:"1"},c)}),d.map((a,c)=>{let e=d.map((a,b)=>f(a.currentRetention,b,d.length)).join(" ");return(0,b.jsx)("polygon",{points:e,fill:a.color,fillOpacity:.3*(0===c),stroke:0===c?a.color:"none",strokeWidth:"2",className:0===c?"":"hidden"},a.subjectId)}),d.map((a,c)=>{let[e,g]=f(a.currentRetention,c,d.length).split(",").map(Number);return(0,b.jsxs)(ao.Tooltip,{children:[(0,b.jsx)(ao.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("circle",{cx:e,cy:g,r:"6",fill:a.color,stroke:"white",strokeWidth:"2",className:"cursor-pointer hover:r-8 transition-all"})}),(0,b.jsxs)(ao.TooltipContent,{children:[(0,b.jsx)("p",{className:"font-medium",children:a.subjectName}),(0,b.jsxs)("p",{className:"text-sm",children:[a.currentRetention,"% retention"]})]})]},a.subjectId)}),(0,b.jsx)("circle",{cx:"100",cy:"100",r:"3",fill:"#9ca3af"})]}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center",children:(0,b.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full bg-gray-300"}),"Center: 0%"]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full bg-gray-300"}),"Edge: 100%"]})]})})]}),e&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Average"}),(0,b.jsxs)("p",{className:(0,t.cn)("text-xl font-bold",g(e.avgRetention)),children:[e.avgRetention,"%"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Total Reviews"}),(0,b.jsx)("p",{className:"text-xl font-bold text-blue-600",children:e.totalReviews})]})]}),(0,b.jsx)("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:a.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),(0,b.jsx)("span",{className:"font-medium text-sm",children:a.subjectName})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(a=>{switch(a){case"up":return(0,b.jsx)(G.TrendingUp,{className:"w-4 h-4 text-green-500"});case"down":return(0,b.jsx)(aq.TrendingDown,{className:"w-4 h-4 text-red-500"});default:return(0,b.jsx)(aG.Minus,{className:"w-4 h-4 text-gray-400"})}})(a.trend),(0,b.jsxs)(C.Badge,{variant:"outline",className:(0,t.cn)("text-xs",g(a.currentRetention)),children:[a.currentRetention,"%"]})]})]},a.subjectId))})]})]})})}function aI({contentTitle:a,beforeRetention:c,afterRetention:d,nextReviewDate:e,intervalDays:f,previousInterval:g}){let i=(a,b,c)=>{let d=[];for(let e=0;e<=c;e++){let c=a*Math.exp(-(24*e)/b);d.push({day:e,retention:Math.max(0,c)})}return d},j=a=>-(24*a)/Math.log(.85),l=j(g||3),m=j(f),n=i(c,l,14),o=i(d,m,f+7),p=350,q=110,r=(a,b)=>40+a/b*p,s=a=>10+q-a/100*q,t=(a,b)=>a.map((a,c)=>`${0===c?"M":"L"} ${r(a.day,b)} ${s(a.retention)}`).join(" "),u=d-c,v=((f-g)/g*100).toFixed(0);return(0,b.jsxs)(h.Card,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:[(0,b.jsx)(h.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(G.TrendingUp,{className:"w-5 h-5 text-green-600"}),"Review Impact"]}),(0,b.jsx)(h.CardDescription,{children:"How this review strengthened your memory"})]}),(0,b.jsxs)(C.Badge,{className:"bg-green-100 text-green-700 hover:bg-green-100",children:["+",u.toFixed(0),"% boost"]})]})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsx)("p",{className:"font-medium text-gray-700",children:a}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("svg",{viewBox:"0 0 400 150",className:"w-full",children:[[0,50,100].map(a=>(0,b.jsx)("line",{x1:40,y1:s(a),x2:390,y2:s(a),stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4,4"},a)),[0,50,100].map(a=>(0,b.jsxs)("text",{x:35,y:s(a)+4,textAnchor:"end",className:"text-xs fill-gray-400",children:[a,"%"]},a)),(0,b.jsx)("path",{d:t(n,14),fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.5"}),(0,b.jsx)("path",{d:t(o,f+7),fill:"none",stroke:"#22c55e",strokeWidth:"3"}),(0,b.jsx)("circle",{cx:r(0,f+7),cy:s(c),r:"5",fill:"#ef4444",stroke:"white",strokeWidth:"2"}),(0,b.jsx)("circle",{cx:r(0,f+7),cy:s(d),r:"6",fill:"#22c55e",stroke:"white",strokeWidth:"2"}),(0,b.jsx)("circle",{cx:r(f,f+7),cy:s(85),r:"5",fill:"#3b82f6",stroke:"white",strokeWidth:"2"}),(0,b.jsx)("text",{x:40,y:145,className:"text-xs fill-gray-400",textAnchor:"middle",children:"Now"}),(0,b.jsxs)("text",{x:r(f,f+7),y:145,className:"text-xs fill-gray-400",textAnchor:"middle",children:["+",f,"d"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-2 text-xs",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-3 h-0.5 bg-red-400 border-dashed",style:{borderTop:"2px dashed"}}),"Before review"]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-3 h-0.5 bg-green-500",style:{borderTop:"3px solid"}}),"After review"]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Next review"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,b.jsxs)("div",{className:"text-center p-3 bg-white rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Was"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-red-500",children:[c.toFixed(0),"%"]})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-white rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Now"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-green-600",children:[d.toFixed(0),"%"]})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-white rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Next Review"}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,b.jsx)(k.Calendar,{className:"w-4 h-4 text-blue-500"}),(0,b.jsxs)("p",{className:"text-sm font-bold",children:[f,"d"]})]})]})]}),Number(v)>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-100 rounded-lg text-sm",children:[(0,b.jsx)(G.TrendingUp,{className:"w-4 h-4 text-green-600"}),(0,b.jsxs)("span",{className:"text-green-700",children:["Great job! Next review extended by ",v,"% due to strong performance."]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)($.Clock,{className:"w-4 h-4"}),"Next review scheduled"]}),(0,b.jsx)("span",{className:"font-medium",children:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]})]})}var aJ=a.i(562117),aK=a.i(302402),aL=a.i(538431);let aM=(0,N.default)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),aN={flame:x.Flame,trophy:n.Trophy,target:E.Target,zap:q.Zap,star:aJ.Star,crown:aK.Crown,medal:aL.Medal,award:F.Award,rocket:aM,brain:ap.Brain,clock:$.Clock,calendar:k.Calendar};function aO({streakDays:a,longestStreak:c,totalReviews:d,weeklyReviews:e,achievements:f}){let g=a>=30?{label:"Unstoppable!",color:"text-purple-600",bg:"bg-purple-100"}:a>=14?{label:"On Fire!",color:"text-orange-600",bg:"bg-orange-100"}:a>=7?{label:"Heating Up!",color:"text-yellow-600",bg:"bg-yellow-100"}:a>=3?{label:"Getting Started",color:"text-green-600",bg:"bg-green-100"}:{label:"Start Today!",color:"text-gray-600",bg:"bg-gray-100"},i=a<3?{target:3,label:"3-day streak"}:a<7?{target:7,label:"Week warrior"}:a<14?{target:14,label:"2-week streak"}:a<30?{target:30,label:"Month master"}:{target:60,label:"2-month legend"},j=Math.min(100,a/i.target*100);return(0,b.jsxs)(h.Card,{className:"overflow-hidden",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(n.Trophy,{className:"w-5 h-5 text-yellow-500"}),"Achievements & Streaks"]}),(0,b.jsx)(C.Badge,{className:(0,t.cn)(g.bg,g.color),children:g.label})]})}),(0,b.jsxs)(h.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:(0,t.cn)("p-4 rounded-xl",g.bg),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(x.Flame,{className:(0,t.cn)("w-10 h-10",g.color)}),a>0&&(0,b.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-white rounded-full flex items-center justify-center text-xs font-bold shadow-sm",children:a})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:(0,t.cn)("text-2xl font-bold",g.color),children:[a," Day",1!==a?"s":""]}),(0,b.jsx)("p",{className:"text-sm opacity-70",children:"Current Streak"})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-sm font-medium",children:["Longest: ",c]}),(0,b.jsx)("p",{className:"text-xs opacity-60",children:"days"})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsxs)("span",{className:"opacity-70",children:["Next: ",i.label]}),(0,b.jsxs)("span",{className:"font-medium",children:[a,"/",i.target]})]}),(0,b.jsx)(D.Progress,{value:j,className:"h-2"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,b.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)(ap.Brain,{className:"w-5 h-5 text-blue-500 mx-auto mb-1"}),(0,b.jsx)("p",{className:"text-xl font-bold",children:d}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Total Reviews"})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)(k.Calendar,{className:"w-5 h-5 text-green-500 mx-auto mb-1"}),(0,b.jsx)("p",{className:"text-xl font-bold",children:e}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"This Week"})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)(E.Target,{className:"w-5 h-5 text-purple-500 mx-auto mb-1"}),(0,b.jsx)("p",{className:"text-xl font-bold",children:Math.round(d/(a||1)*10)/10}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Per Day"})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h4",{className:"font-medium text-sm flex items-center gap-2",children:[(0,b.jsx)(F.Award,{className:"w-4 h-4"}),"Recent Achievements"]}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-2",children:f.slice(0,8).map(a=>{let c=aN[a.icon]||aJ.Star;return(0,b.jsxs)("div",{className:(0,t.cn)("relative p-3 rounded-lg text-center transition-all cursor-pointer group",a.unlocked?"bg-gradient-to-br from-yellow-50 to-orange-50 border border-yellow-200":"bg-gray-50 border border-gray-200 opacity-60"),title:a.description,children:[(0,b.jsx)(c,{className:(0,t.cn)("w-6 h-6 mx-auto mb-1",a.unlocked?"text-yellow-500":"text-gray-400")}),(0,b.jsx)("p",{className:"text-xs font-medium truncate",children:a.title}),!a.unlocked&&a.maxProgress>1&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)(D.Progress,{value:a.progress/a.maxProgress*100,className:"h-1"}),(0,b.jsxs)("p",{className:"text-[10px] text-gray-400 mt-1",children:[a.progress,"/",a.maxProgress]})]}),a.unlocked&&(0,b.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,b.jsx)(C.Badge,{variant:"default",className:"h-4 w-4 p-0 flex items-center justify-center bg-yellow-400 text-yellow-900",children:"✓"})})]},a.id)})}),0===f.length&&(0,b.jsx)("div",{className:"grid grid-cols-4 gap-2",children:[{icon:"flame",title:"First Review",unlocked:d>=1},{icon:"target",title:"Week Warrior",unlocked:c>=7},{icon:"zap",title:"Speed Demon",unlocked:!1},{icon:"brain",title:"Memory Master",unlocked:d>=50},{icon:"crown",title:"30-Day King",unlocked:c>=30},{icon:"rocket",title:"Quick Learner",unlocked:e>=10},{icon:"calendar",title:"Consistent",unlocked:a>=14},{icon:"award",title:"Century Club",unlocked:d>=100}].map((a,c)=>{let d=aN[a.icon]||aJ.Star;return(0,b.jsxs)("div",{className:(0,t.cn)("p-3 rounded-lg text-center",a.unlocked?"bg-gradient-to-br from-yellow-50 to-orange-50 border border-yellow-200":"bg-gray-50 border border-gray-200 opacity-50"),children:[(0,b.jsx)(d,{className:(0,t.cn)("w-6 h-6 mx-auto mb-1",a.unlocked?"text-yellow-500":"text-gray-400")}),(0,b.jsx)("p",{className:"text-xs font-medium truncate",children:a.title})]},c)})})]})]})]})}var aP=a.i(640132),aQ=a.i(395743);let aR=(0,N.default)("apple",[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]]);function aS(a){new Date().toISOString().replace(/[-:]/g,"").split(".")[0];let b=a.map(a=>{let b=new Date(a.scheduledFor),c=new Date(b.getTime()+18e5),d=a=>a.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z";return`BEGIN:VEVENT
UID:${a.id}@tutorme.com
DTSTART:${d(b)}
DTEND:${d(c)}
SUMMARY:Review: ${a.contentTitle}
DESCRIPTION:Time to review ${a.contentTitle} from ${a.subjectName}. Spaced repetition review to strengthen long-term memory.
CATEGORIES:Study,Review,Education
BEGIN:VALARM
ACTION:DISPLAY
DESCRIPTION:Review Reminder
TRIGGER:-PT15M
END:VALARM
END:VEVENT`}).join("\n");return`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//TutorMe//Spaced Repetition//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
X-WR-CALNAME:TutorMe Review Schedule
X-WR-TIMEZONE:UTC
${b}
END:VCALENDAR`}function aT({upcomingReviews:a}){let[d,e]=(0,c.useState)(!1),f=function(a){if(0===a.length)return"";let b=a[0],c=new Date(b.scheduledFor),d=new Date(c.getTime()+18e5),e=a=>a.toISOString().replace(/[-:]/g,"").split(".")[0],f=new URLSearchParams({action:"TEMPLATE",text:`Review: ${b.contentTitle}`,details:`Time to review ${b.contentTitle} from ${b.subjectName}. Spaced repetition review to strengthen long-term memory.`,dates:`${e(c)}/${e(d)}`});return`https://calendar.google.com/calendar/render?${f.toString()}`}(a),i=function(a){if(0===a.length)return"";let b=a[0],c=new Date(b.scheduledFor),d=new Date(c.getTime()+18e5),e=new URLSearchParams({subject:`Review: ${b.contentTitle}`,body:`Time to review ${b.contentTitle} from ${b.subjectName}. Spaced repetition review to strengthen long-term memory.`,startdt:c.toISOString(),enddt:d.toISOString()});return`https://outlook.live.com/calendar/0/deeplink/compose?${e.toString()}`}(a);return 0===a.length?null:(0,b.jsxs)(h.Card,{className:"w-full",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(k.Calendar,{className:"w-5 h-5"}),"Calendar Sync"]}),(0,b.jsx)(h.CardDescription,{children:"Export reviews to your calendar"})]}),(0,b.jsxs)(C.Badge,{variant:"outline",children:[a.length," events"]})]})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,b.jsxs)(g.Button,{variant:"outline",className:"w-full justify-center",onClick:()=>window.open(f,"_blank"),children:[(0,b.jsx)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,b.jsx)("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})}),"Google"]}),(0,b.jsxs)(g.Button,{variant:"outline",className:"w-full justify-center",onClick:()=>window.open(i,"_blank"),children:[(0,b.jsx)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,b.jsx)("path",{d:"M7.88 12.04q0 .48-.19.91t-.54.74q-.35.31-.84.49-.48.19-1.08.19-.65 0-1.18-.22-.53-.22-.9-.64t-.58-1.01q-.21-.59-.21-1.32 0-.74.21-1.33.22-.59.59-1t.89-.63 1.15-.22q.62 0 1.09.19.47.19.81.51.34.33.53.77.19.44.19.92zm5.48 0q0 .48-.19.91t-.54.74q-.35.31-.84.49-.48.19-1.08.19-.65 0-1.18-.22-.53-.22-.9-.64t-.58-1.01q-.21-.59-.21-1.32 0-.74.21-1.33.22-.59.59-1t.89-.63 1.15-.22q.62 0 1.09.19.47.19.81.51.34.33.53.77.19.44.19.92zm5.5 0q0 .48-.19.91t-.54.74q-.35.31-.84.49-.48.19-1.08.19-.65 0-1.18-.22-.53-.22-.9-.64t-.58-1.01q-.21-.59-.21-1.32 0-.74.21-1.33.22-.59.59-1t.89-.63 1.15-.22q.62 0 1.09.19.47.19.81.51.34.33.53.77.19.44.19.92zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"})}),"Outlook"]}),(0,b.jsxs)(g.Button,{variant:"outline",className:"w-full justify-center",onClick:()=>{let b=new Blob([aS(a)],{type:"text/calendar;charset=utf-8"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download="tutorme-reviews.ics",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),w.toast.success("Calendar file downloaded!")},children:[(0,b.jsx)(aR,{className:"w-5 h-5 mr-2"}),"Apple"]})]}),(0,b.jsxs)("div",{className:"pt-3 border-t",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"What you'll get:"}),(0,b.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(aQ.Check,{className:"w-4 h-4 text-green-500"}),(0,b.jsxs)("span",{children:[a.length," review events"]})]}),(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(aQ.Check,{className:"w-4 h-4 text-green-500"}),(0,b.jsx)("span",{children:"15-minute reminder before each review"})]}),(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(aQ.Check,{className:"w-4 h-4 text-green-500"}),(0,b.jsx)("span",{children:"Auto-syncs with your calendar app"})]})]})]}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>{let b=aS(a);navigator.clipboard.writeText(b),e(!0),w.toast.success("Calendar data copied to clipboard!"),setTimeout(()=>e(!1),2e3)},children:d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aQ.Check,{className:"w-4 h-4 mr-2"}),"Copied!"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aP.Download,{className:"w-4 h-4 mr-2"}),"Copy Calendar Data"]})})]})]})}var aU=a.i(50169);function aV({reviewData:a,onRefresh:d,fullWidth:e=!1}){let f,i,j,[k,l]=(0,c.useState)(null),[m,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)("overview"),[r,s]=(0,c.useState)(!1),u=a||(r?(f=[{id:"math",name:"Mathematics",color:"#3B82F6"},{id:"english",name:"English",color:"#10B981"},{id:"science",name:"Science",color:"#8B5CF6"},{id:"history",name:"History",color:"#F59E0B"}].map(a=>{let b=[];for(let c=0;c<=30;c++){let d=100*Math.exp(-c/8);(0===c||7===c||14===c)&&(d=95),b.push({day:c,date:new Date(Date.now()+24*c*36e5).toISOString(),retention:Math.round(d),isReviewPoint:0===c||7===c||14===c,reviewId:0===c||7===c||14===c?`review-${a.id}-${c}`:void 0,contentTitle:0===c?`${a.name} - Chapter 1`:7===c?`${a.name} - Chapter 2`:14===c?`${a.name} - Chapter 3`:void 0,contentId:0===c||7===c||14===c?`content-${a.id}-${c}`:void 0})}return{subjectId:a.id,subjectName:a.name,color:a.color,dataPoints:b}}),j=(i=[{id:"review-1",contentId:"content-math-1",contentTitle:"Quadratic Equations",subjectId:"math",subjectName:"Mathematics",subjectColor:"#3B82F6",scheduledFor:new Date(Date.now()+864e5).toISOString(),isOverdue:!1,daysUntilDue:1,currentRetention:35,repetitionCount:2,priority:"high"},{id:"review-2",contentId:"content-english-1",contentTitle:"Shakespeare Sonnets",subjectId:"english",subjectName:"English",subjectColor:"#10B981",scheduledFor:new Date().toISOString(),isOverdue:!0,daysUntilDue:0,daysOverdue:1,currentRetention:28,repetitionCount:1,priority:"critical"},{id:"review-3",contentId:"content-science-1",contentTitle:"Cell Biology",subjectId:"science",subjectName:"Science",subjectColor:"#8B5CF6",scheduledFor:new Date(Date.now()+1728e5).toISOString(),isOverdue:!1,daysUntilDue:2,currentRetention:62,repetitionCount:3,priority:"medium"},{id:"review-4",contentId:"content-history-1",contentTitle:"World War II",subjectId:"history",subjectName:"History",subjectColor:"#F59E0B",scheduledFor:new Date(Date.now()+2592e5).toISOString(),isOverdue:!1,daysUntilDue:3,currentRetention:78,repetitionCount:4,priority:"low"},{id:"review-5",contentId:"content-math-2",contentTitle:"Linear Algebra",subjectId:"math",subjectName:"Mathematics",subjectColor:"#3B82F6",scheduledFor:new Date(Date.now()+432e6).toISOString(),isOverdue:!1,daysUntilDue:5,currentRetention:85,repetitionCount:5,priority:"low"}]).filter(a=>a.isOverdue),{subjectCurves:f,upcomingReviews:i,overdueReviews:j,totalDue:i.length,reviewHistory:Array.from({length:365},(a,b)=>{let c=new Date;c.setDate(c.getDate()-(364-b));let d=Math.random()<.3+b/365*.4?Math.floor(4*Math.random())+1:0;return{date:c.toISOString().split("T")[0],count:d,level:0===d?0:1===d?1:2===d?2:d<4?3:4}})}):null),v=a=>{l(a),o(!0)};if(!u)return(0,b.jsx)(h.Card,{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200",children:(0,b.jsxs)(h.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)("div",{className:"p-4 bg-white rounded-full w-fit mx-auto mb-4 shadow-sm",children:(0,b.jsx)(ap.Brain,{className:"w-12 h-12 text-blue-500"})}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Spaced Repetition System"}),(0,b.jsx)("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Optimize your learning with scientifically-backed review scheduling. Reviews are scheduled based on the forgetting curve to maximize retention."}),(0,b.jsxs)(g.Button,{size:"lg",onClick:()=>s(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[(0,b.jsx)(aB.Sparkles,{className:"w-5 h-5 mr-2"}),"See Demo with Mock Data"]}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-4",children:"Start learning and completing quizzes to generate your own review schedule"})]})});let w=u.upcomingReviews?.filter(a=>a.currentRetention<40).map(a=>({contentId:a.contentId,contentTitle:a.contentTitle,subject:a.subjectName,currentRetention:a.currentRetention,lastQuizScore:null}))||[],x=u.reviewHistory||[],y=[{id:"1",title:"First Review",description:"Complete your first review",icon:"star",unlocked:!0,progress:1,maxProgress:1},{id:"2",title:"Week Warrior",description:"7-day streak",icon:"flame",unlocked:!0,progress:7,maxProgress:7},{id:"3",title:"Memory Master",description:"50 reviews completed",icon:"brain",unlocked:!1,progress:12,maxProgress:50},{id:"4",title:"Quick Learner",description:"10 reviews in a week",icon:"zap",unlocked:!0,progress:10,maxProgress:10},{id:"5",title:"Consistency King",description:"14-day streak",icon:"crown",unlocked:!1,progress:5,maxProgress:14},{id:"6",title:"Century Club",description:"100 reviews completed",icon:"award",unlocked:!1,progress:12,maxProgress:100}],z=u.subjectCurves.map(a=>({subjectId:a.subjectId,subjectName:a.subjectName,color:a.color,currentRetention:a.dataPoints[0]?.retention||70,averageRetention:Math.round(a.dataPoints.reduce((a,b)=>a+b.retention,0)/a.dataPoints.length),trend:Math.random()>.5?"up":"stable",reviewsCount:Math.floor(20*Math.random())+5})),A=u.upcomingReviews?.filter(a=>0===a.daysUntilDue).length||0,B=u.upcomingReviews?.filter(a=>a.daysUntilDue<=7).length||0;return e?(0,b.jsxs)("div",{className:"space-y-4",children:[r&&(0,b.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-yellow-800",children:[(0,b.jsx)(aB.Sparkles,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Viewing demo data. Start learning to see your own review schedule!"})]}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Hide Demo"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,b.jsx)(h.Card,{className:(0,t.cn)(u.totalDue>0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"),children:(0,b.jsx)(h.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Due Now"}),(0,b.jsx)("p",{className:(0,t.cn)("text-2xl font-bold",u.totalDue>0?"text-red-600":"text-green-600"),children:A})]}),(0,b.jsx)(ap.Brain,{className:(0,t.cn)("w-8 h-8",u.totalDue>0?"text-red-400":"text-green-400")})]})})}),(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"This Week"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:B})]}),(0,b.jsx)(Z.CalendarDays,{className:"w-8 h-8 text-blue-400"})]})})}),(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Streak"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:"5"})]}),(0,b.jsx)(n.Trophy,{className:"w-8 h-8 text-orange-400"})]})})}),(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Subjects"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:u.subjectCurves?.length||0})]}),(0,b.jsx)(aU.LayoutGrid,{className:"w-8 h-8 text-purple-400"})]})})})]}),w.length>0&&(0,b.jsx)(aC,{weakTopics:w}),(0,b.jsxs)(X.Tabs,{value:p,onValueChange:a=>q(a),className:"w-full",children:[(0,b.jsxs)(X.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsxs)(X.TabsTrigger,{value:"overview",className:"flex items-center gap-2",children:[(0,b.jsx)(aU.LayoutGrid,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Overview"})]}),(0,b.jsxs)(X.TabsTrigger,{value:"queue",className:"flex items-center gap-2",children:[(0,b.jsx)(S.List,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Queue"}),u.totalDue>0&&(0,b.jsx)(C.Badge,{variant:"destructive",className:"h-5 px-1.5 text-xs",children:u.totalDue})]}),(0,b.jsxs)(X.TabsTrigger,{value:"stats",className:"flex items-center gap-2",children:[(0,b.jsx)(n.Trophy,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Stats"})]})]}),(0,b.jsxs)(X.TabsContent,{value:"overview",className:"space-y-4 mt-4",children:[(0,b.jsx)(as,{subjectCurves:u.subjectCurves,upcomingReviews:u.upcomingReviews,overdueReviews:u.overdueReviews,totalDue:u.totalDue,onReviewClick:v,onContentClick:(a,b)=>{let c=u.upcomingReviews.find(b=>b.contentId===a);c?v(c):v({id:`temp-${a}`,contentId:a,contentTitle:b||"Review Item",subjectName:"General",subjectColor:"#3B82F6",currentRetention:50,daysUntilDue:0,priority:"medium"})}}),(0,b.jsx)(aH,{subjects:z}),(0,b.jsx)(aT,{upcomingReviews:u.upcomingReviews})]}),(0,b.jsx)(X.TabsContent,{value:"queue",className:"mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsx)(az,{reviews:u.upcomingReviews.map(a=>({id:a.id,contentId:a.contentId,contentTitle:a.contentTitle,subjectId:a.subjectId,subjectName:a.subjectName,subjectColor:a.subjectColor,currentRetention:a.currentRetention,estimatedMinutes:a.currentRetention<40?20:a.currentRetention<70?15:10,priority:a.priority,daysOverdue:a.daysOverdue||0,lastReviewed:null,difficulty:a.currentRetention>70?"easy":a.currentRetention>40?"medium":"hard"})),streakDays:5})}),(0,b.jsx)("div",{children:(0,b.jsx)(aI,{contentTitle:"Example: Cell Biology Review",beforeRetention:45,afterRetention:95,nextReviewDate:new Date(Date.now()+6048e5).toISOString(),intervalDays:7,previousInterval:3})})]})}),(0,b.jsx)(X.TabsContent,{value:"stats",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsx)(aF,{reviewHistory:x,streakDays:5,longestStreak:12,totalReviews:156}),(0,b.jsx)(aO,{streakDays:5,longestStreak:12,totalReviews:156,weeklyReviews:8,achievements:y})]})})]}),(0,b.jsx)(aw,{isOpen:m,onClose:()=>o(!1),review:k,onMarkKnown:()=>{d?.()},onSnooze:()=>{d?.()}})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[r&&(0,b.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-yellow-800",children:[(0,b.jsx)(aB.Sparkles,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Viewing demo data. Start learning to see your own review schedule!"})]}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Hide Demo"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,b.jsx)(h.Card,{className:(0,t.cn)(u.totalDue>0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"),children:(0,b.jsx)(h.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Due Now"}),(0,b.jsx)("p",{className:(0,t.cn)("text-2xl font-bold",u.totalDue>0?"text-red-600":"text-green-600"),children:A})]}),(0,b.jsx)(ap.Brain,{className:(0,t.cn)("w-8 h-8",u.totalDue>0?"text-red-400":"text-green-400")})]})})}),(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"This Week"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:B})]}),(0,b.jsx)(Z.CalendarDays,{className:"w-8 h-8 text-blue-400"})]})})}),(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Streak"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:"5"})]}),(0,b.jsx)(n.Trophy,{className:"w-8 h-8 text-orange-400"})]})})}),(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Subjects"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:u.subjectCurves?.length||0})]}),(0,b.jsx)(aU.LayoutGrid,{className:"w-8 h-8 text-purple-400"})]})})})]}),w.length>0&&(0,b.jsx)(aC,{weakTopics:w}),(0,b.jsxs)(X.Tabs,{value:p,onValueChange:a=>q(a),className:"w-full",children:[(0,b.jsxs)(X.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsxs)(X.TabsTrigger,{value:"overview",className:"flex items-center gap-2",children:[(0,b.jsx)(aU.LayoutGrid,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Overview"})]}),(0,b.jsxs)(X.TabsTrigger,{value:"queue",className:"flex items-center gap-2",children:[(0,b.jsx)(S.List,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Queue"}),u.totalDue>0&&(0,b.jsx)(C.Badge,{variant:"destructive",className:"h-5 px-1.5 text-xs",children:u.totalDue})]}),(0,b.jsxs)(X.TabsTrigger,{value:"stats",className:"flex items-center gap-2",children:[(0,b.jsx)(n.Trophy,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Stats"})]})]}),(0,b.jsxs)(X.TabsContent,{value:"overview",className:"space-y-4 mt-4",children:[(0,b.jsx)(as,{subjectCurves:u.subjectCurves,upcomingReviews:u.upcomingReviews,overdueReviews:u.overdueReviews,totalDue:u.totalDue,onReviewClick:v,onContentClick:(a,b)=>{let c=u.upcomingReviews.find(b=>b.contentId===a);c&&v(c)}}),(0,b.jsx)(aH,{subjects:z}),(0,b.jsx)(aT,{upcomingReviews:u.upcomingReviews})]}),(0,b.jsx)(X.TabsContent,{value:"queue",className:"mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsx)(az,{reviews:u.upcomingReviews.map(a=>({id:a.id,contentId:a.contentId,contentTitle:a.contentTitle,subjectId:a.subjectId,subjectName:a.subjectName,subjectColor:a.subjectColor,currentRetention:a.currentRetention,estimatedMinutes:a.currentRetention<40?20:a.currentRetention<70?15:10,priority:a.priority,daysOverdue:a.daysOverdue||0,lastReviewed:null,difficulty:a.currentRetention>70?"easy":a.currentRetention>40?"medium":"hard"})),streakDays:5})}),(0,b.jsx)("div",{children:(0,b.jsx)(aI,{contentTitle:"Example: Cell Biology Review",beforeRetention:45,afterRetention:95,nextReviewDate:new Date(Date.now()+6048e5).toISOString(),intervalDays:7,previousInterval:3})})]})}),(0,b.jsx)(X.TabsContent,{value:"stats",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsx)(aF,{reviewHistory:x,streakDays:5,longestStreak:12,totalReviews:156}),(0,b.jsx)(aO,{streakDays:5,longestStreak:12,totalReviews:156,weeklyReviews:8,achievements:y})]})})]}),(0,b.jsx)(aw,{isOpen:m,onClose:()=>o(!1),review:k,onMarkKnown:()=>{d?.()},onSnooze:()=>{d?.()}})]})}let aW={en:{welcomeTitle:"Welcome back,",welcomeSubtitle:"Ready to continue your learning journey?",continueLearning:"Continue Learning",browseSubjects:"Browse subjects",noCoursesInProgress:"No courses in progress",browseSubjectsEmpty:"Browse subjects and start learning.",recommendedForYou:"Recommended for you",noRecommendationsYet:"No recommendations yet",noRecommendationsHint:"Complete lessons and quizzes to get personalized suggestions.",dailyQuests:"Daily Quests",noDailyQuests:"No daily quests today",noDailyQuestsHint:"Complete lessons to unlock quests and earn XP.",goToMissions:"Go to Missions",learningWorlds:"Learning Worlds",noWorldsYet:"No worlds unlocked yet",noWorldsHint:"Level up to unlock learning worlds.",viewWorlds:"View Worlds",upcomingClasses:"Upcoming Classes",viewAll:"View All",noUpcomingClasses:"No upcoming classes",noUpcomingClassesHint:"View available classes to book.",viewClasses:"View classes",skills:"Skills",skillsEmpty:"Skills will appear as you learn",skillsEmptyHint:"Complete lessons and quizzes to build your skill profile.",studyGroups:"Study Groups",noStudyGroupsYet:"No study groups yet",noStudyGroupsHint:"Join or create a group to study with others.",browseStudyGroups:"Browse study groups",quickActions:"Quick actions",aiTutor:"AI Tutor",missions:"Missions",myClasses:"My classes",errorLoading:"Something went wrong loading your dashboard.",retry:"Retry",loadingDashboard:"Loading your dashboard..."},zh:{welcomeTitle:"欢迎回来，",welcomeSubtitle:"继续你的学习之旅吧。",continueLearning:"继续学习",browseSubjects:"浏览科目",noCoursesInProgress:"暂无进行中的课程",browseSubjectsEmpty:"浏览科目并开始学习。",recommendedForYou:"为你推荐",noRecommendationsYet:"暂无推荐",noRecommendationsHint:"完成课程和测验后可获得个性化推荐。",dailyQuests:"每日任务",noDailyQuests:"今日暂无每日任务",noDailyQuestsHint:"完成课程以解锁任务并赚取经验。",goToMissions:"前往任务",learningWorlds:"学习世界",noWorldsYet:"尚未解锁世界",noWorldsHint:"升级以解锁学习世界。",viewWorlds:"查看世界",upcomingClasses:"即将开始的课",viewAll:"查看全部",noUpcomingClasses:"暂无即将开始的课",noUpcomingClassesHint:"查看可预约的课程。",viewClasses:"查看课程",skills:"技能",skillsEmpty:"学习过程中将显示技能",skillsEmptyHint:"完成课程和测验以建立技能档案。",studyGroups:"学习小组",noStudyGroupsYet:"暂无学习小组",noStudyGroupsHint:"加入或创建小组与大家一起学习。",browseStudyGroups:"浏览学习小组",quickActions:"快捷操作",aiTutor:"AI 辅导",missions:"任务",myClasses:"我的课程",errorLoading:"加载仪表盘时出错。",retry:"重试",loadingDashboard:"正在加载仪表盘..."}};function aX(){let a=(0,e.useRouter)(),{data:j,status:k}=(0,d.useSession)(),[l,m]=(0,c.useState)(!0),[n,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(null),[J,K]=(0,c.useState)(null),[N,O]=(0,c.useState)(null),Q=function(a="zh"){return aW[a]}("en"),R=(0,c.useCallback)(async()=>{if("authenticated"===k){K(null),m(!0);try{let b=await Promise.all([fetch("/api/content").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({contents:[]})})),fetch("/api/gamification").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({success:!1})})),fetch("/api/gamification/worlds").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({success:!1,data:[]})})),fetch("/api/gamification/quests").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({success:!1,data:{quests:[]}})})),fetch("/api/recommendations").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({recommendations:[]})})),fetch("/api/classes?limit=3").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({classes:[]})})),fetch("/api/study-groups?limit=3").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({groups:[]})})),fetch("/api/student/subjects").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({subjects:[]})})),fetch("/api/student/reviews").catch(()=>({ok:!0,status:200,json:()=>Promise.resolve({success:!1,data:null})}))]);if(b.filter(a=>401===a.status).length>0)return void a.replace("/login");let[c,d,e,f,g,h,i,j,k]=await Promise.all(b.map(a=>a.json())),l=j?.subjects??[];p({contents:c?.contents??[],gamification:d?.data??null,worlds:e?.data??[],dailyQuests:f?.data?.quests??[],recommendations:g?.recommendations??[],classes:h?.classes??[],studyGroups:i?.groups??[],courses:l.map(a=>({id:a.id,name:a.name,subject:a.subject,description:a.description??null,progress:a.progress??0,completedLessons:a.completedLessons??0,totalLessons:a.totalLessons??0,lastStudied:a.lastStudied??null,enrollmentSource:a.enrollmentSource??null}))}),O(k?.data||null),m(!1)}catch(a){console.error("Dashboard fetch error:",a),K("error"),m(!1)}}},[k,a]);(0,c.useEffect)(()=>{if("unauthenticated"===k)return void a.replace("/login")},[k,a]),(0,c.useEffect)(()=>{"authenticated"===k&&R()},[k,R]),(0,c.useEffect)(()=>{"authenticated"===k&&n?.gamification&&fetch("/api/gamification/daily-login",{method:"POST"}).then(a=>a.json()).then(a=>{a.success&&a.data.firstLoginToday&&(t({amount:a.data.xpEarned,reason:"Daily Login"}),r(!0),a.data.leveledUp&&setTimeout(()=>C(!0),2e3))})},[k,n?.gamification]);let S=async a=>{E(a);try{let b=await fetch("/api/classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({classId:a})}),c=await b.json();if(b.ok){if(c.checkoutUrl){w.toast.success("Redirecting to payment..."),window.location.href=c.checkoutUrl;return}w.toast.success("Successfully booked class!"),p(b=>b?{...b,classes:b.classes.map(b=>b.id===a?{...b,isBooked:!0,bookingId:c.booking?.id,currentBookings:(b.currentBookings??0)+1}:b)}:null)}else w.toast.error(c.error||"Failed to book class")}catch{w.toast.error("An error occurred while booking")}finally{E(null)}},T=async a=>{G(a);try{let b=await fetch("/api/study-groups/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupId:a})}),c=await b.json();b.ok?(w.toast.success("Successfully joined study group!"),p(b=>b?{...b,studyGroups:b.studyGroups.map(b=>b.id===a?{...b,isMember:!0,currentMembers:b.currentMembers+1}:b)}:null)):w.toast.error(c.error||"Failed to join group")}catch{w.toast.error("An error occurred while joining")}finally{G(null)}};return"loading"===k||l?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("nav",{className:"bg-white border-b sticky top-0 z-50 safe-top",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[(0,b.jsx)("div",{className:"h-7 w-24 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-9 w-9 bg-gray-100 rounded animate-pulse"})]})})}),(0,b.jsx)(M,{loadingLabel:Q.loadingDashboard})]}):"unauthenticated"===k?null:(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[q&&s&&(0,b.jsx)(B.XpAnimation,{amount:s.amount,reason:s.reason,onComplete:()=>r(!1)}),u&&n?.gamification&&(0,b.jsx)(B.LevelUpAnimation,{level:n.gamification.level,onComplete:()=>C(!1)}),(0,b.jsx)("nav",{className:"bg-white border-b sticky top-0 z-50 safe-top",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between h-16",children:[(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)(f.default,{href:"/student/dashboard",className:"text-xl font-bold text-blue-600",children:"TutorMe"})}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[n?.gamification&&(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-orange-50 px-3 py-1 rounded-full",children:[(0,b.jsx)(x.Flame,{className:"h-4 w-4 text-orange-500"}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[n.gamification.streakDays," day streak"]})]}),(0,b.jsx)(v,{}),(0,b.jsx)(f.default,{href:"/student/settings",children:(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(y.Settings,{className:"h-5 w-5"})})}),(0,b.jsx)(i.UserNav,{})]})]})})}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8","aria-busy":l,children:[J&&(0,b.jsxs)("div",{role:"alert",className:"mb-6 flex items-center justify-between gap-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-red-800",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.AlertCircle,{className:"h-5 w-5 shrink-0","aria-hidden":!0}),(0,b.jsx)("p",{className:"text-sm font-medium",children:Q.errorLoading})]}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>R(),className:"shrink-0 focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:Q.retry})]}),(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold",children:[Q.welcomeTitle," ",j?.user?.name?.split(" ")[0]||"Student","!"]}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:Q.welcomeSubtitle})]}),(0,b.jsx)(g.Button,{asChild:!0,children:(0,b.jsxs)(f.default,{href:"/student/live/join",children:[(0,b.jsx)(z.Video,{className:"w-4 h-4 mr-2"}),"Join Live Class"]})})]})}),(0,b.jsx)(H,{gamification:n?.gamification||null}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(W,{courses:n?.courses??[],onCourseRemoved:R}),(0,b.jsx)(ak,{}),(0,b.jsx)(an,{}),(0,b.jsx)(al,{}),(0,b.jsx)(ae,{onRefresh:R,contents:n?.contents??[],upcomingClasses:(n?.classes||[]).map(a=>({id:a.id,title:a.title,subject:a.subject,scheduledAt:a.startTime||a.scheduledAt||"",duration:a.duration,maxStudents:a.maxStudents,students:a.currentBookings||a._count?.participants||0,tutorName:a.tutor?.name||"Unknown Tutor",type:a.type||"online"})),bookingClassId:D,onBookClass:S}),n?.dailyQuests&&n.dailyQuests.length>0?(0,b.jsx)(A.DailyQuestsWidget,{quests:n.dailyQuests,completedCount:n.dailyQuests.filter(a=>a.completed).length,totalXp:n.dailyQuests.reduce((a,b)=>a+(b.completed?b.quest.xpReward:0),0),onQuestClick:b=>!b.completed&&a.push("/student/missions")}):(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsx)(h.CardTitle,{className:"text-lg",children:Q.dailyQuests})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"py-6 text-center text-gray-500",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700",children:Q.noDailyQuests}),(0,b.jsx)("p",{className:"text-xs mt-1",children:Q.noDailyQuestsHint}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",className:"mt-3 focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",onClick:()=>a.push("/student/missions"),children:Q.goToMissions})]})})]}),(0,b.jsx)(aV,{reviewData:N,onRefresh:R,fullWidth:!0}),n?.gamification?.skills&&(0,b.jsx)(I.SkillRadar,{skills:n.gamification.skills}),n?.studyGroups&&n.studyGroups.length>0&&(0,b.jsx)(L,{groups:n.studyGroups,joiningGroupId:F,onJoinGroup:T}),(0,b.jsx)(P,{})]})]})]})}a.s(["default",()=>aX],833735)}];

//# debugId=341448a5-8e2d-7c45-9228-2442b4ef9a3f
//# sourceMappingURL=b1c00_TutorMekimi_tutorme-app_src_app_%5Blocale%5D_student_dashboard_page_tsx_1a1bba94._.js.map