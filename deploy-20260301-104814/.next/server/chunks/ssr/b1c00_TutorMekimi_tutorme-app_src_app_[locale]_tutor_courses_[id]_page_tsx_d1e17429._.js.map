{
  "version": 3,
  "sources": [],
  "debugId": "5521a1b3-c141-aabc-4a83-fed403bbadc4",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/courses/%5Bid%5D/page.tsx","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/courses/%5Bid%5D/constants.ts","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/courses/%5Bid%5D/components/ScheduleSlotEditor.tsx","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/courses/%5Bid%5D/components/CourseScheduleCard.tsx"],"sourcesContent":["/**\n * Tutor course management page\n * Curriculum/materials source, language, price, shareable link, student count, schedule\n */\n\n'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { useParams, useRouter } from 'next/navigation'\nimport Link from 'next/link'\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { Textarea } from '@/components/ui/textarea'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { ArrowLeft, BookOpen, FileText, ListOrdered, CheckCircle2, Loader2, Radio, DollarSign } from 'lucide-react'\nimport { PublishButton, PublishStatusBadge } from '@/components/tutor/PublishButton'\nimport { toast } from 'sonner'\nimport type { ScheduleItem } from './constants'\nimport { DAYS, GRADE_LEVELS } from './constants'\nimport { CourseScheduleCard } from './components/CourseScheduleCard'\n\ninterface OutlineItem {\n  title: string\n  durationMinutes: number\n}\n\ninterface OutlineModuleItem {\n  title: string\n  description?: string\n  notes?: string\n  tasks?: { title: string }[]\n  lessons: { title: string; durationMinutes: number }[]\n}\n\ninterface CourseMaterials {\n  curriculumText?: string\n  notesText?: string\n  editableCurriculum?: string\n  editableNotes?: string\n  editableTopics?: string\n  outline?: OutlineItem[]\n  outlineModules?: { modules: OutlineModuleItem[] }\n}\n\ninterface Lesson {\n  id: string\n  title: string\n  description: string | null\n  order: number\n  duration: number\n}\n\ninterface Module {\n  id: string\n  title: string\n  description: string | null\n  order: number\n  lessons: Lesson[]\n}\n\ninterface CourseData {\n  id: string\n  name: string\n  description: string | null\n  subject: string\n  gradeLevel: string | null\n  difficulty: string\n  estimatedHours: number\n  isPublished: boolean\n  languageOfInstruction: string | null\n  price: number | null\n  currency: string | null\n  curriculumSource: string | null\n  outlineSource: string | null\n  schedule: ScheduleItem[]\n  studentCount: number\n  modules: Module[]\n  courseMaterials?: CourseMaterials\n}\n\nexport default function TutorCoursePage() {\n  const params = useParams()\n  const router = useRouter()\n  const id = params.id as string\n\n  const [course, setCourse] = useState<CourseData | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [saving, setSaving] = useState(false)\n\n  const [courseName, setCourseName] = useState('')\n  const [description, setDescription] = useState('')\n  const [gradeLevel, setGradeLevel] = useState('')\n  const [difficulty, setDifficulty] = useState('intermediate')\n  const [languageOfInstruction, setLanguageOfInstruction] = useState<string>('')\n  const [price, setPrice] = useState<string>('')\n  const [currency, setCurrency] = useState<string>('SGD')\n  const [curriculumSource, setCurriculumSource] = useState<'PLATFORM' | 'UPLOADED'>('PLATFORM')\n  const [curriculumCatalog, setCurriculumCatalog] = useState<{ id: string; name: string }[]>([])\n  const [loadingCatalog, setLoadingCatalog] = useState(false)\n  const [outlineSource, setOutlineSource] = useState<'SELF' | 'AI'>('SELF')\n  const [schedule, setSchedule] = useState<ScheduleItem[]>([])\n  const [materials, setMaterials] = useState<CourseMaterials>({})\n  const [uploadText, setUploadText] = useState({ curriculum: '', notes: '', topics: '' })\n  const [generatingOutline, setGeneratingOutline] = useState(false)\n  const [populatingSchedule, setPopulatingSchedule] = useState(false)\n  const [populatingFromContent, setPopulatingFromContent] = useState(false)\n  const [launchingLiveClass, setLaunchingLiveClass] = useState(false)\n  const [editableCurriculum, setEditableCurriculum] = useState('')\n  const [editableNotes, setEditableNotes] = useState('')\n  const [editableTopics, setEditableTopics] = useState('')\n  const [outline, setOutline] = useState<OutlineItem[]>([])\n  const [outlineModules, setOutlineModules] = useState<OutlineModuleItem[]>([])\n  const [outlineModalOpen, setOutlineModalOpen] = useState(false)\n  const [typicalLessonMinutes, setTypicalLessonMinutes] = useState(45)\n  const [tutorProfile, setTutorProfile] = useState<{ currency?: string | null } | null>(null)\n\n  const loadCourse = useCallback(async () => {\n    setLoading(true)\n    try {\n      const res = await fetch(`/api/tutor/courses/${id}`, { credentials: 'include' })\n      if (res.ok) {\n        const data = await res.json()\n        setCourse(data.course)\n      } else {\n        toast.error('Course not found')\n        router.push('/curriculum')\n      }\n    } catch {\n      toast.error('Failed to load course')\n      router.push('/curriculum')\n    } finally {\n      setLoading(false)\n    }\n  }, [id, router])\n\n  useEffect(() => {\n    loadCourse()\n  }, [loadCourse])\n\n  useEffect(() => {\n    fetch('/api/user/profile', { credentials: 'include' })\n      .then((r) => r.ok ? r.json() : null)\n      .then((data) => data?.profile && setTutorProfile(data.profile))\n      .catch(() => {})\n  }, [])\n\n  useEffect(() => {\n    if (!course) return\n    setCourseName(course.name ?? '')\n    setDescription(course.description ?? '')\n    setGradeLevel(course.gradeLevel ?? '')\n    setDifficulty(course.difficulty ?? 'intermediate')\n    setLanguageOfInstruction(course.languageOfInstruction ?? '')\n    setPrice(course.price != null ? String(course.price) : '')\n    setCurrency(course.currency ?? tutorProfile?.currency ?? 'SGD')\n    setCurriculumSource((course.curriculumSource as 'PLATFORM' | 'UPLOADED') ?? 'PLATFORM')\n    setOutlineSource((course.outlineSource as 'SELF' | 'AI') ?? 'SELF')\n    setSchedule(Array.isArray(course.schedule) ? [...course.schedule] : [])\n    const cm = course.courseMaterials\n    if (cm) {\n      setMaterials(cm)\n      setEditableCurriculum(cm.editableCurriculum ?? '')\n      setEditableNotes(cm.editableNotes ?? '')\n      setEditableTopics(cm.editableTopics ?? '')\n      setOutline(cm.outline ?? [])\n      setOutlineModules(cm.outlineModules?.modules ?? [])\n    }\n  }, [course, tutorProfile])\n\n  useEffect(() => {\n    const sub = course?.subject\n    if (!sub) {\n      setCurriculumCatalog([])\n      return\n    }\n    setLoadingCatalog(true)\n    fetch(`/api/curriculums/catalog?subject=${encodeURIComponent(sub)}`, { credentials: 'include' })\n      .then((res) => res.json())\n      .then((data) => setCurriculumCatalog(data.curriculums ?? []))\n      .catch(() => setCurriculumCatalog([]))\n      .finally(() => setLoadingCatalog(false))\n  }, [course?.subject])\n\n  const hasAtLeastOneUpload = !!(\n    uploadText.curriculum.trim() ||\n    uploadText.notes.trim() ||\n    uploadText.topics.trim() ||\n    materials.curriculumText ||\n    materials.editableCurriculum\n  )\n\n  const handleOpenInLiveClass = async () => {\n    if (!course) return\n    setLaunchingLiveClass(true)\n    try {\n      const csrfRes = await fetch('/api/csrf', { credentials: 'include' })\n      const csrfData = await csrfRes.json().catch(() => ({}))\n      const csrfToken = csrfData?.token ?? null\n\n      const durationFromSchedule =\n        Array.isArray(schedule) && schedule.length > 0\n          ? Number(schedule[0]?.durationMinutes) || 60\n          : 60\n\n      const normalizedDescription = (description?.trim() || course.description || '').trim()\n      const normalizedGradeLevel = (gradeLevel || course.gradeLevel || '').trim()\n      const payload: Record<string, unknown> = {\n        title: (courseName || course.name || '').trim(),\n        subject: course.subject || 'General',\n        curriculumId: course.id,\n        maxStudents: 50,\n        durationMinutes: Math.max(15, Math.min(480, durationFromSchedule)),\n        enableRecording: false,\n      }\n      if (normalizedDescription) payload.description = normalizedDescription\n      if (normalizedGradeLevel) payload.gradeLevel = normalizedGradeLevel\n\n      const res = await fetch('/api/class/rooms', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(csrfToken && { 'X-CSRF-Token': csrfToken }),\n        },\n        credentials: 'include',\n        body: JSON.stringify(payload),\n      })\n\n      if (!res.ok) {\n        const errorData = await res.json().catch(() => ({}))\n        throw new Error(errorData?.error || 'Failed to create live class')\n      }\n\n      const data = await res.json()\n      const sessionId = data?.session?.id\n      if (!sessionId) throw new Error('Live class created but session ID is missing')\n\n      toast.success('Live class created. Redirecting…')\n      router.push(`/tutor/live-class/${sessionId}`)\n    } catch (error) {\n      toast.error(error instanceof Error ? error.message : 'Failed to open live class')\n    } finally {\n      setLaunchingLiveClass(false)\n    }\n  }\n\n  const handleSaveAll = async () => {\n    setSaving(true)\n    try {\n      const csrf = await getCsrf()\n      const res = await fetch(`/api/tutor/courses/${id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json', ...(csrf && { 'X-CSRF-Token': csrf }) },\n        credentials: 'include',\n        body: JSON.stringify({\n          name: courseName.trim() || null,\n          description: description.trim() || null,\n          gradeLevel: gradeLevel || null,\n          difficulty: difficulty || null,\n          languageOfInstruction: languageOfInstruction || null,\n          price: price === '' ? null : Number(price),\n          currency: currency || null,\n          curriculumSource,\n          outlineSource: curriculumSource === 'UPLOADED' ? outlineSource : null,\n          schedule: schedule.length ? schedule : null,\n        }),\n      })\n      const data = await res.json()\n      if (!res.ok) {\n        toast.error(data.error ?? 'Failed to save')\n        return\n      }\n      setCourse((prev) =>\n        prev\n          ? {\n              ...prev,\n              name: courseName.trim() || prev.name,\n              description: description.trim() || prev.description,\n              gradeLevel: gradeLevel || prev.gradeLevel,\n              difficulty: difficulty || prev.difficulty,\n              languageOfInstruction: languageOfInstruction || null,\n              price: price === '' ? null : Number(price),\n              currency: currency || null,\n              curriculumSource,\n              outlineSource: curriculumSource === 'UPLOADED' ? outlineSource : null,\n              schedule,\n            }\n          : null\n      )\n      if (curriculumSource === 'UPLOADED' && (editableCurriculum || editableNotes || editableTopics || outline.length > 0)) {\n        const matRes = await fetch(`/api/tutor/courses/${id}/materials`, {\n          method: 'PATCH',\n          headers: { 'Content-Type': 'application/json', ...(csrf && { 'X-CSRF-Token': csrf }) },\n          credentials: 'include',\n          body: JSON.stringify({\n            editableCurriculum: editableCurriculum || undefined,\n            editableNotes: editableNotes || undefined,\n            editableTopics: editableTopics || undefined,\n            outline: outline.length ? outline : undefined,\n          }),\n        })\n        if (matRes.ok) loadCourse()\n      }\n      toast.success('All changes saved')\n      loadCourse()\n    } catch {\n      toast.error('Failed to save')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const handleCurriculumSelect = async (name: string) => {\n    setCourseName(name)\n    try {\n      const csrf = await getCsrf()\n      const res = await fetch(`/api/tutor/courses/${id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json', ...(csrf && { 'X-CSRF-Token': csrf }) },\n        credentials: 'include',\n        body: JSON.stringify({ name }),\n      })\n      if (res.ok) {\n        setCourse((prev) => (prev ? { ...prev, name } : null))\n        toast.success('Curriculum name updated')\n      } else {\n        const data = await res.json().catch(() => ({}))\n        toast.error(data.error ?? 'Failed to update name')\n      }\n    } catch {\n      toast.error('Failed to update curriculum name')\n    }\n  }\n\n  const getCsrf = async () => {\n    const res = await fetch('/api/csrf', { credentials: 'include' })\n    const data = await res.json().catch(() => ({}))\n    return data?.token ?? null\n  }\n\n  const handleGenerateOutline = async () => {\n    if (!hasAtLeastOneUpload) {\n      toast.error('Upload at least one of curriculum, notes, or topics before generating the outline.')\n      return\n    }\n    setGeneratingOutline(true)\n    try {\n      const csrf = await getCsrf()\n      const res = await fetch(`/api/tutor/courses/${id}/materials/outline`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', ...(csrf && { 'X-CSRF-Token': csrf }) },\n        credentials: 'include',\n        body: JSON.stringify({\n          typicalLessonMinutes,\n          curriculumText: uploadText.curriculum.trim() || materials.curriculumText || materials.editableCurriculum || undefined,\n          notesText: uploadText.notes.trim() || materials.notesText || materials.editableNotes || undefined,\n        }),\n      })\n      const data = await res.json()\n      if (res.ok) {\n        setOutline(data.outline ?? [])\n        setOutlineModules(data.outlineModules?.modules ?? [])\n        toast.success(data.message ?? 'Outline generated')\n        if (!outlineModalOpen) loadCourse()\n      } else toast.error(data.error ?? 'Failed to generate outline')\n    } catch {\n      toast.error('Failed to generate outline')\n    } finally {\n      setGeneratingOutline(false)\n    }\n  }\n\n  const handlePopulateSchedule = async () => {\n    setPopulatingSchedule(true)\n    try {\n      const csrf = await getCsrf()\n      const res = await fetch(`/api/tutor/courses/${id}/schedule/populate-from-outline`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', ...(csrf && { 'X-CSRF-Token': csrf }) },\n        credentials: 'include',\n        body: JSON.stringify({ firstDay: DAYS[0], startTime: '09:00' }),\n      })\n      const data = await res.json()\n      if (res.ok) {\n        setSchedule(data.schedule ?? [])\n        toast.success(data.message ?? 'Schedule populated')\n        loadCourse()\n      } else toast.error(data.error ?? 'Failed to populate schedule')\n    } catch {\n      toast.error('Failed to populate schedule')\n    } finally {\n      setPopulatingSchedule(false)\n    }\n  }\n\n  const handlePopulateScheduleFromContent = async () => {\n    setPopulatingFromContent(true)\n    try {\n      const csrf = await getCsrf()\n      const res = await fetch(`/api/tutor/courses/${id}/schedule/populate-from-content`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', ...(csrf && { 'X-CSRF-Token': csrf }) },\n        credentials: 'include',\n        body: JSON.stringify({ firstDay: DAYS[0], startTime: '09:00' }),\n      })\n      const data = await res.json()\n      if (res.ok) {\n        setSchedule(data.schedule ?? [])\n        toast.success(data.message ?? 'Schedule populated')\n        loadCourse()\n      } else toast.error(data.error ?? 'Failed to populate schedule')\n    } catch {\n      toast.error('Failed to populate schedule')\n    } finally {\n      setPopulatingFromContent(false)\n    }\n  }\n\n  const handleSaveMaterials = async () => {\n    try {\n      const csrf = await getCsrf()\n      const res = await fetch(`/api/tutor/courses/${id}/materials`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json', ...(csrf && { 'X-CSRF-Token': csrf }) },\n        credentials: 'include',\n        body: JSON.stringify({\n          editableCurriculum: editableCurriculum || undefined,\n          editableNotes: editableNotes || undefined,\n          editableTopics: editableTopics || undefined,\n          outline: outline.length ? outline : undefined,\n        }),\n      })\n      if (res.ok) {\n        toast.success('Materials saved')\n        loadCourse()\n      } else toast.error('Failed to save materials')\n    } catch {\n      toast.error('Failed to save materials')\n    }\n  }\n\n  const [fileExtracting, setFileExtracting] = useState(false)\n  const handleFileRead = async (type: 'curriculum' | 'notes' | 'topics', e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file) return\n    e.target.value = ''\n    const isPlainText = /\\.(txt|md|markdown)$/i.test(file.name) || file.type.startsWith('text/')\n    if (!isPlainText) setFileExtracting(true)\n    try {\n      const { extractTextFromFile } = await import('@/lib/extract-file-text')\n      const t = await extractTextFromFile(file)\n      if (type === 'curriculum') setUploadText((p) => ({ ...p, curriculum: t }))\n      else if (type === 'notes') setUploadText((p) => ({ ...p, notes: t }))\n      else setUploadText((p) => ({ ...p, topics: t }))\n      toast.info(t ? 'File loaded. Generate the course outline in step 4.' : 'File loaded but no text was extracted. Try another file.')\n    } catch (err) {\n      console.error(err)\n      toast.error('Could not read file. Try a .txt or .md file, or paste text.')\n    } finally {\n      setFileExtracting(false)\n    }\n  }\n\n  if (loading || !course) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <p className=\"text-muted-foreground\">Loading course…</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-6xl mx-auto p-4 sm:p-6 space-y-6\">\n        <div className=\"flex flex-wrap items-center justify-between gap-2\">\n          <div className=\"flex items-center gap-2\">\n            <Button variant=\"ghost\" size=\"icon\" asChild>\n              <Link href=\"/curriculum\">\n                <ArrowLeft className=\"h-4 w-4\" />\n              </Link>\n            </Button>\n            <h1 className=\"text-xl font-semibold truncate\">{course.name}</h1>\n            {gradeLevel && (\n              <span className=\"text-sm text-muted-foreground font-normal\">({gradeLevel})</span>\n            )}\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <PublishStatusBadge isPublished={course.isPublished} />\n            <PublishButton\n              course={{\n                id: course.id,\n                name: course.name,\n                description: course.description,\n                subject: course.subject,\n                price: course.price,\n                currency: course.currency,\n                isPublished: course.isPublished,\n                modules: course.modules,\n              }}\n              onPublishChange={(isPublished) => {\n                setCourse((prev) => (prev ? { ...prev, isPublished } : null))\n              }}\n              size=\"sm\"\n            />\n            <Button\n              variant=\"default\"\n              size=\"sm\"\n              onClick={handleOpenInLiveClass}\n              disabled={launchingLiveClass}\n            >\n              {launchingLiveClass ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Opening…\n                </>\n              ) : (\n                <>\n                  <Radio className=\"h-4 w-4 mr-2\" />\n                  Open in Live Class\n                </>\n              )}\n            </Button>\n            <Button variant=\"outline\" size=\"sm\" asChild>\n              <Link href=\"/tutor/dashboard\">Back to dashboard</Link>\n            </Button>\n          </div>\n        </div>\n\n        {/* Quick setup checklist - show when schedule is missing */}\n        {schedule.length === 0 && (\n          <Card className=\"border-dashed\">\n            <CardHeader className=\"py-3\">\n              <CardTitle className=\"text-sm font-medium\">Quick setup</CardTitle>\n              <CardDescription className=\"text-xs\">Complete this to finish setting up your course.</CardDescription>\n            </CardHeader>\n            <CardContent className=\"py-2\">\n              <ul className=\"text-sm space-y-1 list-disc list-inside text-muted-foreground\">\n                <li><a href=\"#course-schedule\" className=\"text-primary underline\">Add schedule (or populate from content/outline above)</a></li>\n              </ul>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Course Details */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <BookOpen className=\"h-5 w-5\" />\n              Course Details\n            </CardTitle>\n            <CardDescription>\n              Basic information about your course.\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            <div className=\"space-y-2\">\n              <Label>Course Name</Label>\n              {curriculumCatalog.length > 0 ? (\n                <Select\n                  value={courseName}\n                  onValueChange={handleCurriculumSelect}\n                  disabled={loadingCatalog}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder={loadingCatalog ? 'Loading…' : 'Select curriculum'} />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {courseName && !curriculumCatalog.some((c) => c.name === courseName) && (\n                      <SelectItem value={courseName}>Current: {courseName}</SelectItem>\n                    )}\n                    {curriculumCatalog.map((c) => (\n                      <SelectItem key={c.id} value={c.name}>\n                        {c.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              ) : (\n                <Input\n                  value={courseName}\n                  onChange={(e) => setCourseName(e.target.value)}\n                  placeholder=\"Course name\"\n                />\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label>Description</Label>\n              <Textarea\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                placeholder=\"What will students learn in this course?\"\n                rows={3}\n                className=\"resize-y\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label>Grade Level</Label>\n              <Select value={gradeLevel} onValueChange={setGradeLevel}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select grade\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {GRADE_LEVELS.map((g) => (\n                    <SelectItem key={g.value} value={g.value}>\n                      {g.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Pricing */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <DollarSign className=\"h-5 w-5\" />\n              Pricing\n            </CardTitle>\n            <CardDescription>\n              Set the price for your course. You need to set a price before publishing.\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"price\">Price</Label>\n                <Input\n                  id=\"price\"\n                  type=\"number\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  value={price}\n                  onChange={(e) => setPrice(e.target.value)}\n                  placeholder=\"e.g. 99\"\n                />\n                <p className=\"text-xs text-muted-foreground\">Leave empty for free courses</p>\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"currency\">Currency</Label>\n                <Select value={currency} onValueChange={setCurrency}>\n                  <SelectTrigger id=\"currency\">\n                    <SelectValue placeholder=\"Select currency\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"USD\">USD - US Dollar</SelectItem>\n                    <SelectItem value=\"SGD\">SGD - Singapore Dollar</SelectItem>\n                    <SelectItem value=\"EUR\">EUR - Euro</SelectItem>\n                    <SelectItem value=\"GBP\">GBP - British Pound</SelectItem>\n                    <SelectItem value=\"CNY\">CNY - Chinese Yuan</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n            {price && Number(price) > 0 && (\n              <div className=\"rounded-lg border bg-muted/30 p-3\">\n                <p className=\"text-sm\">\n                  <span className=\"font-medium\">Price preview:</span>{' '}\n                  {currency} {Number(price).toFixed(2)}\n                </p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <CourseScheduleCard\n          schedule={schedule}\n          onScheduleChange={setSchedule}\n        />\n\n        <div className=\"flex justify-end\">\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            onClick={handleSaveAll}\n            disabled={saving}\n          >\n            {saving ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : null}\n            {saving ? 'Saving…' : 'Save Changes'}\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n","/**\n * Shared constants for tutor course management (course page and builder).\n */\n\nexport interface ScheduleItem {\n  dayOfWeek: string\n  startTime: string\n  durationMinutes: number\n}\n\nexport const DAYS = [\n  'Monday',\n  'Tuesday',\n  'Wednesday',\n  'Thursday',\n  'Friday',\n  'Saturday',\n  'Sunday',\n] as const\n\nexport const GRADE_LEVELS = [\n  { value: 'Grade 1', label: 'Grade 1' },\n  { value: 'Grade 2', label: 'Grade 2' },\n  { value: 'Grade 3', label: 'Grade 3' },\n  { value: 'Grade 4', label: 'Grade 4' },\n  { value: 'Grade 5', label: 'Grade 5' },\n  { value: 'Grade 6', label: 'Grade 6' },\n  { value: 'Grade 7', label: 'Grade 7' },\n  { value: 'Grade 8', label: 'Grade 8' },\n  { value: 'Grade 9', label: 'Grade 9' },\n  { value: 'Grade 10', label: 'Grade 10' },\n  { value: 'Grade 11', label: 'Grade 11' },\n  { value: 'Grade 12', label: 'Grade 12' },\n  { value: 'College', label: 'College' },\n  { value: 'Adult Education', label: 'Adult Education' },\n] as const\n\nexport const DIFFICULTY_LEVELS = [\n  { value: 'beginner', label: 'Beginner' },\n  { value: 'intermediate', label: 'Intermediate' },\n  { value: 'advanced', label: 'Advanced' },\n] as const\n","'use client'\n\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { Button } from '@/components/ui/button'\nimport type { ScheduleItem } from '../constants'\nimport { DAYS } from '../constants'\n\ninterface ScheduleSlotEditorProps {\n  slot: ScheduleItem\n  index: number\n  onUpdate: (index: number, field: keyof ScheduleItem, value: string | number) => void\n  onRemove: (index: number) => void\n}\n\nexport function ScheduleSlotEditor({ slot, index, onUpdate, onRemove }: ScheduleSlotEditorProps) {\n  return (\n    <div className=\"flex flex-wrap items-end gap-2 p-3 rounded-lg border bg-muted/30\">\n      <div className=\"space-y-1 min-w-[120px]\">\n        <Label className=\"text-xs\">Day</Label>\n        <Select\n          value={slot.dayOfWeek}\n          onValueChange={(v) => onUpdate(index, 'dayOfWeek', v)}\n        >\n          <SelectTrigger>\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            {DAYS.map((d) => (\n              <SelectItem key={d} value={d}>\n                {d}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n      <div className=\"space-y-1 w-[90px]\">\n        <Label className=\"text-xs\">Start</Label>\n        <Input\n          type=\"time\"\n          value={slot.startTime}\n          onChange={(e) => onUpdate(index, 'startTime', e.target.value)}\n        />\n      </div>\n      <div className=\"space-y-1 w-[100px]\">\n        <Label className=\"text-xs\">Duration (min)</Label>\n        <Input\n          type=\"number\"\n          min={5}\n          max={480}\n          value={slot.durationMinutes}\n          onChange={(e) =>\n            onUpdate(index, 'durationMinutes', parseInt(e.target.value, 10) || 60)\n          }\n        />\n      </div>\n      <Button\n        type=\"button\"\n        variant=\"ghost\"\n        size=\"icon\"\n        onClick={() => onRemove(index)}\n        className=\"text-destructive hover:text-destructive\"\n        aria-label=\"Remove slot\"\n      >\n        Remove\n      </Button>\n    </div>\n  )\n}\n","'use client'\n\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport type { ScheduleItem } from '../constants'\nimport { DAYS } from '../constants'\nimport { ScheduleSlotEditor } from './ScheduleSlotEditor'\nimport { Calendar } from 'lucide-react'\n\ninterface CourseScheduleCardProps {\n  schedule: ScheduleItem[]\n  onScheduleChange: (updater: (prev: ScheduleItem[]) => ScheduleItem[]) => void\n  /** Optional subtitle, e.g. \"for Group A\" */\n  subtitle?: string\n}\n\nexport function CourseScheduleCard({\n  schedule,\n  onScheduleChange,\n  subtitle,\n}: CourseScheduleCardProps) {\n  const addSlot = () => {\n    onScheduleChange((prev) => [\n      ...prev,\n      { dayOfWeek: DAYS[0], startTime: '09:00', durationMinutes: 60 },\n    ])\n  }\n\n  const updateSlot = (index: number, field: keyof ScheduleItem, value: string | number) => {\n    onScheduleChange((prev) => {\n      const next = [...prev]\n      next[index] = { ...next[index], [field]: value }\n      return next\n    })\n  }\n\n  const removeSlot = (index: number) => {\n    onScheduleChange((prev) => prev.filter((_, i) => i !== index))\n  }\n\n  return (\n    <Card id=\"course-schedule\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Calendar className=\"h-5 w-5\" />\n          Class schedule\n          {subtitle && (\n            <span className=\"text-sm font-normal text-muted-foreground\">\n              ({subtitle})\n            </span>\n          )}\n        </CardTitle>\n        <CardDescription>\n          Set recurring slots for this course. Save with &quot;Save settings only&quot; or &quot;Save all&quot; below.\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {schedule.map((slot, index) => (\n          <ScheduleSlotEditor\n            key={index}\n            slot={slot}\n            index={index}\n            onUpdate={updateSlot}\n            onRemove={removeSlot}\n          />\n        ))}\n        <Button type=\"button\" variant=\"outline\" onClick={addSlot}>\n          Add class slot\n        </Button>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}