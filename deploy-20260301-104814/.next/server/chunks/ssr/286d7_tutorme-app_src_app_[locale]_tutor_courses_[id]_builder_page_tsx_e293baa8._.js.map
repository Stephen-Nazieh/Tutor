{
  "version": 3,
  "sources": [],
  "debugId": "e4fc2dcf-0354-8ad6-2112-a8c201d90323",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/courses/%5Bid%5D/builder/page.tsx","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/tutor/courses/components/CourseBuilderContent.tsx","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/tutor/CoursePitchSection.tsx"],"sourcesContent":["/**\n * Course Builder 2.0 Page\n * Renders the shared Class | Course Builder tabbed page with Course Builder tab active.\n */\n\n'use client'\n\nimport { useParams } from 'next/navigation'\nimport { CourseBuilderContent } from '../../components/CourseBuilderContent'\n\nexport default function CourseBuilderPage() {\n  const params = useParams()\n  const courseId = (params?.id as string) ?? null\n\n  return <CourseBuilderContent courseId={courseId} />\n}","/**\n * Course Builder 2.0 content for a given course.\n * Loads the curriculum tree from the backend on mount;\n * saves back via PUT /api/tutor/courses/[id]/curriculum.\n */\n\n'use client'\n\nimport Link from 'next/link'\nimport { useState, useEffect, useCallback, useRef } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { ArrowLeft, Wand2, BookOpen, Radio, Loader2, Settings, Save } from 'lucide-react'\nimport { CourseBuilder } from '../../dashboard/components/CourseBuilder'\nimport type { Module as CourseBuilderModule, CourseBuilderRef } from '../../dashboard/components/CourseBuilder'\nimport { toast } from 'sonner'\nimport { cn } from '@/lib/utils'\nimport { PublishStatusBadge } from '@/components/tutor/PublishButton'\nimport { CoursePitchSection } from '@/components/tutor/CoursePitchSection'\n\ninterface CourseData {\n  id: string\n  name: string\n  description?: string | null\n  subject?: string | null\n  isLiveOnline?: boolean\n  studentCount: number\n  isPublished: boolean\n  price?: number | null\n  currency?: string | null\n}\n\ninterface AdaptiveVariantLink {\n  difficulty: 'beginner' | 'intermediate' | 'advanced'\n  batchId: string\n  batchName: string\n  joinLink: string\n}\n\nconst DIFFICULTY_ORDER: Record<AdaptiveVariantLink['difficulty'], number> = {\n  beginner: 0,\n  intermediate: 1,\n  advanced: 2,\n}\n\nfunction normalizeVariantLinks(data: unknown): AdaptiveVariantLink[] {\n  if (!Array.isArray(data)) return []\n\n  return data\n    .filter((item): item is AdaptiveVariantLink => {\n      if (!item || typeof item !== 'object') return false\n      const candidate = item as Partial<AdaptiveVariantLink>\n      return (\n        (candidate.difficulty === 'beginner' ||\n          candidate.difficulty === 'intermediate' ||\n          candidate.difficulty === 'advanced') &&\n        typeof candidate.batchId === 'string' &&\n        typeof candidate.batchName === 'string' &&\n        typeof candidate.joinLink === 'string'\n      )\n    })\n    .sort((a, b) => DIFFICULTY_ORDER[a.difficulty] - DIFFICULTY_ORDER[b.difficulty])\n}\n\nexport function CourseBuilderContent({ courseId }: { courseId: string | null }) {\n  const [course, setCourse] = useState<CourseData | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [saving, setSaving] = useState(false)\n  const [isLiveOnline, setIsLiveOnline] = useState(true)\n  const [loadedModules, setLoadedModules] = useState<CourseBuilderModule[] | null>(null)\n  const [savedVariants, setSavedVariants] = useState<AdaptiveVariantLink[]>([])\n  const courseBuilderRef = useRef<CourseBuilderRef>(null)\n\n  const loadCourse = useCallback(async () => {\n    if (!courseId) return\n    setLoading(true)\n    try {\n      // Load course metadata\n      const res = await fetch(`/api/tutor/courses/${courseId}`, { credentials: 'include' })\n      if (res.ok) {\n        const data = await res.json()\n        setCourse(data.course)\n        setIsLiveOnline(data.course?.isLiveOnline ?? true)\n      }\n\n      // Load curriculum tree from DB\n      const currRes = await fetch(`/api/tutor/courses/${courseId}/curriculum`, { credentials: 'include' })\n      if (currRes.ok) {\n        const currData = await currRes.json()\n        if (Array.isArray(currData.modules) && currData.modules.length > 0) {\n          setLoadedModules(currData.modules)\n        } else {\n          // No modules saved yet ‚Äî start with empty defaults\n          setLoadedModules(null)\n        }\n      }\n    } catch {\n      // ignore\n    } finally {\n      setLoading(false)\n    }\n  }, [courseId])\n\n  useEffect(() => {\n    loadCourse()\n  }, [loadCourse])\n\n  const handleToggleAvailability = async () => {\n    const newValue = !isLiveOnline\n    setIsLiveOnline(newValue)\n\n    setSaving(true)\n    try {\n      const csrfRes = await fetch('/api/csrf', { credentials: 'include' })\n      const csrfData = await csrfRes.json().catch(() => ({}))\n      const csrfToken = csrfData?.token ?? null\n\n      const res = await fetch(`/api/tutor/courses/${courseId}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(csrfToken && { 'X-CSRF-Token': csrfToken }),\n        },\n        credentials: 'include',\n        body: JSON.stringify({ isLiveOnline: newValue }),\n      })\n\n      if (res.ok) {\n        toast.success(newValue ? 'Course is now online' : 'Course is now offline')\n        setCourse(prev => prev ? { ...prev, isLiveOnline: newValue } : null)\n      } else {\n        setIsLiveOnline(!newValue)\n        toast.error('Failed to update availability')\n      }\n    } catch {\n      setIsLiveOnline(!newValue)\n      toast.error('Failed to update availability')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  if (!courseId) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-6\">\n        <Card className=\"max-w-md w-full\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <BookOpen className=\"h-5 w-5\" />\n              Course Builder\n            </CardTitle>\n            <CardDescription>\n              Select a course to edit its curriculum. Open a course from the Course Catalogue or from your dashboard to use the builder.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Button asChild className=\"w-full\">\n              <Link href=\"/curriculum\">Open Course Catalogue</Link>\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  const handleSave = async (\n    modules: CourseBuilderModule[],\n    options?: {\n      developmentMode: 'single' | 'multi'\n      previewDifficulty: 'all' | 'beginner' | 'intermediate' | 'advanced'\n    }\n  ) => {\n    setSaving(true)\n    try {\n      const csrfRes = await fetch('/api/csrf', { credentials: 'include' })\n      const csrfData = await csrfRes.json().catch(() => ({}))\n      const csrfToken = csrfData?.token ?? null\n\n      const res = await fetch(`/api/tutor/courses/${courseId}/curriculum`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(csrfToken && { 'X-CSRF-Token': csrfToken }),\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          modules,\n          developmentMode: options?.developmentMode ?? 'single',\n          previewDifficulty: options?.previewDifficulty ?? 'all',\n        }),\n      })\n\n      if (res.ok) {\n        const data = await res.json()\n        toast.success(`Curriculum saved ‚Äî ${data.moduleCount} modules, ${data.lessonCount} lessons`)\n        const ordered = normalizeVariantLinks(data.variants)\n        if (ordered.length > 0) {\n          setSavedVariants(ordered)\n          toast.success(`Adaptive variants ready: ${ordered.map((v) => v.difficulty).join(', ')}`)\n        } else {\n          setSavedVariants([])\n        }\n      } else {\n        const err = await res.json().catch(() => ({}))\n        toast.error(err.error ?? 'Failed to save curriculum')\n      }\n    } catch {\n      toast.error('Failed to save curriculum')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Top Navigation Header */}\n      <div className=\"bg-white border-b sticky top-0 z-10\">\n        <div className=\"max-w-[1600px] mx-auto px-4 sm:px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <Button variant=\"ghost\" size=\"icon\" asChild>\n                <Link href=\"/tutor/my-page?tab=drafts\">\n                  <ArrowLeft className=\"h-4 w-4\" />\n                </Link>\n              </Button>\n              <div>\n                <h1 className=\"text-xl font-semibold\">\n                  {loading ? 'Loading...' : (course?.name ?? 'Course Builder 2.0')}\n                </h1>\n                <p className=\"text-sm text-muted-foreground\">\n                  <Link href=\"/tutor/my-page?tab=drafts\" className=\"hover:text-blue-600 hover:underline\">\n                    ‚Üê Back to Work in Progress\n                  </Link>\n                  {saving && <span className=\"ml-2 text-blue-600\">‚Ä¢ Saving...</span>}\n                </p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              {/* Course Availability Toggle */}\n              <div className=\"flex items-center gap-2 pr-4 border-r\">\n                <Radio className={cn(\n                  \"h-4 w-4\",\n                  isLiveOnline ? \"text-green-500\" : \"text-gray-400\"\n                )} />\n                <span className=\"text-sm text-muted-foreground hidden sm:inline\">\n                  {isLiveOnline ? 'Online' : 'Offline'}\n                </span>\n                <button\n                  type=\"button\"\n                  onClick={handleToggleAvailability}\n                  disabled={saving || loading}\n                  className={cn(\n                    \"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\",\n                    isLiveOnline ? 'bg-green-500' : 'bg-gray-200',\n                    (saving || loading) && 'opacity-50 cursor-not-allowed'\n                  )}\n                >\n                  <span\n                    className={cn(\n                      \"inline-block h-4 w-4 transform rounded-full bg-white transition-transform\",\n                      isLiveOnline ? 'translate-x-6' : 'translate-x-1'\n                    )}\n                  />\n                </button>\n              </div>\n\n              <Button\n                variant=\"default\"\n                className=\"gap-2\"\n                onClick={() => courseBuilderRef.current?.save()}\n                disabled={saving}\n              >\n                {saving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Save className=\"w-4 h-4\" />}\n                Save Course\n              </Button>\n              {course && (\n                <>\n                  <PublishStatusBadge isPublished={course.isPublished} />\n                  <Button variant=\"outline\" asChild>\n                    <Link href={`/tutor/courses/${courseId}`}>\n                      <Settings className=\"w-4 h-4 mr-2\" />\n                      Settings\n                    </Link>\n                  </Button>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content - Full Width for 3-Column Layout */}\n      <div className=\"max-w-[1600px] mx-auto px-4 sm:px-6 py-6\">\n        {savedVariants.length > 0 && (\n          <Card className=\"mb-4 border-emerald-200 bg-emerald-50/40\">\n            <CardHeader className=\"pb-2 pt-4\">\n              <CardTitle className=\"text-sm\">Adaptive Variant Join Links</CardTitle>\n              <CardDescription>\n                Share the correct link with students for each difficulty level.\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-2 pb-4\">\n              {savedVariants.map((variant) => (\n                <div key={variant.batchId} className=\"rounded-md border bg-white p-2.5\">\n                  <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\n                    <div className=\"min-w-0\">\n                      <p className=\"text-xs font-medium capitalize\">{variant.difficulty}</p>\n                      <p className=\"truncate text-[11px] text-muted-foreground\">{variant.batchName}</p>\n                    </div>\n                    <Button\n                      type=\"button\"\n                      size=\"sm\"\n                      variant=\"outline\"\n                      className=\"h-7 px-2 text-xs\"\n                      onClick={async () => {\n                        try {\n                          await navigator.clipboard.writeText(variant.joinLink)\n                          toast.success(`${variant.difficulty} join link copied`)\n                        } catch {\n                          toast.error('Failed to copy link')\n                        }\n                      }}\n                    >\n                      Copy Link\n                    </Button>\n                  </div>\n                  <p className=\"mt-1 break-all text-[11px] text-muted-foreground\">{variant.joinLink}</p>\n                </div>\n              ))}\n            </CardContent>\n          </Card>\n        )}\n\n        {loading ? (\n          <div className=\"flex items-center justify-center py-12\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-blue-500\" />\n          </div>\n        ) : (\n          <CourseBuilder\n            ref={courseBuilderRef}\n            courseId={courseId}\n            courseName={course?.name}\n            initialModules={loadedModules ?? undefined}\n            onSave={handleSave}\n          />\n        )}\n\n        {/* Course Pitch Section - Now at the BOTTOM */}\n        {courseId && <CoursePitchSection courseId={courseId} />}\n      </div>\n    </div>\n  )\n}\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { Badge } from '@/components/ui/badge'\nimport { Sparkles, Loader2, Save, Trash2, Eye, Edit3, Wand2, PenLine } from 'lucide-react'\nimport { toast } from 'sonner'\nimport { cn } from '@/lib/utils'\n\ninterface CoursePitchSectionProps {\n  courseId: string\n}\n\nexport function CoursePitchSection({ courseId }: CoursePitchSectionProps) {\n  const [pitch, setPitch] = useState<string | null>(null)\n  const [editedPitch, setEditedPitch] = useState('')\n  const [manualPitch, setManualPitch] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n  const [isGenerating, setIsGenerating] = useState(false)\n  const [isSavingManual, setIsSavingManual] = useState(false)\n  const [showPreview, setShowPreview] = useState(false)\n  const [showEditDialog, setShowEditDialog] = useState(false)\n  const [isSaving, setIsSaving] = useState(false)\n  const [activeTab, setActiveTab] = useState<'ai' | 'manual'>(pitch ? 'ai' : 'ai')\n\n  useEffect(() => {\n    loadPitch()\n  }, [courseId])\n\n  const loadPitch = async () => {\n    setIsLoading(true)\n    try {\n      const res = await fetch(`/api/tutor/courses/${courseId}/pitch`, {\n        credentials: 'include'\n      })\n      if (res.ok) {\n        const data = await res.json()\n        setPitch(data.pitch)\n        setEditedPitch(data.pitch || '')\n        setManualPitch(data.pitch || '')\n      }\n    } catch {\n      // ignore\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const generatePitch = async () => {\n    setIsGenerating(true)\n    try {\n      const csrfRes = await fetch('/api/csrf', { credentials: 'include' })\n      const csrfData = await csrfRes.json().catch(() => ({}))\n      const csrfToken = csrfData?.token ?? null\n\n      const res = await fetch(`/api/tutor/courses/${courseId}/pitch`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(csrfToken ? { 'X-CSRF-Token': csrfToken } : {}),\n        },\n        credentials: 'include',\n      })\n\n      if (!res.ok) {\n        const data = await res.json()\n        throw new Error(data.error || 'Failed to generate pitch')\n      }\n\n      const data = await res.json()\n      setPitch(data.pitch)\n      setEditedPitch(data.pitch)\n      setManualPitch(data.pitch)\n      setActiveTab('ai')\n      toast.success('Course pitch generated successfully!')\n    } catch (error) {\n      toast.error(error instanceof Error ? error.message : 'Failed to generate pitch')\n    } finally {\n      setIsGenerating(false)\n    }\n  }\n\n  const saveManualPitch = async () => {\n    if (!manualPitch.trim()) {\n      toast.error('Please enter a pitch')\n      return\n    }\n    setIsSavingManual(true)\n    try {\n      const csrfRes = await fetch('/api/csrf', { credentials: 'include' })\n      const csrfData = await csrfRes.json().catch(() => ({}))\n      const csrfToken = csrfData?.token ?? null\n\n      const res = await fetch(`/api/tutor/courses/${courseId}/pitch`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(csrfToken ? { 'X-CSRF-Token': csrfToken } : {}),\n        },\n        credentials: 'include',\n        body: JSON.stringify({ pitch: manualPitch }),\n      })\n\n      if (!res.ok) throw new Error('Failed to save')\n\n      setPitch(manualPitch)\n      setEditedPitch(manualPitch)\n      toast.success('Course pitch saved!')\n    } catch {\n      toast.error('Failed to save pitch')\n    } finally {\n      setIsSavingManual(false)\n    }\n  }\n\n  const savePitch = async () => {\n    setIsSaving(true)\n    try {\n      const csrfRes = await fetch('/api/csrf', { credentials: 'include' })\n      const csrfData = await csrfRes.json().catch(() => ({}))\n      const csrfToken = csrfData?.token ?? null\n\n      const res = await fetch(`/api/tutor/courses/${courseId}/pitch`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(csrfToken ? { 'X-CSRF-Token': csrfToken } : {}),\n        },\n        credentials: 'include',\n        body: JSON.stringify({ pitch: editedPitch }),\n      })\n\n      if (!res.ok) throw new Error('Failed to save')\n\n      setPitch(editedPitch)\n      setManualPitch(editedPitch)\n      setShowEditDialog(false)\n      toast.success('Course pitch saved!')\n    } catch {\n      toast.error('Failed to save pitch')\n    } finally {\n      setIsSaving(false)\n    }\n  }\n\n  const deletePitch = async () => {\n    try {\n      const csrfRes = await fetch('/api/csrf', { credentials: 'include' })\n      const csrfData = await csrfRes.json().catch(() => ({}))\n      const csrfToken = csrfData?.token ?? null\n\n      const res = await fetch(`/api/tutor/courses/${courseId}/pitch`, {\n        method: 'DELETE',\n        headers: csrfToken ? { 'X-CSRF-Token': csrfToken } : {},\n        credentials: 'include',\n      })\n\n      if (!res.ok) throw new Error('Failed to delete')\n\n      setPitch(null)\n      setEditedPitch('')\n      setManualPitch('')\n      toast.success('Course pitch deleted')\n    } catch {\n      toast.error('Failed to delete pitch')\n    }\n  }\n\n  const renderMarkdown = (text: string) => {\n    return text\n      .replace(/^## (.*$)/gim, '<h2 class=\"text-xl font-bold mt-6 mb-3 text-slate-900\">$1</h2>')\n      .replace(/^### (.*$)/gim, '<h3 class=\"text-lg font-semibold mt-4 mb-2 text-slate-800\">$1</h3>')\n      .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n      .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n      .replace(/^- (.*$)/gim, '<li class=\"ml-4 mb-1\">$1</li>')\n      .replace(/(<li.*<\\/li>\\n?)+/g, '<ul class=\"list-disc mb-4\">$&</ul>')\n      .replace(/\\n\\n/g, '<br/><br/>')\n  }\n\n  if (isLoading) {\n    return (\n      <Card className=\"mb-6\">\n        <CardContent className=\"py-8 text-center\">\n          <Loader2 className=\"h-8 w-8 animate-spin mx-auto text-muted-foreground\" />\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <>\n      <Card className={cn(\"mb-6\", pitch && \"border-green-200 bg-green-50/30\")}>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Sparkles className=\"h-5 w-5 text-amber-500\" />\n                Course Pitch\n              </CardTitle>\n              <CardDescription>\n                Create a compelling marketing description that persuades students to enroll\n              </CardDescription>\n            </div>\n            {pitch && (\n              <Badge variant=\"default\" className=\"bg-green-100 text-green-800\">\n                Saved\n              </Badge>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          {!pitch ? (\n            <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as 'ai' | 'manual')}>\n              <TabsList className=\"mb-4\">\n                <TabsTrigger value=\"ai\" className=\"gap-2\">\n                  <Wand2 className=\"h-4 w-4\" />\n                  AI Generate\n                </TabsTrigger>\n                <TabsTrigger value=\"manual\" className=\"gap-2\">\n                  <PenLine className=\"h-4 w-4\" />\n                  Write My Own\n                </TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"ai\">\n                <div className=\"text-center py-8 bg-muted/30 rounded-lg\">\n                  <Wand2 className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-medium mb-2\">Generate with AI</h3>\n                  <p className=\"text-muted-foreground mb-4 max-w-md mx-auto\">\n                    Let AI create a persuasive course description that highlights what students will learn, \n                    who it&apos;s for, and why they should enroll.\n                  </p>\n                  <Button \n                    onClick={generatePitch} \n                    disabled={isGenerating}\n                    size=\"lg\"\n                    className=\"gap-2\"\n                  >\n                    {isGenerating ? (\n                      <>\n                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                        Generating...\n                      </>\n                    ) : (\n                      <>\n                        <Sparkles className=\"h-4 w-4\" />\n                        Generate Course Pitch\n                      </>\n                    )}\n                  </Button>\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"manual\">\n                <div className=\"space-y-4\">\n                  <Textarea\n                    placeholder=\"Write your course pitch here... Describe what students will learn, who this course is for, and why they should enroll.\"\n                    value={manualPitch}\n                    onChange={(e) => setManualPitch(e.target.value)}\n                    rows={8}\n                    className=\"resize-none\"\n                  />\n                  <div className=\"flex justify-end\">\n                    <Button \n                      onClick={saveManualPitch}\n                      disabled={isSavingManual || !manualPitch.trim()}\n                      className=\"gap-2\"\n                    >\n                      {isSavingManual && <Loader2 className=\"h-4 w-4 animate-spin\" />}\n                      <Save className=\"h-4 w-4\" />\n                      Save Pitch\n                    </Button>\n                  </div>\n                </div>\n              </TabsContent>\n            </Tabs>\n          ) : (\n            <div className=\"space-y-4\">\n              <div className=\"bg-white rounded-lg p-4 max-h-[300px] overflow-y-auto border\">\n                <div \n                  className=\"prose prose-slate max-w-none\"\n                  dangerouslySetInnerHTML={{ __html: renderMarkdown(pitch) }}\n                />\n              </div>\n              \n              <div className=\"flex flex-wrap gap-2\">\n                <Button \n                  variant=\"outline\" \n                  onClick={() => setShowPreview(true)}\n                  className=\"gap-2\"\n                >\n                  <Eye className=\"h-4 w-4\" />\n                  Full Preview\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  onClick={() => setShowEditDialog(true)}\n                  className=\"gap-2\"\n                >\n                  <Edit3 className=\"h-4 w-4\" />\n                  Edit\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  onClick={generatePitch}\n                  disabled={isGenerating}\n                  className=\"gap-2\"\n                >\n                  {isGenerating ? (\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  ) : (\n                    <Wand2 className=\"h-4 w-4\" />\n                  )}\n                  Regenerate with AI\n                </Button>\n                <Button \n                  variant=\"ghost\" \n                  onClick={deletePitch}\n                  className=\"gap-2 text-red-600 hover:text-red-700 hover:bg-red-50\"\n                >\n                  <Trash2 className=\"h-4 w-4\" />\n                  Delete\n                </Button>\n              </div>\n\n              <div className=\"rounded-lg border bg-amber-50 border-amber-200 p-4\">\n                <p className=\"text-sm text-amber-800\">\n                  <strong>üí° Tip:</strong> This pitch will be displayed on the course page for students to read. \n                  A compelling pitch can significantly increase enrollment rates!\n                </p>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Full Preview Dialog */}\n      <Dialog open={showPreview} onOpenChange={setShowPreview}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Course Pitch Preview</DialogTitle>\n            <DialogDescription>\n              This is how students will see your course pitch\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"prose prose-slate max-w-none\">\n            <div dangerouslySetInnerHTML={{ __html: renderMarkdown(pitch || '') }} />\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Edit Dialog */}\n      <Dialog open={showEditDialog} onOpenChange={setShowEditDialog}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh]\">\n          <DialogHeader>\n            <DialogTitle>Edit Course Pitch</DialogTitle>\n            <DialogDescription>\n              Make adjustments to your course pitch\n            </DialogDescription>\n          </DialogHeader>\n          <Textarea\n            value={editedPitch}\n            onChange={(e) => setEditedPitch(e.target.value)}\n            rows={20}\n            className=\"font-mono text-sm\"\n          />\n          <div className=\"flex justify-end gap-2\">\n            <Button variant=\"outline\" onClick={() => setShowEditDialog(false)}>\n              Cancel\n            </Button>\n            <Button onClick={savePitch} disabled={isSaving} className=\"gap-2\">\n              {isSaving && <Loader2 className=\"h-4 w-4 animate-spin\" />}\n              <Save className=\"h-4 w-4\" />\n              Save Changes\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}