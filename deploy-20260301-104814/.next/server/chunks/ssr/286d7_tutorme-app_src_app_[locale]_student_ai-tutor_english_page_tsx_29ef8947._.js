;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d72494ca-1795-a10d-f0fe-151f02efc8f0")}catch(e){}}();
module.exports=[896871,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(454069),e=a.i(52028),f=a.i(113098),g=a.i(88684),h=a.i(981354),i=a.i(333340),j=a.i(185407),k=a.i(101259),l=a.i(846438),m=a.i(815350),n=a.i(11894),o=a.i(290385),p=a.i(591008),q=a.i(706562),r=a.i(633600),s=a.i(808967),t=a.i(209347),u=a.i(458563),v=a.i(770446),w=a.i(425798),x=a.i(771516),y=a.i(892094),z=a.i(269041),A=a.i(428091),B=a.i(334760),C=a.i(855765),D=a.i(859228),E=a.i(295572),F=a.i(724403),G=a.i(801728),H=a.i(560467),I=a.i(879442),J=a.i(635668),K=a.i(479575),L=a.i(250537),M=a.i(494176);function N({curriculum:a,currentLessonId:d,onSelectLesson:e,compact:f=!1,collapsed:h=!1,onToggleCollapse:k}){let[l,m]=(0,c.useState)(new Set);(0,c.useEffect)(()=>{if(a.modules.length>0){for(let b of a.modules)if(b.lessons.some(a=>!a.progress||"COMPLETED"!==a.progress.status)){m(new Set([b.id]));break}}},[a.modules]);let n=a.modules.reduce((a,b)=>a+b.lessons.length,0),o=a.modules.reduce((a,b)=>a+b.lessons.filter(a=>a.progress?.status==="COMPLETED").length,0),p=n>0?o/n*100:0;return h?(0,b.jsxs)("div",{className:"w-16 flex flex-col items-center py-3",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:k,className:"mb-2",children:(0,b.jsx)(K.PanelLeft,{className:"w-4 h-4"})}),(0,b.jsx)("div",{className:"w-8 h-px bg-gray-200 my-2"}),(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-100 to-blue-100 flex items-center justify-center mb-2",children:(0,b.jsx)(t.GraduationCap,{className:"w-5 h-5 text-purple-600"})}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsxs)("span",{className:"text-xs font-bold text-purple-600",children:[Math.round(p),"%"]})}),(0,b.jsx)("div",{className:"w-8 h-px bg-gray-200 my-2"}),(0,b.jsx)("div",{className:"flex flex-col items-center gap-1",children:a.modules.slice(0,4).map((a,c)=>(0,b.jsx)("div",{className:(0,M.cn)("w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium",a.lessons.some(a=>a.progress?.status==="COMPLETED")?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),title:a.title,children:c+1},a.id))})]}):f?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"p-3 bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t.GraduationCap,{className:"w-5 h-5 text-purple-600"}),(0,b.jsx)("span",{className:"font-medium text-sm",children:a.name})]}),(0,b.jsx)(F.Progress,{value:p,className:"mt-2 h-1.5"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[o,"/",n," lessons completed"]})]}),(0,b.jsx)("div",{className:"space-y-1",children:a.modules.slice(0,2).map(a=>(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:"font-medium text-gray-700 truncate",children:a.title}),(0,b.jsx)("div",{className:"flex gap-1 mt-1",children:a.skills.slice(0,2).map(a=>(0,b.jsx)(i.Badge,{variant:"secondary",className:"text-xs capitalize",children:a},a))})]},a.id))})]}):(0,b.jsxs)("div",{className:"h-full flex flex-col",children:[(0,b.jsxs)("div",{className:"p-4 border-b bg-gradient-to-br from-purple-50 to-blue-50",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t.GraduationCap,{className:"w-5 h-5 text-purple-600"}),(0,b.jsx)("h3",{className:"font-semibold",children:a.name})]}),k&&(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:k,children:(0,b.jsx)(L.PanelLeftClose,{className:"w-4 h-4"})})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Progress"}),(0,b.jsxs)("span",{className:"font-medium",children:[Math.round(p),"%"]})]}),(0,b.jsx)(F.Progress,{value:p,className:"h-2"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[o," of ",n," lessons completed"]})]})]}),(0,b.jsx)(j.ScrollArea,{className:"flex-1",children:(0,b.jsx)("div",{className:"p-2 space-y-1",children:a.modules.map((a,c)=>{let f=l.has(a.id),g=a.lessons.filter(a=>a.progress?.status==="COMPLETED").length;return(0,b.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,b.jsxs)("button",{onClick:()=>{var b;return b=a.id,void m(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},className:"w-full p-3 flex items-center gap-2 hover:bg-gray-50 transition-colors text-left",children:[f?(0,b.jsx)(G.ChevronDown,{className:"w-4 h-4 text-gray-400"}):(0,b.jsx)(y.ChevronRight,{className:"w-4 h-4 text-gray-400"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("p",{className:"font-medium text-sm truncate",children:["Module ",c+1,": ",a.title]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[g,"/",a.lessons.length," lessons â€¢ ",a.estimatedHours,"h"]})]})]}),f&&(0,b.jsx)("div",{className:"border-t bg-gray-50/50",children:a.lessons.map(c=>(0,b.jsxs)("button",{onClick:()=>e?.(c,a),className:`w-full p-3 flex items-start gap-2 text-left hover:bg-white transition-colors ${d===c.id?"bg-blue-50 border-l-2 border-blue-500":""}`,children:[c.progress?.status==="COMPLETED"?(0,b.jsx)(H.CheckCircle,{className:"w-4 h-4 text-green-500"}):c.progress?.status==="IN_PROGRESS"?(0,b.jsx)(J.PlayCircle,{className:"w-4 h-4 text-blue-500"}):(0,b.jsx)(I.Circle,{className:"w-4 h-4 text-gray-300"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm truncate",children:c.title}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsxs)("span",{className:"text-xs text-gray-400",children:[c.duration," min"]}),(0,b.jsx)(i.Badge,{className:`text-xs ${(a=>{switch(a){case"easy":return"bg-green-100 text-green-700";case"medium":return"bg-yellow-100 text-yellow-700";case"hard":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}})(c.difficulty)}`,children:c.difficulty})]})]})]},c.id))})]},a.id)})})})]})}var O=a.i(868606),P=a.i(884660),Q=a.i(605398),R=a.i(908819),S=a.i(226886),T=a.i(472513),U=a.i(618349),V=a.i(327002),W=a.i(55799);function X({className:a,isListening:d=!1,transcriptions:e=[],onStartGame:h,currentActivity:k="idle",collapsed:l=!1,onToggleCollapse:m,collapseDirection:n="left"}){let[o,p]=(0,c.useState)("demo"),[q,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(0);return l?(0,b.jsxs)(f.Card,{className:(0,M.cn)("w-16 flex flex-col items-center py-3",a),children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:m,className:"mb-2",children:(0,b.jsx)(V.PanelRight,{className:"w-4 h-4"})}),(0,b.jsx)("div",{className:"w-8 h-px bg-gray-200 my-2"}),(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 py-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:(0,b.jsx)(w.Zap,{className:"w-4 h-4 text-green-600"})}),(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center",children:(0,b.jsx)(P.Gamepad2,{className:"w-4 h-4 text-purple-600"})}),(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:(0,b.jsx)(Q.Presentation,{className:"w-4 h-4 text-blue-600"})})]})]}):(0,b.jsxs)(f.Card,{className:(0,M.cn)("h-full flex flex-col",a),children:[(0,b.jsx)(f.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(f.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(S.Sparkles,{className:"w-4 h-4 text-purple-500"}),"AI Learning Space"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[d&&(0,b.jsxs)(i.Badge,{variant:"default",className:"bg-red-500 animate-pulse mr-1",children:[(0,b.jsx)(r.Mic,{className:"w-3 h-3 mr-1"}),"Listening"]}),m&&(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:m,children:"right"===n?(0,b.jsx)(W.PanelRightClose,{className:"w-4 h-4"}):(0,b.jsx)(L.PanelLeftClose,{className:"w-4 h-4"})})]})]})}),(0,b.jsxs)(O.Tabs,{value:o,onValueChange:p,className:"flex-1 flex flex-col",children:[(0,b.jsxs)(O.TabsList,{className:"grid w-full grid-cols-3 mx-4 mb-2",children:[(0,b.jsxs)(O.TabsTrigger,{value:"demo",className:"text-xs",children:[(0,b.jsx)(Q.Presentation,{className:"w-3 h-3 mr-1"}),"Demo"]}),(0,b.jsxs)(O.TabsTrigger,{value:"words",className:"text-xs",children:[(0,b.jsx)(R.Type,{className:"w-3 h-3 mr-1"}),"Words"]}),(0,b.jsxs)(O.TabsTrigger,{value:"games",className:"text-xs",children:[(0,b.jsx)(P.Gamepad2,{className:"w-3 h-3 mr-1"}),"Games"]})]}),(0,b.jsx)(f.CardContent,{className:"flex-1 p-4 pt-0",children:(0,b.jsxs)(j.ScrollArea,{className:"h-[calc(100vh-350px)]",children:[(0,b.jsx)(O.TabsContent,{value:"demo",className:"mt-0",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg",children:[(0,b.jsxs)("h4",{className:"font-medium text-sm mb-3 flex items-center gap-2",children:[(0,b.jsx)(Q.Presentation,{className:"w-4 h-4 text-blue-500"}),"Essay Structure"]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm font-bold",children:"1"}),(0,b.jsxs)("div",{className:"flex-1 bg-white p-2 rounded border-l-4 border-blue-500",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Introduction"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Hook + Background + Thesis"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center text-sm font-bold",children:"2"}),(0,b.jsxs)("div",{className:"flex-1 bg-white p-2 rounded border-l-4 border-green-500",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Body Paragraph 1"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Topic sentence + Evidence + Analysis"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center text-sm font-bold",children:"3"}),(0,b.jsxs)("div",{className:"flex-1 bg-white p-2 rounded border-l-4 border-green-500",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Body Paragraph 2"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Topic sentence + Evidence + Analysis"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center text-sm font-bold",children:"4"}),(0,b.jsxs)("div",{className:"flex-1 bg-white p-2 rounded border-l-4 border-purple-500",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Conclusion"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Restate thesis + Summarize + Final thought"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[(0,b.jsx)("h5",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Thesis Statement"}),(0,b.jsx)("p",{className:"text-xs text-yellow-700",children:"The main argument of your essay"})]}),(0,b.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[(0,b.jsx)("h5",{className:"text-sm font-medium text-green-800 mb-1",children:"Topic Sentence"}),(0,b.jsx)("p",{className:"text-xs text-green-700",children:"Introduces each paragraph's focus"})]})]})]})}),(0,b.jsx)(O.TabsContent,{value:"words",className:"mt-0",children:0!==e.length||d?(0,b.jsxs)("div",{className:"space-y-3",children:[d&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-blue-600 mb-4",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Listening..."})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.map(a=>(0,b.jsxs)("div",{className:"bg-white p-3 rounded-lg border shadow-sm hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsx)("span",{className:"text-lg font-medium text-gray-800",children:a.word}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",children:(0,b.jsx)(T.Volume2,{className:"w-3 h-3"})})]}),a.pronunciation&&(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["/",a.pronunciation,"/"]}),a.definition&&(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:a.definition})]},a.id))})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-48 text-gray-400",children:[(0,b.jsx)(r.Mic,{className:"w-12 h-12 mb-3 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"Start speaking to see key words"}),(0,b.jsx)("p",{className:"text-xs mt-1",children:"Important vocabulary will appear here"})]})}),(0,b.jsx)(O.TabsContent,{value:"games",className:"mt-0",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{id:"vocab-match",name:"Vocabulary Match",icon:"ðŸŽ¯",difficulty:"Easy"},{id:"grammar-fix",name:"Grammar Fix",icon:"ðŸ”§",difficulty:"Medium"},{id:"essay-race",name:"Essay Race",icon:"â±ï¸",difficulty:"Hard"},{id:"word-scramble",name:"Word Scramble",icon:"ðŸ§©",difficulty:"Easy"}].map(a=>(0,b.jsxs)("button",{onClick:()=>h?.(a.id),className:"p-4 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg border hover:border-blue-300 hover:shadow-md transition-all text-left group",children:[(0,b.jsx)("div",{className:"text-2xl mb-2",children:a.icon}),(0,b.jsx)("h4",{className:"font-medium text-sm group-hover:text-blue-600",children:a.name}),(0,b.jsx)(i.Badge,{variant:"secondary",className:"mt-1 text-xs",children:a.difficulty})]},a.id))}),(0,b.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-lg border",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(U.Award,{className:"w-5 h-5 text-yellow-600"}),(0,b.jsx)("span",{className:"font-medium",children:"Your Score"})]}),(0,b.jsx)("span",{className:"text-2xl font-bold text-yellow-700",children:t})]})})]})})]})})]})]})}var Y=a.i(296192),Z=a.i(60390);function $({currentMode:a,currentMission:c,onModeChange:d,className:e}){return(0,b.jsxs)("div",{className:(0,M.cn)("flex items-center gap-2",e),children:[(0,b.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,b.jsxs)("button",{onClick:()=>d("free"),className:(0,M.cn)("flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all","free"===a?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,b.jsx)(Z.MessageCircle,{className:"w-4 h-4"}),"Free Chat"]}),(0,b.jsxs)("button",{onClick:()=>d("mission"),className:(0,M.cn)("flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all","mission"===a?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,b.jsx)(u.Target,{className:"w-4 h-4"}),"Mission Mode"]})]}),"mission"===a&&c&&(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm",children:[(0,b.jsx)("span",{children:c.emoji}),(0,b.jsx)("span",{className:"font-medium truncate max-w-[150px]",children:c.title}),(0,b.jsx)(y.ChevronRight,{className:"w-4 h-4"})]})]})}var _=a.i(19926),aa=a.i(748151);function ab({worlds:a,currentWorldId:d,currentMissionId:e,onSelectMission:f,className:g}){let[h,i]=(0,c.useState)(d?[d]:[]);return(0,b.jsxs)("div",{className:(0,M.cn)("bg-white rounded-xl border flex flex-col h-full",g),children:[(0,b.jsxs)("div",{className:"p-4 border-b",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-800",children:"Learning Worlds"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Choose a mission to start learning"})]}),(0,b.jsx)(j.ScrollArea,{className:"flex-1",children:(0,b.jsx)("div",{className:"p-2 space-y-1",children:a.map(a=>{let c=h.includes(a.id),d=a.missions.filter(a=>a.userProgress?.status==="COMPLETED").length;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("button",{onClick:()=>{var b;return a.isUnlocked&&(b=a.id,void i(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b]))},disabled:!a.isUnlocked,className:(0,M.cn)("w-full flex items-center gap-2 p-2 rounded-lg transition-colors",a.isUnlocked?"hover:bg-gray-100":"opacity-50 cursor-not-allowed"),children:[(0,b.jsx)("span",{className:"text-xl",children:a.emoji}),(0,b.jsxs)("div",{className:"flex-1 text-left",children:[(0,b.jsx)("p",{className:(0,M.cn)("font-medium text-sm",a.isUnlocked?"text-gray-800":"text-gray-500"),children:a.name}),a.isUnlocked&&(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[d,"/",a.missions.length," completed"]})]}),a.isUnlocked?(0,b.jsx)(y.ChevronRight,{className:(0,M.cn)("w-4 h-4 text-gray-400 transition-transform",c&&"rotate-90")}):(0,b.jsx)(_.Lock,{className:"w-4 h-4 text-gray-400"})]}),c&&a.isUnlocked&&(0,b.jsx)("div",{className:"ml-6 mt-1 space-y-1",children:a.missions.map(c=>(0,b.jsx)(ac,{mission:c,isActive:e===c.id,onClick:()=>f(a.id,c)},c.id))})]},a.id)})})})]})}function ac({mission:a,isActive:c,onClick:d}){let e=a.userProgress?.status||"NOT_STARTED",f="COMPLETED"===e?aa.CheckCircle2:"IN_PROGRESS"===e?J.PlayCircle:I.Circle;return(0,b.jsxs)("button",{onClick:d,className:(0,M.cn)("w-full flex items-center gap-2 p-2 rounded-lg text-left transition-colors",c?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"),children:[(0,b.jsx)(f,{className:(0,M.cn)("w-4 h-4 flex-shrink-0","COMPLETED"===e&&"text-green-500","IN_PROGRESS"===e&&"text-blue-500","NOT_STARTED"===e&&"text-gray-400")}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:(0,M.cn)("text-sm truncate",c?"font-medium text-blue-700":"text-gray-700"),children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,b.jsxs)("span",{children:[a.estimatedTime," min"]}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsxs)("span",{children:["+",a.xpReward," XP"]})]})]})]})}var ad=a.i(944215),ae=a.i(369125);let af=(0,z.default)(async()=>{},{loadableGenerated:{modules:[609341]},ssr:!1});function ag(){let a=(0,d.useRouter)(),z=(0,c.useRef)(null),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(!1),[L,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)({remaining:5,total:5}),[U,V]=(0,c.useState)([]),[W,Z]=(0,c.useState)(),[_,aa]=(0,c.useState)(!1),[ac,ag]=(0,c.useState)(!1),[ah,ai]=(0,c.useState)(!1),[aj,ak]=(0,c.useState)(!1),[al,am]=(0,c.useState)(!1),[an,ao]=(0,c.useState)(null),[ap,aq]=(0,c.useState)(),[ar,as]=(0,c.useState)([]),[at,au]=(0,c.useState)(!1),[av,aw]=(0,c.useState)("friendly_mentor"),[ax,ay]=(0,c.useState)("free"),[az,aA]=(0,c.useState)(null),[aB,aC]=(0,c.useState)([]),[aD,aE]=(0,c.useState)(null),[aF,aG]=(0,c.useState)(72),[aH,aI]=(0,c.useState)(!1),[aJ,aK]=(0,c.useState)(!1),[aL,aM]=(0,c.useState)({amount:0,reason:""});(0,c.useEffect)(()=>{aN()},[]),(0,c.useEffect)(()=>{z.current?.scrollIntoView({behavior:"smooth"})},[F]);let aN=async()=>{try{let b=await fetch("/api/ai-tutor/enrollments"),c=await b.json(),d=c.enrollments?.find(a=>"english"===a.subject);if(!d){l.toast.error("Not enrolled in English tutor"),a.push("/student/ai-tutor/browse");return}R(d),d.avatarPersonality&&aw(d.avatarPersonality),d.curriculumId&&await aQ();let[e,f,g]=await Promise.all([fetch("/api/ai-tutor/usage"),fetch("/api/gamification"),fetch("/api/gamification/worlds")]),h=await e.json();T({remaining:h.remainingMessages,total:h.remainingMessages+(h.messagesSent||0)});let i=await f.json();i.success&&(aE(i.data),aG(i.data.skills.confidence));let j=await g.json();j.success&&aC(j.data);let k=await fetch(`/api/ai-tutor/sessions?enrollmentId=${d.id}`),m=await k.json();if(m.sessions?.length>0){let a=m.sessions[0];G(a.messages||[]);let b=[];a.messages?.forEach(a=>{if("assistant"===a.role){let c=(0,C.extractWhiteboardItems)(a.content);b.push(...c)}}),V(b)}}catch(a){l.toast.error("Failed to load tutor session")}},aO=async()=>{if(!H.trim()||!Q)return;if(0===S.remaining)return void l.toast.error("Daily message limit reached. Upgrade for more.");let a={id:Date.now().toString(),role:"user",content:H,timestamp:new Date().toISOString()};G(b=>[...b,a]),I(""),K(!0),P(!0);try{let a=await fetch("/api/ai-tutor/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:H,personality:av,missionId:az?.id,teachingMode:"mission"===ax?"socratic":"standard",chatHistory:F.slice(-5).map(a=>({role:a.role,content:a.content}))})}),b=await a.json();if(!a.ok)throw b.upgradeRequired&&l.toast.error("Daily limit reached. Upgrade for unlimited messages."),Error(b.error);let c={id:(Date.now()+1).toString(),role:"assistant",content:b.data.response,timestamp:new Date().toISOString(),hintType:b.data.hintType,relevantConcepts:b.data.relevantConcepts};G(a=>[...a,c]),b.data.xpEarned&&(aM({amount:b.data.xpEarned,reason:"AI Conversation"}),aI(!0)),b.data.leveledUp&&setTimeout(()=>aK(!0),2e3),b.data.gamification&&(aE(b.data.gamification),aG(b.data.gamification.skills.confidence)),T(a=>({...a,remaining:a.remaining-1}));let d=(0,C.extractWhiteboardItems)(b.data.response);d.length>0&&V(a=>[...a,...d])}catch(a){l.toast.error("Failed to get response")}finally{K(!1),P(!1)}},aP=a=>{Z(a);let b=D.ENGLISH_TOPICS.find(b=>b.id===a);b&&I(`I'd like to learn about ${b.name.toLowerCase()}. ${b.description}`)},aQ=async()=>{try{let a=await fetch("/api/curriculum"),b=await a.json();if(b.curriculum&&(ao(b.curriculum),b.curriculum.modules)){for(let a of b.curriculum.modules)for(let b of a.lessons)if(b.progress?.status!=="COMPLETED")return void aq(b.id)}}catch(a){console.error("Failed to load curriculum:",a)}},aR=(a,b)=>{aq(a.id),I(`Let's work on "${a.title}" from ${b.title}. Can you walk me through this lesson?`),au(!1),a.id&&aS(a.id)},aS=async a=>{try{let b=await fetch(`/api/ai-tutor/sessions?enrollmentId=${Q?.id}`),c=await b.json();if(c.sessions?.length>0){let b=c.sessions[0];await fetch("/api/ai-tutor/lesson-context",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:b.id,lessonId:a})})}}catch(a){console.error("Failed to link session to lesson:",a)}},aT=a=>{switch(a){case"encouragement":return"encouraging";case"socratic":return"thinking";default:return"neutral"}};if(!Q)return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading English Tutor..."})]})});let aU=F.filter(a=>"assistant"===a.role).pop(),aV=aT(aU?.hintType);return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,b.jsx)("header",{className:"bg-white border-b px-4 py-3 shrink-0",children:(0,b.jsxs)("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:()=>a.push("/student/ai-tutor"),children:(0,b.jsx)(q.ChevronLeft,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"font-semibold",children:"English AI Tutor"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,b.jsx)(i.Badge,{variant:"outline",children:Q.englishLevel}),(0,b.jsxs)("span",{children:["Age: ",Q.teachingAge]}),(0,b.jsx)("span",{children:Q.voiceGender}),(0,b.jsx)("span",{children:"us"===Q.voiceAccent?"ðŸ‡ºðŸ‡¸":"uk"===Q.voiceAccent?"ðŸ‡¬ðŸ‡§":"ðŸ‡¦ðŸ‡º"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[aD&&(0,b.jsxs)("div",{className:"hidden md:flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-50 rounded-lg",children:[(0,b.jsx)(w.Zap,{className:"w-4 h-4 text-blue-500"}),(0,b.jsxs)("span",{className:"text-sm font-medium text-blue-700",children:["Level ",aD.level]})]}),aD.streakDays>0&&(0,b.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-orange-50 rounded-lg",children:[(0,b.jsx)(v.Flame,{className:"w-4 h-4 text-orange-500"}),(0,b.jsx)("span",{className:"text-sm font-medium text-orange-700",children:aD.streakDays})]})]}),(0,b.jsx)(Y.PersonalitySelector,{currentPersonality:av,onSelect:aw}),(0,b.jsx)(ad.ConfidenceMeter,{isListening:ac,confidenceScore:aF,className:"hidden lg:flex"}),(0,b.jsx)("div",{className:"text-right hidden sm:block",children:(0,b.jsx)("p",{className:"text-xs text-gray-500",children:-1===S.remaining?"Unlimited":`${S.remaining} left`})}),(0,b.jsxs)(k.Sheet,{open:_,onOpenChange:aa,children:[(0,b.jsx)(k.SheetTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(o.Settings,{className:"w-5 h-5"})})}),(0,b.jsxs)(k.SheetContent,{children:[(0,b.jsx)(k.SheetTitle,{children:"Preferences"}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(E.TutorPreferences,{enrollmentId:Q.id,currentPreferences:{teachingAge:Q.teachingAge,voiceGender:Q.voiceGender,voiceAccent:Q.voiceAccent,avatarStyle:Q.avatarStyle},onUpdate:a=>{Q&&R({...Q,...a})}})})]})]})]})]})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto w-full px-4 pb-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-lg p-2 border",children:[(0,b.jsx)($,{currentMode:ax,currentMission:az?{id:az.id,title:az.title,worldName:az.worldName,emoji:az.emoji}:void 0,onModeChange:ay}),"mission"===ax&&az&&(0,b.jsxs)(i.Badge,{variant:"outline",className:"bg-blue-50 text-blue-700",children:[(0,b.jsx)(u.Target,{className:"w-3 h-3 mr-1"}),"Mission Mode"]}),(0,b.jsx)(e.default,{href:"/student/worlds",children:(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(x.Globe,{className:"w-4 h-4 mr-1"}),"Browse Worlds",(0,b.jsx)(y.ChevronRight,{className:"w-4 h-4 ml-1"})]})})]})}),(0,b.jsxs)("div",{className:"flex-1 max-w-7xl mx-auto w-full grid grid-cols-1 lg:grid-cols-4 gap-4 p-4",children:[(0,b.jsx)("div",{className:(0,M.cn)("hidden lg:block transition-all duration-300",ah?"lg:w-16":"lg:col-span-1"),children:"mission"===ax&&aB.length>0?(0,b.jsx)(ab,{worlds:aB,currentWorldId:az?.worldId,currentMissionId:az?.id,onSelectMission:(a,b)=>{aA({...b,worldId:a,worldName:aB.find(b=>b.id===a)?.name,emoji:aB.find(b=>b.id===a)?.emoji}),I(`I'd like to start the mission: ${b.title}`)},className:"h-full"}):an?(0,b.jsx)(f.Card,{className:"h-full flex flex-col",children:(0,b.jsxs)(O.Tabs,{defaultValue:"curriculum",className:"flex-1 flex flex-col",children:[(0,b.jsxs)(O.TabsList,{className:(0,M.cn)("grid w-full mx-4 mt-4 mb-0",ah?"grid-cols-1 w-10":"grid-cols-2"),children:[(0,b.jsxs)(O.TabsTrigger,{value:"curriculum",className:(0,M.cn)(ah&&"px-2"),children:[(0,b.jsx)(t.GraduationCap,{className:"w-4 h-4"}),!ah&&(0,b.jsx)("span",{className:"ml-1",children:"Course"})]}),!ah&&(0,b.jsx)(O.TabsTrigger,{value:"topics",children:"Topics"})]}),(0,b.jsx)(O.TabsContent,{value:"curriculum",className:"flex-1 mt-0",children:(0,b.jsx)(N,{curriculum:an,currentLessonId:ap,onSelectLesson:aR,collapsed:ah,onToggleCollapse:()=>ai(!ah)})}),!ah&&(0,b.jsx)(O.TabsContent,{value:"topics",className:"flex-1 mt-0",children:(0,b.jsx)(D.TopicSidebar,{topics:D.ENGLISH_TOPICS,currentTopic:W,onSelectTopic:aP})})]})}):(0,b.jsx)(D.TopicSidebar,{topics:D.ENGLISH_TOPICS,currentTopic:W,onSelectTopic:aP,collapsed:ah,onToggleCollapse:()=>ai(!ah)})}),(0,b.jsxs)("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[(0,b.jsx)(f.Card,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,b.jsx)(af,{isSpeaking:L,mood:aV,size:"md"}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Your English Tutor"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["I'm teaching you like a ",Q.teachingAge,"-year-old with a ",Q.voiceGender," ",Q.voiceAccent," voice."]})]}),(0,b.jsxs)(k.Sheet,{children:[(0,b.jsx)(k.SheetTrigger,{asChild:!0,className:"lg:hidden mt-4",children:(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(p.Menu,{className:"w-4 h-4 mr-2"}),"Browse Topics"]})}),(0,b.jsxs)(k.SheetContent,{side:"left",className:"w-[300px] sm:w-[400px]",children:[(0,b.jsx)(k.SheetTitle,{children:an?"Curriculum":"Topics"}),(0,b.jsx)("div",{className:"mt-4 h-full",children:an?(0,b.jsx)(N,{curriculum:an,currentLessonId:ap,onSelectLesson:aR}):(0,b.jsx)(D.TopicSidebar,{topics:D.ENGLISH_TOPICS,currentTopic:W,onSelectTopic:aP})})]})]})]})}),(0,b.jsx)(f.Card,{className:"flex-1 min-h-[200px] p-4",children:(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center text-gray-400",children:[(0,b.jsx)(n.Lightbulb,{className:"w-12 h-12 mb-3 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"Learning Content Area"}),(0,b.jsx)("p",{className:"text-xs mt-1",children:"Interactive lessons and exercises will appear here"})]})}),(0,b.jsxs)(f.Card,{className:"flex flex-col overflow-hidden",style:{maxHeight:"400px"},children:[(0,b.jsx)(j.ScrollArea,{className:"flex-1 p-4",children:(0,b.jsxs)("div",{className:"space-y-4",children:[F.map(a=>(0,b.jsxs)("div",{className:`flex gap-3 ${"user"===a.role?"justify-end":"justify-start"}`,children:["assistant"===a.role&&(0,b.jsx)(A.AIAvatarPlaceholder,{mood:aT(a.hintType),size:"sm"}),(0,b.jsxs)("div",{className:`max-w-[80%] rounded-lg p-3 ${"user"===a.role?"bg-blue-500 text-white":"bg-white border shadow-sm"}`,children:[(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:a.content}),a.hintType&&(0,b.jsx)(i.Badge,{variant:"secondary",className:"mt-2 text-xs capitalize",children:a.hintType})]})]},a.id)),J&&(0,b.jsxs)("div",{className:"flex gap-3 justify-start",children:[(0,b.jsx)(A.AIAvatarPlaceholder,{mood:"thinking",size:"sm"}),(0,b.jsx)("div",{className:"bg-white border rounded-lg p-3",children:(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),(0,b.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce delay-100"}),(0,b.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce delay-200"})]})})]}),(0,b.jsx)("div",{ref:z})]})}),(0,b.jsxs)("div",{className:"p-4 border-t bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"icon",onClick:()=>ag(!ac),className:ac?"text-red-500":"",children:ac?(0,b.jsx)(r.Mic,{className:"w-4 h-4"}):(0,b.jsx)(s.MicOff,{className:"w-4 h-4"})}),(0,b.jsx)(h.Input,{placeholder:"Ask your English question...",value:H,onChange:a=>I(a.target.value),onKeyPress:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),aO())},disabled:J||0===S.remaining,className:"flex-1"}),(0,b.jsx)(g.Button,{onClick:aO,disabled:!H.trim()||J||0===S.remaining,children:(0,b.jsx)(m.Send,{className:"w-4 h-4"})})]}),0===S.remaining&&(0,b.jsx)("p",{className:"text-sm text-orange-600 mt-2 text-center",children:"Daily message limit reached. Upgrade for unlimited messages."})]})]})]}),(0,b.jsxs)("div",{className:"hidden lg:flex flex-col gap-4 w-80",children:[(0,b.jsx)("div",{className:(0,M.cn)("transition-all duration-300 flex",aj?"justify-end":"w-full"),children:(0,b.jsx)(C.AIWhiteboard,{items:U,onClear:()=>V([]),collapsed:aj,onToggleCollapse:()=>ak(!aj),collapseDirection:"right"})}),(0,b.jsx)(B.SkillRadar,{skills:aD?.skills||null}),(0,b.jsx)("div",{className:(0,M.cn)("transition-all duration-300 flex flex-1 min-h-0",al?"justify-end":"w-full"),children:(0,b.jsx)(X,{className:(0,M.cn)("transition-all duration-300",al?"w-16":"flex-1"),collapsed:al})})]})]}),aH&&(0,b.jsx)(ae.XpAnimation,{amount:aL.amount,reason:aL.reason,onComplete:()=>aI(!1)}),aJ&&aD&&(0,b.jsx)(ae.LevelUpAnimation,{level:aD.level,onComplete:()=>aK(!1)})]})}a.s(["default",()=>ag],896871)}];

//# debugId=d72494ca-1795-a10d-f0fe-151f02efc8f0
//# sourceMappingURL=286d7_tutorme-app_src_app_%5Blocale%5D_student_ai-tutor_english_page_tsx_29ef8947._.js.map