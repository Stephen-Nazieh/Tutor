;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d8d41396-bde9-4f53-bebb-22f5089a0a0e")}catch(e){}}();
module.exports=[451481,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(454069),e=a.i(52028),f=a.i(88684),g=a.i(981354),h=a.i(529004),i=a.i(113098),j=a.i(206209),k=a.i(384076),l=a.i(846438),m=a.i(414030),n=a.i(766001),o=a.i(772078),p=a.i(19926),q=a.i(395261),r=a.i(892094),s=a.i(706562),t=a.i(259522);let u=[{id:"user_management",label:"User Management",desc:"Create, edit, and manage user accounts"},{id:"content_management",label:"Content Management",desc:"Manage courses, lessons, and materials"},{id:"financial_access",label:"Financial Access",desc:"View and manage financial data"},{id:"system_settings",label:"System Settings",desc:"Configure platform settings"},{id:"analytics",label:"Analytics",desc:"Access reports and analytics"}],v=[{number:1,title:"Personal Info",icon:q.User},{number:2,title:"Organization",icon:o.Building2},{number:3,title:"Security & Permissions",icon:p.Lock}];function w(){let a=(0,d.useRouter)(),q=(0,d.useParams)(),w=q?.locale?`/${q.locale}`:"",[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(1),[B,C]=(0,c.useState)({}),[D,E]=(0,c.useState)({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phoneNumber:"",organizationName:"",organizationSlug:"",adminLevel:"standard",jobTitle:"",department:"",permissions:[],mfaEnabled:!0,tosAccepted:!1,bootstrapKey:""}),F=(0,c.useCallback)((a,b)=>{E(c=>{let d={...c,[a]:b};return"organizationName"!==a||c.organizationSlug||(d.organizationSlug=b.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()),d}),B[a]&&C(b=>{let c={...b};return delete c[a],c})},[B]),G=(0,c.useCallback)(a=>{let b={};return 1===a&&(D.firstName?.trim()||(b.firstName="First name is required"),D.lastName?.trim()||(b.lastName="Last name is required"),D.email?.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D.email)||(b.email="Please enter a valid email"):b.email="Email is required",D.phoneNumber?.trim()?/^\+?[\d\s\-\(\)]{10,}$/.test(D.phoneNumber)||(b.phoneNumber="Valid phone number required"):b.phoneNumber="Phone number is required"),2===a&&(D.organizationName?.trim()?D.organizationName.length<2&&(b.organizationName="Organization name must be at least 2 characters"):b.organizationName="Organization name is required"),3===a&&(D.password?D.password.length<8?b.password="Password must be at least 8 characters":/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(D.password)||(b.password="Password must contain uppercase, lowercase, and number"):b.password="Password is required",D.password!==D.confirmPassword&&(b.confirmPassword="Passwords don't match"),0===D.permissions.length&&(b.permissions="Select at least one permission group"),D.tosAccepted||(b.tosAccepted="You must accept the Terms of Service")),C(b),!(Object.keys(b).length>0)||(l.toast.error(Object.values(b)[0]),!1)},[D]),H=()=>{G(z)&&A(a=>Math.min(a+1,3))},I=()=>{A(a=>Math.max(a-1,1)),C({})},J=async()=>{let b={...D,organizationSlug:D.organizationSlug||void 0},c=t.adminRegistrationSchema.safeParse(b);if(!c.success){let a={};c.error.issues.forEach(b=>{let c=b.path[0];a[c]||(a[c]=b.message)}),C(a),l.toast.error(Object.values(a)[0]||"Please check your form");return}y(!0),C({});try{let b={"Content-Type":"application/json"};D.bootstrapKey.trim()&&(b["x-admin-bootstrap-key"]=D.bootstrapKey.trim());let d=await fetch("/api/auth/register/admin",{method:"POST",headers:b,body:JSON.stringify(c.data)}),e=await d.json();d.ok?(l.toast.success("Admin account created successfully!"),a.push(`${w}/admin/login`)):l.toast.error(e.error||"Failed to create account")}catch{l.toast.error("An error occurred. Please try again.")}finally{y(!1)}};return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-orange-950/20 to-slate-900 py-8 px-4",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,b.jsxs)(e.default,{href:"/register",className:"inline-flex items-center text-sm text-slate-400 hover:text-white mb-6 transition-colors",children:[(0,b.jsx)(m.ArrowLeft,{className:"h-4 w-4 mr-1"}),"Back to Registration"]}),(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl bg-orange-500/20 flex items-center justify-center",children:(0,b.jsx)(n.Shield,{className:"h-6 w-6 text-orange-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Administrator Registration"}),(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:"Enterprise-grade admin account setup"})]})]})}),(0,b.jsx)("div",{className:"flex items-center gap-2 mb-8",children:v.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center flex-1",children:[(0,b.jsx)("div",{className:`
                  flex items-center justify-center w-9 h-9 rounded-lg text-sm font-medium transition-colors
                  ${z>=a.number?"bg-orange-500 text-white":"bg-slate-800 text-slate-500"}
                `,children:(0,b.jsx)(a.icon,{className:"h-4 w-4"})}),(0,b.jsx)("span",{className:`ml-2 text-sm font-medium hidden sm:inline ${z>=a.number?"text-orange-400":"text-slate-500"}`,children:a.title}),c<v.length-1&&(0,b.jsx)("div",{className:`flex-1 h-0.5 mx-2 rounded ${z>a.number?"bg-orange-500":"bg-slate-700"}`})]},a.number))}),(0,b.jsx)(i.Card,{className:"border-slate-800 bg-slate-900/50",children:(0,b.jsxs)(i.CardContent,{className:"pt-6 space-y-6",children:[1===z&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.CardTitle,{className:"text-lg text-white mb-1",children:"Personal Information"}),(0,b.jsx)(i.CardDescription,{className:"text-slate-400",children:"Enter your account details"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"firstName",className:"text-slate-300",children:"First Name *"}),(0,b.jsx)(g.Input,{id:"firstName",value:D.firstName,onChange:a=>F("firstName",a.target.value),placeholder:"John",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"}),B.firstName&&(0,b.jsx)("p",{className:"text-sm text-red-400",children:B.firstName})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"lastName",className:"text-slate-300",children:"Last Name *"}),(0,b.jsx)(g.Input,{id:"lastName",value:D.lastName,onChange:a=>F("lastName",a.target.value),placeholder:"Doe",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"}),B.lastName&&(0,b.jsx)("p",{className:"text-sm text-red-400",children:B.lastName})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"email",className:"text-slate-300",children:"Email Address *"}),(0,b.jsx)(g.Input,{id:"email",type:"email",value:D.email,onChange:a=>F("email",a.target.value),placeholder:"admin@organization.com",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"}),B.email&&(0,b.jsx)("p",{className:"text-sm text-red-400",children:B.email})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"phoneNumber",className:"text-slate-300",children:"Phone Number *"}),(0,b.jsx)(g.Input,{id:"phoneNumber",value:D.phoneNumber,onChange:a=>F("phoneNumber",a.target.value),placeholder:"+86 138 0000 0000",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"}),B.phoneNumber&&(0,b.jsx)("p",{className:"text-sm text-red-400",children:B.phoneNumber})]}),(0,b.jsxs)(f.Button,{className:"w-full bg-orange-500 hover:bg-orange-600",onClick:H,children:["Next: Organization",(0,b.jsx)(r.ChevronRight,{className:"h-4 w-4 ml-2"})]})]}),2===z&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.CardTitle,{className:"text-lg text-white mb-1",children:"Organization Setup"}),(0,b.jsx)(i.CardDescription,{className:"text-slate-400",children:"Configure your organization and role"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"organizationName",className:"text-slate-300",children:"Organization Name *"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Building2,{className:"h-4 w-4 text-slate-500"}),(0,b.jsx)(g.Input,{id:"organizationName",value:D.organizationName,onChange:a=>F("organizationName",a.target.value),placeholder:"Acme Education Inc.",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]}),B.organizationName&&(0,b.jsx)("p",{className:"text-sm text-red-400",children:B.organizationName})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"organizationSlug",className:"text-slate-300",children:"Organization Slug (optional)"}),(0,b.jsx)(g.Input,{id:"organizationSlug",value:D.organizationSlug,onChange:a=>F("organizationSlug",a.target.value),placeholder:"acme-education",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500 font-mono text-sm"}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Lowercase letters, numbers, hyphens only. Auto-generated from name if empty."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-slate-300",children:"Admin Level"}),(0,b.jsxs)(j.Select,{value:D.adminLevel,onValueChange:a=>F("adminLevel",a),children:[(0,b.jsx)(j.SelectTrigger,{className:"bg-slate-800 border-slate-700 text-white",children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"super",children:"Super Admin"}),(0,b.jsx)(j.SelectItem,{value:"standard",children:"Standard Admin"}),(0,b.jsx)(j.SelectItem,{value:"limited",children:"Limited Admin"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"jobTitle",className:"text-slate-300",children:"Job Title"}),(0,b.jsx)(g.Input,{id:"jobTitle",value:D.jobTitle,onChange:a=>F("jobTitle",a.target.value),placeholder:"Platform Admin",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"department",className:"text-slate-300",children:"Department"}),(0,b.jsx)(g.Input,{id:"department",value:D.department,onChange:a=>F("department",a.target.value),placeholder:"Operations",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)(f.Button,{variant:"outline",className:"flex-1 border-slate-700 text-slate-300 hover:bg-slate-800",onClick:I,children:[(0,b.jsx)(s.ChevronLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,b.jsxs)(f.Button,{className:"flex-1 bg-orange-500 hover:bg-orange-600",onClick:H,children:["Next: Security & Permissions",(0,b.jsx)(r.ChevronRight,{className:"h-4 w-4 ml-2"})]})]})]}),3===z&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.CardTitle,{className:"text-lg text-white mb-1",children:"Security & Permissions"}),(0,b.jsx)(i.CardDescription,{className:"text-slate-400",children:"Set password and permission groups"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"password",className:"text-slate-300",children:"Password *"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Lock,{className:"h-4 w-4 text-slate-500"}),(0,b.jsx)(g.Input,{id:"password",type:"password",value:D.password,onChange:a=>F("password",a.target.value),placeholder:"••••••••",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Min 8 chars, at least one uppercase, one lowercase, one number."}),B.password&&(0,b.jsx)("p",{className:"text-sm text-red-400",children:B.password})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"confirmPassword",className:"text-slate-300",children:"Confirm Password *"}),(0,b.jsx)(g.Input,{id:"confirmPassword",type:"password",value:D.confirmPassword,onChange:a=>F("confirmPassword",a.target.value),placeholder:"••••••••",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"}),B.confirmPassword&&(0,b.jsx)("p",{className:"text-sm text-red-400",children:B.confirmPassword})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"bootstrapKey",className:"text-slate-300",children:"Bootstrap Key (if required)"}),(0,b.jsx)(g.Input,{id:"bootstrapKey",type:"password",value:D.bootstrapKey,onChange:a=>F("bootstrapKey",a.target.value),placeholder:"Enter bootstrap key if configured",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Required only if ADMIN_BOOTSTRAP_KEY environment variable is set on the server."})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(h.Label,{className:"text-slate-300",children:"Permission Groups *"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Select at least one permission group for your admin role."}),(0,b.jsx)("div",{className:"space-y-3",children:u.map(a=>(0,b.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:[(0,b.jsx)(k.Checkbox,{id:a.id,checked:D.permissions.includes(a.id),onCheckedChange:()=>{var b;return b=a.id,void E(a=>({...a,permissions:a.permissions.includes(b)?a.permissions.filter(a=>a!==b):[...a.permissions,b]}))},className:"border-slate-600 data-[state=checked]:bg-orange-500 data-[state=checked]:border-orange-500"}),(0,b.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,b.jsx)(h.Label,{htmlFor:a.id,className:"font-medium text-slate-200 cursor-pointer",children:a.label}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:a.desc})]})]},a.id))}),B.permissions&&(0,b.jsx)("p",{className:"text-sm text-red-400",children:B.permissions})]}),(0,b.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:[(0,b.jsx)(k.Checkbox,{id:"mfa",checked:D.mfaEnabled,onCheckedChange:a=>F("mfaEnabled",!0===a),className:"border-slate-600 data-[state=checked]:bg-orange-500 data-[state=checked]:border-orange-500"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(h.Label,{htmlFor:"mfa",className:"font-medium text-slate-200 cursor-pointer",children:"Enable Two-Factor Authentication"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Add an extra layer of security to your account"})]})]}),(0,b.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg border border-slate-700",children:[(0,b.jsx)(k.Checkbox,{id:"terms",checked:D.tosAccepted,onCheckedChange:a=>F("tosAccepted",!0===a),className:"border-slate-600 data-[state=checked]:bg-orange-500 data-[state=checked]:border-orange-500"}),(0,b.jsx)(h.Label,{htmlFor:"terms",className:"text-sm text-slate-300 cursor-pointer",children:"I agree to the Terms of Service and Privacy Policy *"})]}),B.tosAccepted&&(0,b.jsx)("p",{className:"text-sm text-red-400",children:B.tosAccepted}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)(f.Button,{variant:"outline",className:"flex-1 border-slate-700 text-slate-300 hover:bg-slate-800",onClick:I,disabled:x,children:[(0,b.jsx)(s.ChevronLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,b.jsx)(f.Button,{className:"flex-1 bg-orange-500 hover:bg-orange-600",onClick:J,disabled:x||!D.tosAccepted||0===D.permissions.length,children:x?"Creating Account...":"Create Admin Account"})]})]})]})}),(0,b.jsxs)("p",{className:"text-center text-slate-500 text-sm mt-6",children:["Already have an account?"," ",(0,b.jsx)(e.default,{href:"/login",className:"text-orange-400 hover:underline",children:"Sign in"})]})]})})}a.s(["default",()=>w])}];

//# debugId=d8d41396-bde9-4f53-bebb-22f5089a0a0e
//# sourceMappingURL=b1c00_TutorMekimi_tutorme-app_src_app_%5Blocale%5D_register_admin_page_tsx_84b6d0ec._.js.map