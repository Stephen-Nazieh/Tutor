;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="6454c964-fdda-1609-295c-8b2dcae6067e")}catch(e){}}();
module.exports=[414030,a=>{"use strict";let b=(0,a.i(293357).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],414030)},113098,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(494176);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},780444,a=>{"use strict";var b=a.i(741510);a.i(715631);var c=a.i(52419),d=a.i(260576),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,c.createSlot)(`Primitive.${e}`),g=b.forwardRef((a,b)=>{let{asChild:c,...g}=a;return(0,d.jsx)(c?f:e,{...g,ref:b})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{});a.s(["Primitive",()=>e])},479680,a=>{"use strict";let b=(0,a.i(293357).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],479680)},529004,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(780444),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(453716),g=a.i(494176);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],529004)},801728,a=>{"use strict";let b=(0,a.i(293357).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],801728)},792567,a=>{"use strict";function b(a,[b,c]){return Math.min(c,Math.max(b,a))}a.s(["clamp",()=>b])},321493,a=>{"use strict";var b=a.i(741510),c=a.i(806462);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},395743,a=>{"use strict";let b=(0,a.i(293357).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],395743)},428125,a=>{"use strict";var b=a.i(741510);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},854931,a=>{"use strict";var b=a.i(741510);a.i(715631);var c=a.i(87411),d=a.i(260576),e=Symbol("radix.slottable");function f(a){return b.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===e}var g=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{var g,h;let i,j,k,l=(h=g=`Primitive.${e}`,(i=b.forwardRef((a,d)=>{let{children:e,...f}=a;if(b.isValidElement(e)){var g;let a,h,i=(g=e,(h=(a=Object.getOwnPropertyDescriptor(g.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.ref:(h=(a=Object.getOwnPropertyDescriptor(g,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.props.ref:g.props.ref||g.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(f,e.props);return e.type!==b.Fragment&&(j.ref=d?(0,c.composeRefs)(d,i):i),b.cloneElement(e,j)}return b.Children.count(e)>1?b.Children.only(null):null})).displayName=`${h}.SlotClone`,j=i,(k=b.forwardRef((a,c)=>{let{children:e,...g}=a,h=b.Children.toArray(e),i=h.find(f);if(i){let a=i.props.children,e=h.map(c=>c!==i?c:b.Children.count(a)>1?b.Children.only(null):b.isValidElement(a)?a.props.children:null);return(0,d.jsx)(j,{...g,ref:c,children:b.isValidElement(a)?b.cloneElement(a,void 0,e):null})}return(0,d.jsx)(j,{...g,ref:c,children:e})})).displayName=`${g}.Slot`,k),m=b.forwardRef((a,b)=>{let{asChild:c,...f}=a;return(0,d.jsx)(c?l:e,{...f,ref:b})});return m.displayName=`Primitive.${e}`,{...a,[e]:m}},{}),h=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),i=b.forwardRef((a,b)=>(0,d.jsx)(g.span,{...a,ref:b,style:{...h,...a.style}}));i.displayName="VisuallyHidden",a.s(["Root",()=>i,"VISUALLY_HIDDEN_STYLES",()=>h,"VisuallyHidden",()=>i],854931)},19926,a=>{"use strict";let b=(0,a.i(293357).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],19926)},822133,a=>{"use strict";let b=(0,a.i(293357).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);a.s(["CreditCard",()=>b],822133)},591773,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(454069),e=a.i(52028),f=a.i(113098),g=a.i(88684),h=a.i(529004),i=a.i(206209),j=a.i(479680),k=a.i(822133),l=a.i(414030),m=a.i(19926),n=a.i(846438);let o=[{value:"HITPAY",label:"HitPay",description:"Cards, PayNow, GrabPay"},{value:"AIRWALLEX",label:"Airwallex",description:"Global cards & wallets"},{value:"WECHAT_PAY",label:"WeChat Pay",description:"For China users"},{value:"ALIPAY",label:"Alipay",description:"For China users"}];function p(){let a=(0,d.useSearchParams)();(0,d.useRouter)();let[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)("HITPAY"),v=a.get("curriculumId"),w=a.get("amount"),x=a.get("currency")||"USD";(0,c.useEffect)(()=>{v&&fetch(`/api/curriculum/${v}`).then(a=>a.ok?a.json():null).then(a=>{a?.curriculum&&s({name:a.curriculum.name,subject:a.curriculum.subject})}).catch(()=>{})},[v]);let y=async()=>{if(!v||!w)return void n.toast.error("Invalid payment details");q(!0);try{let a=await fetch("/api/csrf",{credentials:"include"}),b=await a.json().catch(()=>({})),c=b?.token??null,d="WECHAT_PAY"===t||"ALIPAY"===t,e=await fetch(d?"/api/payments/chinese-gateways":"/api/payments/create",{method:"POST",headers:{"Content-Type":"application/json",...c&&{"X-CSRF-Token":c}},credentials:"include",body:JSON.stringify({curriculumId:v,amount:parseFloat(w),currency:x,gateway:t,description:r?`Course: ${r.name}`:"Course enrollment"})}),f=await e.json();e.ok&&(f.checkoutUrl||f.paymentUrl)?window.location.href=f.checkoutUrl||f.paymentUrl:(n.toast.error(f.error||"Failed to create payment"),q(!1))}catch{n.toast.error("Failed to process payment"),q(!1)}},z=(a,b)=>`${({USD:"$",SGD:"S$",CNY:"¥",MYR:"RM",EUR:"€",GBP:"£",AUD:"A$",CAD:"C$",JPY:"¥",INR:"₹",KRW:"₩",HKD:"HK$"})[b]||b+" "}${parseFloat(a).toFixed(2)}`;return v&&w?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,b.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,b.jsx)(g.Button,{variant:"ghost",className:"mb-4",asChild:!0,children:(0,b.jsxs)(e.default,{href:`/curriculum/${v}`,children:[(0,b.jsx)(l.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Course"]})}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(k.CreditCard,{className:"h-5 w-5"}),"Complete Payment"]}),(0,b.jsx)(f.CardDescription,{children:"Secure payment for your course enrollment"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[r&&(0,b.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Course"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-blue-900",children:r.name}),(0,b.jsx)("p",{className:"text-sm text-blue-700",children:r.subject})]}),(0,b.jsxs)("div",{className:"text-center py-6 border-y",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Total Amount"}),(0,b.jsx)("p",{className:"text-4xl font-bold text-gray-900",children:z(w,x)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Payment Method"}),(0,b.jsxs)(i.Select,{value:t,onValueChange:a=>u(a),disabled:p,children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Choose payment method"})}),(0,b.jsx)(i.SelectContent,{children:o.map(a=>(0,b.jsxs)(i.SelectItem,{value:a.value,children:[a.label," — ",a.description]},a.value))})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,b.jsx)(m.Lock,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Secure payment processing"})]}),(0,b.jsx)(g.Button,{className:"w-full gap-2",size:"lg",onClick:y,disabled:p,children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"h-4 w-4 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.CreditCard,{className:"h-4 w-4"}),"Pay ",z(w,x)]})}),(0,b.jsx)("p",{className:"text-xs text-center text-gray-400",children:"You will be redirected to our secure payment partner to complete the transaction."})]})]})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,b.jsxs)(f.Card,{className:"max-w-md w-full",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Invalid Payment Request"}),(0,b.jsx)(f.CardDescription,{children:"Missing required payment information."})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)(g.Button,{asChild:!0,className:"w-full",children:(0,b.jsxs)(e.default,{href:"/curriculum",children:[(0,b.jsx)(l.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})})})]})})}a.s(["default",()=>p])}];

//# debugId=6454c964-fdda-1609-295c-8b2dcae6067e
//# sourceMappingURL=ADK_WORKSPACE_TutorMekimi_tutorme-app_21653354._.js.map