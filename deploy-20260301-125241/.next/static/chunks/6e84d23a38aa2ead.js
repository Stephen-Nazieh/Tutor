;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="ea74c9b7-101a-9bb9-9440-cfa5b74121bd")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,196415,e=>{"use strict";var s=e.i(251474),t=e.i(800592),a=e.i(390553);let r=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));r.displayName="Card";let i=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let n=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t}));n.displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>c,"CardDescription",()=>d,"CardFooter",()=>n,"CardHeader",()=>i,"CardTitle",()=>l])},785784,e=>{"use strict";var s=e.i(251474),t=e.i(383753),a=e.i(390553);let r=(0,t.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...i}){return(0,s.jsx)("div",{className:(0,a.cn)(r({variant:t}),e),...i})}e.s(["Badge",()=>i])},358469,e=>{"use strict";let s=(0,e.i(879191).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>s],358469)},25125,e=>{"use strict";let s=(0,e.i(879191).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>s],25125)},795624,e=>{"use strict";let s=(0,e.i(879191).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>s],795624)},163696,e=>{"use strict";let s=(0,e.i(879191).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>s],163696)},192858,e=>{"use strict";let s=(0,e.i(879191).default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);e.s(["Trophy",()=>s],192858)},416982,e=>{"use strict";let s=(0,e.i(879191).default)("file-question-mark",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]);e.s(["FileQuestion",()=>s],416982)},617225,e=>{"use strict";var s=e.i(251474),t=e.i(800592),a=e.i(536105),r=e.i(151651),i=e.i(196415),l=e.i(870368),d=e.i(785784),c=e.i(156155),n=e.i(916653),x=e.i(358469),m=e.i(25125),o=e.i(795624),h=e.i(311679),u=e.i(416982),p=e.i(383918),j=e.i(962825),f=e.i(192858),g=e.i(251916),y=e.i(163696),N=e.i(598320);function v(){let e=(0,a.useParams)().studentId,[v,b]=(0,t.useState)([]),[C,w]=(0,t.useState)({pending:0,submitted:0,overdue:0,total:0}),[k,T]=(0,t.useState)(!0),[A,M]=(0,t.useState)("all"),S=(0,t.useCallback)(async()=>{if(e){T(!0);try{let s=await fetch(`/api/parent/students/${e}/assignments`,{credentials:"include"});if(s.ok){let e=await s.json();b(e.assignments??[]),w(e.stats??{pending:0,submitted:0,overdue:0,total:0})}else{let e=await s.json();N.toast.error(e.error??"Failed to load assignments")}}catch{N.toast.error("Failed to load assignments")}finally{T(!1)}}},[e]);(0,t.useEffect)(()=>{S()},[S]);let B=e=>e?new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—";return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,s.jsx)(r.default,{href:`/parent/students/${e}`,children:(0,s.jsx)(j.ArrowLeft,{className:"h-4 w-4"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"作业与测验"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"查看孩子的作业完成情况、AI评分和教师反馈"})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[(0,s.jsx)(i.Card,{children:(0,s.jsx)(i.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"总计"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:C.total})]}),(0,s.jsx)(n.ClipboardList,{className:"h-8 w-8 text-gray-400"})]})})}),(0,s.jsx)(i.Card,{children:(0,s.jsx)(i.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"待完成"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:C.pending})]}),(0,s.jsx)(x.Clock,{className:"h-8 w-8 text-amber-500"})]})})}),(0,s.jsx)(i.Card,{children:(0,s.jsx)(i.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"已提交"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:C.submitted})]}),(0,s.jsx)(m.CheckCircle2,{className:"h-8 w-8 text-green-500"})]})})}),(0,s.jsx)(i.Card,{children:(0,s.jsx)(i.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"已逾期"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:C.overdue})]}),(0,s.jsx)(o.AlertCircle,{className:"h-8 w-8 text-red-500"})]})})})]}),(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsx)(i.CardTitle,{children:"全部作业"}),(0,s.jsx)(i.CardDescription,{children:"包含作业、测验、练习等，支持AI评分与教师反馈"})]}),(0,s.jsx)(i.CardContent,{children:k?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(p.Loader2,{className:"h-8 w-8 animate-spin text-gray-400"})}):(0,s.jsxs)(c.Tabs,{value:A,onValueChange:M,children:[(0,s.jsxs)(c.TabsList,{className:"mb-4",children:[(0,s.jsxs)(c.TabsTrigger,{value:"all",children:["全部 (",C.total,")"]}),(0,s.jsxs)(c.TabsTrigger,{value:"pending",children:["待完成 (",C.pending,")"]}),(0,s.jsxs)(c.TabsTrigger,{value:"submitted",children:["已提交 (",C.submitted,")"]}),(0,s.jsxs)(c.TabsTrigger,{value:"overdue",children:["已逾期 (",C.overdue,")"]})]}),(0,s.jsx)(c.TabsContent,{value:A,className:"mt-0",children:(0,s.jsxs)("div",{className:"space-y-4",children:[v.filter(e=>"all"===A||e.status===A).map(e=>{var t;return(0,s.jsx)(i.Card,{className:"overflow-hidden",children:(0,s.jsxs)(i.CardContent,{className:"p-0",children:[(0,s.jsxs)("div",{className:"p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)("h3",{className:"font-semibold truncate",children:e.title}),(e=>{switch(e){case"submitted":return(0,s.jsxs)(d.Badge,{variant:"default",className:"bg-green-600",children:[(0,s.jsx)(m.CheckCircle2,{className:"h-3 w-3 mr-1"}),"已提交"]});case"overdue":return(0,s.jsxs)(d.Badge,{variant:"destructive",children:[(0,s.jsx)(o.AlertCircle,{className:"h-3 w-3 mr-1"}),"已逾期"]});default:return(0,s.jsxs)(d.Badge,{variant:"secondary",children:[(0,s.jsx)(x.Clock,{className:"h-3 w-3 mr-1"}),"待完成"]})}})(e.status),(0,s.jsx)(d.Badge,{variant:"outline",className:"text-xs",children:{quiz:"测验",assignment:"作业",practice:"练习",assessment:"评估",project:"项目"}[t=e.type]??t}),e.difficulty&&(0,s.jsx)(d.Badge,{variant:"outline",className:"text-xs",children:e.difficulty})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[e.lessonTitle&&(0,s.jsx)("span",{children:e.lessonTitle}),e.curriculumName&&(0,s.jsxs)("span",{children:["· ",e.curriculumName]}),e.tutorName&&(0,s.jsxs)("span",{children:["· 教师: ",e.tutorName]}),e.dueDate&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(h.Calendar,{className:"h-3 w-3"}),"截止: ",B(e.dueDate)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 shrink-0",children:["submitted"===e.status&&null!=e.score&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(f.Trophy,{className:"h-4 w-4 text-amber-500"}),(0,s.jsxs)("span",{className:"font-semibold",children:[Math.round(e.score),"%"]})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,s.jsx)(u.FileQuestion,{className:"h-4 w-4 inline mr-1"}),e.questionCount," 题"]})]})]}),(e.aiGraded||e.tutorFeedback)&&(0,s.jsxs)("div",{className:"border-t bg-gray-50/50 px-4 py-3 space-y-2",children:[e.aiGraded&&(0,s.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,s.jsx)(g.Bot,{className:"h-4 w-4 text-purple-500 shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("span",{className:"font-medium text-gray-700",children:["AI 评分",null!=e.aiScore&&`: ${Math.round(e.aiScore)}%`]}),e.aiComments&&(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:e.aiComments}),e.aiStrengths.length>0&&(0,s.jsxs)("p",{className:"text-green-700 mt-1",children:["优点: ",e.aiStrengths.join("、")]}),e.aiImprovements.length>0&&(0,s.jsxs)("p",{className:"text-amber-700 mt-1",children:["改进: ",e.aiImprovements.join("、")]})]})]}),e.tutorFeedback&&(0,s.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,s.jsx)(y.User,{className:"h-4 w-4 text-blue-500 shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("span",{className:"font-medium text-gray-700",children:["教师反馈",e.tutorApproved&&(0,s.jsx)(d.Badge,{variant:"secondary",className:"ml-2 text-xs",children:"已批阅"})]}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:e.tutorFeedback})]})]})]}),"submitted"===e.status&&e.submittedAt&&(0,s.jsxs)("div",{className:"border-t px-4 py-2 text-xs text-gray-500",children:["提交于 ",B(e.submittedAt),null!=e.timeSpent&&` \xb7 用时 ${Math.round(e.timeSpent/60)} 分钟`,e.attempts>0&&` \xb7 第 ${e.attempts}/${e.maxAttempts} 次尝试`]})]})},e.id)}),0===v.filter(e=>"all"===A||e.status===A).length&&(0,s.jsx)("div",{className:"text-center py-12 text-gray-500",children:"暂无作业"})]})})]})})]})]})}e.s(["default",()=>v])}]);

//# debugId=ea74c9b7-101a-9bb9-9440-cfa5b74121bd
//# sourceMappingURL=330988a9f068071e.js.map