;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b8603554-d1bc-376b-a7f3-de6ffa7719d0")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,962825,e=>{"use strict";let a=(0,e.i(879191).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],962825)},196415,e=>{"use strict";var a=e.i(251474),t=e.i(800592),r=e.i(390553);let s=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));s.displayName="Card";let l=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let i=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));i.displayName="CardTitle";let c=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let n=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...t}));n.displayName="CardContent";let d=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t}));d.displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>n,"CardDescription",()=>c,"CardFooter",()=>d,"CardHeader",()=>l,"CardTitle",()=>i])},752137,e=>{"use strict";var a=e.i(800592);e.i(312515);var t=e.i(298121),r=e.i(251474),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let l=(0,t.createSlot)(`Primitive.${s}`),i=a.forwardRef((e,a)=>{let{asChild:t,...i}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(t?l:s,{...i,ref:a})});return i.displayName=`Primitive.${s}`,{...e,[s]:i}},{});e.s(["Primitive",()=>s])},383918,e=>{"use strict";let a=(0,e.i(879191).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],383918)},538998,e=>{"use strict";var a=e.i(251474),t=e.i(800592),r=e.i(752137),s=t.forwardRef((e,t)=>(0,a.jsx)(r.Primitive.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));s.displayName="Label";var l=e.i(383753),i=e.i(390553);let c=(0,l.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)(s,{ref:r,className:(0,i.cn)(c(),e),...t}));n.displayName=s.displayName,e.s(["Label",()=>n],538998)},825627,e=>{"use strict";let a=(0,e.i(879191).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>a],825627)},257418,e=>{"use strict";let a=(0,e.i(879191).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>a],257418)},986851,e=>{"use strict";var a=e.i(251474),t=e.i(800592),r=e.i(536105),s=e.i(151651),l=e.i(196415),i=e.i(870368),c=e.i(538998),n=e.i(230645),d=e.i(383918),o=e.i(257418),m=e.i(962825),u=e.i(825627),x=e.i(598320);let h=[{value:"HITPAY",label:"HitPay",description:"Cards, PayNow, GrabPay"},{value:"AIRWALLEX",label:"Airwallex",description:"Global cards & wallets"},{value:"WECHAT_PAY",label:"WeChat Pay",description:"For China users"},{value:"ALIPAY",label:"Alipay",description:"For China users"}];function p(){let e=(0,r.useSearchParams)();(0,r.useRouter)();let[p,f]=(0,t.useState)(!1),[y,j]=(0,t.useState)(null),[C,w]=(0,t.useState)("HITPAY"),N=e.get("curriculumId"),g=e.get("amount"),b=e.get("currency")||"USD";(0,t.useEffect)(()=>{N&&fetch(`/api/curriculum/${N}`).then(e=>e.ok?e.json():null).then(e=>{e?.curriculum&&j({name:e.curriculum.name,subject:e.curriculum.subject})}).catch(()=>{})},[N]);let v=async()=>{if(!N||!g)return void x.toast.error("Invalid payment details");f(!0);try{let e=await fetch("/api/csrf",{credentials:"include"}),a=await e.json().catch(()=>({})),t=a?.token??null,r="WECHAT_PAY"===C||"ALIPAY"===C,s=await fetch(r?"/api/payments/chinese-gateways":"/api/payments/create",{method:"POST",headers:{"Content-Type":"application/json",...t&&{"X-CSRF-Token":t}},credentials:"include",body:JSON.stringify({curriculumId:N,amount:parseFloat(g),currency:b,gateway:C,description:y?`Course: ${y.name}`:"Course enrollment"})}),l=await s.json();s.ok&&(l.checkoutUrl||l.paymentUrl)?window.location.href=l.checkoutUrl||l.paymentUrl:(x.toast.error(l.error||"Failed to create payment"),f(!1))}catch{x.toast.error("Failed to process payment"),f(!1)}},P=(e,a)=>`${({USD:"$",SGD:"S$",CNY:"¥",MYR:"RM",EUR:"€",GBP:"£",AUD:"A$",CAD:"C$",JPY:"¥",INR:"₹",KRW:"₩",HKD:"HK$"})[a]||a+" "}${parseFloat(e).toFixed(2)}`;return N&&g?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,a.jsx)(i.Button,{variant:"ghost",className:"mb-4",asChild:!0,children:(0,a.jsxs)(s.default,{href:`/curriculum/${N}`,children:[(0,a.jsx)(m.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Course"]})}),(0,a.jsxs)(l.Card,{children:[(0,a.jsxs)(l.CardHeader,{children:[(0,a.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.CreditCard,{className:"h-5 w-5"}),"Complete Payment"]}),(0,a.jsx)(l.CardDescription,{children:"Secure payment for your course enrollment"})]}),(0,a.jsxs)(l.CardContent,{className:"space-y-6",children:[y&&(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Course"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-blue-900",children:y.name}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:y.subject})]}),(0,a.jsxs)("div",{className:"text-center py-6 border-y",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Total Amount"}),(0,a.jsx)("p",{className:"text-4xl font-bold text-gray-900",children:P(g,b)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Payment Method"}),(0,a.jsxs)(n.Select,{value:C,onValueChange:e=>w(e),disabled:p,children:[(0,a.jsx)(n.SelectTrigger,{children:(0,a.jsx)(n.SelectValue,{placeholder:"Choose payment method"})}),(0,a.jsx)(n.SelectContent,{children:h.map(e=>(0,a.jsxs)(n.SelectItem,{value:e.value,children:[e.label," — ",e.description]},e.value))})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(u.Lock,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Secure payment processing"})]}),(0,a.jsx)(i.Button,{className:"w-full gap-2",size:"lg",onClick:v,disabled:p,children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Loader2,{className:"h-4 w-4 animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.CreditCard,{className:"h-4 w-4"}),"Pay ",P(g,b)]})}),(0,a.jsx)("p",{className:"text-xs text-center text-gray-400",children:"You will be redirected to our secure payment partner to complete the transaction."})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsxs)(l.Card,{className:"max-w-md w-full",children:[(0,a.jsxs)(l.CardHeader,{children:[(0,a.jsx)(l.CardTitle,{children:"Invalid Payment Request"}),(0,a.jsx)(l.CardDescription,{children:"Missing required payment information."})]}),(0,a.jsx)(l.CardContent,{children:(0,a.jsx)(i.Button,{asChild:!0,className:"w-full",children:(0,a.jsxs)(s.default,{href:"/curriculum",children:[(0,a.jsx)(m.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})})})]})})}e.s(["default",()=>p])}]);

//# debugId=b8603554-d1bc-376b-a7f3-de6ffa7719d0
//# sourceMappingURL=823207912c310029.js.map