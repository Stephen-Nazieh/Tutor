(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["chunks/ADK_WORKSPACE_TutorMekimi_tutorme-app_7da4ef5f._.js",251495,(e,t,n)=>{"use strict";n._=function(e){return e&&e.__esModule?e:{default:e}}},429571,(e,t,n)=>{"use strict";t.exports=["chrome 111","edge 111","firefox 111","safari 16.4"]},811576,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={UNDERSCORE_GLOBAL_ERROR_ROUTE:function(){return o},UNDERSCORE_GLOBAL_ERROR_ROUTE_ENTRY:function(){return u},UNDERSCORE_NOT_FOUND_ROUTE:function(){return s},UNDERSCORE_NOT_FOUND_ROUTE_ENTRY:function(){return a}};for(var i in r)Object.defineProperty(n,i,{enumerable:!0,get:r[i]});let s="/_not-found",a=`${s}/page`,o="/_global-error",u=`${o}/page`},613314,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i={APP_CLIENT_INTERNALS:function(){return et},APP_PATHS_MANIFEST:function(){return v},APP_PATH_ROUTES_MANIFEST:function(){return b},AdapterOutputType:function(){return l},BARREL_OPTIMIZATION_PREFIX:function(){return z},BLOCKED_PAGES:function(){return B},BUILD_ID_FILE:function(){return F},BUILD_MANIFEST:function(){return E},CLIENT_PUBLIC_FILES_PATH:function(){return G},CLIENT_REFERENCE_MANIFEST:function(){return H},CLIENT_STATIC_FILES_PATH:function(){return q},CLIENT_STATIC_FILES_RUNTIME_MAIN:function(){return Q},CLIENT_STATIC_FILES_RUNTIME_MAIN_APP:function(){return ee},CLIENT_STATIC_FILES_RUNTIME_POLYFILLS:function(){return ei},CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL:function(){return es},CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH:function(){return en},CLIENT_STATIC_FILES_RUNTIME_WEBPACK:function(){return er},COMPILER_INDEXES:function(){return c},COMPILER_NAMES:function(){return u},CONFIG_FILES:function(){return U},DEFAULT_RUNTIME_WEBPACK:function(){return ea},DEFAULT_SANS_SERIF_FONT:function(){return ep},DEFAULT_SERIF_FONT:function(){return el},DEV_CLIENT_MIDDLEWARE_MANIFEST:function(){return D},DEV_CLIENT_PAGES_MANIFEST:function(){return N},DYNAMIC_CSS_MANIFEST:function(){return Z},EDGE_RUNTIME_WEBPACK:function(){return eo},EDGE_UNSUPPORTED_NODE_APIS:function(){return e_},EXPORT_DETAIL:function(){return w},EXPORT_MARKER:function(){return R},FUNCTIONS_CONFIG_MANIFEST:function(){return T},IMAGES_MANIFEST:function(){return O},INTERCEPTION_ROUTE_REWRITE_MANIFEST:function(){return X},MIDDLEWARE_BUILD_MANIFEST:function(){return Y},MIDDLEWARE_MANIFEST:function(){return P},MIDDLEWARE_REACT_LOADABLE_MANIFEST:function(){return K},MODERN_BROWSERSLIST_TARGET:function(){return a.default},NEXT_BUILTIN_DOCUMENT:function(){return W},NEXT_FONT_MANIFEST:function(){return I},PAGES_MANIFEST:function(){return y},PHASE_ANALYZE:function(){return d},PHASE_DEVELOPMENT_SERVER:function(){return g},PHASE_EXPORT:function(){return p},PHASE_INFO:function(){return m},PHASE_PRODUCTION_BUILD:function(){return f},PHASE_PRODUCTION_SERVER:function(){return h},PHASE_TEST:function(){return _},PRERENDER_MANIFEST:function(){return k},REACT_LOADABLE_MANIFEST:function(){return $},ROUTES_MANIFEST:function(){return x},RSC_MODULE_TYPES:function(){return eg},SERVER_DIRECTORY:function(){return j},SERVER_FILES_MANIFEST:function(){return C},SERVER_PROPS_ID:function(){return ec},SERVER_REFERENCE_MANIFEST:function(){return J},STATIC_PROPS_ID:function(){return eu},STATIC_STATUS_PAGES:function(){return ed},STRING_LITERAL_DROP_BUNDLE:function(){return V},SUBRESOURCE_INTEGRITY_MANIFEST:function(){return A},SYSTEM_ENTRYPOINTS:function(){return em},TRACE_OUTPUT_VERSION:function(){return ef},TURBOPACK_CLIENT_BUILD_MANIFEST:function(){return M},TURBOPACK_CLIENT_MIDDLEWARE_MANIFEST:function(){return L},TURBO_TRACE_DEFAULT_MEMORY_LIMIT:function(){return eh},UNDERSCORE_GLOBAL_ERROR_ROUTE:function(){return o.UNDERSCORE_GLOBAL_ERROR_ROUTE},UNDERSCORE_GLOBAL_ERROR_ROUTE_ENTRY:function(){return o.UNDERSCORE_GLOBAL_ERROR_ROUTE_ENTRY},UNDERSCORE_NOT_FOUND_ROUTE:function(){return o.UNDERSCORE_NOT_FOUND_ROUTE},UNDERSCORE_NOT_FOUND_ROUTE_ENTRY:function(){return o.UNDERSCORE_NOT_FOUND_ROUTE_ENTRY},WEBPACK_STATS:function(){return S}};for(var s in i)Object.defineProperty(n,s,{enumerable:!0,get:i[s]});let a=e.r(251495)._(e.r(429571)),o=e.r(811576),u={client:"client",server:"server",edgeServer:"edge-server"},c={[u.client]:0,[u.server]:1,[u.edgeServer]:2};var l=((r={}).PAGES="PAGES",r.PAGES_API="PAGES_API",r.APP_PAGE="APP_PAGE",r.APP_ROUTE="APP_ROUTE",r.PRERENDER="PRERENDER",r.STATIC_FILE="STATIC_FILE",r.MIDDLEWARE="MIDDLEWARE",r);let p="phase-export",d="phase-analyze",f="phase-production-build",h="phase-production-server",g="phase-development-server",_="phase-test",m="phase-info",y="pages-manifest.json",S="webpack-stats.json",v="app-paths-manifest.json",b="app-path-routes-manifest.json",E="build-manifest.json",T="functions-config-manifest.json",A="subresource-integrity-manifest",I="next-font-manifest",R="export-marker.json",w="export-detail.json",k="prerender-manifest.json",x="routes-manifest.json",O="images-manifest.json",C="required-server-files",N="_devPagesManifest.json",P="middleware-manifest.json",L="_clientMiddlewareManifest.json",M="client-build-manifest.json",D="_devMiddlewareManifest.json",$="react-loadable-manifest.json",j="server",U=["next.config.js","next.config.mjs","next.config.ts",...process?.features?.typescript?["next.config.mts"]:[]],F="BUILD_ID",B=["/_document","/_app","/_error"],G="public",q="static",V="__NEXT_DROP_CLIENT_FILE__",W="__NEXT_BUILTIN_DOCUMENT__",z="__barrel_optimize__",H="client-reference-manifest",J="server-reference-manifest",Y="middleware-build-manifest",K="middleware-react-loadable-manifest",X="interception-route-rewrite-manifest",Z="dynamic-css-manifest",Q="main",ee=`${Q}-app`,et="app-pages-internals",en="react-refresh",er="webpack",ei="polyfills",es=Symbol(ei),ea="webpack-runtime",eo="edge-runtime-webpack",eu="__N_SSG",ec="__N_SSP",el={name:"Times New Roman",xAvgCharWidth:821,azAvgWidth:854.3953488372093,unitsPerEm:2048},ep={name:"Arial",xAvgCharWidth:904,azAvgWidth:934.5116279069767,unitsPerEm:2048},ed=["/500"],ef=1,eh=6e3,eg={client:"client",server:"server"},e_=["clearImmediate","setImmediate","BroadcastChannel","ByteLengthQueuingStrategy","CompressionStream","CountQueuingStrategy","DecompressionStream","DomException","MessageChannel","MessageEvent","MessagePort","ReadableByteStreamController","ReadableStreamBYOBRequest","ReadableStreamDefaultController","TransformStreamDefaultController","WritableStreamDefaultController"],em=new Set([Q,en,ee]);("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},625625,(e,t,n)=>{t.exports=e.r(613314)},895641,e=>{"use strict";let t,n,r,i,s,a,o,u,c,l,p,d,f,h,g;function _(e){return Symbol.for(e)}var m,y,S,v,b,E,T,A,I,R,w,k,x,O,C,N,P,L,M,D=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}},$=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},j=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},U=function(){function e(){}return e.prototype.active=function(){return D},e.prototype.with=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t.call.apply(t,j([n],$(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),F="object"==typeof globalThis?globalThis:"object"==typeof self?self:e.g,B="1.9.0",G=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,q=function(e){var t=new Set([e]),n=new Set,r=e.match(G);if(!r)return function(){return!1};var i={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(null!=i.prerelease)return function(t){return t===e};function s(e){return n.add(e),!1}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(G);if(!r)return s(e);var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(null!=a.prerelease||i.major!==a.major)return s(e);if(0===i.major)return i.minor===a.minor&&i.patch<=a.patch?(t.add(e),!0):s(e);return i.minor<=a.minor?(t.add(e),!0):s(e)}}(B),V=Symbol.for("opentelemetry.js.api."+B.split(".")[0]);function W(e,t,n,r){void 0===r&&(r=!1);var i,s=F[V]=null!=(i=F[V])?i:{version:B};if(!r&&s[e]){var a=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(a.stack||a.message),!1}if(s.version!==B){var a=Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+B);return n.error(a.stack||a.message),!1}return s[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+B+"."),!0}function z(e){var t,n,r=null==(t=F[V])?void 0:t.version;if(r&&q(r))return null==(n=F[V])?void 0:n[e]}function H(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+B+".");var n=F[V];n&&delete n[e]}var J=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},Y=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},K=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return X("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return X("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return X("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return X("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return X("verbose",this._namespace,e)},e}();function X(e,t,n){var r=z("diag");if(r)return n.unshift(t),r[e].apply(r,Y([],J(n),!1))}(R=m||(m={}))[R.NONE=0]="NONE",R[R.ERROR=30]="ERROR",R[R.WARN=50]="WARN",R[R.INFO=60]="INFO",R[R.DEBUG=70]="DEBUG",R[R.VERBOSE=80]="VERBOSE",R[R.ALL=9999]="ALL";var Z=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},Q=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},ee=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=z("diag");if(r)return r[e].apply(r,Q([],Z(t),!1))}}var t=this;t.setLogger=function(e,n){if(void 0===n&&(n={logLevel:m.INFO}),e===t){var r,i,s,a=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(r=a.stack)?r:a.message),!1}"number"==typeof n&&(n={logLevel:n});var o=z("diag"),u=function(e,t){function n(n,r){var i=t[n];return"function"==typeof i&&e>=r?i.bind(t):function(){}}return e<m.NONE?e=m.NONE:e>m.ALL&&(e=m.ALL),t=t||{},{error:n("error",m.ERROR),warn:n("warn",m.WARN),info:n("info",m.INFO),debug:n("debug",m.DEBUG),verbose:n("verbose",m.VERBOSE)}}(null!=(i=n.logLevel)?i:m.INFO,e);if(o&&!n.suppressOverrideMessage){var c=null!=(s=Error().stack)?s:"<failed to generate stacktrace>";o.warn("Current logger will be overwritten from "+c),u.warn("Current logger will overwrite one already registered from "+c)}return W("diag",u,t,!0)},t.disable=function(){H("diag",t)},t.createComponentLogger=function(e){return new K(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),et=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},en=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},er="context",ei=new U,es=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return W(er,e,ee.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(r=this._getContextManager()).with.apply(r,en([e,t,n],et(i),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return z(er)||ei},e.prototype.disable=function(){this._getContextManager().disable(),H(er,ee.instance())},e}(),ea=es.getInstance(),eo=e.i(51428),eu=e.i(524069),ec=e.i(459806),el=e.i(844996);let ep={},ed={};function ef(e,t){ep[e]=ep[e]||[],ep[e].push(t)}function eh(e,t){if(!ed[e]){ed[e]=!0;try{t()}catch(t){eo.DEBUG_BUILD&&ec.debug.error(`Error while instrumenting ${e}`,t)}}}function eg(e,t){let n=e&&ep[e];if(n)for(let r of n)try{r(t)}catch(t){eo.DEBUG_BUILD&&ec.debug.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${(0,el.getFunctionName)(r)}
Error:`,t)}}let e_=null;function em(){e_=eu.GLOBAL_OBJ.onerror,eu.GLOBAL_OBJ.onerror=function(e,t,n,r,i){return eg("error",{column:r,error:i,line:n,msg:e,url:t}),!!e_&&e_.apply(this,arguments)},eu.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}let ey=null;function eS(){ey=eu.GLOBAL_OBJ.onunhandledrejection,eu.GLOBAL_OBJ.onunhandledrejection=function(e){return eg("unhandledrejection",e),!ey||ey.apply(this,arguments)},eu.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var ev=e.i(956588),eb=e.i(135593);let eE=!1;var eT=e.i(259683);function eA(e,t,n=[t],r="npm"){let i=(e._metadata=e._metadata||{}).sdk=e._metadata.sdk||{};i.name||(i.name=`sentry.javascript.${t}`,i.packages=n.map(e=>({name:`${r}:@sentry/${e}`,version:eT.SDK_VERSION})),i.version=eT.SDK_VERSION)}var eI=e.i(81449),eR=e.i(504256),ew=e.i(464822);function ek(e){if("isRelative"in e)return e.pathname;let t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}let ex="telemetry.sdk.language",eO="telemetry.sdk.name",eC="telemetry.sdk.version",eN="10.39.0",eP="u"<typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,eL=Object.prototype.toString;function eM(e,t){return eL.call(e)===`[object ${t}]`}let eD=globalThis;function e$(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||eN,t[eN]=t[eN]||{}}function ej(e,t,n=eD){let r=n.__SENTRY__=n.__SENTRY__||{},i=r[eN]=r[eN]||{};return i[e]||(i[e]=t())}let eU={};function eF(e,...t){eP&&function(){return eP?ej("loggerSettings",()=>({enabled:!1})):{enabled:!1}}().enabled&&function(e){if(!("console"in eD))return e();let t=eD.console,n={},r=Object.keys(eU);r.forEach(e=>{let r=eU[e];n[e]=t[e],t[e]=r});try{return e()}finally{r.forEach(e=>{t[e]=n[e]})}}(()=>{eD.console[e](`Sentry Logger [${e}]:`,...t)})}let eB=function(...e){eF("log",...e)},eG=function(...e){eF("warn",...e)};function eq(e){return"/"===e[e.length-1]?e.slice(0,-1):e}function eV(e){if(void 0!==t)return t?t(e):e();let n=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__");return n in eD&&"function"==typeof eD[n]?(t=eD[n])(e):(t=null,e())}function eW(){return eV(()=>Math.random())}function ez(e=eD.crypto||eD.msCrypto){try{if(e?.randomUUID)return eV(()=>e.randomUUID()).replace(/-/g,"")}catch{}return n||(n="10000000100040008000100000000000"),n.replace(/[018]/g,e=>(e^(15&16*eW())>>e/4).toString(16))}function eH(){return eV(()=>Date.now())/1e3}function eJ(){return(r??(r=function(){let{performance:e}=eD;if(!e?.now||!e.timeOrigin)return eH;let t=e.timeOrigin;return()=>(t+eV(()=>e.now()))/1e3}()))()}let eY="_sentrySpan";function eK(e,t){if(t)try{Object.defineProperty(e,eY,{value:t,writable:!0,configurable:!0})}catch{eP&&eB(`Failed to add non-enumerable property "${eY}" to object`,e)}else delete e[eY]}class eX{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ez(),sampleRand:eW()}}clone(){let e=new eX;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._attributes={...this._attributes},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,e._conversationId=this._conversationId,eK(e,this[eY]),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&function(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||eJ(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:ez()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{let t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setConversationId(e){return this._conversationId=e||void 0,this._notifyScopeListeners(),this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this.setTags({[e]:t})}setAttributes(e){return this._attributes={...this._attributes,...e},this._notifyScopeListeners(),this}setAttribute(e,t){return this.setAttributes({[e]:t})}removeAttribute(e){return e in this._attributes&&(delete this._attributes[e],this._notifyScopeListeners()),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;let t="function"==typeof e?e(this):e,{tags:n,attributes:r,extra:i,user:s,contexts:a,level:o,fingerprint:u=[],propagationContext:c,conversationId:l}=(t instanceof eX?t.getScopeData():eM(t,"Object")?e:void 0)||{};return this._tags={...this._tags,...n},this._attributes={...this._attributes,...r},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},s&&Object.keys(s).length&&(this._user=s),o&&(this._level=o),u.length&&(this._fingerprint=u),c&&(this._propagationContext=c),l&&(this._conversationId=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,this._conversationId=void 0,eK(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ez(),sampleRand:eW()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){let n="number"==typeof t?t:100;if(n<=0)return this;let r={timestamp:eH(),...e,message:e.message?function(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:this[eY],conversationId:this._conversationId}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=function e(t,n,r=2){if(!n||"object"!=typeof n||r<=0)return n;if(t&&0===Object.keys(n).length)return t;let i={...t};for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(i[t]=e(i[t],n[t],r-1));return i}(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){let n=t?.event_id||ez();if(!this._client)return eP&&eG("No client configured on scope - will not capture exception!"),n;let r=Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){let r=n?.event_id||ez();if(!this._client)return eP&&eG("No client configured on scope - will not capture message!"),r;let i=n?.syntheticException??Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureEvent(e,t){let n=e.event_id||t?.event_id||ez();return this._client?this._client.captureEvent(e,{...t,event_id:n},this):eP&&eG("No client configured on scope - will not capture event!"),n}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}class eZ{constructor(e,t){let n,r;n=e||new eX,r=t||new eX,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){var t;let n,r=this._pushScope();try{n=e(r)}catch(e){throw this._popScope(),e}return(t=n,t?.then&&"function"==typeof t.then)?n.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function eQ(){let e=(e$(eD),eD),t=e$(e);return t.stack=t.stack||new eZ(ej("defaultCurrentScope",()=>new eX),ej("defaultIsolationScope",()=>new eX))}function e0(e){return eQ().withScope(e)}function e1(e,t){let n=eQ();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function e2(e){return eQ().withScope(()=>e(eQ().getIsolationScope()))}function e4(){let e,t;return(t=(e$(eD),eD),((e=e$(t)).acs?e.acs:{withIsolationScope:e2,withScope:e0,withSetScope:e1,withSetIsolationScope:(e,t)=>e2(t),getCurrentScope:()=>eQ().getScope(),getIsolationScope:()=>eQ().getIsolationScope()}).getCurrentScope()).getClient()}RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");(w=y||(y={}))[w.NONE=0]="NONE",w[w.SAMPLED=1]="SAMPLED";var e5="0000000000000000",e3="00000000000000000000000000000000",e9={traceId:e3,spanId:e5,traceFlags:y.NONE},e6=function(){function e(e){void 0===e&&(e=e9),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),e8=_("OpenTelemetry Context Key SPAN");function e7(e){return e.getValue(e8)||void 0}function te(){return e7(es.getInstance().active())}function tt(e,t){return e.setValue(e8,t)}function tn(e){return e.deleteValue(e8)}function tr(e,t){return tt(e,new e6(t))}function ti(e){var t;return null==(t=e7(e))?void 0:t.spanContext()}var ts=/^([0-9a-f]{32})$/i,ta=/^[0-9a-f]{16}$/i;function to(e){return ts.test(e)&&e!==e3}function tu(e){var t;return to(e.traceId)&&(t=e.spanId,ta.test(t)&&t!==e5)}function tc(e){return new e6(e)}var tl=es.getInstance(),tp=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(void 0===n&&(n=tl.active()),null==t?void 0:t.root)return new e6;var r,i=n&&ti(n);return"object"==typeof(r=i)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&tu(i)?new e6(i):new e6},e.prototype.startActiveSpan=function(e,t,n,r){if(!(arguments.length<2)){2==arguments.length?a=t:3==arguments.length?(i=t,a=n):(i=t,s=n,a=r);var i,s,a,o=null!=s?s:tl.active(),u=this.startSpan(e,i,o),c=tt(o,u);return tl.with(c,a,void 0,u)}},e}(),td=new tp,tf=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):td},e}(),th=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new tp},e}()),tg=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var r;return null!=(r=this.getDelegateTracer(e,t,n))?r:new tf(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!=(e=this._delegate)?e:th},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null==(r=this._delegate)?void 0:r.getTracer(e,t,n)},e}(),t_="trace",tm=(function(){function e(){this._proxyTracerProvider=new tg,this.wrapSpanContext=tc,this.isSpanContextValid=tu,this.deleteSpan=tn,this.getSpan=e7,this.getActiveSpan=te,this.getSpanContext=ti,this.setSpan=tt,this.setSpanContext=tr}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=W(t_,this._proxyTracerProvider,ee.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return z(t_)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){H(t_,ee.instance()),this._proxyTracerProvider=new tg},e})().getInstance();(k=S||(S={}))[k.INTERNAL=0]="INTERNAL",k[k.SERVER=1]="SERVER",k[k.CLIENT=2]="CLIENT",k[k.PRODUCER=3]="PRODUCER",k[k.CONSUMER=4]="CONSUMER";var ty=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),tS={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},tv={set:function(e,t,n){null!=e&&(e[t]=n)}},tb=_("OpenTelemetry Baggage Key");function tE(e){return e.getValue(tb)||void 0}function tT(){return tE(es.getInstance().active())}function tA(e,t){return e.setValue(tb,t)}function tI(e){return e.deleteValue(tb)}var tR=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},tw=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tk=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=tR(e,2);return[t[0],t[1]]})},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=new e(this._entries);try{for(var a=tw(r),o=a.next();!o.done;o=a.next()){var u=o.value;s._entries.delete(u)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s},e.prototype.clear=function(){return new e},e}(),tx=Symbol("BaggageEntryMetadata"),tO=ee.instance();function tC(e){return void 0===e&&(e={}),new tk(new Map(Object.entries(e)))}var tN="propagation",tP=new ty,tL=(function(){function e(){this.createBaggage=tC,this.getBaggage=tE,this.getActiveBaggage=tT,this.setBaggage=tA,this.deleteBaggage=tI}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return W(tN,e,ee.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=tv),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=tS),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){H(tN,ee.instance())},e.prototype._getGlobalPropagator=function(){return z(tN)||tP},e})().getInstance();(x=v||(v={}))[x.UNSET=0]="UNSET",x[x.OK=1]="OK",x[x.ERROR=2]="ERROR";let tM="[_0-9a-z-*/]",tD=`[a-z]${tM}{0,255}`,t$=`[a-z0-9]${tM}{0,240}@[a-z]${tM}{0,13}`,tj=RegExp(`^(?:${tD}|${t$})$`),tU=/^[ -~]{0,255}[!-~]$/,tF=/,|=/;class tB{_internalState=new Map;constructor(e){e&&this._parse(e)}set(e,t){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let n=t.trim(),r=n.indexOf("=");if(-1!==r){let i=n.slice(0,r),s=n.slice(r+1,t.length);tj.test(i)&&tU.test(s)&&!tF.test(s)&&e.set(i,s)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new tB;return e._internalState=new Map(this._internalState),e}}_("OpenTelemetry SDK Context Key SUPPRESS_TRACING"),(O=b||(b={}))[O.NOT_RECORD=0]="NOT_RECORD",O[O.RECORD=1]="RECORD",O[O.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED";let tG=_("sentry_scopes");_("sentry_fork_isolation_scope"),_("sentry_fork_set_scope"),_("sentry_fork_set_isolation_scope");"u"<typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var tq=e.i(951615);let tV="u"<typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,tW="10.39.0",tz=globalThis;function tH(){return tJ(tz),tz}function tJ(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||tW,t[tW]=t[tW]||{}}function tY(e,t,n=tz){let r=n.__SENTRY__=n.__SENTRY__||{},i=r[tW]=r[tW]||{};return i[e]||(i[e]=t())}let tK=["debug","info","warn","error","log","assert","trace"],tX={};function tZ(e){if(!("console"in tz))return e();let t=tz.console,n={},r=Object.keys(tX);r.forEach(e=>{let r=tX[e];n[e]=t[e],t[e]=r});try{return e()}finally{r.forEach(e=>{t[e]=n[e]})}}function tQ(e,...t){tV&&function(){return tV?tY("loggerSettings",()=>({enabled:!1})):{enabled:!1}}().enabled&&tZ(()=>{tz.console[e](`Sentry Logger [${e}]:`,...t)})}let t0=function(...e){tQ("log",...e)},t1=function(...e){tQ("warn",...e)},t2=function(...e){tQ("error",...e)},t4=/^o(\d+)\./,t5=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function t3(e,t=!1){let{host:n,path:r,pass:i,port:s,projectId:a,protocol:o,publicKey:u}=e;return`${o}://${u}${t&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${a}`}function t9(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function t6(e){let t,n=e.getOptions(),{host:r}=e.getDsn()||{};if(n.orgId)t=String(n.orgId);else{let e;r&&(e=r.match(t4),t=e?.[1])}return t}let t8=Object.prototype.toString;function t7(e){switch(t8.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return na(e,Error)}}function ne(e,t){return t8.call(e)===`[object ${t}]`}function nt(e){return ne(e,"String")}function nn(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function nr(e){return null===e||nn(e)||"object"!=typeof e&&"function"!=typeof e}function ni(e){return ne(e,"Object")}function ns(e){return!!(e?.then&&"function"==typeof e.then)}function na(e,t){try{return e instanceof t}catch{return!1}}function no(e){return!!("object"==typeof e&&null!==e&&(e.__isVue||e._isVue||e.__v_isVNode))}function nu(e){return"u">typeof Request&&na(e,Request)}function nc(e,t,n){if(!(t in e))return;let r=e[t];if("function"!=typeof r)return;let i=n(r);"function"==typeof i&&function(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,nl(e,"__sentry_original__",t)}catch{}}(i,r);try{e[t]=i}catch{tV&&t0(`Failed to replace method "${t}" in object`,e)}}function nl(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{tV&&t0(`Failed to add non-enumerable property "${t}" to object`,e)}}function np(e){if(t7(e))return{message:e.message,name:e.name,stack:e.stack,...nf(e)};if(!("u">typeof Event&&na(e,Event)))return e;{let t={type:e.type,target:nd(e.target),currentTarget:nd(e.currentTarget),...nf(e)};return"u">typeof CustomEvent&&na(e,CustomEvent)&&(t.detail=e.detail),t}}function nd(e){try{return"u">typeof Element&&na(e,Element)?function(e,t={}){if(!e)return"<unknown>";try{let n,r=e,i=[],s=0,a=0,o=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||80;for(;r&&s++<5&&(n=function(e,t){let n=[];if(!e?.tagName)return"";if(tz.HTMLElement&&e instanceof HTMLElement&&e.dataset){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}n.push(e.tagName.toLowerCase());let r=t?.length?t.filter(t=>e.getAttribute(t)).map(t=>[t,e.getAttribute(t)]):null;if(r?.length)r.forEach(e=>{n.push(`[${e[0]}="${e[1]}"]`)});else{e.id&&n.push(`#${e.id}`);let t=e.className;if(t&&nt(t))for(let e of t.split(/\s+/))n.push(`.${e}`)}for(let t of["aria-label","type","name","title","alt"]){let r=e.getAttribute(t);r&&n.push(`[${t}="${r}"]`)}return n.join("")}(r,o),"html"!==n&&(!(s>1)||!(a+3*i.length+n.length>=u)));)i.push(n),a+=n.length,r=r.parentNode;return i.reverse().join(" > ")}catch{return"<unknown>"}}(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function nf(e){if("object"!=typeof e||null===e)return{};{let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}}let nh=/\(error: (.*)\)/,ng=/captureMessage|captureException/;function n_(...e){let t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,n=0,r=0)=>{let i=[],s=e.split("\n");for(let e=n;e<s.length;e++){let n=s[e];n.length>1024&&(n=n.slice(0,1024));let a=nh.test(n)?n.replace(nh,"$1"):n;if(!a.match(/\S*Error: /)){for(let e of t){let t=e(a);if(t){i.push(t);break}}if(i.length>=50+r)break}}var a=i.slice(r);if(!a.length)return[];let o=Array.from(a);return/sentryWrapped/.test(nm(o).function||"")&&o.pop(),o.reverse(),ng.test(nm(o).function||"")&&(o.pop(),ng.test(nm(o).function||"")&&o.pop()),o.slice(0,50).map(e=>({...e,filename:e.filename||nm(o).filename,function:e.function||"?"}))}}function nm(e){return e[e.length-1]||{}}let ny="<anonymous>";function nS(e){try{if(!e||"function"!=typeof e)return ny;return e.name||ny}catch{return ny}}function nv(e){let t=e.exception;if(t){let e=[];try{return t.values.forEach(t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)}),e}catch{}}}function nb(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}function nE(t,n=100,r=Infinity){try{return function t(n,r,i=Infinity,s=Infinity,a=function(){let e=new WeakSet;return[function(t){return!!e.has(t)||(e.add(t),!1)},function(t){e.delete(t)}]}()){let[o,u]=a;if(null==r||["boolean","string"].includes(typeof r)||"number"==typeof r&&Number.isFinite(r))return r;let c=function(t,n){try{var r;let i;if("domain"===t&&n&&"object"==typeof n&&n._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if(n===e.g)return"[Global]";if("u">typeof document&&n===document)return"[Document]";if(no(n))return nb(n);if(ni(n)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof n&&!Number.isFinite(n))return`[${n}]`;if("function"==typeof n)return`[Function: ${nS(n)}]`;if("symbol"==typeof n)return`[${String(n)}]`;if("bigint"==typeof n)return`[BigInt: ${String(n)}]`;let s=(r=n,i=Object.getPrototypeOf(r),i?.constructor?i.constructor.name:"null prototype");if(/^HTML(\w*)Element$/.test(s))return`[HTMLElement: ${s}]`;return`[object ${s}]`}catch(e){return`**non-serializable** (${e})`}}(n,r);if(!c.startsWith("[object "))return c;if(r.__sentry_skip_normalization__)return r;let l="number"==typeof r.__sentry_override_normalization_depth__?r.__sentry_override_normalization_depth__:i;if(0===l)return c.replace("object ","");if(o(r))return"[Circular ~]";if(r&&"function"==typeof r.toJSON)try{let e=r.toJSON();return t("",e,l-1,s,a)}catch{}let p=Array.isArray(r)?[]:{},d=0,f=np(r);for(let e in f){if(!Object.prototype.hasOwnProperty.call(f,e))continue;if(d>=s){p[e]="[MaxProperties ~]";break}let n=f[e];p[e]=t(e,n,l-1,s,a),d++}return u(r),p}("",t,n,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function nT(e,t=[]){return[e,t]}function nA(e,t){for(let n of e[1]){let e=n[0].type;if(t(n,e))return!0}return!1}function nI(e){let t=tJ(tz);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}let nR={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function nw(e){if(!e?.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}let nk="production";function nx(e){if(void 0!==i)return i?i(e):e();let t=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__");return t in tz&&"function"==typeof tz[t]?(i=tz[t])(e):(i=null,e())}function nO(){return nx(()=>Math.random())}function nC(){return nx(()=>Date.now())}function nN(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function nP(e,t){if(!Array.isArray(e))return"";let n=[];for(let t=0;t<e.length;t++){let r=e[t];try{no(r)?n.push(nb(r)):n.push(String(r))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function nL(e,t,n=!1){return!!nt(e)&&(ne(t,"RegExp")?t.test(e):!!nt(t)&&(n?e===t:e.includes(t)))}function nM(e,t=[],n=!1){return t.some(t=>nL(e,t,n))}function nD(e=tz.crypto||tz.msCrypto){try{if(e?.randomUUID)return nx(()=>e.randomUUID()).replace(/-/g,"")}catch{}return s||(s="10000000100040008000100000000000"),s.replace(/[018]/g,e=>(e^(15&16*nO())>>e/4).toString(16))}function n$(e){return e.exception?.values?.[0]}function nj(e){let{message:t,event_id:n}=e;if(t)return t;let r=n$(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function nU(e,t){let n=n$(e);if(!n)return;let r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){let e={...r?.data,...t.data};n.mechanism.data=e}}function nF(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{nl(e,"__sentry_captured__",!0)}catch{}return!1}function nB(){return nC()/1e3}function nG(){return(a??(a=function(){let{performance:e}=tz;if(!e?.now||!e.timeOrigin)return nB;let t=e.timeOrigin;return()=>(t+nx(()=>e.now()))/1e3}()))()}function nq(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||nG(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:nD()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{let t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function nV(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;let r={...e};for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=nV(r[e],t[e],n-1));return r}function nW(){return nD().substring(16)}let nz="_sentrySpan";function nH(e,t){t?nl(e,nz,t):delete e[nz]}class nJ{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:nD(),sampleRand:nO()}}clone(){let e=new nJ;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._attributes={...this._attributes},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,e._conversationId=this._conversationId,nH(e,this[nz]),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&nq(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setConversationId(e){return this._conversationId=e||void 0,this._notifyScopeListeners(),this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this.setTags({[e]:t})}setAttributes(e){return this._attributes={...this._attributes,...e},this._notifyScopeListeners(),this}setAttribute(e,t){return this.setAttributes({[e]:t})}removeAttribute(e){return e in this._attributes&&(delete this._attributes[e],this._notifyScopeListeners()),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;let t="function"==typeof e?e(this):e,{tags:n,attributes:r,extra:i,user:s,contexts:a,level:o,fingerprint:u=[],propagationContext:c,conversationId:l}=(t instanceof nJ?t.getScopeData():ni(t)?e:void 0)||{};return this._tags={...this._tags,...n},this._attributes={...this._attributes,...r},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},s&&Object.keys(s).length&&(this._user=s),o&&(this._level=o),u.length&&(this._fingerprint=u),c&&(this._propagationContext=c),l&&(this._conversationId=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,this._conversationId=void 0,nH(this,void 0),this._attachments=[],this.setPropagationContext({traceId:nD(),sampleRand:nO()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){let n="number"==typeof t?t:100;if(n<=0)return this;let r={timestamp:nB(),...e,message:e.message?nN(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:this[nz],conversationId:this._conversationId}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=nV(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){let n=t?.event_id||nD();if(!this._client)return tV&&t1("No client configured on scope - will not capture exception!"),n;let r=Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){let r=n?.event_id||nD();if(!this._client)return tV&&t1("No client configured on scope - will not capture message!"),r;let i=n?.syntheticException??Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureEvent(e,t){let n=e.event_id||t?.event_id||nD();return this._client?this._client.captureEvent(e,{...t,event_id:n},this):tV&&t1("No client configured on scope - will not capture event!"),n}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function nY(){return tY("defaultCurrentScope",()=>new nJ)}function nK(){return tY("defaultIsolationScope",()=>new nJ)}class nX{constructor(e,t){let n,r;n=e||new nJ,r=t||new nJ,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){let t,n=this._pushScope();try{t=e(n)}catch(e){throw this._popScope(),e}return ns(t)?t.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),t)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function nZ(){let e=tJ(tH());return e.stack=e.stack||new nX(nY(),nK())}function nQ(e){return nZ().withScope(e)}function n0(e,t){let n=nZ();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function n1(e){return nZ().withScope(()=>e(nZ().getIsolationScope()))}function n2(e){let t=tJ(e);return t.acs?t.acs:{withIsolationScope:n1,withScope:nQ,withSetScope:n0,withSetIsolationScope:(e,t)=>n1(t),getCurrentScope:()=>nZ().getScope(),getIsolationScope:()=>nZ().getIsolationScope()}}function n4(){return n2(tH()).getCurrentScope()}function n5(){return n2(tH()).getIsolationScope()}function n3(){return tY("globalScope",()=>new nJ)}function n9(...e){let t=n2(tH());if(2===e.length){let[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}return t.withScope(e[0])}function n6(...e){let t=n2(tH());if(2===e.length){let[n,r]=e;return n?t.withSetIsolationScope(n,r):t.withIsolationScope(r)}return t.withIsolationScope(e[0])}function n8(){return n4().getClient()}function n7(e){let{traceId:t,parentSpanId:n,propagationSpanId:r}=e.getPropagationContext(),i={trace_id:t,span_id:r||nW()};return n&&(i.parent_span_id=n),i}let re="sentry.source",rt="sentry.sample_rate",rn="sentry.op",rr="sentry.origin",ri="sentry.measurement_unit",rs="sentry.measurement_value",ra="sentry.custom_span_name",ro="sentry.profile_id",ru="sentry.exclusive_time",rc="sentry-",rl=/^sentry-/;function rp(e){let t=rf(e);if(!t)return;let n=Object.entries(t).reduce((e,[t,n])=>(t.match(rl)&&(e[t.slice(rc.length)]=n),e),{});return Object.keys(n).length>0?n:void 0}function rd(e){if(e){var t=Object.entries(e).reduce((e,[t,n])=>(n&&(e[`${rc}${t}`]=n),e),{});return 0!==Object.keys(t).length?Object.entries(t).reduce((e,[t,n],r)=>{let i=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,s=0===r?i:`${e},${i}`;return s.length>8192?(tV&&t1(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):s},""):void 0}}function rf(e){if(e&&(nt(e)||Array.isArray(e)))return Array.isArray(e)?e.reduce((e,t)=>(Object.entries(rh(t)).forEach(([t,n])=>{e[t]=n}),e),{}):rh(e)}function rh(e){return e.split(",").map(e=>{let t=e.indexOf("=");return -1===t?[]:[e.slice(0,t),e.slice(t+1)].map(e=>{try{return decodeURIComponent(e.trim())}catch{return}})}).reduce((e,[t,n])=>(t&&n&&(e[t]=n),e),{})}function rg(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;let t=e||n8()?.getOptions();return!!t&&(null!=t.tracesSampleRate||!!t.tracesSampler)}function r_(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"}}return{code:2,message:"internal_error"}}function rm(e,t){e.setAttribute("http.response.status_code",t);let n=r_(t);"unknown_error"!==n.message&&e.setStatus(n)}let ry="_sentryScope",rS="_sentryIsolationScope";function rv(e,t,n){e&&(nl(e,rS,function(e){try{let t=tz.WeakRef;if("function"==typeof t)return new t(e)}catch{}return e}(n)),nl(e,ry,t))}function rb(e){return{scope:e[ry],isolationScope:function(e){if(e){if("object"==typeof e&&"deref"in e&&"function"==typeof e.deref)try{return e.deref()}catch{return}return e}}(e[rS])}}function rE(e){if("boolean"==typeof e)return Number(e);let t="string"==typeof e?parseFloat(e):e;if(!("number"!=typeof t||isNaN(t))&&!(t<0)&&!(t>1))return t}let rT=RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function rA(e,t){let n=function(e){let t;if(!e)return;let n=e.match(rT);if(n)return"1"===n[3]?t=!0:"0"===n[3]&&(t=!1),{traceId:n[1],parentSampled:t,parentSpanId:n[2]}}(e),r=rp(t);if(!n?.traceId)return{traceId:nD(),sampleRand:nO()};let i=function(e,t){let n=rE(t?.sample_rand);if(void 0!==n)return n;let r=rE(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?nO()*r:r+nO()*(1-r):nO()}(n,r);r&&(r.sample_rand=i.toString());let{traceId:s,parentSpanId:a,parentSampled:o}=n;return{traceId:s,parentSpanId:a,sampled:o,dsc:r||{},sampleRand:i}}function rI(e=nD(),t=nW(),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function rR(e=nD(),t=nW(),n){return`00-${e}-${t}-${n?"01":"00"}`}function rw(e,t){let n=t6(e);return t&&n&&t!==n?(t0(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):!e.getOptions().strictTraceContinuation||(!t||!!n)&&(!!t||!n)||(t0(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1)}let rk=!1;function rx(e){let{spanId:t,traceId:n,isRemote:r}=e.spanContext(),i=r?t:rL(e).parent_span_id,s=rb(e).scope;return{parent_span_id:i,span_id:r?s?.getPropagationContext().propagationSpanId||nW():t,trace_id:n}}function rO(e){let{traceId:t,spanId:n}=e.spanContext();return rI(t,n,rM(e))}function rC(e){return e&&e.length>0?e.map(({context:{spanId:e,traceId:t,traceFlags:n,...r},attributes:i})=>({span_id:e,trace_id:t,sampled:1===n,attributes:i,...r})):void 0}function rN(e){return"number"==typeof e?rP(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?rP(e.getTime()):nG()}function rP(e){return e>0x2540be3ff?e/1e3:e}function rL(e){var t;if("function"==typeof e.getSpanJSON)return e.getSpanJSON();let{spanId:n,traceId:r}=e.spanContext();if((t=e).attributes&&t.startTime&&t.name&&t.endTime&&t.status){let{attributes:t,startTime:i,name:s,endTime:a,status:o,links:u}=e;return{span_id:n,trace_id:r,data:t,description:s,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:rN(i),timestamp:rN(a)||void 0,status:rD(o),op:t[rn],origin:t[rr],links:rC(u)}}return{span_id:n,trace_id:r,start_timestamp:0,data:{}}}function rM(e){let{traceFlags:t}=e.spanContext();return 1===t}function rD(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"internal_error"}let r$="_sentryChildSpans",rj="_sentryRootSpan";function rU(e,t){let n=e[rj]||e;nl(t,rj,n),e[r$]?e[r$].add(t):nl(e,r$,new Set([t]))}function rF(e){let t=new Set;return!function e(n){if(!t.has(n)&&rM(n))for(let r of(t.add(n),n[r$]?Array.from(n[r$]):[]))e(r)}(e),Array.from(t)}function rB(e){return e[rj]||e}function rG(){let e=n2(tH());return e.getActiveSpan?e.getActiveSpan():n4()[nz]}function rq(){rk||(tZ(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),rk=!0)}let rV="_frozenDsc";function rW(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},i={environment:n.environment||nk,release:n.release,public_key:r,trace_id:e,org_id:t6(t)};return t.emit("createDsc",i),i}function rz(e,t){let n=t.getPropagationContext();return n.dsc||rW(n.traceId,e)}function rH(e){let t=n8();if(!t)return{};let n=rB(e),r=rL(n),i=r.data,s=n.spanContext().traceState,a=s?.get("sentry.sample_rate")??i[rt]??i["sentry.previous_trace_sample_rate"];function o(e){return("number"==typeof a||"string"==typeof a)&&(e.sample_rate=`${a}`),e}let u=n[rV];if(u)return o(u);let c=s?.get("sentry.dsc"),l=c&&rp(c);if(l)return o(l);let p=rW(e.spanContext().traceId,t),d=i[re],f=r.description;return"url"!==d&&f&&(p.transaction=f),rg()&&(p.sampled=String(rM(n)),p.sample_rand=s?.get("sentry.sample_rand")??rb(n).scope?.getPropagationContext().sampleRand.toString()),o(p),t.emit("createDsc",p,n),p}function rJ(e){return rd(rH(e))}function rY(e){t0(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function rK(e,t){if(!t?.length||!e.description)return!1;for(let r of t){var n;if("string"==typeof(n=r)||n instanceof RegExp){if(nL(e.description,r))return tV&&rY(e),!0;continue}if(!r.name&&!r.op)continue;let t=!r.name||nL(e.description,r.name),i=!r.op||e.op&&nL(e.op,r.op);if(t&&i)return tV&&rY(e),!0}return!1}let rX=[];function rZ(e,t){for(let n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function rQ(e,t,n){if(n[t.name]){tV&&t0(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,rX.includes(t.name)||"function"!=typeof t.setupOnce||(t.setupOnce(),rX.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){let n=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,r)=>n(t,r,e))}if("function"==typeof t.processEvent){let n=t.processEvent.bind(t),r=Object.assign((t,r)=>n(t,r,e),{id:t.name});e.addEventProcessor(r)}tV&&t0(`Integration installed: ${t.name}`)}function r0(e){let t=n8();if(!t){tV&&t1(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function r1(e,t=!1){let n={};for(let[r,i]of Object.entries(e??{})){let e=function(e,t){let{value:n,unit:r}="object"==typeof e&&null!=e&&!Array.isArray(e)&&Object.keys(e).includes("value")?e:{value:e,unit:void 0},i=function(e){let t="string"==typeof e?"string":"boolean"==typeof e?"boolean":"number"!=typeof e||Number.isNaN(e)?null:Number.isInteger(e)?"integer":"double";if(t)return{value:e,type:t}}(n),s=r&&"string"==typeof r?{unit:r}:{};if(i)return{...i,...s};if(!t||"skip-undefined"===t&&void 0===n)return;let a="";try{a=JSON.stringify(n)??""}catch{}return{value:a,type:"string",...s}}(i,t);e&&(n[r]=e)}return n}function r2(e,t){let{extra:n,tags:r,attributes:i,user:s,contexts:a,level:o,sdkProcessingMetadata:u,breadcrumbs:c,fingerprint:l,eventProcessors:p,attachments:d,propagationContext:f,transactionName:h,span:g}=t;r4(e,"extra",n),r4(e,"tags",r),r4(e,"attributes",i),r4(e,"user",s),r4(e,"contexts",a),e.sdkProcessingMetadata=nV(e.sdkProcessingMetadata,u,2),o&&(e.level=o),h&&(e.transactionName=h),g&&(e.span=g),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),p.length&&(e.eventProcessors=[...e.eventProcessors,...p]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...f}}function r4(e,t,n){e[t]=nV(e[t],n,1)}function r5(e,t){let n=n3().getScopeData();return e&&r2(n,e.getScopeData()),t&&r2(n,t.getScopeData()),n}function r3(e,t){return t?n9(t,()=>{let n=rG(),r=n?rx(n):n7(t);return[n?rH(n):rz(e,t),r]}):[void 0,void 0]}let r9={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function r6(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function r8(e,t){var n;let r=it(),i=(n=e,it().get(n));void 0===i?r.set(e,[t]):i.length>=100?(ie(e,i),r.set(e,[t])):r.set(e,[...i,t])}function r7(e,t=n4(),n=r8){let r=t?.getClient()??n8();if(!r){tV&&t1("No client available to capture log.");return}let{release:i,environment:s,enableLogs:a=!1,beforeSendLog:o}=r.getOptions();if(!a){tV&&t1("logging option not enabled, log will not be captured.");return}let[,u]=r3(r,t),c={...e.attributes},{user:{id:l,email:p,username:d},attributes:f={}}=r5(n5(),t);r6(c,"user.id",l,!1),r6(c,"user.email",p,!1),r6(c,"user.name",d,!1),r6(c,"sentry.release",i),r6(c,"sentry.environment",s);let{name:h,version:g}=r.getSdkMetadata()?.sdk??{};r6(c,"sentry.sdk.name",h),r6(c,"sentry.sdk.version",g);let _=r.getIntegrationByName("Replay"),m=_?.getReplayId(!0);r6(c,"sentry.replay_id",m),m&&_?.getRecordingMode()==="buffer"&&r6(c,"sentry._internal.replay_is_buffering",!0);let y=e.message;if(nn(y)){let{__sentry_template_string__:e,__sentry_template_values__:t=[]}=y;t?.length&&(c["sentry.message.template"]=e),t.forEach((e,t)=>{c[`sentry.message.parameter.${t}`]=e})}let S=t[nz];r6(c,"sentry.trace.parent_span_id",S?.spanContext().spanId);let v={...e,attributes:c};r.emit("beforeCaptureLog",v);let b=o?tZ(()=>o(v)):v;if(!b){r.recordDroppedEvent("before_send","log_item",1),tV&&t1("beforeSendLog returned null, log will not be captured.");return}let{level:E,message:T,attributes:A={},severityNumber:I}=b;n(r,{timestamp:nG(),level:E,body:T,trace_id:u?.trace_id,severity_number:I??r9[E],attributes:{...r1(f),...r1(A,!0)}}),r.emit("afterCaptureLog",b)}function ie(e,t){var n,r,i,s;let a,o=t??(s=e,it().get(s))??[];if(0===o.length)return;let u=e.getOptions(),c=(n=u._metadata,r=u.tunnel,i=e.getDsn(),a={},n?.sdk&&(a.sdk={name:n.sdk.name,version:n.sdk.version}),r&&i&&(a.dsn=t3(i)),nT(a,[[{type:"log",item_count:o.length,content_type:"application/vnd.sentry.items.log+json"},{items:o}]]));it().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(c)}function it(){return tY("clientToLogBufferMap",()=>new WeakMap)}function ir(e,t,n,r=!0){!n||!r&&t in e||(e[t]=n)}function ii(e,t){var n;let r=ia(),i=(n=e,ia().get(n));void 0===i?r.set(e,[t]):i.length>=1e3?(is(e,i),r.set(e,[t])):r.set(e,[...i,t])}function is(e,t){var n,r,i,s;let a,o=t??(s=e,ia().get(s))??[];if(0===o.length)return;let u=e.getOptions(),c=(n=u._metadata,r=u.tunnel,i=e.getDsn(),a={},n?.sdk&&(a.sdk={name:n.sdk.name,version:n.sdk.version}),r&&i&&(a.dsn=t3(i)),nT(a,[[{type:"trace_metric",item_count:o.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:o}]]));ia().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(c)}function ia(){return tY("clientToMetricBufferMap",()=>new WeakMap)}function io(e){return new ic(t=>{t(e)})}function iu(e){return new ic((t,n)=>{n(e)})}class ic{constructor(e){this._state=0,this._handlers=[],this._runExecutor(e)}then(e,t){return new ic((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new ic((t,n)=>{let r,i;return this.then(t=>{i=!1,r=t,e&&e()},t=>{i=!0,r=t,e&&e()}).then(()=>{i?n(r):t(r)})})}_executeHandlers(){if(0===this._state)return;let e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(1===this._state&&e[1](this._value),2===this._state&&e[2](this._value),e[0]=!0)})}_runExecutor(e){let t=(e,t)=>{if(0===this._state){if(ns(t))return void t.then(n,r);this._state=e,this._value=t,this._executeHandlers()}},n=e=>{t(1,e)},r=e=>{t(2,e)};try{e(n,r)}catch(e){r(e)}}}function il(e){return"object"==typeof e&&"function"==typeof e.unref&&e.unref(),e}let ip=Symbol.for("SentryBufferFullError");function id(e=100){let t=new Set;return{get $(){return Array.from(t)},add:function(n){if(!(t.size<e))return iu(ip);let r=n();return t.add(r),r.then(()=>{t.delete(r)},()=>{t.delete(r)}),r},drain:function(e){if(!t.size)return io(!0);let n=Promise.allSettled(Array.from(t)).then(()=>!0);return e?Promise.race([n,new Promise(t=>il(setTimeout(()=>t(!1),e)))]):n}}}function ih(e,t,n=id(e.bufferSize||64)){let r={};return{send:function(i){let s=[];if(nA(i,(t,n)=>{let i=nR[n];!function(e,t,n=nC()){return(e[t]||e.all||0)>n}(r,i)?s.push(t):e.recordDroppedEvent("ratelimit_backoff",i)}),0===s.length)return Promise.resolve({});let a=nT(i[0],s),o=t=>{var n;if(n=["client_report"],nA(a,(e,t)=>n.includes(t))){tV&&t1(`Dropping client report. Will not send outcomes (reason: ${t}).`);return}nA(a,(n,r)=>{e.recordDroppedEvent(t,nR[r])})};return n.add(()=>t({body:function(e){let[t,n]=e,r=JSON.stringify(t);function i(e){"string"==typeof r?r="string"==typeof e?r+e:[nI(r),e]:r.push("string"==typeof e?nI(e):e)}for(let e of n){let[t,n]=e;if(i(`
${JSON.stringify(t)}
`),"string"==typeof n||n instanceof Uint8Array)i(n);else{let e;try{e=JSON.stringify(n)}catch{e=JSON.stringify(nE(n))}i(e)}}return"string"==typeof r?r:function(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),n=0;for(let r of e)t.set(r,n),n+=r.length;return t}(r)}(a)}).then(e=>(413===e.statusCode?(tV&&t2("Sentry responded with status code 413. Envelope was discarded due to exceeding size limits."),o("send_error")):(tV&&void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&t1(`Sentry responded with status code ${e.statusCode} to sent event.`),r=function(e,{statusCode:t,headers:n},r=nC()){let i={...e},s=n?.["x-sentry-rate-limits"],a=n?.["retry-after"];if(s)for(let e of s.trim().split(",")){let[t,n,,,s]=e.split(":",5),a=parseInt(t,10),o=(isNaN(a)?60:a)*1e3;if(n)for(let e of n.split(";"))"metric_bucket"===e?(!s||s.split(";").includes("custom"))&&(i[e]=r+o):i[e]=r+o;else i.all=r+o}else a?i.all=r+function(e,t=nC()){let n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}(a,r):429===t&&(i.all=r+6e4);return i}(r,e)),e),e=>{throw o("network_error"),tV&&t2("Encountered error running transport request:",e),e})).then(e=>e,e=>{if(e===ip)return tV&&t2("Skipped sending event because buffer is full."),o("queue_overflow"),Promise.resolve({});throw e})},flush:e=>n.drain(e)}}function ig(e){let t=[];e.message&&t.push(e.message);try{let n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}let i_=["user","level","extra","contexts","tags","fingerprint","propagationContext"],im="Not capturing exception because it's already been captured.",iy="Discarded session because of missing or non-string release",iS=Symbol.for("SentryInternalError"),iv=Symbol.for("SentryDoNotSendEventError");function ib(e){return{message:e,[iS]:!0}}function iE(e){return{message:e,[iv]:!0}}function iT(e){return!!e&&"object"==typeof e&&iS in e}function iA(e){return!!e&&"object"==typeof e&&iv in e}function iI(e,t,n,r,i){let s,a=0,o=!1;e.on(n,()=>{a=0,clearTimeout(s),o=!1}),e.on(t,t=>{(a+=r(t))>=8e5?i(e):o||(o=!0,s=il(setTimeout(()=>{i(e)},5e3)))}),e.on("flush",()=>{i(e)})}class iR{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=id(e.transportOptions?.bufferSize??64),e.dsn?this._dsn=function(e){let t="string"==typeof e?function(e){let t=t5.exec(e);if(!t)return void tZ(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});let[n,r,i="",s="",a="",o=""]=t.slice(1),u="",c=o,l=c.split("/");if(l.length>1&&(u=l.slice(0,-1).join("/"),c=l.pop()),c){let e=c.match(/^\d+/);e&&(c=e[0])}return t9({host:s,pass:i,path:u,projectId:c,port:a,protocol:n,publicKey:r})}(e):t9(e);if(t&&function(e){if(!tV)return!0;let{port:t,projectId:n,protocol:r}=e;return!["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(t2(`Invalid Sentry Dsn: ${t} missing`),!0))&&(n.match(/^\d+$/)?"http"!==r&&"https"!==r?(t2(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):!(t&&isNaN(parseInt(t,10)))||(t2(`Invalid Sentry Dsn: Invalid port ${t}`),!1):(t2(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1))}(t))return t}(e.dsn):tV&&t1("No DSN provided, client will not send events."),this._dsn){const t=function(e,t,n){let r,i,s;return t||`${r=e.protocol?`${e.protocol}:`:"",i=e.port?`:${e.port}`:"",`${r}//${e.host}${i}${e.path?`/${e.path}`:""}/api/`}${e.projectId}/envelope/?${s={sentry_version:"7"},e.publicKey&&(s.sentry_key=e.publicKey),n&&(s.sentry_client=`${n.name}/${n.version}`),new URLSearchParams(s).toString()}`}(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&iI(this,"afterCaptureLog","flushLogs",iC,ie),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&iI(this,"afterCaptureMetric","flushMetrics",iO,is)}captureException(e,t,n){let r=nD();if(nF(e))return tV&&t0(im),r;let i={event_id:r,...t};return this._process(()=>this.eventFromException(e,i).then(e=>this._captureEvent(e,i,n)).then(e=>e),"error"),i.event_id}captureMessage(e,t,n,r){let i={event_id:nD(),...n},s=nn(e)?e:String(e),a=nr(e),o=a?this.eventFromMessage(s,t,i):this.eventFromException(e,i);return this._process(()=>o.then(e=>this._captureEvent(e,i,r)),a?"unknown":"error"),i.event_id}captureEvent(e,t,n){let r=nD();if(t?.originalException&&nF(t.originalException))return tV&&t0(im),r;let i={event_id:r,...t},s=e.sdkProcessingMetadata||{},a=s.capturedSpanScope,o=s.capturedSpanIsolationScope,u=iw(e.type);return this._process(()=>this._captureEvent(e,i,a||n,o),u),i.event_id}captureSession(e){this.sendSession(e),nq(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){let t=this._transport;if(!t)return!0;this.emit("flush");let n=await this._isClientDoneProcessing(e),r=await t.flush(e);return n&&r}async close(e){let t=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),t}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){let t=this._integrations[e.name];rQ(this,e,this._integrations),t||rZ(this,[e])}sendEvent(e,t={}){var n,r,i;let s,a,o,u;this.emit("beforeSendEvent",e,t);let c=(n=this._dsn,r=this._options._metadata,i=this._options.tunnel,s=nw(r),a=e.type&&"replay_event"!==e.type?e.type:"event",!function(e,t){if(!t)return;let n=e.sdk||{};e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0}}(e,r?.sdk),o=e.sdkProcessingMetadata?.dynamicSamplingContext,u={event_id:e.event_id,sent_at:new Date().toISOString(),...s&&{sdk:s},...!!i&&n&&{dsn:t3(n)},...o&&{trace:o}},delete e.sdkProcessingMetadata,nT(u,[[{type:a},e]]));for(let e of t.attachments||[])c=function(e,t){let[n,r]=e;return[n,[...r,t]]}(c,function(e){let t="string"==typeof e.data?nI(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}(e));this.sendEnvelope(c).then(t=>this.emit("afterSendEvent",e,t))}sendSession(e){var t,n,r;let i,{release:s,environment:a=nk}=this._options;if("aggregates"in e){let t=e.attrs||{};if(!t.release&&!s){tV&&t1(iy);return}t.release=t.release||s,t.environment=t.environment||a,e.attrs=t}else{if(!e.release&&!s){tV&&t1(iy);return}e.release=e.release||s,e.environment=e.environment||a}this.emit("beforeSendSession",e);let o=(t=this._dsn,n=this._options._metadata,r=this._options.tunnel,i=nw(n),nT({sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:t3(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]]));this.sendEnvelope(o)}recordDroppedEvent(e,t,n=1){if(this._options.sendClientReports){let r=`${e}:${t}`;tV&&t0(`Recording outcome: "${r}"${n>1?` (${n} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+n}}on(e,t){let n=this._hooks[e]=this._hooks[e]||new Set,r=(...e)=>t(...e);return n.add(r),()=>{n.delete(r)}}emit(e,...t){let n=this._hooks[e];n&&n.forEach(e=>e(...t))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(e){return tV&&t2("Error while sending envelope:",e),{}}return tV&&t2("Transport disabled"),{}}_setupIntegrations(){var e;let t,{integrations:n}=this._options;this._integrations=(e=this,t={},n.forEach(n=>{n&&rQ(e,n,t)}),t),rZ(this,n)}_updateSessionFromEvent(e,t){let n="fatal"===t.level,r=!1,i=t.exception?.values;if(i){for(let e of(r=!0,n=!1,i))if(e.mechanism?.handled===!1){n=!0;break}}let s="ok"===e.status;(s&&0===e.errors||s&&n)&&(nq(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}async _isClientDoneProcessing(e){let t=0;for(;!e||t<e;){if(await new Promise(e=>setTimeout(e,1)),!this._numProcessing)return!0;t++}return!1}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r){let i=this.getOptions(),s=Object.keys(this._integrations);return!t.integrations&&s?.length&&(t.integrations=s),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),(function(e,t,n,r,i,s){var a,p,d;let f,{normalizeDepth:h=3,normalizeMaxBreadth:g=1e3}=e,_={...t,event_id:t.event_id||n.event_id||nD(),timestamp:t.timestamp||nB()},m=n.integrations||e.integrations.map(e=>e.name);(function(e,t){let{environment:n,release:r,dist:i,maxValueLength:s}=t;e.environment=e.environment||n||nk,!e.release&&r&&(e.release=r),!e.dist&&i&&(e.dist=i);let a=e.request;a?.url&&s&&(a.url=nN(a.url,s)),s&&e.exception?.values?.forEach(e=>{e.value&&(e.value=nN(e.value,s))})})(_,e),a=_,(p=m).length>0&&(a.sdk=a.sdk||{},a.sdk.integrations=[...a.sdk.integrations||[],...p]),i&&i.emit("applyFrameMetadata",t),void 0===t.type&&(d=_,f=function(e){let t=tz._sentryDebugIds,n=tz._debugIds;if(!t&&!n)return{};let r=t?Object.keys(t):[],i=n?Object.keys(n):[];if(l&&r.length===u&&i.length===c)return l;u=r.length,c=i.length,l={},o||(o={});let s=(t,n)=>{for(let r of t){let t=n[r],i=o?.[r];if(i&&l&&t)l[i[0]]=t,o&&(o[r]=[i[0],t]);else if(t){let n=e(r);for(let e=n.length-1;e>=0;e--){let i=n[e],s=i?.filename;if(s&&l&&o){l[s]=t,o[r]=[s,t];break}}}}};return t&&s(r,t),n&&s(i,n),l}(e.stackParser),d.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.filename&&(e.debug_id=f[e.filename])})}));let y=function(e,t){if(!t)return e;let n=e?e.clone():new nJ;return n.update(t),n}(r,n.captureContext);n.mechanism&&nU(_,n.mechanism);let S=i?i.getEventProcessors():[],v=r5(s,y),b=[...n.attachments||[],...v.attachments];b.length&&(n.attachments=b),function(e,t){var n,r,i,s,a,o,u,c;let l,p,{fingerprint:d,span:f,breadcrumbs:h,sdkProcessingMetadata:g}=t;(function(e,t){let{extra:n,tags:r,user:i,contexts:s,level:a,transactionName:o}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(i).length&&(e.user={...i,...e.user}),Object.keys(s).length&&(e.contexts={...s,...e.contexts}),a&&(e.level=a),o&&"transaction"!==e.type&&(e.transaction=o)})(e,t),f&&((n=e).contexts={trace:rx(r=f),...n.contexts},n.sdkProcessingMetadata={dynamicSamplingContext:rH(r),...n.sdkProcessingMetadata},(l=rL(rB(r)).description)&&!n.transaction&&"transaction"===n.type&&(n.transaction=l)),i=e,s=d,i.fingerprint=i.fingerprint?Array.isArray(i.fingerprint)?i.fingerprint:[i.fingerprint]:[],s&&(i.fingerprint=i.fingerprint.concat(s)),i.fingerprint.length||delete i.fingerprint,a=e,o=h,p=[...a.breadcrumbs||[],...o],a.breadcrumbs=p.length?p:void 0,u=e,c=g,u.sdkProcessingMetadata={...u.sdkProcessingMetadata,...c}}(_,v);let E=[...S,...v.eventProcessors];return(n.data&&!0===n.data.__sentry__?io(_):function(e,t,n,r=0){try{let i=function e(t,n,r,i){let s=r[i];if(!t||!s)return t;let a=s({...t},n);return(tV&&null===a&&t0(`Event processor "${s.id||"?"}" dropped event`),ns(a))?a.then(t=>e(t,n,r,i+1)):e(a,n,r,i+1)}(t,n,e,r);return ns(i)?i:io(i)}catch(e){return iu(e)}}(E,_,n)).then(e=>(e&&function(e){let t={};if(e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})})}(e),"number"==typeof h&&h>0)?function(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:nE(e.data,t,n)}}))},...e.user&&{user:nE(e.user,t,n)},...e.contexts&&{contexts:nE(e.contexts,t,n)},...e.extra&&{extra:nE(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=nE(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(e=>({...e,...e.data&&{data:nE(e.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=nE(e.contexts.flags,3,n)),r}(e,h,g):e)})(i,e,t,n,this,r).then(e=>(null===e||(this.emit("postprocessEvent",e,t),e.contexts={trace:n7(n),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:rz(this,n),...e.sdkProcessingMetadata}),e))}_captureEvent(e,t={},n=n4(),r=n5()){return tV&&ik(e)&&t0(`Captured error event \`${ig(e)[0]||"<unknown>"}\``),this._processEvent(e,t,n,r).then(e=>e.event_id,e=>{tV&&(iA(e)?t0(e.message):iT(e)?t1(e.message):t1(e))})}_processEvent(e,t,n,r){let i=this.getOptions(),{sampleRate:s}=i,a=ix(e),o=ik(e),u=e.type||"error",c=`before send for type \`${u}\``,l=void 0===s?void 0:rE(s);if(o&&"number"==typeof l&&nO()>l)return this.recordDroppedEvent("sample_rate","error"),iu(iE(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));let p=iw(e.type);return this._prepareEvent(e,t,n,r).then(e=>{if(null===e)throw this.recordDroppedEvent("event_processor",p),iE("An event processor returned `null`, will not send event.");return t.data&&!0===t.data.__sentry__?e:function(e,t){let n=`${t} must return \`null\` or a valid event.`;if(ns(e))return e.then(e=>{if(!ni(e)&&null!==e)throw ib(n);return e},e=>{throw ib(`${t} rejected with ${e}`)});if(!ni(e)&&null!==e)throw ib(n);return e}(function(e,t,n,r){let{beforeSend:i,beforeSendTransaction:s,beforeSendSpan:a,ignoreSpans:o}=t,u=n;if(ik(u)&&i)return i(u,r);if(ix(u)){if(a||o){let t=function(e){let{trace_id:t,parent_span_id:n,span_id:r,status:i,origin:s,data:a,op:o}=e.contexts?.trace??{};return{data:a??{},description:e.transaction,op:o,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:i,timestamp:e.timestamp,trace_id:t??"",origin:s,profile_id:a?.[ro],exclusive_time:a?.[ru],measurements:e.measurements,is_segment:!0}}(u);if(o?.length&&rK(t,o))return null;if(a){let e=a(t);if(e)u=nV(n,{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[ro]:e.profile_id},...e.exclusive_time&&{[ru]:e.exclusive_time}}}},measurements:e.measurements});else rq()}if(u.spans){let t=[],n=u.spans;for(let e of n){if(o?.length&&rK(e,o)){!function(e,t){let n=t.parent_span_id,r=t.span_id;if(n)for(let t of e)t.parent_span_id===r&&(t.parent_span_id=n)}(n,e);continue}if(a){let n=a(e);n?t.push(n):(rq(),t.push(e))}else t.push(e)}let r=u.spans.length-t.length;r&&e.recordDroppedEvent("before_send","span",r),u.spans=t}}if(s){if(u.spans){let e=u.spans.length;u.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return s(u,r)}}return u}(this,i,e,t),c)}).then(i=>{if(null===i){if(this.recordDroppedEvent("before_send",p),a){let t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw iE(`${c} returned \`null\`, will not send event.`)}let s=n.getSession()||r.getSession();if(o&&s&&this._updateSessionFromEvent(s,i),a){let e=(i.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(i.spans?i.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}let u=i.transaction_info;return a&&u&&i.transaction!==e.transaction&&(i.transaction_info={...u,source:"custom"}),this.sendEvent(i,t),i}).then(null,e=>{if(iA(e)||iT(e))throw e;throw this.captureException(e,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:e}),ib(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${e}`)})}_process(e,t){this._numProcessing++,this._promiseBuffer.add(e).then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e===ip&&this.recordDroppedEvent("queue_overflow",t),e))}_clearOutcomes(){let e=this._outcomes;return this._outcomes={},Object.entries(e).map(([e,t])=>{let[n,r]=e.split(":");return{reason:n,category:r,quantity:t}})}_flushOutcomes(){var e;tV&&t0("Flushing outcomes...");let t=this._clearOutcomes();if(0===t.length){tV&&t0("No outcomes to send");return}if(!this._dsn){tV&&t0("No dsn provided, will not send outcomes");return}tV&&t0("Sending outcomes:",t);let n=nT((e=this._options.tunnel&&t3(this._dsn))?{dsn:e}:{},[[{type:"client_report"},{timestamp:nB(),discarded_events:t}]]);this.sendEnvelope(n)}}function iw(e){return"replay_event"===e?"replay":e||"error"}function ik(e){return void 0===e.type}function ix(e){return"transaction"===e.type}function iO(e){let t=0;return e.name&&(t+=2*e.name.length),(t+=8)+iN(e.attributes)}function iC(e){let t=0;return e.message&&(t+=2*e.message.length),t+iN(e.attributes)}function iN(e){if(!e)return 0;let t=0;return Object.values(e).forEach(e=>{Array.isArray(e)?t+=e.length*iP(e[0]):nr(e)?t+=iP(e):t+=100}),t}function iP(e){return"string"==typeof e?2*e.length:"number"==typeof e?8:4*("boolean"==typeof e)}let iL={},iM={};function iD(e,t){iL[e]=iL[e]||[],iL[e].push(t)}function i$(e,t){if(!iM[e]){iM[e]=!0;try{t()}catch(t){tV&&t2(`Error while instrumenting ${e}`,t)}}}function ij(e,t){let n=e&&iL[e];if(n)for(let r of n)try{r(t)}catch(t){tV&&t2(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${nS(r)}
Error:`,t)}}let iU=null;function iF(){iU=tz.onerror,tz.onerror=function(e,t,n,r,i){return ij("error",{column:r,error:i,line:n,msg:e,url:t}),!!iU&&iU.apply(this,arguments)},tz.onerror.__SENTRY_INSTRUMENTED__=!0}let iB=null;function iG(){iB=tz.onunhandledrejection,tz.onunhandledrejection=function(e){return ij("unhandledrejection",e),!iB||iB.apply(this,arguments)},tz.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}let iq=!1;function iV(e,t){return e(t.stack||"",1)}function iW(e,t){let n={type:t.name||t.constructor.name,value:t7(t)&&"__sentry_fetch_url_host__"in t&&"string"==typeof t.__sentry_fetch_url_host__?`${t.message} (${t.__sentry_fetch_url_host__})`:t.message},r=iV(e,t);return r.length&&(n.stacktrace={frames:r}),n}class iz extends iR{constructor(e){!function(){if(!iq){let t,n;e.tag="sentry_tracingErrorCallback",iq=!0,iD(t="error",e),i$(t,iF),iD(n="unhandledrejection",e),i$(n,iG)}function e(){let e=rG(),t=e&&rB(e);if(t){let e="internal_error";tV&&t0(`[Tracing] Root span: ${e} -> Global error occurred`),t.setStatus({code:2,message:e})}}}(),function(e){let t=e._metadata?.sdk,n=t?.name&&t?.version?`${t?.name}/${t?.version}`:void 0;e.transportOptions={...e.transportOptions,headers:{...n&&{"user-agent":n},...e.transportOptions?.headers}}}(e),super(e),this._setUpMetricsProcessing()}eventFromException(e,t){let n=function(e,t,n,r){var i,s;let a,o,u,c=r?.data&&r.data.mechanism||{handled:!0,type:"generic"},[l,p]=function(e,t,n,r){if(t7(n))return[n,void 0];if(t.synthetic=!0,ni(n)){let t={__serialized__:function e(t,n=3,r=102400){let i=nE(t,n);return~-encodeURI(JSON.stringify(i)).split(/%..|./).length>r?e(t,n-1,r):i}(n,e?.getOptions().normalizeDepth)},i=function(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}(n);if(i)return[i,t];let s=function(e){let t;if("name"in e&&"string"==typeof e.name){let t=`'${e.name}' captured as exception`;return"message"in e&&"string"==typeof e.message&&(t+=` with message '${e.message}'`),t}if("message"in e&&"string"==typeof e.message)return e.message;let n=((t=Object.keys(np(e))).sort(),t[0]?t.join(", "):"[object has no keys]");if(ne(e,"ErrorEvent"))return`Event \`ErrorEvent\` captured as exception with message \`${e.message}\``;let r=function(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}(e);return`${r&&"Object"!==r?`'${r}'`:"Object"} captured as exception with keys: ${n}`}(n),a=r?.syntheticException||Error(s);return a.message=s,[a,t]}let i=r?.syntheticException||Error(n);return i.message=`${n}`,[i,void 0]}(e,c,n,r),d={exception:{values:[iW(t,l)]}};return p&&(d.extra=p),i=void 0,s=void 0,(u=(o=(a=d.exception=d.exception||{}).values=a.values||[])[0]=o[0]||{}).value||(u.value=i||""),u.type||(u.type=s||"Error"),nU(d,c),{...d,event_id:r?.event_id}}(this,this._options.stackParser,e,t);return n.level="error",io(n)}eventFromMessage(e,t="info",n){return io(function(e,t,n="info",r,i){let s={event_id:r?.event_id,level:n};if(i&&r?.syntheticException){let n=iV(e,r.syntheticException);n.length&&(s.exception={values:[{value:t,stacktrace:{frames:n}}]},nU(s,{synthetic:!0}))}if(nn(t)){let{__sentry_template_string__:e,__sentry_template_values__:n}=t;return s.logentry={message:e,params:n},s}return s.message=t,s}(this._options.stackParser,e,t,n,this._options.attachStacktrace))}captureException(e,t,n){return iH(t),super.captureException(e,t,n)}captureEvent(e,t,n){return!e.type&&e.exception?.values&&e.exception.values.length>0&&iH(t),super.captureEvent(e,t,n)}captureCheckIn(e,t,n){var r,i;let s,a="checkInId"in e&&e.checkInId?e.checkInId:nD();if(!this._isEnabled())return tV&&t1("SDK not enabled, will not capture check-in."),a;let{release:o,environment:u,tunnel:c}=this.getOptions(),l={check_in_id:a,monitor_slug:e.monitorSlug,status:e.status,release:o,environment:u};"duration"in e&&(l.duration=e.duration),t&&(l.monitor_config={schedule:t.schedule,checkin_margin:t.checkinMargin,max_runtime:t.maxRuntime,timezone:t.timezone,failure_issue_threshold:t.failureIssueThreshold,recovery_threshold:t.recoveryThreshold});let[p,d]=r3(this,n);d&&(l.contexts={trace:d});let f=(r=this.getSdkMetadata(),i=this.getDsn(),s={sent_at:new Date().toISOString()},r?.sdk&&(s.sdk={name:r.sdk.name,version:r.sdk.version}),c&&i&&(s.dsn=t3(i)),p&&(s.trace=p),nT(s,[[{type:"check_in"},l]]));return tV&&t0("Sending checkin:",e.monitorSlug,e.status),this.sendEnvelope(f),a}_prepareEvent(e,t,n,r){return this._options.platform&&(e.platform=e.platform||this._options.platform),this._options.runtime&&(e.contexts={...e.contexts,runtime:e.contexts?.runtime||this._options.runtime}),this._options.serverName&&(e.server_name=e.server_name||this._options.serverName),super._prepareEvent(e,t,n,r)}_setUpMetricsProcessing(){this.on("processMetric",e=>{this._options.serverName&&(e.attributes={"server.address":this._options.serverName,...e.attributes})})}}function iH(e){let t=n5().getScopeData().sdkProcessingMetadata.requestSession;if(t){let n=e?.mechanism?.handled??!0;n&&"crashed"!==t.status?t.status="errored":n||(t.status="crashed")}}function iJ(e,t,n){let r,i;if(!rg(e))return[!1];"function"==typeof e.tracesSampler?(r=e.tracesSampler({...t,inheritOrSampleWith:e=>"number"==typeof t.parentSampleRate?t.parentSampleRate:"boolean"==typeof t.parentSampled?Number(t.parentSampled):e}),i=!0):void 0!==t.parentSampled?r=t.parentSampled:void 0!==e.tracesSampleRate&&(r=e.tracesSampleRate,i=!0);let s=rE(r);if(void 0===s)return tV&&t1(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(r)} of type ${JSON.stringify(typeof r)}.`),[!1];if(!s)return tV&&t0(`[Tracing] Discarding transaction because ${"function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,s,i];let a=n<s;return!a&&tV&&t0(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),[a,s,i]}class iY{constructor(e){this._maxSize=e,this._cache=new Map}get size(){return this._cache.size}get(e){let t=this._cache.get(e);if(void 0!==t)return this._cache.delete(e),this._cache.set(e,t),t}set(e,t){if(this._cache.size>=this._maxSize){let e=this._cache.keys().next().value;this._cache.delete(e)}this._cache.set(e,t)}remove(e){let t=this._cache.get(e);return t&&this._cache.delete(e),t}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){let e=[];return this._cache.forEach(t=>e.push(t)),e}}let iK="[Tracing] Not injecting trace data for url because it does not match tracePropagationTargets:";function iX(e,t,n=()=>{},r=()=>{}){var i,s,a,o;let u;try{u=e()}catch(e){throw t(e),n(),e}return i=u,s=t,a=n,o=r,ns(i)?i.then(e=>(a(),o(e),e),e=>{throw s(e),a(),e}):(a(),o(i),i)}function iZ(e,t,n,r=rG()){let i=r&&rB(r);i&&(tV&&t0(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),i.addEvent(e,{[rs]:t,[ri]:n}))}function iQ(e){if(!e||0===e.length)return;let t={};return e.forEach(e=>{let n=e.attributes||{},r=n[ri],i=n[rs];"string"==typeof r&&"number"==typeof i&&(t[e.name]={value:i,unit:r})}),t}function i0(e){if(!tV)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=rL(e),{spanId:i}=e.spanContext(),s=rM(e),a=rB(e),o=a===e,u=`[Tracing] Starting ${s?"sampled":"unsampled"} ${o?"root ":""}span`,c=[`op: ${n}`,`name: ${t}`,`ID: ${i}`];if(r&&c.push(`parent ID: ${r}`),!o){let{op:e,description:t}=rL(a);c.push(`root ID: ${a.spanContext().spanId}`),e&&c.push(`root op: ${e}`),t&&c.push(`root description: ${t}`)}t0(`${u}
  ${c.join("\n  ")}`)}function i1(e){if(!tV)return;let{description:t="< unknown name >",op:n="< unknown op >"}=rL(e),{spanId:r}=e.spanContext(),i=rB(e)===e;t0(`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`)}class i2{constructor(e={}){this._traceId=e.traceId||nD(),this._spanId=e.spanId||nW()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}class i4{constructor(e={}){this._traceId=e.traceId||nD(),this._spanId=e.spanId||nW(),this._startTime=e.startTimestamp||nG(),this._links=e.links,this._attributes={},this.setAttributes({[rr]:"manual",[rn]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,t){}spanContext(){let{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:+!!n}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach(t=>this.setAttribute(t,e[t])),this}updateStartTime(e){this._startTime=rN(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(re,"custom"),this}end(e){this._endTime||(this._endTime=rN(e),i1(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[rn],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:rD(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[rr],profile_id:this._attributes[ro],exclusive_time:this._attributes[ru],measurements:iQ(this._events),is_segment:this._isStandaloneSpan&&rB(this)===this||void 0,segment_id:this._isStandaloneSpan?rB(this).spanContext().spanId:void 0,links:rC(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){tV&&t0("[Tracing] Adding an event to span:",e);let r=i5(t)?t:n||nG(),i=i5(t)?{}:t||{},s={name:e,time:rN(r),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let e=n8();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===rB(this)))return;if(this._isStandaloneSpan)return void(this._sampled?function(e){let t=n8();if(!t)return;let n=e[1];n&&0!==n.length?t.sendEnvelope(e):t.recordDroppedEvent("before_send","span")}(function(e,t){let n=rH(e[0]),r=t?.getDsn(),i=t?.getOptions().tunnel,s={sent_at:new Date().toISOString(),...!!n.trace_id&&!!n.public_key&&{trace:n},...!!i&&r&&{dsn:t3(r)}},{beforeSendSpan:a,ignoreSpans:o}=t?.getOptions()||{},u=o?.length?e.filter(e=>!rK(rL(e),o)):e,c=e.length-u.length;c&&t?.recordDroppedEvent("before_send","span",c);let l=a?e=>{let t=rL(e),n=a(t);return n||(rq(),t)}:rL,p=[];for(let e of u){let t=l(e);t&&p.push([{type:"span"},t])}return nT(s,p)}([this],e)):(tV&&t0("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));let t=this._convertSpanToTransaction();t&&(rb(this).scope||n4()).captureEvent(t)}_convertSpanToTransaction(){if(!i3(rL(this)))return;this._name||(tV&&t1("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:e,isolationScope:t}=rb(this),n=e?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(!0!==this._sampled)return;let r=rF(this).filter(e=>{var t;return e!==this&&!((t=e)instanceof i4&&t.isStandaloneSpan())}).map(e=>rL(e)).filter(i3),i=this._attributes[re];delete this._attributes[ra],r.forEach(e=>{delete e.data[ra]});let s={contexts:{trace:function(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:i,parent_span_id:s,status:a,origin:o,links:u}=rL(e);return{parent_span_id:s,span_id:t,trace_id:n,data:r,op:i,status:a,origin:o,links:u}}(this)},spans:r.length>1e3?r.sort((e,t)=>e.start_timestamp-t.start_timestamp).slice(0,1e3):r,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,dynamicSamplingContext:rH(this)},request:n,...i&&{transaction_info:{source:i}}},a=iQ(this._events);return a&&Object.keys(a).length&&(tV&&t0("[Measurements] Adding measurements to transaction event",JSON.stringify(a,void 0,2)),s.measurements=a),s}}function i5(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function i3(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}let i9="__SENTRY_SUPPRESS_TRACING__";function i6(e,t){let n=sa();if(n.startSpan)return n.startSpan(e,t);let r=ss(e),{forceTransaction:i,parentSpan:s,scope:a}=e;return n9(a?.clone(),()=>sc(s)(()=>{let n=n4(),a=su(n,s),o=e.onlyIfParent&&!a?new i2:si({parentSpan:a,spanArguments:r,forceTransaction:i,scope:n});return nH(n,o),iX(()=>t(o),()=>{let{status:e}=rL(o);o.isRecording()&&(!e||"ok"===e)&&o.setStatus({code:2,message:"internal_error"})},()=>{o.end()})}))}function i8(e,t){let n=sa();if(n.startSpanManual)return n.startSpanManual(e,t);let r=ss(e),{forceTransaction:i,parentSpan:s,scope:a}=e;return n9(a?.clone(),()=>sc(s)(()=>{let n=n4(),a=su(n,s),o=e.onlyIfParent&&!a?new i2:si({parentSpan:a,spanArguments:r,forceTransaction:i,scope:n});return nH(n,o),iX(()=>t(o,()=>o.end()),()=>{let{status:e}=rL(o);o.isRecording()&&(!e||"ok"===e)&&o.setStatus({code:2,message:"internal_error"})})}))}function i7(e){let t=sa();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=ss(e),{forceTransaction:r,parentSpan:i}=e;return(e.scope?t=>n9(e.scope,t):void 0!==i?e=>st(i,e):e=>e())(()=>{let t=n4(),s=su(t,i);return e.onlyIfParent&&!s?new i2:si({parentSpan:s,spanArguments:n,forceTransaction:r,scope:t})})}let se=(e,t)=>{let n=n2(tH());if(n.continueTrace)return n.continueTrace(e,t);let{sentryTrace:r,baggage:i}=e,s=n8(),a=rp(i);return s&&!rw(s,a?.org_id)?sr(t):n9(e=>{let n=rA(r,i);return e.setPropagationContext(n),nH(e,void 0),t()})};function st(e,t){let n=sa();return n.withActiveSpan?n.withActiveSpan(e,t):n9(n=>(nH(n,e||void 0),t(n)))}function sn(e){let t=sa();return t.suppressTracing?t.suppressTracing(e):n9(t=>{t.setSDKProcessingMetadata({[i9]:!0});let n=e();return t.setSDKProcessingMetadata({[i9]:void 0}),n})}function sr(e){return n9(t=>(t.setPropagationContext({traceId:nD(),sampleRand:nO()}),tV&&t0(`Starting a new trace with id ${t.getPropagationContext().traceId}`),st(null,e)))}function si({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){let i;if(!rg()){let r=new i2;if(n||!e){let e={sampled:"false",sample_rate:"0",transaction:t.name,...rH(r)};nl(r,rV,e)}return r}let s=n5();if(e&&!n)i=function(e,t,n){let{spanId:r,traceId:i}=e.spanContext(),s=!t.getScopeData().sdkProcessingMetadata[i9]&&rM(e),a=s?new i4({...n,parentSpanId:r,traceId:i,sampled:s}):new i2({traceId:i});rU(e,a);let o=n8();return o&&(o.emit("spanStart",a),n.endTimestamp&&o.emit("spanEnd",a)),a}(e,r,t),rU(e,i);else if(e){let n=rH(e),{traceId:s,spanId:a}=e.spanContext(),o=rM(e);nl(i=so({traceId:s,parentSpanId:a,...t},r,o),rV,n)}else{let{traceId:e,dsc:n,parentSpanId:a,sampled:o}={...s.getPropagationContext(),...r.getPropagationContext()};i=so({traceId:e,parentSpanId:a,...t},r,o),n&&nl(i,rV,n)}return i0(i),rv(i,r,s),i}function ss(e){let t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let n={...t};return n.startTimestamp=rN(e.startTime),delete n.startTime,n}return t}function sa(){return n2(tH())}function so(e,t,n){let r=n8(),i=r?.getOptions()||{},{name:s=""}=e,a={spanAttributes:{...e.attributes},spanName:s,parentSampled:n};r?.emit("beforeSampling",a,{decision:!1});let o=a.parentSampled??n,u=a.spanAttributes,c=t.getPropagationContext(),[l,p,d]=t.getScopeData().sdkProcessingMetadata[i9]?[!1]:iJ(i,{name:s,parentSampled:o,attributes:u,parentSampleRate:rE(c.dsc?.sample_rate)},c.sampleRand),f=new i4({...e,attributes:{[re]:"custom",[rt]:void 0!==p&&d?p:void 0,...u},sampled:l});return!l&&r&&(tV&&t0("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",f),f}function su(e,t){if(t)return t;if(null===t)return;let n=e[nz];if(!n)return;let r=n8();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?rB(n):n}function sc(e){return void 0!==e?t=>st(e,t):e=>e()}function sl(e,t){return n4().captureException(e,function(e){if(e){var t;return(t=e)instanceof nJ||"function"==typeof t||Object.keys(e).some(e=>i_.includes(e))?{captureContext:e}:e}}(t))}function sp(e,t){let n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return n4().captureMessage(e,n,r)}function sd(e,t){return n4().captureEvent(e,t)}function sf(e,t){n5().setContext(e,t)}function sh(e){n5().setExtras(e)}function sg(e,t){n5().setExtra(e,t)}function s_(e){n5().setTags(e)}function sm(e,t){n5().setTag(e,t)}function sy(e){n5().setUser(e)}function sS(){return n5().lastEventId()}function sv(e,t){let n=n4(),r=n8();if(r)if(r.captureCheckIn)return r.captureCheckIn(e,t,n);else tV&&t1("Cannot capture check-in. Client does not support sending check-ins.");else tV&&t1("Cannot capture check-in. No client defined.");return nD()}function sb(e,t,n){function r(){let r,i=sv({monitorSlug:e,status:"in_progress"},n),s=nG();function a(t){sv({monitorSlug:e,status:t,checkInId:i,duration:nG()-s})}try{r=t()}catch(e){throw a("error"),e}return ns(r)?r.then(e=>(a("ok"),e),e=>{throw a("error"),e}):(a("ok"),r)}return n6(()=>n?.isolateTrace?sr(r):r())}async function sE(e){let t=n8();return t?t.flush(e):(tV&&t1("Cannot flush events. No client defined."),Promise.resolve(!1))}async function sT(e){let t=n8();return t?t.close(e):(tV&&t1("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function sA(){return!!n8()}function sI(){let e=n8();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function sR(e){n5().addEventProcessor(e)}function sw(e){return"isRelative"in e}function sk(e,t){let n=0>=e.indexOf("://")&&0!==e.indexOf("//"),r=t??(n?"thismessage:/":void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;let t=new URL(e,r);if(n)return{isRelative:n,pathname:t.pathname,search:t.search,hash:t.hash};return t}catch{}}function sx(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function sO(e){return e.split(/[?#]/,1)[0]}function sC(e){let{protocol:t,host:n,path:r}=e,i=n?.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${t?`${t}://`:""}${i}${r}`}function sN(e,t=!0){if(e.startsWith("data:")){let n=e.match(/^data:([^;,]+)/),r=n?n[1]:"text/plain",i=e.includes(";base64,"),s=e.indexOf(","),a="";if(t&&-1!==s){let t=e.slice(s+1);a=t.length>10?`${t.slice(0,10)}... [truncated]`:t}return`data:${r}${i?",base64":""}${a?`,${a}`:""}`}return e}function sP(e,t){return!!e&&"object"==typeof e&&!!e[t]}function sL(e){return"string"==typeof e?e:e?sP(e,"url")?e.url:e.toString?e.toString():"":""}function sM(e){return"/"===e[e.length-1]?e.slice(0,-1):e}function sD(e={}){let t=e.client||n8();if(!sI()||!t)return{};let n=n2(tH());if(n.getTraceData)return n.getTraceData(e);let r=e.scope||n4(),i=e.span||rG(),s=i?rO(i):function(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return rI(t,r,n)}(r),a=rd(i?rH(i):rz(t,r));if(!rT.test(s))return t1("Invalid sentry-trace data. Cannot generate trace data"),{};let o={"sentry-trace":s,baggage:a};return e.propagateTraceparent&&(o.traceparent=i?function(e){let{traceId:t,spanId:n}=e.spanContext();return rR(t,n,rM(e))}(i):function(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return rR(t,r,n)}(r)),o}function s$(e){return e.split(",").some(e=>e.trim().startsWith(rc))}function sj(e,t,n,r){let i={url:sN(e),type:"fetch","http.method":n,[rr]:r,[rn]:"http.client"};return t&&(sw(t)||(i["http.url"]=sN(t.href),i["server.address"]=t.host),t.search&&(i["http.query"]=t.search),t.hash&&(i["http.fragment"]=t.hash)),i}function sU(e,t){let n=n8(),r=n5();if(!n)return;let{beforeBreadcrumb:i=null,maxBreadcrumbs:s=100}=n.getOptions();if(s<=0)return;let a={timestamp:nB(),...e},o=i?tZ(()=>i(a,t)):a;null!==o&&(n.emit&&n.emit("beforeAddBreadcrumb",o,t),r.addBreadcrumb(o,s))}function sF(e){return parseInt(e||"",10)||void 0}let sB=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{var n,r,i,s,a,o;let u,c,l,p;if(n=t,(r=e)&&(i=n,s=r,u=i.message,c=s.message,(u||c)&&(!u||c)&&(u||!c)&&u===c&&sq(i,s)&&sG(i,s)&&1||(a=n,o=r,l=sV(o),p=sV(a),l&&p&&l.type===p.type&&l.value===p.value&&sq(a,o)&&sG(a,o))))return tV&&t1("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}};function sG(e,t){let n=nv(e),r=nv(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let e=0;e<r.length;e++){let t=r[e],i=n[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function sq(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return n.join("")===r.join("")}catch{return!1}}function sV(e){return e.exception?.values?.[0]}let sW=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],sz=(e={})=>{let t;return{name:"EventFilters",setup(n){t=sJ(e,n.getOptions())},processEvent:(n,r,i)=>(t||(t=sJ(e,i.getOptions())),!function(e,t){if(e.type){if("transaction"===e.type&&function(e,t){if(!t?.length)return!1;let n=e.transaction;return!!n&&nM(n,t)}(e,t.ignoreTransactions))return tV&&t1(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${nj(e)}`),!0}else{var n,r,i;if(n=e,r=t.ignoreErrors,r?.length&&ig(n).some(e=>nM(e,r)))return tV&&t1(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${nj(e)}`),!0;if(i=e,i.exception?.values?.length&&!i.message&&!i.exception.values.some(e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))return tV&&t1(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${nj(e)}`),!0;if(function(e,t){if(!t?.length)return!1;let n=sY(e);return!!n&&nM(n,t)}(e,t.denyUrls))return tV&&t1(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${nj(e)}.
Url: ${sY(e)}`),!0;if(!function(e,t){if(!t?.length)return!0;let n=sY(e);return!n||nM(n,t)}(e,t.allowUrls))return tV&&t1(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${nj(e)}.
Url: ${sY(e)}`),!0}return!1}(n,t)?n:null)}},sH=(e={})=>({...sz(e),name:"InboundFilters"});function sJ(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:sW],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function sY(e){try{let t=[...e.exception?.values??[]].reverse().find(e=>e.mechanism?.parent_id===void 0&&e.stacktrace?.frames?.length),n=t?.stacktrace?.frames;return n?function(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch{return tV&&t2(`Cannot extract url for event ${nj(e)}`),null}}let sK=new WeakMap,sX=()=>({name:"FunctionToString",setupOnce(){p=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=this.__sentry_original__,n=sK.has(n8())&&void 0!==t?t:this;return p.apply(n,e)}}catch{}},setup(e){sK.set(e,!0)}});function sZ(e){return Array.isArray(e.errors)}function sQ(e,t,n){e.mechanism={handled:!0,type:"auto.core.linked_errors",...sZ(n)&&{is_exception_group:!0},...e.mechanism,exception_id:t}}function s0(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}let s1=(e={})=>{let t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,i){!function(e,t,n,r,i,s){if(!i.exception?.values||!s||!na(s.originalException,Error))return;let a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=function e(t,n,r,i,s,a,o,u){if(a.length>=r+1)return a;let c=[...a];if(na(i[s],Error)){sQ(o,u,i);let a=t(n,i[s]),l=c.length;s0(a,s,l,u),c=e(t,n,r,i[s],s,[a,...c],a,l)}return sZ(i)&&i.errors.forEach((a,l)=>{if(na(a,Error)){sQ(o,u,i);let p=t(n,a),d=c.length;s0(p,`errors[${l}]`,d,u),c=e(t,n,r,a,s,[p,...c],p,d)}}),c}(e,t,r,s.originalException,n,i.exception.values,a,0))}(iW,i.getOptions().stackParser,n,t,e,r)}}};function s2(e){let t="console";iD(t,e),i$(t,s4)}function s4(){"console"in tz&&tK.forEach(function(e){e in tz.console&&nc(tz.console,e,function(t){return tX[e]=t,function(...t){ij("console",{args:t,level:e});let n=tX[e];n?.apply(tz.console,t)}})})}function s5(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}let s3=(e={})=>{let t=new Set(e.levels||tK);return{name:"Console",setup(e){s2(({args:n,level:r})=>{n8()===e&&t.has(r)&&function(e,t){let n={category:"console",data:{arguments:t,logger:"console"},level:s5(e),message:s9(t)};if("assert"===e)if(!1!==t[0])return;else{let e=t.slice(1);n.message=e.length>0?`Assertion failed: ${s9(e)}`:"Assertion failed",n.data.arguments=e}sU(n,{input:t,level:e})}(r,n)})}}};function s9(e){return"util"in tz&&"function"==typeof tz.util.format?tz.util.format(...e):nP(e," ")}let s6=["X-Client-IP","X-Forwarded-For","Fly-Client-IP","CF-Connecting-IP","Fastly-Client-Ip","True-Client-Ip","X-Real-IP","X-Cluster-Client-IP","X-Forwarded","Forwarded-For","Forwarded","X-Vercel-Forwarded-For"],s8={cookies:!0,data:!0,headers:!0,query_string:!0,url:!0},s7=(e={})=>{let t={...s8,...e.include};return{name:"RequestData",processEvent(e,n,r){let{sdkProcessingMetadata:i={}}=e,{normalizedRequest:s,ipAddress:a}=i,o={...t,ip:t.ip??r.getOptions().sendDefaultPii};return s&&function(e,t,n,r){var i,s;let a,o;if(e.request={...e.request,...(i=t,s=r,a={},o={...i.headers},s.headers&&(a.headers=o,s.cookies||delete o.cookie,s.ip||s6.forEach(e=>{delete o[e]})),a.method=i.method,s.url&&(a.url=i.url),s.cookies&&(a.cookies=i.cookies||(o?.cookie?function(e){let t={},n=0;for(;n<e.length;){let r=e.indexOf("=",n);if(-1===r)break;let i=e.indexOf(";",n);if(-1===i)i=e.length;else if(i<r){n=e.lastIndexOf(";",r-1)+1;continue}let s=e.slice(n,r).trim();if(void 0===t[s]){let n=e.slice(r+1,i).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{t[s]=-1!==n.indexOf("%")?decodeURIComponent(n):n}catch{t[s]=n}}n=i+1}return t}(o.cookie):void 0)||{}),s.query_string&&(a.query_string=i.query_string),s.data&&(a.data=i.data),a)},r.ip){let r=t.headers&&function(e){let t={};for(let n of Object.keys(e))t[n.toLowerCase()]=e[n];return s6.map(e=>{let n=t[e.toLowerCase()],r=Array.isArray(n)?n.join(";"):n;return"Forwarded"===e?function(e){if(!e)return null;for(let t of e.split(";"))if(t.startsWith("for="))return t.slice(4);return null}(r):r?.split(",").map(e=>e.trim())}).reduce((e,t)=>t?e.concat(t):e,[]).find(e=>{var t;return null!==e&&(t=e,/(?:^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$)|(?:^(?:(?:[a-fA-F\d]{1,4}:){7}(?:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,2}|:)|(?:[a-fA-F\d]{1,4}:){4}(?:(?::[a-fA-F\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,3}|:)|(?:[a-fA-F\d]{1,4}:){3}(?:(?::[a-fA-F\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,4}|:)|(?:[a-fA-F\d]{1,4}:){2}(?:(?::[a-fA-F\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,5}|:)|(?:[a-fA-F\d]{1,4}:){1}(?:(?::[a-fA-F\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,6}|:)|(?::(?:(?::[a-fA-F\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,7}|:)))(?:%[0-9a-zA-Z]{1,})?$)/.test(t))})||null}(t.headers)||n.ipAddress;r&&(e.user={...e.user,ip_address:r})}}(e,s,{ipAddress:a},o),e}}},ae="gen_ai.system",at="gen_ai.request.model",an="gen_ai.request.stream",ar="gen_ai.request.temperature",ai="gen_ai.request.max_tokens",as="gen_ai.request.frequency_penalty",aa="gen_ai.request.presence_penalty",ao="gen_ai.request.top_p",au="gen_ai.request.top_k",ac="gen_ai.response.finish_reasons",al="gen_ai.response.model",ap="gen_ai.response.id",ad="gen_ai.usage.input_tokens",af="gen_ai.usage.output_tokens",ah="gen_ai.usage.total_tokens",ag="gen_ai.operation.name",a_="sentry.sdk_meta.gen_ai.input.messages.original_length",am="gen_ai.input.messages",ay="gen_ai.system_instructions",aS="gen_ai.response.text",av="gen_ai.request.available_tools",ab="gen_ai.response.streaming",aE="gen_ai.response.tool_calls",aT="gen_ai.agent.name",aA="gen_ai.conversation.id",aI="gen_ai.usage.input_tokens.cache_write",aR="gen_ai.usage.input_tokens.cached",aw="gen_ai.invoke_agent",ak="gen_ai.tool.name",ax="gen_ai.tool.call.id",aO="gen_ai.tool.type",aC="gen_ai.tool.input",aN="gen_ai.tool.output",aP="openai.response.id",aL="openai.response.model",aM="openai.response.timestamp",aD="chat",a$="embeddings",aj="anthropic.response.timestamp",aU=new Map,aF=new Set(["ai.generateText","ai.streamText","ai.generateObject","ai.streamObject","ai.embed","ai.embedMany","ai.rerank"]),aB=new Set(["ai.generateText.doGenerate","ai.streamText.doStream","ai.generateObject.doGenerate","ai.streamObject.doStream"]),aG=new Set(["ai.embed.doEmbed","ai.embedMany.doEmbed"]),aq=new Set(["ai.rerank.doRerank"]),aV=e=>new TextEncoder().encode(e).length,aW=e=>aV(JSON.stringify(e));function az(e,t){if(aV(e)<=t)return e;let n=0,r=e.length,i="";for(;n<=r;){let s=Math.floor((n+r)/2),a=e.slice(0,s);aV(a)<=t?(i=a,n=s+1):r=s-1}return i}function aH(e,t){return"string"==typeof e?t:{...e,text:t}}function aJ(e){var t;return!!e&&"object"==typeof e&&("type"in(t=e)&&"string"==typeof t.type&&"source"in t&&aJ(t.source)||aY(e)||"media_type"in e&&"string"==typeof e.media_type&&"data"in e||"image_url"in e&&"string"==typeof e.image_url&&e.image_url.startsWith("data:")||"type"in e&&("blob"===e.type||"base64"===e.type)||"b64_json"in e||"type"in e&&"result"in e&&"image_generation"===e.type||"uri"in e&&"string"==typeof e.uri&&e.uri.startsWith("data:"))}function aY(e){return"inlineData"in e&&!!e.inlineData&&"object"==typeof e.inlineData&&"data"in e.inlineData&&"string"==typeof e.inlineData.data}function aK(e){return null!==e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}let aX="[Filtered]",aZ=["image_url","data","content","b64_json","result","uri"];function aQ(e){let t={...e};for(let n of(aJ(t.source)&&(t.source=aQ(t.source)),aY(e)&&(t.inlineData={...e.inlineData,data:aX}),aZ))"string"==typeof t[n]&&(t[n]=aX);return t}function a0(e){if(!Array.isArray(e)||0===e.length)return e;let t=function e(t){return t.map(t=>{let n;t&&"object"==typeof t&&(null!==t&&"object"==typeof t&&"content"in t&&Array.isArray(t.content)?n={...t,content:e(t.content)}:"content"in t&&aJ(t.content)&&(n={...t,content:aQ(t.content)}),aK(t)&&(n={...n??t,parts:e(t.parts)}),aJ(n)?n=aQ(n):aJ(t)&&(n=aQ(t)));return n??t})}([e[e.length-1]]),n=t[0];return 2e4>=aW(n)?t:function(e,t){if(!e)return[];if("string"==typeof e){let t=az(e,2e4);return t?[t]:[]}if("object"!=typeof e)return[];if(null!==e&&"object"==typeof e&&"content"in e&&"string"==typeof e.content){let t=2e4-aW({...e,content:""});if(t<=0)return[];let n=az(e.content,t);return[{...e,content:n}]}return aK(e)?function(e,t){let{parts:n}=e,r=n.map(e=>aH(e,"")),i=t-aW({...e,parts:r});if(i<=0)return[];let s=[];for(let e of n){let t="string"==typeof e?e:"text"in e?e.text:"",n=aV(t);if(n<=i)s.push(e),i-=n;else if(0===s.length){let n=az(t,i);n&&s.push(aH(e,n));break}else break}return s.length<=0?[]:[{...e,parts:s}]}(e,2e4):[]}(n,2e4)}function a1(e){return e.includes("messages")?"chat":e.includes("completions")?"text_completion":e.includes("generateContent")?"generate_content":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function a2(e){return`gen_ai.${a1(e)}`}function a4(e,t){return e?`${e}.${t}`:t}function a5(e,t,n,r,i){void 0!==t&&e.setAttributes({[ad]:t}),void 0!==n&&e.setAttributes({[af]:n}),(void 0!==t||void 0!==n||void 0!==r||void 0!==i)&&e.setAttributes({[ah]:(t??0)+(n??0)+(r??0)+(i??0)})}function a3(e){return"string"==typeof e?az(e,2e4):Array.isArray(e)?JSON.stringify(a0(e)):JSON.stringify(e)}function a9(e){if(!Array.isArray(e))return{systemInstructions:void 0,filteredMessages:e};let t=e.findIndex(e=>e&&"object"==typeof e&&"role"in e&&"system"===e.role);if(-1===t)return{systemInstructions:void 0,filteredMessages:e};let n=e[t],r="string"==typeof n.content?n.content:void 0!==n.content?JSON.stringify(n.content):void 0;return r?{systemInstructions:JSON.stringify([{type:"text",content:r}]),filteredMessages:[...e.slice(0,t),...e.slice(t+1)]}:{systemInstructions:void 0,filteredMessages:e}}let a6="operation.name",a8="ai.prompt",a7="ai.prompt.messages",oe="ai.prompt.tools",ot="ai.model.id",on="ai.toolCall.name",or="ai.toolCall.id";function oi(e,t){let n=t.get(e.span_id);n&&e.data&&(n.inputTokens>0&&(e.data[ad]=n.inputTokens),n.outputTokens>0&&(e.data[af]=n.outputTokens),(n.inputTokens>0||n.outputTokens>0)&&(e.data["gen_ai.usage.total_tokens"]=n.inputTokens+n.outputTokens))}function os(e){return e.filter(e=>!!e&&"object"==typeof e&&"role"in e&&"content"in e)}function oa(e,t){e.setAttribute(rr,t)}function oo(e){var t,n;let r,i,{data:s,description:a}=rL(e);!a||(s[on]&&s[or]&&"ai.toolCall"===a?(t=e,n=s,oa(t,"auto.vercelai.otel"),t.setAttribute(rn,"gen_ai.execute_tool"),t.setAttribute(ag,"execute_tool"),oc(n,on,ak),oc(n,or,ax),"string"==typeof(r=n[ax])&&aU.set(r,t),n[aO]||t.setAttribute(aO,"function"),(i=n[ak])&&t.updateName(`execute_tool ${i}`)):(s["ai.operationId"]||a.startsWith("ai."))&&function(e,t,n){oa(e,"auto.vercelai.otel");let r=t.replace("ai.","");e.setAttribute("ai.pipeline.name",r),e.updateName(r);let i=n["ai.telemetry.functionId"];i&&"string"==typeof i&&(e.updateName(`${r} ${i}`),e.setAttribute("gen_ai.function_id",i)),function(e,t){if("string"!=typeof t[a8]||t[am]||t[a7]){if("string"==typeof t[a7])try{let n=JSON.parse(t[a7]);if(Array.isArray(n)){let{systemInstructions:t,filteredMessages:r}=a9(n);t&&e.setAttribute(ay,t);let i=Array.isArray(r)?r.length:0,s=a3(r);e.setAttributes({[a7]:s,[am]:s,[a_]:i})}}catch{}}else{let n=function(e){try{let t=JSON.parse(e);if(t&&"object"==typeof t){let{messages:e}=t,{prompt:n,system:r}=t,i=[];if("string"==typeof r&&i.push({role:"system",content:r}),"string"==typeof e)try{e=JSON.parse(e)}catch{}if(Array.isArray(e))return i.push(...os(e)),i;if(Array.isArray(n))return i.push(...os(n)),i;if("string"==typeof n&&i.push({role:"user",content:n}),i.length>0)return i}}catch{}return[]}(t[a8]);if(n.length){let{systemInstructions:t,filteredMessages:r}=a9(n);t&&e.setAttribute(ay,t);let i=Array.isArray(r)?r.length:0,s=a3(r);e.setAttributes({[a8]:s,[am]:s,[a_]:i})}}}(e,n),n[ot]&&!n[al]&&e.setAttribute(al,n[ot]),e.setAttribute("ai.streaming",t.includes("stream"));let s=function(e){switch(e){case"ai.generateText":case"ai.streamText":case"ai.generateObject":case"ai.streamObject":case"ai.embed":case"ai.embedMany":case"ai.rerank":return aw;case"ai.generateText.doGenerate":return"gen_ai.generate_text";case"ai.streamText.doStream":return"gen_ai.stream_text";case"ai.generateObject.doGenerate":return"gen_ai.generate_object";case"ai.streamObject.doStream":return"gen_ai.stream_object";case"ai.embed.doEmbed":return"gen_ai.embed";case"ai.embedMany.doEmbed":return"gen_ai.embed_many";case"ai.rerank.doRerank":return"gen_ai.rerank";case"ai.toolCall":return"gen_ai.execute_tool";default:if(e.startsWith("ai.stream"))return"ai.run";return}}(t);s&&e.setAttribute(rn,s);let a=n[ot];if(a)switch(t){case"ai.generateText.doGenerate":e.updateName(`generate_text ${a}`);break;case"ai.streamText.doStream":e.updateName(`stream_text ${a}`);break;case"ai.generateObject.doGenerate":e.updateName(`generate_object ${a}`);break;case"ai.streamObject.doStream":e.updateName(`stream_object ${a}`);break;case"ai.embed.doEmbed":e.updateName(`embed ${a}`);break;case"ai.embedMany.doEmbed":e.updateName(`embed_many ${a}`);break;case"ai.rerank.doRerank":e.updateName(`rerank ${a}`)}}(e,a,s))}function ou(e){if("transaction"===e.type&&e.spans){let t=new Map;for(let n of e.spans)(function(e){let{data:t,origin:n}=e;if("auto.vercelai.otel"===n){if(oc(t,"ai.usage.completionTokens",af),oc(t,"ai.usage.promptTokens",ad),oc(t,"ai.usage.cachedInputTokens",aR),oc(t,"ai.usage.inputTokens",ad),oc(t,"ai.usage.outputTokens",af),oc(t,"ai.response.avgOutputTokensPerSecond","ai.response.avgCompletionTokensPerSecond"),"number"==typeof t[ad]&&"number"==typeof t[aR]&&(t[ad]=t[ad]+t[aR]),"number"==typeof t[af]&&"number"==typeof t[ad]&&(t[ah]=t[af]+t[ad]),t[oe]&&Array.isArray(t[oe])&&(t[oe]=JSON.stringify(t[oe].map(e=>{if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}))),t[a6]){var r;let e=(r=t[a6],aF.has(r)?"invoke_agent":aB.has(r)?"generate_content":aG.has(r)?"embeddings":aq.has(r)?"rerank":"ai.toolCall"===r?"execute_tool":r);t[ag]=e,delete t[a6]}for(let e of(oc(t,a7,am),oc(t,"ai.response.text","gen_ai.response.text"),oc(t,"ai.response.toolCalls","gen_ai.response.tool_calls"),oc(t,"ai.response.object","gen_ai.response.object"),oc(t,oe,"gen_ai.request.available_tools"),oc(t,"ai.toolCall.args",aC),oc(t,"ai.toolCall.result",aN),oc(t,"ai.schema","gen_ai.request.schema"),oc(t,ot,at),function(e){let t=e["ai.response.providerMetadata"];if(t)try{let n=JSON.parse(t),r=n.openai??n.azure;if(r&&(ol(e,aR,r.cachedPromptTokens),ol(e,"gen_ai.usage.output_tokens.reasoning",r.reasoningTokens),ol(e,"gen_ai.usage.output_tokens.prediction_accepted",r.acceptedPredictionTokens),ol(e,"gen_ai.usage.output_tokens.prediction_rejected",r.rejectedPredictionTokens),ol(e,"gen_ai.conversation.id",r.responseId)),n.anthropic){let t=n.anthropic.usage?.cache_read_input_tokens??n.anthropic.cacheReadInputTokens;ol(e,aR,t);let r=n.anthropic.usage?.cache_creation_input_tokens??n.anthropic.cacheCreationInputTokens;ol(e,aI,r)}n.bedrock?.usage&&(ol(e,aR,n.bedrock.usage.cacheReadInputTokens),ol(e,aI,n.bedrock.usage.cacheWriteInputTokens)),n.deepseek&&(ol(e,aR,n.deepseek.promptCacheHitTokens),ol(e,"gen_ai.usage.input_tokens.cache_miss",n.deepseek.promptCacheMissTokens))}catch{}}(t),Object.keys(t)))e.startsWith("ai.")&&oc(t,e,`vercel.${e}`)}})(n),function(e,t){let n=e.parent_span_id;if(!n)return;let r=e.data[ad],i=e.data[af];if("number"==typeof r||"number"==typeof i){let e=t.get(n)||{inputTokens:0,outputTokens:0};"number"==typeof r&&(e.inputTokens+=r),"number"==typeof i&&(e.outputTokens+=i),t.set(n,e)}}(n,t);for(let n of e.spans)"gen_ai.invoke_agent"===n.op&&oi(n,t);let n=e.contexts?.trace;n&&"gen_ai.invoke_agent"===n.op&&oi(n,t)}return e}function oc(e,t,n){null!=e[t]&&(e[n]=e[t],delete e[t])}function ol(e,t,n){null!=n&&(e[t]=n)}(C=E||(E={}))[C.NOT_RECORD=0]="NOT_RECORD",C[C.RECORD=1]="RECORD",C[C.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED";var op=ee.instance();let od={[eO]:"opentelemetry","process.runtime.name":"browser",[ex]:"webjs",[eC]:"2.5.1"},of=e=>null!==e&&"object"==typeof e&&"function"==typeof e.then;class oh{_rawAttributes;_asyncAttributesPending=!1;_schemaUrl;_memoizedAttributes;static FromAttributeList(e,t){let n=new oh({},t);return n._rawAttributes=om(e),n._asyncAttributesPending=e.filter(([e,t])=>of(t)).length>0,n}constructor(e,t){const n=e.attributes??{};this._rawAttributes=Object.entries(n).map(([e,t])=>(of(t)&&(this._asyncAttributesPending=!0),[e,t])),this._rawAttributes=om(this._rawAttributes),this._schemaUrl=function(e){if("string"==typeof e||void 0===e)return e;op.warn("Schema URL must be string or undefined, got %s. Schema URL will be ignored.",e)}(t?.schemaUrl)}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let e=0;e<this._rawAttributes.length;e++){let[t,n]=this._rawAttributes[e];this._rawAttributes[e]=[t,of(n)?await n:n]}this._asyncAttributesPending=!1}}get attributes(){if(this.asyncAttributesPending&&op.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;let e={};for(let[t,n]of this._rawAttributes){if(of(n)){op.debug(`Unsettled resource attribute ${t} skipped`);continue}null!=n&&(e[t]??=n)}return this._asyncAttributesPending||(this._memoizedAttributes=e),e}getRawAttributes(){return this._rawAttributes}get schemaUrl(){return this._schemaUrl}merge(e){var t,n;let r,i,s;if(null==e)return this;let a=(t=this,n=e,r=t?.schemaUrl,s=void 0===(i=n?.schemaUrl)||""===i,void 0===r||""===r?i:s||r===i?r:void op.warn('Schema URL merge conflict: old resource has "%s", updating resource has "%s". Resulting resource will have undefined Schema URL.',r,i));return oh.FromAttributeList([...e.getRawAttributes(),...this.getRawAttributes()],a?{schemaUrl:a}:void 0)}}function og(e,t){return oh.FromAttributeList(Object.entries(e),t)}function o_(){return og({"service.name":function(){if(void 0===d)try{let e=globalThis.process.argv0;d=e?`unknown_service:${e}`:"unknown_service"}catch{d="unknown_service"}return d}(),[ex]:od[ex],[eO]:od[eO],[eC]:od[eC]})}function om(e){return e.map(([e,t])=>of(t)?[e,t.catch(t=>{op.debug("promise rejection for resource attribute: %s - %s",e,t)})]:[e,t])}void 0===globalThis.performance&&(globalThis.performance={timeOrigin:0,now:()=>Date.now()});class oy extends iz{constructor(e){!function(e,t,n=[t],r="npm"){let i=(e._metadata=e._metadata||{}).sdk=e._metadata.sdk||{};i.name||(i.name=`sentry.javascript.${t}`,i.packages=n.map(e=>({name:`${r}:@sentry/${e}`,version:tW})),i.version=tW)}(e,"vercel-edge"),e._metadata=e._metadata||{},super({...e,platform:"javascript",runtime:e.runtime||{name:"vercel-edge"},serverName:e.serverName||process.env.SENTRY_NAME})}async flush(e){let t=this.traceProvider;return await t?.forceFlush(),this.getOptions().sendClientReports&&this._flushOutcomes(),super.flush(e)}}let oS=_("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function ov(e){return e.setValue(oS,!0)}function ob(e){return!0===e.getValue(oS)}let oE="baggage";class oT{inject(e,t,n){let r=tL.getBaggage(e);if(!r||ob(e))return;let i=r.getAllEntries().map(([e,t])=>{let n=`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`;return void 0!==t.metadata&&(n+=";"+t.metadata.toString()),n}).filter(e=>e.length<=4096).slice(0,180).reduce((e,t)=>{let n=`${e}${""!==e?",":""}${t}`;return n.length>8192?e:n},"");i.length>0&&n.set(t,oE,i)}extract(e,t,n){let r=n.get(t,oE),i=Array.isArray(r)?r.join(","):r;if(!i)return e;let s={};return 0===i.length||(i.split(",").forEach(e=>{let t=function(e){let t,n,r;if(!e)return;let i=e.indexOf(";"),s=-1===i?e:e.substring(0,i),a=s.indexOf("=");if(a<=0)return;let o=s.substring(0,a).trim(),u=s.substring(a+1).trim();if(o&&u){try{t=decodeURIComponent(o),n=decodeURIComponent(u)}catch{return}if(-1!==i&&i<e.length-1){var c;"string"!=typeof(c=e.substring(i+1))&&(tO.error("Cannot create baggage metadata from unknown type: "+typeof c),c=""),r={__TYPE__:tx,toString:function(){return c}}}return{key:t,value:n,metadata:r}}}(e);if(t){let e={value:t.value};t.metadata&&(e.metadata=t.metadata),s[t.key]=e}}),0===Object.entries(s).length)?e:tL.setBaggage(e,tL.createBaggage(s))}fields(){return[oE]}}function oA(e){let t={};if("object"!=typeof e||null==e)return t;for(let r in e){var n;if(!Object.prototype.hasOwnProperty.call(e,r))continue;if("string"!=typeof(n=r)||""===n){op.warn(`Invalid attribute key: ${r}`);continue}let i=e[r];if(!oI(i)){op.warn(`Invalid attribute value set for key: ${r}`);continue}Array.isArray(i)?t[r]=i.slice():t[r]=i}return t}function oI(e){return null==e||(Array.isArray(e)?function(e){let t;for(let n of e){if(null==n)continue;let e=typeof n;if(e!==t){if(!t&&oR(e)){t=e;continue}return!1}}return!0}(e):oR(typeof e))}function oR(e){switch(e){case"number":case"boolean":case"string":return!0}return!1}function ow(e){try{var t;op.error((t=e,"string"==typeof t?t:JSON.stringify(function(e){let t={},n=e;for(;null!==n;)Object.getOwnPropertyNames(n).forEach(e=>{if(t[e])return;let r=n[e];r&&(t[e]=String(r))}),n=Object.getPrototypeOf(n);return t}(t))))}catch{}}function ok(e){let t=process.env[e];if(null==t||""===t.trim())return;let n=Number(t);return isNaN(n)?void op.warn(`Unknown value ${JSON.stringify(t,null,2)} for ${e}, expected a number, using defaults`):n}let ox="http.method",oO="http.url",oC="http.status_code",oN="exception.message",oP="exception.type",oL="http.request.method",oM="http.response.status_code",oD="url.full",o$=performance;function oj(e){return[Math.trunc(e/1e3),Math.round(e%1e3*1e6)]}function oU(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function oF(e){return oU(e)||"number"==typeof e||e instanceof Date}function oB(e,t){let n=[e[0]+t[0],e[1]+t[1]];return n[1]>=1e9&&(n[1]-=1e9,n[0]+=1),n}let oG="[_0-9a-z-*/]",oq=`[a-z]${oG}{0,255}`,oV=`[a-z0-9]${oG}{0,240}@[a-z]${oG}{0,13}`,oW=RegExp(`^(?:${oq}|${oV})$`),oz=/^[ -~]{0,255}[!-~]$/,oH=/,|=/;class oJ{__init(){this._internalState=new Map}constructor(e){oJ.prototype.__init.call(this),e&&this._parse(e)}set(e,t){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let n=t.trim(),r=n.indexOf("=");if(-1!==r){let i=n.slice(0,r),s=n.slice(r+1,t.length);oW.test(i)&&oz.test(s)&&!oH.test(s)&&e.set(i,s)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new oJ;return e._internalState=new Map(this._internalState),e}}let oY=Function.prototype.toString,oK=oY.call(Object),oX=Object.getPrototypeOf,oZ=Object.prototype,oQ=oZ.hasOwnProperty,o0=Symbol?Symbol.toStringTag:void 0,o1=oZ.toString;function o2(e){var t,n,r;if(null==(t=e)||"object"!=typeof t||"[object Object]"!==(null==(n=e)?void 0===n?"[object Undefined]":"[object Null]":o0&&o0 in Object(n)?function(e){let t=oQ.call(e,o0),n=e[o0],r=!1;try{e[o0]=void 0,r=!0}catch{}let i=o1.call(e);return r&&(t?e[o0]=n:delete e[o0]),i}(n):(r=n,o1.call(r))))return!1;let i=oX(e);if(null===i)return!0;let s=oQ.call(i,"constructor")&&i.constructor;return"function"==typeof s&&s instanceof s&&oY.call(s)===oK}function o4(e){return o3(e)?e.slice():e}function o5(e,t,n){let r=n.get(e[t])||[];for(let n=0,i=r.length;n<i;n++){let i=r[n];if(i.key===t&&i.obj===e)return!0}return!1}function o3(e){return Array.isArray(e)}function o9(e){return"function"==typeof e}function o6(e){return!o8(e)&&!o3(e)&&!o9(e)&&"object"==typeof e}function o8(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}class o7{__init(){this.attributes={}}__init2(){this.links=[]}__init3(){this.events=[]}__init4(){this._droppedAttributesCount=0}__init5(){this._droppedEventsCount=0}__init6(){this._droppedLinksCount=0}__init7(){this.status={code:v.UNSET}}__init8(){this.endTime=[0,0]}__init9(){this._ended=!1}__init10(){this._duration=[-1,-1]}constructor(e){o7.prototype.__init.call(this),o7.prototype.__init2.call(this),o7.prototype.__init3.call(this),o7.prototype.__init4.call(this),o7.prototype.__init5.call(this),o7.prototype.__init6.call(this),o7.prototype.__init7.call(this),o7.prototype.__init8.call(this),o7.prototype.__init9.call(this),o7.prototype.__init10.call(this);const t=Date.now();this._spanContext=e.spanContext,this._performanceStartTime=o$.now(),this._performanceOffset=t-(this._performanceStartTime+o$.timeOrigin),this._startTimeProvided=null!=e.startTime,this._spanLimits=e.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=e.spanProcessor,this.name=e.name,this.parentSpanContext=e.parentSpanContext,this.kind=e.kind,this.links=e.links||[],this.startTime=this._getTime(e.startTime??t),this.resource=e.resource,this.instrumentationScope=e.scope,null!=e.attributes&&this.setAttributes(e.attributes),this._spanProcessor.onStart(this,e.context)}spanContext(){return this._spanContext}setAttribute(e,t){if(null==t||this._isSpanEnded())return this;if(0===e.length)return op.warn(`Invalid attribute key: ${e}`),this;if(!oI(t))return op.warn(`Invalid attribute value set for key: ${e}`),this;let{attributeCountLimit:n}=this._spanLimits;return void 0!==n&&Object.keys(this.attributes).length>=n&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?this._droppedAttributesCount++:this.attributes[e]=this._truncateToSize(t),this}setAttributes(e){for(let[t,n]of Object.entries(e))this.setAttribute(t,n);return this}addEvent(e,t,n){if(this._isSpanEnded())return this;let{eventCountLimit:r}=this._spanLimits;if(0===r)return op.warn("No events allowed."),this._droppedEventsCount++,this;void 0!==r&&this.events.length>=r&&(0===this._droppedEventsCount&&op.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),oF(t)&&(oF(n)||(n=t),t=void 0);let i=oA(t);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this}addLink(e){return this.links.push(e),this}addLinks(e){return this.links.push(...e),this}setStatus(e){return this._isSpanEnded()||(this.status={...e},null!=this.status.message&&"string"!=typeof e.message&&(op.warn(`Dropping invalid status.message of type '${typeof e.message}', expected 'string'`),delete this.status.message)),this}updateName(e){return this._isSpanEnded()||(this.name=e),this}end(e){var t,n;let r,i;this._isSpanEnded()?op.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`):(this.endTime=this._getTime(e),this._duration=(t=this.startTime,r=(n=this.endTime)[0]-t[0],(i=n[1]-t[1])<0&&(r-=1,i+=1e9),[r,i]),this._duration[0]<0&&(op.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&op.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnding&&this._spanProcessor.onEnding(this),this._ended=!0,this._spanProcessor.onEnd(this))}_getTime(e){if("number"==typeof e&&e<=o$.now()){var t;return t=e+this._performanceOffset,oB(oj(o$.timeOrigin),oj("number"==typeof t?t:o$.now()))}if("number"==typeof e)return oj(e);if(e instanceof Date)return oj(e.getTime());if(oU(e))return e;if(this._startTimeProvided)return oj(Date.now());let n=o$.now()-this._performanceStartTime;return oB(this.startTime,oj(n))}isRecording(){return!1===this._ended}recordException(e,t){let n={};"string"==typeof e?n[oN]=e:e&&(e.code?n[oP]=e.code.toString():e.name&&(n[oP]=e.name),e.message&&(n[oN]=e.message),e.stack&&(n["exception.stacktrace"]=e.stack)),n[oP]||n[oN]?this.addEvent("exception",n,t):op.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){let e=Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);op.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,e)}return this._ended}_truncateToLimitUtil(e,t){return e.length<=t?e:e.substring(0,t)}_truncateToSize(e){let t=this._attributeValueLengthLimit;return t<=0?(op.warn(`Attribute value limit must be positive, got ${t}`),e):"string"==typeof e?this._truncateToLimitUtil(e,t):Array.isArray(e)?e.map(e=>"string"==typeof e?this._truncateToLimitUtil(e,t):e):e}}(N=T||(T={}))[N.NOT_RECORD=0]="NOT_RECORD",N[N.RECORD=1]="RECORD",N[N.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED";class ue{shouldSample(){return{decision:T.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}class ut{shouldSample(){return{decision:T.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}class un{constructor(e){this._root=e.root,this._root||(ow(Error("ParentBasedSampler must have a root sampler configured")),this._root=new ut),this._remoteParentSampled=e.remoteParentSampled??new ut,this._remoteParentNotSampled=e.remoteParentNotSampled??new ue,this._localParentSampled=e.localParentSampled??new ut,this._localParentNotSampled=e.localParentNotSampled??new ue}shouldSample(e,t,n,r,i,s){let a=tm.getSpanContext(e);return a&&tu(a)?a.isRemote?a.traceFlags&y.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,r,i,s):this._remoteParentNotSampled.shouldSample(e,t,n,r,i,s):a.traceFlags&y.SAMPLED?this._localParentSampled.shouldSample(e,t,n,r,i,s):this._localParentNotSampled.shouldSample(e,t,n,r,i,s):this._root.shouldSample(e,t,n,r,i,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}class ur{constructor(e=0){this._ratio=this._normalize(e),this._upperBound=Math.floor(0xffffffff*this._ratio)}shouldSample(e,t){return{decision:to(t)&&this._accumulate(t)<this._upperBound?T.RECORD_AND_SAMPLED:T.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let n=0;n<e.length/8;n++){let r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t}}function ui(){return{sampler:us(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:ok("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:ok("OTEL_ATTRIBUTE_COUNT_LIMIT")??128},spanLimits:{attributeValueLengthLimit:ok("OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:ok("OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT")??128,linkCountLimit:ok("OTEL_SPAN_LINK_COUNT_LIMIT")??128,eventCountLimit:ok("OTEL_SPAN_EVENT_COUNT_LIMIT")??128,attributePerEventCountLimit:ok("OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT")??128,attributePerLinkCountLimit:ok("OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT")??128}}}function us(){let e=function(e){let t=process.env[e];if(null!=t&&""!==t.trim())return t}("OTEL_TRACES_SAMPLER")??A.ParentBasedAlwaysOn;switch(e){case A.AlwaysOn:return new ut;case A.AlwaysOff:return new ue;case A.ParentBasedAlwaysOn:return new un({root:new ut});case A.ParentBasedAlwaysOff:return new un({root:new ue});case A.TraceIdRatio:return new ur(ua());case A.ParentBasedTraceIdRatio:return new un({root:new ur(ua())});default:return op.error(`OTEL_TRACES_SAMPLER value "${e}" invalid, defaulting to "${A.ParentBasedAlwaysOn}".`),new un({root:new ut})}}function ua(){let e=ok("OTEL_TRACES_SAMPLER_ARG");return null==e?(op.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1):e<0||e>1?(op.error(`OTEL_TRACES_SAMPLER_ARG=${e} was given, but it is out of range ([0..1]), defaulting to 1.`),1):e}(P=A||(A={})).AlwaysOff="always_off",P.AlwaysOn="always_on",P.ParentBasedAlwaysOff="parentbased_always_off",P.ParentBasedAlwaysOn="parentbased_always_on",P.ParentBasedTraceIdRatio="parentbased_traceidratio",P.TraceIdRatio="traceidratio";let uo=1/0;class uu{constructor(){uu.prototype.__init.call(this),uu.prototype.__init2.call(this)}__init(){this.generateTraceId=ul(16)}__init2(){this.generateSpanId=ul(8)}}let uc=tq.Buffer.allocUnsafe(16);function ul(e){return function(){for(let t=0;t<e/4;t++)uc.writeUInt32BE(0x100000000*Math.random()>>>0,4*t);for(let t=0;t<e;t++)if(uc[t]>0)break;else t===e-1&&(uc[e-1]=1);return uc.toString("hex",0,e)}}class up{constructor(e,t,n,r){const i=function(e){let t={sampler:us()},n=ui(),r=Object.assign({},n,t,e);return r.generalLimits=Object.assign({},n.generalLimits,e.generalLimits||{}),r.spanLimits=Object.assign({},n.spanLimits,e.spanLimits||{}),r}(t);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=t.idGenerator||new uu,this._resource=n,this._spanProcessor=r,this.instrumentationScope=e}startSpan(e,t={},n=ea.active()){let r,i,s;t.root&&(n=tm.deleteSpan(n));let a=tm.getSpan(n);if(ob(n))return op.debug("Instrumentation suppressed, returning Noop Span"),tm.wrapSpanContext(e9);let o=a?.spanContext(),u=this._idGenerator.generateSpanId();o&&tm.isSpanContextValid(o)?(i=o.traceId,s=o.traceState,r=o):i=this._idGenerator.generateTraceId();let c=t.kind??S.INTERNAL,l=(t.links??[]).map(e=>({context:e.context,attributes:oA(e.attributes)})),p=oA(t.attributes),d=this._sampler.shouldSample(n,i,e,c,p,l);s=d.traceState??s;let f={traceId:i,spanId:u,traceFlags:d.decision===E.RECORD_AND_SAMPLED?y.SAMPLED:y.NONE,traceState:s};if(d.decision===E.NOT_RECORD)return op.debug("Recording is off, propagating context in a non-recording span"),tm.wrapSpanContext(f);let h=oA(Object.assign(p,d.attributes));return new o7({resource:this._resource,scope:this.instrumentationScope,context:n,spanContext:f,name:e,kind:c,links:l,parentSpanContext:r,attributes:h,startTime:t.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(e,t,n,r){let i,s,a;if(arguments.length<2)return;2==arguments.length?a=t:3==arguments.length?(i=t,a=n):(i=t,s=n,a=r);let o=s??ea.active(),u=this.startSpan(e,i,o),c=tm.setSpan(o,u);return ea.with(c,a,void 0,u)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}}class ud{constructor(e){this._spanProcessors=e}forceFlush(){let e=[];for(let t of this._spanProcessors)e.push(t.forceFlush());return new Promise(t=>{Promise.all(e).then(()=>{t()}).catch(e=>{ow(e||Error("MultiSpanProcessor: forceFlush failed")),t()})})}onStart(e,t){for(let n of this._spanProcessors)n.onStart(e,t)}onEnding(e){for(let t of this._spanProcessors)t.onEnding&&t.onEnding(e)}onEnd(e){for(let t of this._spanProcessors)t.onEnd(e)}shutdown(){let e=[];for(let t of this._spanProcessors)e.push(t.shutdown());return new Promise((t,n)=>{Promise.all(e).then(()=>{t()},n)})}}(L=I||(I={}))[L.resolved=0]="resolved",L[L.timeout=1]="timeout",L[L.error=2]="error",L[L.unresolved=3]="unresolved";class uf{__init(){this._tracers=new Map}constructor(e={}){uf.prototype.__init.call(this);const t=function(...e){let t=e.shift(),n=new WeakMap;for(;e.length>0;)t=function e(t,n,r=0,i){let s;if(!(r>20)){if(r++,o8(t)||o8(n)||o9(n))s=o4(n);else if(o3(t)){if(s=t.slice(),o3(n))for(let e=0,t=n.length;e<t;e++)s.push(o4(n[e]));else if(o6(n)){let e=Object.keys(n);for(let t=0,r=e.length;t<r;t++){let r=e[t];s[r]=o4(n[r])}}}else if(o6(t))if(o6(n)){var a,o;if(a=t,o=n,!(o2(a)&&o2(o)))return n;s=Object.assign({},t);let u=Object.keys(n);for(let a=0,o=u.length;a<o;a++){let o=u[a],c=n[o];if(o8(c))void 0===c?delete s[o]:s[o]=c;else{let a=s[o];if(o5(t,o,i)||o5(n,o,i))delete s[o];else{if(o6(a)&&o6(c)){let e=i.get(a)||[],r=i.get(c)||[];e.push({obj:t,key:o}),r.push({obj:n,key:o}),i.set(a,e),i.set(c,r)}s[o]=e(s[o],c,r,i)}}}}else s=n;return s}}(t,e.shift(),0,n);return t}({},ui(),function(e){let t=Object.assign({},e.spanLimits);return t.attributeCountLimit=e.spanLimits?.attributeCountLimit??e.generalLimits?.attributeCountLimit??ok("OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT")??ok("OTEL_ATTRIBUTE_COUNT_LIMIT")??128,t.attributeValueLengthLimit=e.spanLimits?.attributeValueLengthLimit??e.generalLimits?.attributeValueLengthLimit??ok("OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT")??ok("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??uo,Object.assign({},e,{spanLimits:t})}(e));this._resource=t.resource??o_(),this._config=Object.assign({},t,{resource:this._resource});const n=[];e.spanProcessors?.length&&n.push(...e.spanProcessors),this._activeSpanProcessor=new ud(n)}getTracer(e,t,n){let r=`${e}@${t||""}:${n?.schemaUrl||""}`;return this._tracers.has(r)||this._tracers.set(r,new up({name:e,version:t,schemaUrl:n?.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(r)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,t=this._activeSpanProcessor._spanProcessors.map(t=>new Promise(n=>{let r,i=setTimeout(()=>{n(Error(`Span processor did not completed within timeout period of ${e} ms`)),r=I.timeout},e);t.forceFlush().then(()=>{clearTimeout(i),r!==I.timeout&&n(r=I.resolved)}).catch(e=>{clearTimeout(i),r=I.error,n(e)})}));return new Promise((e,n)=>{Promise.all(t).then(t=>{let r=t.filter(e=>e!==I.resolved);r.length>0?n(r):e()}).catch(e=>n([e]))})}shutdown(){return this._activeSpanProcessor.shutdown()}}let uh="sentry.parentIsRemote";function ug(e){return"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0}function u_(e){return!!e.attributes&&"object"==typeof e.attributes}let um="sentry-trace",uy="baggage",uS="sentry.dsc",uv="sentry.sampled_not_recording",ub="sentry.url",uE=_("sentry_scopes"),uT=_("sentry_fork_isolation_scope"),uA=_("sentry_fork_set_scope"),uI=_("sentry_fork_set_isolation_scope"),uR="_scopeContext";function uw(e){return e.getValue(uE)}function uk(e,t){return e.setValue(uE,t)}function ux(e){let{traceFlags:t,traceState:n}=e,r=!!n&&"1"===n.get(uv);if(t===y.SAMPLED)return!0;if(r)return!1;let i=n?n.get(uS):void 0,s=i?rp(i):void 0;return s?.sampled==="true"||s?.sampled!=="false"&&void 0}function uO(e,t,n){let r=t[oL]||t[ox];if(r)return function({name:e,kind:t,attributes:n},r){var i,s;let a,o,u,c,l,p,d,f=["http"];switch(t){case S.CLIENT:f.push("client");break;case S.SERVER:f.push("server")}n["sentry.http.prefetch"]&&f.push("prefetch");let{urlPath:h,url:g,query:_,fragment:m,hasRoute:y}=(i=n,s=t,a=i["http.target"],o=i[oO]||i[oD],u=i["http.route"],l=(c="string"==typeof o?sx(o):void 0)?sC(c):void 0,p=c?.search||void 0,d=c?.hash||void 0,"string"==typeof u?{urlPath:u,url:l,query:p,fragment:d,hasRoute:!0}:s===S.SERVER&&"string"==typeof a?{urlPath:sO(a),url:l,query:p,fragment:d,hasRoute:!1}:c?{urlPath:l,url:l,query:p,fragment:d,hasRoute:!1}:"string"==typeof a?{urlPath:sO(a),url:l,query:p,fragment:d,hasRoute:!1}:{urlPath:void 0,url:l,query:p,fragment:d,hasRoute:!1});if(!h)return{...uN(e,n),op:f.join(".")};let v=n["sentry.graphql.operation"],b=`${r} ${h}`,E=v?`${b} (${function(e){if(Array.isArray(e)){let t=e.slice().sort();return t.length<=5?t.join(", "):`${t.slice(0,5).join(", ")}, +${t.length-5}`}return`${e}`}(v)})`:b,T={};g&&(T.url=g),_&&(T["http.query"]=_),m&&(T["http.fragment"]=m);let A=t===S.CLIENT||t===S.SERVER,I=n[rr]||"manual",R=!`${I}`.startsWith("auto"),w="custom"===n[re],k=n[ra],{description:x,source:O}=w||null!=k||!A&&R?uN(e,n):{description:E,source:y||"/"===h?"route":"url"};return{op:f.join("."),description:x,source:O,data:T}}({attributes:t,name:e,kind:n},r);let i=t["db.system.name"]||t["db.system"],s="string"==typeof t[rn]&&t[rn].startsWith("cache.");if(i&&!s)return function({attributes:e,name:t}){let n=e[ra];if("string"==typeof n)return{op:"db",description:n,source:e[re]||"custom"};if("custom"===e[re])return{op:"db",description:t,source:"custom"};let r=e["db.statement"];return{op:"db",description:r?r.toString():t,source:"task"}}({attributes:t,name:e});let a="custom"===t[re]?"custom":"route";if(t["rpc.service"])return{...uN(e,t,"route"),op:"rpc"};if(t["messaging.system"])return{...uN(e,t,a),op:"message"};let o=t["faas.trigger"];return o?{...uN(e,t,a),op:o.toString()}:{op:void 0,description:e,source:"custom"}}function uC(e){let t=u_(e)?e.attributes:{};return uO(e.name?e.name:"<unknown>",t,"number"==typeof e.kind?e.kind:S.INTERNAL)}function uN(e,t,n="custom"){let r=t[re]||n,i=t[ra];return i&&"string"==typeof i?{description:i,source:r}:{description:e,source:r}}function uP(){return tm.getActiveSpan()}let uL="u"<typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function uM({dsc:e,sampled:t}){let n=e?rd(e):void 0,r=new oJ,i=n?r.set(uS,n):r;return!1===t?i.set(uv,"1"):i}let uD=new Set;function u$(e){uD.add(e)}class uj extends oT{constructor(){super(),u$("SentryPropagator"),this._urlMatchesTargetsMap=new iY(100)}inject(e,t,n){if(ob(e)){uL&&t0("[Tracing] Not injecting trace data for url because tracing is suppressed.");return}let r=tm.getSpan(e),i=r&&function(e){let t=rL(e).data,n=t[oO]||t[oD];if("string"==typeof n)return n;let r=e.spanContext().traceState?.get(ub);if(r)return r}(r),{tracePropagationTargets:s,propagateTraceparent:a}=n8()?.getOptions()||{};if(!function(e,t,n){if("string"!=typeof e||!t)return!0;let r=n?.get(e);if(void 0!==r)return tV&&!r&&t0(iK,e),r;let i=nM(e,t);return n?.set(e,i),tV&&!i&&t0(iK,e),i}(i,s,this._urlMatchesTargetsMap)){uL&&t0("[Tracing] Not injecting trace data for url because it does not match tracePropagationTargets:",i);return}let o=function(e){try{let t=e[uy];return Array.isArray(t)?t.join(","):t}catch{return}}(t),u=tL.getBaggage(e)||tL.createBaggage({}),{dynamicSamplingContext:c,traceId:l,spanId:p,sampled:d}=uU(e);if(o){let e=rf(o);e&&Object.entries(e).forEach(([e,t])=>{u=u.setEntry(e,{value:t})})}c&&(u=Object.entries(c).reduce((e,[t,n])=>n?e.setEntry(`${rc}${t}`,{value:n}):e,u)),l&&l!==e3&&(n.set(t,um,rI(l,p,d)),a&&n.set(t,"traceparent",rR(l,p,d))),super.inject(tL.setBaggage(e,u),t,n)}extract(e,t,n){let r=n.get(t,um),i=n.get(t,uy);return uB(uF(e,{sentryTrace:r?Array.isArray(r)?r[0]:r:void 0,baggage:i}))}fields(){return[um,uy,"traceparent"]}}function uU(e,t={}){let n=tm.getSpan(e);if(n?.spanContext().isRemote){let e=n.spanContext();return{dynamicSamplingContext:rH(n),traceId:e.traceId,spanId:void 0,sampled:ux(e)}}if(n){let e=n.spanContext();return{dynamicSamplingContext:rH(n),traceId:e.traceId,spanId:e.spanId,sampled:ux(e)}}let r=t.scope||uw(e)?.scope||n4(),i=t.client||n8(),s=r.getPropagationContext();return{dynamicSamplingContext:i?rz(i,r):void 0,traceId:s.traceId,spanId:s.propagationSpanId,sampled:s.sampled}}function uF(e,{sentryTrace:t,baggage:n}){let{traceId:r,parentSpanId:i,sampled:s,dsc:a}=rA(t,n),o=n8(),u=rp(n);if(!i||o&&!rw(o,u?.org_id))return e;let c=function({spanId:e,traceId:t,sampled:n,dsc:r}){let i=uM({dsc:r,sampled:n});return{traceId:t,spanId:e,isRemote:!0,traceFlags:n?y.SAMPLED:y.NONE,traceState:i}}({traceId:r,spanId:i,sampled:s,dsc:a});return tm.setSpanContext(e,c)}function uB(e){let t=uw(e);return uk(e,{scope:t?t.scope:n4().clone(),isolationScope:t?t.isolationScope:n5()})}function uG(e,t,n){let r=uH(),{name:i,parentSpan:s}=e;return uX(s)(()=>{let s=uY(e.scope,e.forceTransaction),a=e.onlyIfParent&&!tm.getSpan(s)?ov(s):s,o=uJ(e);if(!rg()){let e=ob(a)?a:ov(a);return ea.with(e,()=>r.startActiveSpan(i,o,e,e=>ea.with(s,()=>iX(()=>t(e),()=>{void 0===rL(e).status&&e.setStatus({code:v.ERROR})},n?()=>e.end():void 0))))}return r.startActiveSpan(i,o,a,e=>iX(()=>t(e),()=>{void 0===rL(e).status&&e.setStatus({code:v.ERROR})},n?()=>e.end():void 0))})}function uq(e,t){return uG(e,t,!0)}function uV(e,t){return uG(e,e=>t(e,()=>e.end()),!1)}function uW(e){let t=uH(),{name:n,parentSpan:r}=e;return uX(r)(()=>{let r=uY(e.scope,e.forceTransaction),i=e.onlyIfParent&&!tm.getSpan(r)?ov(r):r,s=uJ(e);return rg()||(i=ob(i)?i:ov(i)),t.startSpan(n,s,i)})}function uz(e,t){let n=e?tm.setSpan(ea.active(),e):tm.deleteSpan(ea.active());return ea.with(n,()=>t(n4()))}function uH(){let e=n8();return e?.tracer||tm.getTracer("@sentry/opentelemetry",tW)}function uJ(e){var t;let{startTime:n,attributes:r,kind:i,op:s,links:a}=e,o="number"==typeof n?(t=n)<0x2540be3ff?1e3*t:t:n;return{attributes:s?{[rn]:s,...r}:r,kind:i,links:a,startTime:o}}function uY(e,t){let n=function(e){if(e){let t=e[uR];if(t)return t}return ea.active()}(e),r=tm.getSpan(n);if(!r||!t)return n;let i=tm.deleteSpan(n),{spanId:s,traceId:a}=r.spanContext(),o=ux(r.spanContext()),u=uM({dsc:rH(rB(r)),sampled:o}),c={traceId:a,spanId:s,isRemote:!0,traceFlags:o?y.SAMPLED:y.NONE,traceState:u};return tm.setSpanContext(i,c)}function uK(e,t){var n;let r;return n=ea.active(),r=uB(uF(n,e)),ea.with(r,t)}function uX(e){return void 0!==e?t=>uz(e,t):e=>e()}function uZ(e){let t=ov(ea.active());return ea.with(t,e)}function uQ({span:e,scope:t,client:n,propagateTraceparent:r}={}){let i=(t&&t[uR])??ea.active();if(e){let{scope:t}=rb(e);i=t&&t[uR]||tm.setSpan(ea.active(),e)}let{traceId:s,spanId:a,sampled:o,dynamicSamplingContext:u}=uU(i,{scope:t,client:n}),c={"sentry-trace":rI(s,a,o),baggage:rd(u)};return r&&(c.traceparent=rR(s,a,o)),c}function u0(e){return!0===e.attributes[uh]?void 0:ug(e)}function u1(e,t){let n=e.get(t.id);return n?.span?n:n&&!n.span?(n.span=t.span,n.parentNode=t.parentNode,n):(e.set(t.id,t),t)}let u2={1:"cancelled",2:"unknown_error",3:"invalid_argument",4:"deadline_exceeded",5:"not_found",6:"already_exists",7:"permission_denied",8:"resource_exhausted",9:"failed_precondition",10:"aborted",11:"out_of_range",12:"unimplemented",13:"internal_error",14:"unavailable",15:"data_loss",16:"unauthenticated"};function u4(e){let t=u_(e)?e.attributes:{},n=e.status?e.status:void 0;if(n){if(n.code===v.OK)return{code:1};else if(n.code===v.ERROR){let e;if(void 0===n.message){let e=u5(t);if(e)return e}return n.message&&(e=n.message,Object.values(u2).includes(e))?{code:2,message:n.message}:{code:2,message:"internal_error"}}}let r=u5(t);return r||(n?.code===v.UNSET?{code:1}:{code:2,message:"unknown_error"})}function u5(e){let t=e[oM]||e[oC],n=e["rpc.grpc.status_code"],r="number"==typeof t?t:"string"==typeof t?parseInt(t):void 0;return"number"==typeof r?r_(r):"string"==typeof n?{code:2,message:u2[n]||"unknown_error"}:void 0}class u3{constructor(e){this._finishedSpanBucketSize=e?.timeout||300,this._finishedSpanBuckets=Array(this._finishedSpanBucketSize).fill(void 0),this._lastCleanupTimestampInS=Math.floor(nC()/1e3),this._spansToBucketEntry=new WeakMap,this._sentSpans=new Map,this._debouncedFlush=function(e,t,n){let r,i,s,a=n?.maxWait?Math.max(n.maxWait,1):0,o=n?.setTimeoutImpl||setTimeout;function u(){return c(),r=e()}function c(){void 0!==i&&clearTimeout(i),void 0!==s&&clearTimeout(s),i=s=void 0}function l(){return i&&clearTimeout(i),i=o(u,1),a&&void 0===s&&(s=o(u,a)),r}return l.cancel=c,l.flush=function(){return void 0!==i||void 0!==s?u():r},l}(this.flush.bind(this),0,{maxWait:100})}export(e){let t=Math.floor(nC()/1e3);if(this._lastCleanupTimestampInS!==t){let e=0;this._finishedSpanBuckets.forEach((n,r)=>{n&&n.timestampInS<=t-this._finishedSpanBucketSize&&(e+=n.spans.size,this._finishedSpanBuckets[r]=void 0)}),e>0&&uL&&t0(`SpanExporter dropped ${e} spans because they were pending for more than ${this._finishedSpanBucketSize} seconds.`),this._lastCleanupTimestampInS=t}let n=t%this._finishedSpanBucketSize,r=this._finishedSpanBuckets[n]||{timestampInS:t,spans:new Set};this._finishedSpanBuckets[n]=r,r.spans.add(e),this._spansToBucketEntry.set(e,r);let i=u0(e);(!i||this._sentSpans.has(i))&&this._debouncedFlush()}flush(){let e=this._finishedSpanBuckets.flatMap(e=>e?Array.from(e.spans):[]);this._flushSentSpanCache();let t=this._maybeSend(e),n=t.size,r=e.length-n;uL&&t0(`SpanExporter exported ${n} spans, ${r} spans are waiting for their parent spans to finish`);let i=nC()+3e5;for(let e of t){this._sentSpans.set(e.spanContext().spanId,i);let t=this._spansToBucketEntry.get(e);t&&t.spans.delete(e)}this._debouncedFlush.cancel()}clear(){this._finishedSpanBuckets=this._finishedSpanBuckets.fill(void 0),this._sentSpans.clear(),this._debouncedFlush.cancel()}_maybeSend(e){let t=function(e){let t=new Map;for(let n of e)!function(e,t){let n=t.spanContext().spanId,r=u0(t);if(!r)return u1(e,{id:n,span:t,children:[]});let i=function(e,t){let n=e.get(t);return n||u1(e,{id:t,children:[]})}(e,r),s=u1(e,{id:n,span:t,parentNode:i,children:[]});i.children.push(s)}(t,n);return Array.from(t,function([e,t]){return t})}(e),n=new Set;for(let e of this._getCompletedRootNodes(t)){let t=e.span;n.add(t);let r=function(e){let{op:t,description:n,data:r,origin:i="manual",source:s}=u9(e),a=rb(e),o=e.attributes[rt],u={[re]:s,[rt]:o,[rn]:t,[rr]:i,...r,...u6(e.attributes)},{links:c}=e,{traceId:l,spanId:p}=e.spanContext(),d={parent_span_id:ug(e),span_id:p,trace_id:l,data:u,origin:i,op:t,status:rD(u4(e)),links:rC(c)},f=u[oM];return{contexts:{trace:d,otel:{resource:e.resource.attributes},..."number"==typeof f?{response:{status_code:f}}:void 0},spans:[],start_timestamp:rN(e.startTime),timestamp:rN(e.endTime),transaction:n,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:a.scope,capturedSpanIsolationScope:a.isolationScope,sampleRate:o,dynamicSamplingContext:rH(e)},...s&&{transaction_info:{source:s}}}}(t);if(e.parentNode&&this._sentSpans.has(e.parentNode.id)){let e=r.contexts?.trace?.data;e&&(e["sentry.parent_span_already_sent"]=!0)}let i=r.spans||[];for(let t of e.children)!function e(t,n,r){let i=t.span;if(i&&r.add(i),!i)return void t.children.forEach(t=>{e(t,n,r)});let s=i.spanContext().spanId,a=i.spanContext().traceId,o=ug(i),{attributes:u,startTime:c,endTime:l,links:p}=i,{op:d,description:f,data:h,origin:g="manual"}=u9(i),_={[rr]:g,[rn]:d,...u6(u),...h},m=u4(i),y={span_id:s,trace_id:a,data:_,description:f,parent_span_id:o,start_timestamp:rN(c),timestamp:rN(l)||void 0,status:rD(m),op:d,origin:g,measurements:iQ(i.events),links:rC(p)};n.push(y),t.children.forEach(t=>{e(t,n,r)})}(t,i,n);r.spans=i.length>1e3?i.sort((e,t)=>e.start_timestamp-t.start_timestamp).slice(0,1e3):i;let s=iQ(t.events);s&&(r.measurements=s),sd(r)}return n}_flushSentSpanCache(){let e=nC();for(let[t,n]of this._sentSpans.entries())n<=e&&this._sentSpans.delete(t)}_nodeIsCompletedRootNodeOrHasSentParent(e){return!!e.span&&(!e.parentNode||this._sentSpans.has(e.parentNode.id))}_getCompletedRootNodes(e){return e.filter(e=>this._nodeIsCompletedRootNodeOrHasSentParent(e))}}function u9(e){var t;let n,r,i,s,a,o,{op:u,source:c,origin:l}=(o=(a=e.attributes)[rr],{origin:o,op:a[rn],source:a[re]}),{op:p,description:d,source:f,data:h}=uC(e);return{op:u||p,description:d,source:c||f,origin:l,data:{...h,...(n=(t=e).attributes,r={},t.kind!==S.INTERNAL&&(r["otel.kind"]=S[t.kind]),(i=n[oC])&&(r[oM]=i),(s=function(e){if(!u_(e))return{};let t=e.attributes[oD]||e.attributes[oO],n={url:t,"http.method":e.attributes[oL]||e.attributes[ox]};!n["http.method"]&&n.url&&(n["http.method"]="GET");try{if("string"==typeof t){let e=sx(t);n.url=sC(e),e.search&&(n["http.query"]=e.search),e.hash&&(n["http.fragment"]=e.hash)}}catch{}return n}(t)).url&&(r.url=s.url),s["http.query"]&&(r["http.query"]=s["http.query"].slice(1)),s["http.fragment"]&&(r["http.fragment"]=s["http.fragment"].slice(1)),r)}}}function u6(e){let t={...e};return delete t[rt],delete t[uh],delete t[ra],t}class u8{constructor(e){u$("SentrySpanProcessor"),this._exporter=new u3(e)}async forceFlush(){this._exporter.flush()}async shutdown(){this._exporter.clear()}onStart(e,t){let n,r,i;n=tm.getSpan(t),r=uw(t),n&&!n.spanContext().isRemote&&rU(n,e),n?.spanContext().isRemote&&e.setAttribute(uh,!0),t===D&&(r={scope:nY(),isolationScope:nK()}),r&&rv(e,r.scope,r.isolationScope),i0(e),i=n8(),i?.emit("spanStart",e)}onEnd(e){let t;i1(e),t=n8(),t?.emit("spanEnd",e),this._exporter.export(e)}}class u7{constructor(e){this._client=e,u$("SentrySampler")}shouldSample(e,t,n,r,i,s){var a;let o,u=this._client.getOptions(),c=(a=e,(o=tm.getSpan(a))&&tu(o.spanContext())?o:void 0),l=c?.spanContext();if(!rg(u))return ce({decision:void 0,context:e,spanAttributes:i});let p=i[ox]||i[oL];if(r===S.CLIENT&&p&&(!c||l?.isRemote))return ce({decision:void 0,context:e,spanAttributes:i});let d=c?function(e,t,n){let r=e.spanContext();if(tu(r)&&r.traceId===t){if(r.isRemote){let t=ux(e.spanContext());return uL&&t0(`[Tracing] Inheriting remote parent's sampled decision for ${n}: ${t}`),t}let t=ux(r);return uL&&t0(`[Tracing] Inheriting parent's sampled decision for ${n}: ${t}`),t}}(c,t,n):void 0;if(!(!c||l?.isRemote))return ce({decision:d?T.RECORD_AND_SAMPLED:T.NOT_RECORD,context:e,spanAttributes:i});let{description:f,data:h,op:g}=uO(n,i,r),_={...h,...i};g&&(_[rn]=g);let m={decision:!0};if(this._client.emit("beforeSampling",{spanAttributes:_,spanName:f,parentSampled:d,parentContext:l},m),!m.decision)return ce({decision:void 0,context:e,spanAttributes:i});let{isolationScope:y}=uw(e)??{},v=l?.traceState?l.traceState.get(uS):void 0,b=v?rp(v):void 0,E=rE(b?.sample_rand)??nO(),[A,I,R]=iJ(u,{name:f,attributes:_,normalizedRequest:y?.getScopeData().sdkProcessingMetadata.normalizedRequest,parentSampled:d,parentSampleRate:rE(b?.sample_rate)},E),w=`${p}`.toUpperCase();return"OPTIONS"===w||"HEAD"===w?(uL&&t0(`[Tracing] Not sampling span because HTTP method is '${w}' for ${n}`),ce({decision:T.NOT_RECORD,context:e,spanAttributes:i,sampleRand:E,downstreamTraceSampleRate:0})):(A||void 0!==d||(uL&&t0("[Tracing] Discarding root span because its trace was not chosen to be sampled."),this._client.recordDroppedEvent("sample_rate","transaction")),{...ce({decision:A?T.RECORD_AND_SAMPLED:T.NOT_RECORD,context:e,spanAttributes:i,sampleRand:E,downstreamTraceSampleRate:R?I:void 0}),attributes:{[rt]:R?I:void 0}})}toString(){return"SentrySampler"}}function ce({decision:e,context:t,spanAttributes:n,sampleRand:r,downstreamTraceSampleRate:i}){var s,a;let o,u,c,l,p=(s=t,a=n,o=tm.getSpan(s),u=o?.spanContext(),c=u?.traceState||new oJ,(l=a[oO]||a[oD])&&"string"==typeof l&&(c=c.set(ub,l)),c);return(void 0!==i&&(p=p.set("sentry.sample_rate",`${i}`)),void 0!==r&&(p=p.set("sentry.sample_rand",`${r}`)),void 0==e)?{decision:T.NOT_RECORD,traceState:p}:e===T.NOT_RECORD?{decision:e,traceState:p.set(uv,"1")}:{decision:e,traceState:p}}let ct="u"<typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,cn=new WeakMap,cr=(e={})=>{let t=void 0===e.breadcrumbs||e.breadcrumbs,n=e.shouldCreateSpanForRequest,r=new iY(100),i=new iY(100),s={};function a(e){let t=n8();if(!t)return!1;let n=t.getOptions();if(void 0===n.tracePropagationTargets)return!0;let r=i.get(e);if(void 0!==r)return r;let s=nM(e,n.tracePropagationTargets);return i.set(e,s),s}function o(e){if(void 0===n)return!0;let t=r.get(e);if(void 0!==t)return t;let i=n(e);return r.set(e,i),i}return{name:"WinterCGFetch",setupOnce(){let e;iD(e="fetch",e=>{var n,r,i,u,c;let l,p,d=n8();if(d&&cn.get(d)){let f;n=e.fetchData.url,l=d?.getDsn(),p=d?.getOptions().tunnel,r=n,i=l,!(!(f=sk(r))||sw(f))&&i&&f.host.includes(i.host)&&/(^|&|\?)sentry_key=/.test(f.search)||(u=n,(c=p)&&sM(u)===sM(c))||(!function(e,t,n,r,i){if(!e.fetchData)return;let{method:s,url:a}=e.fetchData,o=rg()&&t(a);if(e.endTimestamp&&o){var u,c,l;let t,n=e.fetchData.__span;if(!n)return;let s=r[n];s&&(function(e,t){if(t.response){rm(e,t.response.status);let n=t.response?.headers?.get("content-length");if(n){let t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}(s,e),u=s,c=e,t="object"==typeof(l=i)&&null!==l?l.onRequestSpanEnd:void 0,t?.(u,{headers:c.response?.headers,error:c.error}),delete r[n]);return}let{spanOrigin:p="auto.http.browser",propagateTraceparent:d=!1}="object"==typeof i?i:{spanOrigin:i},f=!!rG(),h=o&&f?i7(function(e,t,n){if(e.startsWith("data:")){let r=sN(e);return{name:`${t} ${r}`,attributes:sj(e,void 0,t,n)}}let r=sk(e),i=r?function(e){if(sw(e))return e.pathname;let t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}(r):e;return{name:`${t} ${i}`,attributes:sj(e,r,t,n)}}(a,s,p)):new i2;if(e.fetchData.__span=h.spanContext().spanId,r[h.spanContext().spanId]=h,n(e.fetchData.url)){let t=e.args[0],n={...e.args[1]||{}},r=function(e,t,n,r){var i;let s=sD({span:n,propagateTraceparent:r}),a=s["sentry-trace"],o=s.baggage,u=s.traceparent;if(!a)return;let c=t.headers||(nu(e)?e.headers:void 0);if(!c)return{...s};if(i=c,"u">typeof Headers&&na(i,Headers)){let e=new Headers(c);if(e.get("sentry-trace")||e.set("sentry-trace",a),r&&u&&!e.get("traceparent")&&e.set("traceparent",u),o){let t=e.get("baggage");t?s$(t)||e.set("baggage",`${t},${o}`):e.set("baggage",o)}return e}if(Array.isArray(c)){let e=[...c];c.find(e=>"sentry-trace"===e[0])||e.push(["sentry-trace",a]),r&&u&&!c.find(e=>"traceparent"===e[0])&&e.push(["traceparent",u]);let t=c.find(e=>"baggage"===e[0]&&s$(e[1]));return o&&!t&&e.push(["baggage",o]),e}{let e="sentry-trace"in c?c["sentry-trace"]:void 0,t="traceparent"in c?c.traceparent:void 0,n="baggage"in c?c.baggage:void 0,i=n?Array.isArray(n)?[...n]:[n]:[],s=n&&(Array.isArray(n)?n.find(e=>s$(e)):s$(n));o&&!s&&i.push(o);let l={...c,"sentry-trace":e??a,baggage:i.length>0?i.join(","):void 0};return r&&u&&!t&&(l.traceparent=u),l}}(t,n,rg()&&f?h:void 0,d);r&&(e.args[1]=n,n.headers=r)}let g=n8();if(g){let t={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};g.emit("beforeOutgoingRequestSpan",h,t)}}(e,o,a,s,{spanOrigin:"auto.http.wintercg_fetch"}),t&&function(e){let{startTimestamp:t,endTimestamp:n}=e;if(!n)return;let r={method:e.fetchData.method,url:e.fetchData.url};if(e.error)sU({category:"fetch",data:r,level:"error",type:"http"},{data:e.error,input:e.args,startTimestamp:t,endTimestamp:n});else{let i=e.response;r.request_body_size=e.fetchData.request_body_size,r.response_body_size=e.fetchData.response_body_size,r.status_code=i?.status;let s={input:e.args,response:i,startTimestamp:t,endTimestamp:n},a=function(e){if(void 0!==e)return e>=400&&e<500?"warning":e>=500?"error":void 0}(r.status_code);sU({category:"fetch",data:r,type:"http",level:a},s)}}(e))}}),i$(e,()=>(function(e,t=!1){nc(tz,"fetch",function(t){return function(...n){let r=Error(),{method:i,url:s}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){let[t,n]=e;return{url:sL(t),method:sP(n,"method")?String(n.method).toUpperCase():nu(t)&&sP(t,"method")?String(t.method).toUpperCase():"GET"}}let t=e[0];return{url:sL(t),method:sP(t,"method")?String(t.method).toUpperCase():"GET"}}(n),a={args:n,fetchData:{method:i,url:s},startTimestamp:1e3*nG(),virtualError:r,headers:function(e){let[t,n]=e;try{if("object"==typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if(nu(t))return new Headers(t.headers)}catch{}}(n)};return e||ij("fetch",{...a}),t.apply(tz,n).then(async t=>(e?e(t):ij("fetch",{...a,endTimestamp:1e3*nG(),response:t}),t),e=>{ij("fetch",{...a,endTimestamp:1e3*nG(),error:e}),t7(e)&&void 0===e.stack&&(e.stack=r.stack,nl(e,"framesToPop",1));let t=n8(),n=t?.getOptions().enhanceFetchErrorMessages??"always";if(!1!==n&&e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{let t=new URL(a.fetchData.url).host;"always"===n?e.message=`${e.message} (${t})`:nl(e,"__sentry_fetch_url_host__",t)}catch{}throw e})}})})(void 0,void 0))},setup(e){cn.set(e,!0)}}};class ci{constructor(e=30){this.$=[],this._taskProducers=[],this._bufferSize=e}add(e){return this._taskProducers.length>=this._bufferSize?Promise.reject(ip):(this._taskProducers.push(e),Promise.resolve({}))}drain(e){let t=[...this._taskProducers];return this._taskProducers=[],new Promise(n=>{let r=setTimeout(()=>{e&&e>0&&n(!1)},e);Promise.all(t.map(e=>e().then(null,()=>{}))).then(()=>{clearTimeout(r),n(!0)})})}}function cs(e){return ih(e,function(t){let n={body:t.body,method:"POST",headers:e.headers,...e.fetchOptions};return sn(()=>fetch(e.url,n).then(e=>({statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))},new ci(e.bufferSize))}let ca=["addListener","on","once","prependListener","prependOnceListener"];class co{constructor(){co.prototype.__init.call(this),co.prototype.__init2.call(this)}bind(e,t){return"object"==typeof t&&null!==t&&"on"in t?this._bindEventEmitter(e,t):"function"==typeof t?this._bindFunction(e,t):t}_bindFunction(e,t){let n=this,r=function(...r){return n.with(e,()=>t.apply(this,r))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),r}_bindEventEmitter(e,t){return void 0!==this._getPatchMap(t)||(this._createPatchMap(t),ca.forEach(n=>{void 0!==t[n]&&(t[n]=this._patchAddListener(t,t[n],e))}),"function"==typeof t.removeListener&&(t.removeListener=this._patchRemoveListener(t,t.removeListener)),"function"==typeof t.off&&(t.off=this._patchRemoveListener(t,t.off)),"function"==typeof t.removeAllListeners&&(t.removeAllListeners=this._patchRemoveAllListeners(t,t.removeAllListeners))),t}_patchRemoveListener(e,t){let n=this;return function(r,i){let s=n._getPatchMap(e)?.[r];if(void 0===s)return t.call(this,r,i);let a=s.get(i);return t.call(this,r,a||i)}}_patchRemoveAllListeners(e,t){let n=this;return function(r){let i=n._getPatchMap(e);return void 0!==i&&(0==arguments.length?n._createPatchMap(e):void 0!==i[r]&&delete i[r]),t.apply(this,arguments)}}_patchAddListener(e,t,n){let r=this;return function(i,s){if(r._wrapped)return t.call(this,i,s);let a=r._getPatchMap(e);void 0===a&&(a=r._createPatchMap(e));let o=a[i];void 0===o&&(o=new WeakMap,a[i]=o);let u=r.bind(n,s);o.set(s,u),r._wrapped=!0;try{return t.call(this,i,u)}finally{r._wrapped=!1}}}_createPatchMap(e){let t=Object.create(null);return e[this._kOtListeners]=t,t}_getPatchMap(e){return e[this._kOtListeners]}__init(){this._kOtListeners=Symbol("OtListeners")}__init2(){this._wrapped=!1}}class cu extends co{constructor(){super();const e=tz.AsyncLocalStorage;e?this._asyncLocalStorage=new e:(ct&&t1("Tried to register AsyncLocalStorage async context strategy in a runtime that doesn't support AsyncLocalStorage."),this._asyncLocalStorage={getStore(){},run(e,t,...n){return t.apply(this,n)},disable(){}})}active(){return this._asyncLocalStorage.getStore()??D}with(e,t,n,...r){let i=null==n?t:t.bind(n);return this._asyncLocalStorage.run(e,i,...r)}enable(){return this}disable(){return this._asyncLocalStorage.disable(),this}}let cc=n_([90,(M=void 0,f=/^\s*[-]{4,}$/,h=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/,g=/at (?:async )?(.+?) \(data:(.*?),/,e=>{let t=e.match(g);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};let n=e.match(h);if(n){var r;let e,t,i,s,a,o;if(n[1]){let r=(i=n[1]).lastIndexOf(".");if("."===i[r-1]&&r--,r>0){e=i.slice(0,r),t=i.slice(r+1);let n=e.indexOf(".Module");n>0&&(i=i.slice(n+1),e=e.slice(0,n))}s=void 0}t&&(s=e,a=t),"<anonymous>"===t&&(a=void 0,i=void 0),void 0===i&&(a=a||"?",i=s?`${s}.${a}`:a);let u=(r=n[2],o=r?.startsWith("file://")?r.slice(7):r,o?.match(/\/[A-Z]:/)&&(o=o.slice(1)),o),c="native"===n[5];return u||!n[5]||c||(u=n[5]),{filename:u?decodeURI(u):void 0,module:M?M(u):void 0,function:i,lineno:sF(n[3]),colno:sF(n[4]),in_app:function(e,t=!1){return!(t||e&&!e.startsWith("/")&&!e.match(/^[A-Z]:/)&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&void 0!==e&&!e.includes("node_modules/")}(u||"",c)}}if(e.match(f))return{filename:e}})]);function cl(e){return[sB(),sH(),sX(),{name:"ConversationId",setup(e){e.on("spanStart",e=>{let t=n4().getScopeData(),n=n5().getScopeData(),r=t.conversationId||n.conversationId;r&&e.setAttribute("gen_ai.conversation.id",r)})}},s1(),cr(),s3(),...e.sendDefaultPii?[s7()]:[]]}function cp(e={}){var t,n,r,i;let s,a,o;function u(){let e=uw(ea.active());return e||{scope:nY(),isolationScope:nK()}}function c(){return u().scope}function l(){return u().isolationScope}if(t={withScope:function(e){let t=ea.active();return ea.with(t,()=>e(c()))},withSetScope:function(e,t){let n=e[uR]||ea.active();return ea.with(n.setValue(uA,e),()=>t(e))},withSetIsolationScope:function(e,t){let n=ea.active();return ea.with(n.setValue(uI,e),()=>t(l()))},withIsolationScope:function(e){let t=ea.active();return ea.with(t.setValue(uT,!0),()=>e(l()))},getCurrentScope:c,getIsolationScope:l,startSpan:uq,startSpanManual:uV,startInactiveSpan:uW,getActiveSpan:uP,suppressTracing:uZ,getTraceData:uQ,continueTrace:uK,withActiveSpan:uz},tJ(tH()).acs=t,n4().update(e.initialScope),void 0===e.defaultIntegrations&&(e.defaultIntegrations=cl(e)),void 0===e.dsn&&process.env.SENTRY_DSN&&(e.dsn=process.env.SENTRY_DSN),void 0===e.tracesSampleRate&&process.env.SENTRY_TRACES_SAMPLE_RATE){let t=parseFloat(process.env.SENTRY_TRACES_SAMPLE_RATE);isFinite(t)&&(e.tracesSampleRate=t)}if(void 0===e.release){let t=function(e){if(process.env.SENTRY_RELEASE)return process.env.SENTRY_RELEASE;if(tz.SENTRY_RELEASE?.id)return tz.SENTRY_RELEASE.id;let t=process.env.GITHUB_SHA||process.env.CI_MERGE_REQUEST_SOURCE_BRANCH_SHA||process.env.CI_BUILD_REF||process.env.CI_COMMIT_SHA||process.env.BITBUCKET_COMMIT,n=process.env.APPVEYOR_PULL_REQUEST_HEAD_COMMIT||process.env.APPVEYOR_REPO_COMMIT||process.env.CODEBUILD_RESOLVED_SOURCE_VERSION||process.env.AWS_COMMIT_ID||process.env.BUILD_SOURCEVERSION||process.env.GIT_CLONE_COMMIT_HASH||process.env.BUDDY_EXECUTION_REVISION||process.env.BUILDKITE_COMMIT||process.env.CIRCLE_SHA1||process.env.CIRRUS_CHANGE_IN_REPO||process.env.CF_REVISION||process.env.CM_COMMIT||process.env.CF_PAGES_COMMIT_SHA||process.env.DRONE_COMMIT_SHA||process.env.FC_GIT_COMMIT_SHA||process.env.HEROKU_TEST_RUN_COMMIT_VERSION||process.env.HEROKU_SLUG_COMMIT||process.env.RAILWAY_GIT_COMMIT_SHA||process.env.RENDER_GIT_COMMIT||process.env.SEMAPHORE_GIT_SHA||process.env.TRAVIS_PULL_REQUEST_SHA||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA,r=process.env.CI_COMMIT_ID||process.env.SOURCE_COMMIT||process.env.SOURCE_VERSION||process.env.GIT_COMMIT||process.env.COMMIT_REF||process.env.BUILD_VCS_NUMBER||process.env.CI_COMMIT_SHA;return t||n||r||void 0}();void 0!==t&&(e.release=t)}e.environment=e.environment||process.env.SENTRY_ENVIRONMENT||((s=process.env.VERCEL_ENV)?`vercel-${s}`:void 0)||"production";let p=new oy({...e,stackParser:Array.isArray(n=e.stackParser||cc)?n_(...n):n,integrations:function(e){let t,n,r=e.defaultIntegrations||[],i=e.integrations;if(r.forEach(e=>{e.isDefaultInstance=!0}),Array.isArray(i))t=[...r,...i];else if("function"==typeof i){let e=i(r);t=Array.isArray(e)?e:[e]}else t=r;return n={},t.forEach(e=>{let{name:t}=e,r=n[t];r&&!r.isDefaultInstance&&e.isDefaultInstance||(n[t]=e)}),Object.values(n)}(e),transport:e.transport||cs});return n4().setClient(p),p.init(),e.skipOpenTelemetrySetup||((r=p).getOptions().debug&&(op.disable(),op.setLogger({error:t2,warn:t1,info:t0,debug:t0,verbose:t0},m.DEBUG)),a=new uf({sampler:new u7(r),resource:o_().merge(og({"service.name":"edge","service.namespace":"sentry","service.version":tW})),forceFlushTimeoutMillis:500,spanProcessors:[new u8({timeout:r.getOptions().maxSpanWaitDuration})]}),o=(i=cu,class extends i{constructor(...e){super(...e),u$("SentryContextManager")}with(e,t,n,...r){let i=uw(e),s=i?.scope||n4(),a=i?.isolationScope||n5(),o=!0===e.getValue(uT),u=e.getValue(uA),c=e.getValue(uI),l=u||s.clone(),p=uk(e,{scope:l,isolationScope:c||(o?a.clone():a)}).deleteValue(uT).deleteValue(uA).deleteValue(uI);return nl(l,uR,p),super.with(p,t,n,...r)}getAsyncLocalStorageLookup(){return{asyncLocalStorage:this._asyncLocalStorage,contextSymbol:uE}}}),tm.setGlobalTracerProvider(a),tL.setGlobalPropagator(new uj),ea.setGlobalContextManager(new o),r.traceProvider=a,function(){if(!ct)return;let e=Array.from(uD),t=["SentryContextManager","SentryPropagator"];for(let n of(rg()&&t.push("SentrySpanProcessor"),t))e.includes(n)||t2(`You have to set up the ${n}. Without this, the OpenTelemetry & Sentry integration will not work properly.`);e.includes("SentrySampler")||t1("You have to set up the SentrySampler. Without this, the OpenTelemetry & Sentry integration may still work, but sample rates set for the Sentry SDK will not be respected. If you use a custom sampler, make sure to use `wrapSamplingDecision`.")}()),p.on("createDsc",(e,t)=>{if(!t)return;let n=rL(t).data[re],{description:r}=t.name?uC(t):{description:void 0};if("url"!==n&&r&&(e.transaction=r),rg()){let n=ux(t.spanContext());e.sampled=void 0==n?void 0:String(n)}}),p.on("preprocessEvent",e=>{let t=uP();if(t&&"transaction"!==e.type)return e.contexts={trace:rx(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:rH(rB(t)),...e.sdkProcessingMetadata},e}),p}let cd=()=>({name:"VercelAI",setup(e){e.on("spanStart",oo),e.addEventProcessor(Object.assign(ou,{id:"VercelAiEventProcessor"}))}});e.s(["VercelEdgeClient",()=>oy,"getDefaultIntegrations",()=>cl,"init",()=>cp,"vercelAIIntegration",()=>cd,"winterCGFetchIntegration",()=>cr],657030);var cf=e.i(385855);let ch="next.span_type",cg="sentry.drop_transaction";var c_=e.i(625701);function cm(e,t){if(!e)return{};let n=e instanceof Headers||"object"==typeof e&&"get"in e?(0,c_.winterCGHeadersToDict)(e):e,r=(0,c_.httpHeadersToSpanAttributes)(n,(0,ew.getClient)()?.getOptions().sendDefaultPii??!1);return t&&t.setAttributes(r),r}let cy=eu.GLOBAL_OBJ;var cS=e.i(625625);function cv(){return process.env.NEXT_PHASE===cS.PHASE_PRODUCTION_BUILD}var cb=e.i(395901);let cE=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function cT(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let i=r>=0?e[r]:"/";i&&(t=`${i}/${t}`,n="/"===i.charAt(0))}return t=(function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){let r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;)e.unshift("..");return e})(t.split("/").filter(e=>!!e),!n).join("/"),(n?"/":"")+t||"."}function cA(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function cI(e={}){if(!eE){let e,n;t.tag="sentry_tracingErrorCallback",eE=!0,ef(e="error",t),eh(e,em),ef(n="unhandledrejection",t),eh(n,eS)}function t(){let e=(0,ev.getActiveSpan)(),t=e&&(0,ev.getRootSpan)(e);if(t){let e="internal_error";eo.DEBUG_BUILD&&ec.debug.log(`[Tracing] Root span: ${e} -> Global error occurred`),t.setStatus({code:eb.SPAN_STATUS_ERROR,message:e})}}if(cv())return;!cf.DEBUG_BUILD&&e.debug&&console.warn("[@sentry/nextjs] You have enabled `debug: true`, but Sentry debug logging was removed from your bundle (likely via `withSentryConfig({ disableLogger: true })` / `webpack.treeshake.removeDebugLogging: true`). Set that option to `false` to see Sentry debug output.");let n=cl(e);n.push((({distDirName:e})=>{let t=e.replace(/(\/|\\)$/,""),n=RegExp(`.*${t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}`);return{...((e={})=>{let t=e.root,n=e.prefix||"app:///",r="window"in eu.GLOBAL_OBJ&&!!eu.GLOBAL_OBJ.window,i=e.iteratee||function({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let i=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),s=/^\//.test(r.filename);if(e){if(t){let e=r.filename;0===e.indexOf(t)&&(r.filename=e.replace(t,n))}}else if(i||s){let e,s,a=i?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,o=t?function(e,t){e=cT(e).slice(1),t=cT(t).slice(1);let n=cA(e.split("/")),r=cA(t.split("/")),i=Math.min(n.length,r.length),s=i;for(let e=0;e<i;e++)if(n[e]!==r[e]){s=e;break}let a=[];for(let e=s;e<n.length;e++)a.push("..");return(a=a.concat(r.slice(s))).join("/")}(t,a):(e=a.length>1024?`<truncated>${a.slice(-1024)}`:a,(s=cE.exec(e))?s.slice(1):[])[2]||"";r.filename=`${n}${o}`}return r}}({isBrowser:r,root:t,prefix:n});return{name:"RewriteFrames",processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map(e=>{var t;return{...e,...e.stacktrace&&{stacktrace:{...t=e.stacktrace,frames:t?.frames?.map(e=>i(e))}}}})}}}catch{return e}}(t)),t}}})({iteratee:e=>(e.filename=e.filename?.replace(n,"app:///_next"),e)}),name:"DistDirRewriteFrames"}})({distDirName:".next"}));let r=(0,cb.isCloudflareWaitUntilAvailable)(),i={defaultIntegrations:n,release:"d7075d613c50df672cd040c8feb30d5bf98fe425",...e,...r&&{runtime:{name:"cloudflare"}}};r?eA(i,"nextjs",["nextjs","cloudflare"]):eA(i,"nextjs",["nextjs","vercel-edge"]);let s=cp(i);s?.on("spanStart",e=>{let t=(0,ev.spanToJSON)(e).data,n=(0,ev.getRootSpan)(e),r=e===n;if(!function(e,t){let n=t?.[ch]==="Middleware.execute",r=t?.[eI.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]==="auto.http.otel.node_fetch";if(!n&&!r)return;let i=function(e){let t=cy._sentryRewritesTunnelPath||process.env._sentryRewritesTunnelPath;if(!t)return!1;let n=e["http.target"];return"string"==typeof n&&(n.split("?")[0]||"").startsWith(t)}(t||{}),s=function(e){var t,n,r,i,s,a;let o,u,c;if(!(e.attributes&&"object"==typeof e.attributes))return!1;let{attributes:l}=e,p=l["http.url"]||l["url.full"];if(!p)return!1;return t=p.toString(),n=e4(),o=n?.getDsn(),u=n?.getOptions().tunnel,r=t,i=o,!!(c=function(e,t){let n=0>=e.indexOf("://")&&0!==e.indexOf("//"),r=(void 0)??(n?"thismessage:/":void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;let t=new URL(e,r);if(n)return{isRelative:n,pathname:t.pathname,search:t.search,hash:t.hash};return t}catch{}}(r))&&!("isRelative"in c)&&!!i&&c.host.includes(i.host)&&/(^|&|\?)sentry_key=/.test(c.search)||(s=t,!!(a=u)&&eq(s)===eq(a))}(e);(i||s)&&e.setAttribute(cg,!0)}(e,t),t?.["next.span_type"]!==void 0&&e.setAttribute(eI.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,"auto"),t?.["next.span_type"]==="Middleware.execute"&&(e.setAttribute(eI.SEMANTIC_ATTRIBUTE_SENTRY_OP,"http.server.middleware"),e.setAttribute(eI.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,"url")),t?.[ch]==="BaseServer.handleRequest"&&r){let t=(0,eR.getCapturedScopesOnSpan)(e),n=(t.isolationScope||(0,ew.getIsolationScope)()).clone(),r=t.scope||(0,ew.getCurrentScope)(),i=ea.active().getValue(tG);i&&(i.isolationScope=n),(0,eR.setCapturedScopesOnSpan)(e,r,n)}r&&cm((0,ew.getIsolationScope)().getScopeData().sdkProcessingMetadata?.normalizedRequest?.headers,n)}),s?.on("preprocessEvent",e=>{if("transaction"===e.type&&e.contexts?.trace?.data?.["next.span_type"]==="Middleware.execute"&&e.contexts?.trace?.data?.["next.span_name"]&&e.transaction){let t=e.contexts.trace.data["next.span_name"];if("string"==typeof t){let n=t.match(/^middleware (GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS)/);n?e.transaction=`middleware ${n[1]}`:e.transaction=e.contexts.trace.data["next.span_name"].split(/[?#]/,1)[0]}}!function(e){var t;let n;if("transaction"!==e.type||e.contexts?.trace?.op!=="http.server"||!e.contexts?.trace?.data)return;let r=(0,ew.getClient)();if(!r?.getOptions().sendDefaultPii)return;let i=e.contexts.trace.data,s=i["next.route"]||i["http.route"],a=i["http.target"];if(!s)return;let o=e.sdkProcessingMetadata?.capturedSpanIsolationScope?.getScopeData(),u=o?.sdkProcessingMetadata?.normalizedRequest?.headers,c=(t=a?.toString(),(n=function(e){let t=e?.referer;if(t)try{let e=new URL(t);return ek(e)}catch{return}}(u))||function(e,t,n,r){let i,s=r??((i=e.split("/").filter(e=>e&&!(e.startsWith("(")&&e.endsWith(")")))).length>0?`/${i.join("/")}`:"/"),a=n?.["x-forwarded-proto"],o=n?.["x-forwarded-host"]||n?.host;if(!a||!o)return s;let u=function(e,t){let n=0>=e.indexOf("://")&&0!==e.indexOf("//"),r=(void 0)??(n?"thismessage:/":void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;let t=new URL(e,r);if(n)return{isRelative:n,pathname:t.pathname,search:t.search,hash:t.hash};return t}catch{}}(`${a}://${o}${s}`);return u?ek(u):s}(s,0,u,t));c&&o?.sdkProcessingMetadata&&(o.sdkProcessingMetadata.normalizedRequest=o.sdkProcessingMetadata.normalizedRequest||{},o.sdkProcessingMetadata.normalizedRequest.url=c)}(e)}),s?.on("spanEnd",e=>{e===(0,ev.getRootSpan)(e)&&(0,cb.waitUntil)((0,cb.flushSafelyWithTimeout)())}),(0,ew.getGlobalScope)().addEventProcessor(Object.assign(e=>"transaction"!==e.type?e:e.contexts?.trace?.data?.[cg]?null:e,{id:"NextLowQualityTransactionsFilter"}));try{(0,ew.getGlobalScope)().setTag("turbopack",!0)}catch{}}function cR(e){return e}eu.GLOBAL_OBJ,e.s(["init",()=>cI,"withSentryConfig",()=>cR],187867),e.i(187867),e.i(657030);let cw=(e={})=>{let t=e.levels||tK,n=e.handled??!0;return{name:"CaptureConsole",setup(e){"console"in tz&&s2(({args:r,level:i})=>{var s,a,o;let u,c,l;n8()===e&&t.includes(i)&&(s=r,a=i,o=n,u=s5(a),c=Error(),l={level:s5(a),extra:{arguments:s}},n9(e=>{if(e.addEventProcessor(e=>(e.logger="console",nU(e,{handled:o,type:"auto.core.capture_console"}),e)),"assert"===a){if(!s[0]){let t=`Assertion failed: ${nP(s.slice(1)," ")||"console.assert"}`;e.setExtra("arguments",s.slice(1)),e.captureMessage(t,u,{captureContext:l,syntheticException:c})}return}let t=s.find(e=>e instanceof Error);if(t)return void sl(t,l);let n=nP(s," ");e.captureMessage(n,u,{captureContext:l,syntheticException:c})}))})}}};function ck(e,t={},n=n4()){let{message:r,name:i,email:s,url:a,source:o,associatedEventId:u,tags:c}=e,l={contexts:{feedback:{contact_email:s,name:i,message:r,url:a,source:o,associated_event_id:u}},type:"feedback",level:"info",tags:c},p=n?.getClient()||n8();return p&&p.emit("beforeSendFeedback",l,t),n.captureEvent(l,t)}function cx(e,t,n){var r,i,s;return"util"in tz&&"function"==typeof tz.util.format?tz.util.format(...e):(r=e,i=t,s=n,r.map(e=>nr(e)?String(e):JSON.stringify(nE(e,i,s))).join(" "))}let cO={[rr]:"auto.log.console"},cC=(e={})=>{let t=e.levels||tK;return{name:"ConsoleLogs",setup(e){let{enableLogs:n,normalizeDepth:r=3,normalizeMaxBreadth:i=1e3}=e.getOptions();if(!n){tV&&t1("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}s2(({args:n,level:s})=>{var a;let o,u;if(n8()!==e||!t.includes(s))return;let c=n[0],l=n.slice(1);if("assert"===s){c||r7({level:"error",message:l.length>0?`Assertion failed: ${cx(l,r,i)}`:"Assertion failed",attributes:cO});return}let p="log"===s,d=n.length>1&&"string"==typeof n[0]&&(a=n[0],!/%[sdifocO]/.test(a)),f={...cO,...d?(o={},u=Array(l.length).fill("{}").join(" "),o["sentry.message.template"]=`${c} ${u}`,l.forEach((e,t)=>{o[`sentry.message.parameter.${t}`]=e}),o):{}};r7({level:p?"info":s,message:cx(n,r,i),severityNumber:p?10:void 0,attributes:f})})}}},cN=["trace","debug","info","warn","error","fatal"];function cP(e={}){let t=new Set(e.levels??cN),n=e.client;return{log(e){let{type:r,level:i,message:s,args:a,tag:o,date:u,...c}=e,l=n||n8();if(!l)return;let p=function(e,t){if("verbose"===e)return"debug";if("silent"===e)return"trace";if(e){let t=cL[e];if(t)return t}if("number"==typeof t){let e=cM[t];if(e)return e}return"info"}(r,i);if(!t.has(p))return;let{normalizeDepth:d=3,normalizeMaxBreadth:f=1e3}=l.getOptions(),h=[];s&&h.push(s),a&&a.length>0&&h.push(cx(a,d,f));let g=h.join(" ");c["sentry.origin"]="auto.log.consola",o&&(c["consola.tag"]=o),r&&(c["consola.type"]=r),null!=i&&"number"==typeof i&&(c["consola.level"]=i),r7({level:p,message:g,attributes:c})}}}let cL={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},cM={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"},cD="auto.ai.langchain",c$={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"},cj=(e,t,n)=>{null!=n&&(e[t]=n)},cU=(e,t,n)=>{let r=Number(n);Number.isNaN(r)||(e[t]=r)};function cF(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch{return String(e)}}function cB(e){let t=e.toLowerCase();return c$[t]??t}function cG(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function cq(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function cV(e){return e.map(e=>{let t=e._getType;if("function"==typeof t)return{role:cB(t.call(e)),content:cF(e.content)};if(1===e.lc&&e.kwargs){let t=e.id,n=Array.isArray(t)&&t.length>0?t[t.length-1]:"";return{role:cB("string"==typeof n?cG(n):"user"),content:cF(e.kwargs?.content)}}if(e.type)return{role:cB(String(e.type).toLowerCase()),content:cF(e.content)};if(e.role)return{role:cB(String(e.role)),content:cF(e.content)};let n=e.constructor?.name;return n&&"Object"!==n?{role:cB(cG(n)),content:cF(e.content)}:{role:"user",content:cF(e.content)}})}function cW(e,t,n,r,i){let s,a;return{[ae]:cF(e??"langchain"),[ag]:"chat",[at]:cF(t),[rr]:cD,...(s={},a="kwargs"in n?n.kwargs:void 0,cU(s,ar,r?.temperature??i?.ls_temperature??a?.temperature),cU(s,ai,r?.max_tokens??i?.ls_max_tokens??a?.max_tokens),cU(s,ao,r?.top_p??a?.top_p),cU(s,as,r?.frequency_penalty),cU(s,aa,r?.presence_penalty),r&&"stream"in r&&cj(s,an,!!r.stream),s)}}function cz(e={}){let t=e.recordInputs??!1,n=e.recordOutputs??!1,r=new Map,i=e=>{let t=r.get(e);t?.isRecording()&&(t.end(),r.delete(e))},s={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(e,n,i,s,a,o,u,c){let l,p=cq(o),d=(l=cW(u?.ls_provider,p?.model??u?.ls_model_name??"unknown",e,p,u),t&&Array.isArray(n)&&n.length>0&&(cj(l,a_,n.length),cj(l,am,cF(n.map(e=>({role:"user",content:e}))))),l),f=d[at],h=d[ag];i8({name:`${h} ${f}`,op:"gen_ai.chat",attributes:{...d,[rn]:"gen_ai.chat"}},e=>(r.set(i,e),e))},handleChatModelStart(e,n,i,s,a,o,u,c){let l=function(e,t,n,r,i){let s=cW(i?.ls_provider??e.id?.[2],r?.model??i?.ls_model_name??"unknown",e,r,i);if(n&&Array.isArray(t)&&t.length>0){let{systemInstructions:e,filteredMessages:n}=a9(cV(t.flat()));e&&cj(s,ay,e),cj(s,a_,Array.isArray(n)?n.length:0),cj(s,am,cF(a0(n)))}return s}(e,n,t,cq(o),u),p=l[at],d=l[ag];i8({name:`${d} ${p}`,op:"gen_ai.chat",attributes:{...l,[rn]:"gen_ai.chat"}},e=>(r.set(i,e),e))},handleLLMEnd(e,t,s,a,o){let u=r.get(t);if(u?.isRecording()){let r=function(e,t){if(!e)return;let n={};if(Array.isArray(e.generations)){let i=e.generations.flat().map(e=>e.generationInfo?.finish_reason?e.generationInfo.finish_reason:e.generation_info?.finish_reason?e.generation_info.finish_reason:null).filter(e=>"string"==typeof e);i.length>0&&cj(n,ac,cF(i));var r=e.generations;let s=[];for(let e of r.flat()){let t=e.message?.content;if(Array.isArray(t))for(let e of t)"tool_use"===e.type&&s.push(e)}if(s.length>0&&cj(n,aE,cF(s)),t){let t=e.generations.flat().map(e=>e.text??e.message?.content).filter(e=>"string"==typeof e);t.length>0&&cj(n,aS,cF(t))}}!function(e,t){if(!e)return;let n=e.tokenUsage,r=e.usage;if(n)cU(t,ad,n.promptTokens),cU(t,af,n.completionTokens),cU(t,ah,n.totalTokens);else if(r){cU(t,ad,r.input_tokens),cU(t,af,r.output_tokens);let e=Number(r.input_tokens),n=Number(r.output_tokens),i=(Number.isNaN(e)?0:e)+(Number.isNaN(n)?0:n);i>0&&cU(t,ah,i),void 0!==r.cache_creation_input_tokens&&cU(t,"gen_ai.usage.cache_creation_input_tokens",r.cache_creation_input_tokens),void 0!==r.cache_read_input_tokens&&cU(t,"gen_ai.usage.cache_read_input_tokens",r.cache_read_input_tokens)}}(e.llmOutput,n);let i=e.llmOutput,s=e.generations?.[0]?.[0],a=s?.message,o=i?.model_name??i?.model??a?.response_metadata?.model_name;o&&cj(n,al,o);let u=i?.id??a?.id;u&&cj(n,ap,u);let c=i?.stop_reason??a?.response_metadata?.finish_reason;return c&&cj(n,"gen_ai.response.stop_reason",cF(c)),n}(e,n);r&&u.setAttributes(r),i(t)}},handleLLMError(e,t){let n=r.get(t);n?.isRecording()&&(n.setStatus({code:2,message:"llm_error"}),i(t)),sl(e,{mechanism:{handled:!1,type:`${cD}.llm_error_handler`}})},handleChainStart(e,n,i,s){let a=e.name||"unknown_chain",o={[rr]:"auto.ai.langchain","langchain.chain.name":a};t&&(o["langchain.chain.inputs"]=JSON.stringify(n)),i8({name:`chain ${a}`,op:"gen_ai.invoke_agent",attributes:{...o,[rn]:"gen_ai.invoke_agent"}},e=>(r.set(i,e),e))},handleChainEnd(e,t){let s=r.get(t);s?.isRecording()&&(n&&s.setAttributes({"langchain.chain.outputs":JSON.stringify(e)}),i(t))},handleChainError(e,t){let n=r.get(t);n?.isRecording()&&(n.setStatus({code:2,message:"chain_error"}),i(t)),sl(e,{mechanism:{handled:!1,type:`${cD}.chain_error_handler`}})},handleToolStart(e,n,i,s){let a=e.name||"unknown_tool",o={[rr]:cD,[ak]:a};t&&(o[aC]=n),i8({name:`execute_tool ${a}`,op:"gen_ai.execute_tool",attributes:{...o,[rn]:"gen_ai.execute_tool"}},e=>(r.set(i,e),e))},handleToolEnd(e,t){let s=r.get(t);s?.isRecording()&&(n&&s.setAttributes({[aN]:JSON.stringify(e)}),i(t))},handleToolError(e,t){let n=r.get(t);n?.isRecording()&&(n.setStatus({code:2,message:"tool_error"}),i(t)),sl(e,{mechanism:{handled:!1,type:`${cD}.tool_error_handler`}})},copy:()=>s,toJSON:()=>({lc:1,type:"not_implemented",id:s.lc_id}),toJSONNotImplemented:()=>({lc:1,type:"not_implemented",id:s.lc_id})};return s}let cH=(e={})=>{let{depth:t=3,captureErrorCause:n=!0}=e;return{name:"ExtraErrorData",processEvent(e,r,i){let{maxValueLength:s}=i.getOptions();return function(e,t={},n,r,i){if(!t.originalException||!t7(t.originalException))return e;let s=t.originalException.name||t.originalException.constructor.name,a=function e(t,n,r){try{let i=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(let e of Object.keys(t)){if(-1!==i.indexOf(e))continue;let n=t[e];s[e]=t7(n)||"string"==typeof n?r?nN(`${n}`,r):`${n}`:n}if(n&&void 0!==t.cause&&(t7(t.cause)?s.cause={[t.cause.name||t.cause.constructor.name]:e(t.cause,!1,r)}:s.cause=t.cause),"function"==typeof t.toJSON){let e=t.toJSON();for(let t of Object.keys(e)){let n=e[t];s[t]=t7(n)?n.toString():n}}return s}catch(e){tV&&t2("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r,i);if(a){let t={...e.contexts},r=nE(a,n);return ni(r)&&(nl(r,"__sentry_skip_normalization__",!0),t[s]=r),{...e,contexts:t}}return e}(e,r,t,n,s)}}},cJ="flag.evaluation.",cY=()=>({name:"FeatureFlags",processEvent:(e,t,n)=>{let r,i;return(i=(r=n4().getScopeData().contexts.flags)?r.values:[]).length&&(void 0===e.contexts&&(e.contexts={}),e.contexts.flags={values:[...i]}),e},addFeatureFlag(e,t){!function(e,t,n=100){let r=n4().getScopeData().contexts;r.flags||(r.flags={values:[]}),function(e,t,n,r){if("boolean"!=typeof n)return;if(e.length>r){tV&&t2(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}let i=e.findIndex(e=>e.flag===t);-1!==i&&e.splice(i,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}(r.flags.values,e,t,n)}(e,t),function(e,t,n=10){if("boolean"!=typeof t)return;let r=rG();if(!r)return;let i=rL(r).data;`${cJ}${e}`in i?r.setAttribute(`${cJ}${e}`,t):Object.keys(i).filter(e=>e.startsWith(cJ)).length<n&&r.setAttribute(`${cJ}${e}`,t)}(e,t)}});function cK(e){return Object.entries(e||sD()).map(([e,t])=>`<meta name="${e}" content="${t}"/>`).join("\n")}function cX(e,t,n,r){if(e&&"object"==typeof e&&(!("type"in e)||"string"!=typeof e.type||"error"!==e.type||(r.setStatus({code:2,message:e.error?.type??"internal_error"}),sl(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),0))){if("message_delta"===e.type&&e.usage&&"output_tokens"in e.usage&&"number"==typeof e.usage.output_tokens&&(t.completionTokens=e.usage.output_tokens),e.message){let n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&("number"==typeof n.usage.input_tokens&&(t.promptTokens=n.usage.input_tokens),"number"==typeof n.usage.cache_creation_input_tokens&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),"number"==typeof n.usage.cache_read_input_tokens&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}"content_block_start"===e.type&&"number"==typeof e.index&&e.content_block&&("tool_use"===e.content_block.type||"server_tool_use"===e.content_block.type)&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]});if("content_block_delta"===e.type&&e.delta){if("number"==typeof e.index&&"partial_json"in e.delta&&"string"==typeof e.delta.partial_json){let n=t.activeToolBlocks[e.index];n&&n.inputJsonParts.push(e.delta.partial_json)}n&&"string"==typeof e.delta.text&&t.responseTexts.push(e.delta.text)}!function(e,t){let n;if("content_block_stop"!==e.type||"number"!=typeof e.index)return;let r=t.activeToolBlocks[e.index];if(!r)return;let i=r.inputJsonParts.join("");try{n=i?JSON.parse(i):{}}catch{n={__unparsed:i}}t.toolCalls.push({type:"tool_use",id:r.id,name:r.name,input:n}),delete t.activeToolBlocks[e.index]}(e,t)}}async function*cZ(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(let i of e)cX(i,r,n,t),yield i}finally{r.responseId&&t.setAttributes({[ap]:r.responseId}),r.responseModel&&t.setAttributes({[al]:r.responseModel}),a5(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[ab]:!0}),r.finishReasons.length>0&&t.setAttributes({[ac]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[aS]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[aE]:JSON.stringify(r.toolCalls)}),t.end()}}let cQ=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function c0(e,t){!function(e,t){if(Array.isArray(t)&&0===t.length)return;let{systemInstructions:n,filteredMessages:r}=a9(t);n&&e.setAttributes({[ay]:n});let i=Array.isArray(r)?r.length:1;e.setAttributes({[am]:a3(r),[a_]:i})}(e,function(e){let{system:t,messages:n,input:r}=e,i="string"==typeof t?[{role:"system",content:e.system}]:[],s=Array.isArray(r)?r:null!=r?[r]:void 0,a=Array.isArray(n)?n:null!=n?[n]:[];return[...i,...s??a]}(t)),"prompt"in t&&e.setAttributes({"gen_ai.prompt":JSON.stringify(t.prompt)})}function c1(e,t,n){throw sl(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:2,message:"internal_error"}),t.end()),e}function c2(e,t){let n=!!n8()?.getOptions().sendDefaultPii;return function e(t,n="",r){return new Proxy(t,{get(t,i){let s=t[i],a=a4(n,String(i));return"function"==typeof s&&cQ.includes(a)?new Proxy(s,{apply(e,n,i){let o=function(e,t){let n={[ae]:"anthropic",[ag]:a1(t),[rr]:"auto.ai.anthropic"};if(e.length>0&&"object"==typeof e[0]&&null!==e[0]){let t=e[0];t.tools&&Array.isArray(t.tools)&&(n[av]=JSON.stringify(t.tools)),n[at]=t.model??"unknown","temperature"in t&&(n[ar]=t.temperature),"top_p"in t&&(n[ao]=t.top_p),"stream"in t&&(n[an]=t.stream),"top_k"in t&&(n[au]=t.top_k),"frequency_penalty"in t&&(n[as]=t.frequency_penalty),"max_tokens"in t&&(n[ai]=t.max_tokens)}else"models.retrieve"===t||"models.get"===t?n[at]=e[0]:n[at]="unknown";return n}(i,a),u=o[at]??"unknown",c=a1(a),l="object"==typeof i[0]?i[0]:void 0,p=!!l?.stream,d="messages.stream"===a;if(p||d){let n,u;return n=o[at]??"unknown",u={name:`${c} ${n} stream-response`,op:a2(a),attributes:o},p&&!d?i8(u,async e=>{try{r.recordInputs&&l&&c0(e,l);let n=await s.apply(t,i);return cZ(n,e,r.recordOutputs??!1)}catch(t){return c1(t,e,a)}}):i8(u,n=>{try{var s,o;let a;return r.recordInputs&&l&&c0(n,l),s=e.apply(t,i),o=r.recordOutputs??!1,a={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}},s.on("streamEvent",e=>{cX(e,a,o,n)}),s.on("message",()=>{n.isRecording()&&(a.responseId&&n.setAttributes({[ap]:a.responseId}),a.responseModel&&n.setAttributes({[al]:a.responseModel}),a5(n,a.promptTokens,a.completionTokens,a.cacheCreationInputTokens,a.cacheReadInputTokens),n.setAttributes({[ab]:!0}),a.finishReasons.length>0&&n.setAttributes({[ac]:JSON.stringify(a.finishReasons)}),o&&a.responseTexts.length>0&&n.setAttributes({[aS]:a.responseTexts.join("")}),o&&a.toolCalls.length>0&&n.setAttributes({[aE]:JSON.stringify(a.toolCalls)}),n.end())}),s.on("error",e=>{sl(e,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),n.isRecording()&&(n.setStatus({code:2,message:"stream_error"}),n.end())}),s}catch(e){return c1(e,n,a)}})}return i6({name:`${c} ${u}`,op:a2(a),attributes:o},n=>(r.recordInputs&&l&&c0(n,l),iX(()=>e.apply(t,i),e=>{sl(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:a}}})},()=>{},e=>(function(e,t,n){if(t&&"object"==typeof t){if("type"in t&&"error"===t.type)return void(t.error&&(e.setStatus({code:2,message:t.error.type||"internal_error"}),sl(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}})));n&&function(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[aS]:t.content.map(e=>e.text).filter(e=>!!e).join("")});let n=[];for(let e of t.content)("tool_use"===e.type||"server_tool_use"===e.type)&&n.push(e);n.length>0&&e.setAttributes({[aE]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[aS]:t.completion}),"input_tokens"in t&&e.setAttributes({[aS]:JSON.stringify(t.input_tokens)})}(e,t),"id"in t&&"model"in t&&(e.setAttributes({[ap]:t.id,[al]:t.model}),"created"in t&&"number"==typeof t.created&&e.setAttributes({[aj]:new Date(1e3*t.created).toISOString()}),"created_at"in t&&"number"==typeof t.created_at&&e.setAttributes({[aj]:new Date(1e3*t.created_at).toISOString()}),"usage"in t&&t.usage&&a5(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}})(n,e,r.recordOutputs))))}}):"function"==typeof s?s.bind(t):s&&"object"==typeof s?e(s,a,r):s}})}(e,"",{recordInputs:n,recordOutputs:n,...t})}let c4=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],c5="chats.create";async function*c3(e,t,n){let r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(let i of e)!function(e,t,n,r){if(!(!e||function(e,t){let n=e?.promptFeedback;if(n?.blockReason){let e=n.blockReasonMessage??n.blockReason;return t.setStatus({code:2,message:`Content blocked: ${e}`}),sl(`Content blocked: ${e}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}(e,r))){let r;for(let i of("string"==typeof e.responseId&&(t.responseId=e.responseId),"string"==typeof e.modelVersion&&(t.responseModel=e.modelVersion),(r=e.usageMetadata)&&("number"==typeof r.promptTokenCount&&(t.promptTokens=r.promptTokenCount),"number"==typeof r.candidatesTokenCount&&(t.completionTokens=r.candidatesTokenCount),"number"==typeof r.totalTokenCount&&(t.totalTokens=r.totalTokenCount)),Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls),e.candidates??[]))for(let e of(i?.finishReason&&!t.finishReasons.includes(i.finishReason)&&t.finishReasons.push(i.finishReason),i?.content?.parts??[]))n&&e.text&&t.responseTexts.push(e.text),e.functionCall&&t.toolCalls.push({type:"function",id:e.functionCall.id,name:e.functionCall.name,arguments:e.functionCall.args})}}(i,r,n,t),yield i}finally{let e={[ab]:!0};r.responseId&&(e[ap]=r.responseId),r.responseModel&&(e[al]=r.responseModel),void 0!==r.promptTokens&&(e[ad]=r.promptTokens),void 0!==r.completionTokens&&(e[af]=r.completionTokens),void 0!==r.totalTokens&&(e[ah]=r.totalTokens),r.finishReasons.length&&(e[ac]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(e[aS]=r.responseTexts.join("")),n&&r.toolCalls.length&&(e[aE]=JSON.stringify(r.toolCalls)),t.setAttributes(e),t.end()}}function c9(e,t="user"){return"string"==typeof e?[{role:t,content:e}]:Array.isArray(e)?e.flatMap(e=>c9(e,t)):"object"==typeof e&&e?"role"in e&&"string"==typeof e.role?[e]:"parts"in e?[{...e,role:t}]:[{role:t,content:e}]:[]}function c6(e,t){if("model"in e&&"string"==typeof e.model)return e.model;if(t&&"object"==typeof t){if("model"in t&&"string"==typeof t.model)return t.model;if("modelVersion"in t&&"string"==typeof t.modelVersion)return t.modelVersion}return"unknown"}function c8(e,t){let n=[];if("config"in t&&t.config&&"object"==typeof t.config&&"systemInstruction"in t.config&&t.config.systemInstruction&&n.push(...c9(t.config.systemInstruction,"system")),"history"in t&&n.push(...c9(t.history,"user")),"contents"in t&&n.push(...c9(t.contents,"user")),"message"in t&&n.push(...c9(t.message,"user")),Array.isArray(n)&&n.length){let{systemInstructions:t,filteredMessages:r}=a9(n);t&&e.setAttribute(ay,t);let i=Array.isArray(r)?r.length:0;e.setAttributes({[a_]:i,[am]:JSON.stringify(a0(r))})}}function c7(e,t,n,r){let i=t===c5;return new Proxy(e,{apply(e,s,a){let o=a[0],u=function(e,t,n){let r={[ae]:"google_genai",[ag]:a1(e),[rr]:"auto.ai.google_genai"};if(t){if(r[at]=c6(t,n),"config"in t&&"object"==typeof t.config&&t.config){let e,n=t.config;if(Object.assign(r,(e={},"temperature"in n&&"number"==typeof n.temperature&&(e[ar]=n.temperature),"topP"in n&&"number"==typeof n.topP&&(e[ao]=n.topP),"topK"in n&&"number"==typeof n.topK&&(e[au]=n.topK),"maxOutputTokens"in n&&"number"==typeof n.maxOutputTokens&&(e[ai]=n.maxOutputTokens),"frequencyPenalty"in n&&"number"==typeof n.frequencyPenalty&&(e[as]=n.frequencyPenalty),"presencePenalty"in n&&"number"==typeof n.presencePenalty&&(e[aa]=n.presencePenalty),e)),"tools"in n&&Array.isArray(n.tools)){let e=n.tools.flatMap(e=>e.functionDeclarations);r[av]=JSON.stringify(e)}}}else r[at]=c6({},n);return r}(t,o,n),c=u[at]??"unknown",l=a1(t);return t.includes("Stream")?i8({name:`${l} ${c} stream-response`,op:a2(t),attributes:u},async i=>{try{r.recordInputs&&o&&c8(i,o);let t=await e.apply(n,a);return c3(t,i,!!r.recordOutputs)}catch(e){throw i.setStatus({code:2,message:"internal_error"}),sl(e,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),i.end(),e}}):i6({name:i?`${l} ${c} create`:`${l} ${c}`,op:a2(t),attributes:u},s=>(r.recordInputs&&o&&c8(s,o),iX(()=>e.apply(n,a),e=>{sl(e,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},e=>{i||function(e,t,n){if(t&&"object"==typeof t){if(t.modelVersion&&e.setAttribute(al,t.modelVersion),t.usageMetadata&&"object"==typeof t.usageMetadata){let n=t.usageMetadata;"number"==typeof n.promptTokenCount&&e.setAttributes({[ad]:n.promptTokenCount}),"number"==typeof n.candidatesTokenCount&&e.setAttributes({[af]:n.candidatesTokenCount}),"number"==typeof n.totalTokenCount&&e.setAttributes({[ah]:n.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){let n=t.candidates.map(e=>e.content?.parts&&Array.isArray(e.content.parts)?e.content.parts.map(e=>"string"==typeof e.text?e.text:"").filter(e=>e.length>0).join(""):"").filter(e=>e.length>0);n.length>0&&e.setAttributes({[aS]:n.join("")})}if(n&&t.functionCalls){let n=t.functionCalls;Array.isArray(n)&&n.length>0&&e.setAttributes({[aE]:JSON.stringify(n)})}}}(s,e,r.recordOutputs)})))}})}function le(e,t){let n=!!n8()?.getOptions().sendDefaultPii;return function e(t,n="",r){return new Proxy(t,{get:(t,i,s)=>{let a=Reflect.get(t,i,s),o=a4(n,String(i));if("function"==typeof a&&function(e){if(c4.includes(e))return!0;let t=e.split(".").pop();return c4.includes(t)}(o)){if(o===c5){let n=c7(a,o,t,r);return function(...t){let i=n(...t);return i&&"object"==typeof i?e(i,"chat",r):i}}return c7(a,o,t,r)}return"function"==typeof a?a.bind(t):a&&"object"==typeof a?e(a,o,r):a}})}(e,"",{recordInputs:n,recordOutputs:n,...t})}let lt="auto.ai.langgraph";function ln(e,t){var n,r;return n=e.compile.bind(e),r=t||{},e.compile=new Proxy(n,{apply:(e,t,n)=>i6({op:"gen_ai.create_agent",name:"create_agent",attributes:{[rr]:lt,[rn]:"gen_ai.create_agent",[ag]:"create_agent"}},i=>{try{var s,a,o,u;let c=Reflect.apply(e,t,n),l=n.length>0?n[0]:{};l?.name&&"string"==typeof l.name&&(i.setAttribute(aT,l.name),i.updateName(`create_agent ${l.name}`));let p=c.invoke;return p&&"function"==typeof p&&(s=p.bind(c),a=c,o=l,u=r,c.invoke=new Proxy(s,{apply:(e,t,n)=>i6({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[rr]:lt,[rn]:aw,[ag]:"invoke_agent"}},async r=>{try{let i=o?.name;i&&"string"==typeof i&&(r.setAttribute("gen_ai.pipeline.name",i),r.setAttribute(aT,i),r.updateName(`invoke_agent ${i}`));let s=n.length>1?n[1]:void 0,c=s?.configurable,l=c?.thread_id;l&&"string"==typeof l&&r.setAttribute(aA,l);let p=function(e){if(!e.builder?.nodes?.tools?.runnable?.tools)return null;let t=e.builder?.nodes?.tools?.runnable?.tools;return t&&Array.isArray(t)&&0!==t.length?t.map(e=>({name:e.lc_kwargs?.name,description:e.lc_kwargs?.description,schema:e.lc_kwargs?.schema})):null}(a);p&&r.setAttribute(av,JSON.stringify(p));let d=u.recordInputs,f=u.recordOutputs,h=n.length>0?n[0].messages??[]:[];if(h&&d){let e=cV(h),{systemInstructions:t,filteredMessages:n}=a9(e);t&&r.setAttribute(ay,t);let i=a0(n),s=Array.isArray(n)?n.length:0;r.setAttributes({[am]:JSON.stringify(i),[a_]:s})}let g=await Reflect.apply(e,t,n);return f&&function(e,t,n){let r=n?.messages;if(!r||!Array.isArray(r))return;let i=t?.length??0,s=r.length>i?r.slice(i):[];if(0===s.length)return;let a=function(e){if(!e||0===e.length)return null;let t=[];for(let n of e)if(n&&"object"==typeof n){let e=n.tool_calls;e&&Array.isArray(e)&&t.push(...e)}return t.length>0?t:null}(s);a&&e.setAttribute(aE,JSON.stringify(a));let o=cV(s);e.setAttribute(aS,JSON.stringify(o));let u=0,c=0,l=0;for(let t of s){let n=function(e){let t=0,n=0,r=0;if(e.usage_metadata&&"object"==typeof e.usage_metadata){let i=e.usage_metadata;return"number"==typeof i.input_tokens&&(t=i.input_tokens),"number"==typeof i.output_tokens&&(n=i.output_tokens),"number"==typeof i.total_tokens&&(r=i.total_tokens),{inputTokens:t,outputTokens:n,totalTokens:r}}if(e.response_metadata&&"object"==typeof e.response_metadata){let i=e.response_metadata;if(i.tokenUsage&&"object"==typeof i.tokenUsage){let e=i.tokenUsage;"number"==typeof e.promptTokens&&(t=e.promptTokens),"number"==typeof e.completionTokens&&(n=e.completionTokens),"number"==typeof e.totalTokens&&(r=e.totalTokens)}}return{inputTokens:t,outputTokens:n,totalTokens:r}}(t);u+=n.inputTokens,c+=n.outputTokens,l+=n.totalTokens,function(e,t){if(t.response_metadata&&"object"==typeof t.response_metadata){let n=t.response_metadata;n.model_name&&"string"==typeof n.model_name&&e.setAttribute(al,n.model_name),n.finish_reason&&"string"==typeof n.finish_reason&&e.setAttribute(ac,[n.finish_reason])}}(e,t)}u>0&&e.setAttribute(ad,u),c>0&&e.setAttribute(af,c),l>0&&e.setAttribute(ah,l)}(r,h??null,g),g}catch(e){throw r.setStatus({code:2,message:"internal_error"}),sl(e,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),e}})})),c}catch(e){throw i.setStatus({code:2,message:"internal_error"}),sl(e,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),e}})}),e}let lr=["responses.create","chat.completions.create","embeddings.create","conversations.create"],li=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta","response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"];function ls(e){return e.includes("chat.completions")||e.includes("responses")?aD:e.includes("embeddings")?a$:e.includes("conversations")?aD:e.split(".").pop()||"unknown"}function la(e,t,n,r){void 0!==t&&e.setAttributes({"openai.usage.prompt_tokens":t,[ad]:t}),void 0!==n&&e.setAttributes({"openai.usage.completion_tokens":n,[af]:n}),void 0!==r&&e.setAttributes({[ah]:r})}function lo(e,t,n,r){e.setAttributes({[aP]:t,[ap]:t}),e.setAttributes({[aL]:n,[al]:n}),e.setAttributes({[aM]:new Date(1e3*r).toISOString()})}async function*lu(e,t,n){let r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(let i of e){if(null!==i&&"object"==typeof i&&"object"in i&&"chat.completion.chunk"===i.object){for(let e of(r.responseId=i.id??r.responseId,r.responseModel=i.model??r.responseModel,r.responseTimestamp=i.created??r.responseTimestamp,i.usage&&(r.promptTokens=i.usage.prompt_tokens,r.completionTokens=i.usage.completion_tokens,r.totalTokens=i.usage.total_tokens),i.choices??[]))n&&(e.delta?.content&&r.responseTexts.push(e.delta.content),e.delta?.tool_calls&&function(e,t){for(let n of e){let e=n.index;if(void 0!==e&&n.function)if(e in t.chatCompletionToolCalls){let r=t.chatCompletionToolCalls[e];n.function.arguments&&r?.function&&(r.function.arguments+=n.function.arguments)}else t.chatCompletionToolCalls[e]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}}}}(e.delta.tool_calls,r)),e.finish_reason&&r.finishReasons.push(e.finish_reason)}else null!==i&&"object"==typeof i&&"type"in i&&"string"==typeof i.type&&i.type.startsWith("response.")&&function(e,t,n,r){if(!(e&&"object"==typeof e))return t.eventTypes.push("unknown:non-object");if(e instanceof Error){r.setStatus({code:2,message:"internal_error"}),sl(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if("type"in e){if(!li.includes(e.type))return t.eventTypes.push(e.type);if(n&&("response.output_item.done"===e.type&&"item"in e&&t.responsesApiToolCalls.push(e.item),"response.output_text.delta"===e.type&&"delta"in e&&e.delta))return t.responseTexts.push(e.delta);if("response"in e){let{response:r}=e;t.responseId=r.id??t.responseId,t.responseModel=r.model??t.responseModel,t.responseTimestamp=r.created_at??t.responseTimestamp,r.usage&&(t.promptTokens=r.usage.input_tokens,t.completionTokens=r.usage.output_tokens,t.totalTokens=r.usage.total_tokens),r.status&&t.finishReasons.push(r.status),n&&r.output_text&&t.responseTexts.push(r.output_text)}}}(i,r,n,t);yield i}}finally{lo(t,r.responseId,r.responseModel,r.responseTimestamp),la(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[ab]:!0}),r.finishReasons.length&&t.setAttributes({[ac]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[aS]:r.responseTexts.join("")});let e=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];e.length>0&&t.setAttributes({[aE]:JSON.stringify(e)}),t.end()}}function lc(e,t,n){if(n===a$&&"input"in t){let n=t.input;if(null==n||"string"==typeof n&&0===n.length||Array.isArray(n)&&0===n.length)return;e.setAttribute("gen_ai.embeddings.input","string"==typeof n?n:JSON.stringify(n));return}let r="input"in t?t.input:"messages"in t?t.messages:void 0;if(!r||Array.isArray(r)&&0===r.length)return;let{systemInstructions:i,filteredMessages:s}=a9(r);i&&e.setAttribute(ay,i);let a=a3(s);e.setAttribute(am,a),Array.isArray(s)?e.setAttribute(a_,s.length):e.setAttribute(a_,1)}async function ll(e,t){let n=e.catch(e=>{throw sl(e,{mechanism:{handled:!1,type:"auto.ai.openai"}}),e}),r=await t,i=await n;return i&&"object"==typeof i&&"data"in i?{...i,data:r}:r}function lp(e,t){return ns(e)?new Proxy(e,{get(e,n){let r=n in Promise.prototype||n===Symbol.toStringTag?t:e,i=Reflect.get(r,n);return"withResponse"===n&&"function"==typeof i?function(){return ll(i.call(e),t)}:"function"==typeof i?i.bind(r):i}}):t}function ld(e,t){let n=!!n8()?.getOptions().sendDefaultPii;return function e(t,n="",r){return new Proxy(t,{get(t,i){var s;let a=t[i],o=(s=String(i),n?`${n}.${s}`:s);return"function"==typeof a&&lr.includes(o)?function(...e){let n,i=function(e,t){let n={[ae]:"openai",[ag]:ls(t),[rr]:"auto.ai.openai"};if(e.length>0&&"object"==typeof e[0]&&null!==e[0]){let t,r,i=e[0],s=function(e){let t=[...Array.isArray(e.tools)?e.tools:[],...e.web_search_options&&"object"==typeof e.web_search_options?[{type:"web_search_options",...e.web_search_options}]:[]];if(0!==t.length)try{return JSON.stringify(t)}catch(e){tV&&t2("Failed to serialize OpenAI tools:",e);return}}(i);s&&(n[av]=s),Object.assign(n,(t={[at]:i.model??"unknown"},"temperature"in i&&(t[ar]=i.temperature),"top_p"in i&&(t[ao]=i.top_p),"frequency_penalty"in i&&(t[as]=i.frequency_penalty),"presence_penalty"in i&&(t[aa]=i.presence_penalty),"stream"in i&&(t[an]=i.stream),"encoding_format"in i&&(t["gen_ai.request.encoding_format"]=i.encoding_format),"dimensions"in i&&(t["gen_ai.request.dimensions"]=i.dimensions),(r="conversation"in i&&"string"==typeof i.conversation?i.conversation:"previous_response_id"in i&&"string"==typeof i.previous_response_id?i.previous_response_id:void 0)&&(t[aA]=r),t))}else n[at]="unknown";return n}(e,o),s=i[at]||"unknown",u=ls(o),c=e[0],l=c&&"object"==typeof c&&!0===c.stream,p={name:`${u} ${s}${l?" stream-response":""}`,op:`gen_ai.${ls(o)}`,attributes:i};if(l){let n,i=i8(p,i=>(n=a.apply(t,e),r.recordInputs&&c&&lc(i,c,u),(async()=>{try{let e=await n;return lu(e,i,r.recordOutputs??!1)}catch(e){throw i.setStatus({code:2,message:"internal_error"}),sl(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:o}}}),i.end(),e}})()));return lp(n,i)}let d=i6(p,i=>(n=a.apply(t,e),r.recordInputs&&c&&lc(i,c,u),n.then(e=>(!function(e,t,n){if(t&&"object"==typeof t)if(null!==t&&"object"==typeof t&&"object"in t&&"chat.completion"===t.object){if(lo(e,t.id,t.model,t.created),t.usage&&la(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){let r=t.choices.map(e=>e.finish_reason).filter(e=>null!==e);if(r.length>0&&e.setAttributes({[ac]:JSON.stringify(r)}),n){let n=t.choices.map(e=>e.message?.tool_calls).filter(e=>Array.isArray(e)&&e.length>0).flat();n.length>0&&e.setAttributes({[aE]:JSON.stringify(n)})}}if(n&&t.choices?.length){let n=t.choices.map(e=>e.message?.content||"");e.setAttributes({[aS]:JSON.stringify(n)})}}else if(null!==t&&"object"==typeof t&&"object"in t&&"response"===t.object){if(lo(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[ac]:JSON.stringify([t.status])}),t.usage&&la(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n&&Array.isArray(t.output)&&t.output.length>0){let n=t.output.filter(e=>"object"==typeof e&&null!==e&&"function_call"===e.type);n.length>0&&e.setAttributes({[aE]:JSON.stringify(n)})}n&&t.output_text&&e.setAttributes({[aS]:t.output_text})}else null!==t&&"object"==typeof t&&"object"in t&&"list"===t.object&&"string"==typeof t.model&&t.model.toLowerCase().includes("embedding")?(e.setAttributes({[aL]:t.model,[al]:t.model}),t.usage&&la(e,t.usage.prompt_tokens,void 0,t.usage.total_tokens)):null!==t&&"object"==typeof t&&"object"in t&&"conversation"===t.object&&function(e,t){let{id:n,created_at:r}=t;e.setAttributes({[aP]:n,[ap]:n,[aA]:n}),r&&e.setAttributes({[aM]:new Date(1e3*r).toISOString()})}(e,t)}(i,e,r.recordOutputs),e),e=>{throw sl(e,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:o}}}),e})));return lp(n,d)}:"function"==typeof a?a.bind(t):a&&"object"==typeof a?e(a,o,r):a}})}(e,"",{recordInputs:n,recordOutputs:n,...t})}let lf=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],lh=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],lg={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},l_=["select","insert","upsert","update","delete"];function lm(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function ly(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function lS(e,t=!1){return new Proxy(e,{apply:(n,r,i)=>i6({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[rr]:"auto.db.supabase",[rn]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},e=>Reflect.apply(n,r,i).then(t=>(t&&"object"==typeof t&&"error"in t&&t.error?(e.setStatus({code:2}),sl(t.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):e.setStatus({code:1}),e.end(),t)).catch(t=>{throw e.setStatus({code:2}),e.end(),sl(t,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),t}).then(...i))})}let lv=e=>{var t;if(!e){tV&&t1("Supabase integration was not installed because no Supabase client was provided.");return}ly((t=e.constructor===Function?e:e.constructor).prototype.from)||(t.prototype.from=new Proxy(t.prototype.from,{apply(e,t,n){let r=Reflect.apply(e,t,n);return function(e){for(let t of l_)ly(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(e,n,r){let i=Reflect.apply(e,n,r),s=i.constructor;return tV&&t0(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),ly(s.prototype.then)||(s.prototype.then=new Proxy(s.prototype.then,{apply(e,t,n){let r=function(e,t={}){switch(e){case"GET":return"select";case"POST":if(t.Prefer?.includes("resolution="))return"upsert";return"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}(t.method,t.headers);if(!l_.includes(r)||!t?.url?.pathname||"string"!=typeof t.url.pathname)return Reflect.apply(e,t,n);let i=t.url.pathname.split("/"),s=i.length>0?i[i.length-1]:"",a=[];for(let[e,n]of t.url.searchParams.entries())a.push(function(e,t){let n;if(""===t||"*"===t)return"select(*)";if("select"===e)return`select(${t})`;if("or"===e||e.endsWith(".or"))return`${e}${t}`;let[r,...i]=t.split(".");return n=r?.startsWith("fts")?"textSearch":r?.startsWith("plfts")?"textSearch[plain]":r?.startsWith("phfts")?"textSearch[phrase]":r?.startsWith("wfts")?"textSearch[websearch]":r&&lg[r]||"filter",`${n}(${e}, ${i.join(".")})`}(e,n));let o=Object.create(null);if(ni(t.body))for(let[e,n]of Object.entries(t.body))o[e]=n;let u=`${"select"===r?"":`${r}${o?"(...) ":""}`}${a.join(" ")} from(${s})`,c={"db.table":s,"db.schema":t.schema,"db.url":t.url.origin,"db.sdk":t.headers["X-Client-Info"],"db.system":"postgresql","db.operation":r,[rr]:"auto.db.supabase",[rn]:"db"};return a.length&&(c["db.query"]=a),Object.keys(o).length&&(c["db.body"]=o),i6({name:u,attributes:c},i=>Reflect.apply(e,t,[]).then(e=>{if(i&&(e&&"object"==typeof e&&"status"in e&&rm(i,e.status||500),i.end()),e.error){let t=Error(e.error.message);e.error.code&&(t.code=e.error.code),e.error.details&&(t.details=e.error.details);let n={};a.length&&(n.query=a),Object.keys(o).length&&(n.body=o),sl(t,e=>(e.addEventProcessor(e=>(nU(e,{handled:!1,type:"auto.db.supabase.postgres"}),e)),e.setContext("supabase",n),e))}let t={type:"supabase",category:`db.${r}`,message:u},n={};return a.length&&(n.query=a),Object.keys(o).length&&(n.body=o),Object.keys(n).length&&(t.data=n),sU(t),e},e=>{throw i&&(rm(i,500),i.end()),e}).then(...n))}}),lm(s.prototype.then)),i}}),lm(e.prototype[t]))}(r.constructor),r}}),lm(t.prototype.from));let n=e.auth;if(!(!n||ly(e.auth))){for(let t of lf){let r=n[t];r&&"function"==typeof e.auth[t]&&(e.auth[t]=lS(r))}for(let t of lh){let r=n.admin[t];r&&"function"==typeof e.auth.admin[t]&&(e.auth.admin[t]=lS(r,!0))}lm(e.auth)}},lb=e=>{let t;return t=e.supabaseClient,{setupOnce(){lv(t)},name:"Supabase"}};function lE(e,t,n,r,i){r7({level:e,message:t,attributes:n,severityNumber:i},r)}function lT(e,t,{scope:n}={}){lE("trace",e,t,n)}function lA(e,t,{scope:n}={}){lE("debug",e,t,n)}function lI(e,t,{scope:n}={}){lE("info",e,t,n)}function lR(e,t,{scope:n}={}){lE("warn",e,t,n)}function lw(e,t,{scope:n}={}){lE("error",e,t,n)}function lk(e,t,{scope:n}={}){lE("fatal",e,t,n)}e.s(["debug",()=>lA,"error",()=>lw,"fatal",()=>lk,"info",()=>lI,"trace",()=>lT,"warn",()=>lR],30713),e.i(30713);let lx=function(e,...t){let n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n};e.s(["debug",()=>lA,"error",()=>lw,"fatal",()=>lk,"fmt",()=>lx,"info",()=>lI,"trace",()=>lT,"warn",()=>lR],892635);var lO=e.i(892635),lO=lO;function lC(e,t,n,r){!function(e,t){let n=t?.scope??n4(),r=t?.captureSerializedMetric??ii,i=n?.getClient()??n8();if(!i){tV&&t1("No client available to capture metric.");return}let{_experiments:s,enableMetrics:a,beforeSendMetric:o}=i.getOptions();if(!(a??s?.enableMetrics??!0)){tV&&t1("metrics option not enabled, metric will not be captured.");return}let{user:u,attributes:c}=r5(n5(),n),l=function(e,t,n){let{release:r,environment:i}=t.getOptions(),s={...e.attributes};ir(s,"user.id",n.id,!1),ir(s,"user.email",n.email,!1),ir(s,"user.name",n.username,!1),ir(s,"sentry.release",r),ir(s,"sentry.environment",i);let{name:a,version:o}=t.getSdkMetadata()?.sdk??{};ir(s,"sentry.sdk.name",a),ir(s,"sentry.sdk.version",o);let u=t.getIntegrationByName("Replay"),c=u?.getReplayId(!0);return ir(s,"sentry.replay_id",c),c&&u?.getRecordingMode()==="buffer"&&ir(s,"sentry._internal.replay_is_buffering",!0),{...e,attributes:s}}(e,i,u);i.emit("processMetric",l);let p=o||s?.beforeSendMetric,d=p?p(l):l;if(!d){tV&&t0("`beforeSendMetric` returned `null`, will not send metric.");return}let f=function(e,t,n,r){let[,i]=r3(t,n),s=n[nz],a=s?s.spanContext().traceId:i?.trace_id,o=s?s.spanContext().spanId:void 0;return{timestamp:nG(),trace_id:a??"",span_id:o,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:{...r1(r),...r1(e.attributes,"skip-undefined")}}}(d,i,n,c);tV&&t0("[Metric]",f),r(i,f),i.emit("afterCaptureMetric",d)}({type:e,name:t,value:n,unit:r?.unit,attributes:r?.attributes},{scope:r?.scope})}function lN(e,t=1,n){lC("counter",e,t,n)}function lP(e,t,n){lC("gauge",e,t,n)}function lL(e,t,n){lC("distribution",e,t,n)}e.s(["count",()=>lN,"distribution",()=>lL,"gauge",()=>lP],768051);var lM=e.i(768051),lM=lM;let lD=new Map,l$=new Set,lj=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",e=>{nA(e,(e,t)=>{if("event"===t){let t=Array.isArray(e)?e[1]:void 0;t&&(t.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{delete e.module_metadata})}),e[1]=t)}})}),e.on("applyFrameMetadata",t=>{var n;t.type||(n=e.getOptions().stackParser,t.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{if(!e.filename||e.module_metadata)return;let t=function(e,t){if(tz._sentryModuleMetadata)for(let t of Object.keys(tz._sentryModuleMetadata)){let n=tz._sentryModuleMetadata[t];if(!l$.has(t)){for(let r of(l$.add(t),e(t).reverse()))if(r.filename){lD.set(r.filename,n);break}}}return lD.get(t)}(n,e.filename);t&&(e.module_metadata=t)})}))})}}),lU=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function lF(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let i=r>=0?e[r]:"/";i&&(t=`${i}/${t}`,n="/"===i.charAt(0))}return t=(function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){let r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;)e.unshift("..");return e})(t.split("/").filter(e=>!!e),!n).join("/"),(n?"/":"")+t||"."}function lB(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}let lG=(e={})=>{let t=e.root,n=e.prefix||"app:///",r="window"in tz&&!!tz.window,i=e.iteratee||function({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let i=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),s=/^\//.test(r.filename);if(e){if(t){let e=r.filename;0===e.indexOf(t)&&(r.filename=e.replace(t,n))}}else if(i||s){let e,s,a=i?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,o=t?function(e,t){e=lF(e).slice(1),t=lF(t).slice(1);let n=lB(e.split("/")),r=lB(t.split("/")),i=Math.min(n.length,r.length),s=i;for(let e=0;e<i;e++)if(n[e]!==r[e]){s=e;break}let a=[];for(let e=s;e<n.length;e++)a.push("..");return(a=a.concat(r.slice(s))).join("/")}(t,a):(e=a.length>1024?`<truncated>${a.slice(-1024)}`:a,(s=lU.exec(e))?s.slice(1):[])[2]||"";r.filename=`${n}${o}`}return r}}({isBrowser:r,root:t,prefix:n});return{name:"RewriteFrames",processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map(e=>{var t;return{...e,...e.stacktrace&&{stacktrace:{...t=e.stacktrace,frames:t?.frames?.map(e=>i(e))}}}})}}}catch{return e}}(t)),t}}};function lq(e){n4().setClient(e)}let lV={mechanism:{handled:!1,type:"auto.rpc.trpc.middleware"}};function lW(e={}){return async function(t){let{path:n,type:r,next:i,rawInput:s,getRawInput:a}=t,o=n8(),u=o?.getOptions(),c={procedure_path:n,procedure_type:r};if(nl(c,"__sentry_override_normalization_depth__",1+(u?.normalizeDepth??5)),(void 0!==e.attachRpcInput?e.attachRpcInput:u?.sendDefaultPii)&&(void 0!==s&&(c.input=nE(s)),void 0!==a&&"function"==typeof a))try{let e=await a();c.input=nE(e)}catch{}return n6(t=>(t.setContext("trpc",c),i8({name:`trpc/${n}`,op:"rpc.server",attributes:{[re]:"route",[rr]:"auto.rpc.trpc"},forceTransaction:!!e.forceTransaction},async e=>{try{let t=await i();return"object"==typeof t&&null!==t&&"ok"in t&&!t.ok&&"error"in t&&sl(t.error,lV),e.end(),t}catch(t){throw sl(t,lV),e.end(),t}})))}}function lz(e,t,n){try{if(!n8())return;let r=rG();r?.isRecording()&&r.setStatus({code:2,message:"internal_error"}),sl(e,{mechanism:{type:"auto.ai.mcp_server",handled:!1,data:{error_type:t||"handler_execution",...n}}})}catch{}}function lH(e,t){nc(e,t,e=>function(n,...r){var i,s,a;let o=r[r.length-1];if("function"!=typeof o)return e.call(this,n,...r);let u=(i=o,s=t,a=n,function(...e){try{return lJ.call(this,i,s,a,e)}catch(t){return tV&&t1("MCP handler wrapping failed:",t),i.apply(this,e)}});return e.call(this,n,...r.slice(0,-1),u)})}function lJ(e,t,n,r){try{let i=e.apply(this,r);if(i&&"object"==typeof i&&"function"==typeof i.then)return Promise.resolve(i).catch(e=>{throw lY(e,t,n),e});return i}catch(e){throw lY(e,t,n),e}}function lY(e,t,n){try{let r={};"tool"===t?(r.tool_name=n,"ProtocolValidationError"===e.name||e.message.includes("validation")||e.message.includes("protocol")?lz(e,"validation",r):"ServerTimeoutError"===e.name||e.message.includes("timed out")||e.message.includes("timeout")?lz(e,"timeout",r):lz(e,"tool_execution",r)):"resource"===t?(r.resource_uri=n,lz(e,"resource_execution",r)):"prompt"===t&&(r.prompt_name=n,lz(e,"prompt_execution",r))}catch(e){}}let lK="mcp.method.name",lX="mcp.server.name",lZ="mcp.server.title",lQ="mcp.server.version",l0="mcp.protocol.version",l1="mcp.resource.uri",l2="mcp.request.argument",l4="client.address",l5="client.port",l3="mcp.server",l9="auto.mcp.notification";function l6(e){return"object"==typeof e&&null!==e&&"jsonrpc"in e&&"2.0"===e.jsonrpc&&"method"in e&&!("id"in e)}function l8(e){return null!=e&&"object"==typeof e}let l7=new Map,pe=new WeakMap;function pt(e){let t=e.sessionId;return t?l7.get(t):pe.get(e)}function pn(e,t){let n=e.sessionId;n?l7.set(n,t):pe.set(e,t)}function pr(e){let t={};return l8(e)&&("string"==typeof e.name&&(t.name=e.name),"string"==typeof e.title&&(t.title=e.title),"string"==typeof e.version&&(t.version=e.version)),t}function pi(e){let t={};return l8(e)&&("string"==typeof e.protocolVersion&&(t.protocolVersion=e.protocolVersion),e.serverInfo&&(t.serverInfo=pr(e.serverInfo))),t}function ps(e,t){var n;let r,i,s,a,o=e&&"sessionId"in e?e.sessionId:void 0,u=t?{address:t?.requestInfo?.remoteAddress||t?.clientAddress||t?.request?.ip||t?.request?.connection?.remoteAddress,port:t?.requestInfo?.remotePort||t?.clientPort||t?.request?.connection?.remotePort}:{},{mcpTransport:c,networkTransport:l}=function(e){if(!e?.constructor)return{mcpTransport:"unknown",networkTransport:"unknown"};let t="string"==typeof e.constructor?.name?e.constructor.name:"unknown",n="unknown",r=t.toLowerCase();return r.includes("stdio")?n="pipe":(r.includes("http")||r.includes("sse"))&&(n="tcp"),{mcpTransport:t,networkTransport:n}}(e),p=(s=pt(e)?.clientInfo,a={},s?.name&&(a["mcp.client.name"]=s.name),s?.title&&(a["mcp.client.title"]=s.title),s?.version&&(a["mcp.client.version"]=s.version),a),d=(n=e,r=pt(n)?.serverInfo,i={},r?.name&&(i[lX]=r.name),r?.title&&(i[lZ]=r.title),r?.version&&(i[lQ]=r.version),i),f=pt(e)?.protocolVersion;return{...o&&{"mcp.session.id":o},...u.address&&{[l4]:u.address},...u.port&&{[l5]:u.port},"mcp.transport":c,"network.transport":l,"network.protocol.version":"2.0",...f&&{[l0]:f},...p,...d}}let pa=new Map,po=new WeakMap;function pu(e){let t=e.sessionId;if(t){let e=pa.get(t);return e||(e=new Map,pa.set(t,e)),e}let n=po.get(e);return n||(n=new Map,po.set(e,n)),n}let pc={"tools/call":{targetField:"name",targetAttribute:"mcp.tool.name",captureArguments:!0,argumentsField:"arguments"},"resources/read":{targetField:"uri",targetAttribute:l1,captureUri:!0},"resources/subscribe":{targetField:"uri",targetAttribute:l1},"resources/unsubscribe":{targetField:"uri",targetAttribute:l1},"prompts/get":{targetField:"name",targetAttribute:"mcp.prompt.name",captureName:!0,captureArguments:!0,argumentsField:"arguments"}};function pl(e,t){let n=pc[e];if(!n)return{attributes:{}};let r=n.targetField&&"string"==typeof t?.[n.targetField]?t[n.targetField]:void 0;return{target:r,attributes:r&&n.targetAttribute?{[n.targetAttribute]:r}:{}}}function pp(e,t,n,r){if("request"===e){let e=pl(t.method,n||{});return{...void 0!==t.id&&{"mcp.request.id":String(t.id)},...e.attributes,...r?function(e,t){let n={},r=pc[e];if(!r)return n;if(r.captureArguments&&r.argumentsField&&t?.[r.argumentsField]){let e=t[r.argumentsField];if("object"==typeof e&&null!==e)for(let[t,r]of Object.entries(e))n[`${l2}.${t.toLowerCase()}`]=JSON.stringify(r)}return r.captureUri&&t?.uri&&(n[`${l2}.uri`]=JSON.stringify(t.uri)),r.captureName&&t?.name&&(n[`${l2}.name`]=JSON.stringify(t.name)),n}(t.method,n||{}):{}}}return function(e,t,n){let r={};switch(e){case"notifications/cancelled":t?.requestId&&(r["mcp.cancelled.request_id"]=String(t.requestId)),t?.reason&&(r["mcp.cancelled.reason"]=String(t.reason));break;case"notifications/message":if(t?.level&&(r["mcp.logging.level"]=String(t.level)),t?.logger&&(r["mcp.logging.logger"]=String(t.logger)),t?.data!==void 0){var i;r["mcp.logging.data_type"]=typeof t.data,n&&(r["mcp.logging.message"]="string"==typeof(i=t.data)?i:JSON.stringify(i))}break;case"notifications/progress":t?.progressToken&&(r["mcp.progress.token"]=String(t.progressToken)),"number"==typeof t?.progress&&(r["mcp.progress.current"]=t.progress),"number"==typeof t?.total&&(r["mcp.progress.total"]=t.total,"number"==typeof t?.progress&&(r["mcp.progress.percentage"]=t.progress/t.total*100)),t?.message&&(r["mcp.progress.message"]=String(t.message));break;case"notifications/resources/updated":if(t?.uri){r[l1]=String(t.uri);let e=sk(String(t.uri));e&&!sw(e)&&(r["mcp.resource.protocol"]=e.protocol.replace(":",""))}break;case"notifications/initialized":r["mcp.lifecycle.phase"]="initialization_complete",r["mcp.protocol.ready"]=1}return r}(t.method,n||{},r)}let pd=new Set([l4,l5,l1]);function pf(e,t){return t?e:Object.entries(e).reduce((e,[t,n])=>(pd.has(t)||(e[t]=n),e),{})}function ph(e,t){return t?`${e} ${t}`:e}function pg(e){let t,n;switch(e){case"request":t=l3,n="auto.function.mcp_server";break;case"notification-incoming":t="mcp.notification.client_to_server",n=l9;break;case"notification-outgoing":t="mcp.notification.server_to_client",n=l9}return{[rn]:t,[rr]:n,[re]:"route"}}function p_(e){let t,{type:n,message:r,transport:i,extra:s,callback:a,options:o}=e,{method:u}=r,c=r.params;if("request"===n){let e=pl(u,c||{});t=ph(u,e.target)}else t=u;let l={...ps(i,s),[lK]:u,...pp(n,r,c,o?.recordInputs),...pg(n)},p=n8();return i6({name:t,forceTransaction:!0,attributes:pf(l,!!p?.getOptions().sendDefaultPii)},a)}let pm=new WeakSet;function py(e,t){if(pm.has(e)||!("object"==typeof e&&null!==e&&"resource"in e&&"tool"in e&&"prompt"in e&&"connect"in e||(tV&&t1("Did not patch MCP server. Interface is incompatible."),0)))return e;let n=n8(),r=!!n?.getOptions().sendDefaultPii,i={recordInputs:t?.recordInputs??r,recordOutputs:t?.recordOutputs??r};return nc(e,"connect",e=>async function(t,...n){let r=await e.call(this,t,...n);return t.onmessage&&nc(t,"onmessage",e=>function(t,n){var r;if("object"==typeof t&&null!==t&&"jsonrpc"in t&&"2.0"===t.jsonrpc&&"method"in t&&"id"in t){let s,a="initialize"===t.method;if(a)try{let e;e={},l8(t.params)&&("string"==typeof t.params.protocolVersion&&(e.protocolVersion=t.params.protocolVersion),t.params.clientInfo&&(e.clientInfo=pr(t.params.clientInfo))),s=e,r=s,pn(this,r)}catch{}return n6(n5().clone(),()=>{var r,o,u;let c,l=i7(function(e,t,n,r){let{method:i}=e,s=e.params,a=pl(i,s||{}),o=ph(i,a.target),u={...ps(t,n),[lK]:i,...pp("request",e,s,r?.recordInputs),...pg("request")},c=n8();return{name:o,op:l3,forceTransaction:!0,attributes:pf(u,!!c?.getOptions().sendDefaultPii)}}(t,this,n,i));return a&&s&&l.setAttributes({...(r=s.clientInfo,c={},r?.name&&(c["mcp.client.name"]=r.name),r?.title&&(c["mcp.client.title"]=r.title),r?.version&&(c["mcp.client.version"]=r.version),c),...s.protocolVersion&&{[l0]:s.protocolVersion}}),o=t.id,u=t.method,pu(this).set(o,{span:l,method:u,startTime:Date.now()}),st(l,()=>e.call(this,t,n))})}return l6(t)?p_({type:"notification-incoming",message:t,transport:this,extra:n,callback:()=>e.call(this,t,n),options:i}):e.call(this,t,n)}),t.send&&nc(t,"send",e=>async function(...t){let[n]=t;if(l6(n))return p_({type:"notification-outgoing",message:n,transport:this,options:i,callback:()=>e.call(this,...t)});if("object"==typeof n&&null!==n&&"jsonrpc"in n&&"2.0"===n.jsonrpc&&"id"in n&&("result"in n||"error"in n)&&null!==n.id&&void 0!==n.id){if(n.error&&function(e){try{if(e&&"object"==typeof e&&"code"in e&&"message"in e&&(-32603===e.code||e.code>=-32099&&e.code<=-32e3)){let t=Error(e.message);t.name=`JsonRpcError_${e.code}`,lz(t,"protocol")}}catch{}}(n.error),l8(n.result)&&(n.result.protocolVersion||n.result.serverInfo))try{let e,t=pi(n.result);e=pt(this)||{},pn(this,{...e,...t})}catch{}!function(e,t,n,r){let i=pu(e),s=i.get(t);if(s){let{span:e,method:o}=s;if("initialize"===o){var a;let t,r=pi(n),i={...(a=r.serverInfo,t={},a?.name&&(t[lX]=a.name),a?.title&&(t[lZ]=a.title),a?.version&&(t[lQ]=a.version),t)};r.protocolVersion&&(i[l0]=r.protocolVersion),e.setAttributes(i)}else if("tools/call"===o){let t=function(e,t){if(!l8(e))return{};let n=Array.isArray(e.content)?function(e,t){let n={"mcp.tool.result.content_count":e.length};for(let[r,i]of e.entries()){if(!l8(i))continue;let s=1===e.length?"mcp.tool.result":`mcp.tool.result.${r}`;if("string"==typeof i.type&&(n[`${s}.content_type`]=i.type),t){let e=(e,t)=>{"string"==typeof t&&(n[`${s}.${e}`]=t)};e("mime_type",i.mimeType),e("uri",i.uri),e("name",i.name),"string"==typeof i.text&&(n[`${s}.content`]=i.text),"string"==typeof i.data&&(n[`${s}.data_size`]=i.data.length);let t=i.resource;l8(t)&&(e("resource_uri",t.uri),e("resource_mime_type",t.mimeType))}}return n}(e.content,t):{};return"boolean"==typeof e.isError&&(n["mcp.tool.result.is_error"]=e.isError),n}(n,r.recordOutputs);e.setAttributes(t)}else if("prompts/get"===o){let t=function(e,t){let n={};if(!l8(e))return n;if(t&&"string"==typeof e.description&&(n["mcp.prompt.result.description"]=e.description),Array.isArray(e.messages)&&(n["mcp.prompt.result.message_count"]=e.messages.length,t)){let t=e.messages;for(let[e,s]of t.entries()){var r,i;if(!l8(s))continue;let a=1===t.length?"mcp.prompt.result":`mcp.prompt.result.${e}`;if(r="role","string"==typeof(i=s.role)&&(n[1===t.length?`${a}.message_${r}`:`${a}.${r}`]=i),l8(s.content)){let e=s.content;"string"==typeof e.text&&(n[1===t.length?`${a}.message_content`:`${a}.content`]=e.text)}}}return n}(n,r.recordOutputs);e.setAttributes(t)}e.end(),i.delete(t)}}(this,n.id,n.result,i)}return e.call(this,...t)}),t.onclose&&nc(t,"onclose",e=>function(...t){let n;return!function(e){let t=e.sessionId;if(t){let e=pa.get(t);if(e){for(let[,t]of e)t.span.setStatus({code:2,message:"cancelled"}),t.span.end();pa.delete(t)}return}let n=po.get(e);if(n){for(let[,e]of n)e.span.setStatus({code:2,message:"cancelled"}),e.span.end();n.clear()}}(this),(n=this.sessionId)&&l7.delete(n),e.call(this,...t)}),t.onerror&&nc(t,"onerror",e=>function(t){return function(e){try{lz(e,"transport")}catch{}}(t),e.call(this,t)}),r}),lH(e,"tool"),lH(e,"resource"),lH(e,"prompt"),pm.add(e),e}function pS(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}let pv=(e={})=>{let t=e.limit??10;return{name:"ZodErrors",processEvent:(n,r)=>(function(e,t=!1,n,r){var i;if(!n.exception?.values||!r.originalException||!(t7(i=r.originalException)&&"ZodError"===i.name&&Array.isArray(i.issues))||0===r.originalException.issues.length)return n;try{let i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(pS);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:function(e){let t=new Set;for(let n of e.issues){let e=n.path.map(e=>"number"==typeof e?"<array>":e).join(".");e.length>0&&t.add(e)}let n=Array.from(t);if(0===n.length){let t="variable";if(e.issues.length>0){let n=e.issues[0];void 0!==n&&"expected"in n&&"string"==typeof n.expected&&(t=n.expected)}return`Failed to validate ${t}`}return`Failed to validate keys: ${nN(n.join(", "),100)}`}(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(e){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:"unknown"}}}}})(t,e.saveZodIssuesAsAttachment,n,r)}};e.s(["SDK_VERSION",()=>tW,"SEMANTIC_ATTRIBUTE_SENTRY_OP",()=>rn,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN",()=>rr,"SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE",()=>rt,"SEMANTIC_ATTRIBUTE_SENTRY_SOURCE",()=>re,"Scope",()=>nJ,"VercelEdgeClient",()=>oy,"addBreadcrumb",()=>sU,"addEventProcessor",()=>sR,"addIntegration",()=>r0,"captureCheckIn",()=>sv,"captureConsoleIntegration",()=>cw,"captureEvent",()=>sd,"captureException",()=>sl,"captureFeedback",()=>ck,"captureMessage",()=>sp,"close",()=>sT,"consoleIntegration",()=>s3,"consoleLoggingIntegration",()=>cC,"continueTrace",()=>se,"createConsolaReporter",()=>cP,"createLangChainCallbackHandler",()=>cz,"createTransport",()=>ih,"dedupeIntegration",()=>sB,"eventFiltersIntegration",()=>sz,"extraErrorDataIntegration",()=>cH,"featureFlagsIntegration",()=>cY,"flush",()=>sE,"functionToStringIntegration",()=>sX,"getActiveSpan",()=>rG,"getClient",()=>n8,"getCurrentScope",()=>n4,"getDefaultIntegrations",()=>cl,"getGlobalScope",()=>n3,"getIsolationScope",()=>n5,"getRootSpan",()=>rB,"getSpanDescendants",()=>rF,"getSpanStatusFromHttpCode",()=>r_,"getTraceData",()=>sD,"getTraceMetaTags",()=>cK,"inboundFiltersIntegration",()=>sH,"init",()=>cp,"instrumentAnthropicAiClient",()=>c2,"instrumentGoogleGenAIClient",()=>le,"instrumentLangGraph",()=>ln,"instrumentOpenAiClient",()=>ld,"instrumentSupabaseClient",()=>lv,"isEnabled",()=>sI,"isInitialized",()=>sA,"lastEventId",()=>sS,"linkedErrorsIntegration",()=>s1,"logger",()=>lO,"metrics",()=>lM,"moduleMetadataIntegration",()=>lj,"requestDataIntegration",()=>s7,"rewriteFramesIntegration",()=>lG,"setContext",()=>sf,"setCurrentClient",()=>lq,"setExtra",()=>sg,"setExtras",()=>sh,"setHttpStatus",()=>rm,"setMeasurement",()=>iZ,"setTag",()=>sm,"setTags",()=>s_,"setUser",()=>sy,"spanToBaggageHeader",()=>rJ,"spanToJSON",()=>rL,"spanToTraceHeader",()=>rO,"startInactiveSpan",()=>i7,"startNewTrace",()=>sr,"startSpan",()=>i6,"startSpanManual",()=>i8,"supabaseIntegration",()=>lb,"suppressTracing",()=>sn,"trpcMiddleware",()=>lW,"vercelAIIntegration",()=>cd,"winterCGFetchIntegration",()=>cr,"withActiveSpan",()=>st,"withIsolationScope",()=>n6,"withMonitor",()=>sb,"withScope",()=>n9,"wrapMcpServerWithSentry",()=>py,"zodErrorsIntegration",()=>pv],596083),e.i(596083);var pb=e.i(47619),pE=e.i(175014),pT=e.i(886654),pA=e.i(725427),pI=e.i(30343),pR=e.i(833005);function pw(e){return async function(...t){try{return await e.apply(this,t)}catch(t){throw(0,pT.captureException)(t,{mechanism:{handled:!1,type:"auto.function.nextjs.wrapped",data:{function:e.name}}}),t}}}function pk(e,t,n,r){return async function(...n){let i=(0,c_.httpRequestToRequestData)(t);(0,ew.getCurrentScope)().setTransactionName(`${r.dataFetchingMethodName} (${r.dataFetcherRouteName})`),(0,ew.getIsolationScope)().setSDKProcessingMetadata({normalizedRequest:i});let s=(0,ev.getActiveSpan)();s&&"/_error"!==r.requestedRouteName&&(0,ev.getRootSpan)(s).setAttribute("sentry.route_backfill",r.requestedRouteName);let{"sentry-trace":a,baggage:o}=function(e={}){let t=e.client||(0,ew.getClient)();if(!(0,pT.isEnabled)()||!t)return{};let n=(0,pE.getMainCarrier)(),r=(0,pb.getAsyncContextStrategy)(n);if(r.getTraceData)return r.getTraceData(e);let i=e.scope||(0,ew.getCurrentScope)(),s=e.span||(0,ev.getActiveSpan)(),a=s?(0,ev.spanToTraceHeader)(s):function(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return(0,pR.generateSentryTraceHeader)(t,r,n)}(i),o=s?(0,pA.getDynamicSamplingContextFromSpan)(s):(0,pA.getDynamicSamplingContextFromScope)(t,i),u=(0,pI.dynamicSamplingContextToSentryBaggageHeader)(o);if(!pR.TRACEPARENT_REGEXP.test(a))return ec.debug.warn("Invalid sentry-trace data. Cannot generate trace data"),{};let c={"sentry-trace":a,baggage:u};return e.propagateTraceparent&&(c.traceparent=s?(0,ev.spanToTraceparentHeader)(s):function(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return(0,pR.generateTraceparentHeader)(t,r,n)}(i)),c}();return{sentryTrace:a,baggage:o,data:await e.apply(this,n)}}}async function px(e,t){try{return await e(...t)}catch(e){throw(0,pT.captureException)(e,{mechanism:{handled:!1,type:"auto.function.nextjs.data_fetcher"}}),e}}function pO(e,t){return new Proxy(e,{apply:async(e,t,n)=>cv()?e.apply(t,n):px(pw(e),n)})}function pC(e){return new Proxy(e,{apply:async(e,t,n)=>{if(cv())return e.apply(t,n);let[r]=n,{req:i,res:s}=r,a=pw(e);if(!i||!s)return a.apply(t,n);{let e=pk(a,i,s,{dataFetcherRouteName:r.pathname,requestedRouteName:r.pathname,dataFetchingMethodName:"getInitialProps"}),{data:o,baggage:u,sentryTrace:c}=await e.apply(t,n)??{};return"object"==typeof o&&null!==o&&(c&&(o._sentryTraceData=c),u&&(o._sentryBaggage=u)),o}}})}function pN(e){return new Proxy(e,{apply:async(e,t,n)=>{if(cv())return e.apply(t,n);let[r]=n,{req:i,res:s}=r.ctx,a=pw(e);if(!i||!s)return a.apply(t,n);{let e=pk(a,i,s,{dataFetcherRouteName:"/_app",requestedRouteName:r.ctx.pathname,dataFetchingMethodName:"getInitialProps"}),{data:o,sentryTrace:u,baggage:c}=await e.apply(t,n);return"object"==typeof o&&null!==o&&(o.pageProps||(o.pageProps={}),u&&(o.pageProps._sentryTraceData=u),c&&(o.pageProps._sentryBaggage=c)),o}}})}function pP(e){return new Proxy(e,{apply:async(e,t,n)=>{if(cv())return e.apply(t,n);let[r]=n,{req:i,res:s}=r,a=pw(e);if(!i||!s)return a.apply(t,n);{let e=pk(a,i,s,{dataFetcherRouteName:"/_document",requestedRouteName:r.pathname,dataFetchingMethodName:"getInitialProps"}),{data:o}=await e.apply(t,n);return o}}})}function pL(e){return new Proxy(e,{apply:async(e,t,n)=>{if(cv())return e.apply(t,n);let[r]=n,{req:i,res:s}=r,a=pw(e);if(!i||!s)return a.apply(t,n);{let e=pk(a,i,s,{dataFetcherRouteName:"/_error",requestedRouteName:r.pathname,dataFetchingMethodName:"getInitialProps"}),{data:o,baggage:u,sentryTrace:c}=await e.apply(t,n);return"object"==typeof o&&null!==o&&(c&&(o._sentryTraceData=c),u&&(o._sentryBaggage=u)),o}}})}function pM(e,t){return new Proxy(e,{apply:async(e,n,r)=>{if(cv())return e.apply(n,r);let[i]=r,{req:s,res:a}=i,o=pk(pw(e),s,a,{dataFetcherRouteName:t,requestedRouteName:t,dataFetchingMethodName:"getServerSideProps"}),{data:u,baggage:c,sentryTrace:l}=await o.apply(n,r);return"object"==typeof u&&null!==u&&"props"in u&&(l&&(u.props._sentryTraceData=l),c&&(u.props._sentryBaggage=c)),u}})}var pD=e.i(347357),p$=e.i(806925);function pj(e){return(0,p$.isError)(e)&&["NEXT_NOT_FOUND","NEXT_HTTP_ERROR_FALLBACK;404"].includes(e.digest)}function pU(e){return(0,p$.isError)(e)&&"string"==typeof e.digest&&e.digest.startsWith("NEXT_REDIRECT;")}function pF(e,t){return new Proxy(e,{apply:(e,n,r)=>{let i=(0,ew.getIsolationScope)(),s=t.headers?(0,c_.winterCGHeadersToDict)(t.headers):void 0;return i.setSDKProcessingMetadata({normalizedRequest:{headers:s}}),(0,pD.handleCallbackErrors)(()=>e.apply(n,r),e=>{let n=(0,ev.getActiveSpan)(),{componentRoute:r,componentType:s}=t,a=!0;i.setTransactionName(`${s} Server Component (${r})`),n&&(pj(e)?(a=!1,n.setStatus({code:eb.SPAN_STATUS_ERROR,message:"not_found"})):pU(e)?(a=!1,n.setStatus({code:eb.SPAN_STATUS_OK})):n.setStatus({code:eb.SPAN_STATUS_ERROR,message:"internal_error"})),a&&(0,pT.captureException)(e,{mechanism:{handled:!1,type:"auto.function.nextjs.server_component"}})},()=>{(0,cb.waitUntil)((0,cb.flushSafelyWithTimeout)())})}})}var pB=e.i(825009),pG=e.i(309428);let pq=new WeakMap;function pV(e,t){let{method:n,parameterizedRoute:r,headers:i}=t;return new Proxy(e,{apply:async(e,t,s)=>{let a,o=(0,ev.getActiveSpan)(),u=o?(0,ev.getRootSpan)(o):void 0;if(u&&1){let e=function(e){if("object"!=typeof e||!e)return new pB.Scope;{let t=pq.get(e);if(t)return t;{let t=new pB.Scope;return pq.set(e,t),t}}}(i),{scope:t}=(0,eR.getCapturedScopesOnSpan)(u);(0,eR.setCapturedScopesOnSpan)(u,t??new pB.Scope,e),a=e,u.updateName(`${n} ${r}`),u.setAttribute(eI.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,"route"),u.setAttribute(eI.SEMANTIC_ATTRIBUTE_SENTRY_OP,"http.server")}return(0,ew.withIsolationScope)(a,()=>(0,ew.withScope)(async a=>{a.setTransactionName(`${n} ${r}`);{let e=i?(0,c_.winterCGHeadersToDict)(i):{},t=(0,pR.propagationContextFromHeaders)(e["sentry-trace"],e.baggage);a.setPropagationContext(t),a.setSDKProcessingMetadata({normalizedRequest:{method:n,headers:e}})}let c=await (0,pD.handleCallbackErrors)(()=>e.apply(t,s),e=>{pU(e)||(pj(e)?(o&&(0,eb.setHttpStatus)(o,404),u&&(0,eb.setHttpStatus)(u,404)):(0,pT.captureException)(e,{mechanism:{handled:!1,type:"auto.function.nextjs.route_handler"}}))},()=>{(0,cb.waitUntil)((0,cb.flushSafelyWithTimeout)())});try{c.status&&(o&&(0,eb.setHttpStatus)(o,c.status),u&&(0,eb.setHttpStatus)(u,c.status))}catch{}return c}))}})}var pW=e.i(57594),pW=pW;function pz(e,t){return new Proxy(e,{apply:(e,n,r)=>{let i;if(!r?.[0])return e.apply(n,r);let[s]=r,a="nextUrl"in s?s.nextUrl.pathname:s.url,o="nextUrl"in s?s.headers.get("user-agent"):s.headers["user-agent"];if(!t||!o?.includes("vercel-cron"))return e.apply(n,r);let u=t.find(e=>e.path===a);if(!u?.path||!u.schedule)return e.apply(n,r);let c=u.path,l=(0,pT.captureCheckIn)({monitorSlug:c,status:"in_progress"},{maxRuntime:720,schedule:{type:"crontab",value:u.schedule}}),p=(0,pW.safeDateNow)()/1e3,d=()=>{(0,pT.captureCheckIn)({checkInId:l,monitorSlug:c,status:"error",duration:(0,pW.safeDateNow)()/1e3-p})};try{i=e.apply(n,r)}catch(e){throw d(),e}return"object"==typeof i&&null!==i&&"then"in i?Promise.resolve(i).then(()=>{(0,pT.captureCheckIn)({checkInId:l,monitorSlug:c,status:"ok",duration:(0,pW.safeDateNow)()/1e3-p})},()=>{d()}):(0,pT.captureCheckIn)({checkInId:l,monitorSlug:c,status:"ok",duration:(0,pW.safeDateNow)()/1e3-p}),i}})}function pH(e){return new Proxy(e,{apply:async(e,t,n)=>{let r="_sentryRewritesTunnelPath"in globalThis?globalThis._sentryRewritesTunnelPath:void 0;if(r&&"string"==typeof r){let e=n[0];if(e instanceof Request&&new URL(e.url).pathname.startsWith(r))return new Response(null,{status:200,headers:{"x-middleware-next":"1"}})}return(0,ew.withIsolationScope)(r=>{let i,s,a=n[0],o=(0,ew.getCurrentScope)();a instanceof Request?(r.setSDKProcessingMetadata({normalizedRequest:(0,c_.winterCGRequestToRequestData)(a)}),i=`middleware ${a.method}`,s="url"):(i="middleware",s="component"),o.setTransactionName(i);let u=(0,ev.getActiveSpan)();if(u){i="middleware",s="component";let e=(0,ev.getRootSpan)(u);e&&(0,eR.setCapturedScopesOnSpan)(e,o,r)}return(0,pG.startSpan)({name:i,op:"http.server.middleware",attributes:{[eI.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:s,[eI.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.function.nextjs.wrap_middleware"}},()=>(0,pD.handleCallbackErrors)(()=>e.apply(t,n),e=>{(0,pT.captureException)(e,{mechanism:{type:"auto.function.nextjs.wrap_middleware",handled:!1}})},()=>{(0,cb.waitUntil)((0,cb.flushSafelyWithTimeout)())}))})}})}function pJ(e){return"function"==typeof e&&e?.prototype?.isReactComponent?class extends e{render(...e){return(0,ew.withIsolationScope)(()=>{let t=(0,ew.getCurrentScope)(),n="object"==typeof this.props&&null!==this.props&&"_sentryTraceData"in this.props&&"string"==typeof this.props._sentryTraceData?this.props._sentryTraceData:void 0;if(n){let e=(0,pR.extractTraceparentData)(n);t.setContext("trace",{span_id:e?.parentSpanId,trace_id:e?.traceId})}try{return super.render(...e)}catch(e){throw(0,pT.captureException)(e,{mechanism:{handled:!1,type:"auto.function.nextjs.page_class"}}),e}})}}:"function"==typeof e?new Proxy(e,{apply:(e,t,n)=>(0,ew.withIsolationScope)(()=>{let r=(0,ew.getCurrentScope)(),i=n?.[0]?._sentryTraceData;if(i){let e=(0,pR.extractTraceparentData)(i);r.setContext("trace",{span_id:e?.parentSpanId,trace_id:e?.traceId})}try{return e.apply(t,n)}catch(e){throw(0,pT.captureException)(e,{mechanism:{handled:!1,type:"auto.function.nextjs.page_function"}}),e}})}):e}function pY(e,t){return new Proxy(e,{apply:(e,n,r)=>{let i,s=(0,ew.getIsolationScope)();try{i=t.requestAsyncStorage?.getStore()?.headers}catch{}let a=i?(0,c_.winterCGHeadersToDict)(i):void 0;return s.setSDKProcessingMetadata({normalizedRequest:{headers:a}}),(0,pD.handleCallbackErrors)(()=>e.apply(n,r),e=>{let n=(0,ev.getActiveSpan)(),{componentRoute:r,componentType:i,generationFunctionIdentifier:a}=t,o=!0;s.setTransactionName(`${i}.${a} (${r})`),n&&(pj(e)?(o=!1,n.setStatus({code:eb.SPAN_STATUS_ERROR,message:"not_found"})):pU(e)?(o=!1,n.setStatus({code:eb.SPAN_STATUS_OK})):n.setStatus({code:eb.SPAN_STATUS_ERROR,message:"internal_error"})),o&&(0,pT.captureException)(e,{mechanism:{handled:!1,type:"auto.function.nextjs.generation_function",data:{function:a}}})},()=>{(0,cb.waitUntil)((0,cb.flushSafelyWithTimeout)())})}})}function pK(...e){if("function"==typeof e[1]){let[t,n]=e;return pX(t,{},n)}{let[t,n,r]=e;return pX(t,n,r)}}async function pX(e,t,n){return(0,ew.withIsolationScope)(async r=>{let i,s,a=(0,ew.getClient)()?.getOptions().sendDefaultPii,o={};try{let e=await t.headers;i=e?.get("sentry-trace")??void 0,s=e?.get("baggage"),e?.forEach((e,t)=>{o[t]=e})}catch{cf.DEBUG_BUILD&&ec.debug.warn("Sentry wasn't able to extract the tracing headers for a server action. Will not trace this request.")}return r.setTransactionName(`serverAction/${e}`),r.setSDKProcessingMetadata({normalizedRequest:{headers:o}}),((0,ev.getActiveSpan)()?(e,t)=>t():pG.continueTrace)({sentryTrace:i,baggage:s},async()=>{try{return await (0,pG.startSpan)({op:"function.server_action",name:`serverAction/${e}`,forceTransaction:!0,attributes:{[eI.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"route",[eI.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.function.nextjs.server_action"}},async e=>{let r=await (0,pD.handleCallbackErrors)(n,t=>{pj(t)?e.setStatus({code:eb.SPAN_STATUS_ERROR,message:"not_found"}):pU(t)||(e.setStatus({code:eb.SPAN_STATUS_ERROR,message:"internal_error"}),(0,pT.captureException)(t,{mechanism:{handled:!1,type:"auto.function.nextjs.server_action"}}))});return(void 0!==t.recordResponse?t.recordResponse:a)&&(0,ew.getIsolationScope)().setExtra("server_action_result",r),t.formData&&t.formData.forEach((e,t)=>{(0,ew.getIsolationScope)().setExtra(`server_action_form_data.${t}`,"string"==typeof e?e:"[non-string value]")}),r})}finally{(0,cb.waitUntil)((0,cb.flushSafelyWithTimeout)())}})})}var pZ=e.i(842618);async function pQ(e){let{req:t,res:n,err:r}=e,i=n?.statusCode||e.statusCode;if(i&&i<500||!e.pathname)return;let s=(0,ew.withScope)(e=>{if(t){let n=(0,c_.httpRequestToRequestData)(t);e.setSDKProcessingMetadata({normalizedRequest:n})}return(0,pT.captureException)(r||`_error.js called with falsy error (${r})`,{mechanism:{type:"auto.function.nextjs.underscore_error",handled:!1,data:{function:"_error.getInitialProps"}}})});return(0,cb.waitUntil)((0,cb.flushSafelyWithTimeout)()),s}var p0=e.i(525302);function p1(e){let t=cv(),n=!!e&&function(e){if(e.$$typeof!==Symbol.for("react.server.reference"))return!1;let{type:t}=function(e){let t=parseInt(e.slice(0,2),16),n=t>>1&63,r=Array(6);for(let e=0;e<6;e++){let t=n>>5-e&1;r[e]=1===t}return{type:1==(t>>7&1)?"use-cache":"server-action",usedArgs:r,hasRestArgs:1==(1&t)}}(e.$$id);return"use-cache"===t}(e);return n&&cf.DEBUG_BUILD&&ec.debug.log("Skipping span creation in Cache Components context"),t||n}function p2(){return new p0.SentryNonRecordingSpan({traceId:"00000000000000000000000000000000",spanId:"0000000000000000"})}function p4(e,t){return p1(t)?t(p2()):(0,pG.startSpan)(e,t)}function p5(e,t){if(p1(t)){let e=p2();return t(e,()=>e.end())}return(0,pG.startSpanManual)(e,t)}function p3(e){return p1()?p2():(0,pG.startInactiveSpan)(e)}function p9(e,t){return new Proxy(e,{apply:async(e,n,r)=>(0,ew.withIsolationScope)(i=>{let s,a=r[0],o=(0,ew.getCurrentScope)(),u={};a instanceof Request?(i.setSDKProcessingMetadata({normalizedRequest:(0,c_.winterCGRequestToRequestData)(a)}),o.setTransactionName(`${a.method} ${t}`),u=cm(a.headers)):o.setTransactionName(`handler (${t})`);let c="http.server",l=(0,ev.getActiveSpan)();if(l){s=`handler (${t})`,c=void 0;let e=(0,ev.getRootSpan)(l);e&&(e.updateName(a instanceof Request?`${a.method} ${t}`:`handler ${t}`),e.setAttributes({[eI.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.server",[eI.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"route",...u}),(0,eR.setCapturedScopesOnSpan)(e,o,i))}else s=a instanceof Request?`${a.method} ${t}`:`handler ${t}`;return(0,pG.startSpan)({name:s,op:c,attributes:{[eI.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"route",[eI.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.function.nextjs.wrap_api_handler",...u}},()=>(0,pD.handleCallbackErrors)(()=>e.apply(n,r),e=>{(0,pT.captureException)(e,{mechanism:{type:"auto.function.nextjs.wrap_api_handler",handled:!1}})},()=>{(0,cb.waitUntil)((0,cb.flushSafelyWithTimeout)())}))})})}e.s(["SDK_VERSION",()=>tW,"SEMANTIC_ATTRIBUTE_SENTRY_OP",()=>rn,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN",()=>rr,"SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE",()=>rt,"SEMANTIC_ATTRIBUTE_SENTRY_SOURCE",()=>re,"Scope",()=>nJ,"VercelEdgeClient",()=>oy,"addBreadcrumb",()=>sU,"addEventProcessor",()=>sR,"addIntegration",()=>r0,"captureCheckIn",()=>sv,"captureConsoleIntegration",()=>cw,"captureEvent",()=>sd,"captureException",()=>sl,"captureFeedback",()=>ck,"captureMessage",()=>sp,"captureRequestError",()=>pZ.captureRequestError,"captureUnderscoreErrorException",()=>pQ,"close",()=>sT,"consoleIntegration",()=>s3,"consoleLoggingIntegration",()=>cC,"continueTrace",()=>se,"createConsolaReporter",()=>cP,"createLangChainCallbackHandler",()=>cz,"createTransport",()=>ih,"dedupeIntegration",()=>sB,"eventFiltersIntegration",()=>sz,"extraErrorDataIntegration",()=>cH,"featureFlagsIntegration",()=>cY,"flush",()=>sE,"functionToStringIntegration",()=>sX,"getActiveSpan",()=>rG,"getClient",()=>n8,"getCurrentScope",()=>n4,"getDefaultIntegrations",()=>cl,"getGlobalScope",()=>n3,"getIsolationScope",()=>n5,"getRootSpan",()=>rB,"getSpanDescendants",()=>rF,"getSpanStatusFromHttpCode",()=>r_,"getTraceData",()=>sD,"getTraceMetaTags",()=>cK,"inboundFiltersIntegration",()=>sH,"init",()=>cI,"instrumentAnthropicAiClient",()=>c2,"instrumentGoogleGenAIClient",()=>le,"instrumentLangGraph",()=>ln,"instrumentOpenAiClient",()=>ld,"instrumentSupabaseClient",()=>lv,"isEnabled",()=>sI,"isInitialized",()=>sA,"lastEventId",()=>sS,"linkedErrorsIntegration",()=>s1,"logger",()=>lO,"metrics",()=>lM,"moduleMetadataIntegration",()=>lj,"requestDataIntegration",()=>s7,"rewriteFramesIntegration",()=>lG,"setContext",()=>sf,"setCurrentClient",()=>lq,"setExtra",()=>sg,"setExtras",()=>sh,"setHttpStatus",()=>rm,"setMeasurement",()=>iZ,"setTag",()=>sm,"setTags",()=>s_,"setUser",()=>sy,"spanToBaggageHeader",()=>rJ,"spanToJSON",()=>rL,"spanToTraceHeader",()=>rO,"startInactiveSpan",()=>p3,"startNewTrace",()=>sr,"startSpan",()=>p4,"startSpanManual",()=>p5,"supabaseIntegration",()=>lb,"suppressTracing",()=>sn,"trpcMiddleware",()=>lW,"vercelAIIntegration",()=>cd,"winterCGFetchIntegration",()=>cr,"withActiveSpan",()=>st,"withIsolationScope",()=>n6,"withMonitor",()=>sb,"withScope",()=>n9,"withSentryConfig",()=>cR,"withServerActionInstrumentation",()=>pK,"wrapApiHandlerWithSentry",()=>p9,"wrapApiHandlerWithSentryVercelCrons",()=>pz,"wrapAppGetInitialPropsWithSentry",()=>pN,"wrapDocumentGetInitialPropsWithSentry",()=>pP,"wrapErrorGetInitialPropsWithSentry",()=>pL,"wrapGenerationFunctionWithSentry",()=>pY,"wrapGetInitialPropsWithSentry",()=>pC,"wrapGetServerSidePropsWithSentry",()=>pM,"wrapGetStaticPropsWithSentry",()=>pO,"wrapMcpServerWithSentry",()=>py,"wrapMiddlewareWithSentry",()=>pH,"wrapPageComponentWithSentry",()=>pJ,"wrapRouteHandlerWithSentry",()=>pV,"wrapServerComponentWithSentry",()=>pF,"zodErrorsIntegration",()=>pv],929266),e.i(929266),cI({...{...{dsn:process.env.SENTRY_DSN??process.env.NEXT_PUBLIC_SENTRY_DSN,environment:"production",tracesSampleRate:.1,profilesSampleRate:.1,normalizeDepth:10,autoSessionTracking:!0,maxBreadcrumbs:50,maxValueLength:1e4,beforeSend(e){if(e.extra){let t=e.extra;"password"in t&&delete t.password,"creditCard"in t&&delete t.creditCard,"token"in t&&delete t.token,"apiKey"in t&&delete t.apiKey}let t=e.exception?.values?.[0]?.type;return"ChunkLoadError"===t||"Loading chunk failed"===t||e.message?.includes?.("loading")||e.message?.includes?.("chunk")?null:e},beforeBreadcrumb:e=>"console"===e.category&&e.data?.arguments&&e.data.arguments.some(e=>"string"==typeof e&&e.toLowerCase().includes("password"))?null:e},...void 0},tracesSampleRate:.1}),e.s([],895641)}]);

//# sourceMappingURL=ADK_WORKSPACE_TutorMekimi_tutorme-app_7da4ef5f._.js.map