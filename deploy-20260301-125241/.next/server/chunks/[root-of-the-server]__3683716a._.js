;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="0d8bd5ac-54ff-adc4-eafa-0f91f3b6e41e")}catch(e){}}();
module.exports=[193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},654884,139346,983142,322112,e=>{"use strict";var t,r,n="object"==typeof globalThis?globalThis:e.g,s="1.9.0",o=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,a=function(e){var t=new Set([e]),r=new Set,n=e.match(o);if(!n)return function(){return!1};var s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=s.prerelease)return function(t){return t===e};function a(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var n=e.match(o);if(!n)return a(e);var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=i.prerelease||s.major!==i.major)return a(e);if(0===s.major)return s.minor===i.minor&&s.patch<=i.patch?(t.add(e),!0):a(e);return s.minor<=i.minor?(t.add(e),!0):a(e)}}(s),i=Symbol.for("opentelemetry.js.api."+s.split(".")[0]);function l(e,t,r,o){void 0===o&&(o=!1);var a,l=n[i]=null!=(a=n[i])?a:{version:s};if(!o&&l[e]){var c=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(c.stack||c.message),!1}if(l.version!==s){var c=Error("@opentelemetry/api: Registration of version v"+l.version+" for "+e+" does not match previously registered API v"+s);return r.error(c.stack||c.message),!1}return l[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+s+"."),!0}function c(e){var t,r,s=null==(t=n[i])?void 0:t.version;if(s&&a(s))return null==(r=n[i])?void 0:r[e]}function u(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+s+".");var r=n[i];r&&delete r[e]}e.s(["getGlobal",()=>c,"registerGlobal",()=>l,"unregisterGlobal",()=>u],139346);var d=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return a},p=function(e,t,r){if(r||2==arguments.length)for(var n,s=0,o=t.length;s<o;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},h=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f("verbose",this._namespace,e)},e}();function f(e,t,r){var n=c("diag");if(n)return r.unshift(t),n[e].apply(n,p([],d(r),!1))}(t=r||(r={}))[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL",e.s(["DiagLogLevel",()=>r],983142);var m=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return a},g=function(e,t,r){if(r||2==arguments.length)for(var n,s=0,o=t.length;s<o;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},y=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=c("diag");if(n)return n[e].apply(n,g([],m(t),!1))}}var t=this;t.setLogger=function(e,n){if(void 0===n&&(n={logLevel:r.INFO}),e===t){var s,o,a,i=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(s=i.stack)?s:i.message),!1}"number"==typeof n&&(n={logLevel:n});var u=c("diag"),d=function(e,t){function n(r,n){var s=t[r];return"function"==typeof s&&e>=n?s.bind(t):function(){}}return e<r.NONE?e=r.NONE:e>r.ALL&&(e=r.ALL),t=t||{},{error:n("error",r.ERROR),warn:n("warn",r.WARN),info:n("info",r.INFO),debug:n("debug",r.DEBUG),verbose:n("verbose",r.VERBOSE)}}(null!=(o=n.logLevel)?o:r.INFO,e);if(u&&!n.suppressOverrideMessage){var p=null!=(a=Error().stack)?a:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+p),d.warn("Current logger will overwrite one already registered from "+p)}return l("diag",d,t,!0)},t.disable=function(){u("diag",t)},t.createComponentLogger=function(e){return new h(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();e.s(["DiagAPI",()=>y],322112);var C=y.instance();e.s(["diag",()=>C],654884)},254799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},238523,e=>e.a(async(t,r)=>{try{let t=await e.y("pg-db6d965ecbff73b5");e.n(t),r()}catch(e){r(e)}},!0),918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},224361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},792509,(e,t,r)=>{t.exports=e.x("url",()=>require("url"))},427699,(e,t,r)=>{t.exports=e.x("events",()=>require("events"))},814747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},902157,(e,t,r)=>{t.exports=e.x("node:fs",()=>require("node:fs"))},750227,(e,t,r)=>{t.exports=e.x("node:path",()=>require("node:path"))},765433,e=>e.a(async(t,r)=>{try{var n=e.i(738597);e.i(688768);var s=e.i(257357),o=t([n]);async function a(e,t,r){try{await n.drizzleDb.insert(s.userActivityLog).values({id:crypto.randomUUID(),userId:e,action:t,metadata:r??{}})}catch(e){console.error("Audit log failed:",e)}}[n]=o.then?(await o)():o,e.s(["AUDIT_ACTIONS",0,{PROFILE_VIEW:"audit_profile_view",PROFILE_UPDATE:"audit_profile_update",DATA_EXPORT:"audit_data_export",DATA_DELETE:"audit_data_delete",PAYMENT_CREATE:"audit_payment_create",PAYMENT_REFUND:"audit_payment_refund",PAYMENT_ALERT:"audit_payment_alert",COURSE_SHARE:"audit_course_share",ADMIN_ACCESS:"audit_admin_access",SENSITIVE_ACCESS:"audit_sensitive_access"},"logAudit",()=>a]),r()}catch(e){r(e)}},!1),605365,(e,t,r)=>{t.exports=e.x("process",()=>require("process"))},37702,(e,t,r)=>{t.exports=e.x("worker_threads",()=>require("worker_threads"))},233405,(e,t,r)=>{t.exports=e.x("child_process",()=>require("child_process"))},522734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},446786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},870722,(e,t,r)=>{t.exports=e.x("tty",()=>require("tty"))},687769,(e,t,r)=>{t.exports=e.x("node:events",()=>require("node:events"))},812057,(e,t,r)=>{t.exports=e.x("node:util",()=>require("node:util"))},362562,(e,t,r)=>{t.exports=e.x("module",()=>require("module"))},631963,(e,t,r)=>{t.exports=e.x("require-in-the-middle-be62b1535ba45440",()=>require("require-in-the-middle-be62b1535ba45440"))},513733,(e,t,r)=>{t.exports=e.x("import-in-the-middle-d3faaa61eef42f52",()=>require("import-in-the-middle-d3faaa61eef42f52"))},677652,(e,t,r)=>{t.exports=e.x("node:diagnostics_channel",()=>require("node:diagnostics_channel"))},154993,(e,t,r)=>{t.exports=e.x("diagnostics_channel",()=>require("diagnostics_channel"))},410430,(e,t,r)=>{t.exports=e.x("async_hooks",()=>require("async_hooks"))},874533,(e,t,r)=>{t.exports=e.x("node:child_process",()=>require("node:child_process"))},660526,(e,t,r)=>{t.exports=e.x("node:os",()=>require("node:os"))},601457,(e,t,r)=>{t.exports=e.x("node:readline",()=>require("node:readline"))},925127,(e,t,r)=>{t.exports=e.x("node:worker_threads",()=>require("node:worker_threads"))},347299,(e,t,r)=>{t.exports=e.x("node:http",()=>require("node:http"))},743698,(e,t,r)=>{t.exports=e.x("node:https",()=>require("node:https"))},81111,(e,t,r)=>{t.exports=e.x("node:stream",()=>require("node:stream"))},727028,(e,t,r)=>{t.exports=e.x("node:zlib",()=>require("node:zlib"))},761095,(e,t,r)=>{t.exports=e.x("node:net",()=>require("node:net"))},685560,(e,t,r)=>{t.exports=e.x("node:tls",()=>require("node:tls"))},844376,(e,t,r)=>{t.exports=e.x("node:module",()=>require("node:module"))},31794,(e,t,r)=>{function n(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}t.exports=function(e,t){t=t||{};var r,s,o,a,i=typeof e;if("string"===i&&e.length>0){var l=e;if(!((l=String(l)).length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(c){var u=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*u;case"weeks":case"week":case"w":return 6048e5*u;case"days":case"day":case"d":return 864e5*u;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*u;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*u;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:break}}}return}if("number"===i&&isFinite(e)){return t.long?(s=Math.abs(r=e))>=864e5?n(r,s,864e5,"day"):s>=36e5?n(r,s,36e5,"hour"):s>=6e4?n(r,s,6e4,"minute"):s>=1e3?n(r,s,1e3,"second"):r+" ms":(a=Math.abs(o=e))>=864e5?Math.round(o/864e5)+"d":a>=36e5?Math.round(o/36e5)+"h":a>=6e4?Math.round(o/6e4)+"m":a>=1e3?Math.round(o/1e3)+"s":o+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},640398,(e,t,r)=>{t.exports=function(t){function r(e){let t,s,o,a=null;function i(...e){if(!i.enabled)return;let n=Number(new Date);i.diff=n-(t||n),i.prev=t,i.curr=n,t=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,n)=>{if("%%"===t)return"%";s++;let o=r.formatters[n];if("function"==typeof o){let r=e[s];t=o.call(i,r),e.splice(s,1),s--}return t}),r.formatArgs.call(i,e),(i.log||r.log).apply(i,e)}return i.namespace=e,i.useColors=r.useColors(),i.color=r.selectColor(e),i.extend=n,i.destroy=r.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(s!==r.namespaces&&(s=r.namespaces,o=r.enabled(e)),o),set:e=>{a=e}}),"function"==typeof r.init&&r.init(i),i}function n(e,t){let n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function s(e,t){let r=0,n=0,s=-1,o=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(s=n,o=r):r++,n++;else{if(-1===s)return!1;n=s+1,r=++o}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){let e=[...r.names,...r.skips.map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){for(let t of(r.save(e),r.namespaces=e,r.names=[],r.skips=[],("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean)))"-"===t[0]?r.skips.push(t.slice(1)):r.names.push(t)},r.enabled=function(e){for(let t of r.skips)if(s(e,t))return!1;for(let t of r.names)if(s(e,t))return!0;return!1},r.humanize=e.r(31794),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(e=>{r[e]=t[e]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return r.colors[Math.abs(t)%r.colors.length]},r.enable(r.load()),r}},332793,(e,t,r)=>{"use strict";t.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),s=t.indexOf("--");return -1!==n&&(-1===s||n<s)}},462142,(e,t,r)=>{"use strict";let n;e.r(446786);let s=e.r(870722),o=e.r(332793),{env:a}=process;function i(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function l(e,t){if(0===n)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(e&&!t&&void 0===n)return 0;let r=n||0;if("dumb"===a.TERM)return r;if("CI"in a)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(e=>e in a)||"codeship"===a.CI_NAME?1:r;if("TEAMCITY_VERSION"in a)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(a.TEAMCITY_VERSION);if("truecolor"===a.COLORTERM)return 3;if("TERM_PROGRAM"in a){let e=parseInt((a.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(a.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(a.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(a.TERM)||"COLORTERM"in a?1:r}o("no-color")||o("no-colors")||o("color=false")||o("color=never")?n=0:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(n=1),"FORCE_COLOR"in a&&(n="true"===a.FORCE_COLOR?1:"false"===a.FORCE_COLOR?0:0===a.FORCE_COLOR.length?1:Math.min(parseInt(a.FORCE_COLOR,10),3)),t.exports={supportsColor:function(e){return i(l(e,e&&e.isTTY))},stdout:i(l(!0,s.isatty(1))),stderr:i(l(!0,s.isatty(2)))}},805329,(e,t,r)=>{let n=e.r(870722),s=e.r(224361);r.init=function(e){e.inspectOpts={};let t=Object.keys(r.inspectOpts);for(let n=0;n<t.length;n++)e.inspectOpts[t[n]]=r.inspectOpts[t[n]]},r.log=function(...e){return process.stderr.write(s.formatWithOptions(r.inspectOpts,...e)+"\n")},r.formatArgs=function(e){let{namespace:n,useColors:s}=this;if(s){let r=this.color,s="\x1b[3"+(r<8?r:"8;5;"+r),o=`  ${s};1m${n} \u001B[0m`;e[0]=o+e[0].split("\n").join("\n"+o),e.push(s+"m+"+t.exports.humanize(this.diff)+"\x1b[0m")}else e[0]=(r.inspectOpts.hideDate?"":new Date().toISOString()+" ")+n+" "+e[0]},r.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},r.load=function(){return process.env.DEBUG},r.useColors=function(){return"colors"in r.inspectOpts?!!r.inspectOpts.colors:n.isatty(process.stderr.fd)},r.destroy=s.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),r.colors=[6,2,3,4,5,1];try{let t=e.r(462142);t&&(t.stderr||t).level>=2&&(r.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}r.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),t.exports=e.r(640398)(r);let{formatters:o}=t.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts)}},23322,(e,t,r)=>{let n;r.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,s=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(s=n))}),e.splice(s,0,r)},r.save=function(e){try{e?r.storage.setItem("debug",e):r.storage.removeItem("debug")}catch(e){}},r.load=function(){let e;try{e=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch(e){}return!e&&"u">typeof process&&"env"in process&&(e=process.env.DEBUG),e},r.useColors=function(){let e;return!("u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("u">typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"u">typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage=function(){try{return localStorage}catch(e){}}(),n=!1,r.destroy=()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))},r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.log=console.debug||console.log||(()=>{}),t.exports=e.r(640398)(r);let{formatters:s}=t.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},262666,(e,t,r)=>{"u"<typeof process||"renderer"===process.type||process.__nwjs?t.exports=e.r(23322):t.exports=e.r(805329)},848380,e=>e.a(async(t,r)=>{try{var n=e.i(738597),s=e.i(320947),o=t([n]);[n]=o.then?(await o)():o;let i=new Map,l=new class{queryLog=[];slowQueryThreshold=100;maxLogSize=1e3;cacheHits=0;cacheMisses=0;logQuery(e,t,r,n){let s={query:e.substring(0,200),duration:t,timestamp:Date.now(),operation:r,table:n};this.queryLog.push(s),this.queryLog.length>this.maxLogSize&&this.queryLog.shift(),t>this.slowQueryThreshold&&console.warn(`[Slow Query] ${t}ms: ${e.substring(0,100)}...`)}recordCacheHit(){this.cacheHits++}recordCacheMiss(){this.cacheMisses++}getCacheMetrics(){let e=this.cacheHits+this.cacheMisses;return{hits:this.cacheHits,misses:this.cacheMisses,hitRate:e>0?this.cacheHits/e*100:0,size:i.size}}getSlowQueries(e=this.slowQueryThreshold,t=10){return this.queryLog.filter(t=>t.duration>e).sort((e,t)=>t.duration-e.duration).slice(0,t)}getMostFrequentQueries(e=10){let t=new Map;for(let e of this.queryLog){let r=e.query,n=t.get(r);n?(n.count++,n.totalDuration+=e.duration):t.set(r,{count:1,totalDuration:e.duration})}return Array.from(t.entries()).map(([e,t])=>({query:e,count:t.count,avgDuration:t.totalDuration/t.count})).sort((e,t)=>t.count-e.count).slice(0,e)}async getHealthStatus(){let t=[],r="healthy",o=Date.now(),a=!1,i=0;try{await n.drizzleDb.execute(s.sql`SELECT 1`),i=Date.now()-o,a=!0,i>500&&(t.push(`High database latency: ${i}ms`),r="degraded")}catch(e){t.push("Database connection failed"),r="unhealthy"}let l=!1;try{let t=process.env.REDIS_URL;if(t){let{Redis:r}=await e.A(443460),n=new r(t,{maxRetriesPerRequest:1});await n.ping(),await n.quit(),l=!0}else l=!0}catch(e){t.push("Cache connection failed"),"healthy"===r&&(r="degraded")}let c=this.queryLog.filter(e=>e.timestamp>Date.now()-6e4&&e.duration>this.slowQueryThreshold).length;return c>10&&(t.push(`${c} slow queries in the last minute`),"healthy"===r&&(r="degraded")),{status:r,database:a,cache:l,latency:i,slowQueries:c,issues:t}}getStats(){let e=Date.now(),t=e-6e4,r=e-3e5,n=this.queryLog.filter(e=>e.timestamp>t),s=this.queryLog.filter(e=>e.timestamp>r);return{queries:{last1Minute:n.length,last5Minutes:s.length,avgDuration:n.length>0?n.reduce((e,t)=>e+t.duration,0)/n.length:0,maxDuration:n.length>0?Math.max(...n.map(e=>e.duration)):0},cache:this.getCacheMetrics(),slowQueries:this.getSlowQueries(100,5)}}reset(){this.queryLog=[],this.cacheHits=0,this.cacheMisses=0}};async function a(){let e=await l.getHealthStatus(),t=l.getStats();return{...e,stats:{queriesPerMinute:t.queries.last1Minute,averageQueryTime:Math.round(t.queries.avgDuration),cacheHitRate:Math.round(t.cache.hitRate)}}}e.s(["dbMonitor",0,l,"getHealthCheck",()=>a]),r()}catch(e){r(e)}},!1),596621,e=>e.a(async(t,r)=>{try{var n=e.i(620971),s=e.i(909105),o=e.i(320947),a=e.i(848380),i=e.i(738597);e.i(688768);var l=e.i(257357),c=e.i(776751),u=t([a,i,c]);async function d(e){let t=Date.now(),r=[];try{let[e,s,o,i]=await Promise.all([(0,a.getHealthCheck)(),p(),h(),f()]),l={database:{connected:e.database,latencyMs:e.latency,version:s??void 0,poolStatus:e.database?"operational":"disconnected"},cache:{connected:e.cache,type:o?"redis":"in-memory",redisVersion:o?.match(/redis_version:(.+)/)?.[1]?.trim()},security:{auditSystemOperational:!0,recentSecurityEvents:i.recentCount,criticalEventsLast24h:i.criticalCount,owaspReadiness:"string"==typeof c.SECURITY_EVENT_TYPES.LOGIN_FAILURE},compliance:{gdprLoggingReady:!0,piplLoggingReady:!0,pciDssLoggingReady:!0},infrastructure:{nodeVersion:process.version,platform:process.platform,memoryUsage:{heapUsed:Math.round(process.memoryUsage().heapUsed/1024/1024),heapTotal:Math.round(process.memoryUsage().heapTotal/1024/1024),rss:Math.round(process.memoryUsage().rss/1024/1024),external:Math.round((process.memoryUsage().external??0)/1024/1024)}}},u=e.status;i.criticalCount>10&&r.push("High critical security events - review security dashboard"),e.latency>500&&r.push("Database latency elevated - consider connection pool tuning"),!e.cache&&process.env.REDIS_URL&&r.push("Redis unavailable - using in-memory cache");let d={status:u,timestamp:new Date().toISOString(),uptime:Math.round(process.uptime()),version:process.env.npm_package_version??"1.0.0",environment:"production",checks:l,recommendations:r},m=Date.now()-t,g="unhealthy"===u?503:200;return n.NextResponse.json(d,{status:g,headers:{"X-Health-Check-Duration-Ms":String(m),"X-Health-Status":u}})}catch(e){return console.error("[Enterprise Health] Error:",e),n.NextResponse.json({status:"unhealthy",timestamp:new Date().toISOString(),error:"Enterprise health check failed",recommendations:["Investigate health check failure - check logs"]},{status:503})}}async function p(){try{let e=(await i.drizzleDb.execute(o.sql`SELECT version() as version`)).rows;return e?.[0]?.version??null}catch{return null}}async function h(){try{let t=process.env.REDIS_URL;if(!t)return null;let{Redis:r}=await e.A(443460),n=new r(t,{maxRetriesPerRequest:1}),s=await n.info("server");return await n.quit(),s}catch{return null}}async function f(){try{let e=new Date(Date.now()-864e5),[t,r]=await Promise.all([i.drizzleDb.select({count:o.sql`count(*)::int`}).from(l.securityEvent).where((0,s.gte)(l.securityEvent.createdAt,e)),i.drizzleDb.select({count:o.sql`count(*)::int`}).from(l.securityEvent).where((0,s.and)((0,s.gte)(l.securityEvent.createdAt,e),(0,s.eq)(l.securityEvent.severity,c.SECURITY_SEVERITY.CRITICAL)))]);return{recentCount:t[0]?.count??0,criticalCount:r[0]?.count??0}}catch{return{recentCount:0,criticalCount:0}}}[a,i,c]=u.then?(await u)():u,e.s(["GET",()=>d,"dynamic",0,"force-dynamic"]),r()}catch(e){r(e)}},!1),587506,e=>e.a(async(t,r)=>{try{var n=e.i(78315),s=e.i(586961),o=e.i(196657),a=e.i(899733),i=e.i(233979),l=e.i(631683),c=e.i(840960),u=e.i(711373),d=e.i(699699),p=e.i(521140),h=e.i(205260),f=e.i(500249),m=e.i(431740),g=e.i(82608),y=e.i(635207),C=e.i(193695);e.i(708038);var v=e.i(447430),x=e.i(596621),_=t([x]);[x]=_.then?(await _)():_;let R=new n.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/health/enterprise/route",pathname:"/api/health/enterprise",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/api/health/enterprise/route.ts",nextConfigOutput:"",userland:x}),{workAsyncStorage:w,workUnitAsyncStorage:O,serverHooks:F}=R;function E(){return(0,o.patchFetch)({workAsyncStorage:w,workUnitAsyncStorage:O})}async function b(e,t,r){R.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let n="/api/health/enterprise/route";n=n.replace(/\/index$/,"")||"/";let o=await R.prepare(e,t,{srcPage:n,multiZoneDraftMode:!1});if(!o)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:x,params:_,nextConfig:E,parsedUrl:b,isDraftMode:w,prerenderManifest:O,routerServerContext:F,isOnDemandRevalidate:A,revalidateOnlyGenerated:q,resolvedPathname:S,clientReferenceManifest:I,serverActionsManifest:T}=o,D=(0,c.normalizeAppPath)(n),M=!!(O.dynamicRoutes[D]||O.routes[S]),L=async()=>((null==F?void 0:F.render404)?await F.render404(e,t,b,!1):t.end("This page could not be found"),null);if(M&&!w){let e=!!O.routes[S],t=O.dynamicRoutes[D];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await L();throw new C.NoFallbackError}}let k=null;!M||R.isDev||w||(k=S,k="/index"===k?"/":k);let N=!0===R.isDev||!M,P=M&&!N;T&&I&&(0,l.setManifestsSingleton)({page:n,clientReferenceManifest:I,serverActionsManifest:T});let U=e.method||"GET",j=(0,i.getTracer)(),H=j.getActiveScopeSpan(),z={params:_,prerenderManifest:O,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:N,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n,s)=>R.onRequestError(e,t,n,s,F)},sharedContext:{buildId:x}},B=new u.NodeNextRequest(e),G=new u.NodeNextResponse(t),$=d.NextRequestAdapter.fromNodeNextRequest(B,(0,d.signalFromNodeResponse)(t));try{let o=async e=>R.handle($,z).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=j.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=r.get("next.route");if(s){let t=`${U} ${s}`;e.setAttributes({"next.route":s,"http.route":s,"next.span_name":t}),e.updateName(t)}else e.updateName(`${U} ${n}`)}),l=!!(0,a.getRequestMeta)(e,"minimalMode"),c=async a=>{var i,c;let u=async({previousCacheEntry:s})=>{try{if(!l&&A&&q&&!s)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await o(a);e.fetchMetrics=z.renderOpts.fetchMetrics;let i=z.renderOpts.pendingWaitUntil;i&&r.waitUntil&&(r.waitUntil(i),i=void 0);let c=z.renderOpts.collectedTags;if(!M)return await (0,f.sendResponse)(B,G,n,z.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(n.headers);c&&(t[y.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==z.renderOpts.collectedRevalidate&&!(z.renderOpts.collectedRevalidate>=y.INFINITE_CACHE)&&z.renderOpts.collectedRevalidate,s=void 0===z.renderOpts.collectedExpire||z.renderOpts.collectedExpire>=y.INFINITE_CACHE?void 0:z.renderOpts.collectedExpire;return{value:{kind:v.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:s}}}}catch(t){throw(null==s?void 0:s.isStale)&&await R.onRequestError(e,t,{routerKind:"App Router",routePath:n,routeType:"route",revalidateReason:(0,h.getRevalidateReason)({isStaticGeneration:P,isOnDemandRevalidate:A})},!1,F),t}},d=await R.handleResponse({req:e,nextConfig:E,cacheKey:k,routeKind:s.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:O,isRoutePPREnabled:!1,isOnDemandRevalidate:A,revalidateOnlyGenerated:q,responseGenerator:u,waitUntil:r.waitUntil,isMinimalMode:l});if(!M)return null;if((null==d||null==(i=d.value)?void 0:i.kind)!==v.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(c=d.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});l||t.setHeader("x-nextjs-cache",A?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),w&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,m.fromNodeOutgoingHttpHeaders)(d.value.headers);return l&&M||p.delete(y.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,g.getCacheControlHeader)(d.cacheControl)),await (0,f.sendResponse)(B,G,new Response(d.value.body,{headers:p,status:d.value.status||200})),null};H?await c(H):await j.withPropagatedContext(e.headers,()=>j.trace(p.BaseServerSpan.handleRequest,{spanName:`${U} ${n}`,kind:i.SpanKind.SERVER,attributes:{"http.method":U,"http.target":e.url}},c))}catch(t){if(t instanceof C.NoFallbackError||await R.onRequestError(e,t,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,h.getRevalidateReason)({isStaticGeneration:P,isOnDemandRevalidate:A})},!1,F),M)throw t;return await (0,f.sendResponse)(B,G,new Response(null,{status:500})),null}}e.s(["handler",()=>b,"patchFetch",()=>E,"routeModule",()=>R,"serverHooks",()=>F,"workAsyncStorage",()=>w,"workUnitAsyncStorage",()=>O]),r()}catch(e){r(e)}},!1),443460,e=>{e.v(t=>Promise.all(["server/chunks/[externals]_ioredis_c74819ca._.js"].map(t=>e.l(t))).then(()=>t(693545)))},234177,e=>{e.v(t=>Promise.all(["server/chunks/[externals]_node:inspector_7a4283c6._.js"].map(t=>e.l(t))).then(()=>t(237221)))},986174,e=>{e.v(t=>Promise.all(["server/chunks/c427b_@opentelemetry_resources_build_esm_detectors_platform_node_machine-id_ad4d46d0._.js"].map(t=>e.l(t))).then(()=>t(581432)))},720625,e=>{e.v(t=>Promise.all(["server/chunks/13d64_build_esm_detectors_platform_node_machine-id_getMachineId-linux_86e39ac7.js"].map(t=>e.l(t))).then(()=>t(245205)))},877433,e=>{e.v(t=>Promise.all(["server/chunks/c427b_@opentelemetry_resources_build_esm_detectors_platform_node_machine-id_d49f846e._.js"].map(t=>e.l(t))).then(()=>t(825582)))},992499,e=>{e.v(t=>Promise.all(["server/chunks/c427b_@opentelemetry_resources_build_esm_detectors_platform_node_machine-id_4b7659e4._.js"].map(t=>e.l(t))).then(()=>t(782974)))},813896,e=>{e.v(t=>Promise.all(["server/chunks/13d64_build_esm_detectors_platform_node_machine-id_getMachineId-unsupported_5b0bd341.js"].map(t=>e.l(t))).then(()=>t(388463)))}];

//# debugId=0d8bd5ac-54ff-adc4-eafa-0f91f3b6e41e
//# sourceMappingURL=%5Broot-of-the-server%5D__3683716a._.js.map