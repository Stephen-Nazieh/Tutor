;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="0c8c1fbf-9552-5008-52c3-28f208ce1e61")}catch(e){}}();
module.exports=[235807,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(921377)},338471,a=>{"use strict";let b=Symbol.for("drizzle:entityKind");function c(a,c){if(!a||"object"!=typeof a)return!1;if(a instanceof c)return!0;if(!Object.prototype.hasOwnProperty.call(c,b))throw Error(`Class "${c.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let d=Object.getPrototypeOf(a).constructor;if(d)for(;d;){if(b in d&&d[b]===c[b])return!0;d=Object.getPrototypeOf(d)}return!1}Symbol.for("drizzle:hasOwnEntityKind"),a.s(["entityKind",()=>b,"is",()=>c])},881824,a=>{"use strict";var b=a.i(338471);class c{static [b.entityKind]="ConsoleLogWriter";write(a){console.log(a)}}class d{static [b.entityKind]="DefaultLogger";writer;constructor(a){this.writer=a?.writer??new c}logQuery(a,b){let c=b.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),d=c.length?` -- params: [${c.join(", ")}]`:"";this.writer.write(`Query: ${a}${d}`)}}class e{static [b.entityKind]="NoopLogger";logQuery(){}}a.s(["DefaultLogger",()=>d,"NoopLogger",()=>e])},93550,995559,a=>{"use strict";let b,c;function d(a,...b){return a(...b)}a.s(["iife",()=>d],995559);let e={startActiveSpan:(a,e)=>b?(c||(c=b.trace.getTracer("drizzle-orm","0.38.4")),d((b,c)=>c.startActiveSpan(a,a=>{try{return e(a)}catch(c){throw a.setStatus({code:b.SpanStatusCode.ERROR,message:c instanceof Error?c.message:"Unknown error"}),c}finally{a.end()}}),b,c)):e()};a.s(["tracer",()=>e],93550)},453842,463395,283378,399182,96707,349558,18e4,a=>{"use strict";var b,c=a.i(338471);let d=Symbol.for("drizzle:Name"),e=Symbol.for("drizzle:Schema"),f=Symbol.for("drizzle:Columns"),g=Symbol.for("drizzle:ExtraConfigColumns"),h=Symbol.for("drizzle:OriginalName"),i=Symbol.for("drizzle:BaseName"),j=Symbol.for("drizzle:IsAlias"),k=Symbol.for("drizzle:ExtraConfigBuilder"),l=Symbol.for("drizzle:IsDrizzleTable");class m{static [c.entityKind]="Table";static Symbol={Name:d,Schema:e,OriginalName:h,Columns:f,ExtraConfigColumns:g,BaseName:i,IsAlias:j,ExtraConfigBuilder:k};[d];[h];[e];[f];[g];[i];[j]=!1;[l]=!0;[k]=void 0;constructor(a,b,c){this[d]=this[h]=a,this[e]=b,this[i]=c}}function n(a){return a[d]}function o(a){return`${a[e]??"public"}.${a[d]}`}a.s(["Columns",()=>f,"IsAlias",()=>j,"Table",()=>m,"getTableName",()=>n,"getTableUniqueName",()=>o],453842);class p{constructor(a,b){this.table=a,this.config=b,this.name=b.name,this.keyAsName=b.keyAsName,this.notNull=b.notNull,this.default=b.default,this.defaultFn=b.defaultFn,this.onUpdateFn=b.onUpdateFn,this.hasDefault=b.hasDefault,this.primary=b.primaryKey,this.isUnique=b.isUnique,this.uniqueName=b.uniqueName,this.uniqueType=b.uniqueType,this.dataType=b.dataType,this.columnType=b.columnType,this.generated=b.generated,this.generatedIdentity=b.generatedIdentity}static [c.entityKind]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(a){return a}mapToDriverValue(a){return a}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}a.s(["Column",()=>p],463395);class q{static [c.entityKind]="ColumnBuilder";config;constructor(a,b,c){this.config={name:a,keyAsName:""===a,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:b,columnType:c,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(a){return this.config.default=a,this.config.hasDefault=!0,this}$defaultFn(a){return this.config.defaultFn=a,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(a){return this.config.onUpdateFn=a,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(a){""===this.config.name&&(this.config.name=a)}}class r{static [c.entityKind]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=void 0===a?"no action":a,this}onDelete(a){return this._onDelete=void 0===a?"no action":a,this}build(a){return new s(a,this)}}class s{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [c.entityKind]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),e=b.map(a=>a.name),f=c.map(a=>a.name),g=[this.table[d],...e,c[0].table[d],...f];return a??`${g.join("_")}_fk`}}var t=a.i(995559);function u(a,b){return`${a[d]}_${b.join("_")}_unique`}class v{constructor(a,b){this.name=b,this.columns=a}static [c.entityKind]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(a){return new x(a,this.columns,this.nullsNotDistinctConfig,this.name)}}class w{static [c.entityKind]="PgUniqueOnConstraintBuilder";name;constructor(a){this.name=a}on(...a){return new v(a,this.name)}}class x{constructor(a,b,c,d){this.table=a,this.columns=b,this.name=d??u(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=c}static [c.entityKind]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function y(a,b,c){for(let d=b;d<a.length;d++){let e=a[d];if("\\"===e){d++;continue}if('"'===e)return[a.slice(b,d).replace(/\\/g,""),d+1];if(!c&&(","===e||"}"===e))return[a.slice(b,d).replace(/\\/g,""),d]}return[a.slice(b).replace(/\\/g,""),a.length]}class z extends q{foreignKeyConfigs=[];static [c.entityKind]="PgColumnBuilder";array(a){return new D(this.config.name,this,a)}references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a,b){return this.config.isUnique=!0,this.config.uniqueName=a,this.config.uniqueType=b?.nulls,this}generatedAlwaysAs(a){return this.config.generated={as:a,type:"always",mode:"stored"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>(0,t.iife)((c,d)=>{let e=new r(()=>({columns:[a],foreignColumns:[c()]}));return d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)},c,d))}buildExtraConfigColumn(a){return new B(a,this.config)}}class A extends p{constructor(a,b){b.uniqueName||(b.uniqueName=u(a,[b.name])),super(a,b),this.table=a}static [c.entityKind]="PgColumn"}class B extends A{static [c.entityKind]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(a){return this.indexConfig.opClass=a,this}}class C{static [c.entityKind]="IndexedColumn";constructor(a,b,c,d){this.name=a,this.keyAsName=b,this.type=c,this.indexConfig=d}name;keyAsName;type;indexConfig}class D extends z{static [c.entityKind]="PgArrayBuilder";constructor(a,b,c){super(a,"array","PgArray"),this.config.baseBuilder=b,this.config.size=c}build(a){let b=this.config.baseBuilder.build(a);return new E(a,this.config,b)}}class E extends A{constructor(a,b,c,d){super(a,b),this.baseColumn=c,this.range=d,this.size=b.size}size;static [c.entityKind]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(a){return"string"==typeof a&&(a=function(a){let[b]=function a(b,c=0){let d=[],e=c,f=!1;for(;e<b.length;){let g=b[e];if(","===g){(f||e===c)&&d.push(""),f=!0,e++;continue}if(f=!1,"\\"===g){e+=2;continue}if('"'===g){let[a,c]=y(b,e+1,!0);d.push(a),e=c;continue}if("}"===g)return[d,e+1];if("{"===g){let[c,f]=a(b,e+1);d.push(c),e=f;continue}let[h,i]=y(b,e,!1);d.push(h),e=i}return[d,e]}(a,1);return b}(a)),a.map(a=>this.baseColumn.mapFromDriverValue(a))}mapToDriverValue(a,b=!1){let d=a.map(a=>null===a?null:(0,c.is)(this.baseColumn,E)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return b?d:function a(b){return`{${b.map(b=>Array.isArray(b)?a(b):"string"==typeof b?`"${b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${b}`).join(",")}}`}(d)}}a.s(["IndexedColumn",()=>C,"PgColumn",()=>A,"PgColumnBuilder",()=>z],283378);let F=Symbol.for("drizzle:isPgEnum");function G(a){return!!a&&"function"==typeof a&&F in a&&!0===a[F]}class H extends z{static [c.entityKind]="PgEnumColumnBuilder";constructor(a,b){super(a,"string","PgEnumColumn"),this.config.enum=b}build(a){return new I(a,this.config)}}class I extends A{static [c.entityKind]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(a,b){super(a,b),this.enum=b.enum}getSQLType(){return this.enum.enumName}}function J(a,b){let c;return c=Object.assign(a=>new H(a??"",c),{enumName:a,enumValues:b,schema:void 0,[F]:!0})}a.s(["isPgEnum",()=>G,"pgEnum",()=>J],399182);class K{static [c.entityKind]="Subquery";constructor(a,b,c,d=!1){this._={brand:"Subquery",sql:a,selectedFields:b,alias:c,isWith:d}}}class L extends K{static [c.entityKind]="WithSubquery"}a.s(["Subquery",()=>K,"WithSubquery",()=>L],96707);var M=a.i(93550);let N=Symbol.for("drizzle:ViewBaseConfig");a.s(["ViewBaseConfig",()=>N],349558);class O{static [c.entityKind]="FakePrimitiveParam"}function P(a){return null!=a&&"function"==typeof a.getSQL}class Q{static [c.entityKind]="StringChunk";value;constructor(a){this.value=Array.isArray(a)?a:[a]}getSQL(){return new R([this])}}class R{constructor(a){this.queryChunks=a}static [c.entityKind]="SQL";decoder=U;shouldInlineParams=!1;append(a){return this.queryChunks.push(...a.queryChunks),this}toQuery(a){return M.tracer.startActiveSpan("drizzle.buildSQL",b=>{let c=this.buildQueryFromSourceParams(this.queryChunks,a);return b?.setAttributes({"drizzle.query.text":c.sql,"drizzle.query.params":JSON.stringify(c.params)}),c})}buildQueryFromSourceParams(a,b){let d=Object.assign({},b,{inlineParams:b.inlineParams||this.shouldInlineParams,paramStartIndex:b.paramStartIndex||{value:0}}),{casing:e,escapeName:f,escapeParam:g,prepareTyping:h,inlineParams:i,paramStartIndex:k}=d;var l=a.map(a=>{if((0,c.is)(a,Q))return{sql:a.value.join(""),params:[]};if((0,c.is)(a,S))return{sql:f(a.value),params:[]};if(void 0===a)return{sql:"",params:[]};if(Array.isArray(a)){let b=[new Q("(")];for(let[c,d]of a.entries())b.push(d),c<a.length-1&&b.push(new Q(", "));return b.push(new Q(")")),this.buildQueryFromSourceParams(b,d)}if((0,c.is)(a,R))return this.buildQueryFromSourceParams(a.queryChunks,{...d,inlineParams:i||a.shouldInlineParams});if((0,c.is)(a,m)){let b=a[m.Symbol.Schema],c=a[m.Symbol.Name];return{sql:void 0===b?f(c):f(b)+"."+f(c),params:[]}}if((0,c.is)(a,p)){let c=e.getColumnCasing(a);if("indexes"===b.invokeSource)return{sql:f(c),params:[]};let d=a.table[m.Symbol.Schema];return{sql:a.table[j]||void 0===d?f(a.table[m.Symbol.Name])+"."+f(c):f(d)+"."+f(a.table[m.Symbol.Name])+"."+f(c),params:[]}}if((0,c.is)(a,ab)){let b=a[N].schema,c=a[N].name;return{sql:void 0===b?f(c):f(b)+"."+f(c),params:[]}}if((0,c.is)(a,W)){if((0,c.is)(a.value,$))return{sql:g(k.value++,a),params:[a],typings:["none"]};let b=null===a.value?null:a.encoder.mapToDriverValue(a.value);if((0,c.is)(b,R))return this.buildQueryFromSourceParams([b],d);if(i)return{sql:this.mapInlineParam(b,d),params:[]};let e=["none"];return h&&(e=[h(a.encoder)]),{sql:g(k.value++,b),params:[b],typings:e}}return(0,c.is)(a,$)?{sql:g(k.value++,a),params:[a],typings:["none"]}:(0,c.is)(a,R.Aliased)&&void 0!==a.fieldAlias?{sql:f(a.fieldAlias),params:[]}:(0,c.is)(a,K)?a._.isWith?{sql:f(a._.alias),params:[]}:this.buildQueryFromSourceParams([new Q("("),a._.sql,new Q(") "),new S(a._.alias)],d):G(a)?a.schema?{sql:f(a.schema)+"."+f(a.enumName),params:[]}:{sql:f(a.enumName),params:[]}:P(a)?a.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([a.getSQL()],d):this.buildQueryFromSourceParams([new Q("("),a.getSQL(),new Q(")")],d):i?{sql:this.mapInlineParam(a,d),params:[]}:{sql:g(k.value++,a),params:[a],typings:["none"]}});let n={sql:"",params:[]};for(let a of l)n.sql+=a.sql,n.params.push(...a.params),a.typings?.length&&(n.typings||(n.typings=[]),n.typings.push(...a.typings));return n}mapInlineParam(a,{escapeString:b}){if(null===a)return"null";if("number"==typeof a||"boolean"==typeof a)return a.toString();if("string"==typeof a)return b(a);if("object"==typeof a){let c=a.toString();return"[object Object]"===c?b(JSON.stringify(a)):b(c)}throw Error("Unexpected param value: "+a)}getSQL(){return this}as(a){return void 0===a?this:new R.Aliased(this,a)}mapWith(a){return this.decoder="function"==typeof a?{mapFromDriverValue:a}:a,this}inlineParams(){return this.shouldInlineParams=!0,this}if(a){return a?this:void 0}}class S{constructor(a){this.value=a}static [c.entityKind]="Name";brand;getSQL(){return new R([this])}}function T(a){return"object"==typeof a&&null!==a&&"mapToDriverValue"in a&&"function"==typeof a.mapToDriverValue}let U={mapFromDriverValue:a=>a},V={mapToDriverValue:a=>a};({...U,...V});class W{constructor(a,b=V){this.value=a,this.encoder=b}static [c.entityKind]="Param";brand;getSQL(){return new R([this])}}function X(a,...b){let c=[];for(let[d,e]of((b.length>0||a.length>0&&""!==a[0])&&c.push(new Q(a[0])),b.entries()))c.push(e,new Q(a[d+1]));return new R(c)}(b=X||(X={})).empty=function(){return new R([])},b.fromList=function(a){return new R(a)},b.raw=function(a){return new R([new Q(a)])},b.join=function(a,b){let c=[];for(let[d,e]of a.entries())d>0&&void 0!==b&&c.push(b),c.push(e);return new R(c)},b.identifier=function(a){return new S(a)},b.placeholder=function(a){return new $(a)},b.param=function(a,b){return new W(a,b)};var Y=R||(R={});class Z{constructor(a,b){this.sql=a,this.fieldAlias=b}static [c.entityKind]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new Z(this.sql,this.fieldAlias)}}Y.Aliased=Z;class ${constructor(a){this.name=a}static [c.entityKind]="Placeholder";getSQL(){return new R([this])}}function _(a,b){return a.map(a=>{if((0,c.is)(a,$)){if(!(a.name in b))throw Error(`No value for placeholder "${a.name}" was provided`);return b[a.name]}if((0,c.is)(a,W)&&(0,c.is)(a.value,$)){if(!(a.value.name in b))throw Error(`No value for placeholder "${a.value.name}" was provided`);return a.encoder.mapToDriverValue(b[a.value.name])}return a})}let aa=Symbol.for("drizzle:IsDrizzleView");class ab{static [c.entityKind]="View";[N];[aa]=!0;constructor({name:a,schema:b,selectedFields:c,query:d}){this[N]={name:a,originalName:a,schema:b,selectedFields:c,query:d,isExisting:!d,isAlias:!1}}getSQL(){return new R([this])}}p.prototype.getSQL=function(){return new R([this])},m.prototype.getSQL=function(){return new R([this])},K.prototype.getSQL=function(){return new R([this])},a.s(["Param",()=>W,"Placeholder",()=>$,"SQL",()=>R,"StringChunk",()=>Q,"View",()=>ab,"fillPlaceholders",()=>_,"isDriverValueEncoder",()=>T,"isSQLWrapper",()=>P,"sql",()=>X],18e4)},74568,a=>{"use strict";var b=a.i(463395),c=a.i(338471),d=a.i(18e4),e=a.i(96707),f=a.i(453842),g=a.i(349558);function h(a,e,g){let h={},i=a.reduce((a,{path:i,field:j},k)=>{let l;l=(0,c.is)(j,b.Column)?j:(0,c.is)(j,d.SQL)?j.decoder:j.sql.decoder;let m=a;for(let[a,d]of i.entries())if(a<i.length-1)d in m||(m[d]={}),m=m[d];else{let a=e[k],n=m[d]=null===a?null:l.mapFromDriverValue(a);if(g&&(0,c.is)(j,b.Column)&&2===i.length){let a=i[0];a in h?"string"==typeof h[a]&&h[a]!==(0,f.getTableName)(j.table)&&(h[a]=!1):h[a]=null===n&&(0,f.getTableName)(j.table)}}return a},{});if(g&&Object.keys(h).length>0)for(let[a,b]of Object.entries(h))"string"!=typeof b||g[b]||(i[a]=null);return i}function i(a,b){let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let[a,b]of c.entries())if(b!==d[a])return!1;return!0}function j(a,e){let g=Object.entries(e).filter(([,a])=>void 0!==a).map(([e,g])=>(0,c.is)(g,d.SQL)||(0,c.is)(g,b.Column)?[e,g]:[e,new d.Param(g,a[f.Table.Symbol.Columns][e])]);if(0===g.length)throw Error("No values to set");return Object.fromEntries(g)}function k(a,b){for(let c of b)for(let b of Object.getOwnPropertyNames(c.prototype))"constructor"!==b&&Object.defineProperty(a.prototype,b,Object.getOwnPropertyDescriptor(c.prototype,b)||Object.create(null))}function l(a){return a[f.Table.Symbol.Columns]}function m(a){return(0,c.is)(a,e.Subquery)?a._.alias:(0,c.is)(a,d.View)?a[g.ViewBaseConfig].name:(0,c.is)(a,d.SQL)?void 0:a[f.Table.Symbol.IsAlias]?a[f.Table.Symbol.Name]:a[f.Table.Symbol.BaseName]}function n(a,b){return{name:"string"==typeof a&&a.length>0?a:"",config:"object"==typeof a?a:b}}function o(a){if("object"!=typeof a||null===a||"Object"!==a.constructor.name)return!1;if("logger"in a){let b=typeof a.logger;return"boolean"===b||"object"===b&&"function"==typeof a.logger.logQuery||"undefined"===b}if("schema"in a){let b=typeof a.logger;return"object"===b||"undefined"===b}if("casing"in a){let b=typeof a.logger;return"string"===b||"undefined"===b}if("mode"in a)return"default"===a.mode&&"planetscale"===a.mode&&void 0===a.mode;if("connection"in a){let b=typeof a.connection;return"string"===b||"object"===b||"undefined"===b}if("client"in a){let b=typeof a.client;return"object"===b||"function"===b||"undefined"===b}return 0===Object.keys(a).length}a.s(["applyMixins",()=>k,"getColumnNameAndConfig",()=>n,"getTableColumns",()=>l,"getTableLikeName",()=>m,"haveSameKeys",()=>i,"isConfig",()=>o,"mapResultRow",()=>h,"mapUpdateSet",()=>j,"orderSelectedFields",()=>function a(e,g){return Object.entries(e).reduce((e,[h,i])=>{if("string"!=typeof h)return e;let j=g?[...g,h]:[h];return(0,c.is)(i,b.Column)||(0,c.is)(i,d.SQL)||(0,c.is)(i,d.SQL.Aliased)?e.push({path:j,field:i}):(0,c.is)(i,f.Table)?e.push(...a(i[f.Table.Symbol.Columns],j)):e.push(...a(i,j)),e},[])}])},702462,816882,779272,740323,900473,436896,802094,17925,81454,326711,999367,472899,a=>{"use strict";var b=a.i(338471),c=a.i(74568),d=a.i(283378),e=a.i(18e4),f=d;class g extends f.PgColumnBuilder{static [b.entityKind]="PgDateColumnBaseBuilder";defaultNow(){return this.default(e.sql`now()`)}}class h extends g{static [b.entityKind]="PgDateBuilder";constructor(a){super(a,"date","PgDate")}build(a){return new i(a,this.config)}}class i extends d.PgColumn{static [b.entityKind]="PgDate";getSQLType(){return"date"}mapFromDriverValue(a){return new Date(a)}mapToDriverValue(a){return a.toISOString()}}class j extends g{static [b.entityKind]="PgDateStringBuilder";constructor(a){super(a,"string","PgDateString")}build(a){return new k(a,this.config)}}class k extends d.PgColumn{static [b.entityKind]="PgDateString";getSQLType(){return"date"}}function l(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return e?.mode==="date"?new h(d):new j(d)}a.s(["PgDate",()=>i,"PgDateString",()=>k,"date",()=>l],702462);var m=d;class n extends m.PgColumnBuilder{static [b.entityKind]="PgJsonBuilder";constructor(a){super(a,"json","PgJson")}build(a){return new o(a,this.config)}}class o extends m.PgColumn{static [b.entityKind]="PgJson";constructor(a,b){super(a,b)}getSQLType(){return"json"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function p(a){return new n(a??"")}a.s(["PgJson",()=>o,"json",()=>p],816882);var q=d;class r extends q.PgColumnBuilder{static [b.entityKind]="PgJsonbBuilder";constructor(a){super(a,"json","PgJsonb")}build(a){return new s(a,this.config)}}class s extends q.PgColumn{static [b.entityKind]="PgJsonb";constructor(a,b){super(a,b)}getSQLType(){return"jsonb"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function t(a){return new r(a??"")}a.s(["PgJsonb",()=>s,"jsonb",()=>t],779272);var u=d;class v extends u.PgColumnBuilder{static [b.entityKind]="PgNumericBuilder";constructor(a,b,c){super(a,"string","PgNumeric"),this.config.precision=b,this.config.scale=c}build(a){return new w(a,this.config)}}class w extends u.PgColumn{static [b.entityKind]="PgNumeric";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function x(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new v(d,e?.precision,e?.scale)}a.s(["PgNumeric",()=>w,"numeric",()=>x],740323);var y=d;class z extends g{constructor(a,b,c){super(a,"string","PgTime"),this.withTimezone=b,this.precision=c,this.config.withTimezone=b,this.config.precision=c}static [b.entityKind]="PgTimeBuilder";build(a){return new A(a,this.config)}}class A extends y.PgColumn{static [b.entityKind]="PgTime";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`time${a}${this.withTimezone?" with time zone":""}`}}function B(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new z(d,e.withTimezone??!1,e.precision)}a.s(["PgTime",()=>A,"time",()=>B],900473);var C=d;class D extends g{static [b.entityKind]="PgTimestampBuilder";constructor(a,b,c){super(a,"date","PgTimestamp"),this.config.withTimezone=b,this.config.precision=c}build(a){return new E(a,this.config)}}class E extends C.PgColumn{static [b.entityKind]="PgTimestamp";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":` (${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=a=>new Date(this.withTimezone?a:a+"+0000");mapToDriverValue=a=>a.toISOString()}class F extends g{static [b.entityKind]="PgTimestampStringBuilder";constructor(a,b,c){super(a,"string","PgTimestampString"),this.config.withTimezone=b,this.config.precision=c}build(a){return new G(a,this.config)}}class G extends C.PgColumn{static [b.entityKind]="PgTimestampString";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}}function H(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return e?.mode==="string"?new F(d,e.withTimezone??!1,e.precision):new D(d,e?.withTimezone??!1,e?.precision)}a.s(["PgTimestamp",()=>E,"PgTimestampString",()=>G,"timestamp",()=>H],436896);var I=d;class J extends I.PgColumnBuilder{static [b.entityKind]="PgUUIDBuilder";constructor(a){super(a,"string","PgUUID")}defaultRandom(){return this.default(e.sql`gen_random_uuid()`)}build(a){return new K(a,this.config)}}class K extends I.PgColumn{static [b.entityKind]="PgUUID";getSQLType(){return"uuid"}}function L(a){return new J(a??"")}a.s(["PgUUID",()=>K,"uuid",()=>L],802094);var M=a.i(453842),N=d,O=d;class P extends O.PgColumnBuilder{static [b.entityKind]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"always",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"byDefault",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class Q extends P{static [b.entityKind]="PgBigInt53Builder";constructor(a){super(a,"number","PgBigInt53")}build(a){return new R(a,this.config)}}class R extends N.PgColumn{static [b.entityKind]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class S extends P{static [b.entityKind]="PgBigInt64Builder";constructor(a){super(a,"bigint","PgBigInt64")}build(a){return new T(a,this.config)}}class T extends N.PgColumn{static [b.entityKind]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(a){return BigInt(a)}}function U(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return"number"===e.mode?new Q(d):new S(d)}var V=d;class W extends V.PgColumnBuilder{static [b.entityKind]="PgBigSerial53Builder";constructor(a){super(a,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new X(a,this.config)}}class X extends V.PgColumn{static [b.entityKind]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class Y extends V.PgColumnBuilder{static [b.entityKind]="PgBigSerial64Builder";constructor(a){super(a,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(a){return new Z(a,this.config)}}class Z extends V.PgColumn{static [b.entityKind]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(a){return BigInt(a)}}function $(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return"number"===e.mode?new W(d):new Y(d)}var _=d;class aa extends _.PgColumnBuilder{static [b.entityKind]="PgBooleanBuilder";constructor(a){super(a,"boolean","PgBoolean")}build(a){return new ab(a,this.config)}}class ab extends _.PgColumn{static [b.entityKind]="PgBoolean";getSQLType(){return"boolean"}}function ac(a){return new aa(a??"")}a.s(["boolean",()=>ac],17925);var ad=d;class ae extends ad.PgColumnBuilder{static [b.entityKind]="PgCharBuilder";constructor(a,b){super(a,"string","PgChar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new af(a,this.config)}}class af extends ad.PgColumn{static [b.entityKind]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function ag(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new ae(d,e)}var ah=d;class ai extends ah.PgColumnBuilder{static [b.entityKind]="PgCidrBuilder";constructor(a){super(a,"string","PgCidr")}build(a){return new aj(a,this.config)}}class aj extends ah.PgColumn{static [b.entityKind]="PgCidr";getSQLType(){return"cidr"}}function ak(a){return new ai(a??"")}var al=d;class am extends al.PgColumnBuilder{static [b.entityKind]="PgCustomColumnBuilder";constructor(a,b,c){super(a,"custom","PgCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new an(a,this.config)}}class an extends al.PgColumn{static [b.entityKind]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function ao(a){return(b,d)=>{let{name:e,config:f}=(0,c.getColumnNameAndConfig)(b,d);return new am(e,f,a)}}var ap=d;class aq extends ap.PgColumnBuilder{static [b.entityKind]="PgDoublePrecisionBuilder";constructor(a){super(a,"number","PgDoublePrecision")}build(a){return new ar(a,this.config)}}class ar extends ap.PgColumn{static [b.entityKind]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(a){return"string"==typeof a?Number.parseFloat(a):a}}function as(a){return new aq(a??"")}a.s(["doublePrecision",()=>as],81454);var at=d;class au extends at.PgColumnBuilder{static [b.entityKind]="PgInetBuilder";constructor(a){super(a,"string","PgInet")}build(a){return new av(a,this.config)}}class av extends at.PgColumn{static [b.entityKind]="PgInet";getSQLType(){return"inet"}}function aw(a){return new au(a??"")}var ax=d;class ay extends P{static [b.entityKind]="PgIntegerBuilder";constructor(a){super(a,"number","PgInteger")}build(a){return new az(a,this.config)}}class az extends ax.PgColumn{static [b.entityKind]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(a){return"string"==typeof a?Number.parseInt(a):a}}function aA(a){return new ay(a??"")}a.s(["integer",()=>aA],326711);var aB=d;class aC extends aB.PgColumnBuilder{static [b.entityKind]="PgIntervalBuilder";constructor(a,b){super(a,"string","PgInterval"),this.config.intervalConfig=b}build(a){return new aD(a,this.config)}}class aD extends aB.PgColumn{static [b.entityKind]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let a=this.fields?` ${this.fields}`:"",b=this.precision?`(${this.precision})`:"";return`interval${a}${b}`}}function aE(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new aC(d,e)}var aF=d;class aG extends aF.PgColumnBuilder{static [b.entityKind]="PgLineBuilder";constructor(a){super(a,"array","PgLine")}build(a){return new aH(a,this.config)}}class aH extends aF.PgColumn{static [b.entityKind]="PgLine";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c),Number.parseFloat(d)]}mapToDriverValue(a){return`{${a[0]},${a[1]},${a[2]}}`}}class aI extends aF.PgColumnBuilder{static [b.entityKind]="PgLineABCBuilder";constructor(a){super(a,"json","PgLineABC")}build(a){return new aJ(a,this.config)}}class aJ extends aF.PgColumn{static [b.entityKind]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return{a:Number.parseFloat(b),b:Number.parseFloat(c),c:Number.parseFloat(d)}}mapToDriverValue(a){return`{${a.a},${a.b},${a.c}}`}}function aK(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return e?.mode&&"tuple"!==e.mode?new aI(d):new aG(d)}var aL=d;class aM extends aL.PgColumnBuilder{static [b.entityKind]="PgMacaddrBuilder";constructor(a){super(a,"string","PgMacaddr")}build(a){return new aN(a,this.config)}}class aN extends aL.PgColumn{static [b.entityKind]="PgMacaddr";getSQLType(){return"macaddr"}}function aO(a){return new aM(a??"")}var aP=d;class aQ extends aP.PgColumnBuilder{static [b.entityKind]="PgMacaddr8Builder";constructor(a){super(a,"string","PgMacaddr8")}build(a){return new aR(a,this.config)}}class aR extends aP.PgColumn{static [b.entityKind]="PgMacaddr8";getSQLType(){return"macaddr8"}}function aS(a){return new aQ(a??"")}var aT=d;class aU extends aT.PgColumnBuilder{static [b.entityKind]="PgPointTupleBuilder";constructor(a){super(a,"array","PgPointTuple")}build(a){return new aV(a,this.config)}}class aV extends aT.PgColumn{static [b.entityKind]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c)]}return[a.x,a.y]}mapToDriverValue(a){return`(${a[0]},${a[1]})`}}class aW extends aT.PgColumnBuilder{static [b.entityKind]="PgPointObjectBuilder";constructor(a){super(a,"json","PgPointObject")}build(a){return new aX(a,this.config)}}class aX extends aT.PgColumn{static [b.entityKind]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return{x:Number.parseFloat(b),y:Number.parseFloat(c)}}return a}mapToDriverValue(a){return`(${a.x},${a.y})`}}function aY(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return e?.mode&&"tuple"!==e.mode?new aW(d):new aU(d)}var aZ=d;function a$(a,b){let c=new DataView(new ArrayBuffer(8));for(let d=0;d<8;d++)c.setUint8(d,a[b+d]);return c.getFloat64(0,!0)}function a_(a){let b=function(a){let b=[];for(let c=0;c<a.length;c+=2)b.push(Number.parseInt(a.slice(c,c+2),16));return new Uint8Array(b)}(a),c=0,d=b[0];c+=1;let e=new DataView(b.buffer),f=e.getUint32(c,1===d);if(c+=4,0x20000000&f&&(e.getUint32(c,1===d),c+=4),(65535&f)==1){let a=a$(b,c),d=a$(b,c+=8);return c+=8,[a,d]}throw Error("Unsupported geometry type")}class a0 extends aZ.PgColumnBuilder{static [b.entityKind]="PgGeometryBuilder";constructor(a){super(a,"array","PgGeometry")}build(a){return new a1(a,this.config)}}class a1 extends aZ.PgColumn{static [b.entityKind]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){return a_(a)}mapToDriverValue(a){return`point(${a[0]} ${a[1]})`}}class a2 extends aZ.PgColumnBuilder{static [b.entityKind]="PgGeometryObjectBuilder";constructor(a){super(a,"json","PgGeometryObject")}build(a){return new a3(a,this.config)}}class a3 extends aZ.PgColumn{static [b.entityKind]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){let b=a_(a);return{x:b[0],y:b[1]}}mapToDriverValue(a){return`point(${a.x} ${a.y})`}}function a4(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return e?.mode&&"tuple"!==e.mode?new a2(d):new a0(d)}var a5=d;class a6 extends a5.PgColumnBuilder{static [b.entityKind]="PgRealBuilder";constructor(a,b){super(a,"number","PgReal"),this.config.length=b}build(a){return new a7(a,this.config)}}class a7 extends a5.PgColumn{static [b.entityKind]="PgReal";constructor(a,b){super(a,b)}getSQLType(){return"real"}mapFromDriverValue=a=>"string"==typeof a?Number.parseFloat(a):a}function a8(a){return new a6(a??"")}var a9=d;class ba extends a9.PgColumnBuilder{static [b.entityKind]="PgSerialBuilder";constructor(a){super(a,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new bb(a,this.config)}}class bb extends a9.PgColumn{static [b.entityKind]="PgSerial";getSQLType(){return"serial"}}function bc(a){return new ba(a??"")}var bd=d;class be extends P{static [b.entityKind]="PgSmallIntBuilder";constructor(a){super(a,"number","PgSmallInt")}build(a){return new bf(a,this.config)}}class bf extends bd.PgColumn{static [b.entityKind]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=a=>"string"==typeof a?Number(a):a}function bg(a){return new be(a??"")}var bh=d;class bi extends bh.PgColumnBuilder{static [b.entityKind]="PgSmallSerialBuilder";constructor(a){super(a,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new bj(a,this.config)}}class bj extends bh.PgColumn{static [b.entityKind]="PgSmallSerial";getSQLType(){return"smallserial"}}function bk(a){return new bi(a??"")}var bl=d;class bm extends bl.PgColumnBuilder{static [b.entityKind]="PgTextBuilder";constructor(a,b){super(a,"string","PgText"),this.config.enumValues=b.enum}build(a){return new bn(a,this.config)}}class bn extends bl.PgColumn{static [b.entityKind]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function bo(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new bm(d,e)}a.s(["text",()=>bo],999367);var bp=d;class bq extends bp.PgColumnBuilder{static [b.entityKind]="PgVarcharBuilder";constructor(a,b){super(a,"string","PgVarchar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new br(a,this.config)}}class br extends bp.PgColumn{static [b.entityKind]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function bs(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new bq(d,e)}var bt=d;class bu extends bt.PgColumnBuilder{static [b.entityKind]="PgBinaryVectorBuilder";constructor(a,b){super(a,"string","PgBinaryVector"),this.config.dimensions=b.dimensions}build(a){return new bv(a,this.config)}}class bv extends bt.PgColumn{static [b.entityKind]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function bw(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new bu(d,e)}var bx=d;class by extends bx.PgColumnBuilder{static [b.entityKind]="PgHalfVectorBuilder";constructor(a,b){super(a,"array","PgHalfVector"),this.config.dimensions=b.dimensions}build(a){return new bz(a,this.config)}}class bz extends bx.PgColumn{static [b.entityKind]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function bA(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new by(d,e)}var bB=d;class bC extends bB.PgColumnBuilder{static [b.entityKind]="PgSparseVectorBuilder";constructor(a,b){super(a,"string","PgSparseVector"),this.config.dimensions=b.dimensions}build(a){return new bD(a,this.config)}}class bD extends bB.PgColumn{static [b.entityKind]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function bE(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new bC(d,e)}var bF=d;class bG extends bF.PgColumnBuilder{static [b.entityKind]="PgVectorBuilder";constructor(a,b){super(a,"array","PgVector"),this.config.dimensions=b.dimensions}build(a){return new bH(a,this.config)}}class bH extends bF.PgColumn{static [b.entityKind]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function bI(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new bG(d,e)}let bJ=Symbol.for("drizzle:PgInlineForeignKeys"),bK=Symbol.for("drizzle:EnableRLS");class bL extends M.Table{static [b.entityKind]="PgTable";static Symbol=Object.assign({},M.Table.Symbol,{InlineForeignKeys:bJ,EnableRLS:bK});[bJ]=[];[bK]=!1;[M.Table.Symbol.ExtraConfigBuilder]=void 0}let bM=(a,b,c)=>(function(a,b,c,d,e=a){let f=new bL(a,d,e),g="function"==typeof b?b({bigint:U,bigserial:$,boolean:ac,char:ag,cidr:ak,customType:ao,date:l,doublePrecision:as,inet:aw,integer:aA,interval:aE,json:p,jsonb:t,line:aK,macaddr:aO,macaddr8:aS,numeric:x,point:aY,geometry:a4,real:a8,serial:bc,smallint:bg,smallserial:bk,text:bo,time:B,timestamp:H,uuid:L,varchar:bs,bit:bw,halfvec:bA,sparsevec:bE,vector:bI}):b,h=Object.fromEntries(Object.entries(g).map(([a,b])=>{b.setName(a);let c=b.build(f);return f[bJ].push(...b.buildForeignKeys(c,f)),[a,c]})),i=Object.fromEntries(Object.entries(g).map(([a,b])=>(b.setName(a),[a,b.buildExtraConfigColumn(f)]))),j=Object.assign(f,h);return j[M.Table.Symbol.Columns]=h,j[M.Table.Symbol.ExtraConfigColumns]=i,c&&(j[bL.Symbol.ExtraConfigBuilder]=c),Object.assign(j,{enableRLS:()=>(j[bL.Symbol.EnableRLS]=!0,j)})})(a,b,c,void 0);a.s(["PgTable",()=>bL,"pgTable",()=>bM],472899)},466064,a=>{"use strict";var b=a.i(463395),c=a.i(338471),d=a.i(453842),e=a.i(18e4);function f(a,f){return!(0,e.isDriverValueEncoder)(f)||(0,e.isSQLWrapper)(a)||(0,c.is)(a,e.Param)||(0,c.is)(a,e.Placeholder)||(0,c.is)(a,b.Column)||(0,c.is)(a,d.Table)||(0,c.is)(a,e.View)?a:new e.Param(a,f)}let g=(a,b)=>e.sql`${a} = ${f(b,a)}`,h=(a,b)=>e.sql`${a} <> ${f(b,a)}`;function i(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new e.SQL(1===b.length?b:[new e.StringChunk("("),e.sql.join(b,new e.StringChunk(" and ")),new e.StringChunk(")")])}function j(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new e.SQL(1===b.length?b:[new e.StringChunk("("),e.sql.join(b,new e.StringChunk(" or ")),new e.StringChunk(")")])}function k(a){return e.sql`not ${a}`}let l=(a,b)=>e.sql`${a} > ${f(b,a)}`,m=(a,b)=>e.sql`${a} >= ${f(b,a)}`,n=(a,b)=>e.sql`${a} < ${f(b,a)}`,o=(a,b)=>e.sql`${a} <= ${f(b,a)}`;function p(a,b){return Array.isArray(b)?0===b.length?e.sql`false`:e.sql`${a} in ${b.map(b=>f(b,a))}`:e.sql`${a} in ${f(b,a)}`}function q(a,b){return Array.isArray(b)?0===b.length?e.sql`true`:e.sql`${a} not in ${b.map(b=>f(b,a))}`:e.sql`${a} not in ${f(b,a)}`}function r(a){return e.sql`${a} is null`}function s(a){return e.sql`${a} is not null`}function t(a){return e.sql`exists ${a}`}function u(a){return e.sql`not exists ${a}`}function v(a,b,c){return e.sql`${a} between ${f(b,a)} and ${f(c,a)}`}function w(a,b,c){return e.sql`${a} not between ${f(b,a)} and ${f(c,a)}`}function x(a,b){return e.sql`${a} like ${b}`}function y(a,b){return e.sql`${a} not like ${b}`}function z(a,b){return e.sql`${a} ilike ${b}`}function A(a,b){return e.sql`${a} not ilike ${b}`}a.s(["and",()=>i,"between",()=>v,"eq",()=>g,"exists",()=>t,"gt",()=>l,"gte",()=>m,"ilike",()=>z,"inArray",()=>p,"isNotNull",()=>s,"isNull",()=>r,"like",()=>x,"lt",()=>n,"lte",()=>o,"ne",()=>h,"not",()=>k,"notBetween",()=>w,"notExists",()=>u,"notIlike",()=>A,"notInArray",()=>q,"notLike",()=>y,"or",()=>j])},43692,a=>{"use strict";var b=a.i(18e4);function c(a){return b.sql`${a} asc`}function d(a){return b.sql`${a} desc`}a.s(["asc",()=>c,"desc",()=>d])},374565,543471,a=>{"use strict";var b=a.i(453842),c=a.i(463395),d=a.i(338471),e=a.i(472899);function f(...a){return a[0].columns?new g(a[0].columns,a[0].name):new g(a)}class g{static [d.entityKind]="PgPrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new h(a,this.columns,this.name)}}class h{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [d.entityKind]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[e.PgTable.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}a.s(["PrimaryKeyBuilder",()=>g,"primaryKey",()=>f],543471);var i=a.i(466064),j=a.i(43692),k=a.i(18e4);class l{constructor(a,c,d){this.sourceTable=a,this.referencedTable=c,this.relationName=d,this.referencedTableName=c[b.Table.Symbol.Name]}static [d.entityKind]="Relation";referencedTableName;fieldName}class m{constructor(a,b){this.table=a,this.config=b}static [d.entityKind]="Relations"}class n extends l{constructor(a,b,c,d){super(a,b,c?.relationName),this.config=c,this.isNullable=d}static [d.entityKind]="One";withFieldName(a){let b=new n(this.sourceTable,this.referencedTable,this.config,this.isNullable);return b.fieldName=a,b}}class o extends l{constructor(a,b,c){super(a,b,c?.relationName),this.config=c}static [d.entityKind]="Many";withFieldName(a){let b=new o(this.sourceTable,this.referencedTable,this.config);return b.fieldName=a,b}}function p(){return{and:i.and,between:i.between,eq:i.eq,exists:i.exists,gt:i.gt,gte:i.gte,ilike:i.ilike,inArray:i.inArray,isNull:i.isNull,isNotNull:i.isNotNull,like:i.like,lt:i.lt,lte:i.lte,ne:i.ne,not:i.not,notBetween:i.notBetween,notExists:i.notExists,notLike:i.notLike,notIlike:i.notIlike,notInArray:i.notInArray,or:i.or,sql:k.sql}}function q(){return{sql:k.sql,asc:j.asc,desc:j.desc}}function r(a,c){1===Object.keys(a).length&&"default"in a&&!(0,d.is)(a.default,b.Table)&&(a=a.default);let e={},f={},h={};for(let[i,j]of Object.entries(a))if((0,d.is)(j,b.Table)){let a=(0,b.getTableUniqueName)(j),c=f[a];for(let d of(e[a]=i,h[i]={tsName:i,dbName:j[b.Table.Symbol.Name],schema:j[b.Table.Symbol.Schema],columns:j[b.Table.Symbol.Columns],relations:c?.relations??{},primaryKey:c?.primaryKey??[]},Object.values(j[b.Table.Symbol.Columns])))d.primary&&h[i].primaryKey.push(d);let k=j[b.Table.Symbol.ExtraConfigBuilder]?.(j[b.Table.Symbol.ExtraConfigColumns]);if(k)for(let a of Object.values(k))(0,d.is)(a,g)&&h[i].primaryKey.push(...a.columns)}else if((0,d.is)(j,m)){let a,d=(0,b.getTableUniqueName)(j.table),g=e[d];for(let[b,e]of Object.entries(j.config(c(j.table))))if(g){let c=h[g];c.relations[b]=e,a&&c.primaryKey.push(...a)}else d in f||(f[d]={relations:{},primaryKey:a}),f[d].relations[b]=e}return{tables:h,tableNamesMap:e}}function s(a,b){return new m(a,a=>Object.fromEntries(Object.entries(b(a)).map(([a,b])=>[a,b.withFieldName(a)])))}function t(a,c,e){if((0,d.is)(e,n)&&e.config)return{fields:e.config.fields,references:e.config.references};let f=c[(0,b.getTableUniqueName)(e.referencedTable)];if(!f)throw Error(`Table "${e.referencedTable[b.Table.Symbol.Name]}" not found in schema`);let g=a[f];if(!g)throw Error(`Table "${f}" not found in schema`);let h=e.sourceTable,i=c[(0,b.getTableUniqueName)(h)];if(!i)throw Error(`Table "${h[b.Table.Symbol.Name]}" not found in schema`);let j=[];for(let a of Object.values(g.relations))(e.relationName&&e!==a&&a.relationName===e.relationName||!e.relationName&&a.referencedTable===e.sourceTable)&&j.push(a);if(j.length>1)throw e.relationName?Error(`There are multiple relations with name "${e.relationName}" in table "${f}"`):Error(`There are multiple relations between "${f}" and "${e.sourceTable[b.Table.Symbol.Name]}". Please specify relation name`);if(j[0]&&(0,d.is)(j[0],n)&&j[0].config)return{fields:j[0].config.references,references:j[0].config.fields};throw Error(`There is not enough information to infer relation "${i}.${e.fieldName}"`)}function u(a){return{one:function(b,c){return new n(a,b,c,c?.fields.reduce((a,b)=>a&&b.notNull,!0)??!1)},many:function(b,c){return new o(a,b,c)}}}a.s(["Many",()=>o,"One",()=>n,"createTableRelationsHelpers",()=>u,"extractTablesRelationalConfig",()=>r,"getOperators",()=>p,"getOrderByOperators",()=>q,"mapRelationalRow",()=>function a(b,e,f,g,h=a=>a){let i={};for(let[j,l]of g.entries())if(l.isJson){let c=e.relations[l.tsKey],g=f[j],k="string"==typeof g?JSON.parse(g):g;i[l.tsKey]=(0,d.is)(c,n)?k&&a(b,b[l.relationTableTsKey],k,l.selection,h):k.map(c=>a(b,b[l.relationTableTsKey],c,l.selection,h))}else{let a,b=h(f[j]),e=l.field;a=(0,d.is)(e,c.Column)?e:(0,d.is)(e,k.SQL)?e.decoder:e.sql.decoder,i[l.tsKey]=null===b?null:a.mapFromDriverValue(b)}return i},"normalizeRelation",()=>t,"relations",()=>s],374565)},914618,21863,996780,643391,a=>{"use strict";var b=a.i(463395),c=a.i(338471),d=a.i(18e4),e=a.i(453842),f=a.i(349558);class g{constructor(a){this.table=a}static [c.entityKind]="ColumnAliasProxyHandler";get(a,b){return"table"===b?this.table:a[b]}}class h{constructor(a,b){this.alias=a,this.replaceOriginalName=b}static [c.entityKind]="TableAliasProxyHandler";get(a,d){if(d===e.Table.Symbol.IsAlias)return!0;if(d===e.Table.Symbol.Name||this.replaceOriginalName&&d===e.Table.Symbol.OriginalName)return this.alias;if(d===f.ViewBaseConfig)return{...a[f.ViewBaseConfig],name:this.alias,isAlias:!0};if(d===e.Table.Symbol.Columns){let b=a[e.Table.Symbol.Columns];if(!b)return b;let c={};return Object.keys(b).map(d=>{c[d]=new Proxy(b[d],new g(new Proxy(a,this)))}),c}let h=a[d];return(0,c.is)(h,b.Column)?new Proxy(h,new g(new Proxy(a,this))):h}}class i{constructor(a){this.alias=a}static [c.entityKind]="RelationTableAliasProxyHandler";get(a,b){return"sourceTable"===b?j(a.sourceTable,this.alias):a[b]}}function j(a,b){return new Proxy(a,new h(b,!1))}function k(a,b){return new Proxy(a,new g(new Proxy(a.table,new h(b,!1))))}function l(a,b){return new d.SQL.Aliased(m(a.sql,b),a.fieldAlias)}function m(a,e){return d.sql.join(a.queryChunks.map(a=>(0,c.is)(a,b.Column)?k(a,e):(0,c.is)(a,d.SQL)?m(a,e):(0,c.is)(a,d.SQL.Aliased)?l(a,e):a))}function n(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(a=>a.toLowerCase()).join("_")}function o(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((a,b,c)=>a+(0===c?b.toLowerCase():`${b[0].toUpperCase()}${b.slice(1)}`),"")}function p(a){return a}a.s(["ColumnAliasProxyHandler",()=>g,"TableAliasProxyHandler",()=>h,"aliasedTable",()=>j,"aliasedTableColumn",()=>k,"mapColumnsInAliasedSQLToAlias",()=>l,"mapColumnsInSQLToAlias",()=>m],21863);class q{static [c.entityKind]="CasingCache";cache={};cachedTables={};convert;constructor(a){this.convert="snake_case"===a?n:"camelCase"===a?o:p}getColumnCasing(a){if(!a.keyAsName)return a.name;let b=a.table[e.Table.Symbol.Schema]??"public",c=a.table[e.Table.Symbol.OriginalName],d=`${b}.${c}.${a.name}`;return this.cache[d]||this.cacheTable(a.table),this.cache[d]}cacheTable(a){let b=a[e.Table.Symbol.Schema]??"public",c=a[e.Table.Symbol.OriginalName],d=`${b}.${c}`;if(!this.cachedTables[d]){for(let b of Object.values(a[e.Table.Symbol.Columns])){let a=`${d}.${b.name}`;this.cache[a]=this.convert(b.name)}this.cachedTables[d]=!0}}clearCache(){this.cache={},this.cachedTables={}}}class r extends Error{static [c.entityKind]="DrizzleError";constructor({message:a,cause:b}){super(a),this.name="DrizzleError",this.cause=b}}class s extends r{static [c.entityKind]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}a.s(["DrizzleError",()=>r,"TransactionRollbackError",()=>s],996780);var t=a.i(283378),u=a.i(702462),v=a.i(816882),w=a.i(779272),x=a.i(740323),y=a.i(900473),z=a.i(436896),A=a.i(802094),B=a.i(472899),C=a.i(374565),D=a.i(466064),E=a.i(96707),F=a.i(74568),G=d;class H extends G.View{static [c.entityKind]="PgViewBase"}a.s(["PgViewBase",()=>H],643391);class I{static [c.entityKind]="PgDialect";casing;constructor(a){this.casing=new q(a?.casing)}async migrate(a,b,c){let e="string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",f="string"==typeof c?"drizzle":c.migrationsSchema??"drizzle",g=d.sql`
			CREATE TABLE IF NOT EXISTS ${d.sql.identifier(f)}.${d.sql.identifier(e)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await b.execute(d.sql`CREATE SCHEMA IF NOT EXISTS ${d.sql.identifier(f)}`),await b.execute(g);let h=(await b.all(d.sql`select id, hash, created_at from ${d.sql.identifier(f)}.${d.sql.identifier(e)} order by created_at desc limit 1`))[0];await b.transaction(async b=>{for await(let c of a)if(!h||Number(h.created_at)<c.folderMillis){for(let a of c.sql)await b.execute(d.sql.raw(a));await b.execute(d.sql`insert into ${d.sql.identifier(f)}.${d.sql.identifier(e)} ("hash", "created_at") values(${c.hash}, ${c.folderMillis})`)}})}escapeName(a){return`"${a}"`}escapeParam(a){return`$${a+1}`}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[d.sql`with `];for(let[c,e]of a.entries())b.push(d.sql`${d.sql.identifier(e._.alias)} as (${e._.sql})`),c<a.length-1&&b.push(d.sql`, `);return b.push(d.sql` `),d.sql.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:e}){let f=this.buildWithCTE(e),g=c?d.sql` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,h=b?d.sql` where ${b}`:void 0;return d.sql`${f}delete from ${a}${h}${g}`}buildUpdateSet(a,b){let c=a[e.Table.Symbol.Columns],f=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),g=f.length;return d.sql.join(f.flatMap((a,e)=>{let f=c[a],h=b[a]??d.sql.param(f.onUpdateFn(),f),i=d.sql`${d.sql.identifier(this.casing.getColumnCasing(f))} = ${h}`;return e<g-1?[i,d.sql.raw(", ")]:[i]}))}buildUpdateQuery({table:a,set:b,where:c,returning:e,withList:f,from:g,joins:h}){let i=this.buildWithCTE(f),j=a[B.PgTable.Symbol.Name],k=a[B.PgTable.Symbol.Schema],l=a[B.PgTable.Symbol.OriginalName],m=j===l?void 0:j,n=d.sql`${k?d.sql`${d.sql.identifier(k)}.`:void 0}${d.sql.identifier(l)}${m&&d.sql` ${d.sql.identifier(m)}`}`,o=this.buildUpdateSet(a,b),p=g&&d.sql.join([d.sql.raw(" from "),this.buildFromTable(g)]),q=this.buildJoins(h),r=e?d.sql` returning ${this.buildSelection(e,{isSingleTable:!g})}`:void 0,s=c?d.sql` where ${c}`:void 0;return d.sql`${i}update ${n} set ${o}${p}${q}${s}${r}`}buildSelection(a,{isSingleTable:e=!1}={}){let f=a.length,g=a.flatMap(({field:a},g)=>{let h=[];if((0,c.is)(a,d.SQL.Aliased)&&a.isSelectionField)h.push(d.sql.identifier(a.fieldAlias));else if((0,c.is)(a,d.SQL.Aliased)||(0,c.is)(a,d.SQL)){let b=(0,c.is)(a,d.SQL.Aliased)?a.sql:a;e?h.push(new d.SQL(b.queryChunks.map(a=>(0,c.is)(a,t.PgColumn)?d.sql.identifier(this.casing.getColumnCasing(a)):a))):h.push(b),(0,c.is)(a,d.SQL.Aliased)&&h.push(d.sql` as ${d.sql.identifier(a.fieldAlias)}`)}else(0,c.is)(a,b.Column)&&(e?h.push(d.sql.identifier(this.casing.getColumnCasing(a))):h.push(a));return g<f-1&&h.push(d.sql`, `),h});return d.sql.join(g)}buildJoins(a){if(!a||0===a.length)return;let b=[];for(let[e,g]of a.entries()){0===e&&b.push(d.sql` `);let h=g.table,i=g.lateral?d.sql` lateral`:void 0;if((0,c.is)(h,B.PgTable)){let a=h[B.PgTable.Symbol.Name],c=h[B.PgTable.Symbol.Schema],e=h[B.PgTable.Symbol.OriginalName],f=a===e?void 0:g.alias;b.push(d.sql`${d.sql.raw(g.joinType)} join${i} ${c?d.sql`${d.sql.identifier(c)}.`:void 0}${d.sql.identifier(e)}${f&&d.sql` ${d.sql.identifier(f)}`} on ${g.on}`)}else if((0,c.is)(h,d.View)){let a=h[f.ViewBaseConfig].name,c=h[f.ViewBaseConfig].schema,e=h[f.ViewBaseConfig].originalName,j=a===e?void 0:g.alias;b.push(d.sql`${d.sql.raw(g.joinType)} join${i} ${c?d.sql`${d.sql.identifier(c)}.`:void 0}${d.sql.identifier(e)}${j&&d.sql` ${d.sql.identifier(j)}`} on ${g.on}`)}else b.push(d.sql`${d.sql.raw(g.joinType)} join${i} ${h} on ${g.on}`);e<a.length-1&&b.push(d.sql` `)}return d.sql.join(b)}buildFromTable(a){if((0,c.is)(a,e.Table)&&a[e.Table.Symbol.OriginalName]!==a[e.Table.Symbol.Name]){let b=d.sql`${d.sql.identifier(a[e.Table.Symbol.OriginalName])}`;return a[e.Table.Symbol.Schema]&&(b=d.sql`${d.sql.identifier(a[e.Table.Symbol.Schema])}.${b}`),d.sql`${b} ${d.sql.identifier(a[e.Table.Symbol.Name])}`}return a}buildSelectQuery({withList:a,fields:g,fieldsFlat:h,where:i,having:j,table:k,joins:l,orderBy:m,groupBy:n,limit:o,offset:p,lockingClause:q,distinct:r,setOperators:s}){let t,u,v,w=h??(0,F.orderSelectedFields)(g);for(let a of w){let g;if((0,c.is)(a.field,b.Column)&&(0,e.getTableName)(a.field.table)!==((0,c.is)(k,E.Subquery)?k._.alias:(0,c.is)(k,H)?k[f.ViewBaseConfig].name:(0,c.is)(k,d.SQL)?void 0:(0,e.getTableName)(k))&&(g=a.field.table,!l?.some(({alias:a})=>a===(g[e.Table.Symbol.IsAlias]?(0,e.getTableName)(g):g[e.Table.Symbol.BaseName])))){let b=(0,e.getTableName)(a.field.table);throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let x=!l||0===l.length,y=this.buildWithCTE(a);r&&(t=!0===r?d.sql` distinct`:d.sql` distinct on (${d.sql.join(r.on,d.sql`, `)})`);let z=this.buildSelection(w,{isSingleTable:x}),A=this.buildFromTable(k),B=this.buildJoins(l),C=i?d.sql` where ${i}`:void 0,D=j?d.sql` having ${j}`:void 0;m&&m.length>0&&(u=d.sql` order by ${d.sql.join(m,d.sql`, `)}`),n&&n.length>0&&(v=d.sql` group by ${d.sql.join(n,d.sql`, `)}`);let G="object"==typeof o||"number"==typeof o&&o>=0?d.sql` limit ${o}`:void 0,I=p?d.sql` offset ${p}`:void 0,J=d.sql.empty();if(q){let a=d.sql` for ${d.sql.raw(q.strength)}`;q.config.of&&a.append(d.sql` of ${d.sql.join(Array.isArray(q.config.of)?q.config.of:[q.config.of],d.sql`, `)}`),q.config.noWait?a.append(d.sql` no wait`):q.config.skipLocked&&a.append(d.sql` skip locked`),J.append(a)}let K=d.sql`${y}select${t} ${z} from ${A}${B}${C}${v}${D}${u}${G}${I}${J}`;return s.length>0?this.buildSetOperations(K,s):K}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:b,isAll:e,rightSelect:f,limit:g,orderBy:h,offset:i}}){let j,k=d.sql`(${a.getSQL()}) `,l=d.sql`(${f.getSQL()})`;if(h&&h.length>0){let a=[];for(let b of h)if((0,c.is)(b,t.PgColumn))a.push(d.sql.identifier(b.name));else if((0,c.is)(b,d.SQL)){for(let a=0;a<b.queryChunks.length;a++){let e=b.queryChunks[a];(0,c.is)(e,t.PgColumn)&&(b.queryChunks[a]=d.sql.identifier(e.name))}a.push(d.sql`${b}`)}else a.push(d.sql`${b}`);j=d.sql` order by ${d.sql.join(a,d.sql`, `)} `}let m="object"==typeof g||"number"==typeof g&&g>=0?d.sql` limit ${g}`:void 0,n=d.sql.raw(`${b} ${e?"all ":""}`),o=i?d.sql` offset ${i}`:void 0;return d.sql`${k}${n}${l}${j}${m}${o}`}buildInsertQuery({table:a,values:b,onConflict:f,returning:g,withList:h,select:i,overridingSystemValue_:j}){let k=[],l=Object.entries(a[e.Table.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),m=l.map(([,a])=>d.sql.identifier(this.casing.getColumnCasing(a)));if(i)(0,c.is)(b,d.SQL)?k.push(b):k.push(b.getSQL());else for(let[a,e]of(k.push(d.sql.raw("values ")),b.entries())){let f=[];for(let[a,b]of l){let g=e[a];if(void 0===g||(0,c.is)(g,d.Param)&&void 0===g.value)if(void 0!==b.defaultFn){let a=b.defaultFn(),e=(0,c.is)(a,d.SQL)?a:d.sql.param(a,b);f.push(e)}else if(b.default||void 0===b.onUpdateFn)f.push(d.sql`default`);else{let a=b.onUpdateFn(),e=(0,c.is)(a,d.SQL)?a:d.sql.param(a,b);f.push(e)}else f.push(g)}k.push(f),a<b.length-1&&k.push(d.sql`, `)}let n=this.buildWithCTE(h),o=d.sql.join(k),p=g?d.sql` returning ${this.buildSelection(g,{isSingleTable:!0})}`:void 0,q=f?d.sql` on conflict ${f}`:void 0,r=!0===j?d.sql`overriding system value `:void 0;return d.sql`${n}insert into ${a} ${m} ${r}${o}${q}${p}`}buildRefreshMaterializedViewQuery({view:a,concurrently:b,withNoData:c}){let e=b?d.sql` concurrently`:void 0,f=c?d.sql` with no data`:void 0;return d.sql`refresh materialized view${e} ${a}${f}`}prepareTyping(a){if((0,c.is)(a,w.PgJsonb)||(0,c.is)(a,v.PgJson))return"json";if((0,c.is)(a,x.PgNumeric))return"decimal";if((0,c.is)(a,y.PgTime))return"time";if((0,c.is)(a,z.PgTimestamp)||(0,c.is)(a,z.PgTimestampString))return"timestamp";if((0,c.is)(a,u.PgDate)||(0,c.is)(a,u.PgDateString))return"date";else if((0,c.is)(a,A.PgUUID))return"uuid";else return"none"}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:b})}buildRelationalQueryWithoutPK({fullSchema:a,schema:f,tableNamesMap:g,table:h,tableConfig:i,queryConfig:n,tableAlias:o,nestedQueryRelation:p,joinOn:q}){let s,t=[],u,v,w=[],x,y=[];if(!0===n)t=Object.entries(i.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:k(b,o),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let h=Object.fromEntries(Object.entries(i.columns).map(([a,b])=>[a,k(b,o)]));if(n.where){let a="function"==typeof n.where?n.where(h,(0,C.getOperators)()):n.where;x=a&&m(a,o)}let j=[],p=[];if(n.columns){let a=!1;for(let[b,c]of Object.entries(n.columns))void 0!==c&&b in i.columns&&(a||!0!==c||(a=!0),p.push(b));p.length>0&&(p=a?p.filter(a=>n.columns?.[a]===!0):Object.keys(i.columns).filter(a=>!p.includes(a)))}else p=Object.keys(i.columns);for(let a of p){let b=i.columns[a];j.push({tsKey:a,value:b})}let q=[];if(n.with&&(q=Object.entries(n.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:i.relations[a]}))),n.extras)for(let[a,b]of Object.entries("function"==typeof n.extras?n.extras(h,{sql:d.sql}):n.extras))j.push({tsKey:a,value:l(b,o)});for(let{tsKey:a,value:e}of j)t.push({dbKey:(0,c.is)(e,d.SQL.Aliased)?e.fieldAlias:i.columns[a].name,tsKey:a,field:(0,c.is)(e,b.Column)?k(e,o):e,relationTableTsKey:void 0,isJson:!1,selection:[]});let r="function"==typeof n.orderBy?n.orderBy(h,(0,C.getOrderByOperators)()):n.orderBy??[];for(let{tsKey:h,queryConfig:i,relation:j}of(Array.isArray(r)||(r=[r]),w=r.map(a=>(0,c.is)(a,b.Column)?k(a,o):m(a,o)),u=n.limit,v=n.offset,q)){let b=(0,C.normalizeRelation)(f,g,j),l=g[(0,e.getTableUniqueName)(j.referencedTable)],m=`${o}_${h}`,n=(0,D.and)(...b.fields.map((a,c)=>(0,D.eq)(k(b.references[c],m),k(a,o)))),p=this.buildRelationalQueryWithoutPK({fullSchema:a,schema:f,tableNamesMap:g,table:a[l],tableConfig:f[l],queryConfig:(0,c.is)(j,C.One)?!0===i?{limit:1}:{...i,limit:1}:i,tableAlias:m,joinOn:n,nestedQueryRelation:j}),q=d.sql`${d.sql.identifier(m)}.${d.sql.identifier("data")}`.as(h);y.push({on:d.sql`true`,table:new E.Subquery(p.sql,{},m),alias:m,joinType:"left",lateral:!0}),t.push({dbKey:h,tsKey:h,field:q,relationTableTsKey:l,isJson:!0,selection:p.selection})}}if(0===t.length)throw new r({message:`No fields selected for table "${i.tsName}" ("${o}")`});if(x=(0,D.and)(q,x),p){let a=d.sql`json_build_array(${d.sql.join(t.map(({field:a,tsKey:b,isJson:e})=>e?d.sql`${d.sql.identifier(`${o}_${b}`)}.${d.sql.identifier("data")}`:(0,c.is)(a,d.SQL.Aliased)?a.sql:a),d.sql`, `)})`;(0,c.is)(p,C.Many)&&(a=d.sql`coalesce(json_agg(${a}${w.length>0?d.sql` order by ${d.sql.join(w,d.sql`, `)}`:void 0}), '[]'::json)`);let e=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:t}];void 0!==u||void 0!==v||w.length>0?(s=this.buildSelectQuery({table:j(h,o),fields:{},fieldsFlat:[{path:[],field:d.sql.raw("*")}],where:x,limit:u,offset:v,orderBy:w,setOperators:[]}),x=void 0,u=void 0,v=void 0,w=[]):s=j(h,o),s=this.buildSelectQuery({table:(0,c.is)(s,B.PgTable)?s:new E.Subquery(s,{},o),fields:{},fieldsFlat:e.map(({field:a})=>({path:[],field:(0,c.is)(a,b.Column)?k(a,o):a})),joins:y,where:x,limit:u,offset:v,orderBy:w,setOperators:[]})}else s=this.buildSelectQuery({table:j(h,o),fields:{},fieldsFlat:t.map(({field:a})=>({path:[],field:(0,c.is)(a,b.Column)?k(a,o):a})),joins:y,where:x,limit:u,offset:v,orderBy:w,setOperators:[]});return{tableTsKey:i.tsName,sql:s,selection:t}}}a.s(["PgDialect",()=>I],914618)},645884,a=>{"use strict";var b=a.i(338471);class c{static [b.entityKind]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}then(a,b){return this.execute().then(a,b)}}var d=a.i(453842),e=a.i(93550),f=a.i(74568);class g extends c{constructor(a,b,c,d){super(),this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [b.entityKind]="PgDelete";config;where(a){return this.config.where=a,this}returning(a=this.config.table[d.Table.Symbol.Columns]){return this.config.returning=(0,f.orderSelectedFields)(a),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return e.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>e.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken));$dynamic(){return this}}var h=a.i(18e4),i=a.i(914618),j=a.i(21863),k=a.i(463395),l=a.i(96707),m=a.i(349558);class n{static [b.entityKind]="SelectionProxyHandler";config;constructor(a){this.config={...a}}get(a,c){if("_"===c)return{...a._,selectedFields:new Proxy(a._.selectedFields,this)};if(c===m.ViewBaseConfig)return{...a[m.ViewBaseConfig],selectedFields:new Proxy(a[m.ViewBaseConfig].selectedFields,this)};if("symbol"==typeof c)return a[c];let d=((0,b.is)(a,l.Subquery)?a._.selectedFields:(0,b.is)(a,h.View)?a[m.ViewBaseConfig].selectedFields:a)[c];if((0,b.is)(d,h.SQL.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!d.isSelectionField)return d.sql;let a=d.clone();return a.isSelectionField=!0,a}if((0,b.is)(d,h.SQL)){if("sql"===this.config.sqlBehavior)return d;throw Error(`You tried to reference "${c}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return(0,b.is)(d,k.Column)?this.config.alias?new Proxy(d,new j.ColumnAliasProxyHandler(new Proxy(d.table,new j.TableAliasProxyHandler(this.config.alias,this.config.replaceOriginalName??!1)))):d:"object"!=typeof d||null===d?d:new Proxy(d,new n(this.config))}}var o=a.i(643391);class p{static [b.entityKind]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class q{static [b.entityKind]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,a.withList&&(this.withList=a.withList),this.distinct=a.distinct}authToken;setToken(a){return this.authToken=a,this}from(a){let c,d=!!this.fields;return c=this.fields?this.fields:(0,b.is)(a,l.Subquery)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):(0,b.is)(a,o.PgViewBase)?a[m.ViewBaseConfig].selectedFields:(0,b.is)(a,h.SQL)?{}:(0,f.getTableColumns)(a),new s({table:a,fields:c,isPartialSelect:d,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}class r extends p{static [b.entityKind]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:g,distinct:h}){super(),this.config={withList:g,table:a,fields:{...b},distinct:h,setOperators:[]},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b},this.tableName=(0,f.getTableLikeName)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(a){return(c,e)=>{let g=this.tableName,i=(0,f.getTableLikeName)(c);if("string"==typeof i&&this.config.joins?.some(a=>a.alias===i))throw Error(`Alias "${i}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof g&&(this.config.fields={[g]:this.config.fields}),"string"==typeof i&&!(0,b.is)(c,h.SQL))){let a=(0,b.is)(c,l.Subquery)?c._.selectedFields:(0,b.is)(c,h.View)?c[m.ViewBaseConfig].selectedFields:c[d.Table.Symbol.Columns];this.config.fields[i]=a}if("function"==typeof e&&(e=e(new Proxy(this.config.fields,new n({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:e,table:c,joinType:a,alias:i}),"string"==typeof i)switch(a){case"left":this.joinsNotNullableMap[i]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[i]=!0;break;case"inner":this.joinsNotNullableMap[i]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[i]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(a,b){return c=>{let d="function"==typeof c?c(u()):c;if(!(0,f.haveSameKeys)(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new n({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new n({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new n({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new n({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=c:this.config.orderBy=c}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}for(a,b={}){return this.config.lockingClause={strength:a,config:b},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){return new Proxy(new l.Subquery(this.getSQL(),this.config.fields,a),new n({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new n({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class s extends r{static [b.entityKind]="PgSelect";_prepare(a){let{session:b,config:c,dialect:d,joinsNotNullableMap:g,authToken:h}=this;if(!b)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");return e.tracer.startActiveSpan("drizzle.prepareQuery",()=>{let e=(0,f.orderSelectedFields)(c.fields),i=b.prepareQuery(d.sqlToQuery(this.getSQL()),e,a,!0);return i.joinsNotNullableMap=g,i.setToken(h)})}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>e.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}function t(a,b){return(c,d,...e)=>{let g=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of g)if(!(0,f.haveSameKeys)(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(g)}}(0,f.applyMixins)(s,[c]);let u=()=>({union:v,unionAll:w,intersect:x,intersectAll:y,except:z,exceptAll:A}),v=t("union",!1),w=t("union",!0),x=t("intersect",!1),y=t("intersect",!0),z=t("except",!1),A=t("except",!0);class B{static [b.entityKind]="PgQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=(0,b.is)(a,i.PgDialect)?a:void 0,this.dialectConfig=(0,b.is)(a,i.PgDialect)?void 0:a}$with(a){let b=this;return{as:c=>("function"==typeof c&&(c=c(b)),new Proxy(new l.WithSubquery(c.getSQL(),c.getSelectedFields(),a,!0),new n({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...a){let b=this;return{select:function(c){return new q({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(a){return new q({fields:a??void 0,session:void 0,dialect:b.getDialect(),distinct:!0})},selectDistinctOn:function(a,c){return new q({fields:c??void 0,session:void 0,dialect:b.getDialect(),distinct:{on:a}})}}}select(a){return new q({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new q({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(a,b){return new q({fields:b??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:a}})}getDialect(){return this.dialect||(this.dialect=new i.PgDialect(this.dialectConfig)),this.dialect}}class C{constructor(a,b,c,d,e){this.table=a,this.session=b,this.dialect=c,this.withList=d,this.overridingSystemValue_=e}static [b.entityKind]="PgInsertBuilder";authToken;setToken(a){return this.authToken=a,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let c=a.map(a=>{let c={},e=this.table[d.Table.Symbol.Columns];for(let d of Object.keys(a)){let f=a[d];c[d]=(0,b.is)(f,h.SQL)?f:new h.Param(f,e[d])}return c});return new D(this.table,c,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(a){let c="function"==typeof a?a(new B):a;if(!(0,b.is)(c,h.SQL)&&!(0,f.haveSameKeys)(this.table[d.Columns],c._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new D(this.table,c,this.session,this.dialect,this.withList,!0)}}class D extends c{constructor(a,b,c,d,e,f,g){super(),this.session=c,this.dialect=d,this.config={table:a,values:b,withList:e,select:f,overridingSystemValue_:g}}static [b.entityKind]="PgInsert";config;returning(a=this.config.table[d.Table.Symbol.Columns]){return this.config.returning=(0,f.orderSelectedFields)(a),this}onConflictDoNothing(a={}){if(void 0===a.target)this.config.onConflict=h.sql`do nothing`;else{let b="";b=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target));let c=a.where?h.sql` where ${a.where}`:void 0;this.config.onConflict=h.sql`(${h.sql.raw(b)})${c} do nothing`}return this}onConflictDoUpdate(a){if(a.where&&(a.targetWhere||a.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let b=a.where?h.sql` where ${a.where}`:void 0,c=a.targetWhere?h.sql` where ${a.targetWhere}`:void 0,d=a.setWhere?h.sql` where ${a.setWhere}`:void 0,e=this.dialect.buildUpdateSet(this.config.table,(0,f.mapUpdateSet)(this.config.table,a.set)),g="";return g=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target)),this.config.onConflict=h.sql`(${h.sql.raw(g)})${c} do update set ${e}${b}${d}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return e.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>e.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken));$dynamic(){return this}}var E=a.i(472899);class F{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [b.entityKind]="PgUpdateBuilder";authToken;setToken(a){return this.authToken=a,this}set(a){return new G(this.table,(0,f.mapUpdateSet)(this.table,a),this.session,this.dialect,this.withList).setToken(this.authToken)}}class G extends c{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e,joins:[]},this.tableName=(0,f.getTableLikeName)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}static [b.entityKind]="PgUpdate";config;tableName;joinsNotNullableMap;from(a){let b=(0,f.getTableLikeName)(a);return"string"==typeof b&&(this.joinsNotNullableMap[b]=!0),this.config.from=a,this}getTableLikeFields(a){return(0,b.is)(a,E.PgTable)?a[d.Table.Symbol.Columns]:(0,b.is)(a,l.Subquery)?a._.selectedFields:a[m.ViewBaseConfig].selectedFields}createJoin(a){return(c,e)=>{let g=(0,f.getTableLikeName)(c);if("string"==typeof g&&this.config.joins.some(a=>a.alias===g))throw Error(`Alias "${g}" is already used in this query`);if("function"==typeof e){let a=this.config.from&&!(0,b.is)(this.config.from,h.SQL)?this.getTableLikeFields(this.config.from):void 0;e=e(new Proxy(this.config.table[d.Table.Symbol.Columns],new n({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new n({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:e,table:c,joinType:a,alias:g}),"string"==typeof g)switch(a){case"left":this.joinsNotNullableMap[g]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[g]=!0;break;case"inner":this.joinsNotNullableMap[g]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[g]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(a){return this.config.where=a,this}returning(a){if(!a&&(a=Object.assign({},this.config.table[d.Table.Symbol.Columns]),this.config.from)){let c=(0,f.getTableLikeName)(this.config.from);if("string"==typeof c&&this.config.from&&!(0,b.is)(this.config.from,h.SQL)){let b=this.getTableLikeFields(this.config.from);a[c]=b}for(let c of this.config.joins){let d=(0,f.getTableLikeName)(c.table);if("string"==typeof d&&!(0,b.is)(c.table,h.SQL)){let b=this.getTableLikeFields(c.table);a[d]=b}}}return this.config.returning=(0,f.orderSelectedFields)(a),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){let b=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0);return b.joinsNotNullableMap=this.joinsNotNullableMap,b}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>this._prepare().execute(a,this.authToken);$dynamic(){return this}}var H=h;class I extends H.SQL{constructor(a){super(I.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.mapWith(Number),this.session=a.session,this.sql=I.buildCount(a.source,a.filters)}sql;token;static [b.entityKind]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(a,b){return H.sql`(select count(*) from ${a}${H.sql.raw(" where ").if(b)}${b})`}static buildCount(a,b){return H.sql`select count(*) as count from ${a}${H.sql.raw(" where ").if(b)}${b};`}setToken(a){return this.token=a,this}then(a,b){return Promise.resolve(this.session.count(this.sql,this.token)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}var J=a.i(374565);class K{constructor(a,b,c,d,e,f,g){this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g}static [b.entityKind]="PgRelationalQueryBuilder";findMany(a){return new L(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many")}findFirst(a){return new L(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first")}}class L extends c{constructor(a,b,c,d,e,f,g,h,i){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.mode=i}static [b.entityKind]="PgRelationalQuery";_prepare(a){return e.tracer.startActiveSpan("drizzle.prepareQuery",()=>{let{query:b,builtQuery:c}=this._toSQL();return this.session.prepareQuery(c,void 0,a,!0,(a,c)=>{let d=a.map(a=>(0,J.mapRelationalRow)(this.schema,this.tableConfig,a,b.selection,c));return"first"===this.mode?d[0]:d})})}prepare(a){return this._prepare(a)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let a=this._getQuery(),b=this.dialect.sqlToQuery(a.sql);return{query:a,builtQuery:b}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(a){return this.authToken=a,this}execute(){return e.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}}class M extends c{constructor(a,b,c,d){super(),this.execute=a,this.sql=b,this.query=c,this.mapBatchResult=d}static [b.entityKind]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(a,b){return b?this.mapBatchResult(a):a}_prepare(){return this}isResponseInArrayMode(){return!1}}class N extends c{constructor(a,b,c){super(),this.session=b,this.dialect=c,this.config={view:a}}static [b.entityKind]="PgRefreshMaterializedView";config;concurrently(){if(void 0!==this.config.withNoData)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return e.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>e.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}class O{constructor(a,b,c){if(this.dialect=a,this.session=b,this._=c?{schema:c.schema,fullSchema:c.fullSchema,tableNamesMap:c.tableNamesMap,session:b}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:b},this.query={},this._.schema)for(const[d,e]of Object.entries(this._.schema))this.query[d]=new K(c.fullSchema,this._.schema,this._.tableNamesMap,c.fullSchema[d],e,a,b)}static [b.entityKind]="PgDatabase";query;$with(a){let b=this;return{as:c=>("function"==typeof c&&(c=c(new B(b.dialect))),new Proxy(new l.WithSubquery(c.getSQL(),c.getSelectedFields(),a,!0),new n({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}$count(a,b){return new I({source:a,filters:b,session:this.session})}with(...a){let b=this;return{select:function(c){return new q({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new q({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},selectDistinctOn:function(c,d){return new q({fields:d??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:{on:c}})},update:function(c){return new F(c,b.session,b.dialect,a)},insert:function(c){return new C(c,b.session,b.dialect,a)},delete:function(c){return new g(c,b.session,b.dialect,a)}}}select(a){return new q({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new q({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(a,b){return new q({fields:b??void 0,session:this.session,dialect:this.dialect,distinct:{on:a}})}update(a){return new F(a,this.session,this.dialect)}insert(a){return new C(a,this.session,this.dialect)}delete(a){return new g(a,this.session,this.dialect)}refreshMaterializedView(a){return new N(a,this.session,this.dialect)}authToken;execute(a){let b="string"==typeof a?h.sql.raw(a):a.getSQL(),c=this.dialect.sqlToQuery(b),d=this.session.prepareQuery(c,void 0,void 0,!1);return new M(()=>d.execute(void 0,this.authToken),b,c,a=>d.mapResult(a,!0))}transaction(a,b){return this.session.transaction(a,b)}}a.s(["PgDatabase",()=>O],645884)},207591,a=>{"use strict";var b=a.i(338471),c=a.i(996780),d=a.i(18e4),e=a.i(93550),f=a.i(645884);class g{constructor(a){this.query=a}authToken;getQuery(){return this.query}mapResult(a,b){return a}setToken(a){return this.authToken=a,this}static [b.entityKind]="PgPreparedQuery";joinsNotNullableMap}class h{constructor(a){this.dialect=a}static [b.entityKind]="PgSession";execute(a,b){return e.tracer.startActiveSpan("drizzle.operation",()=>e.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1)).setToken(b).execute(void 0,b))}all(a){return this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1).all()}async count(a,b){return Number((await this.execute(a,b))[0].count)}}class i extends f.PgDatabase{constructor(a,b,c,d=0){super(a,b,c),this.schema=c,this.nestedIndex=d}static [b.entityKind]="PgTransaction";rollback(){throw new c.TransactionRollbackError}getTransactionConfigSQL(a){let b=[];return a.isolationLevel&&b.push(`isolation level ${a.isolationLevel}`),a.accessMode&&b.push(a.accessMode),"boolean"==typeof a.deferrable&&b.push(a.deferrable?"deferrable":"not deferrable"),d.sql.raw(b.join(" "))}setTransaction(a){return this.session.execute(d.sql`set transaction ${this.getTransactionConfigSQL(a)}`)}}a.s(["PgPreparedQuery",()=>g,"PgSession",()=>h,"PgTransaction",()=>i])},111241,a=>a.a(async(b,c)=>{try{var d=a.i(238523),e=a.i(338471),f=a.i(881824),g=a.i(207591),h=a.i(18e4),i=a.i(93550),j=a.i(74568),k=b([d]);[d]=k.then?(await k)():k;let{Pool:l,types:m}=d.default;class n extends g.PgPreparedQuery{constructor(a,b,c,d,e,f,g,h){super({sql:b,params:c}),this.client=a,this.params=c,this.logger=d,this.fields=e,this._isResponseInArrayMode=g,this.customResultMapper=h,this.rawQueryConfig={name:f,text:b,types:{getTypeParser:(a,b)=>a===m.builtins.TIMESTAMPTZ||a===m.builtins.TIMESTAMP||a===m.builtins.DATE||a===m.builtins.INTERVAL?a=>a:m.getTypeParser(a,b)}},this.queryConfig={name:f,text:b,rowMode:"array",types:{getTypeParser:(a,b)=>a===m.builtins.TIMESTAMPTZ||a===m.builtins.TIMESTAMP||a===m.builtins.DATE||a===m.builtins.INTERVAL?a=>a:m.getTypeParser(a,b)}}}static [e.entityKind]="NodePgPreparedQuery";rawQueryConfig;queryConfig;async execute(a={}){return i.tracer.startActiveSpan("drizzle.execute",async()=>{let b=(0,h.fillPlaceholders)(this.params,a);this.logger.logQuery(this.rawQueryConfig.text,b);let{fields:c,rawQueryConfig:d,client:e,queryConfig:f,joinsNotNullableMap:g,customResultMapper:k}=this;if(!c&&!k)return i.tracer.startActiveSpan("drizzle.driver.execute",async a=>(a?.setAttributes({"drizzle.query.name":d.name,"drizzle.query.text":d.text,"drizzle.query.params":JSON.stringify(b)}),e.query(d,b)));let l=await i.tracer.startActiveSpan("drizzle.driver.execute",a=>(a?.setAttributes({"drizzle.query.name":f.name,"drizzle.query.text":f.text,"drizzle.query.params":JSON.stringify(b)}),e.query(f,b)));return i.tracer.startActiveSpan("drizzle.mapResponse",()=>k?k(l.rows):l.rows.map(a=>(0,j.mapResultRow)(c,a,g)))})}all(a={}){return i.tracer.startActiveSpan("drizzle.execute",()=>{let b=(0,h.fillPlaceholders)(this.params,a);return this.logger.logQuery(this.rawQueryConfig.text,b),i.tracer.startActiveSpan("drizzle.driver.execute",a=>(a?.setAttributes({"drizzle.query.name":this.rawQueryConfig.name,"drizzle.query.text":this.rawQueryConfig.text,"drizzle.query.params":JSON.stringify(b)}),this.client.query(this.rawQueryConfig,b).then(a=>a.rows)))})}isResponseInArrayMode(){return this._isResponseInArrayMode}}class o extends g.PgSession{constructor(a,b,c,d={}){super(b),this.client=a,this.schema=c,this.options=d,this.logger=d.logger??new f.NoopLogger}static [e.entityKind]="NodePgSession";logger;prepareQuery(a,b,c,d,e){return new n(this.client,a.sql,a.params,this.logger,b,c,d,e)}async transaction(a,b){let c=this.client instanceof l?new o(await this.client.connect(),this.dialect,this.schema,this.options):this,d=new p(this.dialect,c,this.schema);await d.execute(h.sql`begin${b?h.sql` ${d.getTransactionConfigSQL(b)}`:void 0}`);try{let b=await a(d);return await d.execute(h.sql`commit`),b}catch(a){throw await d.execute(h.sql`rollback`),a}finally{this.client instanceof l&&c.client.release()}}async count(a){let b=await this.execute(a);return Number(b.rows[0].count)}}class p extends g.PgTransaction{static [e.entityKind]="NodePgTransaction";async transaction(a){let b=`sp${this.nestedIndex+1}`,c=new p(this.dialect,this.session,this.schema,this.nestedIndex+1);await c.execute(h.sql.raw(`savepoint ${b}`));try{let d=await a(c);return await c.execute(h.sql.raw(`release savepoint ${b}`)),d}catch(a){throw await c.execute(h.sql.raw(`rollback to savepoint ${b}`)),a}}}a.s(["NodePgSession",()=>o]),c()}catch(a){c(a)}},!1),221038,a=>a.a(async(b,c)=>{try{var d=a.i(238523),e=a.i(338471),f=a.i(881824),g=a.i(645884),h=a.i(914618),i=a.i(374565),j=a.i(74568),k=a.i(111241),l=b([d,k]);[d,k]=l.then?(await l)():l;class o{constructor(a,b,c={}){this.client=a,this.dialect=b,this.options=c}static [e.entityKind]="NodePgDriver";createSession(a){return new k.NodePgSession(this.client,this.dialect,a,{logger:this.options.logger})}}class p extends g.PgDatabase{static [e.entityKind]="NodePgDatabase"}function m(a,b={}){let c,d,e=new h.PgDialect({casing:b.casing});if(!0===b.logger?c=new f.DefaultLogger:!1!==b.logger&&(c=b.logger),b.schema){let a=(0,i.extractTablesRelationalConfig)(b.schema,i.createTableRelationsHelpers);d={fullSchema:b.schema,schema:a.tables,tableNamesMap:a.tableNamesMap}}let g=new o(a,e,{logger:c}).createSession(d),j=new p(e,g,d);return j.$client=a,j}function n(...a){if("string"==typeof a[0]){let b=new d.default.Pool({connectionString:a[0]});return m(b,a[1])}if((0,j.isConfig)(a[0])){let{connection:b,client:c,...e}=a[0];if(c)return m(c,e);let f=new d.default.Pool("string"==typeof b?{connectionString:b}:b);return m(f,e)}return m(a[0],a[1])}(n||(n={})).mock=function(a){return m({},a)},a.s(["drizzle",()=>n]),c()}catch(a){c(a)}},!1),160955,588136,a=>{"use strict";var b=a.i(399182);let c=(0,b.pgEnum)("Role",["STUDENT","TUTOR","PARENT","ADMIN"]),d=(0,b.pgEnum)("PollType",["MULTIPLE_CHOICE","TRUE_FALSE","RATING","SHORT_ANSWER","WORD_CLOUD"]),e=(0,b.pgEnum)("PollStatus",["DRAFT","ACTIVE","CLOSED"]),f=(0,b.pgEnum)("SessionType",["CLINIC","GROUP","ONE_ON_ONE"]),g=(0,b.pgEnum)("MessageSource",["AI","TUTOR","STUDENT"]),h=(0,b.pgEnum)("Tier",["FREE","PRO","ELITE"]),i=(0,b.pgEnum)("PaymentStatus",["PENDING","PROCESSING","COMPLETED","FAILED","REFUNDED","CANCELLED"]),j=(0,b.pgEnum)("PaymentGateway",["AIRWALLEX","HITPAY"]),k=(0,b.pgEnum)("RefundStatus",["PENDING","PROCESSING","COMPLETED","FAILED"]),l=(0,b.pgEnum)("EventType",["LESSON","CLINIC","CONSULTATION","BREAK","PERSONAL","OTHER"]),m=(0,b.pgEnum)("EventStatus",["CONFIRMED","TENTATIVE","CANCELLED"]),n=(0,b.pgEnum)("MathSessionStatus",["ACTIVE","PAUSED","ENDED","ARCHIVED"]),o=(0,b.pgEnum)("MathAIInteractionType",["SOLVE","HINT","CHECK","EXPLAIN","RECOGNIZE"]);a.s(["eventStatusEnum",0,m,"eventTypeEnum",0,l,"mathAIInteractionTypeEnum",0,o,"mathSessionStatusEnum",0,n,"messageSourceEnum",0,g,"paymentGatewayEnum",0,j,"paymentStatusEnum",0,i,"pollStatusEnum",0,e,"pollTypeEnum",0,d,"refundStatusEnum",0,k,"roleEnum",0,c,"sessionTypeEnum",0,f,"tierEnum",0,h],160955);var p=a.i(472899),q=a.i(999367),r=a.i(326711),s=a.i(17925),t=a.i(436896),u=a.i(779272),v=a.i(81454),w=a.i(18e4),x=a.i(338471),y=a.i(283378);class z{constructor(a,b){this.unique=a,this.name=b}static [x.entityKind]="PgIndexBuilderOn";on(...a){return new A(a.map(a=>{if((0,x.is)(a,w.SQL))return a;let b=new y.IndexedColumn(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),b}),this.unique,!1,this.name)}onOnly(...a){return new A(a.map(a=>{if((0,x.is)(a,w.SQL))return a;let b=new y.IndexedColumn(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=a.defaultConfig,b}),this.unique,!0,this.name)}using(a,...b){return new A(b.map(a=>{if((0,x.is)(a,w.SQL))return a;let b=new y.IndexedColumn(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),b}),this.unique,!0,this.name,a)}}class A{static [x.entityKind]="PgIndexBuilder";config;constructor(a,b,c,d,e="btree"){this.config={name:d,columns:a,unique:b,only:c,method:e}}concurrently(){return this.config.concurrently=!0,this}with(a){return this.config.with=a,this}where(a){return this.config.where=a,this}build(a){return new B(this.config,a)}}class B{static [x.entityKind]="PgIndex";config;constructor(a,b){this.config={...a,table:b}}}function C(a){return new z(!1,a)}function D(a){return new z(!0,a)}let E=(0,p.pgTable)("User",{id:(0,q.text)("id").primaryKey().notNull(),email:(0,q.text)("email").notNull().unique(),password:(0,q.text)("password"),role:c("role").notNull(),emailVerified:(0,t.timestamp)("emailVerified",{withTimezone:!0}),image:(0,q.text)("image"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)}),F=(0,p.pgTable)("Account",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull(),type:(0,q.text)("type").notNull(),provider:(0,q.text)("provider").notNull(),providerAccountId:(0,q.text)("providerAccountId").notNull(),refresh_token:(0,q.text)("refresh_token"),access_token:(0,q.text)("access_token"),expires_at:(0,r.integer)("expires_at"),token_type:(0,q.text)("token_type"),scope:(0,q.text)("scope"),id_token:(0,q.text)("id_token"),session_state:(0,q.text)("session_state")},a=>({Account_userId_idx:C("Account_userId_idx").on(a.userId),Account_provider_providerAccountId_key:D("Account_provider_providerAccountId_key").on(a.provider,a.providerAccountId)})),G=(0,p.pgTable)("Profile",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull().unique(),name:(0,q.text)("name"),username:(0,q.text)("username").unique(),bio:(0,q.text)("bio"),avatarUrl:(0,q.text)("avatarUrl"),dateOfBirth:(0,t.timestamp)("dateOfBirth",{withTimezone:!0}),timezone:(0,q.text)("timezone").notNull(),emailNotifications:(0,s.boolean)("emailNotifications").notNull(),smsNotifications:(0,s.boolean)("smsNotifications").notNull(),gradeLevel:(0,q.text)("gradeLevel"),studentUniqueId:(0,q.text)("studentUniqueId").unique(),subjectsOfInterest:(0,q.text)("subjectsOfInterest").array().notNull(),preferredLanguages:(0,q.text)("preferredLanguages").array().notNull(),learningGoals:(0,q.text)("learningGoals").array().notNull(),tosAccepted:(0,s.boolean)("tosAccepted").notNull(),tosAcceptedAt:(0,t.timestamp)("tosAcceptedAt",{withTimezone:!0}),organizationName:(0,q.text)("organizationName"),isOnboarded:(0,s.boolean)("isOnboarded").notNull(),hourlyRate:(0,v.doublePrecision)("hourlyRate"),specialties:(0,q.text)("specialties").array().notNull(),credentials:(0,q.text)("credentials"),availability:(0,u.jsonb)("availability"),paidClassesEnabled:(0,s.boolean)("paidClassesEnabled").notNull(),paymentGatewayPreference:(0,q.text)("paymentGatewayPreference"),currency:(0,q.text)("currency"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)}),H=(0,p.pgTable)("CurriculumCatalog",{id:(0,q.text)("id").primaryKey().notNull(),subject:(0,q.text)("subject").notNull(),name:(0,q.text)("name").notNull(),code:(0,q.text)("code"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({CurriculumCatalog_subject_idx:C("CurriculumCatalog_subject_idx").on(a.subject),CurriculumCatalog_subject_name_key:D("CurriculumCatalog_subject_name_key").on(a.subject,a.name)})),I=(0,p.pgTable)("Curriculum",{id:(0,q.text)("id").primaryKey().notNull(),name:(0,q.text)("name").notNull(),description:(0,q.text)("description"),subject:(0,q.text)("subject").notNull(),gradeLevel:(0,q.text)("gradeLevel"),difficulty:(0,q.text)("difficulty").notNull(),estimatedHours:(0,r.integer)("estimatedHours").notNull(),isPublished:(0,s.boolean)("isPublished").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date),creatorId:(0,q.text)("creatorId"),isLiveOnline:(0,s.boolean)("isLiveOnline").notNull(),languageOfInstruction:(0,q.text)("languageOfInstruction"),price:(0,v.doublePrecision)("price"),currency:(0,q.text)("currency"),curriculumSource:(0,q.text)("curriculumSource"),outlineSource:(0,q.text)("outlineSource"),schedule:(0,u.jsonb)("schedule"),courseMaterials:(0,u.jsonb)("courseMaterials"),coursePitch:(0,q.text)("coursePitch")},a=>({Curriculum_subject_idx:C("Curriculum_subject_idx").on(a.subject),Curriculum_isPublished_idx:C("Curriculum_isPublished_idx").on(a.isPublished),Curriculum_creatorId_idx:C("Curriculum_creatorId_idx").on(a.creatorId)})),J=(0,p.pgTable)("CurriculumShare",{id:(0,q.text)("id").primaryKey().notNull(),curriculumId:(0,q.text)("curriculumId").notNull(),sharedByTutorId:(0,q.text)("sharedByTutorId").notNull(),recipientId:(0,q.text)("recipientId").notNull(),message:(0,q.text)("message").notNull(),isPublic:(0,s.boolean)("isPublic").notNull(),sharedAt:(0,t.timestamp)("sharedAt",{withTimezone:!0}).notNull().defaultNow()},a=>({CurriculumShare_sharedByTutorId_idx:C("CurriculumShare_sharedByTutorId_idx").on(a.sharedByTutorId),CurriculumShare_recipientId_idx:C("CurriculumShare_recipientId_idx").on(a.recipientId),CurriculumShare_curriculumId_idx:C("CurriculumShare_curriculumId_idx").on(a.curriculumId),CurriculumShare_curriculumId_recipientId_key:D("CurriculumShare_curriculumId_recipientId_key").on(a.curriculumId,a.recipientId)})),K=(0,p.pgTable)("CurriculumModule",{id:(0,q.text)("id").primaryKey().notNull(),curriculumId:(0,q.text)("curriculumId").notNull(),title:(0,q.text)("title").notNull(),description:(0,q.text)("description"),order:(0,r.integer)("order").notNull(),builderData:(0,u.jsonb)("builderData")},a=>({CurriculumModule_curriculumId_idx:C("CurriculumModule_curriculumId_idx").on(a.curriculumId),CurriculumModule_order_idx:C("CurriculumModule_order_idx").on(a.order)})),L=(0,p.pgTable)("CurriculumLesson",{id:(0,q.text)("id").primaryKey().notNull(),moduleId:(0,q.text)("moduleId").notNull(),title:(0,q.text)("title").notNull(),description:(0,q.text)("description"),duration:(0,r.integer)("duration").notNull(),difficulty:(0,q.text)("difficulty").notNull(),order:(0,r.integer)("order").notNull(),learningObjectives:(0,q.text)("learningObjectives").array().notNull(),teachingPoints:(0,q.text)("teachingPoints").array().notNull(),keyConcepts:(0,q.text)("keyConcepts").array().notNull(),examples:(0,u.jsonb)("examples"),practiceProblems:(0,u.jsonb)("practiceProblems"),commonMisconceptions:(0,q.text)("commonMisconceptions").array().notNull(),prerequisiteLessonIds:(0,q.text)("prerequisiteLessonIds").array().notNull(),builderData:(0,u.jsonb)("builderData")},a=>({CurriculumLesson_moduleId_idx:C("CurriculumLesson_moduleId_idx").on(a.moduleId),CurriculumLesson_order_idx:C("CurriculumLesson_order_idx").on(a.order)})),M=(0,p.pgTable)("LessonSession",{id:(0,q.text)("id").primaryKey().notNull(),studentId:(0,q.text)("studentId").notNull(),lessonId:(0,q.text)("lessonId").notNull(),status:(0,q.text)("status").notNull(),currentSection:(0,q.text)("currentSection").notNull(),conceptMastery:(0,u.jsonb)("conceptMastery").notNull(),misconceptions:(0,q.text)("misconceptions").array().notNull(),sessionContext:(0,u.jsonb)("sessionContext"),whiteboardItems:(0,q.text)("whiteboardItems").array().notNull(),startedAt:(0,t.timestamp)("startedAt",{withTimezone:!0}).notNull().defaultNow(),lastActivityAt:(0,t.timestamp)("lastActivityAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date),completedAt:(0,t.timestamp)("completedAt",{withTimezone:!0})},a=>({LessonSession_studentId_idx:C("LessonSession_studentId_idx").on(a.studentId),LessonSession_lessonId_idx:C("LessonSession_lessonId_idx").on(a.lessonId),LessonSession_studentId_lessonId_key:D("LessonSession_studentId_lessonId_key").on(a.studentId,a.lessonId)})),N=(0,p.pgTable)("CurriculumLessonProgress",{id:(0,q.text)("id").primaryKey().notNull(),lessonId:(0,q.text)("lessonId").notNull(),studentId:(0,q.text)("studentId").notNull(),status:(0,q.text)("status").notNull(),currentSection:(0,q.text)("currentSection").notNull(),score:(0,r.integer)("score"),completedAt:(0,t.timestamp)("completedAt",{withTimezone:!0}),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({CurriculumLessonProgress_studentId_idx:C("CurriculumLessonProgress_studentId_idx").on(a.studentId),CurriculumLessonProgress_lessonId_studentId_key:D("CurriculumLessonProgress_lessonId_studentId_key").on(a.lessonId,a.studentId)})),O=(0,p.pgTable)("CurriculumEnrollment",{id:(0,q.text)("id").primaryKey().notNull(),studentId:(0,q.text)("studentId").notNull(),curriculumId:(0,q.text)("curriculumId").notNull(),batchId:(0,q.text)("batchId"),enrolledAt:(0,t.timestamp)("enrolledAt",{withTimezone:!0}).notNull().defaultNow(),completedAt:(0,t.timestamp)("completedAt",{withTimezone:!0}),lastActivity:(0,t.timestamp)("lastActivity",{withTimezone:!0}).notNull().defaultNow(),lessonsCompleted:(0,r.integer)("lessonsCompleted").notNull(),enrollmentSource:(0,q.text)("enrollmentSource")},a=>({CurriculumEnrollment_studentId_idx:C("CurriculumEnrollment_studentId_idx").on(a.studentId),CurriculumEnrollment_batchId_idx:C("CurriculumEnrollment_batchId_idx").on(a.batchId),CurriculumEnrollment_studentId_curriculumId_key:D("CurriculumEnrollment_studentId_curriculumId_key").on(a.studentId,a.curriculumId)})),P=(0,p.pgTable)("CourseBatch",{id:(0,q.text)("id").primaryKey().notNull(),curriculumId:(0,q.text)("curriculumId").notNull(),name:(0,q.text)("name").notNull(),startDate:(0,t.timestamp)("startDate",{withTimezone:!0}),order:(0,r.integer)("order").notNull(),difficulty:(0,q.text)("difficulty"),schedule:(0,u.jsonb)("schedule"),price:(0,v.doublePrecision)("price"),currency:(0,q.text)("currency"),languageOfInstruction:(0,q.text)("languageOfInstruction"),isLive:(0,s.boolean)("isLive").notNull(),meetingUrl:(0,q.text)("meetingUrl"),maxStudents:(0,r.integer)("maxStudents").notNull()},a=>({CourseBatch_curriculumId_idx:C("CourseBatch_curriculumId_idx").on(a.curriculumId)})),Q=(0,p.pgTable)("CurriculumProgress",{id:(0,q.text)("id").primaryKey().notNull(),studentId:(0,q.text)("studentId").notNull(),curriculumId:(0,q.text)("curriculumId").notNull(),lessonsCompleted:(0,r.integer)("lessonsCompleted").notNull(),totalLessons:(0,r.integer)("totalLessons").notNull(),currentLessonId:(0,q.text)("currentLessonId"),averageScore:(0,v.doublePrecision)("averageScore"),isCompleted:(0,s.boolean)("isCompleted").notNull(),startedAt:(0,t.timestamp)("startedAt",{withTimezone:!0}).notNull().defaultNow(),completedAt:(0,t.timestamp)("completedAt",{withTimezone:!0})},a=>({CurriculumProgress_studentId_idx:C("CurriculumProgress_studentId_idx").on(a.studentId),CurriculumProgress_studentId_curriculumId_key:D("CurriculumProgress_studentId_curriculumId_key").on(a.studentId,a.curriculumId)})),R=(0,p.pgTable)("StudentPerformance",{id:(0,q.text)("id").primaryKey().notNull(),studentId:(0,q.text)("studentId").notNull(),curriculumId:(0,q.text)("curriculumId"),averageScore:(0,v.doublePrecision)("averageScore").notNull(),completionRate:(0,v.doublePrecision)("completionRate").notNull(),engagementScore:(0,v.doublePrecision)("engagementScore").notNull(),attendanceRate:(0,v.doublePrecision)("attendanceRate").notNull(),participationRate:(0,v.doublePrecision)("participationRate").notNull(),strengths:(0,u.jsonb)("strengths").notNull(),weaknesses:(0,u.jsonb)("weaknesses").notNull(),taskHistory:(0,u.jsonb)("taskHistory").notNull(),commonMistakes:(0,u.jsonb)("commonMistakes").notNull(),skillBreakdown:(0,u.jsonb)("skillBreakdown").notNull(),cluster:(0,q.text)("cluster").notNull(),learningStyle:(0,q.text)("learningStyle"),pace:(0,q.text)("pace").notNull(),recommendedPeers:(0,u.jsonb)("recommendedPeers").notNull(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({StudentPerformance_studentId_idx:C("StudentPerformance_studentId_idx").on(a.studentId),StudentPerformance_curriculumId_idx:C("StudentPerformance_curriculumId_idx").on(a.curriculumId),StudentPerformance_cluster_idx:C("StudentPerformance_cluster_idx").on(a.cluster),StudentPerformance_studentId_curriculumId_key:D("StudentPerformance_studentId_curriculumId_key").on(a.studentId,a.curriculumId)})),S=(0,p.pgTable)("TaskSubmission",{id:(0,q.text)("id").primaryKey().notNull(),taskId:(0,q.text)("taskId").notNull(),studentId:(0,q.text)("studentId").notNull(),answers:(0,u.jsonb)("answers").notNull(),timeSpent:(0,r.integer)("timeSpent").notNull(),attempts:(0,r.integer)("attempts").notNull(),questionResults:(0,u.jsonb)("questionResults"),score:(0,v.doublePrecision)("score"),maxScore:(0,r.integer)("maxScore").notNull(),status:(0,q.text)("status").notNull(),aiFeedback:(0,u.jsonb)("aiFeedback"),tutorFeedback:(0,q.text)("tutorFeedback"),tutorApproved:(0,s.boolean)("tutorApproved").notNull(),submittedAt:(0,t.timestamp)("submittedAt",{withTimezone:!0}).notNull().defaultNow(),gradedAt:(0,t.timestamp)("gradedAt",{withTimezone:!0})},a=>({TaskSubmission_studentId_idx:C("TaskSubmission_studentId_idx").on(a.studentId),TaskSubmission_taskId_idx:C("TaskSubmission_taskId_idx").on(a.taskId),TaskSubmission_taskId_studentId_key:D("TaskSubmission_taskId_studentId_key").on(a.taskId,a.studentId)})),T=(0,p.pgTable)("FeedbackWorkflow",{id:(0,q.text)("id").primaryKey().notNull(),submissionId:(0,q.text)("submissionId").notNull().unique(),studentId:(0,q.text)("studentId").notNull(),aiScore:(0,v.doublePrecision)("aiScore"),aiComments:(0,q.text)("aiComments"),aiStrengths:(0,u.jsonb)("aiStrengths").notNull(),aiImprovements:(0,u.jsonb)("aiImprovements").notNull(),aiResources:(0,u.jsonb)("aiResources").notNull(),status:(0,q.text)("status").notNull(),modifiedScore:(0,v.doublePrecision)("modifiedScore"),modifiedComments:(0,q.text)("modifiedComments"),addedNotes:(0,q.text)("addedNotes"),approvedAt:(0,t.timestamp)("approvedAt",{withTimezone:!0}),approvedBy:(0,q.text)("approvedBy"),autoApproved:(0,s.boolean)("autoApproved").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({FeedbackWorkflow_studentId_idx:C("FeedbackWorkflow_studentId_idx").on(a.studentId),FeedbackWorkflow_status_idx:C("FeedbackWorkflow_status_idx").on(a.status)})),U=(0,p.pgTable)("GeneratedTask",{id:(0,q.text)("id").primaryKey().notNull(),tutorId:(0,q.text)("tutorId").notNull(),roomId:(0,q.text)("roomId"),title:(0,q.text)("title").notNull(),description:(0,q.text)("description").notNull(),type:(0,q.text)("type").notNull(),difficulty:(0,q.text)("difficulty").notNull(),questions:(0,u.jsonb)("questions").notNull(),distributionMode:(0,q.text)("distributionMode").notNull(),assignments:(0,u.jsonb)("assignments").notNull(),documentSource:(0,q.text)("documentSource"),status:(0,q.text)("status").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),assignedAt:(0,t.timestamp)("assignedAt",{withTimezone:!0}),lessonId:(0,q.text)("lessonId"),batchId:(0,q.text)("batchId"),dueDate:(0,t.timestamp)("dueDate",{withTimezone:!0}),maxScore:(0,r.integer)("maxScore").notNull(),timeLimitMinutes:(0,r.integer)("timeLimitMinutes"),enforceTimeLimit:(0,s.boolean)("enforceTimeLimit").notNull(),enforceDueDate:(0,s.boolean)("enforceDueDate").notNull(),maxAttempts:(0,r.integer)("maxAttempts").notNull()},a=>({GeneratedTask_tutorId_idx:C("GeneratedTask_tutorId_idx").on(a.tutorId),GeneratedTask_roomId_idx:C("GeneratedTask_roomId_idx").on(a.roomId),GeneratedTask_status_idx:C("GeneratedTask_status_idx").on(a.status),GeneratedTask_lessonId_idx:C("GeneratedTask_lessonId_idx").on(a.lessonId),GeneratedTask_batchId_idx:C("GeneratedTask_batchId_idx").on(a.batchId)})),V=(0,p.pgTable)("BreakoutSession",{id:(0,q.text)("id").primaryKey().notNull(),mainRoomId:(0,q.text)("mainRoomId").notNull(),tutorId:(0,q.text)("tutorId").notNull(),roomCount:(0,r.integer)("roomCount").notNull(),participantsPerRoom:(0,r.integer)("participantsPerRoom").notNull(),distributionMode:(0,q.text)("distributionMode").notNull(),timeLimit:(0,r.integer)("timeLimit").notNull(),aiAssistantEnabled:(0,s.boolean)("aiAssistantEnabled").notNull(),status:(0,q.text)("status").notNull(),startedAt:(0,t.timestamp)("startedAt",{withTimezone:!0}),endedAt:(0,t.timestamp)("endedAt",{withTimezone:!0}),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({BreakoutSession_mainRoomId_idx:C("BreakoutSession_mainRoomId_idx").on(a.mainRoomId),BreakoutSession_tutorId_idx:C("BreakoutSession_tutorId_idx").on(a.tutorId),BreakoutSession_status_idx:C("BreakoutSession_status_idx").on(a.status)})),W=(0,p.pgTable)("BreakoutRoom",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),name:(0,q.text)("name").notNull(),aiEnabled:(0,s.boolean)("aiEnabled").notNull(),aiMode:(0,q.text)("aiMode").notNull(),assignedTaskId:(0,q.text)("assignedTaskId"),status:(0,q.text)("status").notNull(),endsAt:(0,t.timestamp)("endsAt",{withTimezone:!0}),aiNotes:(0,u.jsonb)("aiNotes").notNull(),alerts:(0,u.jsonb)("alerts").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({BreakoutRoom_sessionId_idx:C("BreakoutRoom_sessionId_idx").on(a.sessionId),BreakoutRoom_status_idx:C("BreakoutRoom_status_idx").on(a.status)})),X=(0,p.pgTable)("BreakoutRoomAssignment",{id:(0,q.text)("id").primaryKey().notNull(),roomId:(0,q.text)("roomId").notNull(),studentId:(0,q.text)("studentId").notNull(),joinedAt:(0,t.timestamp)("joinedAt",{withTimezone:!0}).notNull().defaultNow(),leftAt:(0,t.timestamp)("leftAt",{withTimezone:!0})},a=>({BreakoutRoomAssignment_studentId_idx:C("BreakoutRoomAssignment_studentId_idx").on(a.studentId),BreakoutRoomAssignment_roomId_studentId_key:D("BreakoutRoomAssignment_roomId_studentId_key").on(a.roomId,a.studentId)})),Y=(0,p.pgTable)("AITutorEnrollment",{id:(0,q.text)("id").primaryKey().notNull(),studentId:(0,q.text)("studentId").notNull(),subjectCode:(0,q.text)("subjectCode").notNull(),enrolledAt:(0,t.timestamp)("enrolledAt",{withTimezone:!0}).notNull().defaultNow(),lastSessionAt:(0,t.timestamp)("lastSessionAt",{withTimezone:!0}),totalSessions:(0,r.integer)("totalSessions").notNull(),totalMinutes:(0,r.integer)("totalMinutes").notNull(),status:(0,q.text)("status").notNull()},a=>({AITutorEnrollment_studentId_idx:C("AITutorEnrollment_studentId_idx").on(a.studentId),AITutorEnrollment_studentId_subjectCode_key:D("AITutorEnrollment_studentId_subjectCode_key").on(a.studentId,a.subjectCode)})),Z=(0,p.pgTable)("AIInteractionSession",{id:(0,q.text)("id").primaryKey().notNull(),studentId:(0,q.text)("studentId").notNull(),subjectCode:(0,q.text)("subjectCode").notNull(),startedAt:(0,t.timestamp)("startedAt",{withTimezone:!0}).notNull().defaultNow(),endedAt:(0,t.timestamp)("endedAt",{withTimezone:!0}),messageCount:(0,r.integer)("messageCount").notNull(),topicsCovered:(0,q.text)("topicsCovered").array().notNull(),summary:(0,q.text)("summary")},a=>({AIInteractionSession_studentId_idx:C("AIInteractionSession_studentId_idx").on(a.studentId),AIInteractionSession_startedAt_idx:C("AIInteractionSession_startedAt_idx").on(a.startedAt)})),$=(0,p.pgTable)("AITutorDailyUsage",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull(),date:(0,t.timestamp)("date",{withTimezone:!0}).notNull().defaultNow(),sessionCount:(0,r.integer)("sessionCount").notNull(),messageCount:(0,r.integer)("messageCount").notNull(),minutesUsed:(0,r.integer)("minutesUsed").notNull()},a=>({AITutorDailyUsage_userId_idx:C("AITutorDailyUsage_userId_idx").on(a.userId),AITutorDailyUsage_userId_date_key:D("AITutorDailyUsage_userId_date_key").on(a.userId,a.date)})),_=(0,p.pgTable)("AITutorSubscription",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull().unique(),tier:h("tier").notNull(),dailySessions:(0,r.integer)("dailySessions").notNull(),dailyMessages:(0,r.integer)("dailyMessages").notNull(),startedAt:(0,t.timestamp)("startedAt",{withTimezone:!0}).notNull().defaultNow(),expiresAt:(0,t.timestamp)("expiresAt",{withTimezone:!0}),isActive:(0,s.boolean)("isActive").notNull()}),aa=(0,p.pgTable)("ContentItem",{id:(0,q.text)("id").primaryKey().notNull(),title:(0,q.text)("title").notNull(),description:(0,q.text)("description"),subject:(0,q.text)("subject").notNull(),type:(0,q.text)("type").notNull(),url:(0,q.text)("url"),thumbnailUrl:(0,q.text)("thumbnailUrl"),duration:(0,r.integer)("duration"),difficulty:(0,q.text)("difficulty").notNull(),isPublished:(0,s.boolean)("isPublished").notNull(),transcript:(0,q.text)("transcript"),videoVariants:(0,u.jsonb)("videoVariants"),uploadStatus:(0,q.text)("uploadStatus"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({ContentItem_subject_idx:C("ContentItem_subject_idx").on(a.subject),ContentItem_isPublished_idx:C("ContentItem_isPublished_idx").on(a.isPublished)})),ab=(0,p.pgTable)("VideoWatchEvent",{id:(0,q.text)("id").primaryKey().notNull(),contentId:(0,q.text)("contentId").notNull(),studentId:(0,q.text)("studentId").notNull(),eventType:(0,q.text)("eventType").notNull(),videoSeconds:(0,v.doublePrecision)("videoSeconds").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),metadata:(0,u.jsonb)("metadata")},a=>({VideoWatchEvent_contentId_idx:C("VideoWatchEvent_contentId_idx").on(a.contentId),VideoWatchEvent_studentId_idx:C("VideoWatchEvent_studentId_idx").on(a.studentId),VideoWatchEvent_contentId_studentId_idx:C("VideoWatchEvent_contentId_studentId_idx").on(a.contentId,a.studentId)})),ac=(0,p.pgTable)("ContentQuizCheckpoint",{id:(0,q.text)("id").primaryKey().notNull(),contentId:(0,q.text)("contentId").notNull(),videoTimestampSec:(0,r.integer)("videoTimestampSec").notNull(),title:(0,q.text)("title"),questions:(0,u.jsonb)("questions").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({ContentQuizCheckpoint_contentId_idx:C("ContentQuizCheckpoint_contentId_idx").on(a.contentId),ContentQuizCheckpoint_contentId_videoTimestampSec_key:D("ContentQuizCheckpoint_contentId_videoTimestampSec_key").on(a.contentId,a.videoTimestampSec)})),ad=(0,p.pgTable)("ContentProgress",{id:(0,q.text)("id").primaryKey().notNull(),contentId:(0,q.text)("contentId").notNull(),studentId:(0,q.text)("studentId").notNull(),progress:(0,r.integer)("progress").notNull(),completed:(0,s.boolean)("completed").notNull(),lastPosition:(0,r.integer)("lastPosition"),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({ContentProgress_studentId_idx:C("ContentProgress_studentId_idx").on(a.studentId),ContentProgress_contentId_studentId_key:D("ContentProgress_contentId_studentId_key").on(a.contentId,a.studentId)})),ae=(0,p.pgTable)("ReviewSchedule",{id:(0,q.text)("id").primaryKey().notNull(),studentId:(0,q.text)("studentId").notNull(),contentId:(0,q.text)("contentId").notNull(),lastReviewed:(0,t.timestamp)("lastReviewed",{withTimezone:!0}).notNull().defaultNow(),nextReview:(0,t.timestamp)("nextReview",{withTimezone:!0}).notNull(),interval:(0,r.integer)("interval").notNull(),easeFactor:(0,v.doublePrecision)("easeFactor").notNull(),stability:(0,v.doublePrecision)("stability").notNull(),repetitionCount:(0,r.integer)("repetitionCount").notNull(),performance:(0,v.doublePrecision)("performance").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({ReviewSchedule_studentId_idx:C("ReviewSchedule_studentId_idx").on(a.studentId),ReviewSchedule_nextReview_idx:C("ReviewSchedule_nextReview_idx").on(a.nextReview),ReviewSchedule_studentId_contentId_key:D("ReviewSchedule_studentId_contentId_key").on(a.studentId,a.contentId)})),af=(0,p.pgTable)("QuizAttempt",{id:(0,q.text)("id").primaryKey().notNull(),studentId:(0,q.text)("studentId").notNull(),quizId:(0,q.text)("quizId").notNull(),assignmentId:(0,q.text)("assignmentId"),answers:(0,u.jsonb)("answers").notNull(),score:(0,r.integer)("score").notNull(),maxScore:(0,r.integer)("maxScore").notNull(),completedAt:(0,t.timestamp)("completedAt",{withTimezone:!0}).notNull().defaultNow(),timeSpent:(0,r.integer)("timeSpent").notNull(),questionResults:(0,u.jsonb)("questionResults"),feedback:(0,q.text)("feedback"),status:(0,q.text)("status").notNull(),attemptNumber:(0,r.integer)("attemptNumber").notNull(),startedAt:(0,t.timestamp)("startedAt",{withTimezone:!0}).notNull().defaultNow()},a=>({QuizAttempt_studentId_idx:C("QuizAttempt_studentId_idx").on(a.studentId),QuizAttempt_quizId_idx:C("QuizAttempt_quizId_idx").on(a.quizId),QuizAttempt_assignmentId_idx:C("QuizAttempt_assignmentId_idx").on(a.assignmentId),QuizAttempt_studentId_quizId_idx:C("QuizAttempt_studentId_quizId_idx").on(a.studentId,a.quizId)})),ag=(0,p.pgTable)("QuestionBankItem",{id:(0,q.text)("id").primaryKey().notNull(),tutorId:(0,q.text)("tutorId").notNull(),type:(0,q.text)("type").notNull(),question:(0,q.text)("question").notNull(),options:(0,u.jsonb)("options"),correctAnswer:(0,u.jsonb)("correctAnswer"),explanation:(0,q.text)("explanation"),hint:(0,q.text)("hint"),points:(0,r.integer)("points").notNull(),difficulty:(0,q.text)("difficulty").notNull(),tags:(0,q.text)("tags").array().notNull(),subject:(0,q.text)("subject"),curriculumId:(0,q.text)("curriculumId"),lessonId:(0,q.text)("lessonId"),isPublic:(0,s.boolean)("isPublic").notNull(),usageCount:(0,r.integer)("usageCount").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({QuestionBankItem_tutorId_idx:C("QuestionBankItem_tutorId_idx").on(a.tutorId),QuestionBankItem_type_idx:C("QuestionBankItem_type_idx").on(a.type),QuestionBankItem_difficulty_idx:C("QuestionBankItem_difficulty_idx").on(a.difficulty),QuestionBankItem_subject_idx:C("QuestionBankItem_subject_idx").on(a.subject),QuestionBankItem_tags_idx:C("QuestionBankItem_tags_idx").on(a.tags)})),ah=(0,p.pgTable)("Quiz",{id:(0,q.text)("id").primaryKey().notNull(),tutorId:(0,q.text)("tutorId").notNull(),title:(0,q.text)("title").notNull(),description:(0,q.text)("description"),type:(0,q.text)("type").notNull(),status:(0,q.text)("status").notNull(),timeLimit:(0,r.integer)("timeLimit"),allowedAttempts:(0,r.integer)("allowedAttempts").notNull(),shuffleQuestions:(0,s.boolean)("shuffleQuestions").notNull(),shuffleOptions:(0,s.boolean)("shuffleOptions").notNull(),showCorrectAnswers:(0,q.text)("showCorrectAnswers").notNull(),passingScore:(0,r.integer)("passingScore"),questions:(0,u.jsonb)("questions").notNull(),totalPoints:(0,r.integer)("totalPoints").notNull(),tags:(0,q.text)("tags").array().notNull(),startDate:(0,t.timestamp)("startDate",{withTimezone:!0}),dueDate:(0,t.timestamp)("dueDate",{withTimezone:!0}),curriculumId:(0,q.text)("curriculumId"),lessonId:(0,q.text)("lessonId"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({Quiz_tutorId_idx:C("Quiz_tutorId_idx").on(a.tutorId),Quiz_status_idx:C("Quiz_status_idx").on(a.status),Quiz_type_idx:C("Quiz_type_idx").on(a.type),Quiz_curriculumId_idx:C("Quiz_curriculumId_idx").on(a.curriculumId),Quiz_lessonId_idx:C("Quiz_lessonId_idx").on(a.lessonId)})),ai=(0,p.pgTable)("QuizAssignment",{id:(0,q.text)("id").primaryKey().notNull(),quizId:(0,q.text)("quizId").notNull(),assignedByTutorId:(0,q.text)("assignedByTutorId").notNull(),assignedToType:(0,q.text)("assignedToType").notNull(),assignedToId:(0,q.text)("assignedToId"),assignedToAll:(0,s.boolean)("assignedToAll").notNull(),assignedAt:(0,t.timestamp)("assignedAt",{withTimezone:!0}).notNull().defaultNow(),dueDate:(0,t.timestamp)("dueDate",{withTimezone:!0}),isActive:(0,s.boolean)("isActive").notNull()},a=>({QuizAssignment_quizId_idx:C("QuizAssignment_quizId_idx").on(a.quizId),QuizAssignment_assignedByTutorId_idx:C("QuizAssignment_assignedByTutorId_idx").on(a.assignedByTutorId),QuizAssignment_assignedToId_idx:C("QuizAssignment_assignedToId_idx").on(a.assignedToId),QuizAssignment_isActive_idx:C("QuizAssignment_isActive_idx").on(a.isActive)})),aj=(0,p.pgTable)("Note",{id:(0,q.text)("id").primaryKey().notNull(),contentId:(0,q.text)("contentId").notNull(),studentId:(0,q.text)("studentId").notNull(),content:(0,q.text)("content").notNull(),timestamp:(0,r.integer)("timestamp").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({Note_contentId_idx:C("Note_contentId_idx").on(a.contentId),Note_studentId_idx:C("Note_studentId_idx").on(a.studentId)})),ak=(0,p.pgTable)("Bookmark",{id:(0,q.text)("id").primaryKey().notNull(),contentId:(0,q.text)("contentId").notNull(),studentId:(0,q.text)("studentId").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({Bookmark_studentId_idx:C("Bookmark_studentId_idx").on(a.studentId),Bookmark_contentId_studentId_key:D("Bookmark_contentId_studentId_key").on(a.contentId,a.studentId)})),al=(0,p.pgTable)("UserGamification",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull().unique(),level:(0,r.integer)("level").notNull(),xp:(0,r.integer)("xp").notNull(),streakDays:(0,r.integer)("streakDays").notNull(),longestStreak:(0,r.integer)("longestStreak").notNull(),lastLogin:(0,t.timestamp)("lastLogin",{withTimezone:!0}).notNull().defaultNow(),lastActiveDate:(0,t.timestamp)("lastActiveDate",{withTimezone:!0}),totalStudyMinutes:(0,r.integer)("totalStudyMinutes").notNull(),grammarScore:(0,r.integer)("grammarScore").notNull(),vocabularyScore:(0,r.integer)("vocabularyScore").notNull(),speakingScore:(0,r.integer)("speakingScore").notNull(),listeningScore:(0,r.integer)("listeningScore").notNull(),confidenceScore:(0,r.integer)("confidenceScore").notNull(),fluencyScore:(0,r.integer)("fluencyScore").notNull(),unlockedWorlds:(0,q.text)("unlockedWorlds").array().notNull()}),am=(0,p.pgTable)("Achievement",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull(),type:(0,q.text)("type").notNull(),title:(0,q.text)("title").notNull(),description:(0,q.text)("description").notNull(),unlockedAt:(0,t.timestamp)("unlockedAt",{withTimezone:!0}).notNull().defaultNow(),xpAwarded:(0,r.integer)("xpAwarded").notNull()},a=>({Achievement_userId_idx:C("Achievement_userId_idx").on(a.userId)})),an=(0,p.pgTable)("Mission",{id:(0,q.text)("id").primaryKey().notNull(),title:(0,q.text)("title").notNull(),description:(0,q.text)("description").notNull(),type:(0,q.text)("type").notNull(),xpReward:(0,r.integer)("xpReward").notNull(),requirement:(0,u.jsonb)("requirement").notNull(),isActive:(0,s.boolean)("isActive").notNull()}),ao=(0,p.pgTable)("MissionProgress",{id:(0,q.text)("id").primaryKey().notNull(),missionId:(0,q.text)("missionId").notNull(),studentId:(0,q.text)("studentId").notNull(),progress:(0,r.integer)("progress").notNull(),completed:(0,s.boolean)("completed").notNull(),completedAt:(0,t.timestamp)("completedAt",{withTimezone:!0})},a=>({MissionProgress_studentId_idx:C("MissionProgress_studentId_idx").on(a.studentId),MissionProgress_missionId_studentId_key:D("MissionProgress_missionId_studentId_key").on(a.missionId,a.studentId)})),ap=(0,p.pgTable)("UserDailyQuest",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull(),missionId:(0,q.text)("missionId").notNull(),date:(0,t.timestamp)("date",{withTimezone:!0}).notNull().defaultNow(),completed:(0,s.boolean)("completed").notNull()},a=>({UserDailyQuest_userId_idx:C("UserDailyQuest_userId_idx").on(a.userId),UserDailyQuest_userId_missionId_date_key:D("UserDailyQuest_userId_missionId_date_key").on(a.userId,a.missionId,a.date)})),aq=(0,p.pgTable)("Badge",{id:(0,q.text)("id").primaryKey().notNull(),key:(0,q.text)("key").notNull().unique(),name:(0,q.text)("name").notNull(),description:(0,q.text)("description").notNull(),icon:(0,q.text)("icon").notNull(),color:(0,q.text)("color").notNull(),category:(0,q.text)("category").notNull(),rarity:(0,q.text)("rarity").notNull(),xpBonus:(0,r.integer)("xpBonus").notNull(),requirement:(0,u.jsonb)("requirement").notNull(),isSecret:(0,s.boolean)("isSecret").notNull(),order:(0,r.integer)("order").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()}),ar=(0,p.pgTable)("UserBadge",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull(),badgeId:(0,q.text)("badgeId").notNull(),earnedAt:(0,t.timestamp)("earnedAt",{withTimezone:!0}).notNull().defaultNow(),progress:(0,r.integer)("progress").notNull()},a=>({UserBadge_userId_idx:C("UserBadge_userId_idx").on(a.userId),UserBadge_badgeId_idx:C("UserBadge_badgeId_idx").on(a.badgeId),UserBadge_userId_badgeId_key:D("UserBadge_userId_badgeId_key").on(a.userId,a.badgeId)})),as=(0,p.pgTable)("LeaderboardEntry",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull(),type:(0,q.text)("type").notNull(),periodStart:(0,t.timestamp)("periodStart",{withTimezone:!0}),periodEnd:(0,t.timestamp)("periodEnd",{withTimezone:!0}),score:(0,r.integer)("score").notNull(),rank:(0,r.integer)("rank")},a=>({LeaderboardEntry_type_score_idx:C("LeaderboardEntry_type_score_idx").on(a.type,a.score),LeaderboardEntry_userId_idx:C("LeaderboardEntry_userId_idx").on(a.userId),LeaderboardEntry_userId_type_periodStart_key:D("LeaderboardEntry_userId_type_periodStart_key").on(a.userId,a.type,a.periodStart)})),at=(0,p.pgTable)("LiveSession",{id:(0,q.text)("id").primaryKey().notNull(),tutorId:(0,q.text)("tutorId").notNull(),curriculumId:(0,q.text)("curriculumId"),title:(0,q.text)("title").notNull(),subject:(0,q.text)("subject").notNull(),description:(0,q.text)("description"),gradeLevel:(0,q.text)("gradeLevel"),type:f("type").notNull(),scheduledAt:(0,t.timestamp)("scheduledAt",{withTimezone:!0}),startedAt:(0,t.timestamp)("startedAt",{withTimezone:!0}),endedAt:(0,t.timestamp)("endedAt",{withTimezone:!0}),maxStudents:(0,r.integer)("maxStudents").notNull(),status:(0,q.text)("status").notNull(),roomId:(0,q.text)("roomId"),roomUrl:(0,q.text)("roomUrl"),recordingUrl:(0,q.text)("recordingUrl"),recordingAvailableAt:(0,t.timestamp)("recordingAvailableAt",{withTimezone:!0})},a=>({LiveSession_tutorId_idx:C("LiveSession_tutorId_idx").on(a.tutorId),LiveSession_curriculumId_idx:C("LiveSession_curriculumId_idx").on(a.curriculumId),LiveSession_status_idx:C("LiveSession_status_idx").on(a.status),LiveSession_scheduledAt_idx:C("LiveSession_scheduledAt_idx").on(a.scheduledAt)})),au=(0,p.pgTable)("SessionReplayArtifact",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull().unique(),tutorId:(0,q.text)("tutorId").notNull(),recordingUrl:(0,q.text)("recordingUrl"),transcript:(0,q.text)("transcript"),summary:(0,q.text)("summary"),summaryJson:(0,u.jsonb)("summaryJson"),status:(0,q.text)("status").notNull(),startedAt:(0,t.timestamp)("startedAt",{withTimezone:!0}),endedAt:(0,t.timestamp)("endedAt",{withTimezone:!0}),generatedAt:(0,t.timestamp)("generatedAt",{withTimezone:!0}),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({SessionReplayArtifact_tutorId_idx:C("SessionReplayArtifact_tutorId_idx").on(a.tutorId),SessionReplayArtifact_status_idx:C("SessionReplayArtifact_status_idx").on(a.status),SessionReplayArtifact_generatedAt_idx:C("SessionReplayArtifact_generatedAt_idx").on(a.generatedAt)})),av=(0,p.pgTable)("SessionParticipant",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),studentId:(0,q.text)("studentId").notNull(),joinedAt:(0,t.timestamp)("joinedAt",{withTimezone:!0}).notNull().defaultNow(),leftAt:(0,t.timestamp)("leftAt",{withTimezone:!0})},a=>({SessionParticipant_studentId_idx:C("SessionParticipant_studentId_idx").on(a.studentId),SessionParticipant_sessionId_studentId_key:D("SessionParticipant_sessionId_studentId_key").on(a.sessionId,a.studentId)})),aw=(0,p.pgTable)("Poll",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),tutorId:(0,q.text)("tutorId").notNull(),question:(0,q.text)("question").notNull(),type:d("type").notNull(),isAnonymous:(0,s.boolean)("isAnonymous").notNull(),allowMultiple:(0,s.boolean)("allowMultiple").notNull(),timeLimit:(0,r.integer)("timeLimit"),showResults:(0,s.boolean)("showResults").notNull(),correctOptionId:(0,q.text)("correctOptionId"),status:e("status").notNull(),startedAt:(0,t.timestamp)("startedAt",{withTimezone:!0}),endedAt:(0,t.timestamp)("endedAt",{withTimezone:!0}),totalResponses:(0,r.integer)("totalResponses").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({Poll_sessionId_idx:C("Poll_sessionId_idx").on(a.sessionId),Poll_tutorId_idx:C("Poll_tutorId_idx").on(a.tutorId),Poll_status_idx:C("Poll_status_idx").on(a.status),Poll_createdAt_idx:C("Poll_createdAt_idx").on(a.createdAt)})),ax=(0,p.pgTable)("PollOption",{id:(0,q.text)("id").primaryKey().notNull(),pollId:(0,q.text)("pollId").notNull(),label:(0,q.text)("label").notNull(),text:(0,q.text)("text").notNull(),color:(0,q.text)("color"),responseCount:(0,r.integer)("responseCount").notNull(),percentage:(0,v.doublePrecision)("percentage").notNull()},a=>({PollOption_pollId_idx:C("PollOption_pollId_idx").on(a.pollId)})),ay=(0,p.pgTable)("PollResponse",{id:(0,q.text)("id").primaryKey().notNull(),pollId:(0,q.text)("pollId").notNull(),respondentHash:(0,q.text)("respondentHash"),optionIds:(0,q.text)("optionIds").array().notNull(),rating:(0,r.integer)("rating"),textAnswer:(0,q.text)("textAnswer"),studentId:(0,q.text)("studentId"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({PollResponse_pollId_idx:C("PollResponse_pollId_idx").on(a.pollId),PollResponse_studentId_idx:C("PollResponse_studentId_idx").on(a.studentId),PollResponse_pollId_respondentHash_key:D("PollResponse_pollId_respondentHash_key").on(a.pollId,a.respondentHash)})),az=(0,p.pgTable)("Message",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),userId:(0,q.text)("userId").notNull(),content:(0,q.text)("content").notNull(),type:(0,q.text)("type").notNull(),source:g("source").notNull(),timestamp:(0,t.timestamp)("timestamp",{withTimezone:!0}).notNull().defaultNow()},a=>({Message_sessionId_idx:C("Message_sessionId_idx").on(a.sessionId),Message_userId_idx:C("Message_userId_idx").on(a.userId)})),aA=(0,p.pgTable)("Conversation",{id:(0,q.text)("id").primaryKey().notNull(),participant1Id:(0,q.text)("participant1Id").notNull(),participant2Id:(0,q.text)("participant2Id").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({Conversation_participant1Id_idx:C("Conversation_participant1Id_idx").on(a.participant1Id),Conversation_participant2Id_idx:C("Conversation_participant2Id_idx").on(a.participant2Id),Conversation_updatedAt_idx:C("Conversation_updatedAt_idx").on(a.updatedAt),Conversation_participant1Id_participant2Id_key:D("Conversation_participant1Id_participant2Id_key").on(a.participant1Id,a.participant2Id)})),aB=(0,p.pgTable)("DirectMessage",{id:(0,q.text)("id").primaryKey().notNull(),conversationId:(0,q.text)("conversationId").notNull(),senderId:(0,q.text)("senderId").notNull(),content:(0,q.text)("content").notNull(),type:(0,q.text)("type").notNull(),attachmentUrl:(0,q.text)("attachmentUrl"),read:(0,s.boolean)("read").notNull(),readAt:(0,t.timestamp)("readAt",{withTimezone:!0}),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({DirectMessage_conversationId_idx:C("DirectMessage_conversationId_idx").on(a.conversationId),DirectMessage_senderId_idx:C("DirectMessage_senderId_idx").on(a.senderId),DirectMessage_createdAt_idx:C("DirectMessage_createdAt_idx").on(a.createdAt)})),aC=(0,p.pgTable)("Notification",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull(),type:(0,q.text)("type").notNull(),title:(0,q.text)("title").notNull(),message:(0,q.text)("message").notNull(),data:(0,u.jsonb)("data"),read:(0,s.boolean)("read").notNull(),readAt:(0,t.timestamp)("readAt",{withTimezone:!0}),actionUrl:(0,q.text)("actionUrl"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({Notification_userId_idx:C("Notification_userId_idx").on(a.userId),Notification_read_idx:C("Notification_read_idx").on(a.read),Notification_createdAt_idx:C("Notification_createdAt_idx").on(a.createdAt),Notification_type_idx:C("Notification_type_idx").on(a.type),idx_notification_user_read_created:C("idx_notification_user_read_created").on(a.userId,a.read,a.createdAt),idx_notification_user_type_created:C("idx_notification_user_type_created").on(a.userId,a.type,a.createdAt)})),aD=(0,p.pgTable)("NotificationPreference",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull().unique(),emailEnabled:(0,s.boolean)("emailEnabled").notNull(),pushEnabled:(0,s.boolean)("pushEnabled").notNull(),inAppEnabled:(0,s.boolean)("inAppEnabled").notNull(),channelOverrides:(0,u.jsonb)("channelOverrides").notNull(),quietHoursStart:(0,q.text)("quietHoursStart"),quietHoursEnd:(0,q.text)("quietHoursEnd"),timezone:(0,q.text)("timezone").notNull(),emailDigest:(0,q.text)("emailDigest").notNull(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)}),aE=(0,p.pgTable)("AIAssistantSession",{id:(0,q.text)("id").primaryKey().notNull(),tutorId:(0,q.text)("tutorId").notNull(),title:(0,q.text)("title").notNull(),context:(0,q.text)("context"),status:(0,q.text)("status").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({AIAssistantSession_tutorId_idx:C("AIAssistantSession_tutorId_idx").on(a.tutorId),AIAssistantSession_status_idx:C("AIAssistantSession_status_idx").on(a.status),AIAssistantSession_updatedAt_idx:C("AIAssistantSession_updatedAt_idx").on(a.updatedAt)})),aF=(0,p.pgTable)("AIAssistantMessage",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),role:(0,q.text)("role").notNull(),content:(0,q.text)("content").notNull(),metadata:(0,u.jsonb)("metadata"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({AIAssistantMessage_sessionId_idx:C("AIAssistantMessage_sessionId_idx").on(a.sessionId),AIAssistantMessage_createdAt_idx:C("AIAssistantMessage_createdAt_idx").on(a.createdAt)})),aG=(0,p.pgTable)("AIAssistantInsight",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),type:(0,q.text)("type").notNull(),title:(0,q.text)("title").notNull(),content:(0,q.text)("content").notNull(),relatedData:(0,u.jsonb)("relatedData"),applied:(0,s.boolean)("applied").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({AIAssistantInsight_sessionId_idx:C("AIAssistantInsight_sessionId_idx").on(a.sessionId),AIAssistantInsight_type_idx:C("AIAssistantInsight_type_idx").on(a.type),AIAssistantInsight_createdAt_idx:C("AIAssistantInsight_createdAt_idx").on(a.createdAt)})),aH=(0,p.pgTable)("Clinic",{id:(0,q.text)("id").primaryKey().notNull(),title:(0,q.text)("title").notNull(),subject:(0,q.text)("subject").notNull(),description:(0,q.text)("description"),tutorId:(0,q.text)("tutorId").notNull(),startTime:(0,t.timestamp)("startTime",{withTimezone:!0}).notNull(),duration:(0,r.integer)("duration").notNull(),maxStudents:(0,r.integer)("maxStudents").notNull(),status:(0,q.text)("status").notNull(),roomUrl:(0,q.text)("roomUrl"),roomId:(0,q.text)("roomId"),requiresPayment:(0,s.boolean)("requiresPayment").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({Clinic_startTime_idx:C("Clinic_startTime_idx").on(a.startTime),Clinic_status_idx:C("Clinic_status_idx").on(a.status)})),aI=(0,p.pgTable)("ClinicBooking",{id:(0,q.text)("id").primaryKey().notNull(),clinicId:(0,q.text)("clinicId").notNull(),studentId:(0,q.text)("studentId").notNull(),bookedAt:(0,t.timestamp)("bookedAt",{withTimezone:!0}).notNull().defaultNow(),attended:(0,s.boolean)("attended").notNull(),requiresPayment:(0,s.boolean)("requiresPayment").notNull()},a=>({ClinicBooking_studentId_idx:C("ClinicBooking_studentId_idx").on(a.studentId),ClinicBooking_clinicId_studentId_key:D("ClinicBooking_clinicId_studentId_key").on(a.clinicId,a.studentId)})),aJ=(0,p.pgTable)("Payment",{id:(0,q.text)("id").primaryKey().notNull(),bookingId:(0,q.text)("bookingId").unique(),amount:(0,v.doublePrecision)("amount").notNull(),currency:(0,q.text)("currency").notNull(),status:i("status").notNull(),gateway:j("gateway").notNull(),gatewayPaymentId:(0,q.text)("gatewayPaymentId"),gatewayCheckoutUrl:(0,q.text)("gatewayCheckoutUrl"),paidAt:(0,t.timestamp)("paidAt",{withTimezone:!0}),refundedAt:(0,t.timestamp)("refundedAt",{withTimezone:!0}),metadata:(0,u.jsonb)("metadata"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date),enrollmentId:(0,q.text)("enrollmentId"),tutorId:(0,q.text)("tutorId")},a=>({Payment_status_idx:C("Payment_status_idx").on(a.status),Payment_gateway_idx:C("Payment_gateway_idx").on(a.gateway),Payment_gatewayPaymentId_idx:C("Payment_gatewayPaymentId_idx").on(a.gatewayPaymentId),Payment_tutorId_idx:C("Payment_tutorId_idx").on(a.tutorId),idx_payment_tutor_status_created:C("idx_payment_tutor_status_created").on(a.tutorId,a.status,a.createdAt),idx_payment_enrollment_status:C("idx_payment_enrollment_status").on(a.enrollmentId,a.status)})),aK=(0,p.pgTable)("Refund",{id:(0,q.text)("id").primaryKey().notNull(),paymentId:(0,q.text)("paymentId").notNull(),amount:(0,v.doublePrecision)("amount").notNull(),reason:(0,q.text)("reason"),status:k("status").notNull(),gatewayRefundId:(0,q.text)("gatewayRefundId"),processedAt:(0,t.timestamp)("processedAt",{withTimezone:!0}),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({Refund_paymentId_idx:C("Refund_paymentId_idx").on(a.paymentId)})),aL=(0,p.pgTable)("WebhookEvent",{id:(0,q.text)("id").primaryKey().notNull(),paymentId:(0,q.text)("paymentId"),gateway:j("gateway").notNull(),eventType:(0,q.text)("eventType").notNull(),payload:(0,u.jsonb)("payload").notNull(),processed:(0,s.boolean)("processed").notNull(),processedAt:(0,t.timestamp)("processedAt",{withTimezone:!0}),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({WebhookEvent_gateway_eventType_idx:C("WebhookEvent_gateway_eventType_idx").on(a.gateway,a.eventType),WebhookEvent_processed_idx:C("WebhookEvent_processed_idx").on(a.processed)})),aM=(0,p.pgTable)("Payout",{id:(0,q.text)("id").primaryKey().notNull(),tutorId:(0,q.text)("tutorId").notNull(),amount:(0,v.doublePrecision)("amount").notNull(),currency:(0,q.text)("currency").notNull(),status:(0,q.text)("status").notNull(),method:(0,q.text)("method").notNull(),details:(0,u.jsonb)("details"),notes:(0,q.text)("notes"),requestedAt:(0,t.timestamp)("requestedAt",{withTimezone:!0}).notNull().defaultNow(),processedAt:(0,t.timestamp)("processedAt",{withTimezone:!0}),completedAt:(0,t.timestamp)("completedAt",{withTimezone:!0}),transactionReference:(0,q.text)("transactionReference")},a=>({Payout_tutorId_idx:C("Payout_tutorId_idx").on(a.tutorId),Payout_status_idx:C("Payout_status_idx").on(a.status),Payout_requestedAt_idx:C("Payout_requestedAt_idx").on(a.requestedAt)})),aN=(0,p.pgTable)("PaymentOnPayout",{id:(0,q.text)("id").primaryKey().notNull(),paymentId:(0,q.text)("paymentId").notNull(),payoutId:(0,q.text)("payoutId").notNull(),amount:(0,v.doublePrecision)("amount").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({PaymentOnPayout_payoutId_idx:C("PaymentOnPayout_payoutId_idx").on(a.payoutId),PaymentOnPayout_paymentId_idx:C("PaymentOnPayout_paymentId_idx").on(a.paymentId),PaymentOnPayout_paymentId_payoutId_key:D("PaymentOnPayout_paymentId_payoutId_key").on(a.paymentId,a.payoutId)})),aO=(0,p.pgTable)("PlatformRevenue",{id:(0,q.text)("id").primaryKey().notNull(),paymentId:(0,q.text)("paymentId").notNull(),amount:(0,v.doublePrecision)("amount").notNull(),month:(0,q.text)("month").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({PlatformRevenue_paymentId_idx:C("PlatformRevenue_paymentId_idx").on(a.paymentId),PlatformRevenue_month_idx:C("PlatformRevenue_month_idx").on(a.month),PlatformRevenue_createdAt_idx:C("PlatformRevenue_createdAt_idx").on(a.createdAt)})),aP=(0,p.pgTable)("StudyGroup",{id:(0,q.text)("id").primaryKey().notNull(),name:(0,q.text)("name").notNull(),subject:(0,q.text)("subject").notNull(),description:(0,q.text)("description"),maxMembers:(0,r.integer)("maxMembers").notNull(),createdBy:(0,q.text)("createdBy").notNull(),isActive:(0,s.boolean)("isActive").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({StudyGroup_subject_idx:C("StudyGroup_subject_idx").on(a.subject),StudyGroup_isActive_idx:C("StudyGroup_isActive_idx").on(a.isActive)})),aQ=(0,p.pgTable)("StudyGroupMember",{id:(0,q.text)("id").primaryKey().notNull(),groupId:(0,q.text)("groupId").notNull(),studentId:(0,q.text)("studentId").notNull(),joinedAt:(0,t.timestamp)("joinedAt",{withTimezone:!0}).notNull().defaultNow(),role:(0,q.text)("role").notNull()},a=>({StudyGroupMember_studentId_idx:C("StudyGroupMember_studentId_idx").on(a.studentId),StudyGroupMember_groupId_studentId_key:D("StudyGroupMember_groupId_studentId_key").on(a.groupId,a.studentId)})),aR=(0,p.pgTable)("UserActivityLog",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull(),action:(0,q.text)("action").notNull(),metadata:(0,u.jsonb)("metadata"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({UserActivityLog_userId_idx:C("UserActivityLog_userId_idx").on(a.userId),UserActivityLog_createdAt_idx:C("UserActivityLog_createdAt_idx").on(a.createdAt),idx_user_activity_user_created:C("idx_user_activity_user_created").on(a.userId,a.createdAt)})),aS=(0,p.pgTable)("ApiKey",{id:(0,q.text)("id").primaryKey().notNull(),name:(0,q.text)("name").notNull(),keyHash:(0,q.text)("keyHash").notNull(),createdById:(0,q.text)("createdById"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),lastUsedAt:(0,t.timestamp)("lastUsedAt",{withTimezone:!0})},a=>({ApiKey_keyHash_idx:C("ApiKey_keyHash_idx").on(a.keyHash)})),aT=(0,p.pgTable)("SecurityEvent",{id:(0,q.text)("id").primaryKey().notNull(),eventType:(0,q.text)("eventType").notNull(),ip:(0,q.text)("ip"),metadata:(0,u.jsonb)("metadata"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),action:(0,q.text)("action"),userId:(0,q.text)("userId"),actorId:(0,q.text)("actorId"),targetType:(0,q.text)("targetType"),targetId:(0,q.text)("targetId"),severity:(0,q.text)("severity"),description:(0,q.text)("description"),originIp:(0,q.text)("originIp"),userAgent:(0,q.text)("userAgent"),countryCode:(0,q.text)("countryCode"),region:(0,q.text)("region"),city:(0,q.text)("city"),deviceId:(0,q.text)("deviceId"),sessionId:(0,q.text)("sessionId"),correlationId:(0,q.text)("correlationId"),occurredAt:(0,t.timestamp)("occurredAt",{withTimezone:!0})},a=>({SecurityEvent_eventType_idx:C("SecurityEvent_eventType_idx").on(a.eventType),SecurityEvent_action_idx:C("SecurityEvent_action_idx").on(a.action),SecurityEvent_severity_idx:C("SecurityEvent_severity_idx").on(a.severity),SecurityEvent_createdAt_idx:C("SecurityEvent_createdAt_idx").on(a.createdAt),SecurityEvent_occurredAt_idx:C("SecurityEvent_occurredAt_idx").on(a.occurredAt),SecurityEvent_ip_idx:C("SecurityEvent_ip_idx").on(a.ip),SecurityEvent_userId_idx:C("SecurityEvent_userId_idx").on(a.userId)})),aU=(0,p.pgTable)("PerformanceMetric",{id:(0,q.text)("id").primaryKey().notNull(),name:(0,q.text)("name").notNull(),metricValue:(0,v.doublePrecision)("metric_value").notNull(),unit:(0,q.text)("unit").notNull(),tags:(0,u.jsonb)("tags"),userId:(0,q.text)("userId"),sessionId:(0,q.text)("sessionId"),timestamp:(0,t.timestamp)("timestamp",{withTimezone:!0}).notNull().defaultNow()},a=>({PerformanceMetric_name_idx:C("PerformanceMetric_name_idx").on(a.name),PerformanceMetric_timestamp_idx:C("PerformanceMetric_timestamp_idx").on(a.timestamp),PerformanceMetric_userId_idx:C("PerformanceMetric_userId_idx").on(a.userId)})),aV=(0,p.pgTable)("PerformanceAlert",{id:(0,q.text)("id").primaryKey().notNull(),type:(0,q.text)("type").notNull(),severity:(0,q.text)("severity").notNull(),message:(0,q.text)("message").notNull(),metric:(0,q.text)("metric"),threshold:(0,v.doublePrecision)("threshold"),currentValue:(0,v.doublePrecision)("currentValue"),timestamp:(0,t.timestamp)("timestamp",{withTimezone:!0}).notNull().defaultNow(),resolved:(0,s.boolean)("resolved").notNull(),resolvedAt:(0,t.timestamp)("resolvedAt",{withTimezone:!0})},a=>({PerformanceAlert_type_idx:C("PerformanceAlert_type_idx").on(a.type),PerformanceAlert_severity_idx:C("PerformanceAlert_severity_idx").on(a.severity),PerformanceAlert_resolved_idx:C("PerformanceAlert_resolved_idx").on(a.resolved),PerformanceAlert_timestamp_idx:C("PerformanceAlert_timestamp_idx").on(a.timestamp)})),aW=(0,p.pgTable)("EngagementSnapshot",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),studentId:(0,q.text)("studentId").notNull(),engagementScore:(0,v.doublePrecision)("engagementScore").notNull(),attentionLevel:(0,q.text)("attentionLevel").notNull(),comprehensionEstimate:(0,v.doublePrecision)("comprehensionEstimate"),participationCount:(0,r.integer)("participationCount").notNull(),chatMessages:(0,r.integer)("chatMessages").notNull(),whiteboardInteractions:(0,r.integer)("whiteboardInteractions").notNull(),struggleIndicators:(0,r.integer)("struggleIndicators").notNull(),timestamp:(0,t.timestamp)("timestamp",{withTimezone:!0}).notNull().defaultNow()},a=>({EngagementSnapshot_sessionId_idx:C("EngagementSnapshot_sessionId_idx").on(a.sessionId),EngagementSnapshot_studentId_idx:C("EngagementSnapshot_studentId_idx").on(a.studentId)})),aX=(0,p.pgTable)("SessionEngagementSummary",{sessionId:(0,q.text)("sessionId").primaryKey().notNull(),averageEngagement:(0,v.doublePrecision)("averageEngagement"),peakEngagement:(0,v.doublePrecision)("peakEngagement"),lowEngagement:(0,v.doublePrecision)("lowEngagement"),participationRate:(0,v.doublePrecision)("participationRate"),totalChatMessages:(0,r.integer)("totalChatMessages"),totalHandRaises:(0,r.integer)("totalHandRaises"),timeOnTaskPercentage:(0,v.doublePrecision)("timeOnTaskPercentage")}),aY=(0,p.pgTable)("PostSessionReport",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),tutorId:(0,q.text)("tutorId").notNull(),status:(0,q.text)("status").notNull(),keyConcepts:(0,u.jsonb)("keyConcepts").notNull(),mainTopics:(0,u.jsonb)("mainTopics").notNull(),studentQuestions:(0,u.jsonb)("studentQuestions").notNull(),challengingConcepts:(0,u.jsonb)("challengingConcepts").notNull(),overallAssessment:(0,q.text)("overallAssessment").notNull(),averageEngagement:(0,v.doublePrecision)("averageEngagement").notNull(),peakEngagement:(0,v.doublePrecision)("peakEngagement").notNull(),lowEngagement:(0,v.doublePrecision)("lowEngagement").notNull(),participationRate:(0,v.doublePrecision)("participationRate").notNull(),chatActivity:(0,r.integer)("chatActivity").notNull(),handRaises:(0,r.integer)("handRaises").notNull(),timeOnTask:(0,v.doublePrecision)("timeOnTask").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({PostSessionReport_sessionId_idx:C("PostSessionReport_sessionId_idx").on(a.sessionId)})),aZ=(0,p.pgTable)("StudentSessionInsight",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),studentId:(0,q.text)("studentId").notNull(),engagement:(0,v.doublePrecision)("engagement").notNull(),participation:(0,r.integer)("participation").notNull(),questionsAsked:(0,r.integer)("questionsAsked").notNull(),timeAwayMinutes:(0,r.integer)("timeAwayMinutes").notNull(),flaggedForFollowUp:(0,s.boolean)("flaggedForFollowUp").notNull(),followUpReason:(0,q.text)("followUpReason"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({StudentSessionInsight_sessionId_idx:C("StudentSessionInsight_sessionId_idx").on(a.sessionId)})),a$=(0,p.pgTable)("SessionBookmark",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),timestampSeconds:(0,r.integer)("timestampSeconds").notNull(),label:(0,q.text)("label"),note:(0,q.text)("note"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({SessionBookmark_sessionId_idx:C("SessionBookmark_sessionId_idx").on(a.sessionId)})),a_=(0,p.pgTable)("Resource",{id:(0,q.text)("id").primaryKey().notNull(),tutorId:(0,q.text)("tutorId").notNull(),name:(0,q.text)("name").notNull(),description:(0,q.text)("description"),type:(0,q.text)("type").notNull(),size:(0,r.integer)("size").notNull(),mimeType:(0,q.text)("mimeType"),url:(0,q.text)("url").notNull(),key:(0,q.text)("key").notNull(),tags:(0,q.text)("tags").array().notNull(),isPublic:(0,s.boolean)("isPublic").notNull(),downloadCount:(0,r.integer)("downloadCount").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({Resource_tutorId_idx:C("Resource_tutorId_idx").on(a.tutorId),Resource_type_idx:C("Resource_type_idx").on(a.type),Resource_tags_idx:C("Resource_tags_idx").on(a.tags),Resource_isPublic_idx:C("Resource_isPublic_idx").on(a.isPublic)})),a0=(0,p.pgTable)("ResourceShare",{id:(0,q.text)("id").primaryKey().notNull(),resourceId:(0,q.text)("resourceId").notNull(),sharedByTutorId:(0,q.text)("sharedByTutorId").notNull(),recipientId:(0,q.text)("recipientId"),curriculumId:(0,q.text)("curriculumId"),sharedWithAll:(0,s.boolean)("sharedWithAll").notNull(),message:(0,q.text)("message"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({ResourceShare_resourceId_idx:C("ResourceShare_resourceId_idx").on(a.resourceId),ResourceShare_recipientId_idx:C("ResourceShare_recipientId_idx").on(a.recipientId),ResourceShare_sharedByTutorId_idx:C("ResourceShare_sharedByTutorId_idx").on(a.sharedByTutorId),ResourceShare_resourceId_recipientId_key:D("ResourceShare_resourceId_recipientId_key").on(a.resourceId,a.recipientId),ResourceShare_resourceId_sharedWithAll_key:D("ResourceShare_resourceId_sharedWithAll_key").on(a.resourceId,a.sharedWithAll)})),a1=(0,p.pgTable)("LibraryTask",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull(),question:(0,q.text)("question").notNull(),type:(0,q.text)("type").notNull(),options:(0,u.jsonb)("options"),correctAnswer:(0,q.text)("correctAnswer"),explanation:(0,q.text)("explanation"),difficulty:(0,q.text)("difficulty").notNull(),subject:(0,q.text)("subject").notNull(),topics:(0,u.jsonb)("topics").notNull(),isFavorite:(0,s.boolean)("isFavorite").notNull(),usageCount:(0,r.integer)("usageCount").notNull(),lastUsedAt:(0,t.timestamp)("lastUsedAt",{withTimezone:!0}),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({LibraryTask_userId_idx:C("LibraryTask_userId_idx").on(a.userId),LibraryTask_isFavorite_idx:C("LibraryTask_isFavorite_idx").on(a.isFavorite)})),a2=(0,p.pgTable)("AdminRole",{id:(0,q.text)("id").primaryKey().notNull(),name:(0,q.text)("name").notNull().unique(),description:(0,q.text)("description"),permissions:(0,u.jsonb)("permissions").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)}),a3=(0,p.pgTable)("AdminAssignment",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull(),roleId:(0,q.text)("roleId").notNull(),assignedBy:(0,q.text)("assignedBy"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),expiresAt:(0,t.timestamp)("expiresAt",{withTimezone:!0}),isActive:(0,s.boolean)("isActive").notNull()},a=>({AdminAssignment_userId_idx:C("AdminAssignment_userId_idx").on(a.userId),AdminAssignment_roleId_idx:C("AdminAssignment_roleId_idx").on(a.roleId),AdminAssignment_userId_roleId_key:D("AdminAssignment_userId_roleId_key").on(a.userId,a.roleId)})),a4=(0,p.pgTable)("FeatureFlag",{id:(0,q.text)("id").primaryKey().notNull(),key:(0,q.text)("key").notNull().unique(),name:(0,q.text)("name").notNull(),description:(0,q.text)("description"),enabled:(0,s.boolean)("enabled").notNull(),scope:(0,q.text)("scope").notNull(),targetValue:(0,u.jsonb)("targetValue"),config:(0,u.jsonb)("config").notNull(),createdBy:(0,q.text)("createdBy"),updatedBy:(0,q.text)("updatedBy"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date),deletedAt:(0,t.timestamp)("deletedAt",{withTimezone:!0})},a=>({FeatureFlag_key_idx:C("FeatureFlag_key_idx").on(a.key),FeatureFlag_scope_idx:C("FeatureFlag_scope_idx").on(a.scope),FeatureFlag_enabled_idx:C("FeatureFlag_enabled_idx").on(a.enabled)})),a5=(0,p.pgTable)("FeatureFlagChange",{id:(0,q.text)("id").primaryKey().notNull(),flagId:(0,q.text)("flagId").notNull(),changedBy:(0,q.text)("changedBy").notNull(),previousValue:(0,u.jsonb)("previousValue"),newValue:(0,u.jsonb)("newValue"),changeReason:(0,q.text)("changeReason"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({FeatureFlagChange_flagId_idx:C("FeatureFlagChange_flagId_idx").on(a.flagId),FeatureFlagChange_changedBy_idx:C("FeatureFlagChange_changedBy_idx").on(a.changedBy),FeatureFlagChange_createdAt_idx:C("FeatureFlagChange_createdAt_idx").on(a.createdAt)})),a6=(0,p.pgTable)("LlmProvider",{id:(0,q.text)("id").primaryKey().notNull(),name:(0,q.text)("name").notNull(),providerType:(0,q.text)("providerType").notNull(),apiKeyEncrypted:(0,q.text)("apiKeyEncrypted"),baseUrl:(0,q.text)("baseUrl"),isActive:(0,s.boolean)("isActive").notNull(),isDefault:(0,s.boolean)("isDefault").notNull(),priority:(0,r.integer)("priority").notNull(),config:(0,u.jsonb)("config").notNull(),rateLimits:(0,u.jsonb)("rateLimits").notNull(),costPer1kTokens:(0,v.doublePrecision)("costPer1kTokens"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)}),a7=(0,p.pgTable)("LlmModel",{id:(0,q.text)("id").primaryKey().notNull(),providerId:(0,q.text)("providerId").notNull(),modelId:(0,q.text)("modelId").notNull(),name:(0,q.text)("name"),description:(0,q.text)("description"),maxTokens:(0,r.integer)("maxTokens"),supportsVision:(0,s.boolean)("supportsVision").notNull(),supportsFunctions:(0,s.boolean)("supportsFunctions").notNull(),isActive:(0,s.boolean)("isActive").notNull(),config:(0,u.jsonb)("config").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({LlmModel_providerId_idx:C("LlmModel_providerId_idx").on(a.providerId),LlmModel_isActive_idx:C("LlmModel_isActive_idx").on(a.isActive),LlmModel_providerId_modelId_key:D("LlmModel_providerId_modelId_key").on(a.providerId,a.modelId)})),a8=(0,p.pgTable)("LlmRoutingRule",{id:(0,q.text)("id").primaryKey().notNull(),name:(0,q.text)("name"),description:(0,q.text)("description"),priority:(0,r.integer)("priority").notNull(),conditions:(0,u.jsonb)("conditions").notNull(),targetModelId:(0,q.text)("targetModelId").notNull(),fallbackModelId:(0,q.text)("fallbackModelId"),isActive:(0,s.boolean)("isActive").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),providerId:(0,q.text)("providerId").notNull()},a=>({LlmRoutingRule_targetModelId_idx:C("LlmRoutingRule_targetModelId_idx").on(a.targetModelId),LlmRoutingRule_isActive_idx:C("LlmRoutingRule_isActive_idx").on(a.isActive),LlmRoutingRule_priority_idx:C("LlmRoutingRule_priority_idx").on(a.priority)})),a9=(0,p.pgTable)("SystemSetting",{id:(0,q.text)("id").primaryKey().notNull(),category:(0,q.text)("category").notNull(),key:(0,q.text)("key").notNull(),settingValue:(0,u.jsonb)("setting_value").notNull(),valueType:(0,q.text)("valueType").notNull(),description:(0,q.text)("description"),isEditable:(0,s.boolean)("isEditable").notNull(),requiresRestart:(0,s.boolean)("requiresRestart").notNull(),updatedBy:(0,q.text)("updatedBy"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({SystemSetting_category_idx:C("SystemSetting_category_idx").on(a.category),SystemSetting_key_idx:C("SystemSetting_key_idx").on(a.key),SystemSetting_category_key_key:D("SystemSetting_category_key_key").on(a.category,a.key)})),ba=(0,p.pgTable)("AdminAuditLog",{id:(0,q.text)("id").primaryKey().notNull(),adminId:(0,q.text)("adminId").notNull(),action:(0,q.text)("action").notNull(),resourceType:(0,q.text)("resourceType"),resourceId:(0,q.text)("resourceId"),previousState:(0,u.jsonb)("previousState"),newState:(0,u.jsonb)("newState"),metadata:(0,u.jsonb)("metadata"),ipAddress:(0,q.text)("ipAddress"),userAgent:(0,q.text)("userAgent"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({AdminAuditLog_adminId_idx:C("AdminAuditLog_adminId_idx").on(a.adminId),AdminAuditLog_action_idx:C("AdminAuditLog_action_idx").on(a.action),AdminAuditLog_resourceType_idx:C("AdminAuditLog_resourceType_idx").on(a.resourceType),AdminAuditLog_createdAt_idx:C("AdminAuditLog_createdAt_idx").on(a.createdAt)})),bb=(0,p.pgTable)("AdminSession",{id:(0,q.text)("id").primaryKey().notNull(),adminId:(0,q.text)("adminId").notNull(),token:(0,q.text)("token").notNull().unique(),ipAddress:(0,q.text)("ipAddress"),userAgent:(0,q.text)("userAgent"),startedAt:(0,t.timestamp)("startedAt",{withTimezone:!0}).notNull().defaultNow(),lastActiveAt:(0,t.timestamp)("lastActiveAt",{withTimezone:!0}).notNull().defaultNow(),expiresAt:(0,t.timestamp)("expiresAt",{withTimezone:!0}).notNull(),isRevoked:(0,s.boolean)("isRevoked").notNull()},a=>({AdminSession_adminId_idx:C("AdminSession_adminId_idx").on(a.adminId),AdminSession_token_idx:C("AdminSession_token_idx").on(a.token),AdminSession_expiresAt_idx:C("AdminSession_expiresAt_idx").on(a.expiresAt)})),bc=(0,p.pgTable)("IpWhitelist",{id:(0,q.text)("id").primaryKey().notNull(),ipAddress:(0,q.text)("ipAddress").notNull().unique(),description:(0,q.text)("description"),isActive:(0,s.boolean)("isActive").notNull(),createdBy:(0,q.text)("createdBy"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),expiresAt:(0,t.timestamp)("expiresAt",{withTimezone:!0})},a=>({IpWhitelist_ipAddress_idx:C("IpWhitelist_ipAddress_idx").on(a.ipAddress),IpWhitelist_isActive_idx:C("IpWhitelist_isActive_idx").on(a.isActive)})),bd=(0,p.pgTable)("CalendarConnection",{id:(0,q.text)("id").primaryKey().notNull(),userId:(0,q.text)("userId").notNull(),provider:(0,q.text)("provider").notNull(),providerAccountId:(0,q.text)("providerAccountId"),accessToken:(0,q.text)("accessToken"),refreshToken:(0,q.text)("refreshToken"),expiresAt:(0,t.timestamp)("expiresAt",{withTimezone:!0}),syncEnabled:(0,s.boolean)("syncEnabled").notNull(),syncDirection:(0,q.text)("syncDirection").notNull(),lastSyncedAt:(0,t.timestamp)("lastSyncedAt",{withTimezone:!0}),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({CalendarConnection_userId_idx:C("CalendarConnection_userId_idx").on(a.userId),CalendarConnection_provider_idx:C("CalendarConnection_provider_idx").on(a.provider),CalendarConnection_userId_provider_key:D("CalendarConnection_userId_provider_key").on(a.userId,a.provider)})),be=(0,p.pgTable)("CalendarEvent",{id:(0,q.text)("id").primaryKey().notNull(),tutorId:(0,q.text)("tutorId").notNull(),title:(0,q.text)("title").notNull(),description:(0,q.text)("description"),type:l("type").notNull(),status:m("status").notNull(),startTime:(0,t.timestamp)("startTime",{withTimezone:!0}).notNull(),endTime:(0,t.timestamp)("endTime",{withTimezone:!0}).notNull(),timezone:(0,q.text)("timezone").notNull(),isAllDay:(0,s.boolean)("isAllDay").notNull(),recurrenceRule:(0,q.text)("recurrenceRule"),recurringEventId:(0,q.text)("recurringEventId"),isRecurring:(0,s.boolean)("isRecurring").notNull(),location:(0,q.text)("location"),meetingUrl:(0,q.text)("meetingUrl"),isVirtual:(0,s.boolean)("isVirtual").notNull(),curriculumId:(0,q.text)("curriculumId"),batchId:(0,q.text)("batchId"),studentId:(0,q.text)("studentId"),attendees:(0,u.jsonb)("attendees"),maxAttendees:(0,r.integer)("maxAttendees").notNull(),reminders:(0,u.jsonb)("reminders"),color:(0,q.text)("color"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date),createdBy:(0,q.text)("createdBy").notNull(),externalId:(0,q.text)("externalId"),deletedAt:(0,t.timestamp)("deletedAt",{withTimezone:!0}),isCancelled:(0,s.boolean)("isCancelled").notNull()},a=>({CalendarEvent_tutorId_idx:C("CalendarEvent_tutorId_idx").on(a.tutorId),CalendarEvent_startTime_idx:C("CalendarEvent_startTime_idx").on(a.startTime),CalendarEvent_endTime_idx:C("CalendarEvent_endTime_idx").on(a.endTime),CalendarEvent_status_idx:C("CalendarEvent_status_idx").on(a.status),CalendarEvent_type_idx:C("CalendarEvent_type_idx").on(a.type),CalendarEvent_recurringEventId_idx:C("CalendarEvent_recurringEventId_idx").on(a.recurringEventId),CalendarEvent_tutorId_startTime_endTime_idx:C("CalendarEvent_tutorId_startTime_endTime_idx").on(a.tutorId,a.startTime,a.endTime),CalendarEvent_curriculumId_idx:C("CalendarEvent_curriculumId_idx").on(a.curriculumId),CalendarEvent_batchId_idx:C("CalendarEvent_batchId_idx").on(a.batchId)})),bf=(0,p.pgTable)("CalendarAvailability",{id:(0,q.text)("id").primaryKey().notNull(),tutorId:(0,q.text)("tutorId").notNull(),dayOfWeek:(0,r.integer)("dayOfWeek").notNull(),startTime:(0,q.text)("startTime").notNull(),endTime:(0,q.text)("endTime").notNull(),timezone:(0,q.text)("timezone").notNull(),isAvailable:(0,s.boolean)("isAvailable").notNull(),validFrom:(0,t.timestamp)("validFrom",{withTimezone:!0}),validUntil:(0,t.timestamp)("validUntil",{withTimezone:!0}),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({CalendarAvailability_tutorId_idx:C("CalendarAvailability_tutorId_idx").on(a.tutorId),CalendarAvailability_dayOfWeek_idx:C("CalendarAvailability_dayOfWeek_idx").on(a.dayOfWeek),CalendarAvailability_tutorId_dayOfWeek_startTime_endTime_key:D("CalendarAvailability_tutorId_dayOfWeek_startTime_endTime_key").on(a.tutorId,a.dayOfWeek,a.startTime,a.endTime)})),bg=(0,p.pgTable)("CalendarException",{id:(0,q.text)("id").primaryKey().notNull(),tutorId:(0,q.text)("tutorId").notNull(),date:(0,t.timestamp)("date",{withTimezone:!0}).notNull(),isAvailable:(0,s.boolean)("isAvailable").notNull(),startTime:(0,q.text)("startTime"),endTime:(0,q.text)("endTime"),reason:(0,q.text)("reason"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({CalendarException_tutorId_idx:C("CalendarException_tutorId_idx").on(a.tutorId),CalendarException_date_idx:C("CalendarException_date_idx").on(a.date),CalendarException_tutorId_date_startTime_key:D("CalendarException_tutorId_date_startTime_key").on(a.tutorId,a.date,a.startTime)})),bh=(0,p.pgTable)("Whiteboard",{id:(0,q.text)("id").primaryKey().notNull(),tutorId:(0,q.text)("tutorId").notNull(),sessionId:(0,q.text)("sessionId"),roomId:(0,q.text)("roomId"),curriculumId:(0,q.text)("curriculumId"),lessonId:(0,q.text)("lessonId"),title:(0,q.text)("title").notNull(),description:(0,q.text)("description"),isTemplate:(0,s.boolean)("isTemplate").notNull(),isPublic:(0,s.boolean)("isPublic").notNull(),width:(0,r.integer)("width").notNull(),height:(0,r.integer)("height").notNull(),backgroundColor:(0,q.text)("backgroundColor").notNull(),backgroundStyle:(0,q.text)("backgroundStyle").notNull(),backgroundImage:(0,q.text)("backgroundImage"),collaborators:(0,u.jsonb)("collaborators"),visibility:(0,q.text)("visibility").notNull(),isBroadcasting:(0,s.boolean)("isBroadcasting").notNull(),ownerType:(0,q.text)("ownerType").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date),deletedAt:(0,t.timestamp)("deletedAt",{withTimezone:!0})},a=>({Whiteboard_tutorId_idx:C("Whiteboard_tutorId_idx").on(a.tutorId),Whiteboard_sessionId_idx:C("Whiteboard_sessionId_idx").on(a.sessionId),Whiteboard_roomId_idx:C("Whiteboard_roomId_idx").on(a.roomId),Whiteboard_curriculumId_idx:C("Whiteboard_curriculumId_idx").on(a.curriculumId),Whiteboard_lessonId_idx:C("Whiteboard_lessonId_idx").on(a.lessonId),Whiteboard_isTemplate_idx:C("Whiteboard_isTemplate_idx").on(a.isTemplate),Whiteboard_createdAt_idx:C("Whiteboard_createdAt_idx").on(a.createdAt),Whiteboard_visibility_idx:C("Whiteboard_visibility_idx").on(a.visibility),Whiteboard_isBroadcasting_idx:C("Whiteboard_isBroadcasting_idx").on(a.isBroadcasting),Whiteboard_sessionId_visibility_idx:C("Whiteboard_sessionId_visibility_idx").on(a.sessionId,a.visibility),Whiteboard_sessionId_ownerType_idx:C("Whiteboard_sessionId_ownerType_idx").on(a.sessionId,a.ownerType)})),bi=(0,p.pgTable)("WhiteboardPage",{id:(0,q.text)("id").primaryKey().notNull(),whiteboardId:(0,q.text)("whiteboardId").notNull(),name:(0,q.text)("name").notNull(),order:(0,r.integer)("order").notNull(),backgroundColor:(0,q.text)("backgroundColor"),backgroundStyle:(0,q.text)("backgroundStyle"),backgroundImage:(0,q.text)("backgroundImage"),strokes:(0,u.jsonb)("strokes").notNull(),shapes:(0,u.jsonb)("shapes").notNull(),texts:(0,u.jsonb)("texts").notNull(),images:(0,u.jsonb)("images").notNull(),viewState:(0,u.jsonb)("viewState"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({WhiteboardPage_whiteboardId_idx:C("WhiteboardPage_whiteboardId_idx").on(a.whiteboardId),WhiteboardPage_order_idx:C("WhiteboardPage_order_idx").on(a.order),WhiteboardPage_whiteboardId_order_key:D("WhiteboardPage_whiteboardId_order_key").on(a.whiteboardId,a.order)})),bj=(0,p.pgTable)("WhiteboardSnapshot",{id:(0,q.text)("id").primaryKey().notNull(),whiteboardId:(0,q.text)("whiteboardId").notNull(),name:(0,q.text)("name").notNull(),thumbnailUrl:(0,q.text)("thumbnailUrl"),pages:(0,u.jsonb)("pages").notNull(),createdBy:(0,q.text)("createdBy").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({WhiteboardSnapshot_whiteboardId_idx:C("WhiteboardSnapshot_whiteboardId_idx").on(a.whiteboardId),WhiteboardSnapshot_createdAt_idx:C("WhiteboardSnapshot_createdAt_idx").on(a.createdAt)})),bk=(0,p.pgTable)("WhiteboardSession",{id:(0,q.text)("id").primaryKey().notNull(),whiteboardId:(0,q.text)("whiteboardId").notNull(),roomId:(0,q.text)("roomId").notNull(),tutorId:(0,q.text)("tutorId").notNull(),participants:(0,u.jsonb)("participants").notNull(),isActive:(0,s.boolean)("isActive").notNull(),startedAt:(0,t.timestamp)("startedAt",{withTimezone:!0}).notNull().defaultNow(),endedAt:(0,t.timestamp)("endedAt",{withTimezone:!0}),operations:(0,u.jsonb)("operations"),finalPageStates:(0,u.jsonb)("finalPageStates")},a=>({WhiteboardSession_whiteboardId_idx:C("WhiteboardSession_whiteboardId_idx").on(a.whiteboardId),WhiteboardSession_roomId_idx:C("WhiteboardSession_roomId_idx").on(a.roomId),WhiteboardSession_tutorId_idx:C("WhiteboardSession_tutorId_idx").on(a.tutorId),WhiteboardSession_isActive_idx:C("WhiteboardSession_isActive_idx").on(a.isActive)})),bl=(0,p.pgTable)("MathWhiteboardSession",{id:(0,q.text)("id").primaryKey().notNull(),liveSessionId:(0,q.text)("liveSessionId").notNull(),tutorId:(0,q.text)("tutorId").notNull(),title:(0,q.text)("title").notNull(),description:(0,q.text)("description"),status:n("status").notNull(),isLocked:(0,s.boolean)("isLocked").notNull(),allowStudentEdit:(0,s.boolean)("allowStudentEdit").notNull(),allowStudentTools:(0,s.boolean)("allowStudentTools").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date),endedAt:(0,t.timestamp)("endedAt",{withTimezone:!0})},a=>({MathWhiteboardSession_liveSessionId_idx:C("MathWhiteboardSession_liveSessionId_idx").on(a.liveSessionId),MathWhiteboardSession_tutorId_idx:C("MathWhiteboardSession_tutorId_idx").on(a.tutorId),MathWhiteboardSession_status_idx:C("MathWhiteboardSession_status_idx").on(a.status),MathWhiteboardSession_createdAt_idx:C("MathWhiteboardSession_createdAt_idx").on(a.createdAt)})),bm=(0,p.pgTable)("MathWhiteboardPage",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),name:(0,q.text)("name").notNull(),order:(0,r.integer)("order").notNull(),width:(0,r.integer)("width").notNull(),height:(0,r.integer)("height").notNull(),backgroundType:(0,q.text)("backgroundType").notNull(),backgroundColor:(0,q.text)("backgroundColor").notNull(),elements:(0,u.jsonb)("elements").notNull(),vectorClock:(0,u.jsonb)("vectorClock").notNull(),lastModified:(0,t.timestamp)("lastModified",{withTimezone:!0}).notNull().$onUpdate(()=>new Date),modifiedBy:(0,q.text)("modifiedBy"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({MathWhiteboardPage_sessionId_idx:C("MathWhiteboardPage_sessionId_idx").on(a.sessionId),MathWhiteboardPage_order_idx:C("MathWhiteboardPage_order_idx").on(a.order),MathWhiteboardPage_sessionId_order_key:D("MathWhiteboardPage_sessionId_order_key").on(a.sessionId,a.order)})),bn=(0,p.pgTable)("MathWhiteboardParticipant",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),userId:(0,q.text)("userId").notNull(),role:c("role").notNull(),canEdit:(0,s.boolean)("canEdit").notNull(),canChat:(0,s.boolean)("canChat").notNull(),canUseAI:(0,s.boolean)("canUseAI").notNull(),cursorX:(0,v.doublePrecision)("cursorX"),cursorY:(0,v.doublePrecision)("cursorY"),cursorColor:(0,q.text)("cursorColor").notNull(),isTyping:(0,s.boolean)("isTyping").notNull(),joinedAt:(0,t.timestamp)("joinedAt",{withTimezone:!0}).notNull().defaultNow(),leftAt:(0,t.timestamp)("leftAt",{withTimezone:!0})},a=>({MathWhiteboardParticipant_sessionId_idx:C("MathWhiteboardParticipant_sessionId_idx").on(a.sessionId),MathWhiteboardParticipant_userId_idx:C("MathWhiteboardParticipant_userId_idx").on(a.userId),MathWhiteboardParticipant_sessionId_userId_key:D("MathWhiteboardParticipant_sessionId_userId_key").on(a.sessionId,a.userId)})),bo=(0,p.pgTable)("MathWhiteboardSnapshot",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),name:(0,q.text)("name").notNull(),description:(0,q.text)("description"),thumbnailUrl:(0,q.text)("thumbnailUrl"),pages:(0,u.jsonb)("pages").notNull(),viewState:(0,u.jsonb)("viewState"),createdBy:(0,q.text)("createdBy").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({MathWhiteboardSnapshot_sessionId_idx:C("MathWhiteboardSnapshot_sessionId_idx").on(a.sessionId),MathWhiteboardSnapshot_createdAt_idx:C("MathWhiteboardSnapshot_createdAt_idx").on(a.createdAt)})),bp=(0,p.pgTable)("MathAIInteraction",{id:(0,q.text)("id").primaryKey().notNull(),sessionId:(0,q.text)("sessionId").notNull(),userId:(0,q.text)("userId").notNull(),type:o("type").notNull(),inputText:(0,q.text)("inputText"),inputLatex:(0,q.text)("inputLatex"),inputImage:(0,q.text)("inputImage"),output:(0,q.text)("output").notNull(),outputLatex:(0,q.text)("outputLatex"),modelUsed:(0,q.text)("modelUsed").notNull(),latencyMs:(0,r.integer)("latencyMs").notNull(),tokensUsed:(0,r.integer)("tokensUsed"),steps:(0,u.jsonb)("steps"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({MathAIInteraction_sessionId_idx:C("MathAIInteraction_sessionId_idx").on(a.sessionId),MathAIInteraction_type_idx:C("MathAIInteraction_type_idx").on(a.type),MathAIInteraction_createdAt_idx:C("MathAIInteraction_createdAt_idx").on(a.createdAt)})),bq=(0,p.pgTable)("FamilyAccount",{id:(0,q.text)("id").primaryKey().notNull(),familyName:(0,q.text)("familyName").notNull(),familyType:(0,q.text)("familyType").notNull(),primaryEmail:(0,q.text)("primaryEmail").notNull().unique(),phoneNumber:(0,q.text)("phoneNumber"),address:(0,q.text)("address"),country:(0,q.text)("country"),timezone:(0,q.text)("timezone"),defaultCurrency:(0,q.text)("defaultCurrency").notNull(),monthlyBudget:(0,v.doublePrecision)("monthlyBudget").notNull(),enableBudget:(0,s.boolean)("enableBudget").notNull(),allowAdults:(0,s.boolean)("allowAdults").notNull(),isActive:(0,s.boolean)("isActive").notNull(),isVerified:(0,s.boolean)("isVerified").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date),verifiedAt:(0,t.timestamp)("verifiedAt",{withTimezone:!0})},a=>({FamilyAccount_isActive_idx:C("FamilyAccount_isActive_idx").on(a.isActive),FamilyAccount_isVerified_idx:C("FamilyAccount_isVerified_idx").on(a.isVerified),FamilyAccount_createdAt_idx:C("FamilyAccount_createdAt_idx").on(a.createdAt),idx_family_account_status:C("idx_family_account_status").on(a.isActive,a.isVerified),idx_family_account_active_created:C("idx_family_account_active_created").on(a.isActive,a.createdAt),idx_family_account_type_status:C("idx_family_account_type_status").on(a.familyType,a.isActive)})),br=(0,p.pgTable)("FamilyMember",{id:(0,q.text)("id").primaryKey().notNull(),familyAccountId:(0,q.text)("familyAccountId").notNull(),userId:(0,q.text)("userId"),name:(0,q.text)("name").notNull(),relation:(0,q.text)("relation").notNull(),email:(0,q.text)("email"),phone:(0,q.text)("phone"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({FamilyMember_familyAccountId_idx:C("FamilyMember_familyAccountId_idx").on(a.familyAccountId),FamilyMember_userId_idx:C("FamilyMember_userId_idx").on(a.userId),idx_family_member_account_user:C("idx_family_member_account_user").on(a.familyAccountId,a.userId),idx_family_member_user_relation:C("idx_family_member_user_relation").on(a.userId,a.relation)})),bs=(0,p.pgTable)("FamilyBudget",{id:(0,q.text)("id").primaryKey().notNull(),parentId:(0,q.text)("parentId").notNull(),month:(0,r.integer)("month").notNull(),year:(0,r.integer)("year").notNull(),amount:(0,v.doublePrecision)("amount").notNull(),spent:(0,v.doublePrecision)("spent").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({FamilyBudget_parentId_idx:C("FamilyBudget_parentId_idx").on(a.parentId),idx_family_budget_parent_period:C("idx_family_budget_parent_period").on(a.parentId,a.year,a.month),FamilyBudget_parentId_month_year_key:D("FamilyBudget_parentId_month_year_key").on(a.parentId,a.month,a.year)})),bt=(0,p.pgTable)("FamilyPayment",{id:(0,q.text)("id").primaryKey().notNull(),parentId:(0,q.text)("parentId").notNull(),amount:(0,v.doublePrecision)("amount").notNull(),method:(0,q.text)("method").notNull(),status:(0,q.text)("status").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({FamilyPayment_parentId_idx:C("FamilyPayment_parentId_idx").on(a.parentId),idx_family_payment_parent_created:C("idx_family_payment_parent_created").on(a.parentId,a.createdAt),idx_family_payment_parent_status_created:C("idx_family_payment_parent_status_created").on(a.parentId,a.status,a.createdAt)})),bu=(0,p.pgTable)("BudgetAlert",{id:(0,q.text)("id").primaryKey().notNull(),parentId:(0,q.text)("parentId").notNull(),type:(0,q.text)("type").notNull(),message:(0,q.text)("message").notNull(),isRead:(0,s.boolean)("isRead").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({BudgetAlert_parentId_idx:C("BudgetAlert_parentId_idx").on(a.parentId)})),bv=(0,p.pgTable)("ParentActivityLog",{id:(0,q.text)("id").primaryKey().notNull(),parentId:(0,q.text)("parentId").notNull(),action:(0,q.text)("action").notNull(),details:(0,q.text)("details"),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({ParentActivityLog_parentId_idx:C("ParentActivityLog_parentId_idx").on(a.parentId),idx_parent_activity_parent_created:C("idx_parent_activity_parent_created").on(a.parentId,a.createdAt)})),bw=(0,p.pgTable)("FamilyNotification",{id:(0,q.text)("id").primaryKey().notNull(),parentId:(0,q.text)("parentId").notNull(),title:(0,q.text)("title").notNull(),message:(0,q.text)("message").notNull(),isRead:(0,s.boolean)("isRead").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({FamilyNotification_parentId_idx:C("FamilyNotification_parentId_idx").on(a.parentId),idx_family_notification_parent_created:C("idx_family_notification_parent_created").on(a.parentId,a.createdAt),idx_family_notification_parent_read_created:C("idx_family_notification_parent_read_created").on(a.parentId,a.isRead,a.createdAt)})),bx=(0,p.pgTable)("EmergencyContact",{id:(0,q.text)("id").primaryKey().notNull(),parentId:(0,q.text)("parentId").notNull(),name:(0,q.text)("name").notNull(),relation:(0,q.text)("relation").notNull(),phone:(0,q.text)("phone").notNull(),email:(0,q.text)("email"),isPrimary:(0,s.boolean)("isPrimary").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow()},a=>({EmergencyContact_parentId_idx:C("EmergencyContact_parentId_idx").on(a.parentId),idx_emergency_contact_parent_primary:C("idx_emergency_contact_parent_primary").on(a.parentId,a.isPrimary),idx_emergency_contact_parent_primary_created:C("idx_emergency_contact_parent_primary_created").on(a.parentId,a.isPrimary,a.createdAt)})),by=(0,p.pgTable)("StudentProgressSnapshot",{id:(0,q.text)("id").primaryKey().notNull(),parentId:(0,q.text)("parentId").notNull(),studentId:(0,q.text)("studentId").notNull(),data:(0,u.jsonb)("data").notNull(),capturedAt:(0,t.timestamp)("capturedAt",{withTimezone:!0}).notNull().defaultNow()},a=>({StudentProgressSnapshot_parentId_idx:C("StudentProgressSnapshot_parentId_idx").on(a.parentId),StudentProgressSnapshot_studentId_idx:C("StudentProgressSnapshot_studentId_idx").on(a.studentId),idx_student_progress_parent_captured:C("idx_student_progress_parent_captured").on(a.parentId,a.capturedAt),idx_student_progress_student_captured:C("idx_student_progress_student_captured").on(a.studentId,a.capturedAt)})),bz=(0,p.pgTable)("ParentPaymentAuthorization",{id:(0,q.text)("id").primaryKey().notNull(),parentId:(0,q.text)("parentId").notNull().unique(),level:(0,q.text)("level").notNull(),maxAmount:(0,v.doublePrecision)("maxAmount"),methods:(0,q.text)("methods").array().notNull(),isActive:(0,s.boolean)("isActive").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({ParentPaymentAuthorization_parentId_idx:C("ParentPaymentAuthorization_parentId_idx").on(a.parentId)})),bA=(0,p.pgTable)("ParentSpendingLimit",{id:(0,q.text)("id").primaryKey().notNull(),parentId:(0,q.text)("parentId").notNull(),category:(0,q.text)("category").notNull(),limit:(0,v.doublePrecision)("limit").notNull(),period:(0,q.text)("period").notNull(),isActive:(0,s.boolean)("isActive").notNull(),createdAt:(0,t.timestamp)("createdAt",{withTimezone:!0}).notNull().defaultNow(),updatedAt:(0,t.timestamp)("updatedAt",{withTimezone:!0}).notNull().$onUpdate(()=>new Date)},a=>({ParentSpendingLimit_parentId_idx:C("ParentSpendingLimit_parentId_idx").on(a.parentId)}));a.s(["aIAssistantInsight",0,aG,"aIAssistantMessage",0,aF,"aIAssistantSession",0,aE,"aIInteractionSession",0,Z,"aITutorDailyUsage",0,$,"aITutorEnrollment",0,Y,"aITutorSubscription",0,_,"account",0,F,"achievement",0,am,"adminAssignment",0,a3,"adminAuditLog",0,ba,"adminRole",0,a2,"adminSession",0,bb,"apiKey",0,aS,"badge",0,aq,"bookmark",0,ak,"breakoutRoom",0,W,"breakoutRoomAssignment",0,X,"breakoutSession",0,V,"budgetAlert",0,bu,"calendarAvailability",0,bf,"calendarConnection",0,bd,"calendarEvent",0,be,"calendarException",0,bg,"clinic",0,aH,"clinicBooking",0,aI,"contentItem",0,aa,"contentProgress",0,ad,"contentQuizCheckpoint",0,ac,"conversation",0,aA,"courseBatch",0,P,"curriculum",0,I,"curriculumCatalog",0,H,"curriculumEnrollment",0,O,"curriculumLesson",0,L,"curriculumLessonProgress",0,N,"curriculumModule",0,K,"curriculumProgress",0,Q,"curriculumShare",0,J,"directMessage",0,aB,"emergencyContact",0,bx,"engagementSnapshot",0,aW,"familyAccount",0,bq,"familyBudget",0,bs,"familyMember",0,br,"familyNotification",0,bw,"familyPayment",0,bt,"featureFlag",0,a4,"featureFlagChange",0,a5,"feedbackWorkflow",0,T,"generatedTask",0,U,"ipWhitelist",0,bc,"leaderboardEntry",0,as,"lessonSession",0,M,"libraryTask",0,a1,"liveSession",0,at,"llmModel",0,a7,"llmProvider",0,a6,"llmRoutingRule",0,a8,"mathAIInteraction",0,bp,"mathWhiteboardPage",0,bm,"mathWhiteboardParticipant",0,bn,"mathWhiteboardSession",0,bl,"mathWhiteboardSnapshot",0,bo,"message",0,az,"mission",0,an,"missionProgress",0,ao,"note",0,aj,"notification",0,aC,"notificationPreference",0,aD,"parentActivityLog",0,bv,"parentPaymentAuthorization",0,bz,"parentSpendingLimit",0,bA,"payment",0,aJ,"paymentOnPayout",0,aN,"payout",0,aM,"performanceAlert",0,aV,"performanceMetric",0,aU,"platformRevenue",0,aO,"poll",0,aw,"pollOption",0,ax,"pollResponse",0,ay,"postSessionReport",0,aY,"profile",0,G,"questionBankItem",0,ag,"quiz",0,ah,"quizAssignment",0,ai,"quizAttempt",0,af,"refund",0,aK,"resource",0,a_,"resourceShare",0,a0,"reviewSchedule",0,ae,"securityEvent",0,aT,"sessionBookmark",0,a$,"sessionEngagementSummary",0,aX,"sessionParticipant",0,av,"sessionReplayArtifact",0,au,"studentPerformance",0,R,"studentProgressSnapshot",0,by,"studentSessionInsight",0,aZ,"studyGroup",0,aP,"studyGroupMember",0,aQ,"systemSetting",0,a9,"taskSubmission",0,S,"user",0,E,"userActivityLog",0,aR,"userBadge",0,ar,"userDailyQuest",0,ap,"userGamification",0,al,"videoWatchEvent",0,ab,"webhookEvent",0,aL,"whiteboard",0,bh,"whiteboardPage",0,bi,"whiteboardSession",0,bk,"whiteboardSnapshot",0,bj],588136)},195984,624801,258538,a=>{"use strict";a.i(160955);var b=a.i(588136),c=a.i(472899),d=a.i(999367),e=a.i(436896),f=a.i(543471);let g=(0,c.pgTable)("Session",{sessionToken:(0,d.text)("sessionToken").primaryKey(),userId:(0,d.text)("userId").notNull(),expires:(0,e.timestamp)("expires",{withTimezone:!0}).notNull()}),h=(0,c.pgTable)("VerificationToken",{identifier:(0,d.text)("identifier").notNull(),token:(0,d.text)("token").notNull(),expires:(0,e.timestamp)("expires",{withTimezone:!0}).notNull()},a=>({compositePk:(0,f.primaryKey)({columns:[a.identifier,a.token]})}));a.s(["session",0,g,"verificationToken",0,h],624801);var i=a.i(374565);let j=(0,i.relations)(b.user,({one:a,many:c})=>({profile:a(b.profile,{fields:[b.user.id],references:[b.profile.userId]}),adminAssignments:c(b.adminAssignment),adminSessions:c(b.adminSession),curriculumEnrollments:c(b.curriculumEnrollment),liveSessionsAsTutor:c(b.liveSession),sessionParticipations:c(b.sessionParticipant),payouts:c(b.payout),achievements:c(b.achievement),gamification:a(b.userGamification,{fields:[b.user.id],references:[b.userGamification.userId]}),familyMemberships:c(b.familyMember),conversationsAsParticipant1:c(b.conversation,{relationName:"participant1"}),conversationsAsParticipant2:c(b.conversation,{relationName:"participant2"}),sentDirectMessages:c(b.directMessage)})),k=(0,i.relations)(b.profile,({one:a})=>({user:a(b.user,{fields:[b.profile.userId],references:[b.user.id]})})),l=(0,i.relations)(b.adminSession,({one:a})=>({admin:a(b.user,{fields:[b.adminSession.adminId],references:[b.user.id]})})),m=(0,i.relations)(b.adminAssignment,({one:a})=>({user:a(b.user,{fields:[b.adminAssignment.userId],references:[b.user.id]}),role:a(b.adminRole,{fields:[b.adminAssignment.roleId],references:[b.adminRole.id]})})),n=(0,i.relations)(b.adminRole,({many:a})=>({assignments:a(b.adminAssignment)})),o=(0,i.relations)(b.curriculum,({many:a})=>({batches:a(b.courseBatch),enrollments:a(b.curriculumEnrollment),modules:a(b.curriculumModule),shares:a(b.curriculumShare),progress:a(b.curriculumProgress),studentPerformances:a(b.studentPerformance)})),p=(0,i.relations)(b.curriculumModule,({one:a,many:c})=>({curriculum:a(b.curriculum,{fields:[b.curriculumModule.curriculumId],references:[b.curriculum.id]}),lessons:c(b.curriculumLesson)})),q=(0,i.relations)(b.curriculumLesson,({one:a,many:c})=>({module:a(b.curriculumModule,{fields:[b.curriculumLesson.moduleId],references:[b.curriculumModule.id]}),progressRecords:c(b.curriculumLessonProgress)})),r=(0,i.relations)(b.curriculumLessonProgress,({one:a})=>({lesson:a(b.curriculumLesson,{fields:[b.curriculumLessonProgress.lessonId],references:[b.curriculumLesson.id]}),student:a(b.user,{fields:[b.curriculumLessonProgress.studentId],references:[b.user.id]})})),s=(0,i.relations)(b.curriculumProgress,({one:a})=>({student:a(b.user,{fields:[b.curriculumProgress.studentId],references:[b.user.id]}),curriculum:a(b.curriculum,{fields:[b.curriculumProgress.curriculumId],references:[b.curriculum.id]})})),t=(0,i.relations)(b.studentPerformance,({one:a})=>({student:a(b.user,{fields:[b.studentPerformance.studentId],references:[b.user.id]}),curriculum:a(b.curriculum,{fields:[b.studentPerformance.curriculumId],references:[b.curriculum.id]})})),u=(0,i.relations)(b.courseBatch,({one:a,many:c})=>({curriculum:a(b.curriculum,{fields:[b.courseBatch.curriculumId],references:[b.curriculum.id]}),enrollments:c(b.curriculumEnrollment)})),v=(0,i.relations)(b.curriculumEnrollment,({one:a})=>({student:a(b.user,{fields:[b.curriculumEnrollment.studentId],references:[b.user.id]}),curriculum:a(b.curriculum,{fields:[b.curriculumEnrollment.curriculumId],references:[b.curriculum.id]}),batch:a(b.courseBatch,{fields:[b.curriculumEnrollment.batchId],references:[b.courseBatch.id]})})),w=(0,i.relations)(b.curriculumShare,({one:a})=>({curriculum:a(b.curriculum,{fields:[b.curriculumShare.curriculumId],references:[b.curriculum.id]}),sharedBy:a(b.user,{fields:[b.curriculumShare.sharedByTutorId],references:[b.user.id]}),recipient:a(b.user,{fields:[b.curriculumShare.recipientId],references:[b.user.id]})})),x=(0,i.relations)(b.studyGroup,({many:a})=>({members:a(b.studyGroupMember)})),y=(0,i.relations)(b.studyGroupMember,({one:a})=>({group:a(b.studyGroup,{fields:[b.studyGroupMember.groupId],references:[b.studyGroup.id]}),user:a(b.user,{fields:[b.studyGroupMember.studentId],references:[b.user.id]})})),z=(0,i.relations)(b.liveSession,({one:a,many:c})=>({tutor:a(b.user,{fields:[b.liveSession.tutorId],references:[b.user.id]}),participants:c(b.sessionParticipant)})),A=(0,i.relations)(b.sessionParticipant,({one:a})=>({session:a(b.liveSession,{fields:[b.sessionParticipant.sessionId],references:[b.liveSession.id]}),student:a(b.user,{fields:[b.sessionParticipant.studentId],references:[b.user.id]})})),B=(0,i.relations)(b.clinic,({one:a,many:c})=>({tutor:a(b.user,{fields:[b.clinic.tutorId],references:[b.user.id]}),bookings:c(b.clinicBooking)})),C=(0,i.relations)(b.clinicBooking,({one:a})=>({clinic:a(b.clinic,{fields:[b.clinicBooking.clinicId],references:[b.clinic.id]}),student:a(b.user,{fields:[b.clinicBooking.studentId],references:[b.user.id]})})),D=(0,i.relations)(b.payout,({one:a,many:c})=>({tutor:a(b.user,{fields:[b.payout.tutorId],references:[b.user.id]}),payments:c(b.paymentOnPayout)})),E=(0,i.relations)(b.paymentOnPayout,({one:a})=>({payout:a(b.payout,{fields:[b.paymentOnPayout.payoutId],references:[b.payout.id]}),payment:a(b.payment,{fields:[b.paymentOnPayout.paymentId],references:[b.payment.id]})})),F=(0,i.relations)(b.achievement,({one:a})=>({user:a(b.user,{fields:[b.achievement.userId],references:[b.user.id]})})),G=(0,i.relations)(b.userGamification,({one:a})=>({user:a(b.user,{fields:[b.userGamification.userId],references:[b.user.id]})})),H=(0,i.relations)(b.familyAccount,({many:a})=>({members:a(b.familyMember),payments:a(b.familyPayment),notifications:a(b.familyNotification),activities:a(b.parentActivityLog)})),I=(0,i.relations)(b.familyMember,({one:a})=>({familyAccount:a(b.familyAccount,{fields:[b.familyMember.familyAccountId],references:[b.familyAccount.id]}),user:a(b.user,{fields:[b.familyMember.userId],references:[b.user.id]})})),J=(0,i.relations)(b.familyPayment,({one:a})=>({parent:a(b.familyAccount,{fields:[b.familyPayment.parentId],references:[b.familyAccount.id]})})),K=(0,i.relations)(b.familyNotification,({one:a})=>({parent:a(b.familyAccount,{fields:[b.familyNotification.parentId],references:[b.familyAccount.id]})})),L=(0,i.relations)(b.parentActivityLog,({one:a})=>({parent:a(b.familyAccount,{fields:[b.parentActivityLog.parentId],references:[b.familyAccount.id]})})),M=(0,i.relations)(b.payment,({one:a})=>({booking:a(b.clinicBooking,{fields:[b.payment.bookingId],references:[b.clinicBooking.id]}),enrollment:a(b.curriculumEnrollment,{fields:[b.payment.enrollmentId],references:[b.curriculumEnrollment.id]})})),N=(0,i.relations)(b.quiz,({one:a,many:c})=>({tutor:a(b.user,{fields:[b.quiz.tutorId],references:[b.user.id]}),curriculum:a(b.curriculum,{fields:[b.quiz.curriculumId],references:[b.curriculum.id]}),lesson:a(b.curriculumLesson,{fields:[b.quiz.lessonId],references:[b.curriculumLesson.id]}),attempts:c(b.quizAttempt),assignments:c(b.quizAssignment)})),O=(0,i.relations)(b.quizAttempt,({one:a})=>({quiz:a(b.quiz,{fields:[b.quizAttempt.quizId],references:[b.quiz.id]}),student:a(b.user,{fields:[b.quizAttempt.studentId],references:[b.user.id]}),assignment:a(b.quizAssignment,{fields:[b.quizAttempt.assignmentId],references:[b.quizAssignment.id]})})),P=(0,i.relations)(b.quizAssignment,({one:a,many:c})=>({quiz:a(b.quiz,{fields:[b.quizAssignment.quizId],references:[b.quiz.id]}),tutor:a(b.user,{fields:[b.quizAssignment.assignedByTutorId],references:[b.user.id]}),attempts:c(b.quizAttempt)})),Q=(0,i.relations)(b.conversation,({one:a,many:c})=>({participant1:a(b.user,{fields:[b.conversation.participant1Id],references:[b.user.id],relationName:"participant1"}),participant2:a(b.user,{fields:[b.conversation.participant2Id],references:[b.user.id],relationName:"participant2"}),messages:c(b.directMessage)})),R=(0,i.relations)(b.directMessage,({one:a})=>({conversation:a(b.conversation,{fields:[b.directMessage.conversationId],references:[b.conversation.id]}),sender:a(b.user,{fields:[b.directMessage.senderId],references:[b.user.id]})})),S=(0,i.relations)(b.generatedTask,({one:a,many:c})=>({tutor:a(b.user,{fields:[b.generatedTask.tutorId],references:[b.user.id]}),lesson:a(b.curriculumLesson,{fields:[b.generatedTask.lessonId],references:[b.curriculumLesson.id]}),submissions:c(b.taskSubmission)})),T=(0,i.relations)(b.taskSubmission,({one:a})=>({task:a(b.generatedTask,{fields:[b.taskSubmission.taskId],references:[b.generatedTask.id]}),student:a(b.user,{fields:[b.taskSubmission.studentId],references:[b.user.id]}),feedbackWorkflow:a(b.feedbackWorkflow,{fields:[b.taskSubmission.id],references:[b.feedbackWorkflow.submissionId]})})),U=(0,i.relations)(b.feedbackWorkflow,({one:a})=>({submission:a(b.taskSubmission,{fields:[b.feedbackWorkflow.submissionId],references:[b.taskSubmission.id]}),student:a(b.user,{fields:[b.feedbackWorkflow.studentId],references:[b.user.id]})})),V=(0,i.relations)(b.lessonSession,({one:a})=>({lesson:a(b.curriculumLesson,{fields:[b.lessonSession.lessonId],references:[b.curriculumLesson.id]}),student:a(b.user,{fields:[b.lessonSession.studentId],references:[b.user.id]})})),W=(0,i.relations)(b.aITutorEnrollment,({one:a})=>({student:a(b.user,{fields:[b.aITutorEnrollment.studentId],references:[b.user.id]})})),X=(0,i.relations)(b.aIInteractionSession,({one:a})=>({student:a(b.user,{fields:[b.aIInteractionSession.studentId],references:[b.user.id]})})),Y=(0,i.relations)(b.aITutorDailyUsage,({one:a})=>({user:a(b.user,{fields:[b.aITutorDailyUsage.userId],references:[b.user.id]})})),Z=(0,i.relations)(b.userActivityLog,({one:a})=>({user:a(b.user,{fields:[b.userActivityLog.userId],references:[b.user.id]})}));a.s(["aIInteractionSessionRelations",0,X,"aITutorDailyUsageRelations",0,Y,"aITutorEnrollmentRelations",0,W,"achievementRelations",0,F,"adminAssignmentRelations",0,m,"adminRoleRelations",0,n,"adminSessionRelations",0,l,"clinicBookingRelations",0,C,"clinicRelations",0,B,"conversationRelations",0,Q,"courseBatchRelations",0,u,"curriculumEnrollmentRelations",0,v,"curriculumLessonProgressRelations",0,r,"curriculumLessonRelations",0,q,"curriculumModuleRelations",0,p,"curriculumProgressRelations",0,s,"curriculumRelations",0,o,"curriculumShareRelations",0,w,"directMessageRelations",0,R,"familyAccountRelations",0,H,"familyMemberRelations",0,I,"familyNotificationRelations",0,K,"familyPaymentRelations",0,J,"feedbackWorkflowRelations",0,U,"generatedTaskRelations",0,S,"lessonSessionRelations",0,V,"liveSessionRelations",0,z,"parentActivityLogRelations",0,L,"paymentOnPayoutRelations",0,E,"paymentRelations",0,M,"payoutRelations",0,D,"profileRelations",0,k,"quizAssignmentRelations",0,P,"quizAttemptRelations",0,O,"quizRelations",0,N,"sessionParticipantRelations",0,A,"studentPerformanceRelations",0,t,"studyGroupMemberRelations",0,y,"studyGroupRelations",0,x,"taskSubmissionRelations",0,T,"userActivityLogRelations",0,Z,"userGamificationRelations",0,G,"userRelations",0,j],258538),a.s([],195984)},225569,a=>{"use strict";a.i(195984);var b=a.i(160955),c=a.i(588136),d=a.i(624801),e=a.i(258538);a.s(["aIAssistantInsight",()=>c.aIAssistantInsight,"aIAssistantMessage",()=>c.aIAssistantMessage,"aIAssistantSession",()=>c.aIAssistantSession,"aIInteractionSession",()=>c.aIInteractionSession,"aIInteractionSessionRelations",()=>e.aIInteractionSessionRelations,"aITutorDailyUsage",()=>c.aITutorDailyUsage,"aITutorDailyUsageRelations",()=>e.aITutorDailyUsageRelations,"aITutorEnrollment",()=>c.aITutorEnrollment,"aITutorEnrollmentRelations",()=>e.aITutorEnrollmentRelations,"aITutorSubscription",()=>c.aITutorSubscription,"account",()=>c.account,"achievement",()=>c.achievement,"achievementRelations",()=>e.achievementRelations,"adminAssignment",()=>c.adminAssignment,"adminAssignmentRelations",()=>e.adminAssignmentRelations,"adminAuditLog",()=>c.adminAuditLog,"adminRole",()=>c.adminRole,"adminRoleRelations",()=>e.adminRoleRelations,"adminSession",()=>c.adminSession,"adminSessionRelations",()=>e.adminSessionRelations,"apiKey",()=>c.apiKey,"badge",()=>c.badge,"bookmark",()=>c.bookmark,"breakoutRoom",()=>c.breakoutRoom,"breakoutRoomAssignment",()=>c.breakoutRoomAssignment,"breakoutSession",()=>c.breakoutSession,"budgetAlert",()=>c.budgetAlert,"calendarAvailability",()=>c.calendarAvailability,"calendarConnection",()=>c.calendarConnection,"calendarEvent",()=>c.calendarEvent,"calendarException",()=>c.calendarException,"clinic",()=>c.clinic,"clinicBooking",()=>c.clinicBooking,"clinicBookingRelations",()=>e.clinicBookingRelations,"clinicRelations",()=>e.clinicRelations,"contentItem",()=>c.contentItem,"contentProgress",()=>c.contentProgress,"contentQuizCheckpoint",()=>c.contentQuizCheckpoint,"conversation",()=>c.conversation,"conversationRelations",()=>e.conversationRelations,"courseBatch",()=>c.courseBatch,"courseBatchRelations",()=>e.courseBatchRelations,"curriculum",()=>c.curriculum,"curriculumCatalog",()=>c.curriculumCatalog,"curriculumEnrollment",()=>c.curriculumEnrollment,"curriculumEnrollmentRelations",()=>e.curriculumEnrollmentRelations,"curriculumLesson",()=>c.curriculumLesson,"curriculumLessonProgress",()=>c.curriculumLessonProgress,"curriculumLessonProgressRelations",()=>e.curriculumLessonProgressRelations,"curriculumLessonRelations",()=>e.curriculumLessonRelations,"curriculumModule",()=>c.curriculumModule,"curriculumModuleRelations",()=>e.curriculumModuleRelations,"curriculumProgress",()=>c.curriculumProgress,"curriculumProgressRelations",()=>e.curriculumProgressRelations,"curriculumRelations",()=>e.curriculumRelations,"curriculumShare",()=>c.curriculumShare,"curriculumShareRelations",()=>e.curriculumShareRelations,"directMessage",()=>c.directMessage,"directMessageRelations",()=>e.directMessageRelations,"emergencyContact",()=>c.emergencyContact,"engagementSnapshot",()=>c.engagementSnapshot,"eventStatusEnum",()=>b.eventStatusEnum,"eventTypeEnum",()=>b.eventTypeEnum,"familyAccount",()=>c.familyAccount,"familyAccountRelations",()=>e.familyAccountRelations,"familyBudget",()=>c.familyBudget,"familyMember",()=>c.familyMember,"familyMemberRelations",()=>e.familyMemberRelations,"familyNotification",()=>c.familyNotification,"familyNotificationRelations",()=>e.familyNotificationRelations,"familyPayment",()=>c.familyPayment,"familyPaymentRelations",()=>e.familyPaymentRelations,"featureFlag",()=>c.featureFlag,"featureFlagChange",()=>c.featureFlagChange,"feedbackWorkflow",()=>c.feedbackWorkflow,"feedbackWorkflowRelations",()=>e.feedbackWorkflowRelations,"generatedTask",()=>c.generatedTask,"generatedTaskRelations",()=>e.generatedTaskRelations,"ipWhitelist",()=>c.ipWhitelist,"leaderboardEntry",()=>c.leaderboardEntry,"lessonSession",()=>c.lessonSession,"lessonSessionRelations",()=>e.lessonSessionRelations,"libraryTask",()=>c.libraryTask,"liveSession",()=>c.liveSession,"liveSessionRelations",()=>e.liveSessionRelations,"llmModel",()=>c.llmModel,"llmProvider",()=>c.llmProvider,"llmRoutingRule",()=>c.llmRoutingRule,"mathAIInteraction",()=>c.mathAIInteraction,"mathAIInteractionTypeEnum",()=>b.mathAIInteractionTypeEnum,"mathSessionStatusEnum",()=>b.mathSessionStatusEnum,"mathWhiteboardPage",()=>c.mathWhiteboardPage,"mathWhiteboardParticipant",()=>c.mathWhiteboardParticipant,"mathWhiteboardSession",()=>c.mathWhiteboardSession,"mathWhiteboardSnapshot",()=>c.mathWhiteboardSnapshot,"message",()=>c.message,"messageSourceEnum",()=>b.messageSourceEnum,"mission",()=>c.mission,"missionProgress",()=>c.missionProgress,"note",()=>c.note,"notification",()=>c.notification,"notificationPreference",()=>c.notificationPreference,"parentActivityLog",()=>c.parentActivityLog,"parentActivityLogRelations",()=>e.parentActivityLogRelations,"parentPaymentAuthorization",()=>c.parentPaymentAuthorization,"parentSpendingLimit",()=>c.parentSpendingLimit,"payment",()=>c.payment,"paymentGatewayEnum",()=>b.paymentGatewayEnum,"paymentOnPayout",()=>c.paymentOnPayout,"paymentOnPayoutRelations",()=>e.paymentOnPayoutRelations,"paymentRelations",()=>e.paymentRelations,"paymentStatusEnum",()=>b.paymentStatusEnum,"payout",()=>c.payout,"payoutRelations",()=>e.payoutRelations,"performanceAlert",()=>c.performanceAlert,"performanceMetric",()=>c.performanceMetric,"platformRevenue",()=>c.platformRevenue,"poll",()=>c.poll,"pollOption",()=>c.pollOption,"pollResponse",()=>c.pollResponse,"pollStatusEnum",()=>b.pollStatusEnum,"pollTypeEnum",()=>b.pollTypeEnum,"postSessionReport",()=>c.postSessionReport,"profile",()=>c.profile,"profileRelations",()=>e.profileRelations,"questionBankItem",()=>c.questionBankItem,"quiz",()=>c.quiz,"quizAssignment",()=>c.quizAssignment,"quizAssignmentRelations",()=>e.quizAssignmentRelations,"quizAttempt",()=>c.quizAttempt,"quizAttemptRelations",()=>e.quizAttemptRelations,"quizRelations",()=>e.quizRelations,"refund",()=>c.refund,"refundStatusEnum",()=>b.refundStatusEnum,"resource",()=>c.resource,"resourceShare",()=>c.resourceShare,"reviewSchedule",()=>c.reviewSchedule,"roleEnum",()=>b.roleEnum,"securityEvent",()=>c.securityEvent,"session",()=>d.session,"sessionBookmark",()=>c.sessionBookmark,"sessionEngagementSummary",()=>c.sessionEngagementSummary,"sessionParticipant",()=>c.sessionParticipant,"sessionParticipantRelations",()=>e.sessionParticipantRelations,"sessionReplayArtifact",()=>c.sessionReplayArtifact,"sessionTypeEnum",()=>b.sessionTypeEnum,"studentPerformance",()=>c.studentPerformance,"studentPerformanceRelations",()=>e.studentPerformanceRelations,"studentProgressSnapshot",()=>c.studentProgressSnapshot,"studentSessionInsight",()=>c.studentSessionInsight,"studyGroup",()=>c.studyGroup,"studyGroupMember",()=>c.studyGroupMember,"studyGroupMemberRelations",()=>e.studyGroupMemberRelations,"studyGroupRelations",()=>e.studyGroupRelations,"systemSetting",()=>c.systemSetting,"taskSubmission",()=>c.taskSubmission,"taskSubmissionRelations",()=>e.taskSubmissionRelations,"tierEnum",()=>b.tierEnum,"user",()=>c.user,"userActivityLog",()=>c.userActivityLog,"userActivityLogRelations",()=>e.userActivityLogRelations,"userBadge",()=>c.userBadge,"userDailyQuest",()=>c.userDailyQuest,"userGamification",()=>c.userGamification,"userGamificationRelations",()=>e.userGamificationRelations,"userRelations",()=>e.userRelations,"verificationToken",()=>d.verificationToken,"videoWatchEvent",()=>c.videoWatchEvent,"webhookEvent",()=>c.webhookEvent,"whiteboard",()=>c.whiteboard,"whiteboardPage",()=>c.whiteboardPage,"whiteboardSession",()=>c.whiteboardSession,"whiteboardSnapshot",()=>c.whiteboardSnapshot])},370943,a=>a.a(async(b,c)=>{try{var d=a.i(221038),e=a.i(238523);a.i(195984);var f=a.i(225569),g=b([d,e]);[d,e]=g.then?(await g)():g;let h=process.env.DATABASE_POOL_URL||process.env.DIRECT_URL||process.env.DATABASE_URL;if(!h)throw Error("Missing database URL. Set DATABASE_URL, DIRECT_URL, or DATABASE_POOL_URL in .env or .env.local");let i=globalThis.drizzlePool??new e.Pool({connectionString:h,max:50,idleTimeoutMillis:3e4,connectionTimeoutMillis:5e3}),j=(0,d.drizzle)(i,{schema:f});a.s(["drizzleDb",0,j]),c()}catch(a){c(a)}},!1),322304,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e,f,g,h,i,j,k,l,m,n,o,p={AppRenderSpan:function(){return x},AppRouteRouteHandlersSpan:function(){return A},BaseServerSpan:function(){return r},LoadComponentsSpan:function(){return s},LogSpanAllowList:function(){return E},MiddlewareSpan:function(){return C},NextNodeServerSpan:function(){return u},NextServerSpan:function(){return t},NextVanillaSpanAllowlist:function(){return D},NodeSpan:function(){return z},RenderSpan:function(){return w},ResolveMetadataSpan:function(){return B},RouterSpan:function(){return y},StartServerSpan:function(){return v}};for(var q in p)Object.defineProperty(c,q,{enumerable:!0,get:p[q]});var r=((d=r||{}).handleRequest="BaseServer.handleRequest",d.run="BaseServer.run",d.pipe="BaseServer.pipe",d.getStaticHTML="BaseServer.getStaticHTML",d.render="BaseServer.render",d.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",d.renderToResponse="BaseServer.renderToResponse",d.renderToHTML="BaseServer.renderToHTML",d.renderError="BaseServer.renderError",d.renderErrorToResponse="BaseServer.renderErrorToResponse",d.renderErrorToHTML="BaseServer.renderErrorToHTML",d.render404="BaseServer.render404",d),s=((e=s||{}).loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents",e),t=((f=t||{}).getRequestHandler="NextServer.getRequestHandler",f.getRequestHandlerWithMetadata="NextServer.getRequestHandlerWithMetadata",f.getServer="NextServer.getServer",f.getServerRequestHandler="NextServer.getServerRequestHandler",f.createServer="createServer.createServer",f),u=((g=u||{}).compression="NextNodeServer.compression",g.getBuildId="NextNodeServer.getBuildId",g.createComponentTree="NextNodeServer.createComponentTree",g.clientComponentLoading="NextNodeServer.clientComponentLoading",g.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",g.generateStaticRoutes="NextNodeServer.generateStaticRoutes",g.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",g.generatePublicRoutes="NextNodeServer.generatePublicRoutes",g.generateImageRoutes="NextNodeServer.generateImageRoutes.route",g.sendRenderResult="NextNodeServer.sendRenderResult",g.proxyRequest="NextNodeServer.proxyRequest",g.runApi="NextNodeServer.runApi",g.render="NextNodeServer.render",g.renderHTML="NextNodeServer.renderHTML",g.imageOptimizer="NextNodeServer.imageOptimizer",g.getPagePath="NextNodeServer.getPagePath",g.getRoutesManifest="NextNodeServer.getRoutesManifest",g.findPageComponents="NextNodeServer.findPageComponents",g.getFontManifest="NextNodeServer.getFontManifest",g.getServerComponentManifest="NextNodeServer.getServerComponentManifest",g.getRequestHandler="NextNodeServer.getRequestHandler",g.renderToHTML="NextNodeServer.renderToHTML",g.renderError="NextNodeServer.renderError",g.renderErrorToHTML="NextNodeServer.renderErrorToHTML",g.render404="NextNodeServer.render404",g.startResponse="NextNodeServer.startResponse",g.route="route",g.onProxyReq="onProxyReq",g.apiResolver="apiResolver",g.internalFetch="internalFetch",g),v=((h=v||{}).startServer="startServer.startServer",h),w=((i=w||{}).getServerSideProps="Render.getServerSideProps",i.getStaticProps="Render.getStaticProps",i.renderToString="Render.renderToString",i.renderDocument="Render.renderDocument",i.createBodyResult="Render.createBodyResult",i),x=((j=x||{}).renderToString="AppRender.renderToString",j.renderToReadableStream="AppRender.renderToReadableStream",j.getBodyResult="AppRender.getBodyResult",j.fetch="AppRender.fetch",j),y=((k=y||{}).executeRoute="Router.executeRoute",k),z=((l=z||{}).runHandler="Node.runHandler",l),A=((m=A||{}).runHandler="AppRouteRouteHandlers.runHandler",m),B=((n=B||{}).generateMetadata="ResolveMetadata.generateMetadata",n.generateViewport="ResolveMetadata.generateViewport",n),C=((o=C||{}).execute="Middleware.execute",o);let D=new Set(["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"]),E=new Set(["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"])},124721,(a,b,c)=>{"use strict";function d(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isThenable",{enumerable:!0,get:function(){return d}})},82682,(a,b,c)=>{"use strict";let d,e;Object.defineProperty(c,"__esModule",{value:!0});var f={BubbledError:function(){return q},SpanKind:function(){return o},SpanStatusCode:function(){return n},getTracer:function(){return x},isBubbledError:function(){return r}};for(var g in f)Object.defineProperty(c,g,{enumerable:!0,get:f[g]});let h=a.r(322304),i=a.r(124721),j=process.env.NEXT_OTEL_PERFORMANCE_PREFIX;try{d=a.r(790214)}catch(b){d=a.r(710396)}let{context:k,propagation:l,trace:m,SpanStatusCode:n,SpanKind:o,ROOT_CONTEXT:p}=d;class q extends Error{constructor(a,b){super(),this.bubble=a,this.result=b}}function r(a){return"object"==typeof a&&null!==a&&a instanceof q}let s=(a,b)=>{r(b)&&b.bubble?a.setAttribute("next.bubble",!0):(b&&(a.recordException(b),a.setAttribute("error.type",b.name)),a.setStatus({code:n.ERROR,message:null==b?void 0:b.message})),a.end()},t=new Map,u=d.createContextKey("next.rootSpanId"),v=0,w={set(a,b,c){a.push({key:b,value:c})}},x=(e=new class a{getTracerInstance(){return m.getTracer("next.js","0.0.1")}getContext(){return k}getTracePropagationData(){let a=k.active(),b=[];return l.inject(a,b,w),b}getActiveScopeSpan(){return m.getSpan(null==k?void 0:k.active())}withPropagatedContext(a,b,c){let d=k.active();if(m.getSpanContext(d))return b();let e=l.extract(d,a,c);return k.with(e,b)}trace(...a){let[b,c,d]=a,{fn:e,options:f}="function"==typeof c?{fn:c,options:{}}:{fn:d,options:{...c}},g=f.spanName??b;if(!h.NextVanillaSpanAllowlist.has(b)&&"1"!==process.env.NEXT_OTEL_VERBOSE||f.hideSpan)return e();let l=this.getSpanContext((null==f?void 0:f.parentSpan)??this.getActiveScopeSpan());l||(l=(null==k?void 0:k.active())??p);let m=l.getValue(u),n="number"!=typeof m||!t.has(m),o=v++;return f.attributes={"next.span_name":g,"next.span_type":b,...f.attributes},k.with(l.setValue(u,o),()=>this.getTracerInstance().startActiveSpan(g,f,a=>{let c;j&&b&&h.LogSpanAllowList.has(b)&&(c="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0);let d=!1,g=()=>{!d&&(d=!0,t.delete(o),c&&performance.measure(`${j}:next-${(b.split(".").pop()||"").replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}`,{start:c,end:performance.now()}))};if(n&&t.set(o,new Map(Object.entries(f.attributes??{}))),e.length>1)try{return e(a,b=>s(a,b))}catch(b){throw s(a,b),b}finally{g()}try{let b=e(a);if((0,i.isThenable)(b))return b.then(b=>(a.end(),b)).catch(b=>{throw s(a,b),b}).finally(g);return a.end(),g(),b}catch(b){throw s(a,b),g(),b}}))}wrap(...a){let b=this,[c,d,e]=3===a.length?a:[a[0],{},a[1]];return h.NextVanillaSpanAllowlist.has(c)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let a=d;"function"==typeof a&&"function"==typeof e&&(a=a.apply(this,arguments));let f=arguments.length-1,g=arguments[f];if("function"!=typeof g)return b.trace(c,a,()=>e.apply(this,arguments));{let d=b.getContext().bind(k.active(),g);return b.trace(c,a,(a,b)=>(arguments[f]=function(a){return null==b||b(a),d.apply(this,arguments)},e.apply(this,arguments)))}}:e}startSpan(...a){let[b,c]=a,d=this.getSpanContext((null==c?void 0:c.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(b,c,d)}getSpanContext(a){return a?m.setSpan(k.active(),a):void 0}getRootSpanAttributes(){let a=k.active().getValue(u);return t.get(a)}setRootSpanAttribute(a,b){let c=k.active().getValue(u),d=t.get(c);d&&!d.has(a)&&d.set(a,b)}withSpan(a,b){let c=m.setSpan(k.active(),a);return k.with(c,b)}},()=>e)},843571,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"cloneResponse",{enumerable:!0,get:function(){return f}});let e=()=>{};function f(a){if(!a.body)return[a,a];let[b,c]=a.body.tee(),e=new Response(b,{status:a.status,statusText:a.statusText,headers:a.headers});Object.defineProperty(e,"url",{value:a.url,configurable:!0,enumerable:!0,writable:!1}),d&&e.body&&d.register(e,new WeakRef(e.body));let f=new Response(c,{status:a.status,statusText:a.statusText,headers:a.headers});return Object.defineProperty(f,"url",{value:a.url,configurable:!0,enumerable:!0,writable:!1}),[e,f]}globalThis.FinalizationRegistry&&(d=new FinalizationRegistry(a=>{let b=a.deref();b&&!b.locked&&b.cancel("Response object has been garbage collected").then(e)}))},907013,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createDedupeFetch",{enumerable:!0,get:function(){return i}});let d=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=g(void 0);if(c&&c.has(a))return c.get(a);var d={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!==f&&Object.prototype.hasOwnProperty.call(a,f)){var h=e?Object.getOwnPropertyDescriptor(a,f):null;h&&(h.get||h.set)?Object.defineProperty(d,f,h):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}(a.r(166165)),e=a.r(843571),f=a.r(407351);function g(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(g=function(a){return a?c:b})(a)}let h=new Set(["traceparent","tracestate"]);function i(a){let b=d.cache(a=>[]);return function(c,d){let g,i;if(d&&d.signal)return a(c,d);if("string"!=typeof c||d){let b,e="string"==typeof c||c instanceof URL?new Request(c,d):c;if("GET"!==e.method&&"HEAD"!==e.method||e.keepalive)return a(c,d);b=Array.from(e.headers.entries()).filter(([a])=>!h.has(a.toLowerCase())),i=JSON.stringify([e.method,b,e.mode,e.redirect,e.credentials,e.referrer,e.referrerPolicy,e.integrity]),g=e.url}else i='["GET",[],null,"follow",null,null,null,null]',g=c;let j=b(g);for(let a=0,b=j.length;a<b;a+=1){let[b,c]=j[a];if(b===i)return c.then(()=>{let b=j[a][2];if(!b)throw Object.defineProperty(new f.InvariantError("No cached response"),"__NEXT_ERROR_CODE",{value:"E579",enumerable:!1,configurable:!0});let[c,d]=(0,e.cloneResponse)(b);return j[a][2]=d,c})}let k=a(c,d),l=[i,k,null];return j.push(l),k.then(a=>{let[b,c]=(0,e.cloneResponse)(a);return l[2]=c,b})}}},491663,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e,f={CachedRouteKind:function(){return h},IncrementalCacheKind:function(){return i}};for(var g in f)Object.defineProperty(c,g,{enumerable:!0,get:f[g]});var h=((d={}).APP_PAGE="APP_PAGE",d.APP_ROUTE="APP_ROUTE",d.PAGES="PAGES",d.FETCH="FETCH",d.REDIRECT="REDIRECT",d.IMAGE="IMAGE",d),i=((e={}).APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.PAGES="PAGES",e.FETCH="FETCH",e.IMAGE="IMAGE",e)},119968,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"DetachedPromise",{enumerable:!0,get:function(){return d}});class d{constructor(){let a,b;this.promise=new Promise((c,d)=>{a=c,b=d}),this.resolve=a,this.reject=b}}},237587,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"Batcher",{enumerable:!0,get:function(){return e}});let d=a.r(119968);class e{constructor(a,b=a=>a()){this.cacheKeyFn=a,this.schedulerFn=b,this.pending=new Map}static create(a){return new e(null==a?void 0:a.cacheKeyFn,null==a?void 0:a.schedulerFn)}async batch(a,b){let c=this.cacheKeyFn?await this.cacheKeyFn(a):a;if(null===c)return b({resolve:a=>Promise.resolve(a),key:a});let e=this.pending.get(c);if(e)return e;let{promise:f,resolve:g,reject:h}=new d.DetachedPromise;return this.pending.set(c,f),this.schedulerFn(async()=>{try{let c=await b({resolve:g,key:a});g(c)}catch(a){h(a)}finally{this.pending.delete(c)}}),f}}},362220,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"LRUCache",{enumerable:!0,get:function(){return f}});class d{constructor(a,b,c){this.prev=null,this.next=null,this.key=a,this.data=b,this.size=c}}class e{constructor(){this.prev=null,this.next=null}}class f{constructor(a,b,c){this.cache=new Map,this.totalSize=0,this.maxSize=a,this.calculateSize=b,this.onEvict=c,this.head=new e,this.tail=new e,this.head.next=this.tail,this.tail.prev=this.head}addToHead(a){a.prev=this.head,a.next=this.head.next,this.head.next.prev=a,this.head.next=a}removeNode(a){a.prev.next=a.next,a.next.prev=a.prev}moveToHead(a){this.removeNode(a),this.addToHead(a)}removeTail(){let a=this.tail.prev;return this.removeNode(a),a}set(a,b){let c=(null==this.calculateSize?void 0:this.calculateSize.call(this,b))??1;if(c>this.maxSize)return void console.warn("Single item size exceeds maxSize");let e=this.cache.get(a);if(e)e.data=b,this.totalSize=this.totalSize-e.size+c,e.size=c,this.moveToHead(e);else{let e=new d(a,b,c);this.cache.set(a,e),this.addToHead(e),this.totalSize+=c}for(;this.totalSize>this.maxSize&&this.cache.size>0;){let a=this.removeTail();this.cache.delete(a.key),this.totalSize-=a.size,null==this.onEvict||this.onEvict.call(this,a.key,a.data)}}has(a){return this.cache.has(a)}get(a){let b=this.cache.get(a);if(b)return this.moveToHead(b),b.data}*[Symbol.iterator](){let a=this.head.next;for(;a&&a!==this.tail;){let b=a;yield[b.key,b.data],a=a.next}}remove(a){let b=this.cache.get(a);b&&(this.removeNode(b),this.cache.delete(a),this.totalSize-=b.size)}get size(){return this.cache.size}get currentSize(){return this.totalSize}}},18088,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={bgBlack:function(){return D},bgBlue:function(){return H},bgCyan:function(){return J},bgGreen:function(){return F},bgMagenta:function(){return I},bgRed:function(){return E},bgWhite:function(){return K},bgYellow:function(){return G},black:function(){return t},blue:function(){return x},bold:function(){return m},cyan:function(){return A},dim:function(){return n},gray:function(){return C},green:function(){return v},hidden:function(){return r},inverse:function(){return q},italic:function(){return o},magenta:function(){return y},purple:function(){return z},red:function(){return u},reset:function(){return l},strikethrough:function(){return s},underline:function(){return p},white:function(){return B},yellow:function(){return w}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let{env:g,stdout:h}=(null==(d=globalThis)?void 0:d.process)??{},i=g&&!g.NO_COLOR&&(g.FORCE_COLOR||(null==h?void 0:h.isTTY)&&!g.CI&&"dumb"!==g.TERM),j=(a,b,c,d)=>{let e=a.substring(0,d)+c,f=a.substring(d+b.length),g=f.indexOf(b);return~g?e+j(f,b,c,g):e+f},k=(a,b,c=a)=>i?d=>{let e=""+d,f=e.indexOf(b,a.length);return~f?a+j(e,b,c,f)+b:a+e+b}:String,l=i?a=>`\x1b[0m${a}\x1b[0m`:String,m=k("\x1b[1m","\x1b[22m","\x1b[22m\x1b[1m"),n=k("\x1b[2m","\x1b[22m","\x1b[22m\x1b[2m"),o=k("\x1b[3m","\x1b[23m"),p=k("\x1b[4m","\x1b[24m"),q=k("\x1b[7m","\x1b[27m"),r=k("\x1b[8m","\x1b[28m"),s=k("\x1b[9m","\x1b[29m"),t=k("\x1b[30m","\x1b[39m"),u=k("\x1b[31m","\x1b[39m"),v=k("\x1b[32m","\x1b[39m"),w=k("\x1b[33m","\x1b[39m"),x=k("\x1b[34m","\x1b[39m"),y=k("\x1b[35m","\x1b[39m"),z=k("\x1b[38;2;173;127;168m","\x1b[39m"),A=k("\x1b[36m","\x1b[39m"),B=k("\x1b[37m","\x1b[39m"),C=k("\x1b[90m","\x1b[39m"),D=k("\x1b[40m","\x1b[49m"),E=k("\x1b[41m","\x1b[49m"),F=k("\x1b[42m","\x1b[49m"),G=k("\x1b[43m","\x1b[49m"),H=k("\x1b[44m","\x1b[49m"),I=k("\x1b[45m","\x1b[49m"),J=k("\x1b[46m","\x1b[49m"),K=k("\x1b[47m","\x1b[49m")},160627,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={bootstrap:function(){return k},error:function(){return m},errorOnce:function(){return v},event:function(){return q},info:function(){return p},prefixes:function(){return h},ready:function(){return o},trace:function(){return r},wait:function(){return l},warn:function(){return n},warnOnce:function(){return t}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(18088),g=a.r(362220),h={wait:(0,f.white)((0,f.bold)("")),error:(0,f.red)((0,f.bold)("")),warn:(0,f.yellow)((0,f.bold)("")),ready:"",info:(0,f.white)((0,f.bold)(" ")),event:(0,f.green)((0,f.bold)("")),trace:(0,f.magenta)((0,f.bold)(""))},i={log:"log",warn:"warn",error:"error"};function j(a,...b){(""===b[0]||void 0===b[0])&&1===b.length&&b.shift();let c=a in i?i[a]:"log",d=h[a];0===b.length?console[c](""):1===b.length&&"string"==typeof b[0]?console[c](d+" "+b[0]):console[c](d,...b)}function k(a){console.log(a)}function l(...a){j("wait",...a)}function m(...a){j("error",...a)}function n(...a){j("warn",...a)}function o(...a){j("ready",...a)}function p(...a){j("info",...a)}function q(...a){j("event",...a)}function r(...a){j("trace",...a)}let s=new g.LRUCache(1e4,a=>a.length);function t(...a){let b=a.join(" ");s.has(b)||(s.set(b,b),n(...a))}let u=new g.LRUCache(1e4,a=>a.length);function v(...a){let b=a.join(" ");u.has(b)||(u.set(b,b),m(...a))}},48194,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ENCODED_TAGS",{enumerable:!0,get:function(){return d}});let d={OPENING:{HTML:new Uint8Array([60,104,116,109,108]),BODY:new Uint8Array([60,98,111,100,121])},CLOSED:{HEAD:new Uint8Array([60,47,104,101,97,100,62]),BODY:new Uint8Array([60,47,98,111,100,121,62]),HTML:new Uint8Array([60,47,104,116,109,108,62]),BODY_AND_HTML:new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62])},META:{ICON_MARK:new Uint8Array([60,109,101,116,97,32,110,97,109,101,61,34,194,171,110,120,116,45,105,99,111,110,194,187,34])}}},919546,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={indexOfUint8Array:function(){return f},isEquivalentUint8Arrays:function(){return g},removeFromUint8Array:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a,b){if(0===b.length)return 0;if(0===a.length||b.length>a.length)return -1;for(let c=0;c<=a.length-b.length;c++){let d=!0;for(let e=0;e<b.length;e++)if(a[c+e]!==b[e]){d=!1;break}if(d)return c}return -1}function g(a,b){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}function h(a,b){let c=f(a,b);if(0===c)return a.subarray(b.length);if(!(c>-1))return a;{let d=new Uint8Array(a.length-b.length);return d.set(a.slice(0,c)),d.set(a.slice(c+b.length),c),d}}},10820,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"MISSING_ROOT_TAGS_ERROR",{enumerable:!0,get:function(){return d}});let d="NEXT_MISSING_ROOT_TAGS";("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},431246,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"insertBuildIdComment",{enumerable:!0,get:function(){return e}});let d="<!DOCTYPE html>";function e(a,b){return b.includes("-->")||!a.startsWith(d)?a:a.replace(d,d+"<!--"+b.slice(0,24).replace(/-/g,"_")+"-->")}},298772,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"computeCacheBustingSearchParam",{enumerable:!0,get:function(){return e}});let d=a.r(443718);function e(a,b,c,e){return(void 0===a||"0"===a)&&void 0===b&&void 0===c&&void 0===e?"":(0,d.hexHash)([a||"0",b||"0",c||"0",e||"0"].join(","))}},458723,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={chainStreams:function(){return r},continueDynamicHTMLResume:function(){return L},continueDynamicPrerender:function(){return I},continueFizzStream:function(){return H},continueStaticFallbackPrerender:function(){return K},continueStaticPrerender:function(){return J},createBufferedTransformStream:function(){return y},createDocumentClosingStream:function(){return M},createRootLayoutValidatorStream:function(){return G},renderToInitialFizzStream:function(){return A},streamFromBuffer:function(){return t},streamFromString:function(){return s},streamToBuffer:function(){return w},streamToString:function(){return x},streamToUint8Array:function(){return v}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(82682),g=a.r(322304),h=a.r(119968),i=a.r(732914),j=a.r(48194),k=a.r(919546),l=a.r(10820),m=a.r(431246),n=a.r(102174),o=a.r(298772);function p(){}let q=new TextEncoder;function r(...a){if(0===a.length)return new ReadableStream({start(a){a.close()}});if(1===a.length)return a[0];let{readable:b,writable:c}=new TransformStream,d=a[0].pipeTo(c,{preventClose:!0}),e=1;for(;e<a.length-1;e++){let b=a[e];d=d.then(()=>b.pipeTo(c,{preventClose:!0}))}let f=a[e];return(d=d.then(()=>f.pipeTo(c))).catch(p),b}function s(a){return new ReadableStream({start(b){b.enqueue(q.encode(a)),b.close()}})}function t(a){return new ReadableStream({start(b){b.enqueue(a),b.close()}})}async function u(a){let b=a.getReader(),c=[];for(;;){let{done:a,value:d}=await b.read();if(a)break;c.push(d)}return c}async function v(a){var b=await u(a);let c=new Uint8Array(b.reduce((a,b)=>a+b.length,0)),d=0;for(let a of b)c.set(a,d),d+=a.length;return c}async function w(a){return Buffer.concat(await u(a))}async function x(a,b){let c=new TextDecoder("utf-8",{fatal:!0}),d="";for await(let e of a){if(null==b?void 0:b.aborted)return d;d+=c.decode(e,{stream:!0})}return d+c.decode()}function y(a={}){let b,{maxBufferByteLength:c=1/0}=a,d=[],e=0,f=a=>{try{if(0===d.length)return;let b=new Uint8Array(e),c=0;for(let a=0;a<d.length;a++){let e=d[a];b.set(e,c),c+=e.byteLength}d.length=0,e=0,a.enqueue(b)}catch{}};return new TransformStream({transform(a,g){d.push(a),(e+=a.byteLength)>=c?f(g):(a=>{if(b)return;let c=new h.DetachedPromise;b=c,(0,i.scheduleImmediate)(()=>{try{f(a)}finally{b=void 0,c.resolve()}})})(g)},flush:()=>null==b?void 0:b.promise})}function z(a,b){let c=!1;return new TransformStream({transform(d,e){if(a&&!c){c=!0;let a=new TextDecoder("utf-8",{fatal:!0}).decode(d,{stream:!0}),f=(0,m.insertBuildIdComment)(a,b);e.enqueue(q.encode(f));return}e.enqueue(d)}})}function A({ReactDOMServer:a,element:b,streamOptions:c}){return(0,f.getTracer)().trace(g.AppRenderSpan.renderToReadableStream,async()=>a.renderToReadableStream(b,c))}function B(a){let b=-1,c=!1;return new TransformStream({async transform(d,e){let f=-1,g=-1;if(b++,c)return void e.enqueue(d);let h=0;if(-1===f){if(-1===(f=(0,k.indexOfUint8Array)(d,j.ENCODED_TAGS.META.ICON_MARK)))return void e.enqueue(d);47===d[f+(h=j.ENCODED_TAGS.META.ICON_MARK.length)]?h+=2:h++}if(0===b){if(g=(0,k.indexOfUint8Array)(d,j.ENCODED_TAGS.CLOSED.HEAD),-1!==f){if(f<g){let a=new Uint8Array(d.length-h);a.set(d.subarray(0,f)),a.set(d.subarray(f+h),f),d=a}else{let b=await a(),c=q.encode(b),e=c.length,g=new Uint8Array(d.length-h+e);g.set(d.subarray(0,f)),g.set(c,f),g.set(d.subarray(f+h),f+e),d=g}c=!0}}else{let b=await a(),e=q.encode(b),g=e.length,i=new Uint8Array(d.length-h+g);i.set(d.subarray(0,f)),i.set(e,f),i.set(d.subarray(f+h),f+g),d=i,c=!0}e.enqueue(d)}})}function C(a){let b=!1,c=!1;return new TransformStream({async transform(d,e){c=!0;let f=await a();if(b){if(f){let a=q.encode(f);e.enqueue(a)}e.enqueue(d)}else{let a=(0,k.indexOfUint8Array)(d,j.ENCODED_TAGS.CLOSED.HEAD);if(-1!==a){if(f){let b=q.encode(f),c=new Uint8Array(d.length+b.length);c.set(d.slice(0,a)),c.set(b,a),c.set(d.slice(a),a+b.length),e.enqueue(c)}else e.enqueue(d);b=!0}else f&&e.enqueue(q.encode(f)),e.enqueue(d),b=!0}},async flush(b){if(c){let c=await a();c&&b.enqueue(q.encode(c))}}})}function D(a,b){let c=!1,d=null,e=!1;function f(a){return d||(d=g(a)),d}async function g(d){let f=a.getReader();b&&await (0,i.atLeastOneTask)();try{for(;;){let{done:a,value:g}=await f.read();if(a){e=!0;return}b||c||await (0,i.atLeastOneTask)(),d.enqueue(g)}}catch(a){d.error(a)}}return new TransformStream({start(a){b||f(a)},transform(a,c){c.enqueue(a),b&&f(c)},flush(a){if(c=!0,!e)return f(a)}})}let E="</body></html>";function F(){let a=!1;return new TransformStream({transform(b,c){if(a)return c.enqueue(b);let d=(0,k.indexOfUint8Array)(b,j.ENCODED_TAGS.CLOSED.BODY_AND_HTML);if(d>-1){if(a=!0,b.length===j.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length)return;let e=b.slice(0,d);if(c.enqueue(e),b.length>j.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length+d){let a=b.slice(d+j.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length);c.enqueue(a)}}else c.enqueue(b)},flush(a){a.enqueue(j.ENCODED_TAGS.CLOSED.BODY_AND_HTML)}})}function G(){let a=!1,b=!1;return new TransformStream({async transform(c,d){!a&&(0,k.indexOfUint8Array)(c,j.ENCODED_TAGS.OPENING.HTML)>-1&&(a=!0),!b&&(0,k.indexOfUint8Array)(c,j.ENCODED_TAGS.OPENING.BODY)>-1&&(b=!0),d.enqueue(c)},flush(c){let d=[];a||d.push("html"),b||d.push("body"),d.length&&c.enqueue(q.encode(`<html id="__next_error__">
            <template
              data-next-error-message="Missing ${d.map(a=>`<${a}>`).join(d.length>1?" and ":"")} tags in the root layout.
Read more at https://nextjs.org/docs/messages/missing-root-layout-tags"
              data-next-error-digest="${l.MISSING_ROOT_TAGS_ERROR}"
              data-next-error-stack=""
            ></template>
          `))}})}async function H(a,{suffix:b,inlinedDataStream:c,isStaticGeneration:d,isBuildTimePrerendering:e,buildId:f,getServerInsertedHTML:g,getServerInsertedMetadata:j,validateRootLayout:k}){let l,m,n=b?b.split(E,1)[0]:null;d?await a.allReady:await (0,i.waitAtLeastOneReactRenderTask)();var o=[y(),z(e,f),B(j),null!=n&&n.length>0?(m=!1,new TransformStream({transform(a,b){if(b.enqueue(a),!m){let a;m=!0,l=a=new h.DetachedPromise,(0,i.scheduleImmediate)(()=>{try{b.enqueue(q.encode(n))}catch{}finally{l=void 0,a.resolve()}})}},flush(a){if(l)return l.promise;m||a.enqueue(q.encode(n))}})):null,c?D(c,!0):null,k?G():null,F(),C(g)];let p=a;for(let a of o)a&&(p=p.pipeThrough(a));return p}async function I(a,{getServerInsertedHTML:b,getServerInsertedMetadata:c}){return a.pipeThrough(y()).pipeThrough(new TransformStream({transform(a,b){(0,k.isEquivalentUint8Arrays)(a,j.ENCODED_TAGS.CLOSED.BODY_AND_HTML)||(0,k.isEquivalentUint8Arrays)(a,j.ENCODED_TAGS.CLOSED.BODY)||(0,k.isEquivalentUint8Arrays)(a,j.ENCODED_TAGS.CLOSED.HTML)||(a=(0,k.removeFromUint8Array)(a,j.ENCODED_TAGS.CLOSED.BODY),a=(0,k.removeFromUint8Array)(a,j.ENCODED_TAGS.CLOSED.HTML),b.enqueue(a))}})).pipeThrough(C(b)).pipeThrough(B(c))}async function J(a,{inlinedDataStream:b,getServerInsertedHTML:c,getServerInsertedMetadata:d,isBuildTimePrerendering:e,buildId:f}){return a.pipeThrough(y()).pipeThrough(z(e,f)).pipeThrough(C(c)).pipeThrough(B(d)).pipeThrough(D(b,!0)).pipeThrough(F())}async function K(a,{inlinedDataStream:b,getServerInsertedHTML:c,getServerInsertedMetadata:d,isBuildTimePrerendering:e,buildId:f}){let g,h,i,l;return a.pipeThrough(y()).pipeThrough(z(e,f)).pipeThrough(C(c)).pipeThrough((g=(0,o.computeCacheBustingSearchParam)("1","/_full",void 0,void 0),h=`${n.NEXT_RSC_UNION_QUERY}=${g}`,i=`<script>__NEXT_CLIENT_RESUME=fetch(location.pathname+'?${h}',{credentials:'same-origin',headers:{'${n.RSC_HEADER}': '1','${n.NEXT_ROUTER_PREFETCH_HEADER}': '1','${n.NEXT_ROUTER_SEGMENT_PREFETCH_HEADER}': '/_full'}})</script>`,l=!1,new TransformStream({transform(a,b){if(l)return void b.enqueue(a);let c=(0,k.indexOfUint8Array)(a,j.ENCODED_TAGS.CLOSED.HEAD);if(-1===c)return void b.enqueue(a);let d=q.encode(i),e=new Uint8Array(a.length+d.length);e.set(a.slice(0,c)),e.set(d,c),e.set(a.slice(c),c+d.length),b.enqueue(e),l=!0}}))).pipeThrough(B(d)).pipeThrough(D(b,!0)).pipeThrough(F())}async function L(a,{delayDataUntilFirstHtmlChunk:b,inlinedDataStream:c,getServerInsertedHTML:d,getServerInsertedMetadata:e}){return a.pipeThrough(y()).pipeThrough(C(d)).pipeThrough(B(e)).pipeThrough(D(c,b)).pipeThrough(F())}function M(){return s(E)}},148845,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={NEXT_REQUEST_META:function(){return f},addRequestMeta:function(){return i},getRequestMeta:function(){return g},removeRequestMeta:function(){return j},setRequestMeta:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=Symbol.for("NextInternalRequestMeta");function g(a,b){let c=a[f]||{};return"string"==typeof b?c[b]:c}function h(a,b){return a[f]=b,b}function i(a,b,c){let d=g(a);return d[b]=c,h(a,d)}function j(a,b){let c=g(a);return delete c[b],h(a,c)}},934757,(a,b,c)=>{"use strict";function d(a,b,c){if(a){for(let d of(c&&(c=c.toLowerCase()),a))if(b===d.domain?.split(":",1)[0].toLowerCase()||c===d.defaultLocale.toLowerCase()||d.locales?.some(a=>a.toLowerCase()===c))return d}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"detectDomainLocale",{enumerable:!0,get:function(){return d}})},171209,(a,b,c)=>{"use strict";function d(a){let b=a.indexOf("#"),c=a.indexOf("?"),d=c>-1&&(b<0||c<b);return d||b>-1?{pathname:a.substring(0,d?c:b),query:d?a.substring(c,b>-1?b:void 0):"",hash:b>-1?a.slice(b):""}:{pathname:a,query:"",hash:""}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"parsePath",{enumerable:!0,get:function(){return d}})},296606,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addPathPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(171209);function e(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:e,hash:f}=(0,d.parsePath)(a);return`${b}${c}${e}${f}`}},181110,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addPathSuffix",{enumerable:!0,get:function(){return e}});let d=a.r(171209);function e(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:e,hash:f}=(0,d.parsePath)(a);return`${c}${b}${e}${f}`}},330063,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"pathHasPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(171209);function e(a,b){if("string"!=typeof a)return!1;let{pathname:c}=(0,d.parsePath)(a);return c===b||c.startsWith(b+"/")}},754364,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addLocale",{enumerable:!0,get:function(){return f}});let d=a.r(296606),e=a.r(330063);function f(a,b,c,f){if(!b||b===c)return a;let g=a.toLowerCase();return!f&&((0,e.pathHasPrefix)(g,"/api")||(0,e.pathHasPrefix)(g,`/${b.toLowerCase()}`))?a:(0,d.addPathPrefix)(a,`/${b}`)}},799885,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"formatNextPathnameInfo",{enumerable:!0,get:function(){return h}});let d=a.r(118256),e=a.r(296606),f=a.r(181110),g=a.r(754364);function h(a){let b=(0,g.addLocale)(a.pathname,a.locale,a.buildId?void 0:a.defaultLocale,a.ignorePrefix);return(a.buildId||!a.trailingSlash)&&(b=(0,d.removeTrailingSlash)(b)),a.buildId&&(b=(0,f.addPathSuffix)((0,e.addPathPrefix)(b,`/_next/data/${a.buildId}`),"/"===a.pathname?"index.json":".json")),b=(0,e.addPathPrefix)(b,a.basePath),!a.buildId&&a.trailingSlash?b.endsWith("/")?b:(0,f.addPathSuffix)(b,"/"):(0,d.removeTrailingSlash)(b)}},521215,(a,b,c)=>{"use strict";function d(a,b){let c;if(b?.host&&!Array.isArray(b.host))c=b.host.toString().split(":",1)[0];else{if(!a.hostname)return;c=a.hostname}return c.toLowerCase()}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getHostname",{enumerable:!0,get:function(){return d}})},453011,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"removePathPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(330063);function e(a,b){if(!(0,d.pathHasPrefix)(a,b))return a;let c=a.slice(b.length);return c.startsWith("/")?c:`/${c}`}},351032,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getNextPathnameInfo",{enumerable:!0,get:function(){return g}});let d=a.r(535028),e=a.r(453011),f=a.r(330063);function g(a,b){let{basePath:c,i18n:g,trailingSlash:h}=b.nextConfig??{},i={pathname:a,trailingSlash:"/"!==a?a.endsWith("/"):h};c&&(0,f.pathHasPrefix)(i.pathname,c)&&(i.pathname=(0,e.removePathPrefix)(i.pathname,c),i.basePath=c);let j=i.pathname;if(i.pathname.startsWith("/_next/data/")&&i.pathname.endsWith(".json")){let a=i.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");i.buildId=a[0],j="index"!==a[1]?`/${a.slice(1).join("/")}`:"/",!0===b.parseData&&(i.pathname=j)}if(g){let a=b.i18nProvider?b.i18nProvider.analyze(i.pathname):(0,d.normalizeLocalePath)(i.pathname,g.locales);i.locale=a.detectedLocale,i.pathname=a.pathname??i.pathname,!a.detectedLocale&&i.buildId&&(a=b.i18nProvider?b.i18nProvider.analyze(j):(0,d.normalizeLocalePath)(j,g.locales)).detectedLocale&&(i.locale=a.detectedLocale)}return i}},239013,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"NextURL",{enumerable:!0,get:function(){return k}});let d=a.r(934757),e=a.r(799885),f=a.r(521215),g=a.r(351032),h=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function i(a,b){return new URL(String(a).replace(h,"localhost"),b&&String(b).replace(h,"localhost"))}let j=Symbol("NextURLInternal");class k{constructor(a,b,c){let d,e;"object"==typeof b&&"pathname"in b||"string"==typeof b?(d=b,e=c||{}):e=c||b||{},this[j]={url:i(a,d??e.base),options:e,basePath:""},this.analyze()}analyze(){var a,b,c,e,h;let i=(0,g.getNextPathnameInfo)(this[j].url.pathname,{nextConfig:this[j].options.nextConfig,parseData:!0,i18nProvider:this[j].options.i18nProvider}),k=(0,f.getHostname)(this[j].url,this[j].options.headers);this[j].domainLocale=this[j].options.i18nProvider?this[j].options.i18nProvider.detectDomainLocale(k):(0,d.detectDomainLocale)(null==(b=this[j].options.nextConfig)||null==(a=b.i18n)?void 0:a.domains,k);let l=(null==(c=this[j].domainLocale)?void 0:c.defaultLocale)||(null==(h=this[j].options.nextConfig)||null==(e=h.i18n)?void 0:e.defaultLocale);this[j].url.pathname=i.pathname,this[j].defaultLocale=l,this[j].basePath=i.basePath??"",this[j].buildId=i.buildId,this[j].locale=i.locale??l,this[j].trailingSlash=i.trailingSlash}formatPathname(){return(0,e.formatNextPathnameInfo)({basePath:this[j].basePath,buildId:this[j].buildId,defaultLocale:this[j].options.forceLocale?void 0:this[j].defaultLocale,locale:this[j].locale,pathname:this[j].url.pathname,trailingSlash:this[j].trailingSlash})}formatSearch(){return this[j].url.search}get buildId(){return this[j].buildId}set buildId(a){this[j].buildId=a}get locale(){return this[j].locale??""}set locale(a){var b,c;if(!this[j].locale||!(null==(c=this[j].options.nextConfig)||null==(b=c.i18n)?void 0:b.locales.includes(a)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${a}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[j].locale=a}get defaultLocale(){return this[j].defaultLocale}get domainLocale(){return this[j].domainLocale}get searchParams(){return this[j].url.searchParams}get host(){return this[j].url.host}set host(a){this[j].url.host=a}get hostname(){return this[j].url.hostname}set hostname(a){this[j].url.hostname=a}get port(){return this[j].url.port}set port(a){this[j].url.port=a}get protocol(){return this[j].url.protocol}set protocol(a){this[j].url.protocol=a}get href(){let a=this.formatPathname(),b=this.formatSearch();return`${this.protocol}//${this.host}${a}${b}${this.hash}`}set href(a){this[j].url=i(a),this.analyze()}get origin(){return this[j].url.origin}get pathname(){return this[j].url.pathname}set pathname(a){this[j].url.pathname=a}get hash(){return this[j].url.hash}set hash(a){this[j].url.hash=a}get search(){return this[j].url.search}set search(a){this[j].url.search=a}get password(){return this[j].url.password}set password(a){this[j].url.password=a}get username(){return this[j].url.username}set username(a){this[j].url.username=a}get basePath(){return this[j].basePath}set basePath(a){this[j].basePath=a.startsWith("/")?a:`/${a}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new k(String(this),this[j].options)}}},455783,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={PageSignatureError:function(){return f},RemovedPageError:function(){return g},RemovedUAError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});class f extends Error{constructor({page:a}){super(`The middleware "${a}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class g extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class h extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},145640,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={INTERNALS:function(){return j},NextRequest:function(){return k}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(239013),g=a.r(165493),h=a.r(455783),i=a.r(658031),j=Symbol("internal request");class k extends Request{constructor(a,b={}){const c="string"!=typeof a&&"url"in a?a.url:String(a);(0,g.validateURL)(c),b.body&&"half"!==b.duplex&&(b.duplex="half"),a instanceof Request?super(a,b):super(c,b);const d=new f.NextURL(c,{headers:(0,g.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:b.nextConfig});this[j]={cookies:new i.RequestCookies(this.headers),nextUrl:d,url:d.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[j].cookies}get nextUrl(){return this[j].nextUrl}get page(){throw new h.RemovedPageError}get ua(){throw new h.RemovedUAError}get url(){return this[j].url}}},467142,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isNodeNextRequest:function(){return h},isNodeNextResponse:function(){return i},isWebNextRequest:function(){return f},isWebNextResponse:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a=>!1,g=a=>!1,h=a=>!0,i=a=>!0},575030,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={NextRequestAdapter:function(){return n},ResponseAborted:function(){return k},ResponseAbortedName:function(){return j},createAbortController:function(){return l},signalFromNodeResponse:function(){return m}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(148845),g=a.r(165493),h=a.r(145640),i=a.r(467142),j="ResponseAborted";class k extends Error{constructor(...a){super(...a),this.name=j}}function l(a){let b=new AbortController;return a.once("close",()=>{a.writableFinished||b.abort(new k)}),b}function m(a){let{errored:b,destroyed:c}=a;if(b||c)return AbortSignal.abort(b??new k);let{signal:d}=l(a);return d}class n{static fromBaseNextRequest(a,b){if((0,i.isNodeNextRequest)(a))return n.fromNodeNextRequest(a,b);throw Object.defineProperty(Error("Invariant: Unsupported NextRequest type"),"__NEXT_ERROR_CODE",{value:"E345",enumerable:!1,configurable:!0})}static fromNodeNextRequest(a,b){let c,d=null;if("GET"!==a.method&&"HEAD"!==a.method&&a.body&&(d=a.body),a.url.startsWith("http"))c=new URL(a.url);else{let b=(0,f.getRequestMeta)(a,"initURL");c=b&&b.startsWith("http")?new URL(a.url,b):new URL(a.url,"http://n")}return new h.NextRequest(c,{method:a.method,headers:(0,g.fromNodeOutgoingHttpHeaders)(a.headers),duplex:"half",signal:b,...b.aborted?{}:{body:d}})}static fromWebNextRequest(a){let b=null;return"GET"!==a.method&&"HEAD"!==a.method&&(b=a.body),new h.NextRequest(a.url,{method:a.method,headers:(0,g.fromNodeOutgoingHttpHeaders)(a.headers),duplex:"half",signal:a.request.signal,...a.request.signal.aborted?{}:{body:b}})}}},570043,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getClientComponentLoaderMetrics:function(){return j},wrapClientComponentLoader:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=0,g=0,h=0;function i(a){return"performance"in globalThis?{require:(...b)=>{let c=performance.now();0===f&&(f=c);try{return h+=1,a.__next_app__.require(...b)}finally{g+=performance.now()-c}},loadChunk:(...b)=>{let c=performance.now(),d=a.__next_app__.loadChunk(...b);return d.finally(()=>{g+=performance.now()-c}),d}}:a.__next_app__}function j(a={}){let b=0===f?void 0:{clientComponentLoadStart:f,clientComponentLoadTimes:g,clientComponentLoadCount:h};return a.reset&&(f=0,g=0,h=0),b}},734867,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isAbortError:function(){return k},pipeToNodeResponse:function(){return l}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(575030),g=a.r(119968),h=a.r(82682),i=a.r(322304),j=a.r(570043);function k(a){return(null==a?void 0:a.name)==="AbortError"||(null==a?void 0:a.name)===f.ResponseAbortedName}async function l(a,b,c){try{let{errored:d,destroyed:e}=b;if(d||e)return;let k=(0,f.createAbortController)(b),l=function(a,b){let c=!1,d=new g.DetachedPromise;function e(){d.resolve()}a.on("drain",e),a.once("close",()=>{a.off("drain",e),d.resolve()});let f=new g.DetachedPromise;return a.once("finish",()=>{f.resolve()}),new WritableStream({write:async b=>{if(!c){if(c=!0,"performance"in globalThis&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX){let a=(0,j.getClientComponentLoaderMetrics)();a&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-client-component-loading`,{start:a.clientComponentLoadStart,end:a.clientComponentLoadStart+a.clientComponentLoadTimes})}a.flushHeaders(),(0,h.getTracer)().trace(i.NextNodeServerSpan.startResponse,{spanName:"start response"},()=>void 0)}try{let c=a.write(b);"flush"in a&&"function"==typeof a.flush&&a.flush(),c||(await d.promise,d=new g.DetachedPromise)}catch(b){throw a.end(),Object.defineProperty(Error("failed to write chunk to response",{cause:b}),"__NEXT_ERROR_CODE",{value:"E321",enumerable:!1,configurable:!0})}},abort:b=>{a.writableFinished||a.destroy(b)},close:async()=>{if(b&&await b,!a.writableFinished)return a.end(),f.promise}})}(b,c);await a.pipeTo(l,{signal:k.signal})}catch(a){if(k(a))return;throw Object.defineProperty(Error("failed to pipe response",{cause:a}),"__NEXT_ERROR_CODE",{value:"E180",enumerable:!1,configurable:!0})}}},993157,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return g}});let d=a.r(458723),e=a.r(734867),f=a.r(407351);class g{static #a=this.EMPTY=new g(null,{metadata:{},contentType:null});static fromStatic(a,b){return new g(a,{metadata:{},contentType:b})}constructor(a,{contentType:b,waitUntil:c,metadata:d}){this.response=a,this.contentType=b,this.metadata=d,this.waitUntil=c}assignMetadata(a){Object.assign(this.metadata,a)}get isNull(){return null===this.response}get isDynamic(){return"string"!=typeof this.response}toUnchunkedString(a=!1){if(null===this.response)return"";if("string"!=typeof this.response){if(!a)throw Object.defineProperty(new f.InvariantError("dynamic responses cannot be unchunked. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E732",enumerable:!1,configurable:!0});return(0,d.streamToString)(this.readable)}return this.response}get readable(){return null===this.response?new ReadableStream({start(a){a.close()}}):"string"==typeof this.response?(0,d.streamFromString)(this.response):Buffer.isBuffer(this.response)?(0,d.streamFromBuffer)(this.response):Array.isArray(this.response)?(0,d.chainStreams)(...this.response):this.response}coerce(){return null===this.response?[]:"string"==typeof this.response?[(0,d.streamFromString)(this.response)]:Array.isArray(this.response)?this.response:Buffer.isBuffer(this.response)?[(0,d.streamFromBuffer)(this.response)]:[this.response]}unshift(a){this.response=this.coerce(),this.response.unshift(a)}push(a){this.response=this.coerce(),this.response.push(a)}async pipeTo(a){try{await this.readable.pipeTo(a,{preventClose:!0}),this.waitUntil&&await this.waitUntil,await a.close()}catch(b){if((0,e.isAbortError)(b))return void await a.abort(b);throw b}}async pipeToNodeResponse(a){await (0,e.pipeToNodeResponse)(this.readable,a,this.waitUntil)}}},136043,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"RouteKind",{enumerable:!0,get:function(){return e}});var d,e=((d={}).PAGES="PAGES",d.PAGES_API="PAGES_API",d.APP_PAGE="APP_PAGE",d.APP_ROUTE="APP_ROUTE",d.IMAGE="IMAGE",d)},776559,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={fromResponseCacheEntry:function(){return k},routeKindToIncrementalCacheKind:function(){return m},toResponseCacheEntry:function(){return l}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(491663),h=(d=a.r(993157))&&d.__esModule?d:{default:d},i=a.r(136043),j=a.r(197708);async function k(a){var b,c;return{...a,value:(null==(b=a.value)?void 0:b.kind)===g.CachedRouteKind.PAGES?{kind:g.CachedRouteKind.PAGES,html:await a.value.html.toUnchunkedString(!0),pageData:a.value.pageData,headers:a.value.headers,status:a.value.status}:(null==(c=a.value)?void 0:c.kind)===g.CachedRouteKind.APP_PAGE?{kind:g.CachedRouteKind.APP_PAGE,html:await a.value.html.toUnchunkedString(!0),postponed:a.value.postponed,rscData:a.value.rscData,headers:a.value.headers,status:a.value.status,segmentData:a.value.segmentData}:a.value}}async function l(a){var b,c;return a?{isMiss:a.isMiss,isStale:a.isStale,cacheControl:a.cacheControl,value:(null==(b=a.value)?void 0:b.kind)===g.CachedRouteKind.PAGES?{kind:g.CachedRouteKind.PAGES,html:h.default.fromStatic(a.value.html,j.HTML_CONTENT_TYPE_HEADER),pageData:a.value.pageData,headers:a.value.headers,status:a.value.status}:(null==(c=a.value)?void 0:c.kind)===g.CachedRouteKind.APP_PAGE?{kind:g.CachedRouteKind.APP_PAGE,html:h.default.fromStatic(a.value.html,j.HTML_CONTENT_TYPE_HEADER),rscData:a.value.rscData,headers:a.value.headers,status:a.value.status,postponed:a.value.postponed,segmentData:a.value.segmentData}:a.value}:null}function m(a){switch(a){case i.RouteKind.PAGES:return g.IncrementalCacheKind.PAGES;case i.RouteKind.APP_PAGE:return g.IncrementalCacheKind.APP_PAGE;case i.RouteKind.IMAGE:return g.IncrementalCacheKind.IMAGE;case i.RouteKind.APP_ROUTE:return g.IncrementalCacheKind.APP_ROUTE;case i.RouteKind.PAGES_API:throw Object.defineProperty(Error(`Unexpected route kind ${a}`),"__NEXT_ERROR_CODE",{value:"E64",enumerable:!1,configurable:!0});default:return a}}},423058,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return p}});let f=a.r(237587),g=a.r(362220),h=a.r(160627),i=a.r(732914),j=a.r(776559);function k(a,b){if(!a)return b;let c=parseInt(a,10);return Number.isFinite(c)&&c>0?c:b}d=a.r(491663),e=c,Object.keys(d).forEach(function(a){"default"===a||Object.prototype.hasOwnProperty.call(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:function(){return d[a]}})});let l=k(process.env.NEXT_PRIVATE_RESPONSE_CACHE_TTL,1e4),m=k(process.env.NEXT_PRIVATE_RESPONSE_CACHE_MAX_SIZE,150),n="__ttl_sentinel__";function o(a,b){return`${a}\0${b??n}`}class p{constructor(a,b=m,c=l){this.getBatcher=f.Batcher.create({cacheKeyFn:({key:a,isOnDemandRevalidate:b})=>`${a}-${b?"1":"0"}`,schedulerFn:i.scheduleOnNextTick}),this.revalidateBatcher=f.Batcher.create({schedulerFn:i.scheduleOnNextTick}),this.evictedInvocationIDs=new Set,this.minimal_mode=a,this.maxSize=b,this.ttl=c,this.cache=new g.LRUCache(b,void 0,a=>{let b=function(a){let b=a.lastIndexOf("\0");if(-1===b)return;let c=a.slice(b+1);return c===n?void 0:c}(a);if(b){if(this.evictedInvocationIDs.size>=100){let a=this.evictedInvocationIDs.values().next().value;a&&this.evictedInvocationIDs.delete(a)}this.evictedInvocationIDs.add(b)}})}async get(a,b,c){if(!a)return b({hasResolved:!1,previousCacheEntry:null});if(this.minimal_mode){let b=o(a,c.invocationID),d=this.cache.get(b);if(d){if(void 0!==c.invocationID)return(0,j.toResponseCacheEntry)(d.entry);let a=Date.now();if(d.expiresAt>a)return(0,j.toResponseCacheEntry)(d.entry);this.cache.remove(b)}c.invocationID&&this.evictedInvocationIDs.has(c.invocationID)&&(0,h.warnOnce)(`Response cache entry was evicted for invocation ${c.invocationID}. Consider increasing NEXT_PRIVATE_RESPONSE_CACHE_MAX_SIZE (current: ${this.maxSize}).`)}let{incrementalCache:d,isOnDemandRevalidate:e=!1,isFallback:f=!1,isRoutePPREnabled:g=!1,isPrefetch:i=!1,waitUntil:k,routeKind:l,invocationID:m}=c,n=await this.getBatcher.batch({key:a,isOnDemandRevalidate:e},({resolve:c})=>{let h=this.handleGet(a,b,{incrementalCache:d,isOnDemandRevalidate:e,isFallback:f,isRoutePPREnabled:g,isPrefetch:i,routeKind:l,invocationID:m},c);return k&&k(h),h});return(0,j.toResponseCacheEntry)(n)}async handleGet(a,b,c,d){let e=null,f=!1;try{if((e=this.minimal_mode?null:await c.incrementalCache.get(a,{kind:(0,j.routeKindToIncrementalCacheKind)(c.routeKind),isRoutePPREnabled:c.isRoutePPREnabled,isFallback:c.isFallback}))&&!c.isOnDemandRevalidate&&(d(e),f=!0,!e.isStale||c.isPrefetch))return e;let g=await this.revalidate(a,c.incrementalCache,c.isRoutePPREnabled,c.isFallback,b,e,null!==e&&!c.isOnDemandRevalidate,void 0,c.invocationID);if(!g){if(this.minimal_mode){let b=o(a,c.invocationID);this.cache.remove(b)}return null}return c.isOnDemandRevalidate,g}catch(a){if(f)return console.error(a),null;throw a}}async revalidate(a,b,c,d,e,f,g,h,i){return this.revalidateBatcher.batch(a,()=>{let j=this.handleRevalidate(a,b,c,d,e,f,g,i);return h&&h(j),j})}async handleRevalidate(a,b,c,d,e,f,g,h){try{let i=await e({hasResolved:g,previousCacheEntry:f,isRevalidating:!0});if(!i)return null;let k=await (0,j.fromResponseCacheEntry)({...i,isMiss:!f});if(k.cacheControl)if(this.minimal_mode){let b=o(a,h);this.cache.set(b,{entry:k,expiresAt:Date.now()+this.ttl})}else await b.set(a,k.value,{cacheControl:k.cacheControl,isRoutePPREnabled:c,isFallback:d});return k}catch(e){if(null==f?void 0:f.cacheControl){let e=Math.min(Math.max(f.cacheControl.revalidate||3,3),30),g=void 0===f.cacheControl.expire?void 0:Math.max(e+3,f.cacheControl.expire);await b.set(a,f.value,{cacheControl:{revalidate:e,expire:g},isRoutePPREnabled:c,isFallback:d})}throw e}}}},446694,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={NEXT_PATCH_SYMBOL:function(){return o},createPatchedFetcher:function(){return u},patchFetch:function(){return v},validateRevalidate:function(){return p},validateTags:function(){return q}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(322304),g=a.r(82682),h=a.r(197708),i=a.r(936340),j=a.r(699360),k=a.r(907013),l=a.r(832319),m=a.r(423058),n=a.r(843571);a.r(23193);let o=Symbol.for("next-patch");function p(a,b){try{let c;if(!1===a)c=h.INFINITE_CACHE;else if("number"==typeof a&&!isNaN(a)&&a>-1)c=a;else if(void 0!==a)throw Object.defineProperty(Error(`Invalid revalidate value "${a}" on "${b}", must be a non-negative number or false`),"__NEXT_ERROR_CODE",{value:"E179",enumerable:!1,configurable:!0});return c}catch(a){if(a instanceof Error&&a.message.includes("Invalid revalidate"))throw a;return}}function q(a,b){let c=[],d=[];for(let e=0;e<a.length;e++){let f=a[e];if("string"!=typeof f?d.push({tag:f,reason:"invalid type, must be a string"}):f.length>h.NEXT_CACHE_TAG_MAX_LENGTH?d.push({tag:f,reason:`exceeded max length of ${h.NEXT_CACHE_TAG_MAX_LENGTH}`}):c.push(f),c.length>h.NEXT_CACHE_TAG_MAX_ITEMS){console.warn(`Warning: exceeded max tag count for ${b}, dropped tags:`,a.slice(e).join(", "));break}}if(d.length>0)for(let{tag:a,reason:c}of(console.warn(`Warning: invalid tags passed to ${b}: `),d))console.log(`tag: "${a}" ${c}`);return c}function r(a,b){a.shouldTrackFetchMetrics&&(a.fetchMetrics??=[],a.fetchMetrics.push({...b,end:performance.timeOrigin+performance.now(),idx:a.nextFetchId||0}))}async function s(a,b,c,d,e,f){let g=await a.arrayBuffer(),h={headers:Object.fromEntries(a.headers.entries()),body:Buffer.from(g).toString("base64"),status:a.status,url:a.url};return c&&await d.set(b,{kind:m.CachedRouteKind.FETCH,data:h,revalidate:e},c),await f(),new Response(g,{headers:a.headers,status:a.status,statusText:a.statusText})}async function t(a,b,c,d,e,f,g,h,i){let[j,k]=(0,n.cloneResponse)(b),l=j.arrayBuffer().then(async a=>{let b=Buffer.from(a),h={headers:Object.fromEntries(j.headers.entries()),body:b.toString("base64"),status:j.status,url:j.url};null==f||f.set(c,h),d&&await e.set(c,{kind:m.CachedRouteKind.FETCH,data:h,revalidate:g},d)}).catch(a=>console.warn("Failed to set fetch cache",h,a)).finally(i),o=`cache-set-${c}`,p=a.pendingRevalidates??={},q=Promise.resolve();return o in p&&(q=p[o]),p[o]=q.then(()=>l).finally(()=>{(null==p?void 0:p[o])&&delete p[o]}),k}function u(a,{workAsyncStorage:b,workUnitAsyncStorage:c}){let d=async function(d,e){var k,o;let u;try{(u=new URL(d instanceof Request?d.url:d)).username="",u.password=""}catch{u=void 0}let v=(null==u?void 0:u.href)??"",x=(null==e||null==(k=e.method)?void 0:k.toUpperCase())||"GET",y=(null==e||null==(o=e.next)?void 0:o.internal)===!0,z="1"===process.env.NEXT_OTEL_FETCH_DISABLED,A=y?void 0:performance.timeOrigin+performance.now(),B=b.getStore(),C=c.getStore(),D=C?(0,l.getCacheSignal)(C):null;D&&D.beginRead();let E=(0,g.getTracer)().trace(y?f.NextNodeServerSpan.internalFetch:f.AppRenderSpan.fetch,{hideSpan:z,kind:g.SpanKind.CLIENT,spanName:["fetch",x,v].filter(Boolean).join(" "),attributes:{"http.url":v,"http.method":x,"net.peer.name":null==u?void 0:u.hostname,"net.peer.port":(null==u?void 0:u.port)||void 0}},async()=>{var b;let c,f,g,k,l,o;if(y||!B||B.isDraftMode)return a(d,e);let u=d&&"object"==typeof d&&"string"==typeof d.method,x=a=>(null==e?void 0:e[a])||(u?d[a]:null),z=a=>{var b,c,f;return void 0!==(null==e||null==(b=e.next)?void 0:b[a])?null==e||null==(c=e.next)?void 0:c[a]:u?null==(f=d.next)?void 0:f[a]:void 0},E=z("revalidate"),F=E,G=q(z("tags")||[],`fetch ${d.toString()}`);if(C)switch(C.type){case"prerender":case"prerender-runtime":case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"cache":case"private-cache":c=C}if(c&&Array.isArray(G)){let a=c.tags??(c.tags=[]);for(let b of G)a.includes(b)||a.push(b)}let H=null==C?void 0:C.implicitTags,I=B.fetchCache;C&&"unstable-cache"===C.type&&(I="force-no-store");let J=!!B.isUnstableNoStore,K=x("cache"),L="";"string"==typeof K&&void 0!==F&&("force-cache"===K&&0===F||"no-store"===K&&(F>0||!1===F))&&(f=`Specified "cache: ${K}" and "revalidate: ${F}", only one should be specified.`,K=void 0,F=void 0);let M="no-cache"===K||"no-store"===K||"force-no-store"===I||"only-no-store"===I,N=!I&&!K&&!F&&B.forceDynamic;"force-cache"===K&&void 0===F?F=!1:(M||N)&&(F=0),("no-cache"===K||"no-store"===K)&&(L=`cache: ${K}`),o=p(F,B.route);let O=x("headers"),P="function"==typeof(null==O?void 0:O.get)?O:new Headers(O||{}),Q=P.get("authorization")||P.get("cookie"),R=!["get","head"].includes((null==(b=x("method"))?void 0:b.toLowerCase())||"get"),S=void 0==I&&(void 0==K||"default"===K)&&void 0==F,T=!!((Q||R)&&(null==c?void 0:c.revalidate)===0),U=!1;if(!T&&S&&(B.isBuildTimePrerendering?U=!0:T=!0),S&&void 0!==C)switch(C.type){case"prerender":case"prerender-runtime":case"prerender-client":return D&&(D.endRead(),D=null),(0,j.makeHangingPromise)(C.renderSignal,B.route,"fetch()")}switch(I){case"force-no-store":L="fetchCache = force-no-store";break;case"only-no-store":if("force-cache"===K||void 0!==o&&o>0)throw Object.defineProperty(Error(`cache: 'force-cache' used on fetch for ${v} with 'export const fetchCache = 'only-no-store'`),"__NEXT_ERROR_CODE",{value:"E448",enumerable:!1,configurable:!0});L="fetchCache = only-no-store";break;case"only-cache":if("no-store"===K)throw Object.defineProperty(Error(`cache: 'no-store' used on fetch for ${v} with 'export const fetchCache = 'only-cache'`),"__NEXT_ERROR_CODE",{value:"E521",enumerable:!1,configurable:!0});break;case"force-cache":(void 0===F||0===F)&&(L="fetchCache = force-cache",o=h.INFINITE_CACHE)}if(void 0===o?"default-cache"!==I||J?"default-no-store"===I?(o=0,L="fetchCache = default-no-store"):J?(o=0,L="noStore call"):T?(o=0,L="auto no cache"):(L="auto cache",o=c?c.revalidate:h.INFINITE_CACHE):(o=h.INFINITE_CACHE,L="fetchCache = default-cache"):L||(L=`revalidate: ${o}`),!(B.forceStatic&&0===o)&&!T&&c&&o<c.revalidate){if(0===o){if(C)switch(C.type){case"prerender":case"prerender-client":case"prerender-runtime":return D&&(D.endRead(),D=null),(0,j.makeHangingPromise)(C.renderSignal,B.route,"fetch()")}(0,i.markCurrentScopeAsDynamic)(B,C,`revalidate: 0 fetch ${d} ${B.route}`)}c&&E===o&&(c.revalidate=o)}let V="number"==typeof o&&o>0,{incrementalCache:W}=B,X=!1;if(C)switch(C.type){case"request":case"cache":case"private-cache":X=C.isHmrRefresh??!1,k=C.serverComponentsHmrCache}if(W&&(V||k))try{g=await W.generateCacheKey(v,u?d:e)}catch(a){console.error("Failed to generate cache key for",d)}let Y=B.nextFetchId??1;B.nextFetchId=Y+1;let Z=()=>{},$=async(b,c)=>{let i=["cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","window","duplex",...b?[]:["signal"]];if(u){let a=d,b={body:a._ogBody||a.body};for(let c of i)b[c]=a[c];d=new Request(a.url,b)}else if(e){let{_ogBody:a,body:c,signal:d,...f}=e;e={...f,body:a||c,signal:b?void 0:d}}let j={...e,next:{...null==e?void 0:e.next,fetchType:"origin",fetchIdx:Y}};return a(d,j).then(async a=>{if(!b&&A&&r(B,{start:A,url:v,cacheReason:c||L,cacheStatus:0===o||c?"skip":"miss",cacheWarning:f,status:a.status,method:j.method||"GET"}),200===a.status&&W&&g&&(V||k)){let b=o>=h.INFINITE_CACHE?h.CACHE_ONE_YEAR:o,c=V?{fetchCache:!0,fetchUrl:v,fetchIdx:Y,tags:G,isImplicitBuildTimeCache:U}:void 0;switch(null==C?void 0:C.type){case"prerender":case"prerender-client":case"prerender-runtime":return s(a,g,c,W,b,Z);case"request":case"prerender-ppr":case"prerender-legacy":case"cache":case"private-cache":case"unstable-cache":case void 0:return t(B,a,g,c,W,k,b,d,Z)}}return await Z(),a}).catch(a=>{throw Z(),a})},_=!1,aa=!1;if(g&&W){let a;if(X&&k&&(a=k.get(g),aa=!0),V&&!a){Z=await W.lock(g);let b=B.isOnDemandRevalidate?null:await W.get(g,{kind:m.IncrementalCacheKind.FETCH,revalidate:o,fetchUrl:v,fetchIdx:Y,tags:G,softTags:null==H?void 0:H.tags});if(S&&C)switch(C.type){case"prerender":case"prerender-client":case"prerender-runtime":await (w||(w=new Promise(a=>{setTimeout(()=>{w=null,a()},0)})),w)}if(b?await Z():l="cache-control: no-cache (hard refresh)",(null==b?void 0:b.value)&&b.value.kind===m.CachedRouteKind.FETCH)if(B.isStaticGeneration&&b.isStale)_=!0;else{if(b.isStale&&(B.pendingRevalidates??={},!B.pendingRevalidates[g])){let a=$(!0).then(async a=>({body:await a.arrayBuffer(),headers:a.headers,status:a.status,statusText:a.statusText})).finally(()=>{B.pendingRevalidates??={},delete B.pendingRevalidates[g||""]});a.catch(console.error),B.pendingRevalidates[g]=a}a=b.value.data}}if(a){A&&r(B,{start:A,url:v,cacheReason:L,cacheStatus:aa?"hmr":"hit",cacheWarning:f,status:a.status||200,method:(null==e?void 0:e.method)||"GET"});let b=new Response(Buffer.from(a.body,"base64"),{headers:a.headers,status:a.status});return Object.defineProperty(b,"url",{value:a.url}),b}}if(B.isStaticGeneration&&e&&"object"==typeof e){let{cache:a}=e;if("no-store"===a){if(C)switch(C.type){case"prerender":case"prerender-client":case"prerender-runtime":return D&&(D.endRead(),D=null),(0,j.makeHangingPromise)(C.renderSignal,B.route,"fetch()")}(0,i.markCurrentScopeAsDynamic)(B,C,`no-store fetch ${d} ${B.route}`)}let b="next"in e,{next:f={}}=e;if("number"==typeof f.revalidate&&c&&f.revalidate<c.revalidate){if(0===f.revalidate){if(C)switch(C.type){case"prerender":case"prerender-client":case"prerender-runtime":return(0,j.makeHangingPromise)(C.renderSignal,B.route,"fetch()")}(0,i.markCurrentScopeAsDynamic)(B,C,`revalidate: 0 fetch ${d} ${B.route}`)}B.forceStatic&&0===f.revalidate||(c.revalidate=f.revalidate)}b&&delete e.next}if(!g||!_)return $(!1,l);{let a=g;B.pendingRevalidates??={};let b=B.pendingRevalidates[a];if(b){let a=await b;return new Response(a.body,{headers:a.headers,status:a.status,statusText:a.statusText})}let c=$(!0,l).then(n.cloneResponse);return(b=c.then(async a=>{let b=a[0];return{body:await b.arrayBuffer(),headers:b.headers,status:b.status,statusText:b.statusText}}).finally(()=>{var b;(null==(b=B.pendingRevalidates)?void 0:b[a])&&delete B.pendingRevalidates[a]})).catch(()=>{}),B.pendingRevalidates[a]=b,c.then(a=>a[1])}});if(D)try{return await E}finally{D&&D.endRead()}return E};return d.__nextPatched=!0,d.__nextGetStaticStore=()=>b,d._nextOriginalFetch=a,globalThis[o]=!0,Object.defineProperty(d,"name",{value:"fetch",writable:!1}),d}function v(a){if(!0===globalThis[o])return;let b=(0,k.createDedupeFetch)(globalThis.fetch);globalThis.fetch=u(b,a)}let w=null},885246,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_cache",{enumerable:!0,get:function(){return k}});let d=a.r(197708),e=a.r(446694),f=a.r(556704),g=a.r(832319),h=a.r(423058),i=0;async function j(a,b,c,e,f,g,i){await b.set(c,{kind:h.CachedRouteKind.FETCH,data:{headers:{},body:JSON.stringify(a),status:200,url:""},revalidate:"number"!=typeof f?d.CACHE_ONE_YEAR:f},{fetchCache:!0,tags:e,fetchIdx:g,fetchUrl:i})}function k(a,b,c={}){if(0===c.revalidate)throw Object.defineProperty(Error(`Invariant revalidate: 0 can not be passed to unstable_cache(), must be "false" or "> 0" ${a.toString()}`),"__NEXT_ERROR_CODE",{value:"E57",enumerable:!1,configurable:!0});let d=c.tags?(0,e.validateTags)(c.tags,`unstable_cache ${a.toString()}`):[];(0,e.validateRevalidate)(c.revalidate,`unstable_cache ${a.name||a.toString()}`);let l=`${a.toString()}-${Array.isArray(b)&&b.join(",")}`;return async(...b)=>{let e=f.workAsyncStorage.getStore(),k=g.workUnitAsyncStorage.getStore(),m=(null==e?void 0:e.incrementalCache)||globalThis.__incrementalCache;if(!m)throw Object.defineProperty(Error(`Invariant: incrementalCache missing in unstable_cache ${a.toString()}`),"__NEXT_ERROR_CODE",{value:"E469",enumerable:!1,configurable:!0});let n=k?(0,g.getCacheSignal)(k):null;n&&n.beginRead();try{let f=e&&k?function(a,b){switch(b.type){case"request":let c=b.url.pathname,d=new URLSearchParams(b.url.search),e=[...d.keys()].sort((a,b)=>a.localeCompare(b)).map(a=>`${a}=${d.get(a)}`).join("&");return`${c}${e.length?"?":""}${e}`;case"prerender":case"prerender-client":case"prerender-runtime":case"prerender-ppr":case"prerender-legacy":case"cache":case"private-cache":case"unstable-cache":return a.route;default:return b}}(e,k):"",n=`${l}-${JSON.stringify(b)}`,o=await m.generateCacheKey(n),p=`unstable_cache ${f} ${a.name?` ${a.name}`:o}`,q=(e?e.nextFetchId:i)??1,r=null==k?void 0:k.implicitTags,s={type:"unstable-cache",phase:"render",implicitTags:r,draftMode:k&&e&&(0,g.getDraftModeProviderForCacheScope)(e,k)};if(e){e.nextFetchId=q+1;let f=!1;if(k)switch(k.type){case"cache":case"private-cache":case"prerender":case"prerender-runtime":case"prerender-ppr":case"prerender-legacy":"number"==typeof c.revalidate&&(k.revalidate<c.revalidate||(k.revalidate=c.revalidate));let i=k.tags;if(null===i)k.tags=d.slice();else for(let a of d)i.includes(a)||i.push(a);break;case"unstable-cache":f=!0}if(!f&&"force-no-store"!==e.fetchCache&&!e.isOnDemandRevalidate&&!m.isOnDemandRevalidate&&!e.isDraftMode){let f=await m.get(o,{kind:h.IncrementalCacheKind.FETCH,revalidate:c.revalidate,tags:d,softTags:null==r?void 0:r.tags,fetchIdx:q,fetchUrl:p});if(f&&f.value)if(f.value.kind!==h.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${n}`);else{let h=void 0!==f.value.data.body?JSON.parse(f.value.data.body):void 0;if(f.isStale){if(e.pendingRevalidates||(e.pendingRevalidates={}),!e.pendingRevalidates[n]){let f=g.workUnitAsyncStorage.run(s,a,...b).then(async a=>(await j(a,m,o,d,c.revalidate,q,p),a)).catch(a=>(console.error(`revalidating cache with key: ${n}`,a),h));e.isStaticGeneration&&f.catch(()=>{}),e.pendingRevalidates[n]=f}if(e.isStaticGeneration)return e.pendingRevalidates[n]}return h}}let l=await g.workUnitAsyncStorage.run(s,a,...b);return e.isDraftMode||(e.pendingRevalidates||(e.pendingRevalidates={}),e.pendingRevalidates[n]=j(l,m,o,d,c.revalidate,q,p)),l}{if(i+=1,!m.isOnDemandRevalidate){let a=await m.get(o,{kind:h.IncrementalCacheKind.FETCH,revalidate:c.revalidate,tags:d,fetchIdx:q,fetchUrl:p,softTags:null==r?void 0:r.tags});if(a&&a.value){if(a.value.kind!==h.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${n}`);else if(!a.isStale)return void 0!==a.value.data.body?JSON.parse(a.value.data.body):void 0}}let e=await g.workUnitAsyncStorage.run(s,a,...b);return await j(e,m,o,d,c.revalidate,q,p),e}}finally{n&&n.endRead()}}}},968612,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getSortedRouteObjects:function(){return h},getSortedRoutes:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});class f{insert(a){this._insert(a.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(a="/"){let b=[...this.children.keys()].sort();null!==this.slugName&&b.splice(b.indexOf("[]"),1),null!==this.restSlugName&&b.splice(b.indexOf("[...]"),1),null!==this.optionalRestSlugName&&b.splice(b.indexOf("[[...]]"),1);let c=b.map(b=>this.children.get(b)._smoosh(`${a}${b}/`)).reduce((a,b)=>[...a,...b],[]);if(null!==this.slugName&&c.push(...this.children.get("[]")._smoosh(`${a}[${this.slugName}]/`)),!this.placeholder){let b="/"===a?"/":a.slice(0,-1);if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error(`You cannot define a route with the same specificity as a optional catch-all route ("${b}" and "${b}[[...${this.optionalRestSlugName}]]").`),"__NEXT_ERROR_CODE",{value:"E458",enumerable:!1,configurable:!0});c.unshift(b)}return null!==this.restSlugName&&c.push(...this.children.get("[...]")._smoosh(`${a}[...${this.restSlugName}]/`)),null!==this.optionalRestSlugName&&c.push(...this.children.get("[[...]]")._smoosh(`${a}[[...${this.optionalRestSlugName}]]/`)),c}_insert(a,b,c){if(0===a.length){this.placeholder=!1;return}if(c)throw Object.defineProperty(Error("Catch-all must be the last part of the URL."),"__NEXT_ERROR_CODE",{value:"E392",enumerable:!1,configurable:!0});let d=a[0];if(d.startsWith("[")&&d.endsWith("]")){let f=d.slice(1,-1),g=!1;if(f.startsWith("[")&&f.endsWith("]")&&(f=f.slice(1,-1),g=!0),f.startsWith(""))throw Object.defineProperty(Error(`Detected a three-dot character ('') at ('${f}'). Did you mean ('...')?`),"__NEXT_ERROR_CODE",{value:"E147",enumerable:!1,configurable:!0});if(f.startsWith("...")&&(f=f.substring(3),c=!0),f.startsWith("[")||f.endsWith("]"))throw Object.defineProperty(Error(`Segment names may not start or end with extra brackets ('${f}').`),"__NEXT_ERROR_CODE",{value:"E421",enumerable:!1,configurable:!0});if(f.startsWith("."))throw Object.defineProperty(Error(`Segment names may not start with erroneous periods ('${f}').`),"__NEXT_ERROR_CODE",{value:"E288",enumerable:!1,configurable:!0});function e(a,c){if(null!==a&&a!==c)throw Object.defineProperty(Error(`You cannot use different slug names for the same dynamic path ('${a}' !== '${c}').`),"__NEXT_ERROR_CODE",{value:"E337",enumerable:!1,configurable:!0});b.forEach(a=>{if(a===c)throw Object.defineProperty(Error(`You cannot have the same slug name "${c}" repeat within a single dynamic path`),"__NEXT_ERROR_CODE",{value:"E247",enumerable:!1,configurable:!0});if(a.replace(/\W/g,"")===d.replace(/\W/g,""))throw Object.defineProperty(Error(`You cannot have the slug names "${a}" and "${c}" differ only by non-word symbols within a single dynamic path`),"__NEXT_ERROR_CODE",{value:"E499",enumerable:!1,configurable:!0})}),b.push(c)}if(c)if(g){if(null!=this.restSlugName)throw Object.defineProperty(Error(`You cannot use both an required and optional catch-all route at the same level ("[...${this.restSlugName}]" and "${a[0]}" ).`),"__NEXT_ERROR_CODE",{value:"E299",enumerable:!1,configurable:!0});e(this.optionalRestSlugName,f),this.optionalRestSlugName=f,d="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error(`You cannot use both an optional and required catch-all route at the same level ("[[...${this.optionalRestSlugName}]]" and "${a[0]}").`),"__NEXT_ERROR_CODE",{value:"E300",enumerable:!1,configurable:!0});e(this.restSlugName,f),this.restSlugName=f,d="[...]"}else{if(g)throw Object.defineProperty(Error(`Optional route parameters are not yet supported ("${a[0]}").`),"__NEXT_ERROR_CODE",{value:"E435",enumerable:!1,configurable:!0});e(this.slugName,f),this.slugName=f,d="[]"}}this.children.has(d)||this.children.set(d,new f),this.children.get(d)._insert(a.slice(1),b,c)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function g(a){let b=new f;return a.forEach(a=>b.insert(a)),b.smoosh()}function h(a,b){let c={},d=[];for(let e=0;e<a.length;e++){let f=b(a[e]);c[f]=e,d[e]=f}return g(d).map(b=>a[c[b]])}},488443,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isDynamicRoute",{enumerable:!0,get:function(){return g}});let d=a.r(762912),e=/\/[^/]*\[[^/]+\][^/]*(?=\/|$)/,f=/\/\[[^/]+\](?=\/|$)/;function g(a,b=!0){return((0,d.isInterceptionRouteAppPath)(a)&&(a=(0,d.extractInterceptionRouteInformation)(a).interceptedRoute),b)?f.test(a):e.test(a)}},900111,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getSortedRouteObjects:function(){return f.getSortedRouteObjects},getSortedRoutes:function(){return f.getSortedRoutes},isDynamicRoute:function(){return g.isDynamicRoute}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(968612),g=a.r(488443)},553611,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={refresh:function(){return p},revalidatePath:function(){return q},revalidateTag:function(){return n},updateTag:function(){return o}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(936340),g=a.r(900111),h=a.r(197708),i=a.r(556704),j=a.r(832319),k=a.r(760557),l=a.r(407351),m=a.r(801939);function n(a,b){return b||console.warn('"revalidateTag" without the second argument is now deprecated, add second argument of "max" or use "updateTag". See more info here: https://nextjs.org/docs/messages/revalidate-tag-single-arg'),r([a],`revalidateTag ${a}`,b)}function o(a){let b=i.workAsyncStorage.getStore();if(!b||b.page.endsWith("/route"))throw Object.defineProperty(Error("updateTag can only be called from within a Server Action. To invalidate cache tags in Route Handlers or other contexts, use revalidateTag instead. See more info here: https://nextjs.org/docs/app/api-reference/functions/updateTag"),"__NEXT_ERROR_CODE",{value:"E872",enumerable:!1,configurable:!0});return r([a],`updateTag ${a}`,void 0)}function p(){let a=i.workAsyncStorage.getStore(),b=j.workUnitAsyncStorage.getStore();if(!a||a.page.endsWith("/route")||(null==b?void 0:b.phase)!=="action")throw Object.defineProperty(Error("refresh can only be called from within a Server Action. See more info here: https://nextjs.org/docs/app/api-reference/functions/refresh"),"__NEXT_ERROR_CODE",{value:"E870",enumerable:!1,configurable:!0});a&&(a.pathWasRevalidated=m.ActionDidRevalidateDynamicOnly)}function q(a,b){if(a.length>h.NEXT_CACHE_SOFT_TAG_MAX_LENGTH)return void console.warn(`Warning: revalidatePath received "${a}" which exceeded max length of ${h.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`);let c=`${h.NEXT_CACHE_IMPLICIT_TAG_ID}${a||"/"}`;b?c+=`${c.endsWith("/")?"":"/"}${b}`:(0,g.isDynamicRoute)(a)&&console.warn(`Warning: a dynamic page path "${a}" was passed to "revalidatePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`);let d=[c];return c===`${h.NEXT_CACHE_IMPLICIT_TAG_ID}/`?d.push(`${h.NEXT_CACHE_IMPLICIT_TAG_ID}/index`):c===`${h.NEXT_CACHE_IMPLICIT_TAG_ID}/index`&&d.push(`${h.NEXT_CACHE_IMPLICIT_TAG_ID}/`),r(d,`revalidatePath ${a}`)}function r(a,b,c){var d;let e=i.workAsyncStorage.getStore();if(!e||!e.incrementalCache)throw Object.defineProperty(Error(`Invariant: static generation store missing in ${b}`),"__NEXT_ERROR_CODE",{value:"E263",enumerable:!1,configurable:!0});let g=j.workUnitAsyncStorage.getStore();if(g){if("render"===g.phase)throw Object.defineProperty(Error(`Route ${e.route} used "${b}" during render which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E7",enumerable:!1,configurable:!0});switch(g.type){case"cache":case"private-cache":throw Object.defineProperty(Error(`Route ${e.route} used "${b}" inside a "use cache" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E181",enumerable:!1,configurable:!0});case"unstable-cache":throw Object.defineProperty(Error(`Route ${e.route} used "${b}" inside a function cached with "unstable_cache(...)" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E306",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":let a=Object.defineProperty(Error(`Route ${e.route} used ${b} without first calling \`await connection()\`.`),"__NEXT_ERROR_CODE",{value:"E406",enumerable:!1,configurable:!0});return(0,f.abortAndThrowOnSynchronousRequestDataAccess)(e.route,b,a,g);case"prerender-client":throw Object.defineProperty(new l.InvariantError(`${b} must not be used within a client component. Next.js should be preventing ${b} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,f.postponeWithTracking)(e.route,b,g.dynamicTracking);case"prerender-legacy":g.revalidate=0;let c=Object.defineProperty(new k.DynamicServerError(`Route ${e.route} couldn't be rendered statically because it used \`${b}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw e.dynamicUsageDescription=b,e.dynamicUsageStack=c.stack,c}}for(let b of(e.pendingRevalidatedTags||(e.pendingRevalidatedTags=[]),a))-1===e.pendingRevalidatedTags.findIndex(a=>a.tag===b&&("string"==typeof a.profile&&"string"==typeof c?a.profile===c:"object"==typeof a.profile&&"object"==typeof c?JSON.stringify(a.profile)===JSON.stringify(c):a.profile===c))&&e.pendingRevalidatedTags.push({tag:b,profile:c});let h=c&&"object"==typeof c?c:c&&"string"==typeof c&&(null==e||null==(d=e.cacheLifeProfiles)?void 0:d[c])?e.cacheLifeProfiles[c]:void 0;c&&(null==h?void 0:h.expire)!==0||(e.pathWasRevalidated=m.ActionDidRevalidateStaticAndDynamic)}},212323,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_noStore",{enumerable:!0,get:function(){return g}});let d=a.r(556704),e=a.r(832319),f=a.r(936340);function g(){let a=d.workAsyncStorage.getStore(),b=e.workUnitAsyncStorage.getStore();if(a){if(!a.forceStatic){if(a.isUnstableNoStore=!0,b)switch(b.type){case"prerender":case"prerender-client":case"prerender-runtime":return}(0,f.markCurrentScopeAsDynamic)(a,b,"unstable_noStore()")}}}},910881,(a,b,c)=>{"use strict";function d(a){throw Object.defineProperty(Error("`cacheLife()` is only available with the `cacheComponents` config."),"__NEXT_ERROR_CODE",{value:"E887",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"cacheLife",{enumerable:!0,get:function(){return d}}),a.r(407351),a.r(556704),a.r(832319)},389761,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`cacheTag()` is only available with the `cacheComponents` config."),"__NEXT_ERROR_CODE",{value:"E886",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"cacheTag",{enumerable:!0,get:function(){return d}}),a.r(832319),a.r(446694)},26215,(a,b,c)=>{let d={unstable_cache:a.r(885246).unstable_cache,updateTag:a.r(553611).updateTag,revalidateTag:a.r(553611).revalidateTag,revalidatePath:a.r(553611).revalidatePath,refresh:a.r(553611).refresh,unstable_noStore:a.r(212323).unstable_noStore,cacheLife:a.r(910881).cacheLife,cacheTag:a.r(389761).cacheTag},e=!1,f=!1;d.unstable_cacheLife=function(){return e||(e=!0,console.error(Error("`unstable_cacheLife` was recently stabilized and should be imported as `cacheLife`. The `unstable` prefixed form will be removed in a future version of Next.js."))),d.cacheLife.apply(this,arguments)},d.unstable_cacheTag=function(){return f||(f=!0,console.error(Error("`unstable_cacheTag` was recently stabilized and should be imported as `cacheTag`. The `unstable` prefixed form will be removed in a future version of Next.js."))),d.cacheTag.apply(this,arguments)},b.exports=d,c.unstable_cache=d.unstable_cache,c.revalidatePath=d.revalidatePath,c.revalidateTag=d.revalidateTag,c.updateTag=d.updateTag,c.unstable_noStore=d.unstable_noStore,c.cacheLife=d.cacheLife,c.unstable_cacheLife=d.unstable_cacheLife,c.cacheTag=d.cacheTag,c.unstable_cacheTag=d.unstable_cacheTag,c.refresh=d.refresh},295245,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},186666,a=>a.a(async(b,c)=>{try{var d=a.i(235807),e=a.i(370943);a.i(195984);var f=a.i(588136),g=a.i(466064),h=a.i(43692),i=a.i(26215),j=a.i(295245),k=b([e]);async function l(a){try{return(await e.drizzleDb.select().from(f.libraryTask).where((0,g.eq)(f.libraryTask.userId,a)).orderBy((0,h.desc)(f.libraryTask.createdAt))).map(a=>({...a,correctAnswer:a.correctAnswer??void 0,explanation:a.explanation??void 0,lastUsedAt:a.lastUsedAt??void 0,type:a.type,topics:a.topics??[],options:a.options}))}catch(a){return console.error("Failed to get library tasks:",a),[]}}async function m(a,b){try{let c=crypto.randomUUID();await e.drizzleDb.insert(f.libraryTask).values({id:c,userId:a,question:b.question,type:b.type,options:b.options??[],correctAnswer:b.correctAnswer??null,explanation:b.explanation??null,difficulty:b.difficulty,subject:b.subject,topics:b.topics,isFavorite:!1,usageCount:0});let[d]=await e.drizzleDb.select().from(f.libraryTask).where((0,g.eq)(f.libraryTask.id,c));return(0,i.revalidatePath)("/tutor/library"),d?{...d,correctAnswer:d.correctAnswer??void 0,explanation:d.explanation??void 0,lastUsedAt:d.lastUsedAt??void 0,type:d.type,topics:d.topics??[],options:d.options}:null}catch(a){return console.error("Failed to save library task:",a),null}}async function n(a,b){try{let[c]=await e.drizzleDb.select().from(f.libraryTask).where((0,g.eq)(f.libraryTask.id,a)).limit(1);if(!c||c.userId!==b)return!1;return await e.drizzleDb.update(f.libraryTask).set({isFavorite:!c.isFavorite}).where((0,g.eq)(f.libraryTask.id,a)),(0,i.revalidatePath)("/tutor/library"),!0}catch(a){return console.error("Failed to toggle favorite:",a),!1}}async function o(a,b){try{let[c]=await e.drizzleDb.select().from(f.libraryTask).where((0,g.eq)(f.libraryTask.id,a)).limit(1);if(!c||c.userId!==b)return!1;return await e.drizzleDb.delete(f.libraryTask).where((0,g.eq)(f.libraryTask.id,a)),(0,i.revalidatePath)("/tutor/library"),!0}catch(a){return console.error("Failed to delete library task:",a),!1}}async function p(a){try{let[b]=await e.drizzleDb.select().from(f.libraryTask).where((0,g.eq)(f.libraryTask.id,a)).limit(1);if(!b)return!1;return await e.drizzleDb.update(f.libraryTask).set({usageCount:b.usageCount+1,lastUsedAt:new Date}).where((0,g.eq)(f.libraryTask.id,a)),!0}catch(a){return console.error("Failed to increment task usage:",a),!1}}async function q(a){try{return console.log("Migrating legacy tasks for user:",a),0}catch(a){return console.error("Failed to migrate legacy tasks:",a),0}}[e]=k.then?(await k)():k,(0,j.ensureServerEntryExports)([l,m,n,o,p,q]),(0,d.registerServerReference)(l,"40e67820ea98c4ee0b06d4c8e85136925faf193bef",null),(0,d.registerServerReference)(m,"6075ea928940b65dcbc7525ac536b6af51f44c2ca9",null),(0,d.registerServerReference)(n,"6017248195ec7c3ab658cb291969eb1d7204b818d2",null),(0,d.registerServerReference)(o,"605cbe0e97c422211686962a28abdc3076feaf4335",null),(0,d.registerServerReference)(p,"40f91213c9db900c19d33be7a667f471dacdd61736",null),(0,d.registerServerReference)(q,"40ede5821f438551424a9756ea6ea7bcdc6369fd31",null),a.s(["deleteLibraryTask",()=>o,"incrementTaskUsage",()=>p,"saveLibraryTask",()=>m,"toggleFavoriteTask",()=>n]),c()}catch(a){c(a)}},!1),776192,a=>a.a(async(b,c)=>{try{var d=a.i(186666),e=b([d]);[d]=e.then?(await e)():e,a.s([]),c()}catch(a){c(a)}},!1),314969,a=>a.a(async(b,c)=>{try{var d=a.i(776192),e=a.i(186666),f=b([d,e]);[d,e]=f.then?(await f)():f,a.s(["40f91213c9db900c19d33be7a667f471dacdd61736",()=>e.incrementTaskUsage,"6017248195ec7c3ab658cb291969eb1d7204b818d2",()=>e.toggleFavoriteTask,"605cbe0e97c422211686962a28abdc3076feaf4335",()=>e.deleteLibraryTask,"6075ea928940b65dcbc7525ac536b6af51f44c2ca9",()=>e.saveLibraryTask]),c()}catch(a){c(a)}},!1)];

//# debugId=0c8c1fbf-9552-5008-52c3-28f208ce1e61
//# sourceMappingURL=ADK_WORKSPACE_TutorMekimi_tutorme-app_2b7be022._.js.map