;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="1b352d14-a8b4-5175-f3dd-ad489d6d3b68")}catch(e){}}();
module.exports=[620177,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(454069),e=a.i(52028),f=a.i(113098),g=a.i(88684),h=a.i(981354),i=a.i(333340),j=a.i(185407),k=a.i(101259),l=a.i(868606),m=a.i(846438),n=a.i(815350),o=a.i(414030),p=a.i(342621),q=a.i(60390),r=a.i(405275),s=a.i(616576),t=a.i(769034),u=a.i(75411),v=a.i(28286),w=a.i(209347),x=a.i(226886),y=a.i(11894),z=a.i(290385),A=a.i(591008),B=a.i(633600),C=a.i(808967),D=a.i(327002),E=a.i(55799),F=a.i(892094),G=a.i(458563),H=a.i(884660),I=a.i(50730),J=a.i(560467),K=a.i(901138),L=a.i(318095),M=a.i(361749),N=a.i(849639),O=a.i(618349);let P=(0,a.i(293357).default)("dumbbell",[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]]);var Q=a.i(494176),R=a.i(855765),S=a.i(859228),T=a.i(295572),U=a.i(269041),V=a.i(428091),W=a.i(296192),X=a.i(369125),Y=a.i(944215),Z=a.i(206209);let $=(0,U.default)(async()=>{},{loadableGenerated:{modules:[609341]},ssr:!1}),_=[{key:"socratic",name:"Socratic",description:"Learn by answering questions",icon:(0,b.jsx)(L.HelpCircle,{className:"w-4 h-4"})},{key:"direct",name:"Explain",description:"Clear explanations",icon:(0,b.jsx)(p.BookOpen,{className:"w-4 h-4"})},{key:"lesson",name:"Full Lesson",description:"Structured learning",icon:(0,b.jsx)(w.GraduationCap,{className:"w-4 h-4"})},{key:"practice",name:"Practice",description:"Problem solving",icon:(0,b.jsx)(P,{className:"w-4 h-4"})}],aa={english:{name:"English",icon:(0,b.jsx)(u.Languages,{className:"w-6 h-6"}),color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",greeting:"Hello! I'm your English tutor. I can help with grammar, writing, literature analysis, and more. What would you like to work on today?",isLanguage:!0,preferences:{teachingAge:15,voiceGender:"female",voiceAccent:"US"},topics:[{id:"essay_basics",name:"Essay Basics",description:"Introduction to essay structure",progress:0,status:"available",subtopics:["Thesis Statements","Introductions","Conclusions"],icon:"ðŸ“"},{id:"grammar_fundamentals",name:"Grammar Fundamentals",description:"Parts of speech and sentence structure",progress:0,status:"available",subtopics:["Nouns & Verbs","Adjectives & Adverbs","Sentence Types"],icon:"âœ“"},{id:"punctuation",name:"Punctuation Mastery",description:"Commas, periods, and more",progress:0,status:"available",subtopics:["Commas","Semicolons","Apostrophes"],icon:"ØŒ"},{id:"sentence_structure",name:"Sentence Structure",description:"Building strong sentences",progress:0,status:"available",subtopics:["Simple Sentences","Compound Sentences","Complex Sentences"],icon:"ðŸ—ï¸"},{id:"thesis_development",name:"Thesis Development",description:"Crafting arguable claims",progress:0,status:"available",subtopics:["Arguable Claims","Specificity","Placement"],icon:"ðŸŽ¯"},{id:"evidence_analysis",name:"Evidence & Analysis",description:"Supporting your arguments",progress:0,status:"available",subtopics:["Quotations","Paraphrasing","Analysis Techniques"],icon:"ðŸ’¡"},{id:"literary_analysis",name:"Literary Analysis",description:"Analyzing literature",progress:0,status:"available",subtopics:["Themes","Symbols","Character Analysis"],icon:"ðŸ“š"}]},math:{name:"Mathematics",icon:(0,b.jsx)(r.Calculator,{className:"w-6 h-6"}),color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",greeting:"Hi! I'm your Math tutor. I can help with algebra, geometry, calculus, and problem solving. What math topic are you working on?",isLanguage:!1,preferences:{teachingAge:15,voiceGender:"male",voiceAccent:"US"},topics:[{id:"algebra",name:"Algebra",description:"Equations and expressions",progress:0,status:"available",subtopics:["Linear Equations","Quadratic Equations","Systems"],icon:"ðŸ“"},{id:"geometry",name:"Geometry",description:"Shapes and proofs",progress:0,status:"available",subtopics:["Triangles","Circles","Proofs"],icon:"ðŸ“"},{id:"calculus",name:"Calculus",description:"Limits and derivatives",progress:0,status:"available",subtopics:["Limits","Derivatives","Integrals"],icon:"ðŸ“ˆ"},{id:"statistics",name:"Statistics",description:"Data analysis",progress:0,status:"available",subtopics:["Probability","Distributions","Hypothesis Testing"],icon:"ðŸ“Š"},{id:"trigonometry",name:"Trigonometry",description:"Sine, cosine, tangent",progress:0,status:"available",subtopics:["Unit Circle","Trig Functions","Identities"],icon:"ðŸ“"}]},precalculus:{name:"Pre-calculus",icon:(0,b.jsx)(r.Calculator,{className:"w-6 h-6"}),color:"text-indigo-600",bgColor:"bg-indigo-50",borderColor:"border-indigo-200",greeting:"Hello! I'm your Pre-calculus tutor. Ready to master functions, trigonometry, and prepare for calculus?",isLanguage:!1,preferences:{teachingAge:16,voiceGender:"male",voiceAccent:"US"},topics:[{id:"functions",name:"Functions",description:"Domain, range, transformations",progress:0,status:"available",subtopics:["Domain & Range","Transformations","Composition"],icon:"Æ’"},{id:"trigonometry",name:"Trigonometry",description:"Trig functions and identities",progress:0,status:"available",subtopics:["Unit Circle","Graphs","Identities"],icon:"ðŸ“"},{id:"conics",name:"Conic Sections",description:"Parabolas, ellipses, hyperbolas",progress:0,status:"available",subtopics:["Parabolas","Ellipses","Hyperbolas"],icon:"â­•"},{id:"sequences",name:"Sequences & Series",description:"Arithmetic and geometric",progress:0,status:"available",subtopics:["Arithmetic","Geometric","Summation"],icon:"âˆ‘"}]},"ap-calculus-ab":{name:"AP Calculus AB",icon:(0,b.jsx)(r.Calculator,{className:"w-6 h-6"}),color:"text-violet-600",bgColor:"bg-violet-50",borderColor:"border-violet-200",greeting:"Welcome to AP Calculus AB! I can help you with limits, derivatives, integrals, and exam prep.",isLanguage:!1,preferences:{teachingAge:17,voiceGender:"male",voiceAccent:"US"},topics:[{id:"limits",name:"Limits",description:"Understanding limits",progress:0,status:"available",subtopics:["Definition","Properties","Infinity"],icon:"lim"},{id:"derivatives",name:"Derivatives",description:"Rates of change",progress:0,status:"available",subtopics:["Definition","Rules","Applications"],icon:"d/dx"},{id:"integrals",name:"Integrals",description:"Accumulation",progress:0,status:"available",subtopics:["Definite","Indefinite","FTC"],icon:"âˆ«"},{id:"exam_prep",name:"Exam Prep",description:"AP exam strategies",progress:0,status:"available",subtopics:["MCQs","FRQs","Calculator"],icon:"ðŸ“"}]},physics:{name:"Physics",icon:(0,b.jsx)(s.Atom,{className:"w-6 h-6"}),color:"text-indigo-600",bgColor:"bg-indigo-50",borderColor:"border-indigo-200",greeting:"Hi! I'm your Physics tutor. I can help with mechanics, thermodynamics, electricity, and more.",isLanguage:!1,preferences:{teachingAge:16,voiceGender:"male",voiceAccent:"US"},topics:[{id:"mechanics",name:"Mechanics",description:"Motion and forces",progress:0,status:"available",subtopics:["Kinematics","Dynamics","Energy"],icon:"âš™ï¸"},{id:"thermodynamics",name:"Thermodynamics",description:"Heat and energy",progress:0,status:"available",subtopics:["Laws","Heat Transfer","Engines"],icon:"ðŸŒ¡ï¸"},{id:"electricity",name:"Electricity",description:"Circuits and fields",progress:0,status:"available",subtopics:["Circuits","Fields","Magnetism"],icon:"âš¡"},{id:"waves",name:"Waves",description:"Wave phenomena",progress:0,status:"available",subtopics:["Properties","Sound","Light"],icon:"ã€°ï¸"}]},chemistry:{name:"Chemistry",icon:(0,b.jsx)(t.Microscope,{className:"w-6 h-6"}),color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",greeting:"Hello! I'm your Chemistry tutor. I can help with organic, inorganic, and physical chemistry.",isLanguage:!1,preferences:{teachingAge:16,voiceGender:"female",voiceAccent:"US"},topics:[{id:"atomic_structure",name:"Atomic Structure",description:"Atoms and elements",progress:0,status:"available",subtopics:["Models","Periodic Table","Bonding"],icon:"âš›ï¸"},{id:"stoichiometry",name:"Stoichiometry",description:"Calculations",progress:0,status:"available",subtopics:["Moles","Equations","Yields"],icon:"âš–ï¸"},{id:"organic",name:"Organic Chemistry",description:"Carbon compounds",progress:0,status:"available",subtopics:["Hydrocarbons","Functional Groups","Reactions"],icon:"ðŸ§ª"},{id:"equilibrium",name:"Equilibrium",description:"Chemical balance",progress:0,status:"available",subtopics:["Kc","Kp","Le Chatelier"],icon:"âš–ï¸"}]},biology:{name:"Biology",icon:(0,b.jsx)(t.Microscope,{className:"w-6 h-6"}),color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200",greeting:"Hi! I'm your Biology tutor. I can help with cell biology, genetics, ecology, and evolution.",isLanguage:!1,preferences:{teachingAge:15,voiceGender:"female",voiceAccent:"US"},topics:[{id:"cells",name:"Cell Biology",description:"Cell structure",progress:0,status:"available",subtopics:["Organelles","Membrane","Division"],icon:"ðŸ§¬"},{id:"genetics",name:"Genetics",description:"Heredity and DNA",progress:0,status:"available",subtopics:["DNA","Inheritance","Mutations"],icon:"ðŸ§¬"},{id:"ecology",name:"Ecology",description:"Ecosystems",progress:0,status:"available",subtopics:["Populations","Communities","Biomes"],icon:"ðŸŒ"},{id:"evolution",name:"Evolution",description:"Natural selection",progress:0,status:"available",subtopics:["Darwin","Speciation","Evidence"],icon:"ðŸ¦Ž"}]},ielts:{name:"IELTS",icon:(0,b.jsx)(w.GraduationCap,{className:"w-6 h-6"}),color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",greeting:"Welcome to IELTS preparation! I can help you practice all four sections: Listening, Reading, Writing, and Speaking.",isLanguage:!0,preferences:{teachingAge:18,voiceGender:"female",voiceAccent:"British"},topics:[{id:"listening",name:"Listening",description:"Audio comprehension",progress:0,status:"available",subtopics:["Section 1","Section 2","Section 3","Section 4"],icon:"ðŸŽ§"},{id:"reading",name:"Reading",description:"Text comprehension",progress:0,status:"available",subtopics:["Academic","General","Strategies"],icon:"ðŸ“–"},{id:"writing_task1",name:"Writing Task 1",description:"Graphs and letters",progress:0,status:"available",subtopics:["Graphs","Processes","Letters"],icon:"âœï¸"},{id:"writing_task2",name:"Writing Task 2",description:"Essays",progress:0,status:"available",subtopics:["Opinion","Discussion","Problem-Solution"],icon:"ðŸ“"},{id:"speaking",name:"Speaking",description:"Oral exam",progress:0,status:"available",subtopics:["Part 1","Part 2","Part 3"],icon:"ðŸ—£ï¸"}]},toefl:{name:"TOEFL",icon:(0,b.jsx)(w.GraduationCap,{className:"w-6 h-6"}),color:"text-blue-700",bgColor:"bg-blue-50",borderColor:"border-blue-200",greeting:"Welcome to TOEFL preparation! I can help you prepare for all sections of the test.",isLanguage:!0,preferences:{teachingAge:18,voiceGender:"female",voiceAccent:"US"},topics:[{id:"reading",name:"Reading",description:"Academic texts",progress:0,status:"available",subtopics:["Passages","Questions","Strategies"],icon:"ðŸ“–"},{id:"listening",name:"Listening",description:"Lectures and conversations",progress:0,status:"available",subtopics:["Conversations","Lectures","Note-taking"],icon:"ðŸŽ§"},{id:"speaking",name:"Speaking",description:"Oral responses",progress:0,status:"available",subtopics:["Independent","Integrated","Templates"],icon:"ðŸ—£ï¸"},{id:"writing",name:"Writing",description:"Essays",progress:0,status:"available",subtopics:["Integrated","Independent","Structure"],icon:"âœï¸"}]},cs:{name:"Computer Science",icon:(0,b.jsx)(v.Monitor,{className:"w-6 h-6"}),color:"text-gray-700",bgColor:"bg-gray-50",borderColor:"border-gray-200",greeting:"Hello! I'm your CS tutor. I can help with programming, algorithms, data structures, and more.",isLanguage:!1,preferences:{teachingAge:16,voiceGender:"male",voiceAccent:"US"},topics:[{id:"programming",name:"Programming",description:"Coding basics",progress:0,status:"available",subtopics:["Variables","Control Flow","Functions"],icon:"ðŸ’»"},{id:"algorithms",name:"Algorithms",description:"Problem solving",progress:0,status:"available",subtopics:["Sorting","Searching","Complexity"],icon:"âš™ï¸"},{id:"data_structures",name:"Data Structures",description:"Organizing data",progress:0,status:"available",subtopics:["Arrays","Lists","Trees","Graphs"],icon:"ðŸ“Š"},{id:"databases",name:"Databases",description:"Data storage",progress:0,status:"available",subtopics:["SQL","Tables","Queries"],icon:"ðŸ—„ï¸"}]}};function ab({subjectCode:a,config:d,collapsed:h=!1,onToggleCollapse:i}){let[k,m]=(0,c.useState)("quick-actions"),[n,o]=(0,c.useState)([]),r=[{id:"details",label:"View Subject Details",icon:p.BookOpen,href:`/student/subjects/${a}`},{id:"class",label:"Book a Class",icon:q.MessageCircle,href:"/student/courses"},{id:"study-groups",label:"Join Study Group",icon:x.Sparkles,href:"/student/study-groups"},{id:"missions",label:"View Missions",icon:G.Target,href:"/student/missions"}],s=[{id:"quiz",label:"Quick Quiz",icon:L.HelpCircle,color:"bg-blue-100 text-blue-600"},{id:"flashcards",label:"Flashcards",icon:p.BookOpen,color:"bg-green-100 text-green-600"},{id:"timed",label:"Timed Practice",icon:I.Clock,color:"bg-orange-100 text-orange-600"},{id:"challenge",label:"Challenge Mode",icon:O.Award,color:"bg-purple-100 text-purple-600"}];return h?(0,b.jsxs)(f.Card,{className:"w-16 flex flex-col items-center py-3",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:i,className:"mb-2",children:(0,b.jsx)(D.PanelRight,{className:"w-4 h-4"})}),(0,b.jsx)("div",{className:"w-8 h-px bg-gray-200 my-2"}),(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 py-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:(0,b.jsx)(G.Target,{className:"w-4 h-4 text-blue-600"})}),(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:(0,b.jsx)(J.CheckCircle,{className:"w-4 h-4 text-green-600"})}),(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center",children:(0,b.jsx)(H.Gamepad2,{className:"w-4 h-4 text-purple-600"})})]})]}):(0,b.jsxs)(f.Card,{className:"h-full flex flex-col",children:[(0,b.jsx)(f.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(f.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(x.Sparkles,{className:"w-4 h-4 text-purple-500"}),"Learning Hub"]}),i&&(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:i,children:(0,b.jsx)(E.PanelRightClose,{className:"w-4 h-4"})})]})}),(0,b.jsxs)(l.Tabs,{value:k,onValueChange:m,className:"flex-1 flex flex-col",children:[(0,b.jsxs)(l.TabsList,{className:"grid w-full grid-cols-3 mx-4 mb-2",children:[(0,b.jsxs)(l.TabsTrigger,{value:"quick-actions",className:"text-xs",children:[(0,b.jsx)(G.Target,{className:"w-3 h-3 mr-1"}),"Actions"]}),(0,b.jsxs)(l.TabsTrigger,{value:"practice",className:"text-xs",children:[(0,b.jsx)(H.Gamepad2,{className:"w-3 h-3 mr-1"}),"Practice"]}),(0,b.jsxs)(l.TabsTrigger,{value:"saved",className:"text-xs",children:[(0,b.jsx)(K.Bookmark,{className:"w-3 h-3 mr-1"}),"Saved"]})]}),(0,b.jsx)(f.CardContent,{className:"flex-1 p-4 pt-0",children:(0,b.jsxs)(j.ScrollArea,{className:"h-[calc(100vh-380px)]",children:[(0,b.jsx)(l.TabsContent,{value:"quick-actions",className:"mt-0 space-y-2",children:r.map(a=>(0,b.jsx)(e.default,{href:a.href,children:(0,b.jsxs)(g.Button,{variant:"outline",className:"w-full justify-start text-sm",size:"sm",children:[(0,b.jsx)(a.icon,{className:"w-4 h-4 mr-2"}),a.label,(0,b.jsx)(F.ChevronRight,{className:"w-3 h-3 ml-auto"})]})},a.id))}),(0,b.jsxs)(l.TabsContent,{value:"practice",className:"mt-0",children:[(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:s.map(a=>(0,b.jsxs)("button",{className:"p-3 rounded-lg border hover:border-blue-300 hover:shadow-md transition-all text-left group",children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full ${a.color} flex items-center justify-center mb-2`,children:(0,b.jsx)(a.icon,{className:"w-4 h-4"})}),(0,b.jsx)("span",{className:"text-xs font-medium group-hover:text-blue-600",children:a.label})]},a.id))}),(0,b.jsxs)("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border",children:[(0,b.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-2 mb-2",children:[(0,b.jsx)(N.Play,{className:"w-4 h-4 text-blue-500"}),"Daily Challenge"]}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 mb-2",children:["Complete today's ",d.name," challenge for bonus XP!"]}),(0,b.jsx)(g.Button,{size:"sm",className:"w-full text-xs",children:"Start Challenge"})]})]}),(0,b.jsx)(l.TabsContent,{value:"saved",className:"mt-0",children:0===n.length?(0,b.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,b.jsx)(K.Bookmark,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"No saved items yet"}),(0,b.jsx)("p",{className:"text-xs mt-1",children:"Important notes will appear here"})]}):(0,b.jsx)("div",{className:"space-y-2",children:n.map((a,c)=>(0,b.jsx)("div",{className:"p-2 bg-gray-50 rounded text-sm",children:a},c))})})]})})]})]})}function ac(){let a=(0,d.useParams)();(0,d.useRouter)();let l=a.subjectCode,q=(0,c.useRef)(null),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[x,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),[P,U]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)(!1),[ae,af]=(0,c.useState)({amount:0,reason:""}),[ag,ah]=(0,c.useState)("socratic"),[ai,aj]=(0,c.useState)(null),[ak,al]=(0,c.useState)("friendly_mentor"),[am,an]=(0,c.useState)(72),[ao,ap]=(0,c.useState)(!1),[aq,ar]=(0,c.useState)("light"),as=aa[l.toLowerCase()]||{name:l.charAt(0).toUpperCase()+l.slice(1),icon:(0,b.jsx)(p.BookOpen,{className:"w-6 h-6"}),color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",greeting:`Hello! I'm your ${l} tutor. How can I help you today?`,isLanguage:!1,preferences:{teachingAge:15,voiceGender:"male",voiceAccent:"US"},topics:[]};(0,c.useEffect)(()=>{0===r.length&&s([{id:"greeting",role:"assistant",content:as.greeting,timestamp:new Date().toISOString()}])},[as.greeting]),(0,c.useEffect)(()=>{q.current?.scrollIntoView({behavior:"smooth"})},[r]);let at=async()=>{if(!t.trim())return;let a={id:Date.now().toString(),role:"user",content:t,timestamp:new Date().toISOString()};s(b=>[...b,a]),u(""),w(!0);try{let a=await fetch("/api/ai/tutor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,subject:l,topic:G||null,mode:ag,teachingAge:as.preferences.teachingAge,voiceGender:as.preferences.voiceGender,voiceAccent:as.preferences.voiceAccent,conversationId:ai})});if(!a.ok){let b="Failed to get response";try{let c=await a.json();b=c.error||c.details||"Failed to get response"}catch{b=a.statusText||"Server error"}throw Error(b)}let b=await a.json();b.conversationId&&!ai&&aj(b.conversationId);let c={id:(Date.now()+1).toString(),role:"assistant",content:b.response,timestamp:new Date().toISOString(),hintType:b.isSocratic?"socratic":"direct"};if(s(a=>[...a,c]),b.whiteboardItems&&b.whiteboardItems.length>0){let a=b.whiteboardItems.map((a,b)=>({id:`wb-${Date.now()}-${b}`,type:"formula"===a.type?"text":a.type,content:a.content,timestamp:new Date().toISOString()}));F(b=>[...b,...a])}}catch(b){console.error("AI tutor error:",b),m.toast.error("AI tutor temporarily unavailable. Please try again.");let a={id:(Date.now()+1).toString(),role:"assistant",content:"I apologize, but I'm having trouble connecting right now. Please try again in a moment.",timestamp:new Date().toISOString()};s(b=>[...b,a])}finally{w(!1)}},au=a=>{H(a);let b=as.topics.find(b=>b.id===a||a.startsWith(b.id));b&&u(`Can you help me with ${b.name}? ${b.description}`)},av=a=>{switch(a){case"encouragement":return"encouraging";case"socratic":return"thinking";default:return"neutral"}},aw=r.filter(a=>"assistant"===a.role).pop(),ax=av(aw?.hintType),ay=_.find(a=>a.key===ag);return(0,b.jsxs)("div",{className:`min-h-screen ${{light:"bg-gray-50",warm:"bg-amber-50",cool:"bg-slate-100",mint:"bg-emerald-50",lavender:"bg-purple-50",dark:"bg-gray-900"}[aq]||"bg-gray-50"} flex flex-col`,children:[(0,b.jsx)("header",{className:`${as.bgColor} border-b ${as.borderColor}`,children:(0,b.jsx)("div",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.default,{href:`/student/subjects/${l}`,children:(0,b.jsxs)(g.Button,{variant:"ghost",size:"sm",children:[(0,b.jsx)(o.ArrowLeft,{className:"w-4 h-4 mr-1"}),"Back"]})}),(0,b.jsx)("div",{className:`p-2 rounded-lg ${as.color} bg-white`,children:as.icon}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-xl font-bold",children:[as.name," AI Tutor"]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Teaching like a ",as.preferences.teachingAge,"-year-old with ",as.preferences.voiceGender," ",as.preferences.voiceAccent," voice"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(Z.Select,{value:ag,onValueChange:a=>ah(a),children:[(0,b.jsx)(Z.SelectTrigger,{className:"w-[180px] bg-white",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[ay?.icon,(0,b.jsx)("span",{children:ay?.name})]})}),(0,b.jsx)(Z.SelectContent,{children:_.map(a=>(0,b.jsx)(Z.SelectItem,{value:a.key,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.icon,(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium",children:a.name}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:a.description})]})]})},a.key))})]}),(0,b.jsx)(W.PersonalitySelector,{currentPersonality:ak,onSelect:al}),(0,b.jsxs)(k.Sheet,{open:P,onOpenChange:U,children:[(0,b.jsx)(k.SheetTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(z.Settings,{className:"w-5 h-5"})})}),(0,b.jsxs)(k.SheetContent,{children:[(0,b.jsx)(k.SheetTitle,{children:"Tutor Settings"}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(T.TutorPreferences,{enrollmentId:"demo",currentPreferences:{teachingAge:as.preferences.teachingAge,voiceGender:as.preferences.voiceGender,voiceAccent:as.preferences.voiceAccent,avatarStyle:"modern",backgroundColor:aq},onUpdate:a=>{a.backgroundColor&&ar(a.backgroundColor),m.toast.success("Preferences updated!"),U(!1)}})})]})]})]})]})})}),(0,b.jsx)("div",{className:"flex-1 p-4 overflow-hidden",children:(0,b.jsxs)("div",{className:"flex gap-4 h-[calc(100vh-140px)]",children:[(0,b.jsx)("div",{className:(0,Q.cn)("hidden lg:block transition-all duration-300 flex-shrink-0",I?"w-16":"w-72"),children:as.topics.length>0?(0,b.jsx)(S.TopicSidebar,{topics:as.topics,currentTopic:G,onSelectTopic:au,collapsed:I,onToggleCollapse:()=>J(!I),className:"h-full"}):(0,b.jsxs)(f.Card,{className:"h-full flex flex-col",children:[(0,b.jsx)(f.CardHeader,{className:"pb-2 flex flex-row items-center justify-between space-y-0",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.BookOpen,{className:"w-4 h-4 text-blue-500"}),(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium",children:"Topics"})]})}),(0,b.jsx)(f.CardContent,{className:"flex-1 flex items-center justify-center text-center text-gray-400",children:(0,b.jsx)("p",{className:"text-sm",children:"Topics coming soon"})})]})}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col gap-4 min-w-0",children:[(0,b.jsxs)("div",{className:(0,Q.cn)("px-4 py-2 rounded-lg text-sm flex items-center justify-between","socratic"===ag&&"bg-amber-50 border border-amber-200","direct"===ag&&"bg-blue-50 border border-blue-200","lesson"===ag&&"bg-purple-50 border border-purple-200","practice"===ag&&"bg-green-50 border border-green-200"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[ay?.icon,(0,b.jsxs)("span",{className:"font-medium",children:[ay?.name," Mode"]}),(0,b.jsxs)("span",{className:"text-gray-500",children:["â€” ",ay?.description]})]}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>ah("socratic"),children:"Reset to Socratic"})]}),(0,b.jsx)(f.Card,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,b.jsx)($,{isSpeaking:v,mood:ax,size:"md"}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold",children:["Your ",as.name," Tutor"]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["I'm teaching you like a ",as.preferences.teachingAge,"-year-old with a ",as.preferences.voiceGender," ",as.preferences.voiceAccent," voice."]})]}),as.isLanguage&&(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(Y.ConfidenceMeter,{confidenceScore:am,isListening:x})})]})}),(0,b.jsx)(f.Card,{className:"flex-1 min-h-[150px] p-4",children:(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center text-gray-400",children:[(0,b.jsx)(M.FileText,{className:"w-10 h-10 mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"Interactive Learning Space"}),(0,b.jsx)("p",{className:"text-xs mt-1",children:"Lessons, diagrams, and exercises will appear here"})]})}),(0,b.jsxs)(f.Card,{className:"flex flex-col overflow-hidden",style:{maxHeight:"350px"},children:[(0,b.jsx)(j.ScrollArea,{className:"flex-1 p-4",children:(0,b.jsxs)("div",{className:"space-y-4",children:[r.map(a=>(0,b.jsxs)("div",{className:`flex gap-3 ${"user"===a.role?"justify-end":"justify-start"}`,children:["assistant"===a.role&&(0,b.jsx)(V.AIAvatarPlaceholder,{mood:av(a.hintType),size:"sm"}),(0,b.jsxs)("div",{className:`max-w-[80%] rounded-lg p-3 ${"user"===a.role?"bg-blue-600 text-white":"bg-white border shadow-sm"}`,children:[(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:a.content}),a.hintType&&(0,b.jsx)(i.Badge,{variant:"secondary",className:"mt-2 text-xs capitalize",children:a.hintType})]})]},a.id)),v&&(0,b.jsxs)("div",{className:"flex gap-3 justify-start",children:[(0,b.jsx)(V.AIAvatarPlaceholder,{mood:"thinking",size:"sm"}),(0,b.jsx)("div",{className:"bg-white border rounded-lg p-3",children:(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),(0,b.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce [animation-delay:0.1s]"}),(0,b.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce [animation-delay:0.2s]"})]})})]}),(0,b.jsx)("div",{ref:q})]})}),(0,b.jsxs)(f.CardContent,{className:"border-t pt-4 bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"icon",onClick:()=>D(!x),className:x?"text-red-500":"",children:x?(0,b.jsx)(B.Mic,{className:"w-4 h-4"}):(0,b.jsx)(C.MicOff,{className:"w-4 h-4"})}),(0,b.jsx)(h.Input,{placeholder:`Ask about ${as.name}...`,value:t,onChange:a=>u(a.target.value),onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),at())},className:"flex-1"}),(0,b.jsx)(g.Button,{onClick:at,disabled:v||!t.trim(),children:(0,b.jsx)(n.Send,{className:"w-4 h-4"})})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:[(0,b.jsx)(y.Lightbulb,{className:"w-3 h-3 inline mr-1"}),"Tip: Be specific about what you need help with for better answers."]})]})]})]}),(0,b.jsxs)("div",{className:(0,Q.cn)("hidden lg:flex flex-col gap-4 flex-shrink-0 transition-all duration-300 items-end",K&&N?"w-16":"w-80"),children:[(0,b.jsx)("div",{className:(0,Q.cn)("transition-all duration-300",K?"w-16":"w-full"),children:(0,b.jsx)(R.AIWhiteboard,{items:E,onClear:()=>F([]),collapsed:K,onToggleCollapse:()=>L(!K),collapseDirection:"right"})}),(0,b.jsx)("div",{className:(0,Q.cn)("transition-all duration-300 flex-1 min-h-0",N?"w-16":"w-full"),children:(0,b.jsx)(ab,{subjectCode:l,config:as,collapsed:N,onToggleCollapse:()=>O(!N)})})]})]})}),(0,b.jsx)("div",{className:"lg:hidden fixed bottom-4 left-4 z-50",children:(0,b.jsxs)(k.Sheet,{children:[(0,b.jsx)(k.SheetTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(A.Menu,{className:"w-4 h-4 mr-2"}),"Topics"]})}),(0,b.jsxs)(k.SheetContent,{side:"left",className:"w-[300px] sm:w-[400px]",children:[(0,b.jsx)(k.SheetTitle,{children:"Topics"}),(0,b.jsx)("div",{className:"mt-4 h-full",children:(0,b.jsx)(S.TopicSidebar,{topics:as.topics,currentTopic:G,onSelectTopic:au})})]})]})}),ao&&(0,b.jsx)(X.XpAnimation,{amount:ae.amount,reason:ae.reason,onComplete:()=>ap(!1)}),ac&&(0,b.jsx)(X.LevelUpAnimation,{level:5,onComplete:()=>ad(!1)})]})}a.s(["default",()=>ac],620177)}];

//# debugId=1b352d14-a8b4-5175-f3dd-ad489d6d3b68
//# sourceMappingURL=e127f_src_app_%5Blocale%5D_student_subjects_%5BsubjectCode%5D_chat_page_tsx_2b9cd700._.js.map