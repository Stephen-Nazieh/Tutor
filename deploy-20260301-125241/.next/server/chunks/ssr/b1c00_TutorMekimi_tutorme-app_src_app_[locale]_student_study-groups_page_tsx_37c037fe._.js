;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="59352230-ecd4-2586-15fa-daebdb544bc3")}catch(e){}}();
module.exports=[401813,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(326684),e=a.i(454069),f=a.i(52028),g=a.i(113098),h=a.i(88684),i=a.i(238341),j=a.i(846438),k=a.i(147779),l=a.i(560467),m=a.i(479680),n=a.i(414030),o=a.i(342621),p=a.i(595484),q=a.i(302402),r=a.i(309402),s=a.i(458588),t=a.i(395261),u=a.i(333340),v=a.i(868606),w=a.i(981354),x=a.i(263805),y=a.i(529004),z=a.i(206209);function A(){(0,e.useRouter)();let{data:a,status:A}=(0,d.useSession)(),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)("all"),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)({name:"",subject:"",description:"",maxMembers:20});(0,c.useEffect)(()=>{"authenticated"===A&&(V(),W())},[A]);let V=async()=>{try{let a="all"!==N?`/api/study-groups?limit=50&subject=${N}`:"/api/study-groups?limit=50",b=await fetch(a),c=await b.json();c.groups&&C(c.groups)}catch(a){j.toast.error("Error",{description:"Failed to load study groups"})}finally{G(!1)}},W=async()=>{try{let a=await fetch("/api/study-groups?myGroups=true"),b=await a.json();b.groups&&E(b.groups)}catch(a){console.error("Failed to fetch my groups")}},X=async a=>{I(a);try{let b=await fetch("/api/study-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupId:a})}),c=await b.json();c.success?(j.toast.success(`Joined Group! ðŸ‘¥`,{description:c.message}),V(),W()):j.toast.error("Join Failed",{description:c.error||"Failed to join group"})}catch(a){j.toast.error("Error",{description:"Failed to join group. Please try again."})}finally{I(null)}},Y=async a=>{K(a);try{let b=await fetch("/api/study-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupId:a})}),c=await b.json();c.success?(j.toast.success("Left Group",{description:c.message}),V(),W()):j.toast.error("Failed to Leave",{description:c.error||"Failed to leave group"})}catch(a){j.toast.error("Error",{description:"Failed to leave group. Please try again."})}finally{K(null)}},Z=async()=>{if(!T.name||!T.subject)return void j.toast.error("Missing Fields",{description:"Please fill in all required fields"});S(!0);try{let a=await fetch("/api/study-groups",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)}),b=await a.json();b.success?(j.toast.success(`Group Created! ðŸŽ‰`,{description:`"${T.name}" has been created`}),Q(!1),U({name:"",subject:"",description:"",maxMembers:20}),V(),W()):j.toast.error("Create Failed",{description:b.error||"Failed to create group"})}catch(a){j.toast.error("Error",{description:"Failed to create group. Please try again."})}finally{S(!1)}},$=B.filter(a=>a.name.toLowerCase().includes(L.toLowerCase())||a.subject.toLowerCase().includes(L.toLowerCase())).filter(a=>!a.isMember);return"loading"===A||F?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading study groups..."})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white border-b",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(f.default,{href:"/student/dashboard",children:(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",children:[(0,b.jsx)(n.ArrowLeft,{className:"w-4 h-4 mr-1"}),"Back"]})}),(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"TutorMe"})]}),(0,b.jsx)(i.UserNav,{})]})}),(0,b.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold",children:"Study Groups"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Join groups to learn together with peers"})]}),(0,b.jsxs)(x.Dialog,{open:P,onOpenChange:Q,children:[(0,b.jsx)(x.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{children:[(0,b.jsx)(p.Plus,{className:"w-4 h-4 mr-2"}),"Create Group"]})}),(0,b.jsxs)(x.DialogContent,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(x.DialogHeader,{children:[(0,b.jsx)(x.DialogTitle,{children:"Create Study Group"}),(0,b.jsx)(x.DialogDescription,{children:"Start a new study group for a subject you're interested in."})]}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"name",children:"Group Name *"}),(0,b.jsx)(w.Input,{id:"name",value:T.name,onChange:a=>U({...T,name:a.target.value}),placeholder:"e.g., Calculus Study Squad"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"subject",children:"Subject *"}),(0,b.jsxs)(z.Select,{value:T.subject,onValueChange:a=>U({...T,subject:a}),children:[(0,b.jsx)(z.SelectTrigger,{children:(0,b.jsx)(z.SelectValue,{placeholder:"Select a subject"})}),(0,b.jsxs)(z.SelectContent,{children:[(0,b.jsx)(z.SelectItem,{value:"Mathematics",children:"Mathematics"}),(0,b.jsx)(z.SelectItem,{value:"Physics",children:"Physics"}),(0,b.jsx)(z.SelectItem,{value:"Chemistry",children:"Chemistry"}),(0,b.jsx)(z.SelectItem,{value:"Biology",children:"Biology"}),(0,b.jsx)(z.SelectItem,{value:"English",children:"English"}),(0,b.jsx)(z.SelectItem,{value:"History",children:"History"}),(0,b.jsx)(z.SelectItem,{value:"Computer Science",children:"Computer Science"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(w.Input,{id:"description",value:T.description,onChange:a=>U({...T,description:a.target.value}),placeholder:"What will you study?"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"maxMembers",children:"Max Members"}),(0,b.jsx)(w.Input,{id:"maxMembers",type:"number",min:2,max:50,value:T.maxMembers,onChange:a=>U({...T,maxMembers:parseInt(a.target.value)||20})})]})]}),(0,b.jsxs)(x.DialogFooter,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),(0,b.jsxs)(h.Button,{onClick:Z,disabled:R,children:[R&&(0,b.jsx)(m.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Create Group"]})]})]})]})]}),(0,b.jsxs)(v.Tabs,{defaultValue:"browse",className:"space-y-6",children:[(0,b.jsxs)(v.TabsList,{children:[(0,b.jsxs)(v.TabsTrigger,{value:"browse",children:["Browse (",$.length,")"]}),(0,b.jsxs)(v.TabsTrigger,{value:"my-groups",children:["My Groups (",D.length,")"]})]}),(0,b.jsxs)(v.TabsContent,{value:"browse",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(s.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,b.jsx)(w.Input,{placeholder:"Search groups...",value:L,onChange:a=>M(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(z.Select,{value:N,onValueChange:O,children:[(0,b.jsx)(z.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(z.SelectValue,{placeholder:"Filter by subject"})}),(0,b.jsxs)(z.SelectContent,{children:[(0,b.jsx)(z.SelectItem,{value:"all",children:"All Subjects"}),(0,b.jsx)(z.SelectItem,{value:"Mathematics",children:"Mathematics"}),(0,b.jsx)(z.SelectItem,{value:"Physics",children:"Physics"}),(0,b.jsx)(z.SelectItem,{value:"Chemistry",children:"Chemistry"}),(0,b.jsx)(z.SelectItem,{value:"Biology",children:"Biology"}),(0,b.jsx)(z.SelectItem,{value:"English",children:"English"}),(0,b.jsx)(z.SelectItem,{value:"History",children:"History"})]})]})]}),$.length>0?(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:$.map(a=>(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)(u.Badge,{variant:"secondary",className:"mb-2",children:a.subject}),(0,b.jsx)(g.CardTitle,{className:"text-lg",children:a.name})]})})}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Users,{className:"w-4 h-4"}),a.currentMembers,"/",a.maxMembers," members"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t.User,{className:"w-4 h-4"}),"Created by ",a.creator.profile?.name||"Anonymous"]})]}),(0,b.jsxs)(h.Button,{className:"w-full",disabled:H===a.id||a.isFull,onClick:()=>X(a.id),children:[H===a.id?(0,b.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin mr-2"}):null,a.isFull?"Full":"Join Group"]})]})]},a.id))}):(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"pt-12 pb-12 text-center",children:[(0,b.jsx)(k.Users,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-600",children:L||"all"!==N?"No groups match your search":"No available groups"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:L||"all"!==N?"Try different search terms":"Create the first study group!"}),!L&&"all"===N&&(0,b.jsxs)(h.Button,{className:"mt-4",onClick:()=>Q(!0),children:[(0,b.jsx)(p.Plus,{className:"w-4 h-4 mr-2"}),"Create Group"]})]})})]}),(0,b.jsx)(v.TabsContent,{value:"my-groups",children:D.length>0?(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(a=>(0,b.jsxs)(g.Card,{className:"admin"===a.memberRole?"border-yellow-300":"border-green-300",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(u.Badge,{variant:"secondary",children:a.subject}),"admin"===a.memberRole&&(0,b.jsxs)(u.Badge,{className:"bg-yellow-100 text-yellow-800",children:[(0,b.jsx)(q.Crown,{className:"w-3 h-3 mr-1"}),"Admin"]})]}),(0,b.jsx)(g.CardTitle,{className:"text-lg",children:a.name})]}),(0,b.jsx)(l.CheckCircle,{className:"w-5 h-5 text-green-500"})]})}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.description}),(0,b.jsx)("div",{className:"space-y-2 text-sm text-gray-600",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Users,{className:"w-4 h-4"}),a.currentMembers,"/",a.maxMembers," members"]})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(h.Button,{className:"flex-1",variant:"outline",children:[(0,b.jsx)(o.BookOpen,{className:"w-4 h-4 mr-2"}),"Open"]}),"admin"!==a.memberRole&&(0,b.jsx)(h.Button,{variant:"outline",size:"icon",onClick:()=>Y(a.id),disabled:J===a.id,children:J===a.id?(0,b.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(r.LogOut,{className:"w-4 h-4 text-red-500"})})]})]})]},a.id))}):(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"pt-12 pb-12 text-center",children:[(0,b.jsx)(k.Users,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-600",children:"Not in any groups yet"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Join a study group to start collaborating"}),(0,b.jsx)(h.Button,{className:"mt-4",onClick:()=>{if(document.querySelector('[data-state="active"]')){let a=document.querySelector('[value="browse"]');a?.click()}},children:"Browse Groups"})]})})})]})]})]})}a.s(["default",()=>A])}];

//# debugId=59352230-ecd4-2586-15fa-daebdb544bc3
//# sourceMappingURL=b1c00_TutorMekimi_tutorme-app_src_app_%5Blocale%5D_student_study-groups_page_tsx_37c037fe._.js.map