{
  "version": 3,
  "sources": [],
  "debugId": "062e121a-d079-8dc5-e42a-b7e9b71144ec",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/%5Blocale%5D/student/assignments/page.tsx","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/quiz/quiz-modal.tsx","../../../../../../../ADK_WORKSPACE/TutorMekimi/tutorme-app/src/components/quiz/PersonalizedFeedbackCard.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport {\n  ClipboardList,\n  Clock,\n  CheckCircle2,\n  AlertCircle,\n  Calendar,\n  FileQuestion,\n  Loader2,\n  ArrowRight,\n  Trophy,\n  Target,\n  BookOpen\n} from 'lucide-react'\nimport { QuizModal, type QuestionResultItem } from '@/components/quiz/quiz-modal'\nimport { toast } from 'sonner'\n\ninterface AssignmentItem {\n  id: string\n  title: string\n  description: string\n  type: string\n  difficulty: string\n  dueDate: string | null\n  maxScore: number\n  status: 'pending' | 'submitted' | 'overdue'\n  score: number | null\n  submittedAt: string | null\n  questionCount: number\n  lessonId: string | null\n  batchId: string | null\n  documentSource?: string | null\n}\n\ninterface TaskQuestion {\n  id: string\n  type: string\n  question: string\n  options?: string[]\n  points: number\n  rubric?: string[]\n  hints?: string[]\n}\n\ninterface ParsedDocumentSource {\n  fileName?: string\n  fileUrl?: string\n  mimeType?: string\n}\n\nexport default function StudentAssignmentsPage() {\n  const [assignments, setAssignments] = useState<AssignmentItem[]>([])\n  const [stats, setStats] = useState({ pending: 0, submitted: 0, overdue: 0, total: 0 })\n  const [loading, setLoading] = useState(true)\n  const [activeTab, setActiveTab] = useState('all')\n\n  // Quiz-taking state\n  const [activeTask, setActiveTask] = useState<{ id: string; title: string; questions: TaskQuestion[] } | null>(null)\n  const [takingQuiz, setTakingQuiz] = useState(false)\n  const [submitting, setSubmitting] = useState(false)\n  const [startTime, setStartTime] = useState<number>(0)\n\n  const loadAssignments = useCallback(async () => {\n    setLoading(true)\n    try {\n      const res = await fetch('/api/student/assignments', { credentials: 'include' })\n      if (res.ok) {\n        const data = await res.json()\n        setAssignments(data.assignments ?? [])\n        setStats(data.stats ?? { pending: 0, submitted: 0, overdue: 0, total: 0 })\n      }\n    } catch {\n      toast.error('Failed to load assignments')\n    } finally {\n      setLoading(false)\n    }\n  }, [])\n\n  useEffect(() => {\n    loadAssignments()\n  }, [loadAssignments])\n\n  const handleStartTask = async (taskId: string) => {\n    try {\n      const res = await fetch(`/api/student/assignments/${taskId}`, { credentials: 'include' })\n      if (!res.ok) {\n        const data = await res.json()\n        toast.error(data.error ?? 'Cannot start this task')\n        return\n      }\n      const data = await res.json()\n      if (data.alreadySubmitted) {\n        toast.info(`Already submitted. Score: ${data.existingScore ?? 'N/A'}%`)\n        return\n      }\n      // Map to QuizModal question format\n      setActiveTask({\n        id: taskId,\n        title: data.task.title,\n        questions: data.task.questions,\n      })\n      setStartTime(Date.now())\n      setTakingQuiz(true)\n    } catch {\n      toast.error('Failed to load task')\n    }\n  }\n\n  const handleQuizComplete = async (results: { score: number; answers: Record<string, any>; questionResults?: QuestionResultItem[] }) => {\n    if (!activeTask) return\n    setSubmitting(true)\n\n    const timeSpentSec = Math.round((Date.now() - startTime) / 1000)\n\n    try {\n      // 1. Submit to the assignment submission endpoint\n      const csrfRes = await fetch('/api/csrf', { credentials: 'include' })\n      const csrfData = await csrfRes.json().catch(() => ({}))\n      const csrf = csrfData?.token ?? null\n\n      const submitRes = await fetch(`/api/student/assignments/${activeTask.id}/submit`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(csrf && { 'X-CSRF-Token': csrf }),\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          answers: results.answers,\n          timeSpent: timeSpentSec,\n        }),\n      })\n\n      if (submitRes.ok) {\n        const data = await submitRes.json()\n        toast.success(`Submitted! Score: ${Math.round(data.submission.score)}%`)\n      } else if (submitRes.status === 409) {\n        toast.info('Already submitted')\n      } else {\n        toast.error('Submission failed')\n      }\n\n      // 2. Also call quiz attempt API if this is a quiz type\n      if (activeTask.questions.length > 0) {\n        const attemptRes = await fetch('/api/quiz/attempt', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            ...(csrf && { 'X-CSRF-Token': csrf }),\n          },\n          credentials: 'include',\n          body: JSON.stringify({\n            quizId: activeTask.id,\n            score: results.score,\n            maxScore: 100,\n            answers: results.answers,\n            timeSpent: timeSpentSec,\n            questionResults: results.questionResults,\n          }),\n        })\n        if (!attemptRes.ok) {\n          console.warn('Quiz attempt recording failed (non-critical)')\n        }\n      }\n    } catch {\n      toast.error('Failed to submit')\n    } finally {\n      setSubmitting(false)\n      setTakingQuiz(false)\n      setActiveTask(null)\n      loadAssignments() // refresh list\n    }\n  }\n\n  const handleCloseQuiz = () => {\n    setTakingQuiz(false)\n    setActiveTask(null)\n  }\n\n  const parseDocumentSource = (raw?: string | null): ParsedDocumentSource | null => {\n    if (!raw) return null\n    try {\n      return JSON.parse(raw) as ParsedDocumentSource\n    } catch {\n      return null\n    }\n  }\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'submitted': return <CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n      case 'overdue': return <AlertCircle className=\"h-5 w-5 text-red-500\" />\n      default: return <Clock className=\"h-5 w-5 text-amber-500\" />\n    }\n  }\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'submitted': return <Badge className=\"bg-green-100 text-green-700 border-green-200\">Submitted</Badge>\n      case 'overdue': return <Badge variant=\"destructive\">Overdue</Badge>\n      default: return <Badge className=\"bg-amber-100 text-amber-700 border-amber-200\">Pending</Badge>\n    }\n  }\n\n  const getTypeBadge = (type: string) => {\n    const color = type === 'quiz' ? 'bg-blue-100 text-blue-700' :\n      type === 'assignment' || type === 'homework' ? 'bg-purple-100 text-purple-700' :\n        type === 'project' ? 'bg-teal-100 text-teal-700' :\n          'bg-gray-100 text-gray-700'\n    return <Badge className={`${color} border-0 capitalize`}>{type}</Badge>\n  }\n\n  const filtered = activeTab === 'all'\n    ? assignments\n    : assignments.filter((a) => a.status === activeTab)\n\n  // Quiz-taking overlay\n  if (takingQuiz && activeTask) {\n    const quizQuestions = activeTask.questions.map((q) => ({\n      id: q.id,\n      type: (q.type === 'mcq' || q.type === 'multiple_choice' ? 'multiple_choice' : 'short_answer') as 'multiple_choice' | 'short_answer',\n      question: q.question,\n      options: q.options,\n      rubric: q.rubric?.join('; '),\n    }))\n\n    return (\n      <QuizModal\n        questions={quizQuestions}\n        onComplete={handleQuizComplete}\n        onClose={handleCloseQuiz}\n      />\n    )\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-2xl font-bold text-gray-900 flex items-center gap-2\">\n          <ClipboardList className=\"h-6 w-6\" />\n          Assignments\n        </h1>\n        <p className=\"text-gray-600 mt-1\">\n          Track your homework, quizzes, and projects\n        </p>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-500\">Total</p>\n                <p className=\"text-2xl font-bold\">{stats.total}</p>\n              </div>\n              <BookOpen className=\"h-8 w-8 text-blue-500\" />\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-500\">Pending</p>\n                <p className=\"text-2xl font-bold\">{stats.pending}</p>\n              </div>\n              <Target className=\"h-8 w-8 text-amber-500\" />\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-500\">Submitted</p>\n                <p className=\"text-2xl font-bold\">{stats.submitted}</p>\n              </div>\n              <Trophy className=\"h-8 w-8 text-green-500\" />\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-500\">Overdue</p>\n                <p className=\"text-2xl font-bold\">{stats.overdue}</p>\n              </div>\n              <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Tabs + List */}\n      <Card>\n        <CardHeader>\n          <CardTitle>All Assignments</CardTitle>\n          <CardDescription>Your upcoming and completed work</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Tabs value={activeTab} onValueChange={setActiveTab}>\n            <TabsList className=\"mb-4\">\n              <TabsTrigger value=\"all\">All ({stats.total})</TabsTrigger>\n              <TabsTrigger value=\"pending\">Pending ({stats.pending})</TabsTrigger>\n              <TabsTrigger value=\"submitted\">Submitted ({stats.submitted})</TabsTrigger>\n              <TabsTrigger value=\"overdue\">Overdue ({stats.overdue})</TabsTrigger>\n            </TabsList>\n\n            <TabsContent value={activeTab} className=\"space-y-3 mt-0\">\n              {loading ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <Loader2 className=\"h-8 w-8 animate-spin text-blue-500\" />\n                </div>\n              ) : filtered.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <FileQuestion className=\"h-12 w-12 text-gray-300 mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-medium text-gray-700\">No assignments</h3>\n                  <p className=\"text-sm text-gray-500 mt-1\">\n                    {activeTab === 'all' ? 'No tasks have been assigned yet' : `No ${activeTab} assignments`}\n                  </p>\n                </div>\n              ) : (\n                filtered.map((assignment) => (\n                  <div\n                    key={assignment.id}\n                    className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors\"\n                  >\n                    <div className=\"flex items-center gap-4\">\n                      {getStatusIcon(assignment.status)}\n                      <div>\n                        <h3 className=\"font-medium text-gray-900\">{assignment.title}</h3>\n                        <p className=\"text-sm text-gray-500 line-clamp-1\">{assignment.description}</p>\n                        <div className=\"flex items-center gap-2 mt-1.5 flex-wrap\">\n                          {getTypeBadge(assignment.type)}\n                          <Badge variant=\"outline\" className=\"capitalize text-xs\">{assignment.difficulty}</Badge>\n                          {assignment.questionCount > 0 && (\n                            <span className=\"text-xs text-gray-400\">{assignment.questionCount} questions</span>\n                          )}\n                          {parseDocumentSource(assignment.documentSource)?.fileName && (\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              Source file: {parseDocumentSource(assignment.documentSource)?.fileName}\n                            </Badge>\n                          )}\n                          {assignment.dueDate && (\n                            <span className=\"text-xs text-gray-400 flex items-center gap-1\">\n                              <Calendar className=\"h-3 w-3\" />\n                              {new Date(assignment.dueDate).toLocaleDateString()}\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-3 ml-4\">\n                      {parseDocumentSource(assignment.documentSource)?.fileUrl && (\n                        <Button\n                          variant=\"default\"\n                          size=\"sm\"\n                          onClick={() => {\n                            const doc = parseDocumentSource(assignment.documentSource)\n                            if (!doc?.fileUrl) return\n                            const room = `assignment-doc-${assignment.id}`\n                            const url = `/student/pdf-tutoring?room=${encodeURIComponent(room)}&doc=${encodeURIComponent(doc.fileUrl)}`\n                            window.open(url, '_blank', 'noopener,noreferrer')\n                          }}\n                        >\n                          Work on Document\n                        </Button>\n                      )}\n                      {parseDocumentSource(assignment.documentSource)?.fileUrl && (\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => window.open(parseDocumentSource(assignment.documentSource)?.fileUrl, '_blank')}\n                        >\n                          Open Source\n                        </Button>\n                      )}\n                      {assignment.status === 'submitted' && assignment.score !== null && (\n                        <span className={`font-bold text-lg ${assignment.score >= 80 ? 'text-green-600' : assignment.score >= 60 ? 'text-amber-600' : 'text-red-600'}`}>\n                          {Math.round(assignment.score)}%\n                        </span>\n                      )}\n                      {getStatusBadge(assignment.status)}\n                      {assignment.status === 'pending' && (\n                        <Button size=\"sm\" onClick={() => handleStartTask(assignment.id)} className=\"gap-1\">\n                          Start <ArrowRight className=\"h-3 w-3\" />\n                        </Button>\n                      )}\n                      {assignment.status === 'overdue' && (\n                        <Button size=\"sm\" variant=\"outline\" onClick={() => handleStartTask(assignment.id)} className=\"gap-1\">\n                          Submit Late <ArrowRight className=\"h-3 w-3\" />\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                ))\n              )}\n            </TabsContent>\n          </Tabs>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Progress } from '@/components/ui/progress'\nimport { CheckCircle, XCircle, AlertCircle } from 'lucide-react'\nimport { PersonalizedFeedbackCard } from './PersonalizedFeedbackCard'\n\ninterface Question {\n  id: string\n  type: 'multiple_choice' | 'short_answer'\n  question: string\n  options?: string[]\n  correctAnswer?: string\n  rubric?: string\n}\n\n/** Per-question result for analytics and reports */\nexport interface QuestionResultItem {\n  questionId: string\n  correct: boolean\n  pointsEarned: number\n  pointsMax: number\n  selectedAnswer?: unknown\n  timeSpentSec?: number\n}\n\ninterface QuizModalProps {\n  questions: Question[]\n  onComplete: (results: { score: number; answers: Record<string, any>; questionResults?: QuestionResultItem[] }) => void\n  onClose: () => void\n  studentId?: string // Optional student ID for personalized feedback\n}\n\nexport function QuizModal({ questions, onComplete, onClose, studentId }: QuizModalProps) {\n  const [currentIndex, setCurrentIndex] = useState(0)\n  const [answers, setAnswers] = useState<Record<string, any>>({})\n  const [showResults, setShowResults] = useState(false)\n  const [gradedAnswers, setGradedAnswers] = useState<Record<string, {\n    correct: boolean\n    feedback?: string\n    explanation?: string\n    nextSteps?: string[]\n    relatedStruggles?: string[]\n    isPersonalized?: boolean\n    score?: number\n  }>>({})\n\n  const currentQuestion = questions[currentIndex]\n  const progress = ((currentIndex + 1) / questions.length) * 100\n\n  const handleAnswer = (answer: any) => {\n    setAnswers(prev => ({ ...prev, [currentQuestion.id]: answer }))\n  }\n\n  const handleNext = () => {\n    if (currentIndex < questions.length - 1) {\n      setCurrentIndex(prev => prev + 1)\n    } else {\n      gradeQuiz()\n    }\n  }\n\n  const gradeQuiz = async () => {\n    const graded: Record<string, {\n      correct: boolean\n      feedback?: string\n      explanation?: string\n      nextSteps?: string[]\n      relatedStruggles?: string[]\n      isPersonalized?: boolean\n      score?: number\n    }> = {}\n    let correctCount = 0\n\n    for (const question of questions) {\n      const answer = answers[question.id]\n\n      if (question.type === 'multiple_choice') {\n        const isCorrect = answer === question.correctAnswer\n        graded[question.id] = { correct: isCorrect, score: isCorrect ? 100 : 0 }\n        if (isCorrect) correctCount++\n      } else if (question.type === 'short_answer') {\n        // For short answer, we'll send to AI for grading with student context\n        try {\n          const response = await fetch('/api/quiz/grade', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              question: question.question,\n              rubric: question.rubric,\n              studentAnswer: answer,\n              maxScore: 100,\n              studentId // Pass student ID for personalized feedback\n            })\n          })\n          const result = await response.json()\n          graded[question.id] = {\n            correct: result.score >= 70,\n            feedback: result.feedback,\n            explanation: result.explanation,\n            nextSteps: result.nextSteps || [],\n            relatedStruggles: result.relatedStruggles || [],\n            isPersonalized: result.isPersonalized || false,\n            score: result.score\n          }\n          if (result.score >= 70) correctCount++\n        } catch {\n          graded[question.id] = {\n            correct: false,\n            feedback: 'Could not grade answer',\n            score: 0\n          }\n        }\n      }\n    }\n\n    setGradedAnswers(graded)\n    setShowResults(true)\n\n    const questionResults: QuestionResultItem[] = questions.map(q => ({\n      questionId: q.id,\n      correct: graded[q.id]?.correct ?? false,\n      pointsEarned: graded[q.id]?.score ?? 0,\n      pointsMax: 100,\n      selectedAnswer: answers[q.id]\n    }))\n\n    onComplete({\n      score: Math.round((correctCount / questions.length) * 100),\n      answers,\n      questionResults\n    })\n  }\n\n  if (showResults) {\n    const score = Math.round(\n      (Object.values(gradedAnswers).filter(g => g.correct).length / questions.length) * 100\n    )\n\n    return (\n      <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n        <Card className=\"max-w-lg w-full max-h-[90vh] overflow-auto\">\n          <CardHeader>\n            <CardTitle className=\"text-center\">Quiz Results</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-center mb-6\">\n              <div className=\"text-5xl font-bold mb-2\">\n                {score >= 80 ? (\n                  <span className=\"text-green-500\">{score}%</span>\n                ) : score >= 60 ? (\n                  <span className=\"text-yellow-500\">{score}%</span>\n                ) : (\n                  <span className=\"text-red-500\">{score}%</span>\n                )}\n              </div>\n              <p className=\"text-gray-600\">\n                {score >= 80\n                  ? 'Excellent work!'\n                  : score >= 60\n                    ? 'Good effort! Keep practicing.'\n                    : 'Keep studying! You will improve.'}\n              </p>\n            </div>\n\n            <div className=\"space-y-4\">\n              {questions.map((q, idx) => {\n                const graded = gradedAnswers[q.id]\n                const hasPersonalizedFeedback = graded?.isPersonalized && (graded.nextSteps?.length || graded.relatedStruggles?.length)\n\n                return (\n                  <div key={q.id}>\n                    <div className=\"flex items-start gap-2 mb-2\">\n                      {graded?.correct ? (\n                        <CheckCircle className=\"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      ) : (\n                        <XCircle className=\"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\" />\n                      )}\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium\">Question {idx + 1}</p>\n                        <p className=\"text-sm text-gray-600\">{q.question}</p>\n                      </div>\n                    </div>\n\n                    {hasPersonalizedFeedback ? (\n                      <PersonalizedFeedbackCard\n                        feedback={graded.feedback || ''}\n                        explanation={graded.explanation || ''}\n                        nextSteps={graded.nextSteps}\n                        relatedStruggles={graded.relatedStruggles}\n                        isPersonalized={graded.isPersonalized}\n                        score={graded.score || 0}\n                        maxScore={100}\n                      />\n                    ) : graded?.feedback && (\n                      <div className=\"ml-7 mt-2 p-3 bg-gray-50 rounded-lg border\">\n                        <p className=\"text-sm text-gray-700\">{graded.feedback}</p>\n                        {graded.explanation && (\n                          <p className=\"text-xs text-gray-500 mt-1\">{graded.explanation}</p>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                )\n              })}\n            </div>\n\n            <Button className=\"w-full mt-6\" onClick={onClose}>\n              Continue Learning\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <Card className=\"max-w-lg w-full\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-sm text-gray-500\">\n              Question {currentIndex + 1} of {questions.length}\n            </span>\n            <Button variant=\"ghost\" size=\"sm\" onClick={onClose}>\n              Skip\n            </Button>\n          </div>\n          <Progress value={progress} />\n          <CardTitle className=\"mt-4\">{currentQuestion.question}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {currentQuestion.type === 'multiple_choice' && currentQuestion.options && (\n            <div className=\"space-y-2\">\n              {currentQuestion.options.map((option, idx) => (\n                <button\n                  key={idx}\n                  onClick={() => handleAnswer(option)}\n                  className={`w-full p-4 text-left rounded-lg border transition-colors ${answers[currentQuestion.id] === option\n                      ? 'border-blue-500 bg-blue-50'\n                      : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                >\n                  {option}\n                </button>\n              ))}\n            </div>\n          )}\n\n          {currentQuestion.type === 'short_answer' && (\n            <div className=\"space-y-4\">\n              <textarea\n                value={answers[currentQuestion.id] || ''}\n                onChange={(e) => handleAnswer(e.target.value)}\n                placeholder=\"Type your answer here...\"\n                className=\"w-full h-32 p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              />\n              {currentQuestion.rubric && (\n                <p className=\"text-sm text-gray-500\">\n                  <AlertCircle className=\"w-4 h-4 inline mr-1\" />\n                  Grading criteria: {currentQuestion.rubric}\n                </p>\n              )}\n            </div>\n          )}\n\n          <Button\n            className=\"w-full mt-6\"\n            onClick={handleNext}\n            disabled={!answers[currentQuestion.id]}\n          >\n            {currentIndex < questions.length - 1 ? 'Next' : 'Submit'}\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","'use client'\n\nimport { Badge } from '@/components/ui/badge'\nimport { Card, CardContent } from '@/components/ui/card'\nimport { Sparkles, Target, BookOpen, TrendingUp } from 'lucide-react'\n\ninterface PersonalizedFeedbackCardProps {\n    feedback: string\n    explanation: string\n    nextSteps?: string[]\n    relatedStruggles?: string[]\n    isPersonalized?: boolean\n    score: number\n    maxScore: number\n}\n\nexport function PersonalizedFeedbackCard({\n    feedback,\n    explanation,\n    nextSteps = [],\n    relatedStruggles = [],\n    isPersonalized = false,\n    score,\n    maxScore\n}: PersonalizedFeedbackCardProps) {\n    const percentage = (score / maxScore) * 100\n\n    return (\n        <Card className=\"relative overflow-hidden border-blue-200/50 bg-gradient-to-br from-blue-50/50 to-purple-50/30\">\n            {isPersonalized && (\n                <div className=\"absolute top-3 right-3\">\n                    <Badge\n                        variant=\"outline\"\n                        className=\"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0 gap-1\"\n                    >\n                        <Sparkles className=\"w-3 h-3\" />\n                        Personalized for You\n                    </Badge>\n                </div>\n            )}\n\n            <CardContent className=\"pt-6 space-y-4\">\n                {/* Feedback */}\n                <div>\n                    <div className=\"flex items-center gap-2 mb-2\">\n                        <BookOpen className=\"w-4 h-4 text-blue-600\" />\n                        <h4 className=\"font-semibold text-sm text-gray-700\">Feedback</h4>\n                    </div>\n                    <p className=\"text-sm text-gray-800 leading-relaxed\">{feedback}</p>\n                </div>\n\n                {/* Explanation */}\n                {explanation && (\n                    <div>\n                        <p className=\"text-xs text-gray-600 leading-relaxed\">{explanation}</p>\n                    </div>\n                )}\n\n                {/* Next Steps */}\n                {nextSteps.length > 0 && (\n                    <div className=\"pt-2 border-t border-blue-100\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                            <Target className=\"w-4 h-4 text-purple-600\" />\n                            <h4 className=\"font-semibold text-sm text-gray-700\">Next Steps</h4>\n                        </div>\n                        <ul className=\"space-y-1.5\">\n                            {nextSteps.map((step, idx) => (\n                                <li key={idx} className=\"text-xs text-gray-700 flex items-start gap-2\">\n                                    <span className=\"text-purple-500 font-bold mt-0.5\">‚Ä¢</span>\n                                    <span>{step}</span>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                )}\n\n                {/* Related Struggles */}\n                {relatedStruggles.length > 0 && (\n                    <div className=\"pt-2 border-t border-blue-100\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                            <TrendingUp className=\"w-4 h-4 text-amber-600\" />\n                            <h4 className=\"font-semibold text-sm text-gray-700\">Related to Your Progress</h4>\n                        </div>\n                        <div className=\"flex flex-wrap gap-1.5\">\n                            {relatedStruggles.map((struggle, idx) => (\n                                <Badge\n                                    key={idx}\n                                    variant=\"outline\"\n                                    className=\"text-xs bg-amber-50 text-amber-700 border-amber-200\"\n                                >\n                                    {struggle}\n                                </Badge>\n                            ))}\n                        </div>\n                    </div>\n                )}\n\n                {/* Performance Indicator */}\n                {percentage >= 85 && (\n                    <div className=\"pt-2\">\n                        <Badge className=\"bg-green-100 text-green-700 border-green-200\">\n                            üéâ Excellent Progress!\n                        </Badge>\n                    </div>\n                )}\n                {percentage >= 70 && percentage < 85 && (\n                    <div className=\"pt-2\">\n                        <Badge className=\"bg-blue-100 text-blue-700 border-blue-200\">\n                            üëç Good Work!\n                        </Badge>\n                    </div>\n                )}\n                {percentage < 70 && (\n                    <div className=\"pt-2\">\n                        <Badge className=\"bg-amber-100 text-amber-700 border-amber-200\">\n                            ‚ö†Ô∏è Needs Review\n                        </Badge>\n                    </div>\n                )}\n            </CardContent>\n        </Card>\n    )\n}\n"],"names":[],"mappings":"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"}}]
}