;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="7a0db556-9fc2-7a99-3a04-ba306563ad7b")}catch(e){}}();
module.exports=[479969,a=>{"use strict";var b=a.i(260576),c=a.i(741510),d=a.i(454069),e=a.i(52028),f=a.i(113098),g=a.i(88684),h=a.i(333340),i=a.i(724403),j=a.i(342621),k=a.i(50730),l=a.i(892094),m=a.i(849639),n=a.i(748151),o=a.i(19926),p=a.i(458563),q=a.i(414030),r=a.i(293357);let s=(0,r.default)("clock-4",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var t=a.i(618349),u=a.i(897541);let v=(0,r.default)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var w=a.i(562117),x=a.i(226886),y=a.i(846438);let z={beginner:"bg-green-100 text-green-800",intermediate:"bg-yellow-100 text-yellow-800",advanced:"bg-red-100 text-red-800",expert:"bg-purple-100 text-purple-800"},A={introduction:"Introduction",concept:"Concept",example:"Example",practice:"Practice",review:"Review"};function B(){let a=(0,d.useParams)().curriculumId,[r,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)(new Set),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1);(0,c.useEffect)(()=>{O(),K(),L()},[a]);let K=()=>{let b=localStorage.getItem("tutorme-favorites");if(b)try{let c=JSON.parse(b);H(c.courses?.includes(a)||!1)}catch{}},L=async()=>{try{let b=await fetch(`/api/student/enrollments/check?curriculumId=${a}`,{credentials:"include"});if(b.ok){let a=await b.json();J(a.isEnrolled||!1)}}catch{}},M=async()=>{let a=await fetch("/api/csrf",{credentials:"include"}),b=await a.json().catch(()=>({}));return b?.token??null},N=async()=>{try{let b=await M(),c=await fetch("/api/student/enrollments",{method:"POST",headers:{"Content-Type":"application/json",...b&&{"X-CSRF-Token":b}},credentials:"include",body:JSON.stringify({curriculumId:a})});if(c.ok)y.toast.success("Successfully enrolled!"),J(!0);else{let b=await c.json();b.requiresPayment?window.location.href=`/payment?curriculumId=${a}&amount=${r?.price}&currency=${r?.currency}`:y.toast.error(b.error||"Failed to enroll")}}catch{y.toast.error("Failed to enroll")}},O=async()=>{D(!0);try{let b=await fetch(`/api/curriculum/${a}`);if(b.ok){let a=await b.json();B({...a.curriculum,rating:4.5+.5*Math.random(),reviewCount:Math.floor(100*Math.random())+20,price:a.curriculum.price||Math.floor(100*Math.random())+50,currency:a.curriculum.currency||"USD"}),a.curriculum.modules.length>0&&F(new Set([a.curriculum.modules[0].id]))}}catch(a){console.error("Failed to load curriculum:",a)}finally{D(!1)}};if(C)return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})});if(!r)return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(j.BookOpen,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Course not found"}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"This course does not exist or has been removed."}),(0,b.jsx)(e.default,{href:"/curriculum",children:(0,b.jsx)(g.Button,{children:"Back to courses"})})]})});let P=Math.round(r.progress.lessonsCompleted/r.progress.totalLessons*100),Q=(()=>{if(!r)return null;for(let a of r.modules)for(let b of a.lessons)if("NOT_STARTED"===b.status&&!b.isLocked||"IN_PROGRESS"===b.status)return b;return null})();return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,b.jsxs)(e.default,{href:"/curriculum",className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-900 mb-4",children:[(0,b.jsx)(q.ArrowLeft,{className:"w-4 h-4 mr-1"}),"Back to courses"]}),(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:r.name}),(0,b.jsxs)(h.Badge,{className:z[r.difficulty],children:["beginner"===r.difficulty&&"Beginner","intermediate"===r.difficulty&&"Intermediate","advanced"===r.difficulty&&"Advanced","expert"===r.difficulty&&"Expert"]})]}),(0,b.jsx)("p",{className:"text-gray-600 max-w-2xl",children:r.description}),(0,b.jsxs)("div",{className:"flex items-center gap-6 mt-4 text-sm text-gray-500",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(j.BookOpen,{className:"w-4 h-4"}),(0,b.jsxs)("span",{children:[r.modules.length," modules"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(p.Target,{className:"w-4 h-4"}),(0,b.jsxs)("span",{children:[r.progress.totalLessons," lessons"]})]}),r.hasOutline&&r.estimatedHours>0&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(s,{className:"w-4 h-4"}),(0,b.jsxs)("span",{children:[r.estimatedHours," hours"]})]}),r.rating&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(w.Star,{className:"w-4 h-4 fill-amber-400 text-amber-400"}),(0,b.jsxs)("span",{children:[r.rating.toFixed(1)," (",r.reviewCount," reviews)"]})]}),r.progress.averageScore&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(t.Award,{className:"w-4 h-4"}),(0,b.jsxs)("span",{children:["Avg score: ",Math.round(r.progress.averageScore),"%"]})]})]}),r.tutorName&&(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsxs)(e.default,{href:r.tutorUsername?`/u/${r.tutorUsername}`:"#",className:"text-sm text-indigo-600 hover:text-indigo-800",children:["By ",r.tutorName]})})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-3",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"icon",onClick:()=>{let b=localStorage.getItem("tutorme-favorites"),c=b?JSON.parse(b):{tutors:[],courses:[]};G?(c.courses=c.courses.filter(b=>b!==a),y.toast.success("Removed from favorites")):(c.courses=[...c.courses||[],a],y.toast.success("Added to favorites")),localStorage.setItem("tutorme-favorites",JSON.stringify(c)),H(!G)},className:G?"text-red-500":"",children:(0,b.jsx)(u.Heart,{className:`h-5 w-5 ${G?"fill-red-500":""}`})}),I?Q&&(0,b.jsx)(e.default,{href:`/curriculum/lessons/${Q.id}`,children:(0,b.jsxs)(g.Button,{size:"lg",className:"gap-2",children:[(0,b.jsx)(m.Play,{className:"w-5 h-5"}),"IN_PROGRESS"===Q.status?"Continue":"Start learning"]})}):(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[r.price&&(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["USD"===r.currency?"$":r.currency+" ",r.price]})}),(0,b.jsxs)(g.Button,{size:"lg",className:"gap-2",onClick:N,children:[(0,b.jsx)(v,{className:"w-5 h-5"}),"Enroll Now"]})]})]})]}),I&&(0,b.jsxs)("div",{className:"mt-8 bg-gray-50 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Overall progress"}),(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[P,"%"]})]}),(0,b.jsx)(i.Progress,{value:P,className:"h-3"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Completed ",r.progress.lessonsCompleted," / ",r.progress.totalLessons," lessons",r.progress.startedAt&&(0,b.jsxs)("span",{className:"ml-4",children:["Started: ",new Date(r.progress.startedAt).toLocaleDateString("en-US")]})]})]})]})}),r.coursePitch&&(0,b.jsx)("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8",children:(0,b.jsxs)(f.Card,{className:"border-indigo-200 bg-gradient-to-br from-indigo-50/50 to-purple-50/50",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2 text-indigo-900",children:[(0,b.jsx)(x.Sparkles,{className:"h-5 w-5 text-indigo-600"}),"About This Course"]}),(0,b.jsx)(f.CardDescription,{children:"Everything you need to know before enrolling"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"prose prose-slate prose-indigo max-w-none",dangerouslySetInnerHTML:{__html:r.coursePitch.replace(/^## (.*$)/gim,'<h2 class="text-xl font-bold mt-6 mb-3 text-slate-900">$1</h2>').replace(/^### (.*$)/gim,'<h3 class="text-lg font-semibold mt-4 mb-2 text-slate-800">$1</h3>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/^- (.*$)/gim,'<li class="ml-4 mb-1">$1</li>').replace(/(<li.*<\/li>\n?)+/g,'<ul class="list-disc mb-4">$&</ul>').replace(/\n\n/g,"<br/><br/>").replace(/üéØ|üìö|üë•|üéì|üèÜ|‚≠ê|üìù|üöÄ/g,'<span class="text-lg">$&</span>')}})})]})}),(0,b.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsx)("div",{className:"space-y-4",children:r.modules.map((a,c)=>{let d=E.has(a.id),h=Math.round(a.lessons.filter(a=>"COMPLETED"===a.status).length/a.lessons.length*100);return(0,b.jsxs)(f.Card,{className:"overflow-hidden",children:[(0,b.jsx)("div",{className:"p-4 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>{var b;return b=a.id,void F(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:c+1}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.description})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[h,"%"]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.lessons.filter(a=>"COMPLETED"===a.status).length," / ",a.lessons.length," lessons"]})]}),(0,b.jsx)(l.ChevronRight,{className:`w-5 h-5 text-gray-400 transition-transform ${d?"rotate-90":""}`})]})]})}),d&&(0,b.jsx)("div",{className:"border-t border-gray-200",children:a.lessons.map((c,d)=>(0,b.jsxs)("div",{className:`flex items-center justify-between p-4 hover:bg-gray-50 transition-colors ${d!==a.lessons.length-1?"border-b border-gray-100":""}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${"COMPLETED"===c.status?"bg-green-100 text-green-600":"IN_PROGRESS"===c.status?"bg-indigo-100 text-indigo-600":c.isLocked?"bg-gray-100 text-gray-400":"bg-gray-100 text-gray-600"}`,children:"COMPLETED"===c.status?(0,b.jsx)(n.CheckCircle2,{className:"w-5 h-5"}):c.isLocked?(0,b.jsx)(o.Lock,{className:"w-4 h-4"}):(0,b.jsx)("span",{className:"text-sm font-medium",children:d+1})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:`font-medium ${c.isLocked?"text-gray-400":"text-gray-900"}`,children:c.title}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-1",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(k.Clock,{className:"w-3 h-3"}),c.duration," min"]}),c.progress?.currentSection&&"IN_PROGRESS"===c.status&&(0,b.jsxs)("span",{className:"text-indigo-600",children:["Current: ",A[c.progress.currentSection]||c.progress.currentSection]}),c.progress?.score&&(0,b.jsxs)("span",{className:"text-green-600",children:["Score: ",Math.round(c.progress.score),"%"]})]})]})]}),!c.isLocked&&I&&(0,b.jsx)(e.default,{href:`/curriculum/lessons/${c.id}`,children:(0,b.jsx)(g.Button,{variant:"COMPLETED"===c.status?"outline":"default",size:"sm",children:"COMPLETED"===c.status?"Review":"IN_PROGRESS"===c.status?"Continue":"Start"})})]},c.id))})]},a.id)})})})]})}a.s(["default",()=>B],479969)}];

//# debugId=7a0db556-9fc2-7a99-3a04-ba306563ad7b
//# sourceMappingURL=e127f_src_app_%5Blocale%5D_%28student%29_curriculum_%5BcurriculumId%5D_page_tsx_cad93993._.js.map