;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="602dcc5e-83ce-da48-4724-f2e04ccf4e0e")}catch(e){}}();
module.exports=[35062,e=>e.a(async(t,r)=>{try{var a=e.i(620971),n=e.i(909105),o=e.i(320947),i=e.i(776751),s=e.i(357263),c=e.i(118989),l=e.i(450869),u=e.i(738597);e.i(688768);var d=e.i(257357),p=t([i,s,u]);async function m(e){let t=Date.now(),r=[];try{var n;let o,s,l=await h();r.push(l);let u=await y();r.push(u);let d=await w();r.push(d);let p=await E();r.push(p);let m=await _();r.push(m);let R=await f();r.push(R);let D=await g(e);r.push(D);let C=await v();r.push(C);let S=(o=(n=r).some(e=>"error"===e.status),s=n.some(e=>"warning"===e.status),o?"error":s?"warning":"healthy"),A=Date.now()-t,T={overall:S,checks:r,timestamp:new Date().toISOString(),environment:"production",version:process.env.APP_VERSION||process.env.npm_package_version||"1.0.0",region:process.env.DEPLOYMENT_REGION||"global",uptime:Math.floor(process.uptime())},I={"Content-Type":"application/json","X-Health-Status":S,"X-Health-Duration-Ms":A.toString(),"X-Region":process.env.DEPLOYMENT_REGION||"global","X-Version":process.env.APP_VERSION||process.env.npm_package_version||"1.0.0","X-Timestamp":new Date().toISOString(),"X-Compliance-Status":"healthy"===S?"PASSED":"FAILED","X-Security-Level":process.env.SECURITY_LEVEL||"HIGH","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Strict-Transport-Security":"max-age=31536000; includeSubDomains; preload","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Referrer-Policy":"strict-origin-when-cross-origin","Permissions-Policy":"camera=(), microphone=(), geolocation=()"};return"error"===S&&await i.securityAudit.logSecurityEvent({action:i.SECURITY_EVENT_TYPES.DEPLOYMENT_HEALTH_CHECK_FAILED,severity:i.SECURITY_SEVERITY.HIGH,description:"Global deployment health check failed with critical issues",metadata:{failedChecks:r.filter(e=>"error"===e.status).map(e=>e.name),totalDuration:A,status:S}}),c.globalPerformanceMonitor.trackApiEndpoint("/api/health/deployment",A,+("error"===S)),a.NextResponse.json(T,{status:"error"===S?503:200,headers:I})}catch(e){return console.error("Global deployment health check failed:",e),await i.securityAudit.logSecurityEvent({action:i.SECURITY_EVENT_TYPES.DEPLOYMENT_HEALTH_CHECK_EXCEPTION,severity:i.SECURITY_SEVERITY.CRITICAL,description:"Deployment health check threw an exception",metadata:{error:e instanceof Error?e.message:String(e)}}),a.NextResponse.json({error:"Global deployment health check failed",timestamp:new Date().toISOString(),environment:"production"},{status:503,headers:{"Content-Type":"application/json","X-Health-Status":"error"}})}}async function h(){let e=Date.now();try{await u.drizzleDb.transaction(async e=>{let[t]=await e.select({count:o.sql`count(*)::int`}).from(d.user),[r]=await e.select({count:o.sql`count(*)::int`}).from(d.curriculum),[a]=await e.select({count:o.sql`count(*)::int`}).from(d.liveSession),[n]=await e.select({count:o.sql`count(*)::int`}).from(d.payment),i=(t?.count??0)+(r?.count??0)+(a?.count??0)+(n?.count??0);if(0===i)throw Error("Database appears empty in production, possible data loss")});let t=Date.now()-e;if(t>1e3)return{name:"database",status:"warning",details:{latency_ms:t,issue:"Database response is slow",recommendation:"Consider database optimization"},duration:t};return{name:"database",status:"healthy",details:{latency_ms:t,connected:!0,orm:"drizzle"},duration:t}}catch(t){return{name:"database",status:"error",details:{error:"Database connectivity failed",type:t instanceof Error?t.message:"Unknown error"},duration:Date.now()-e}}}async function y(){let e=Date.now();try{let t=`health-check:${Date.now()}`,r={timestamp:Date.now(),environment:"production"};await l.cache.set(t,r,30);let a=await l.cache.get(t);if(!a||a.timestamp!==r.timestamp)throw Error("Cache data corruption detected");let n=Date.now()-e;return{name:"cache",status:"healthy",details:{latency_ms:n,connected:!0,redis_version:"7.0",memory_usage:process.memoryUsage()},duration:n}}catch(t){return{name:"cache",status:"error",details:{error:"Redis connectivity failed",type:t instanceof Error?t.message:"Unknown error"},duration:Date.now()-e}}}async function w(){let e=Date.now();try{let t=new Date(Date.now()-864e5),r=await u.drizzleDb.select().from(d.securityEvent).where((0,n.and)((0,n.gte)(d.securityEvent.createdAt,t),(0,n.eq)(d.securityEvent.severity,i.SECURITY_SEVERITY.CRITICAL))).limit(20),a=r.map(e=>({action:e.action,userId:e.userId,actorId:e.actorId,description:e.description,occurredAt:e.occurredAt??e.createdAt}));if(r.length>5)return{name:"security",status:"error",details:{issue:"Too many critical security events",critical_count:r.length,recent_events:a,recommendation:"Immediate security team review required"},duration:Date.now()-e};if(r.length>2)return{name:"security",status:"warning",details:{issue:"Above-normal critical security events",critical_count:r.length,recent_events:a,recommendation:"Security review recommended"},duration:Date.now()-e};return{name:"security",status:"healthy",details:{critical_events_count:r.length,security_systems_status:"operational",compliance_status:"compliant"},duration:Date.now()-e}}catch(t){return{name:"security",status:"error",details:{error:"Security audit system unavailable",type:t instanceof Error?t.message:"Unknown error"},duration:Date.now()-e}}}async function E(){let e=Date.now();try{let t=await s.complianceAudit.verifyGDPRCompliance(),r=await s.complianceAudit.verifyPIPLCompliance(),a="HIGH"===process.env.SECURITY_LEVEL?"verified":"limited",n=[];if(t.compliant||n.push("GDPR compliance gaps detected"),r.compliant||n.push("PIPL compliance gaps detected"),n.length>0)return{name:"compliance",status:"error",details:{issues:n,gdpr:t,pipl:r,pci_dss:a,recommendation:"Address compliance gaps before deployment"},duration:Date.now()-e};return{name:"compliance",status:"healthy",details:{gdpr:"compliant",pipl:"compliant",pci_dss:a,compliance_summary:"enterprise-ready"},duration:Date.now()-e}}catch(t){return{name:"compliance",status:"error",details:{error:"Compliance checking failed",type:t instanceof Error?t.message:"Unknown error"},duration:Date.now()-e}}}async function _(){let t=Date.now();try{let r=null,a=process.env.REDIS_URL;if(a){let{Redis:t}=await e.A(443460),n=new t(a,{maxRetriesPerRequest:1});r=await n.ping(),await n.quit()}let n=[];try{n=(await u.drizzleDb.execute(o.sql`SELECT state FROM pg_stat_replication WHERE state = 'streaming'`)).rows??[]}catch{}let i=n.length>0,s={uptime:process.uptime(),memory:process.memoryUsage(),cpu:process.cpuUsage()};return{name:"infrastructure",status:i?"healthy":"warning",details:{redis_status:"PONG"===r?"healthy":a?"error":"not_configured",replication_status:i?"active":"passive",system_metrics:s,node_version:process.version},duration:Date.now()-t}}catch(e){return{name:"infrastructure",status:"error",details:{error:"Infrastructure connectivity failed",type:e instanceof Error?e.message:"Unknown error"},duration:Date.now()-t}}}async function f(){let e=Date.now();try{let t={api_response_time:120,cache_hit_rate:.85,web_vitals:{lcp:1500,fid:100,cls:.05}},r=[];if(t.api_response_time>500&&r.push("API response time is high"),t.cache_hit_rate<.8&&r.push("Cache hit rate is below target"),t.web_vitals.lcp>2500&&r.push("Large Contentful Paint is poor"),r.length>0)return{name:"performance",status:"warning",details:{issues:r,metrics:t,target_metrics:{api_response_time:"<200ms",cache_hit_rate:">80%",lcp:"<2500ms",fid:"<100ms",cls:"<0.1"}},duration:Date.now()-e};return{name:"performance",status:"healthy",details:{metrics:t,baseline_performance:"good",performance_grade:"B+"},duration:Date.now()-e}}catch(t){return{name:"performance",status:"error",details:{error:"Performance monitoring unavailable",type:t instanceof Error?t.message:"Unknown error"},duration:Date.now()-e}}}async function g(e){let t=Date.now();try{let r=e.nextUrl.origin||"http://localhost:3003",a=["/api/health","/api/auth/session","/api/curriculums/list","/api/csrf"],n=await Promise.all(a.map(async e=>{let t=Date.now(),a=`${r}${e}`;try{let r=await fetch(a,{method:"GET",cache:"no-cache",headers:{Accept:"application/json"}});return{path:e,status:r.status<500?"healthy":"error",latency:Date.now()-t,http_status:r.status}}catch(r){return{path:e,status:"error",latency:Date.now()-t,error:r instanceof Error?r.message:"Network error"}}})),o=n.filter(e=>"error"===e.status);if(o.length>0)return{name:"critical_endpoints",status:"error",details:{failed_endpoints:o,total_tested:a.length,failure_rate:o.length/a.length},duration:Date.now()-t};return{name:"critical_endpoints",status:"healthy",details:{all_endpoints_healthy:!0,latency_summary:n.map(e=>({path:e.path,latency:e.latency})),critical_services_operational:!0},duration:Date.now()-t}}catch(e){return{name:"critical_endpoints",status:"error",details:{error:"Critical endpoint testing failed",type:e instanceof Error?e.message:"Unknown error"},duration:Date.now()-t}}}async function v(){let e=Date.now();try{let t=["DATABASE_URL","NEXTAUTH_SECRET","NEXT_PUBLIC_APP_URL"].filter(e=>!process.env[e]),r=["REDIS_URL","SECURITY_LEVEL"].filter(e=>!!process.env[e]),a={environment_variables:0===t.length?"complete":"incomplete",security_configurations:"HIGH"===process.env.SECURITY_LEVEL?"enterprise":"standard",ssl_enabled:"true"===process.env.SSL_ENABLED,monitoring_enabled:!!process.env.SENTRY_DSN||!!process.env.NEXT_PUBLIC_SENTRY_DSN,backup_configured:"true"===process.env.BACKUP_ENABLED,load_balancer_ready:"true"===process.env.LOAD_BALANCER_ENABLED,redis_configured:!!process.env.REDIS_URL,optional_vars_present:r};if(t.length>0)return{name:"deployment_readiness",status:"error",details:{missing_environment_variables:t,deployment_checks:a,recommendation:"Complete required environment variables before production deployment"},duration:Date.now()-e};if(!a.monitoring_enabled)return{name:"deployment_readiness",status:"warning",details:{issue:"Monitoring not fully configured",deployment_checks:a,recommendation:"Enable comprehensive monitoring for enterprise deployment"},duration:Date.now()-e};return{name:"deployment_readiness",status:"healthy",details:{deployment_checks:a,enterprise_readiness:"global-ready",security_compliance:"enterprise-grade"},duration:Date.now()-e}}catch(t){return{name:"deployment_readiness",status:"error",details:{error:"Deployment readiness check failed",type:t instanceof Error?t.message:"Unknown error"},duration:Date.now()-e}}}[i,s,u]=p.then?(await p)():p,e.s(["GET",()=>m,"dynamic",0,"force-dynamic"]),r()}catch(e){r(e)}},!1),574493,e=>e.a(async(t,r)=>{try{var a=e.i(78315),n=e.i(586961),o=e.i(196657),i=e.i(899733),s=e.i(233979),c=e.i(631683),l=e.i(840960),u=e.i(711373),d=e.i(699699),p=e.i(521140),m=e.i(205260),h=e.i(500249),y=e.i(431740),w=e.i(82608),E=e.i(635207),_=e.i(193695);e.i(708038);var f=e.i(447430),g=e.i(35062),v=t([g]);[g]=v.then?(await v)():v;let C=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/health/deployment/route",pathname:"/api/health/deployment",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/app/api/health/deployment/route.ts",nextConfigOutput:"",userland:g}),{workAsyncStorage:S,workUnitAsyncStorage:A,serverHooks:T}=C;function R(){return(0,o.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:A})}async function D(e,t,r){C.isDev&&(0,i.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let a="/api/health/deployment/route";a=a.replace(/\/index$/,"")||"/";let o=await C.prepare(e,t,{srcPage:a,multiZoneDraftMode:!1});if(!o)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:g,params:v,nextConfig:R,parsedUrl:D,isDraftMode:S,prerenderManifest:A,routerServerContext:T,isOnDemandRevalidate:I,revalidateOnlyGenerated:b,resolvedPathname:P,clientReferenceManifest:N,serverActionsManifest:U}=o,L=(0,l.normalizeAppPath)(a),O=!!(A.dynamicRoutes[L]||A.routes[P]),x=async()=>((null==T?void 0:T.render404)?await T.render404(e,t,D,!1):t.end("This page could not be found"),null);if(O&&!S){let e=!!A.routes[P],t=A.dynamicRoutes[L];if(t&&!1===t.fallback&&!e){if(R.experimental.adapterPath)return await x();throw new _.NoFallbackError}}let k=null;!O||C.isDev||S||(k=P,k="/index"===k?"/":k);let H=!0===C.isDev||!O,q=O&&!H;U&&N&&(0,c.setManifestsSingleton)({page:a,clientReferenceManifest:N,serverActionsManifest:U});let M=e.method||"GET",Y=(0,s.getTracer)(),G=Y.getActiveScopeSpan(),X={params:v,prerenderManifest:A,renderOpts:{experimental:{authInterrupts:!!R.experimental.authInterrupts},cacheComponents:!!R.cacheComponents,supportsDynamicResponse:H,incrementalCache:(0,i.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:R.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a,n)=>C.onRequestError(e,t,a,n,T)},sharedContext:{buildId:g}},V=new u.NodeNextRequest(e),B=new u.NodeNextResponse(t),K=d.NextRequestAdapter.fromNodeNextRequest(V,(0,d.signalFromNodeResponse)(t));try{let o=async e=>C.handle(K,X).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=Y.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${M} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${M} ${a}`)}),c=!!(0,i.getRequestMeta)(e,"minimalMode"),l=async i=>{var s,l;let u=async({previousCacheEntry:n})=>{try{if(!c&&I&&b&&!n)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await o(i);e.fetchMetrics=X.renderOpts.fetchMetrics;let s=X.renderOpts.pendingWaitUntil;s&&r.waitUntil&&(r.waitUntil(s),s=void 0);let l=X.renderOpts.collectedTags;if(!O)return await (0,h.sendResponse)(V,B,a,X.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,y.toNodeOutgoingHttpHeaders)(a.headers);l&&(t[E.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==X.renderOpts.collectedRevalidate&&!(X.renderOpts.collectedRevalidate>=E.INFINITE_CACHE)&&X.renderOpts.collectedRevalidate,n=void 0===X.renderOpts.collectedExpire||X.renderOpts.collectedExpire>=E.INFINITE_CACHE?void 0:X.renderOpts.collectedExpire;return{value:{kind:f.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==n?void 0:n.isStale)&&await C.onRequestError(e,t,{routerKind:"App Router",routePath:a,routeType:"route",revalidateReason:(0,m.getRevalidateReason)({isStaticGeneration:q,isOnDemandRevalidate:I})},!1,T),t}},d=await C.handleResponse({req:e,nextConfig:R,cacheKey:k,routeKind:n.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:A,isRoutePPREnabled:!1,isOnDemandRevalidate:I,revalidateOnlyGenerated:b,responseGenerator:u,waitUntil:r.waitUntil,isMinimalMode:c});if(!O)return null;if((null==d||null==(s=d.value)?void 0:s.kind)!==f.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(l=d.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});c||t.setHeader("x-nextjs-cache",I?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),S&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,y.fromNodeOutgoingHttpHeaders)(d.value.headers);return c&&O||p.delete(E.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,w.getCacheControlHeader)(d.cacheControl)),await (0,h.sendResponse)(V,B,new Response(d.value.body,{headers:p,status:d.value.status||200})),null};G?await l(G):await Y.withPropagatedContext(e.headers,()=>Y.trace(p.BaseServerSpan.handleRequest,{spanName:`${M} ${a}`,kind:s.SpanKind.SERVER,attributes:{"http.method":M,"http.target":e.url}},l))}catch(t){if(t instanceof _.NoFallbackError||await C.onRequestError(e,t,{routerKind:"App Router",routePath:L,routeType:"route",revalidateReason:(0,m.getRevalidateReason)({isStaticGeneration:q,isOnDemandRevalidate:I})},!1,T),O)throw t;return await (0,h.sendResponse)(V,B,new Response(null,{status:500})),null}}e.s(["handler",()=>D,"patchFetch",()=>R,"routeModule",()=>C,"serverHooks",()=>T,"workAsyncStorage",()=>S,"workUnitAsyncStorage",()=>A]),r()}catch(e){r(e)}},!1)];

//# debugId=602dcc5e-83ce-da48-4724-f2e04ccf4e0e
//# sourceMappingURL=ADK_WORKSPACE_TutorMekimi_tutorme-app_e9dae825._.js.map