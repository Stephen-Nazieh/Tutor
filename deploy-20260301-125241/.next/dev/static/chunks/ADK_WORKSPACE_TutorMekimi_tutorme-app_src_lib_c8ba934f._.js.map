{
  "version": 3,
  "sources": [],
  "debugId": "314867d2-d5bb-2ebe-6567-9b2b881d5e0a",
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/lib/ai/memory-service.ts"],"sourcesContent":["/**\n * Memory Service\n * The \"Shared Brain\" for AI Agents\n * Manages context persistence and retrieval\n */\n\nimport { StudentContext, StudentProfile, LearningState, AgentSignal } from './types/context'\n\n// Mock Database (In-Memory for now)\nconst profiles = new Map<string, StudentProfile>()\nconst states = new Map<string, LearningState>()\nconst signals = new Map<string, AgentSignal[]>()\nconst roomTranscripts = new Map<string, any[]>()\n\n// Initialize with some mock data for testing\nconst MOCK_STUDENT_ID = 'student-1'\nprofiles.set(MOCK_STUDENT_ID, {\n    id: MOCK_STUDENT_ID,\n    name: 'Sarah Chen',\n    age: 16,\n    level: 'B1',\n    learningStyle: 'visual',\n    interests: ['music', 'technology', 'travel'],\n    goals: ['improve_pronunciation', 'vocabulary_expansion'],\n    preferredVoice: { gender: 'female', accent: 'us' }\n})\n\nstates.set(MOCK_STUDENT_ID, {\n    currentMood: 'neutral',\n    energyLevel: 80,\n    recentStruggles: [],\n    masteredTopics: ['present_perfect', 'basic_greetings'],\n    activeTopics: ['conditionals', 'phrasal_verbs']\n})\n\nsignals.set(MOCK_STUDENT_ID, [])\n\nexport class MemoryService {\n    /**\n     * Get the full context for a student\n     * Aggregates Profile + State + Signals\n     */\n    static async getStudentContext(studentId: string): Promise<StudentContext | null> {\n        const profile = profiles.get(studentId)\n        if (!profile) return null\n\n        const state = states.get(studentId) || this.getInitialState()\n        const studentSignals = signals.get(studentId) || []\n\n        // Filter out expired signals\n        const activeSignals = studentSignals.filter(s => !s.expiresAt || s.expiresAt > Date.now())\n\n        return {\n            profile,\n            state,\n            signals: activeSignals\n        }\n    }\n\n    /**\n     * Transcript Management\n     */\n    static appendTranscript(roomId: string, entry: any) {\n        const current = roomTranscripts.get(roomId) || []\n        roomTranscripts.set(roomId, [...current, entry])\n    }\n\n    static getTranscript(roomId: string): any[] {\n        return roomTranscripts.get(roomId) || []\n    }\n\n    /**\n     * Record a new signal from an agent\n     */\n    static async recordSignal(studentId: string, signal: Omit<AgentSignal, 'id' | 'timestamp'>) {\n        const newSignal: AgentSignal = {\n            ...signal,\n            id: Math.random().toString(36).substring(7),\n            timestamp: Date.now()\n        }\n\n        const currentSignals = signals.get(studentId) || []\n        signals.set(studentId, [...currentSignals, newSignal])\n\n        // Auto-update state based on signals\n        if (signal.type === 'struggle_detected') {\n            await this.updateState(studentId, (state) => {\n                state.recentStruggles.push({\n                    topic: signal.context?.topic || 'unknown',\n                    errorType: signal.context?.errorType || 'general',\n                    severity: signal.context?.severity || 5,\n                    detectedAt: Date.now()\n                })\n                // Keep only last 5 struggles\n                if (state.recentStruggles.length > 5) state.recentStruggles.shift()\n                return state\n            })\n        }\n    }\n\n    /**\n     * Update the dynamic learning state\n     */\n    static async updateState(studentId: string, updateFn: (state: LearningState) => LearningState) {\n        const currentState = states.get(studentId) || this.getInitialState()\n        const newState = updateFn({ ...currentState })\n        states.set(studentId, newState)\n    }\n\n    /**\n     * Get initial state for new students\n     */\n    private static getInitialState(): LearningState {\n        return {\n            currentMood: 'neutral',\n            energyLevel: 100,\n            recentStruggles: [],\n            masteredTopics: [],\n            activeTopics: []\n        }\n    }\n\n    /**\n     * Analyze Transcript Summary and update context\n     * This is the bridge from Classroom TA to Personal Tutor\n     */\n    static async processClassSummary(studentId: string, summaryJson: any) {\n        // 1. Record the summary signal\n        await this.recordSignal(studentId, {\n            source: 'classroom_ta',\n            type: 'topic_requested', // Or a new type 'class_summary'\n            content: `Completed class on ${summaryJson.topic}. Status: ${summaryJson.status}`,\n            context: summaryJson\n        })\n\n        // 2. Update state based on summary\n        await this.updateState(studentId, (state) => {\n            // Add struggles\n            if (summaryJson.struggles && Array.isArray(summaryJson.struggles)) {\n                summaryJson.struggles.forEach((s: string) => {\n                    state.recentStruggles.push({\n                        topic: s,\n                        errorType: 'general',\n                        severity: 7,\n                        detectedAt: Date.now()\n                    })\n                })\n            }\n\n            // Update active topics\n            if (summaryJson.topic) {\n                if (!state.activeTopics.includes(summaryJson.topic)) {\n                    state.activeTopics.push(summaryJson.topic)\n                }\n            }\n\n            return state\n        })\n    }\n\n    /**\n     * Record Quiz Result and Update Context\n     * Updates student context based on quiz performance\n     */\n    static async recordQuizResult(studentId: string, result: {\n        topic: string\n        score: number\n        maxScore: number\n        questionTypes: string[]\n    }) {\n        const percentage = result.score / result.maxScore\n\n        // Record signal\n        await this.recordSignal(studentId, {\n            source: 'personal_tutor',\n            type: percentage >= 0.7 ? 'mastery_achieved' : 'struggle_detected',\n            content: `Quiz on ${result.topic}: ${result.score}/${result.maxScore} (${Math.round(percentage * 100)}%)`,\n            context: result\n        })\n\n        // Update state based on performance\n        await this.updateState(studentId, (state) => {\n            if (percentage < 0.7) {\n                // Poor performance - add to struggles\n                const existingStruggle = state.recentStruggles.find(s => s.topic === result.topic)\n                if (!existingStruggle) {\n                    state.recentStruggles.push({\n                        topic: result.topic,\n                        errorType: 'general',\n                        severity: Math.round((1 - percentage) * 10), // Higher severity for lower scores\n                        detectedAt: Date.now()\n                    })\n                    // Keep only last 10 struggles\n                    if (state.recentStruggles.length > 10) {\n                        state.recentStruggles.shift()\n                    }\n                }\n\n                // Add to active topics if not already there\n                if (!state.activeTopics.includes(result.topic)) {\n                    state.activeTopics.push(result.topic)\n                }\n            } else if (percentage >= 0.85) {\n                // Excellent performance - add to mastered topics\n                if (!state.masteredTopics.includes(result.topic)) {\n                    state.masteredTopics.push(result.topic)\n                }\n\n                // Remove from struggles if present\n                state.recentStruggles = state.recentStruggles.filter(s => s.topic !== result.topic)\n            }\n\n            return state\n        })\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/lib/extract-file-text.ts"],"sourcesContent":["// @ts-nocheck\n/**\n * Extract plain text from uploaded files: .txt, .md, .pdf, .docx, and images (OCR).\n * Used by the course/subject materials upload flow.\n */\n\nexport async function extractTextFromFile(file: File): Promise<string> {\n  const name = file.name.toLowerCase()\n  const type = file.type\n\n  // Plain text\n  if (\n    type === 'text/plain' ||\n    type.startsWith('text/') ||\n    name.endsWith('.txt') ||\n    name.endsWith('.md') ||\n    name.endsWith('.markdown')\n  ) {\n    return readAsText(file)\n  }\n\n  // PDF\n  if (type === 'application/pdf' || name.endsWith('.pdf')) {\n    return extractPdfText(file)\n  }\n\n  // Word .docx\n  if (\n    type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' ||\n    name.endsWith('.docx')\n  ) {\n    return extractDocxText(file)\n  }\n\n  // Legacy .doc - treat as binary; we could try mammoth with .doc but support is limited\n  if (name.endsWith('.doc')) {\n    try {\n      return extractDocxText(file)\n    } catch {\n      return readAsText(file).catch(() => '')\n    }\n  }\n\n  // Images: OCR\n  if (type.startsWith('image/')) {\n    return extractImageText(file)\n  }\n\n  // Fallback: try as text\n  return readAsText(file).catch(() => '')\n}\n\nfunction readAsText(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    reader.onload = () => resolve(String(reader.result ?? ''))\n    reader.onerror = () => reject(reader.error)\n    reader.readAsText(file)\n  })\n}\n\nasync function extractPdfText(file: File): Promise<string> {\n  const pdfjs = await import('pdfjs-dist')\n  // Worker must be same-origin (CSP blocks external scripts). Served from public/ via copy-pdf-worker script.\n  if (typeof window !== 'undefined') {\n    const opts = (pdfjs as { GlobalWorkerOptions?: { workerSrc?: string } }).GlobalWorkerOptions\n    if (opts && !opts.workerSrc) {\n      opts.workerSrc = '/pdf.worker.min.mjs'\n    }\n  }\n  const data = await file.arrayBuffer()\n  const doc = await pdfjs.getDocument({ data }).promise\n  const numPages = doc.numPages\n  const parts: string[] = []\n  for (let i = 1; i <= numPages; i++) {\n    const page = await doc.getPage(i)\n    const content = await page.getTextContent()\n    const pageText = content.items.map((item: { str?: string }) => (item as { str?: string }).str ?? '').join(' ')\n    parts.push(pageText)\n  }\n  return parts.join('\\n\\n').trim() || ''\n}\n\nasync function extractDocxText(file: File): Promise<string> {\n  const mammoth = await import('mammoth')\n  const arrayBuffer = await file.arrayBuffer()\n  const result = await mammoth.extractRawText({ arrayBuffer })\n  return (result.value || '').trim()\n}\n\nasync function extractImageText(file: File): Promise<string> {\n  const mod = await import('tesseract.js')\n  const api = (mod as { default?: { recognize: (image: File, lang?: string, opts?: object) => Promise<{ data: { text?: string } }> }; recognize?: (image: File, lang?: string, opts?: object) => Promise<{ data: { text?: string } }> }).default ?? mod\n  const { data } = await api.recognize(file, 'eng', { logger: () => {} })\n  return (data?.text || '').trim()\n}\n"],"names":[],"mappings":"AAAA,cAAc;AACd;;;CAGC;;;;AAEM,eAAe,oBAAoB,IAAU;IAClD,MAAM,OAAO,KAAK,IAAI,CAAC,WAAW;IAClC,MAAM,OAAO,KAAK,IAAI;IAEtB,aAAa;IACb,IACE,SAAS,gBACT,KAAK,UAAU,CAAC,YAChB,KAAK,QAAQ,CAAC,WACd,KAAK,QAAQ,CAAC,UACd,KAAK,QAAQ,CAAC,cACd;QACA,OAAO,WAAW;IACpB;IAEA,MAAM;IACN,IAAI,SAAS,qBAAqB,KAAK,QAAQ,CAAC,SAAS;QACvD,OAAO,eAAe;IACxB;IAEA,aAAa;IACb,IACE,SAAS,6EACT,KAAK,QAAQ,CAAC,UACd;QACA,OAAO,gBAAgB;IACzB;IAEA,uFAAuF;IACvF,IAAI,KAAK,QAAQ,CAAC,SAAS;QACzB,IAAI;YACF,OAAO,gBAAgB;QACzB,EAAE,OAAM;YACN,OAAO,WAAW,MAAM,KAAK,CAAC,IAAM;QACtC;IACF;IAEA,cAAc;IACd,IAAI,KAAK,UAAU,CAAC,WAAW;QAC7B,OAAO,iBAAiB;IAC1B;IAEA,wBAAwB;IACxB,OAAO,WAAW,MAAM,KAAK,CAAC,IAAM;AACtC;AAEA,SAAS,WAAW,IAAU;IAC5B,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG,IAAM,QAAQ,OAAO,OAAO,MAAM,IAAI;QACtD,OAAO,OAAO,GAAG,IAAM,OAAO,OAAO,KAAK;QAC1C,OAAO,UAAU,CAAC;IACpB;AACF;AAEA,eAAe,eAAe,IAAU;IACtC,MAAM,QAAQ;IACd,4GAA4G;IAC5G,wCAAmC;QACjC,MAAM,OAAO,AAAC,MAA2D,mBAAmB;QAC5F,IAAI,QAAQ,CAAC,KAAK,SAAS,EAAE;YAC3B,KAAK,SAAS,GAAG;QACnB;IACF;IACA,MAAM,OAAO,MAAM,KAAK,WAAW;IACnC,MAAM,MAAM,MAAM,MAAM,WAAW,CAAC;QAAE;IAAK,GAAG,OAAO;IACrD,MAAM,WAAW,IAAI,QAAQ;IAC7B,MAAM,QAAkB,EAAE;IAC1B,IAAK,IAAI,IAAI,GAAG,KAAK,UAAU,IAAK;QAClC,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC;QAC/B,MAAM,UAAU,MAAM,KAAK,cAAc;QACzC,MAAM,WAAW,QAAQ,KAAK,CAAC,GAAG,CAAC,CAAC,OAA2B,AAAC,KAA0B,GAAG,IAAI,IAAI,IAAI,CAAC;QAC1G,MAAM,IAAI,CAAC;IACb;IACA,OAAO,MAAM,IAAI,CAAC,QAAQ,IAAI,MAAM;AACtC;AAEA,eAAe,gBAAgB,IAAU;IACvC,MAAM,UAAU;IAChB,MAAM,cAAc,MAAM,KAAK,WAAW;IAC1C,MAAM,SAAS,MAAM,QAAQ,cAAc,CAAC;QAAE;IAAY;IAC1D,OAAO,CAAC,OAAO,KAAK,IAAI,EAAE,EAAE,IAAI;AAClC;AAEA,eAAe,iBAAiB,IAAU;IACxC,MAAM,MAAM;IACZ,MAAM,MAAM,AAAC,IAA0N,OAAO,IAAI;IAClP,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,SAAS,CAAC,MAAM,OAAO;QAAE,QAAQ,KAAO;IAAE;IACrE,OAAO,CAAC,MAAM,QAAQ,EAAE,EAAE,IAAI;AAChC"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/src/lib/pdf-tutoring/coordinates.ts"],"sourcesContent":["export interface PointPx {\n  x: number\n  y: number\n}\n\nexport interface PointPercent {\n  x: number\n  y: number\n}\n\nfunction clampPercent(value: number): number {\n  return Math.max(0, Math.min(100, value))\n}\n\nexport function pxToPercent(value: number, total: number): number {\n  if (!Number.isFinite(value) || !Number.isFinite(total) || total <= 0) return 0\n  return clampPercent((value / total) * 100)\n}\n\nexport function percentToPx(value: number, total: number): number {\n  if (!Number.isFinite(value) || !Number.isFinite(total) || total <= 0) return 0\n  return (value / 100) * total\n}\n\nexport function pointToPercent(point: PointPx, width: number, height: number): PointPercent {\n  return {\n    x: pxToPercent(point.x, width),\n    y: pxToPercent(point.y, height),\n  }\n}\n\nexport function pointToPx(point: PointPercent, width: number, height: number): PointPx {\n  return {\n    x: percentToPx(point.x, width),\n    y: percentToPx(point.y, height),\n  }\n}\n\nexport function rectToPercent<T extends { left?: number; top?: number; width?: number; height?: number }>(\n  rect: T,\n  width: number,\n  height: number\n): T {\n  return {\n    ...rect,\n    ...(typeof rect.left === 'number' ? { left: pxToPercent(rect.left, width) } : {}),\n    ...(typeof rect.top === 'number' ? { top: pxToPercent(rect.top, height) } : {}),\n    ...(typeof rect.width === 'number' ? { width: pxToPercent(rect.width, width) } : {}),\n    ...(typeof rect.height === 'number' ? { height: pxToPercent(rect.height, height) } : {}),\n  }\n}\n\nexport function rectToPx<T extends { left?: number; top?: number; width?: number; height?: number }>(\n  rect: T,\n  width: number,\n  height: number\n): T {\n  return {\n    ...rect,\n    ...(typeof rect.left === 'number' ? { left: percentToPx(rect.left, width) } : {}),\n    ...(typeof rect.top === 'number' ? { top: percentToPx(rect.top, height) } : {}),\n    ...(typeof rect.width === 'number' ? { width: percentToPx(rect.width, width) } : {}),\n    ...(typeof rect.height === 'number' ? { height: percentToPx(rect.height, height) } : {}),\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAUA,SAAS,aAAa,KAAa;IACjC,OAAO,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,KAAK;AACnC;AAEO,SAAS,YAAY,KAAa,EAAE,KAAa;IACtD,IAAI,CAAC,OAAO,QAAQ,CAAC,UAAU,CAAC,OAAO,QAAQ,CAAC,UAAU,SAAS,GAAG,OAAO;IAC7E,OAAO,aAAa,AAAC,QAAQ,QAAS;AACxC;AAEO,SAAS,YAAY,KAAa,EAAE,KAAa;IACtD,IAAI,CAAC,OAAO,QAAQ,CAAC,UAAU,CAAC,OAAO,QAAQ,CAAC,UAAU,SAAS,GAAG,OAAO;IAC7E,OAAO,AAAC,QAAQ,MAAO;AACzB;AAEO,SAAS,eAAe,KAAc,EAAE,KAAa,EAAE,MAAc;IAC1E,OAAO;QACL,GAAG,YAAY,MAAM,CAAC,EAAE;QACxB,GAAG,YAAY,MAAM,CAAC,EAAE;IAC1B;AACF;AAEO,SAAS,UAAU,KAAmB,EAAE,KAAa,EAAE,MAAc;IAC1E,OAAO;QACL,GAAG,YAAY,MAAM,CAAC,EAAE;QACxB,GAAG,YAAY,MAAM,CAAC,EAAE;IAC1B;AACF;AAEO,SAAS,cACd,IAAO,EACP,KAAa,EACb,MAAc;IAEd,OAAO;QACL,GAAG,IAAI;QACP,GAAI,OAAO,KAAK,IAAI,KAAK,WAAW;YAAE,MAAM,YAAY,KAAK,IAAI,EAAE;QAAO,IAAI,CAAC,CAAC;QAChF,GAAI,OAAO,KAAK,GAAG,KAAK,WAAW;YAAE,KAAK,YAAY,KAAK,GAAG,EAAE;QAAQ,IAAI,CAAC,CAAC;QAC9E,GAAI,OAAO,KAAK,KAAK,KAAK,WAAW;YAAE,OAAO,YAAY,KAAK,KAAK,EAAE;QAAO,IAAI,CAAC,CAAC;QACnF,GAAI,OAAO,KAAK,MAAM,KAAK,WAAW;YAAE,QAAQ,YAAY,KAAK,MAAM,EAAE;QAAQ,IAAI,CAAC,CAAC;IACzF;AACF;AAEO,SAAS,SACd,IAAO,EACP,KAAa,EACb,MAAc;IAEd,OAAO;QACL,GAAG,IAAI;QACP,GAAI,OAAO,KAAK,IAAI,KAAK,WAAW;YAAE,MAAM,YAAY,KAAK,IAAI,EAAE;QAAO,IAAI,CAAC,CAAC;QAChF,GAAI,OAAO,KAAK,GAAG,KAAK,WAAW;YAAE,KAAK,YAAY,KAAK,GAAG,EAAE;QAAQ,IAAI,CAAC,CAAC;QAC9E,GAAI,OAAO,KAAK,KAAK,KAAK,WAAW;YAAE,OAAO,YAAY,KAAK,KAAK,EAAE;QAAO,IAAI,CAAC,CAAC;QACnF,GAAI,OAAO,KAAK,MAAM,KAAK,WAAW;YAAE,QAAQ,YAAY,KAAK,MAAM,EAAE;QAAQ,IAAI,CAAC,CAAC;IACzF;AACF"}}]
}