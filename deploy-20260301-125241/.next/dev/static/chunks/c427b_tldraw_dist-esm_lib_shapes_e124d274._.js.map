{
  "version": 3,
  "sources": [],
  "debugId": "39a428a2-a435-2d65-17bb-50616d101f44",
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/draw/getPath.ts"],"sourcesContent":["import {\n\tEASINGS,\n\tPI,\n\tSIN,\n\tTLDefaultDashStyle,\n\tTLDrawShape,\n\tTLDrawShapeSegment,\n\tVec,\n\tb64Vecs,\n\tmodulate,\n} from '@tldraw/editor'\nimport { StrokeOptions } from '../shared/freehand/types'\n\nconst PEN_EASING = (t: number) => t * 0.65 + SIN((t * PI) / 2) * 0.35\n\nconst simulatePressureSettings = (strokeWidth: number): StrokeOptions => {\n\treturn {\n\t\tsize: strokeWidth,\n\t\tthinning: 0.5,\n\t\tstreamline: modulate(strokeWidth, [9, 16], [0.64, 0.74], true), // 0.62 + ((1 + strokeWidth) / 8) * 0.06,\n\t\tsmoothing: 0.62,\n\t\teasing: EASINGS.easeOutSine,\n\t\tsimulatePressure: true,\n\t}\n}\n\nconst realPressureSettings = (strokeWidth: number): StrokeOptions => {\n\treturn {\n\t\tsize: 1 + strokeWidth * 1.2,\n\t\tthinning: 0.62,\n\t\tstreamline: 0.62,\n\t\tsmoothing: 0.62,\n\t\tsimulatePressure: false,\n\t\teasing: PEN_EASING,\n\t}\n}\n\nconst solidSettings = (strokeWidth: number): StrokeOptions => {\n\treturn {\n\t\tsize: strokeWidth,\n\t\tthinning: 0,\n\t\tstreamline: modulate(strokeWidth, [9, 16], [0.64, 0.74], true), // 0.62 + ((1 + strokeWidth) / 8) * 0.06,\n\t\tsmoothing: 0.62,\n\t\tsimulatePressure: false,\n\t\teasing: EASINGS.linear,\n\t}\n}\n\nconst solidRealPressureSettings = (strokeWidth: number): StrokeOptions => {\n\treturn {\n\t\tsize: strokeWidth,\n\t\tthinning: 0,\n\t\tstreamline: 0.62,\n\t\tsmoothing: 0.62,\n\t\tsimulatePressure: false,\n\t\teasing: EASINGS.linear,\n\t}\n}\n\nexport function getHighlightFreehandSettings({\n\tstrokeWidth,\n\tshowAsComplete,\n}: {\n\tstrokeWidth: number\n\tshowAsComplete: boolean\n}): StrokeOptions {\n\treturn {\n\t\tsize: 1 + strokeWidth,\n\t\tthinning: 0,\n\t\tstreamline: 0.5,\n\t\tsmoothing: 0.5,\n\t\tsimulatePressure: false,\n\t\teasing: EASINGS.easeOutSine,\n\t\tlast: showAsComplete,\n\t}\n}\n\nexport function getFreehandOptions(\n\tshapeProps: { dash: TLDefaultDashStyle; isPen: boolean; isComplete: boolean },\n\tstrokeWidth: number,\n\tforceComplete: boolean,\n\tforceSolid: boolean\n): StrokeOptions {\n\tconst last = shapeProps.isComplete || forceComplete\n\n\tif (forceSolid) {\n\t\tif (shapeProps.isPen) {\n\t\t\treturn { ...solidRealPressureSettings(strokeWidth), last }\n\t\t} else {\n\t\t\treturn { ...solidSettings(strokeWidth), last }\n\t\t}\n\t}\n\n\tif (shapeProps.dash === 'draw') {\n\t\tif (shapeProps.isPen) {\n\t\t\treturn { ...realPressureSettings(strokeWidth), last }\n\t\t} else {\n\t\t\treturn { ...simulatePressureSettings(strokeWidth), last }\n\t\t}\n\t}\n\n\treturn { ...solidSettings(strokeWidth), last }\n}\n\n/** @public */\nexport function getPointsFromDrawSegment(\n\tsegment: TLDrawShapeSegment,\n\tscaleX: number,\n\tscaleY: number,\n\tpoints: Vec[] = []\n) {\n\tconst _points = b64Vecs.decodePoints(segment.path)\n\n\t// Apply scale factors (used for lazy resize and flipping)\n\tif (scaleX !== 1 || scaleY !== 1) {\n\t\tfor (const point of _points) {\n\t\t\tpoint.x *= scaleX\n\t\t\tpoint.y *= scaleY\n\t\t}\n\t}\n\n\tif (segment.type === 'free' || _points.length < 2) {\n\t\tpoints.push(..._points.map(Vec.From))\n\t} else {\n\t\tconst pointsToInterpolate = Math.max(4, Math.floor(Vec.Dist(_points[0], _points[1]) / 16))\n\t\tpoints.push(...Vec.PointsBetween(_points[0], _points[1], pointsToInterpolate))\n\t}\n\n\treturn points\n}\n\n/** @public */\nexport function getPointsFromDrawSegments(segments: TLDrawShapeSegment[], scaleX = 1, scaleY = 1) {\n\tconst points: Vec[] = []\n\n\tfor (const segment of segments) {\n\t\tgetPointsFromDrawSegment(segment, scaleX, scaleY, points)\n\t}\n\n\treturn points\n}\n\nexport function getDrawShapeStrokeDashArray(\n\tshape: TLDrawShape,\n\tstrokeWidth: number,\n\tdotAdjustment: number\n) {\n\treturn {\n\t\tdraw: 'none',\n\t\tsolid: `none`,\n\t\tdotted: `${dotAdjustment} ${strokeWidth * 2}`,\n\t\tdashed: `${strokeWidth * 2} ${strokeWidth * 2}`,\n\t}[shape.props.dash]\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/draw/toolStates/Drawing.ts"],"sourcesContent":["import {\n\tMat,\n\tStateNode,\n\tTLDefaultSizeStyle,\n\tTLDrawShape,\n\tTLDrawShapeSegment,\n\tTLHighlightShape,\n\tTLKeyboardEventInfo,\n\tTLPointerEventInfo,\n\tTLShapePartial,\n\tVec,\n\tVecModel,\n\tb64Vecs,\n\tcreateShapeId,\n\tlast,\n\tsnapAngle,\n\tstructuredClone,\n\ttoFixed,\n\tuniqueId,\n} from '@tldraw/editor'\nimport { HighlightShapeUtil } from '../../highlight/HighlightShapeUtil'\nimport { STROKE_SIZES } from '../../shared/default-shape-constants'\nimport { DrawShapeUtil } from '../DrawShapeUtil'\n\ntype DrawableShape = TLDrawShape | TLHighlightShape\n\nexport class Drawing extends StateNode {\n\tstatic override id = 'drawing'\n\n\tinfo = {} as TLPointerEventInfo\n\n\tinitialShape?: DrawableShape\n\n\toverride shapeType = this.parent.id === 'highlight' ? ('highlight' as const) : ('draw' as const)\n\n\tutil = this.editor.getShapeUtil(this.shapeType) as DrawShapeUtil | HighlightShapeUtil\n\n\tisPen = false\n\tisPenOrStylus = false\n\n\tsegmentMode = 'free' as 'free' | 'straight' | 'starting_straight' | 'starting_free'\n\n\tdidJustShiftClickToExtendPreviousShapeLine = false\n\n\tpagePointWhereCurrentSegmentChanged = {} as Vec\n\n\tpagePointWhereNextSegmentChanged = null as Vec | null\n\n\tlastRecordedPoint = {} as Vec\n\tmergeNextPoint = false\n\tcurrentLineLength = 0\n\n\t// Cache for current segment's points to avoid repeated b64 decode/encode\n\tcurrentSegmentPoints: Vec[] = []\n\n\tmarkId = null as null | string\n\n\toverride onEnter(info: TLPointerEventInfo) {\n\t\tthis.markId = null\n\t\tthis.info = info\n\t\tthis.lastRecordedPoint = this.editor.inputs.getCurrentPagePoint().clone()\n\t\tthis.startShape()\n\t}\n\n\toverride onPointerMove() {\n\t\tconst { inputs } = this.editor\n\t\tconst isPen = inputs.getIsPen()\n\n\t\tif (this.isPen && !isPen) {\n\t\t\t// The user made a palm gesture before starting a pen gesture;\n\t\t\t// ideally we'd start the new shape here but we could also just bail\n\t\t\t// as the next interaction will work correctly\n\t\t\tif (this.markId) {\n\t\t\t\tthis.editor.bailToMark(this.markId)\n\t\t\t\tthis.startShape()\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\n\t\tif (this.isPenOrStylus) {\n\t\t\t// Don't update the shape if we haven't moved far enough from the last time we recorded a point\n\t\t\tconst currentPagePoint = inputs.getCurrentPagePoint()\n\t\t\tif (Vec.Dist(currentPagePoint, this.lastRecordedPoint) >= 1 / this.editor.getZoomLevel()) {\n\t\t\t\tthis.lastRecordedPoint = currentPagePoint.clone()\n\t\t\t\tthis.mergeNextPoint = false\n\t\t\t} else {\n\t\t\t\tthis.mergeNextPoint = true\n\t\t\t}\n\t\t} else {\n\t\t\tthis.mergeNextPoint = false\n\t\t}\n\n\t\tthis.updateDrawingShape()\n\t}\n\n\toverride onKeyDown(info: TLKeyboardEventInfo) {\n\t\tif (info.key === 'Shift') {\n\t\t\tswitch (this.segmentMode) {\n\t\t\t\tcase 'free': {\n\t\t\t\t\t// We've just entered straight mode, go to straight mode\n\t\t\t\t\tthis.segmentMode = 'starting_straight'\n\t\t\t\t\tthis.pagePointWhereNextSegmentChanged = this.editor.inputs.getCurrentPagePoint().clone()\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tcase 'starting_free': {\n\t\t\t\t\tthis.segmentMode = 'starting_straight'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.updateDrawingShape()\n\t}\n\n\toverride onKeyUp(info: TLKeyboardEventInfo) {\n\t\tif (info.key === 'Shift') {\n\t\t\tthis.editor.snaps.clearIndicators()\n\n\t\t\tswitch (this.segmentMode) {\n\t\t\t\tcase 'straight': {\n\t\t\t\t\t// We've just exited straight mode, go back to free mode\n\t\t\t\t\tthis.segmentMode = 'starting_free'\n\t\t\t\t\tthis.pagePointWhereNextSegmentChanged = this.editor.inputs.getCurrentPagePoint().clone()\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tcase 'starting_straight': {\n\t\t\t\t\tthis.pagePointWhereNextSegmentChanged = null\n\t\t\t\t\tthis.segmentMode = 'free'\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.updateDrawingShape()\n\t}\n\n\toverride onExit() {\n\t\tthis.editor.snaps.clearIndicators()\n\t\tthis.pagePointWhereCurrentSegmentChanged = this.editor.inputs.getCurrentPagePoint().clone()\n\t}\n\n\tcanClose() {\n\t\treturn this.shapeType !== 'highlight'\n\t}\n\n\tgetIsClosed(segments: TLDrawShapeSegment[], size: TLDefaultSizeStyle, scale: number) {\n\t\tif (!this.canClose()) return false\n\n\t\tconst strokeWidth = STROKE_SIZES[size]\n\t\tconst firstPoint = b64Vecs.decodeFirstPoint(segments[0].path)\n\t\tconst lastSegment = segments[segments.length - 1]\n\t\tconst lastPoint = b64Vecs.decodeLastPoint(lastSegment.path)\n\n\t\treturn (\n\t\t\tfirstPoint !== null &&\n\t\t\tlastPoint !== null &&\n\t\t\tfirstPoint !== lastPoint &&\n\t\t\tthis.currentLineLength > strokeWidth * 4 * scale &&\n\t\t\tVec.DistMin(firstPoint, lastPoint, strokeWidth * 2 * scale)\n\t\t)\n\t}\n\n\tprivate startShape() {\n\t\tconst inputs = this.editor.inputs\n\t\tconst originPagePoint = inputs.getOriginPagePoint()\n\t\tconst isPen = inputs.getIsPen()\n\n\t\tthis.markId = this.editor.markHistoryStoppingPoint('draw start')\n\n\t\t// If the pressure is weird, then it's probably a stylus reporting as a mouse\n\t\t// We treat pen/stylus inputs differently in the drawing tool, so we need to\n\t\t// have our own value for this. The inputs.isPen is only if the input is a regular\n\t\t// pen, like an iPad pen, which needs to trigger \"pen mode\" in order to avoid\n\t\t// accidental palm touches. We don't have to worry about that with styluses though.\n\t\tconst { z = 0.5 } = this.info.point\n\n\t\tthis.isPen = isPen\n\t\tthis.isPenOrStylus = isPen || (z > 0 && z < 0.5) || (z > 0.5 && z < 1)\n\n\t\tconst pressure = this.isPenOrStylus ? z * 1.25 : 0.5\n\n\t\tthis.segmentMode = this.editor.inputs.getShiftKey() ? 'straight' : 'free'\n\n\t\tthis.didJustShiftClickToExtendPreviousShapeLine = false\n\n\t\tthis.lastRecordedPoint = originPagePoint.clone()\n\n\t\tif (this.initialShape) {\n\t\t\tconst shape = this.editor.getShape<DrawableShape>(this.initialShape.id)\n\n\t\t\tif (shape && this.segmentMode === 'straight') {\n\t\t\t\t// Connect dots\n\n\t\t\t\tthis.didJustShiftClickToExtendPreviousShapeLine = true\n\n\t\t\t\tconst prevSegment = last(shape.props.segments)\n\t\t\t\tif (!prevSegment) throw Error('Expected a previous segment!')\n\t\t\t\tconst prevPoint = b64Vecs.decodeLastPoint(prevSegment.path)\n\t\t\t\tif (!prevPoint) throw Error('Expected a previous point!')\n\n\t\t\t\tconst { x, y } = this.editor.getPointInShapeSpace(shape, originPagePoint).toFixed()\n\n\t\t\t\tconst newSegment: TLDrawShapeSegment = {\n\t\t\t\t\ttype: this.segmentMode,\n\t\t\t\t\tpath: b64Vecs.encodePoints([\n\t\t\t\t\t\t{ x: prevPoint.x, y: prevPoint.y, z: +pressure.toFixed(2) },\n\t\t\t\t\t\t{ x, y, z: +pressure.toFixed(2) },\n\t\t\t\t\t]),\n\t\t\t\t}\n\n\t\t\t\t// Convert prevPoint to page space\n\t\t\t\tconst prevPointPageSpace = Mat.applyToPoint(\n\t\t\t\t\tthis.editor.getShapePageTransform(shape.id)!,\n\t\t\t\t\tprevPoint\n\t\t\t\t)\n\t\t\t\tthis.pagePointWhereCurrentSegmentChanged = prevPointPageSpace\n\t\t\t\tthis.pagePointWhereNextSegmentChanged = null\n\t\t\t\tconst segments = [...shape.props.segments, newSegment]\n\n\t\t\t\tif (this.currentLineLength < STROKE_SIZES[shape.props.size] * 4) {\n\t\t\t\t\tthis.currentLineLength = this.getLineLength(segments)\n\t\t\t\t}\n\n\t\t\t\tconst shapePartial: TLShapePartial<DrawableShape> = {\n\t\t\t\t\tid: shape.id,\n\t\t\t\t\ttype: this.shapeType,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tsegments,\n\t\t\t\t\t},\n\t\t\t\t}\n\n\t\t\t\tif (this.canClose()) {\n\t\t\t\t\t;(shapePartial as TLShapePartial<TLDrawShape>).props!.isClosed = this.getIsClosed(\n\t\t\t\t\t\tsegments,\n\t\t\t\t\t\tshape.props.size,\n\t\t\t\t\t\tshape.props.scale\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tthis.editor.updateShapes([shapePartial])\n\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\n\t\t// Create a new shape\n\n\t\tthis.pagePointWhereCurrentSegmentChanged = originPagePoint.clone()\n\t\tconst id = createShapeId()\n\n\t\t// Initialize the segment points cache\n\t\tconst initialPoint = new Vec(0, 0, +pressure.toFixed(2))\n\t\tthis.currentSegmentPoints = [initialPoint]\n\n\t\t// Allow this to trigger the max shapes reached alert\n\t\tthis.editor.createShape({\n\t\t\tid,\n\t\t\ttype: this.shapeType,\n\t\t\tx: originPagePoint.x,\n\t\t\ty: originPagePoint.y,\n\t\t\tprops: {\n\t\t\t\tisPen: this.isPenOrStylus,\n\t\t\t\tscale: this.editor.user.getIsDynamicResizeMode() ? 1 / this.editor.getZoomLevel() : 1,\n\t\t\t\tsegments: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: this.segmentMode,\n\t\t\t\t\t\tpath: b64Vecs.encodePoints([initialPoint]),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t})\n\t\tconst shape = this.editor.getShape<DrawableShape>(id)\n\t\tif (!shape) {\n\t\t\tthis.cancel()\n\t\t\treturn\n\t\t}\n\t\tthis.currentLineLength = 0\n\t\tthis.initialShape = this.editor.getShape<DrawableShape>(id)\n\t}\n\n\tprivate updateDrawingShape() {\n\t\tconst { initialShape } = this\n\t\tconst { inputs } = this.editor\n\n\t\tif (!initialShape) return\n\n\t\tconst {\n\t\t\tid,\n\t\t\tprops: { size, scale },\n\t\t} = initialShape\n\n\t\tconst shape = this.editor.getShape<DrawableShape>(id)!\n\n\t\tif (!shape) return\n\n\t\tconst { segments } = shape.props\n\n\t\tconst currentPagePoint = inputs.getCurrentPagePoint()\n\t\tconst { x, y, z } = this.editor.getPointInShapeSpace(shape, currentPagePoint).toFixed()\n\t\tconst pressure = this.isPenOrStylus ? +(currentPagePoint.z! * 1.25).toFixed(2) : 0.5\n\t\tconst newPoint = { x, y, z: pressure }\n\n\t\tswitch (this.segmentMode) {\n\t\t\tcase 'starting_straight': {\n\t\t\t\tconst { pagePointWhereNextSegmentChanged } = this\n\n\t\t\t\tif (pagePointWhereNextSegmentChanged === null) {\n\t\t\t\t\tthrow Error('We should have a point where the segment changed')\n\t\t\t\t}\n\n\t\t\t\tconst hasMovedFarEnough =\n\t\t\t\t\tVec.Dist2(pagePointWhereNextSegmentChanged, inputs.getCurrentPagePoint()) >\n\t\t\t\t\tthis.editor.options.dragDistanceSquared\n\n\t\t\t\t// Find the distance from where the pointer was when shift was released and\n\t\t\t\t// where it is now; if it's far enough away, then update the page point where\n\t\t\t\t// the current segment changed (to match the pagepoint where next segment changed)\n\t\t\t\t// and set the pagepoint where next segment changed to null.\n\t\t\t\tif (hasMovedFarEnough) {\n\t\t\t\t\tthis.pagePointWhereCurrentSegmentChanged = this.pagePointWhereNextSegmentChanged!.clone()\n\t\t\t\t\tthis.pagePointWhereNextSegmentChanged = null\n\n\t\t\t\t\t// Set the new mode\n\t\t\t\t\tthis.segmentMode = 'straight'\n\n\t\t\t\t\tconst prevSegment = last(segments)\n\t\t\t\t\tif (!prevSegment) throw Error('Expected a previous segment!')\n\n\t\t\t\t\tconst prevLastPoint = b64Vecs.decodeLastPoint(prevSegment.path)\n\t\t\t\t\tif (!prevLastPoint) throw Error('Expected a previous last point!')\n\n\t\t\t\t\tlet newSegment: TLDrawShapeSegment\n\n\t\t\t\t\tconst newLastPoint = this.editor\n\t\t\t\t\t\t.getPointInShapeSpace(shape, this.pagePointWhereCurrentSegmentChanged)\n\t\t\t\t\t\t.toFixed()\n\t\t\t\t\t\t.toJson()\n\n\t\t\t\t\tif (prevSegment.type === 'straight') {\n\t\t\t\t\t\tthis.currentLineLength += Vec.Dist(prevLastPoint, newLastPoint)\n\n\t\t\t\t\t\tnewSegment = {\n\t\t\t\t\t\t\ttype: 'straight',\n\t\t\t\t\t\t\tpath: b64Vecs.encodePoints([prevLastPoint, newLastPoint]),\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst transform = this.editor.getShapePageTransform(shape)!\n\n\t\t\t\t\t\tthis.pagePointWhereCurrentSegmentChanged = Mat.applyToPoint(transform, prevLastPoint)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewSegment = {\n\t\t\t\t\t\t\ttype: 'straight',\n\t\t\t\t\t\t\tpath: b64Vecs.encodePoints([newLastPoint, newPoint]),\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst shapePartial: TLShapePartial<DrawableShape> = {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttype: this.shapeType,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tsegments: [...segments, newSegment],\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.canClose()) {\n\t\t\t\t\t\t;(shapePartial as TLShapePartial<TLDrawShape>).props!.isClosed = this.getIsClosed(\n\t\t\t\t\t\t\tsegments,\n\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\tscale\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.editor.updateShapes([shapePartial])\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase 'starting_free': {\n\t\t\t\tconst { pagePointWhereNextSegmentChanged } = this\n\n\t\t\t\tif (pagePointWhereNextSegmentChanged === null) {\n\t\t\t\t\tthrow Error('We should have a point where the segment changed')\n\t\t\t\t}\n\n\t\t\t\tconst hasMovedFarEnough =\n\t\t\t\t\tVec.Dist2(pagePointWhereNextSegmentChanged, inputs.getCurrentPagePoint()) >\n\t\t\t\t\tthis.editor.options.dragDistanceSquared\n\n\t\t\t\t// Find the distance from where the pointer was when shift was released and\n\t\t\t\t// where it is now; if it's far enough away, then update the page point where\n\t\t\t\t// the current segment changed (to match the pagepoint where next segment changed)\n\t\t\t\t// and set the pagepoint where next segment changed to null.\n\t\t\t\tif (hasMovedFarEnough) {\n\t\t\t\t\tthis.pagePointWhereCurrentSegmentChanged = this.pagePointWhereNextSegmentChanged!.clone()\n\t\t\t\t\tthis.pagePointWhereNextSegmentChanged = null\n\n\t\t\t\t\t// Set the new mode\n\t\t\t\t\tthis.segmentMode = 'free'\n\n\t\t\t\t\tconst newSegments = segments.slice()\n\t\t\t\t\tconst prevStraightSegment = newSegments[newSegments.length - 1]\n\t\t\t\t\tconst prevPoint = b64Vecs.decodeLastPoint(prevStraightSegment.path)\n\n\t\t\t\t\tif (!prevPoint) {\n\t\t\t\t\t\tthrow Error('No previous point!')\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create the new free segment and interpolate the points between where the last line\n\t\t\t\t\t// ended and where the pointer is now\n\t\t\t\t\tconst interpolatedPoints = Vec.PointsBetween(prevPoint, newPoint, 6).map(\n\t\t\t\t\t\t(p) => new Vec(toFixed(p.x), toFixed(p.y), toFixed(p.z))\n\t\t\t\t\t)\n\t\t\t\t\t// Initialize cache for the new free segment\n\t\t\t\t\tthis.currentSegmentPoints = interpolatedPoints\n\n\t\t\t\t\tconst newFreeSegment: TLDrawShapeSegment = {\n\t\t\t\t\t\ttype: 'free',\n\t\t\t\t\t\tpath: b64Vecs.encodePoints(interpolatedPoints),\n\t\t\t\t\t}\n\n\t\t\t\t\tconst finalSegments = [...newSegments, newFreeSegment]\n\n\t\t\t\t\tif (this.currentLineLength < STROKE_SIZES[shape.props.size] * 4) {\n\t\t\t\t\t\tthis.currentLineLength = this.getLineLength(finalSegments)\n\t\t\t\t\t}\n\n\t\t\t\t\tconst shapePartial: TLShapePartial<DrawableShape> = {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttype: this.shapeType,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tsegments: finalSegments,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.canClose()) {\n\t\t\t\t\t\t;(shapePartial as TLShapePartial<TLDrawShape>).props!.isClosed = this.getIsClosed(\n\t\t\t\t\t\t\tfinalSegments,\n\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\tscale\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.editor.updateShapes([shapePartial])\n\t\t\t\t}\n\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase 'straight': {\n\t\t\t\tconst newSegments = segments.slice()\n\t\t\t\tconst newSegment = newSegments[newSegments.length - 1]\n\n\t\t\t\tconst { pagePointWhereCurrentSegmentChanged } = this\n\t\t\t\tconst inputs = this.editor.inputs\n\t\t\t\tconst ctrlKey = inputs.getCtrlKey()\n\t\t\t\tconst currentPagePoint = inputs.getCurrentPagePoint()\n\n\t\t\t\tif (!pagePointWhereCurrentSegmentChanged)\n\t\t\t\t\tthrow Error('We should have a point where the segment changed')\n\n\t\t\t\tlet pagePoint: VecModel\n\t\t\t\tlet shouldSnapToAngle = false\n\n\t\t\t\tif (this.didJustShiftClickToExtendPreviousShapeLine) {\n\t\t\t\t\tif (this.editor.inputs.getIsDragging()) {\n\t\t\t\t\t\t// If we've just shift clicked to extend a line, only snap once we've started dragging\n\t\t\t\t\t\tshouldSnapToAngle = !ctrlKey\n\t\t\t\t\t\tthis.didJustShiftClickToExtendPreviousShapeLine = false\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// noop\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// If we're not shift clicking to extend a line, but we're holding shift, then we should snap\n\t\t\t\t\tshouldSnapToAngle = !ctrlKey // don't snap angle while snapping line\n\t\t\t\t}\n\n\t\t\t\tlet newPoint = this.editor.getPointInShapeSpace(shape, currentPagePoint).toFixed().toJson()\n\t\t\t\tlet didSnap = false\n\t\t\t\tlet snapSegment: TLDrawShapeSegment | undefined = undefined\n\n\t\t\t\tconst shouldSnap = this.editor.user.getIsSnapMode() ? !ctrlKey : ctrlKey\n\n\t\t\t\tif (shouldSnap) {\n\t\t\t\t\tif (newSegments.length > 2) {\n\t\t\t\t\t\tlet nearestPoint: VecModel | undefined = undefined\n\t\t\t\t\t\tlet minDistance = 8 / this.editor.getZoomLevel()\n\n\t\t\t\t\t\t// Don't try to snap to the last two segments\n\t\t\t\t\t\tfor (let i = 0, n = segments.length - 2; i < n; i++) {\n\t\t\t\t\t\t\tconst segment = segments[i]\n\t\t\t\t\t\t\tif (!segment) break\n\t\t\t\t\t\t\tif (segment.type === 'free') continue\n\n\t\t\t\t\t\t\tconst first = b64Vecs.decodeFirstPoint(segment.path)\n\t\t\t\t\t\t\tconst lastPoint = b64Vecs.decodeLastPoint(segment.path)\n\t\t\t\t\t\t\tif (!(first && lastPoint)) continue\n\n\t\t\t\t\t\t\t// Snap to the nearest point on the segment, if it's closer than the previous snapped point\n\t\t\t\t\t\t\tconst nearestPointOnSegment = Vec.NearestPointOnLineSegment(\n\t\t\t\t\t\t\t\tfirst,\n\t\t\t\t\t\t\t\tlastPoint,\n\t\t\t\t\t\t\t\tnewPoint\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\tif (Vec.DistMin(nearestPointOnSegment, newPoint, minDistance)) {\n\t\t\t\t\t\t\t\tnearestPoint = nearestPointOnSegment.toFixed().toJson()\n\t\t\t\t\t\t\t\tminDistance = Vec.Dist(nearestPointOnSegment, newPoint)\n\t\t\t\t\t\t\t\tsnapSegment = segment\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (nearestPoint) {\n\t\t\t\t\t\t\tdidSnap = true\n\t\t\t\t\t\t\tnewPoint = nearestPoint\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (didSnap && snapSegment) {\n\t\t\t\t\tconst transform = this.editor.getShapePageTransform(shape)!\n\t\t\t\t\tconst first = b64Vecs.decodeFirstPoint(snapSegment.path)\n\t\t\t\t\tconst lastPoint = b64Vecs.decodeLastPoint(snapSegment.path)\n\t\t\t\t\tif (!first || !lastPoint) throw Error('Expected a last point!')\n\n\t\t\t\t\tconst A = Mat.applyToPoint(transform, first)\n\n\t\t\t\t\tconst B = Mat.applyToPoint(transform, lastPoint)\n\n\t\t\t\t\tconst snappedPoint = Mat.applyToPoint(transform, newPoint)\n\n\t\t\t\t\tthis.editor.snaps.setIndicators([\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: uniqueId(),\n\t\t\t\t\t\t\ttype: 'points',\n\t\t\t\t\t\t\tpoints: [A, snappedPoint, B],\n\t\t\t\t\t\t},\n\t\t\t\t\t])\n\t\t\t\t} else {\n\t\t\t\t\tthis.editor.snaps.clearIndicators()\n\n\t\t\t\t\tif (shouldSnapToAngle) {\n\t\t\t\t\t\t// Snap line angle to nearest 15 degrees\n\t\t\t\t\t\tconst currentAngle = Vec.Angle(pagePointWhereCurrentSegmentChanged, currentPagePoint)\n\t\t\t\t\t\tconst snappedAngle = snapAngle(currentAngle, 24)\n\t\t\t\t\t\tconst angleDiff = snappedAngle - currentAngle\n\n\t\t\t\t\t\tpagePoint = Vec.RotWith(\n\t\t\t\t\t\t\tcurrentPagePoint,\n\t\t\t\t\t\t\tpagePointWhereCurrentSegmentChanged,\n\t\t\t\t\t\t\tangleDiff\n\t\t\t\t\t\t)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpagePoint = currentPagePoint.clone()\n\t\t\t\t\t}\n\n\t\t\t\t\tnewPoint = this.editor.getPointInShapeSpace(shape, pagePoint).toFixed().toJson()\n\t\t\t\t}\n\n\t\t\t\t// If the previous segment is a one point free shape and is the first segment of the line,\n\t\t\t\t// then the user just did a click-and-immediately-press-shift to create a new straight line\n\t\t\t\t// without continuing the previous line. In this case, we want to remove the previous segment.\n\n\t\t\t\tthis.currentLineLength +=\n\t\t\t\t\tnewSegments.length && b64Vecs.decodeFirstPoint(newSegment.path)\n\t\t\t\t\t\t? Vec.Dist(b64Vecs.decodeFirstPoint(newSegment.path)!, Vec.From(newPoint))\n\t\t\t\t\t\t: 0\n\n\t\t\t\tnewSegments[newSegments.length - 1] = {\n\t\t\t\t\t...newSegment,\n\t\t\t\t\ttype: 'straight',\n\t\t\t\t\tpath: b64Vecs.encodePoints([\n\t\t\t\t\t\tb64Vecs.decodeFirstPoint(newSegment.path)!,\n\t\t\t\t\t\tVec.From(newPoint),\n\t\t\t\t\t]),\n\t\t\t\t}\n\n\t\t\t\tconst shapePartial: TLShapePartial<DrawableShape> = {\n\t\t\t\t\tid,\n\t\t\t\t\ttype: this.shapeType,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tsegments: newSegments,\n\t\t\t\t\t},\n\t\t\t\t}\n\n\t\t\t\tif (this.canClose()) {\n\t\t\t\t\t;(shapePartial as TLShapePartial<TLDrawShape>).props!.isClosed = this.getIsClosed(\n\t\t\t\t\t\tsegments,\n\t\t\t\t\t\tsize,\n\t\t\t\t\t\tscale\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tthis.editor.updateShapes([shapePartial])\n\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase 'free': {\n\t\t\t\t// Use cached points instead of decoding from b64 on every update\n\t\t\t\tconst cachedPoints = this.currentSegmentPoints\n\n\t\t\t\tif (cachedPoints.length && this.mergeNextPoint) {\n\t\t\t\t\tconst lastPoint = cachedPoints[cachedPoints.length - 1]\n\t\t\t\t\tlastPoint.x = newPoint.x\n\t\t\t\t\tlastPoint.y = newPoint.y\n\t\t\t\t\tlastPoint.z = lastPoint.z ? Math.max(lastPoint.z, newPoint.z) : newPoint.z\n\t\t\t\t\t// Note: we could recompute the line length here, but it's not really necessary\n\t\t\t\t\t// this.currentLineLength = this.getLineLength(newSegments)\n\t\t\t\t} else {\n\t\t\t\t\tthis.currentLineLength += cachedPoints.length\n\t\t\t\t\t\t? Vec.Dist(cachedPoints[cachedPoints.length - 1], newPoint)\n\t\t\t\t\t\t: 0\n\t\t\t\t\tcachedPoints.push(new Vec(newPoint.x, newPoint.y, newPoint.z))\n\t\t\t\t}\n\n\t\t\t\tconst newSegments = segments.slice()\n\t\t\t\tconst newSegment = newSegments[newSegments.length - 1]\n\t\t\t\tnewSegments[newSegments.length - 1] = {\n\t\t\t\t\t...newSegment,\n\t\t\t\t\tpath: b64Vecs.encodePoints(cachedPoints),\n\t\t\t\t}\n\n\t\t\t\tif (this.currentLineLength < STROKE_SIZES[shape.props.size] * 4) {\n\t\t\t\t\tthis.currentLineLength = this.getLineLength(newSegments)\n\t\t\t\t}\n\n\t\t\t\tconst shapePartial: TLShapePartial<DrawableShape> = {\n\t\t\t\t\tid,\n\t\t\t\t\ttype: this.shapeType,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tsegments: newSegments,\n\t\t\t\t\t},\n\t\t\t\t}\n\n\t\t\t\tif (this.canClose()) {\n\t\t\t\t\t;(shapePartial as TLShapePartial<TLDrawShape>).props!.isClosed = this.getIsClosed(\n\t\t\t\t\t\tnewSegments,\n\t\t\t\t\t\tsize,\n\t\t\t\t\t\tscale\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tthis.editor.updateShapes([shapePartial])\n\n\t\t\t\t// Set a maximum length for the lines array; after 200 points, complete the line.\n\t\t\t\tif (cachedPoints.length > this.util.options.maxPointsPerShape) {\n\t\t\t\t\tthis.editor.updateShapes([{ id, type: this.shapeType, props: { isComplete: true } }])\n\n\t\t\t\t\tconst newShapeId = createShapeId()\n\n\t\t\t\t\tconst props = this.editor.getShape<DrawableShape>(id)!.props\n\n\t\t\t\t\tif (!this.editor.canCreateShapes([newShapeId])) return this.cancel()\n\t\t\t\t\tconst currentPagePoint = inputs.getCurrentPagePoint()\n\n\t\t\t\t\t// Reset cache for the new shape's segment\n\t\t\t\t\tconst initialPoint = new Vec(0, 0, this.isPenOrStylus ? +(z! * 1.25).toFixed() : 0.5)\n\t\t\t\t\tthis.currentSegmentPoints = [initialPoint]\n\n\t\t\t\t\tthis.editor.createShape({\n\t\t\t\t\t\tid: newShapeId,\n\t\t\t\t\t\ttype: this.shapeType,\n\t\t\t\t\t\tx: toFixed(currentPagePoint.x),\n\t\t\t\t\t\ty: toFixed(currentPagePoint.y),\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tisPen: this.isPenOrStylus,\n\t\t\t\t\t\t\tscale: props.scale,\n\t\t\t\t\t\t\tsegments: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: 'free',\n\t\t\t\t\t\t\t\t\tpath: b64Vecs.encodePoints([initialPoint]),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\n\t\t\t\t\tconst shape = this.editor.getShape<DrawableShape>(newShapeId)\n\n\t\t\t\t\tif (!shape) {\n\t\t\t\t\t\t// This would only happen if the page is full and no more shapes can be created. The bug would manifest as a crash when we try to clone the shape.\n\t\t\t\t\t\t// todo: handle this type of thing better\n\t\t\t\t\t\treturn this.cancel()\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.initialShape = structuredClone(shape)\n\t\t\t\t\tthis.mergeNextPoint = false\n\t\t\t\t\tthis.lastRecordedPoint = currentPagePoint.clone()\n\t\t\t\t\tthis.currentLineLength = 0\n\t\t\t\t}\n\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getLineLength(segments: TLDrawShapeSegment[]) {\n\t\tlet length = 0\n\n\t\tfor (let j = 0; j < segments.length; j++) {\n\t\t\tconst points = b64Vecs.decodePoints(segments[j].path)\n\t\t\tfor (let i = 0; i < points.length - 1; i++) {\n\t\t\t\tlength += Vec.Dist2(points[i], points[i + 1])\n\t\t\t}\n\t\t}\n\n\t\treturn Math.sqrt(length)\n\t}\n\n\toverride onPointerUp() {\n\t\tthis.complete()\n\t}\n\n\toverride onCancel() {\n\t\tthis.cancel()\n\t}\n\n\toverride onComplete() {\n\t\tthis.complete()\n\t}\n\n\toverride onInterrupt() {\n\t\tif (this.editor.inputs.getIsDragging()) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.markId) {\n\t\t\tthis.editor.bailToMark(this.markId)\n\t\t}\n\t\tthis.cancel()\n\t}\n\n\tcomplete() {\n\t\tconst { initialShape } = this\n\t\tif (!initialShape) return\n\t\tthis.editor.updateShapes([\n\t\t\t{ id: initialShape.id, type: initialShape.type, props: { isComplete: true } },\n\t\t])\n\n\t\tthis.parent.transition('idle')\n\t}\n\n\tcancel() {\n\t\tthis.parent.transition('idle', this.info)\n\t}\n}\n"],"names":["shape", "inputs", "currentPagePoint", "newPoint"],"mappings":"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"}},
    {"offset": {"line": 731, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/draw/toolStates/Idle.ts"],"sourcesContent":["import { StateNode, TLPointerEventInfo } from '@tldraw/editor'\n\nexport class Idle extends StateNode {\n\tstatic override id = 'idle'\n\n\toverride onPointerDown(info: TLPointerEventInfo) {\n\t\tthis.parent.transition('drawing', info)\n\t}\n\n\toverride onEnter() {\n\t\tthis.editor.setCursor({ type: 'cross', rotation: 0 })\n\t}\n\n\toverride onCancel() {\n\t\tthis.editor.setCurrentTool('select')\n\t}\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,iBAAqC;;AAEvC,MAAM,aAAa,2PAAA,CAAU;IACnC,OAAgB,KAAK,OAAA;IAEZ,cAAc,IAAA,EAA0B;QAChD,IAAA,CAAK,MAAA,CAAO,UAAA,CAAW,WAAW,IAAI;IACvC;IAES,UAAU;QAClB,IAAA,CAAK,MAAA,CAAO,SAAA,CAAU;YAAE,MAAM;YAAS,UAAU;QAAE,CAAC;IACrD;IAES,WAAW;QACnB,IAAA,CAAK,MAAA,CAAO,cAAA,CAAe,QAAQ;IACpC;AACD"}},
    {"offset": {"line": 759, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/draw/DrawShapeTool.ts"],"sourcesContent":["import { StateNode, TLStateNodeConstructor } from '@tldraw/editor'\nimport { Drawing } from './toolStates/Drawing'\nimport { Idle } from './toolStates/Idle'\n\n/** @public */\nexport class DrawShapeTool extends StateNode {\n\tstatic override id = 'draw'\n\tstatic override initial = 'idle'\n\tstatic override isLockable = false\n\tstatic override useCoalescedEvents = true\n\tstatic override children(): TLStateNodeConstructor[] {\n\t\treturn [Idle, Drawing]\n\t}\n\n\toverride shapeType = 'draw'\n\n\toverride onExit() {\n\t\tconst drawingState = this.children!['drawing'] as Drawing\n\t\tdrawingState.initialShape = undefined\n\t}\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,iBAAyC;AAClD,SAAS,eAAe;AACxB,SAAS,YAAY;;;;AAGd,MAAM,sBAAsB,2PAAA,CAAU;IAC5C,OAAgB,KAAK,OAAA;IACrB,OAAgB,UAAU,OAAA;IAC1B,OAAgB,aAAa,MAAA;IAC7B,OAAgB,qBAAqB,KAAA;IACrC,OAAgB,WAAqC;QACpD,OAAO;YAAC,kPAAA;YAAM,wPAAO;SAAA;IACtB;IAES,YAAY,OAAA;IAEZ,SAAS;QACjB,MAAM,eAAe,IAAA,CAAK,QAAA,CAAU,SAAS,CAAA;QAC7C,aAAa,YAAA,GAAe,KAAA;IAC7B;AACD"}},
    {"offset": {"line": 793, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/draw/DrawShapeUtil.tsx"],"sourcesContent":["import {\n\tBox,\n\tCircle2d,\n\tPolygon2d,\n\tPolyline2d,\n\tSVGContainer,\n\tShapeUtil,\n\tSvgExportContext,\n\tTLDrawShape,\n\tTLDrawShapeProps,\n\tTLResizeInfo,\n\tTLShapeUtilCanvasSvgDef,\n\tVecLike,\n\tdrawShapeMigrations,\n\tdrawShapeProps,\n\tgetColorValue,\n\tlast,\n\tlerp,\n\trng,\n\tuseEditor,\n\tuseValue,\n} from '@tldraw/editor'\n\nimport { ShapeFill } from '../shared/ShapeFill'\nimport { STROKE_SIZES } from '../shared/default-shape-constants'\nimport { getFillDefForCanvas, getFillDefForExport } from '../shared/defaultStyleDefs'\nimport { getStrokePoints } from '../shared/freehand/getStrokePoints'\nimport { getSvgPathFromStrokePoints } from '../shared/freehand/svg'\nimport { svgInk } from '../shared/freehand/svgInk'\nimport { interpolateSegments } from '../shared/interpolate-props'\nimport { useDefaultColorTheme } from '../shared/useDefaultColorTheme'\nimport {\n\tgetDrawShapeStrokeDashArray,\n\tgetFreehandOptions,\n\tgetPointsFromDrawSegments,\n} from './getPath'\n\n/** @public */\nexport interface DrawShapeOptions {\n\t/**\n\t * The maximum number of points in a line before the draw tool will begin a new shape.\n\t * A higher number will lead to poor performance while drawing very long lines.\n\t */\n\treadonly maxPointsPerShape: number\n}\n\n/** @public */\nexport class DrawShapeUtil extends ShapeUtil<TLDrawShape> {\n\tstatic override type = 'draw' as const\n\tstatic override props = drawShapeProps\n\tstatic override migrations = drawShapeMigrations\n\n\toverride options: DrawShapeOptions = {\n\t\tmaxPointsPerShape: 600,\n\t}\n\n\toverride hideResizeHandles(shape: TLDrawShape) {\n\t\treturn getIsDot(shape)\n\t}\n\toverride hideRotateHandle(shape: TLDrawShape) {\n\t\treturn getIsDot(shape)\n\t}\n\toverride hideSelectionBoundsFg(shape: TLDrawShape) {\n\t\treturn getIsDot(shape)\n\t}\n\n\toverride getDefaultProps(): TLDrawShape['props'] {\n\t\treturn {\n\t\t\tsegments: [],\n\t\t\tcolor: 'black',\n\t\t\tfill: 'none',\n\t\t\tdash: 'draw',\n\t\t\tsize: 'm',\n\t\t\tisComplete: false,\n\t\t\tisClosed: false,\n\t\t\tisPen: false,\n\t\t\tscale: 1,\n\t\t\tscaleX: 1,\n\t\t\tscaleY: 1,\n\t\t}\n\t}\n\n\tgetGeometry(shape: TLDrawShape) {\n\t\tconst points = getPointsFromDrawSegments(\n\t\t\tshape.props.segments,\n\t\t\tshape.props.scaleX,\n\t\t\tshape.props.scaleY\n\t\t)\n\n\t\tconst sw = (STROKE_SIZES[shape.props.size] + 1) * shape.props.scale\n\n\t\t// A dot\n\t\tif (shape.props.segments.length === 1) {\n\t\t\tconst box = Box.FromPoints(points)\n\t\t\tif (box.width < sw * 2 && box.height < sw * 2) {\n\t\t\t\treturn new Circle2d({\n\t\t\t\t\tx: -sw,\n\t\t\t\t\ty: -sw,\n\t\t\t\t\tradius: sw,\n\t\t\t\t\tisFilled: true,\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tconst strokePoints = getStrokePoints(\n\t\t\tpoints,\n\t\t\tgetFreehandOptions(shape.props, sw, shape.props.isPen, true)\n\t\t).map((p) => p.point)\n\n\t\t// A closed draw stroke\n\t\tif (shape.props.isClosed && strokePoints.length > 2) {\n\t\t\treturn new Polygon2d({\n\t\t\t\tpoints: strokePoints,\n\t\t\t\tisFilled: shape.props.fill !== 'none',\n\t\t\t})\n\t\t}\n\n\t\tif (strokePoints.length === 1) {\n\t\t\treturn new Circle2d({\n\t\t\t\tx: -sw,\n\t\t\t\ty: -sw,\n\t\t\t\tradius: sw,\n\t\t\t\tisFilled: true,\n\t\t\t})\n\t\t}\n\n\t\t// An open draw stroke\n\t\treturn new Polyline2d({\n\t\t\tpoints: strokePoints,\n\t\t})\n\t}\n\n\tcomponent(shape: TLDrawShape) {\n\t\treturn (\n\t\t\t<SVGContainer>\n\t\t\t\t<DrawShapeSvg shape={shape} />\n\t\t\t</SVGContainer>\n\t\t)\n\t}\n\n\tindicator(shape: TLDrawShape) {\n\t\tconst allPointsFromSegments = getPointsFromDrawSegments(\n\t\t\tshape.props.segments,\n\t\t\tshape.props.scaleX,\n\t\t\tshape.props.scaleY\n\t\t)\n\n\t\tlet sw = (STROKE_SIZES[shape.props.size] + 1) * shape.props.scale\n\n\t\t// eslint-disable-next-line react-hooks/rules-of-hooks\n\t\tconst forceSolid = useValue(\n\t\t\t'force solid',\n\t\t\t() => {\n\t\t\t\tconst zoomLevel = this.editor.getEfficientZoomLevel()\n\t\t\t\treturn zoomLevel < 0.5 && zoomLevel < 1.5 / sw\n\t\t\t},\n\t\t\t[this.editor, sw]\n\t\t)\n\n\t\tif (\n\t\t\t!forceSolid &&\n\t\t\t!shape.props.isPen &&\n\t\t\tshape.props.dash === 'draw' &&\n\t\t\tallPointsFromSegments.length === 1\n\t\t) {\n\t\t\tsw += rng(shape.id)() * (sw / 6)\n\t\t}\n\n\t\tconst showAsComplete = shape.props.isComplete || last(shape.props.segments)?.type === 'straight'\n\t\tconst options = getFreehandOptions(shape.props, sw, showAsComplete, true)\n\t\tconst strokePoints = getStrokePoints(allPointsFromSegments, options)\n\t\tconst solidStrokePath =\n\t\t\tstrokePoints.length > 1\n\t\t\t\t? getSvgPathFromStrokePoints(strokePoints, shape.props.isClosed)\n\t\t\t\t: getDot(allPointsFromSegments[0], sw)\n\n\t\treturn <path d={solidStrokePath} />\n\t}\n\n\toverride useLegacyIndicator() {\n\t\treturn false\n\t}\n\n\toverride getIndicatorPath(shape: TLDrawShape): Path2D {\n\t\tconst allPointsFromSegments = getPointsFromDrawSegments(\n\t\t\tshape.props.segments,\n\t\t\tshape.props.scaleX,\n\t\t\tshape.props.scaleY\n\t\t)\n\n\t\tlet sw = (STROKE_SIZES[shape.props.size] + 1) * shape.props.scale\n\n\t\tconst zoomLevel = this.editor.getEfficientZoomLevel()\n\t\tconst forceSolid = zoomLevel < 0.5 && zoomLevel < 1.5 / sw\n\n\t\tif (\n\t\t\t!forceSolid &&\n\t\t\t!shape.props.isPen &&\n\t\t\tshape.props.dash === 'draw' &&\n\t\t\tallPointsFromSegments.length === 1\n\t\t) {\n\t\t\tsw += rng(shape.id)() * (sw / 6)\n\t\t}\n\n\t\tconst showAsComplete = shape.props.isComplete || last(shape.props.segments)?.type === 'straight'\n\t\tconst options = getFreehandOptions(shape.props, sw, showAsComplete, true)\n\t\tconst strokePoints = getStrokePoints(allPointsFromSegments, options)\n\t\tconst solidStrokePath =\n\t\t\tstrokePoints.length > 1\n\t\t\t\t? getSvgPathFromStrokePoints(strokePoints, shape.props.isClosed)\n\t\t\t\t: getDot(allPointsFromSegments[0], sw)\n\n\t\treturn new Path2D(solidStrokePath)\n\t}\n\n\toverride toSvg(shape: TLDrawShape, ctx: SvgExportContext) {\n\t\tctx.addExportDef(getFillDefForExport(shape.props.fill))\n\t\tconst scaleFactor = 1 / shape.props.scale\n\t\treturn (\n\t\t\t<g transform={`scale(${scaleFactor})`}>\n\t\t\t\t<DrawShapeSvg shape={shape} zoomOverride={1} />\n\t\t\t</g>\n\t\t)\n\t}\n\n\toverride getCanvasSvgDefs(): TLShapeUtilCanvasSvgDef[] {\n\t\treturn [getFillDefForCanvas()]\n\t}\n\n\toverride onResize(shape: TLDrawShape, info: TLResizeInfo<TLDrawShape>) {\n\t\tconst { scaleX, scaleY } = info\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tscaleX: scaleX * shape.props.scaleX,\n\t\t\t\tscaleY: scaleY * shape.props.scaleY,\n\t\t\t},\n\t\t}\n\t}\n\n\toverride expandSelectionOutlinePx(shape: TLDrawShape): number {\n\t\tconst multiplier = shape.props.dash === 'draw' ? 1.6 : 1\n\t\treturn ((STROKE_SIZES[shape.props.size] * multiplier) / 2) * shape.props.scale\n\t}\n\toverride getInterpolatedProps(\n\t\tstartShape: TLDrawShape,\n\t\tendShape: TLDrawShape,\n\t\tt: number\n\t): TLDrawShapeProps {\n\t\treturn {\n\t\t\t...(t > 0.5 ? endShape.props : startShape.props),\n\t\t\tsegments: interpolateSegments(startShape.props.segments, endShape.props.segments, t),\n\t\t\tscale: lerp(startShape.props.scale, endShape.props.scale, t),\n\t\t}\n\t}\n}\n\nfunction getDot(point: VecLike, sw: number) {\n\tconst r = (sw + 1) * 0.5\n\treturn `M ${point.x} ${point.y} m -${r}, 0 a ${r},${r} 0 1,0 ${r * 2},0 a ${r},${r} 0 1,0 -${\n\t\tr * 2\n\t},0`\n}\n\nfunction getIsDot(shape: TLDrawShape) {\n\t// First point is 16 base64 chars (3 Float32s = 12 bytes)\n\t// Each delta point is 8 base64 chars (3 Float16s = 6 bytes)\n\t// 1 point = 16 chars, 2 points = 24 chars\n\t// Check if we have less than 2 points without decoding\n\treturn shape.props.segments.length === 1 && shape.props.segments[0].path.length < 24\n}\n\nfunction DrawShapeSvg({ shape, zoomOverride }: { shape: TLDrawShape; zoomOverride?: number }) {\n\tconst theme = useDefaultColorTheme()\n\tconst editor = useEditor()\n\n\tconst allPointsFromSegments = getPointsFromDrawSegments(\n\t\tshape.props.segments,\n\t\tshape.props.scaleX,\n\t\tshape.props.scaleY\n\t)\n\n\tconst showAsComplete = shape.props.isComplete || last(shape.props.segments)?.type === 'straight'\n\n\tlet sw = (STROKE_SIZES[shape.props.size] + 1) * shape.props.scale\n\tconst forceSolid = useValue(\n\t\t'force solid',\n\t\t() => {\n\t\t\tconst zoomLevel = zoomOverride ?? editor.getEfficientZoomLevel()\n\t\t\treturn zoomLevel < 0.5 && zoomLevel < 1.5 / sw\n\t\t},\n\t\t[editor, sw, zoomOverride]\n\t)\n\n\tconst dotAdjustment = useValue(\n\t\t'dot adjustment',\n\t\t() => {\n\t\t\tconst zoomLevel = zoomOverride ?? editor.getEfficientZoomLevel()\n\t\t\t// If we're zoomed way out (10%), then we need to make the dotted line go to 9 instead 0.1\n\t\t\t// Chrome doesn't render anything otherwise.\n\t\t\treturn zoomLevel < 0.2 ? 9 : 0.1\n\t\t},\n\t\t[editor, zoomOverride]\n\t)\n\n\tif (\n\t\t!forceSolid &&\n\t\t!shape.props.isPen &&\n\t\tshape.props.dash === 'draw' &&\n\t\tallPointsFromSegments.length === 1\n\t) {\n\t\tsw += rng(shape.id)() * (sw / 6)\n\t}\n\n\tconst options = getFreehandOptions(shape.props, sw, showAsComplete, forceSolid)\n\n\tif (!forceSolid && shape.props.dash === 'draw') {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{shape.props.isClosed && shape.props.fill && allPointsFromSegments.length > 1 ? (\n\t\t\t\t\t<ShapeFill\n\t\t\t\t\t\td={getSvgPathFromStrokePoints(\n\t\t\t\t\t\t\tgetStrokePoints(allPointsFromSegments, options),\n\t\t\t\t\t\t\tshape.props.isClosed\n\t\t\t\t\t\t)}\n\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t\tcolor={shape.props.color}\n\t\t\t\t\t\tfill={shape.props.isClosed ? shape.props.fill : 'none'}\n\t\t\t\t\t\tscale={shape.props.scale}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t\t<path\n\t\t\t\t\td={svgInk(allPointsFromSegments, options)}\n\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\tfill={getColorValue(theme, shape.props.color, 'solid')}\n\t\t\t\t/>\n\t\t\t</>\n\t\t)\n\t}\n\n\tconst strokePoints = getStrokePoints(allPointsFromSegments, options)\n\tconst isDot = strokePoints.length < 2\n\tconst solidStrokePath = isDot\n\t\t? getDot(allPointsFromSegments[0], 0)\n\t\t: getSvgPathFromStrokePoints(strokePoints, shape.props.isClosed)\n\n\treturn (\n\t\t<>\n\t\t\t<ShapeFill\n\t\t\t\td={solidStrokePath}\n\t\t\t\ttheme={theme}\n\t\t\t\tcolor={shape.props.color}\n\t\t\t\tfill={isDot || shape.props.isClosed ? shape.props.fill : 'none'}\n\t\t\t\tscale={shape.props.scale}\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td={solidStrokePath}\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tfill={isDot ? getColorValue(theme, shape.props.color, 'solid') : 'none'}\n\t\t\t\tstroke={getColorValue(theme, shape.props.color, 'solid')}\n\t\t\t\tstrokeWidth={sw}\n\t\t\t\tstrokeDasharray={isDot ? 'none' : getDrawShapeStrokeDashArray(shape, sw, dotAdjustment)}\n\t\t\t\tstrokeDashoffset=\"0\"\n\t\t\t/>\n\t\t</>\n\t)\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1061, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/bookmark/bookmarks.ts"],"sourcesContent":["import {\n\tAssetRecordType,\n\tEditor,\n\tResult,\n\tTLAssetId,\n\tTLBookmarkAsset,\n\tTLBookmarkShape,\n\tTLShapePartial,\n\tcreateShapeId,\n\tdebounce,\n\tgetHashForString,\n} from '@tldraw/editor'\n\nexport const BOOKMARK_WIDTH = 300\nexport const BOOKMARK_HEIGHT = 320\nexport const BOOKMARK_JUST_URL_HEIGHT = 46\nconst SHORT_BOOKMARK_HEIGHT = 101\n\nexport function getBookmarkHeight(editor: Editor, assetId?: TLAssetId | null) {\n\tconst asset = (assetId ? editor.getAsset(assetId) : null) as TLBookmarkAsset | null\n\n\tif (asset) {\n\t\tif (!asset.props.image) {\n\t\t\tif (!asset.props.title) {\n\t\t\t\treturn BOOKMARK_JUST_URL_HEIGHT\n\t\t\t} else {\n\t\t\t\treturn SHORT_BOOKMARK_HEIGHT\n\t\t\t}\n\t\t}\n\t}\n\n\treturn BOOKMARK_HEIGHT\n}\n\nexport function setBookmarkHeight(editor: Editor, shape: TLBookmarkShape) {\n\treturn {\n\t\t...shape,\n\t\tprops: { ...shape.props, h: getBookmarkHeight(editor, shape.props.assetId) },\n\t}\n}\n\n/** @internal */\nexport const getHumanReadableAddress = (url: string) => {\n\ttry {\n\t\tconst objUrl = new URL(url)\n\t\t// we want the hostname without any www\n\t\treturn objUrl.hostname.replace(/^www\\./, '')\n\t} catch {\n\t\treturn url\n\t}\n}\n\nexport function updateBookmarkAssetOnUrlChange(editor: Editor, shape: TLBookmarkShape) {\n\tconst { url } = shape.props\n\n\t// Derive the asset id from the URL\n\tconst assetId: TLAssetId = AssetRecordType.createId(getHashForString(url))\n\n\tif (editor.getAsset(assetId)) {\n\t\t// Existing asset for this URL?\n\t\tif (shape.props.assetId !== assetId) {\n\t\t\teditor.updateShapes([\n\t\t\t\t{\n\t\t\t\t\tid: shape.id,\n\t\t\t\t\ttype: shape.type,\n\t\t\t\t\tprops: { assetId },\n\t\t\t\t},\n\t\t\t])\n\t\t}\n\t} else {\n\t\t// No asset for this URL?\n\n\t\t// First, clear out the existing asset reference\n\t\teditor.updateShapes([\n\t\t\t{\n\t\t\t\tid: shape.id,\n\t\t\t\ttype: shape.type,\n\t\t\t\tprops: { assetId: null },\n\t\t\t},\n\t\t])\n\n\t\t// Then try to asyncronously create a new one\n\t\tcreateBookmarkAssetOnUrlChange(editor, shape)\n\t}\n}\n\nconst createBookmarkAssetOnUrlChange = debounce(async (editor: Editor, shape: TLBookmarkShape) => {\n\tif (editor.isDisposed) return\n\n\tconst { url } = shape.props\n\n\t// Create the asset using the external content manager's createAssetFromUrl method.\n\t// This may be overwritten by the user (for example, we overwrite it on tldraw.com)\n\tconst asset = await editor.getAssetForExternalContent({ type: 'url', url })\n\n\tif (!asset) {\n\t\t// No asset? Just leave the bookmark as a null assetId.\n\t\treturn\n\t}\n\n\teditor.run(() => {\n\t\t// Create the new asset\n\t\teditor.createAssets([asset])\n\n\t\t// And update the shape\n\t\teditor.updateShapes([\n\t\t\t{\n\t\t\t\tid: shape.id,\n\t\t\t\ttype: shape.type,\n\t\t\t\tprops: { assetId: asset.id },\n\t\t\t},\n\t\t])\n\t})\n}, 500)\n\n/**\n * Creates a bookmark shape from a URL with unfurled metadata.\n *\n * @returns A Result containing the created bookmark shape or an error\n * @public\n */\n\nexport async function createBookmarkFromUrl(\n\teditor: Editor,\n\t{\n\t\turl,\n\t\tcenter = editor.getViewportPageBounds().center,\n\t}: {\n\t\turl: string\n\t\tcenter?: { x: number; y: number }\n\t}\n): Promise<Result<TLBookmarkShape, string>> {\n\ttry {\n\t\t// Create the bookmark asset with unfurled metadata\n\t\tconst asset = await editor.getAssetForExternalContent({ type: 'url', url })\n\n\t\t// Create the bookmark shape\n\t\tconst shapeId = createShapeId()\n\t\tconst shapePartial: TLShapePartial<TLBookmarkShape> = {\n\t\t\tid: shapeId,\n\t\t\ttype: 'bookmark',\n\t\t\tx: center.x - BOOKMARK_WIDTH / 2,\n\t\t\ty: center.y - BOOKMARK_HEIGHT / 2,\n\t\t\trotation: 0,\n\t\t\topacity: 1,\n\t\t\tprops: {\n\t\t\t\turl,\n\t\t\t\tassetId: asset?.id || null,\n\t\t\t\tw: BOOKMARK_WIDTH,\n\t\t\t\th: getBookmarkHeight(editor, asset?.id),\n\t\t\t},\n\t\t}\n\n\t\teditor.run(() => {\n\t\t\t// Create the asset if we have one\n\t\t\tif (asset) {\n\t\t\t\teditor.createAssets([asset])\n\t\t\t}\n\n\t\t\t// Create the shape\n\t\t\teditor.createShapes([shapePartial])\n\t\t})\n\n\t\t// Get the created shape\n\t\tconst createdShape = editor.getShape(shapeId) as TLBookmarkShape\n\t\treturn Result.ok(createdShape)\n\t} catch (error) {\n\t\treturn Result.err(error instanceof Error ? error.message : 'Failed to create bookmark')\n\t}\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1213, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/bookmark/BookmarkShapeUtil.tsx"],"sourcesContent":["import {\n\tBaseBoxShapeUtil,\n\tHTMLContainer,\n\tT,\n\tTLAssetId,\n\tTLBookmarkAsset,\n\tTLBookmarkShape,\n\tTLBookmarkShapeProps,\n\tbookmarkShapeMigrations,\n\tbookmarkShapeProps,\n\tlerp,\n\ttlenv,\n\ttoDomPrecision,\n\tuseEditor,\n\tuseSvgExportContext,\n} from '@tldraw/editor'\nimport classNames from 'classnames'\nimport { PointerEventHandler, useCallback, useState } from 'react'\nimport { convertCommonTitleHTMLEntities } from '../../utils/text/text'\nimport { HyperlinkButton } from '../shared/HyperlinkButton'\nimport { LINK_ICON } from '../shared/icons-editor'\nimport { getRotatedBoxShadow } from '../shared/rotated-box-shadow'\nimport {\n\tBOOKMARK_HEIGHT,\n\tBOOKMARK_WIDTH,\n\tgetHumanReadableAddress,\n\tsetBookmarkHeight,\n\tupdateBookmarkAssetOnUrlChange,\n} from './bookmarks'\n\n/** @public */\nexport class BookmarkShapeUtil extends BaseBoxShapeUtil<TLBookmarkShape> {\n\tstatic override type = 'bookmark' as const\n\tstatic override props = bookmarkShapeProps\n\tstatic override migrations = bookmarkShapeMigrations\n\n\toverride canResize() {\n\t\treturn false\n\t}\n\n\toverride hideSelectionBoundsFg() {\n\t\treturn true\n\t}\n\n\toverride getText(shape: TLBookmarkShape) {\n\t\treturn shape.props.url\n\t}\n\n\toverride getAriaDescriptor(shape: TLBookmarkShape) {\n\t\tconst asset = (\n\t\t\tshape.props.assetId ? this.editor.getAsset(shape.props.assetId) : null\n\t\t) as TLBookmarkAsset | null\n\n\t\tif (!asset?.props.title) return undefined\n\n\t\treturn (\n\t\t\tconvertCommonTitleHTMLEntities(asset.props.title) +\n\t\t\t(asset.props.description ? ', ' + asset.props.description : '')\n\t\t)\n\t}\n\n\toverride getDefaultProps(): TLBookmarkShape['props'] {\n\t\treturn {\n\t\t\turl: '',\n\t\t\tw: BOOKMARK_WIDTH,\n\t\t\th: BOOKMARK_HEIGHT,\n\t\t\tassetId: null,\n\t\t}\n\t}\n\n\toverride component(shape: TLBookmarkShape) {\n\t\tconst { assetId, url, h } = shape.props\n\t\tconst rotation = this.editor.getShapePageTransform(shape)!.rotation()\n\n\t\treturn <BookmarkShapeComponent assetId={assetId} url={url} h={h} rotation={rotation} />\n\t}\n\n\toverride indicator(shape: TLBookmarkShape) {\n\t\treturn <BookmarkIndicatorComponent w={shape.props.w} h={shape.props.h} />\n\t}\n\n\toverride useLegacyIndicator() {\n\t\treturn false\n\t}\n\n\toverride getIndicatorPath(shape: TLBookmarkShape): Path2D {\n\t\tconst path = new Path2D()\n\t\tpath.roundRect(0, 0, shape.props.w, shape.props.h, 6)\n\t\treturn path\n\t}\n\n\toverride onBeforeCreate(next: TLBookmarkShape) {\n\t\treturn setBookmarkHeight(this.editor, next)\n\t}\n\n\toverride onBeforeUpdate(prev: TLBookmarkShape, shape: TLBookmarkShape) {\n\t\tif (prev.props.url !== shape.props.url) {\n\t\t\tif (!T.linkUrl.isValid(shape.props.url)) {\n\t\t\t\treturn { ...shape, props: { ...shape.props, url: prev.props.url } }\n\t\t\t} else {\n\t\t\t\tupdateBookmarkAssetOnUrlChange(this.editor, shape)\n\t\t\t}\n\t\t}\n\n\t\tif (prev.props.assetId !== shape.props.assetId) {\n\t\t\treturn setBookmarkHeight(this.editor, shape)\n\t\t}\n\t}\n\toverride getInterpolatedProps(\n\t\tstartShape: TLBookmarkShape,\n\t\tendShape: TLBookmarkShape,\n\t\tt: number\n\t): TLBookmarkShapeProps {\n\t\treturn {\n\t\t\t...(t > 0.5 ? endShape.props : startShape.props),\n\t\t\tw: lerp(startShape.props.w, endShape.props.w, t),\n\t\t\th: lerp(startShape.props.h, endShape.props.h, t),\n\t\t}\n\t}\n}\n\nexport function BookmarkIndicatorComponent({ w, h }: { w: number; h: number }) {\n\treturn <rect width={toDomPrecision(w)} height={toDomPrecision(h)} rx=\"6\" ry=\"6\" />\n}\n\nexport function BookmarkShapeComponent({\n\tassetId,\n\trotation,\n\turl,\n\th,\n\tshowImageContainer = true,\n}: {\n\tassetId: TLAssetId | null\n\trotation: number\n\th: number\n\turl: string\n\tshowImageContainer?: boolean\n}) {\n\tconst editor = useEditor()\n\n\tconst asset = assetId ? (editor.getAsset(assetId) as TLBookmarkAsset) : null\n\n\tconst isSafariExport = !!useSvgExportContext() && tlenv.isSafari\n\n\tconst address = getHumanReadableAddress(url)\n\n\tconst [isFaviconValid, setIsFaviconValid] = useState(true)\n\tconst onFaviconError = () => setIsFaviconValid(false)\n\n\tconst markAsHandledOnShiftKey = useCallback<PointerEventHandler>(\n\t\t(e) => {\n\t\t\tif (!editor.inputs.getShiftKey()) editor.markEventAsHandled(e)\n\t\t},\n\t\t[editor]\n\t)\n\n\treturn (\n\t\t<HTMLContainer>\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\t'tl-bookmark__container',\n\t\t\t\t\tisSafariExport && 'tl-bookmark__container--safariExport'\n\t\t\t\t)}\n\t\t\t\tstyle={{\n\t\t\t\t\tboxShadow: isSafariExport ? undefined : getRotatedBoxShadow(rotation),\n\t\t\t\t\tmaxHeight: h,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{showImageContainer && (!asset || asset.props.image) && (\n\t\t\t\t\t<div className=\"tl-bookmark__image_container\">\n\t\t\t\t\t\t{asset ? (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName=\"tl-bookmark__image\"\n\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\treferrerPolicy=\"strict-origin-when-cross-origin\"\n\t\t\t\t\t\t\t\tsrc={asset?.props.image}\n\t\t\t\t\t\t\t\talt={asset?.props.title || ''}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"tl-bookmark__placeholder\" />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{asset?.props.image && <HyperlinkButton url={url} />}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<div className=\"tl-bookmark__copy_container\">\n\t\t\t\t\t{asset?.props.title ? (\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"tl-bookmark__link\"\n\t\t\t\t\t\t\thref={url || ''}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\tonPointerDown={markAsHandledOnShiftKey}\n\t\t\t\t\t\t\tonPointerUp={markAsHandledOnShiftKey}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<h2 className=\"tl-bookmark__heading\">\n\t\t\t\t\t\t\t\t{convertCommonTitleHTMLEntities(asset.props.title)}\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{asset?.props.description && asset?.props.image ? (\n\t\t\t\t\t\t<p className=\"tl-bookmark__description\">{asset.props.description}</p>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"tl-bookmark__link\"\n\t\t\t\t\t\thref={url || ''}\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\tonPointerDown={markAsHandledOnShiftKey}\n\t\t\t\t\t\tonPointerUp={markAsHandledOnShiftKey}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isFaviconValid && asset?.props.favicon ? (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName=\"tl-bookmark__favicon\"\n\t\t\t\t\t\t\t\tsrc={asset?.props.favicon}\n\t\t\t\t\t\t\t\treferrerPolicy=\"strict-origin-when-cross-origin\"\n\t\t\t\t\t\t\t\tonError={onFaviconError}\n\t\t\t\t\t\t\t\talt={`favicon of ${address}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"tl-hyperlink__icon\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tmask: `url(\"${LINK_ICON}\") center 100% / 100% no-repeat`,\n\t\t\t\t\t\t\t\t\tWebkitMask: `url(\"${LINK_ICON}\") center 100% / 100% no-repeat`,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<span>{address}</span>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</HTMLContainer>\n\t)\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1433, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/frame/FrameShapeTool.ts"],"sourcesContent":["import { BaseBoxShapeTool, TLShape, TLShapeId } from '@tldraw/editor'\n\n/** @public */\nexport class FrameShapeTool extends BaseBoxShapeTool {\n\tstatic override id = 'frame'\n\tstatic override initial = 'idle'\n\toverride shapeType = 'frame' as const\n\n\toverride onCreate(shape: TLShape | null): void {\n\t\tif (!shape) return\n\n\t\tconst bounds = this.editor.getShapePageBounds(shape)!\n\t\tconst shapesToAddToFrame: TLShapeId[] = []\n\t\tconst ancestorIds = this.editor.getShapeAncestors(shape).map((shape) => shape.id)\n\n\t\tthis.editor.getSortedChildIdsForParent(shape.parentId).map((siblingShapeId) => {\n\t\t\tconst siblingShape = this.editor.getShape(siblingShapeId)\n\t\t\tif (!siblingShape) return\n\t\t\t// We don't want to frame the frame itself\n\t\t\tif (siblingShape.id === shape.id) return\n\t\t\tif (siblingShape.isLocked) return\n\n\t\t\tconst pageShapeBounds = this.editor.getShapePageBounds(siblingShape)\n\t\t\tif (!pageShapeBounds) return\n\n\t\t\t// Frame shape encloses page shape\n\t\t\tif (bounds.contains(pageShapeBounds)) {\n\t\t\t\tif (canEnclose(siblingShape, ancestorIds, shape)) {\n\t\t\t\t\tshapesToAddToFrame.push(siblingShape.id)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tthis.editor.reparentShapes(shapesToAddToFrame, shape.id)\n\n\t\tif (this.editor.getInstanceState().isToolLocked) {\n\t\t\tthis.editor.setCurrentTool('frame')\n\t\t} else {\n\t\t\tthis.editor.setCurrentTool('select.idle')\n\t\t}\n\t}\n}\n\n/** @internal */\nfunction canEnclose(shape: TLShape, ancestorIds: TLShapeId[], frame: TLShape): boolean {\n\t// We don't want to pull in shapes that are ancestors of the frame (can create a cycle)\n\tif (ancestorIds.includes(shape.id)) {\n\t\treturn false\n\t}\n\t// We only want to pull in shapes that are siblings of the frame\n\tif (shape.parentId === frame.parentId) {\n\t\treturn true\n\t}\n\treturn false\n}\n"],"names":["shape"],"mappings":";;;;;AAAA,SAAS,wBAA4C;;AAG9C,MAAM,uBAAuB,6RAAA,CAAiB;IACpD,OAAgB,KAAK,QAAA;IACrB,OAAgB,UAAU,OAAA;IACjB,YAAY,QAAA;IAEZ,SAAS,KAAA,EAA6B;QAC9C,IAAI,CAAC,MAAO,CAAA;QAEZ,MAAM,SAAS,IAAA,CAAK,MAAA,CAAO,kBAAA,CAAmB,KAAK;QACnD,MAAM,qBAAkC,CAAC,CAAA;QACzC,MAAM,cAAc,IAAA,CAAK,MAAA,CAAO,iBAAA,CAAkB,KAAK,EAAE,GAAA,CAAI,CAACA,SAAUA,OAAM,EAAE;QAEhF,IAAA,CAAK,MAAA,CAAO,0BAAA,CAA2B,MAAM,QAAQ,EAAE,GAAA,CAAI,CAAC,mBAAmB;YAC9E,MAAM,eAAe,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,cAAc;YACxD,IAAI,CAAC,aAAc,CAAA;YAEnB,IAAI,aAAa,EAAA,KAAO,MAAM,EAAA,CAAI,CAAA;YAClC,IAAI,aAAa,QAAA,CAAU,CAAA;YAE3B,MAAM,kBAAkB,IAAA,CAAK,MAAA,CAAO,kBAAA,CAAmB,YAAY;YACnE,IAAI,CAAC,gBAAiB,CAAA;YAGtB,IAAI,OAAO,QAAA,CAAS,eAAe,GAAG;gBACrC,IAAI,WAAW,cAAc,aAAa,KAAK,GAAG;oBACjD,mBAAmB,IAAA,CAAK,aAAa,EAAE;gBACxC;YACD;QACD,CAAC;QAED,IAAA,CAAK,MAAA,CAAO,cAAA,CAAe,oBAAoB,MAAM,EAAE;QAEvD,IAAI,IAAA,CAAK,MAAA,CAAO,gBAAA,CAAiB,EAAE,YAAA,EAAc;YAChD,IAAA,CAAK,MAAA,CAAO,cAAA,CAAe,OAAO;QACnC,OAAO;YACN,IAAA,CAAK,MAAA,CAAO,cAAA,CAAe,aAAa;QACzC;IACD;AACD;AAGA,SAAS,WAAW,KAAA,EAAgB,WAAA,EAA0B,KAAA,EAAyB;IAEtF,IAAI,YAAY,QAAA,CAAS,MAAM,EAAE,GAAG;QACnC,OAAO;IACR;IAEA,IAAI,MAAM,QAAA,KAAa,MAAM,QAAA,EAAU;QACtC,OAAO;IACR;IACA,OAAO;AACR"}},
    {"offset": {"line": 1485, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/frame/frameHelpers.ts"],"sourcesContent":["import {\n\tBox,\n\tEditor,\n\tTLFrameShape,\n\tcanonicalizeRotation,\n\tlast,\n\ttoDomPrecision,\n} from '@tldraw/editor'\nimport { TLCreateTextJsxFromSpansOpts } from '../shared/createTextJsxFromSpans'\nimport { defaultEmptyAs } from './FrameShapeUtil'\n\nexport function getFrameHeadingSide(editor: Editor, shape: TLFrameShape): 0 | 1 | 2 | 3 {\n\tconst pageRotation = canonicalizeRotation(editor.getShapePageTransform(shape.id)!.rotation())\n\tconst offsetRotation = pageRotation + Math.PI / 4\n\tconst scaledRotation = (offsetRotation * (2 / Math.PI) + 4) % 4\n\treturn Math.floor(scaledRotation) as 0 | 1 | 2 | 3\n}\n\n/**\n * We use a weak map here to prevent re-measuring the text width of frames that haven't changed their names.\n * It's only really important for performance reasons while zooming in and out. The measured text size is\n * independent of the zoom level, so we can cache the expensive part (measurement) and apply those changes\n * using the zoom level.\n */\nconst measurementWeakmap = new WeakMap()\n\n/**\n * Get the frame heading info (size and text) for a frame shape.\n *\n * @param editor The editor instance.\n * @param shape The frame shape.\n * @param opts The text measurement options.\n *\n * @returns The frame heading's size (as a Box) and JSX text spans.\n */\nexport function getFrameHeadingSize(\n\teditor: Editor,\n\tshape: TLFrameShape,\n\topts: TLCreateTextJsxFromSpansOpts\n) {\n\tif (process.env.NODE_ENV === 'test') {\n\t\t// can't really measure text in tests\n\t\treturn new Box(0, -opts.height, shape.props.w, opts.height)\n\t}\n\n\tlet width = measurementWeakmap.get(shape.props)\n\tif (!width) {\n\t\tconst frameTitle = defaultEmptyAs(shape.props.name, 'Frame') + String.fromCharCode(8203)\n\t\tconst spans = editor.textMeasure.measureTextSpans(frameTitle, opts)\n\t\tconst firstSpan = spans[0]\n\t\tconst lastSpan = last(spans)!\n\n\t\twidth = lastSpan.box.w + lastSpan.box.x - firstSpan.box.x\n\t\tmeasurementWeakmap.set(shape.props, width)\n\t}\n\n\treturn new Box(0, -opts.height, width, opts.height)\n}\n\nexport function getFrameHeadingOpts(width: number, isSvg: boolean): TLCreateTextJsxFromSpansOpts {\n\treturn {\n\t\tfontSize: 12,\n\t\tfontFamily: isSvg ? 'Arial' : 'Inter, sans-serif',\n\t\ttextAlign: 'start' as const,\n\t\twidth: width,\n\t\theight: 24, // --frame-height\n\t\tpadding: 0,\n\t\tlineHeight: 1,\n\t\tfontStyle: 'normal',\n\t\tfontWeight: 'normal',\n\t\toverflow: 'truncate-ellipsis' as const,\n\t\tverticalTextAlign: 'middle' as const,\n\t\toffsetY: -(32 + 2), // --frame-minimum-height + (border width * 2)\n\t\toffsetX: 0,\n\t}\n}\n\nexport function getFrameHeadingTranslation(\n\tshape: TLFrameShape,\n\tside: 0 | 1 | 2 | 3,\n\tisSvg: boolean\n) {\n\tconst u = isSvg ? '' : 'px'\n\tconst r = isSvg ? '' : 'deg'\n\tlet labelTranslate: string\n\tswitch (side) {\n\t\tcase 0: // top\n\t\t\tlabelTranslate = ``\n\t\t\tbreak\n\t\tcase 3: // right\n\t\t\tlabelTranslate = `translate(${toDomPrecision(shape.props.w)}${u}, 0${u}) rotate(90${r})`\n\t\t\tbreak\n\t\tcase 2: // bottom\n\t\t\tlabelTranslate = `translate(${toDomPrecision(shape.props.w)}${u}, ${toDomPrecision(\n\t\t\t\tshape.props.h\n\t\t\t)}${u}) rotate(180${r})`\n\t\t\tbreak\n\t\tcase 1: // left\n\t\t\tlabelTranslate = `translate(0${u}, ${toDomPrecision(shape.props.h)}${u}) rotate(270${r})`\n\t\t\tbreak\n\t\tdefault:\n\t\t\tthrow Error('labelSide out of bounds')\n\t}\n\n\treturn labelTranslate\n}\n"],"names":[],"mappings":";;;;;;;;;;AAwCK,QAAQ,IAAI,aAAa,QAAQ;AAxCtC;;;;AASA,SAAS,sBAAsB;;;AAExB,SAAS,oBAAoB,MAAA,EAAgB,KAAA,EAAoC;IACvF,MAAM,mBAAe,6PAAA,EAAqB,OAAO,qBAAA,CAAsB,MAAM,EAAE,EAAG,QAAA,CAAS,CAAC;IAC5F,MAAM,iBAAiB,eAAe,KAAK,EAAA,GAAK;IAChD,MAAM,iBAAA,CAAkB,iBAAA,CAAkB,IAAI,KAAK,EAAA,IAAM,CAAA,IAAK;IAC9D,OAAO,KAAK,KAAA,CAAM,cAAc;AACjC;AAQA,MAAM,qBAAqB,aAAA,GAAA,IAAI,QAAQ;AAWhC,SAAS,oBACf,MAAA,EACA,KAAA,EACA,IAAA,EACC;IACD;;IAKA,IAAI,QAAQ,mBAAmB,GAAA,CAAI,MAAM,KAAK;IAC9C,IAAI,CAAC,OAAO;QACX,MAAM,iBAAa,yPAAA,EAAe,MAAM,KAAA,CAAM,IAAA,EAAM,OAAO,IAAI,OAAO,YAAA,CAAa,IAAI;QACvF,MAAM,QAAQ,OAAO,WAAA,CAAY,gBAAA,CAAiB,YAAY,IAAI;QAClE,MAAM,YAAY,KAAA,CAAM,CAAC,CAAA;QACzB,MAAM,eAAW,uNAAA,EAAK,KAAK;QAE3B,QAAQ,SAAS,GAAA,CAAI,CAAA,GAAI,SAAS,GAAA,CAAI,CAAA,GAAI,UAAU,GAAA,CAAI,CAAA;QACxD,mBAAmB,GAAA,CAAI,MAAM,KAAA,EAAO,KAAK;IAC1C;IAEA,OAAO,IAAI,0OAAA,CAAI,GAAG,CAAC,KAAK,MAAA,EAAQ,OAAO,KAAK,MAAM;AACnD;AAEO,SAAS,oBAAoB,KAAA,EAAe,KAAA,EAA8C;IAChG,OAAO;QACN,UAAU;QACV,YAAY,QAAQ,UAAU;QAC9B,WAAW;QACX;QACA,QAAQ;QAAA,iBAAA;QACR,SAAS;QACT,YAAY;QACZ,WAAW;QACX,YAAY;QACZ,UAAU;QACV,mBAAmB;QACnB,SAAS,CAAA,CAAE,KAAK,CAAA;QAAA,8CAAA;QAChB,SAAS;IACV;AACD;AAEO,SAAS,2BACf,KAAA,EACA,IAAA,EACA,KAAA,EACC;IACD,MAAM,IAAI,QAAQ,KAAK;IACvB,MAAM,IAAI,QAAQ,KAAK;IACvB,IAAI;IACJ,OAAQ,MAAM;QACb,KAAK;YACJ,iBAAiB,EAAA;YACjB;QACD,KAAK;YACJ,iBAAiB,CAAA,UAAA,MAAa,uPAAA,EAAe,MAAM,KAAA,CAAM,CAAC,CAAC,GAAG,CAAC,CAAA,GAAA,EAAM,CAAC,CAAA,WAAA,EAAc,CAAC,CAAA,CAAA,CAAA;YACrF;QACD,KAAK;YACJ,iBAAiB,CAAA,UAAA,MAAa,uPAAA,EAAe,MAAM,KAAA,CAAM,CAAC,CAAC,GAAG,CAAC,CAAA,EAAA,MAAK,uPAAA,EACnE,MAAM,KAAA,CAAM,CAAA,IACT,CAAC,CAAA,YAAA,EAAe,CAAC,CAAA,CAAA,CAAA;YACrB;QACD,KAAK;YACJ,iBAAiB,CAAA,WAAA,EAAc,CAAC,CAAA,EAAA,MAAK,uPAAA,EAAe,MAAM,KAAA,CAAM,CAAC,CAAC,GAAG,CAAC,CAAA,YAAA,EAAe,CAAC,CAAA,CAAA,CAAA;YACtF;QACD;YACC,MAAM,MAAM,yBAAyB;IACvC;IAEA,OAAO;AACR"}},
    {"offset": {"line": 1571, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/frame/components/FrameLabelInput.tsx"],"sourcesContent":["import { TLFrameShape, TLShapeId, useEditor, useValue } from '@tldraw/editor'\nimport { forwardRef, useCallback, useEffect, useRef } from 'react'\nimport { PORTRAIT_BREAKPOINT } from '../../../ui/constants'\nimport { useBreakpoint } from '../../../ui/context/breakpoints'\nimport { useTranslation } from '../../../ui/hooks/useTranslation/useTranslation'\nimport { defaultEmptyAs } from '../FrameShapeUtil'\n\nexport const FrameLabelInput = forwardRef<\n\tHTMLInputElement,\n\t{ id: TLShapeId; name: string; isEditing: boolean }\n>(({ id, name, isEditing }, ref) => {\n\tconst editor = useEditor()\n\tconst breakpoint = useBreakpoint()\n\tconst isCoarsePointer = useValue(\n\t\t'isCoarsePointer',\n\t\t() => editor.getInstanceState().isCoarsePointer,\n\t\t[editor]\n\t)\n\tconst shouldUseWindowPrompt = breakpoint < PORTRAIT_BREAKPOINT.TABLET_SM && isCoarsePointer\n\tconst promptOpen = useRef<boolean>(false)\n\tconst msg = useTranslation()\n\n\tconst handlePointerDown = useCallback(\n\t\t(e: React.PointerEvent) => {\n\t\t\tif (isEditing) editor.markEventAsHandled(e)\n\t\t},\n\t\t[editor, isEditing]\n\t)\n\n\tconst handleKeyDown = useCallback(\n\t\t(e: React.KeyboardEvent<HTMLInputElement>) => {\n\t\t\tif (e.key === 'Enter' && !e.nativeEvent.isComposing) {\n\t\t\t\t// need to prevent the enter keydown making it's way up to the Idle state\n\t\t\t\t// and sending us back into edit mode\n\t\t\t\teditor.markEventAsHandled(e)\n\t\t\t\te.currentTarget.blur()\n\t\t\t\teditor.setEditingShape(null)\n\t\t\t}\n\t\t},\n\t\t[editor]\n\t)\n\n\tconst renameFrame = useCallback(\n\t\t(value: string) => {\n\t\t\tconst shape = editor.getShape<TLFrameShape>(id)\n\t\t\tif (!shape) return\n\n\t\t\tconst name = shape.props.name\n\t\t\tif (name === value) return\n\n\t\t\teditor.updateShapes([\n\t\t\t\t{\n\t\t\t\t\tid,\n\t\t\t\t\ttype: 'frame',\n\t\t\t\t\tprops: { name: value },\n\t\t\t\t},\n\t\t\t])\n\t\t},\n\t\t[id, editor]\n\t)\n\n\tconst handleBlur = useCallback(\n\t\t(e: React.FocusEvent<HTMLInputElement>) => {\n\t\t\trenameFrame(e.currentTarget.value)\n\t\t},\n\t\t[renameFrame]\n\t)\n\n\tconst handleChange = useCallback(\n\t\t(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\trenameFrame(e.currentTarget.value)\n\t\t},\n\t\t[renameFrame]\n\t)\n\n\t/* Mobile rename uses window.prompt */\n\tuseEffect(() => {\n\t\tif (!isEditing) {\n\t\t\tpromptOpen.current = false\n\t\t\treturn\n\t\t}\n\t\tif (isEditing && shouldUseWindowPrompt && !promptOpen.current) {\n\t\t\tpromptOpen.current = true\n\t\t\tconst shape = editor.getShape<TLFrameShape>(id)\n\t\t\tconst currentName = shape?.props.name ?? ''\n\t\t\tconst newName = window.prompt(msg('action.rename'), currentName)\n\t\t\tpromptOpen.current = false\n\t\t\tif (newName !== null) renameFrame(newName)\n\t\t\teditor.setEditingShape(null)\n\t\t}\n\t}, [isEditing, shouldUseWindowPrompt, id, msg, renameFrame, editor])\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`tl-frame-label ${isEditing && !shouldUseWindowPrompt ? 'tl-frame-label__editing' : ''}`}\n\t\t>\n\t\t\t<input\n\t\t\t\tclassName=\"tl-frame-name-input\"\n\t\t\t\tref={ref}\n\t\t\t\tdisabled={!isEditing || shouldUseWindowPrompt}\n\t\t\t\treadOnly={!isEditing || shouldUseWindowPrompt}\n\t\t\t\tstyle={{ display: isEditing ? undefined : 'none' }}\n\t\t\t\tvalue={name}\n\t\t\t\tautoFocus={!shouldUseWindowPrompt}\n\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t\tonBlur={handleBlur}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonPointerDown={handlePointerDown}\n\t\t\t\tdraggable={false}\n\t\t\t/>\n\t\t\t{defaultEmptyAs(name, 'Frame') + String.fromCharCode(8203)}\n\t\t</div>\n\t)\n})\n"],"names":["name"],"mappings":"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"}},
    {"offset": {"line": 1708, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/frame/components/FrameHeading.tsx"],"sourcesContent":["import { TLFrameShape, TLShapeId, useEditor, useIsEditing, useValue } from '@tldraw/editor'\nimport { memo, useEffect, useRef } from 'react'\nimport { getFrameHeadingSide, getFrameHeadingTranslation } from '../frameHelpers'\nimport { FrameLabelInput } from './FrameLabelInput'\n\nexport const FrameHeading = memo(function FrameHeading({\n\tid,\n\tname,\n\twidth,\n\theight,\n\tfill,\n\tstroke,\n\tcolor,\n\toffsetX,\n\tshowColors,\n}: {\n\tid: TLShapeId\n\tname: string\n\twidth: number\n\theight: number\n\tfill: string\n\tstroke: string\n\tcolor: string\n\toffsetX: number\n\tshowColors: boolean\n}) {\n\tconst editor = useEditor()\n\tconst { side, translation } = useValue(\n\t\t'shape rotation',\n\t\t() => {\n\t\t\tconst shape = editor.getShape<TLFrameShape>(id)\n\t\t\tif (!shape) {\n\t\t\t\t// meh\n\t\t\t\treturn {\n\t\t\t\t\tside: 0,\n\t\t\t\t\ttranslation: 'translate(0, 0)',\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst labelSide = getFrameHeadingSide(editor, shape)\n\t\t\treturn {\n\t\t\t\tside: labelSide,\n\t\t\t\ttranslation: getFrameHeadingTranslation(shape, labelSide, false),\n\t\t\t}\n\t\t},\n\t\t[editor, offsetX, id]\n\t)\n\n\tconst rInput = useRef<HTMLInputElement>(null)\n\tconst isEditing = useIsEditing(id)\n\n\tuseEffect(() => {\n\t\tconst el = rInput.current\n\t\tif (el && isEditing) {\n\t\t\t// On iOS, we must focus here\n\t\t\tel.focus()\n\t\t\tel.select()\n\t\t}\n\t}, [rInput, isEditing])\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"tl-frame-heading\"\n\t\t\tstyle={{\n\t\t\t\toverflow: isEditing ? 'visible' : 'hidden',\n\t\t\t\tmaxWidth: `calc(var(--tl-zoom) * ${\n\t\t\t\t\tside === 0 || side === 2 ? Math.ceil(width) : Math.ceil(height)\n\t\t\t\t}px + ${showColors ? '0px' : 'var(--tl-frame-offset-width)'})`,\n\t\t\t\tbottom: '100%',\n\t\t\t\ttransform: `${translation} scale(min(var(--tl-scale), 3.5)) translateX(${offsetX}px)`,\n\t\t\t}}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName=\"tl-frame-heading-hit-area\"\n\t\t\t\tstyle={{ color, backgroundColor: fill, boxShadow: `inset 0px 0px 0px 1px ${stroke}` }}\n\t\t\t>\n\t\t\t\t<FrameLabelInput ref={rInput} id={id} name={name} isEditing={isEditing} />\n\t\t\t</div>\n\t\t</div>\n\t)\n})\n"],"names":["FrameHeading"],"mappings":";;;;AA2EI;;;;AA3EJ,SAAkC,WAAW,cAAc,gBAAgB;AAC3E,SAAS,MAAM,WAAW,cAAc;AACxC,SAAS,qBAAqB,kCAAkC;AAChE,SAAS,uBAAuB;;;;;;AAEzB,MAAM,mBAAe,uNAAA,EAAK,SAASA,cAAa,EACtD,EAAA,EACA,IAAA,EACA,KAAA,EACA,MAAA,EACA,IAAA,EACA,MAAA,EACA,KAAA,EACA,OAAA,EACA,UAAA,EACD,EAUG;IACF,MAAM,aAAS,iPAAA,CAAU;IACzB,MAAM,EAAE,IAAA,EAAM,WAAA,CAAY,CAAA,OAAI,oOAAA,EAC7B;+CACA,MAAM;YACL,MAAM,QAAQ,OAAO,QAAA,CAAuB,EAAE;YAC9C,IAAI,CAAC,OAAO;gBAEX,OAAO;oBACN,MAAM;oBACN,aAAa;gBACd;YACD;YACA,MAAM,gBAAY,4PAAA,EAAoB,QAAQ,KAAK;YACnD,OAAO;gBACN,MAAM;gBACN,iBAAa,mQAAA,EAA2B,OAAO,WAAW,KAAK;YAChE;QACD;8CACA;QAAC;QAAQ;QAAS,EAAE;KAAA;IAGrB,MAAM,aAAS,yNAAA,EAAyB,IAAI;IAC5C,MAAM,gBAAY,uPAAA,EAAa,EAAE;IAEjC,IAAA,4NAAA;gDAAU,MAAM;YACf,MAAM,KAAK,OAAO,OAAA;YAClB,IAAI,MAAM,WAAW;gBAEpB,GAAG,KAAA,CAAM;gBACT,GAAG,MAAA,CAAO;YACX;QACD;+CAAG;QAAC;QAAQ,SAAS;KAAC;IAEtB,OACC,aAAA,GAAA,IAAA,+NAAA,EAAC,OAAA;QACA,WAAU;QACV,OAAO;YACN,UAAU,YAAY,YAAY;YAClC,UAAU,CAAA,sBAAA,EACT,SAAS,KAAK,SAAS,IAAI,KAAK,IAAA,CAAK,KAAK,IAAI,KAAK,IAAA,CAAK,MAAM,CAC/D,CAAA,KAAA,EAAQ,aAAa,QAAQ,8BAA8B,CAAA,CAAA,CAAA;YAC3D,QAAQ;YACR,WAAW,GAAG,WAAW,CAAA,6CAAA,EAAgD,OAAO,CAAA,GAAA,CAAA;QACjF;QAEA,UAAA,aAAA,GAAA,IAAA,+NAAA,EAAC,OAAA;YACA,WAAU;YACV,OAAO;gBAAE;gBAAO,iBAAiB;gBAAM,WAAW,CAAA,sBAAA,EAAyB,MAAM,EAAA;YAAG;YAEpF,UAAA,aAAA,GAAA,IAAA,+NAAA,EAAC,yQAAA,EAAA;gBAAgB,KAAK;gBAAQ;gBAAQ;gBAAY;YAAA,CAAsB;QAAA;IACzE;AAGH,CAAC"}},
    {"offset": {"line": 1791, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/frame/FrameShapeUtil.tsx"],"sourcesContent":["import {\n\tBaseBoxShapeUtil,\n\tDefaultColorStyle,\n\tGeometry2d,\n\tGroup2d,\n\tRectangle2d,\n\tSVGContainer,\n\tSvgExportContext,\n\tTLClickEventInfo,\n\tTLDragShapesOutInfo,\n\tTLDragShapesOverInfo,\n\tTLEditStartInfo,\n\tTLFrameShape,\n\tTLFrameShapeProps,\n\tTLResizeInfo,\n\tTLShape,\n\tTLShapePartial,\n\tTLShapeUtilConstructor,\n\tclamp,\n\tcompact,\n\tframeShapeMigrations,\n\tframeShapeProps,\n\tgetColorValue,\n\tgetDefaultColorTheme,\n\tlerp,\n\tresizeBox,\n\ttoDomPrecision,\n\tuseValue,\n} from '@tldraw/editor'\nimport classNames from 'classnames'\nimport { fitFrameToContent, getFrameChildrenBounds } from '../../utils/frames/frames'\nimport {\n\tTLCreateTextJsxFromSpansOpts,\n\tcreateTextJsxFromSpans,\n} from '../shared/createTextJsxFromSpans'\nimport { useDefaultColorTheme } from '../shared/useDefaultColorTheme'\nimport { FrameHeading } from './components/FrameHeading'\nimport {\n\tgetFrameHeadingOpts,\n\tgetFrameHeadingSide,\n\tgetFrameHeadingSize,\n\tgetFrameHeadingTranslation,\n} from './frameHelpers'\n\n// Some of these values are repeated in CSS and need to match\nconst FRAME_HEADING_EXTRA_WIDTH = 12\nconst FRAME_HEADING_MIN_WIDTH = 32\nconst FRAME_HEADING_NOCOLORS_OFFSET_X = -7\nconst FRAME_HEADING_OFFSET_Y = 4\n\n/** @public */\nexport interface FrameShapeOptions {\n\t/**\n\t * When true, the frame will display colors for the shape's headings and background.\n\t */\n\tshowColors: boolean\n\t/**\n\t * When true, the frame will resize its children when the frame itself is resized.\n\t */\n\tresizeChildren: boolean\n}\n\nexport function defaultEmptyAs(str: string, dflt: string) {\n\tif (str.match(/^\\s*$/)) {\n\t\treturn dflt\n\t}\n\treturn str\n}\n\n/** @public */\nexport class FrameShapeUtil extends BaseBoxShapeUtil<TLFrameShape> {\n\tstatic override type = 'frame' as const\n\tstatic override props = frameShapeProps\n\tstatic override migrations = frameShapeMigrations\n\n\toverride options: FrameShapeOptions = {\n\t\tshowColors: false,\n\t\tresizeChildren: false,\n\t}\n\n\t// evil crimes :)\n\t// By default, showColors is off. Because they use style props, which are picked up\n\t// automatically, we don't have DefaultColorStyle in the props in the schema by default.\n\t// Instead, when someone calls .configure to turn the option on, we manually add in the color\n\t// style here so it plays nicely with the other editor APIs.\n\tstatic override configure<T extends TLShapeUtilConstructor<any, any>>(\n\t\tthis: T,\n\t\toptions: T extends new (...args: any[]) => { options: infer Options } ? Partial<Options> : never\n\t): T {\n\t\tconst withOptions = super.configure.call(this, options) as T\n\t\tif ((options as any).showColors) {\n\t\t\t;(withOptions as any).props = { ...withOptions.props, color: DefaultColorStyle }\n\t\t}\n\t\treturn withOptions\n\t}\n\n\toverride canEdit(shape: TLFrameShape, info: TLEditStartInfo) {\n\t\treturn info.type === 'click-header' || info.type === 'unknown'\n\t}\n\n\toverride canResize() {\n\t\treturn true\n\t}\n\n\toverride canResizeChildren() {\n\t\treturn this.options.resizeChildren\n\t}\n\n\toverride isExportBoundsContainer(): boolean {\n\t\treturn true\n\t}\n\n\toverride getDefaultProps(): TLFrameShape['props'] {\n\t\treturn { w: 160 * 2, h: 90 * 2, name: '', color: 'black' }\n\t}\n\n\toverride getAriaDescriptor(shape: TLFrameShape) {\n\t\treturn shape.props.name\n\t}\n\n\toverride getGeometry(shape: TLFrameShape): Geometry2d {\n\t\tconst { editor } = this\n\n\t\tconst z = editor.getEfficientZoomLevel()\n\n\t\t// Which dimension measures the top edge after rotation?\n\t\tconst labelSide = getFrameHeadingSide(editor, shape)\n\t\tconst isVertical = labelSide % 2 === 1\n\t\tconst rotatedTopEdgeWidth = isVertical ? shape.props.h : shape.props.w\n\n\t\t// Get the size of the heading (max width equal to the rotatedTopEdgeWidth)\n\t\tconst opts = getFrameHeadingOpts(rotatedTopEdgeWidth, false)\n\t\tconst headingSize = getFrameHeadingSize(editor, shape, opts)\n\n\t\t// If NOT showing frame colors, we need to offset the label\n\t\t// to the left so that the title is in line with the shape edge\n\t\t// and add that extra width to the right side of the label\n\t\tconst isShowingFrameColors = this.options.showColors\n\n\t\t// Scale everything into **screen space**\n\t\tconst extraWidth = FRAME_HEADING_EXTRA_WIDTH / z\n\t\tconst minWidth = FRAME_HEADING_MIN_WIDTH / z\n\t\tconst maxWidth = rotatedTopEdgeWidth + (isShowingFrameColors ? 1 : extraWidth)\n\n\t\tconst labelWidth = headingSize.w / z\n\t\tconst labelHeight = headingSize.h / z\n\n\t\tconst clampedLabelWidth = clamp(labelWidth + extraWidth, minWidth, maxWidth)\n\n\t\tconst offsetX = (isShowingFrameColors ? -1 : FRAME_HEADING_NOCOLORS_OFFSET_X) / z\n\t\tconst offsetY = FRAME_HEADING_OFFSET_Y / z\n\n\t\t// In page space\n\t\tconst width = isVertical ? labelHeight : clampedLabelWidth\n\t\tconst height = isVertical ? clampedLabelWidth : labelHeight\n\n\t\t// Calculate label position based on side. The position needs to always appear\n\t\t// at the top left of the shape, regardless of rotation. The label must be\n\t\t// between a minimum and maximum. The minimum is arbitrary; the maximum is the\n\t\t// width of the edge of the frame where the label will be shown.\n\n\t\tlet x: number, y: number\n\n\t\tswitch (labelSide) {\n\t\t\tcase 0: {\n\t\t\t\t// top\n\t\t\t\tx = offsetX\n\t\t\t\ty = -(labelHeight + offsetY)\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase 1: {\n\t\t\t\t// right\n\t\t\t\tx = -(labelHeight + offsetY)\n\t\t\t\ty = shape.props.h - (offsetX + clampedLabelWidth)\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase 2: {\n\t\t\t\t// bottom\n\t\t\t\tx = shape.props.w - (offsetX + clampedLabelWidth)\n\t\t\t\ty = shape.props.h + offsetY\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase 3: {\n\t\t\t\t// left\n\t\t\t\tx = shape.props.w + offsetY\n\t\t\t\ty = offsetX\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\treturn new Group2d({\n\t\t\tchildren: [\n\t\t\t\tnew Rectangle2d({\n\t\t\t\t\twidth: shape.props.w,\n\t\t\t\t\theight: shape.props.h,\n\t\t\t\t\tisFilled: false,\n\t\t\t\t}),\n\t\t\t\tnew Rectangle2d({\n\t\t\t\t\tx,\n\t\t\t\t\ty,\n\t\t\t\t\twidth,\n\t\t\t\t\theight,\n\t\t\t\t\tisFilled: true,\n\t\t\t\t\tisLabel: true,\n\t\t\t\t\texcludeFromShapeBounds: true,\n\t\t\t\t}),\n\t\t\t],\n\t\t})\n\t}\n\n\toverride getText(shape: TLFrameShape): string | undefined {\n\t\treturn shape.props.name\n\t}\n\n\toverride component(shape: TLFrameShape) {\n\t\t// eslint-disable-next-line react-hooks/rules-of-hooks\n\t\tconst theme = useDefaultColorTheme()\n\n\t\t// eslint-disable-next-line react-hooks/rules-of-hooks\n\t\tconst isCreating = useValue(\n\t\t\t'is creating this shape',\n\t\t\t() => {\n\t\t\t\tconst resizingState = this.editor.getStateDescendant('select.resizing')\n\t\t\t\tif (!resizingState) return false\n\t\t\t\tif (!resizingState.getIsActive()) return false\n\t\t\t\tconst info = (resizingState as typeof resizingState & { info: { isCreating: boolean } })\n\t\t\t\t\t?.info\n\t\t\t\tif (!info) return false\n\t\t\t\treturn info.isCreating && this.editor.getOnlySelectedShapeId() === shape.id\n\t\t\t},\n\t\t\t[shape.id]\n\t\t)\n\n\t\tconst showFrameColors = this.options.showColors\n\t\tconst colorToUse = showFrameColors ? shape.props.color : 'black'\n\t\tconst frameFill = getColorValue(theme, colorToUse, 'frameFill')\n\t\tconst frameStroke = getColorValue(theme, colorToUse, 'frameStroke')\n\t\tconst frameHeadingStroke = showFrameColors\n\t\t\t? getColorValue(theme, colorToUse, 'frameHeadingStroke')\n\t\t\t: theme.background\n\t\tconst frameHeadingFill = showFrameColors\n\t\t\t? getColorValue(theme, colorToUse, 'frameHeadingFill')\n\t\t\t: theme.background\n\t\tconst frameHeadingText = getColorValue(theme, colorToUse, 'frameText')\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<SVGContainer>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tclassName={classNames('tl-frame__body', { 'tl-frame__creating': isCreating })}\n\t\t\t\t\t\tfill={frameFill}\n\t\t\t\t\t\tstroke={frameStroke}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: `calc(${shape.props.w}px + 1px / var(--tl-zoom))`,\n\t\t\t\t\t\t\theight: `calc(${shape.props.h}px + 1px / var(--tl-zoom))`,\n\t\t\t\t\t\t\ttransform: `translate(calc(-0.5px / var(--tl-zoom)), calc(-0.5px / var(--tl-zoom)))`,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</SVGContainer>\n\t\t\t\t{isCreating ? null : (\n\t\t\t\t\t<FrameHeading\n\t\t\t\t\t\tid={shape.id}\n\t\t\t\t\t\tname={shape.props.name}\n\t\t\t\t\t\tfill={frameHeadingFill}\n\t\t\t\t\t\tstroke={frameHeadingStroke}\n\t\t\t\t\t\tcolor={frameHeadingText}\n\t\t\t\t\t\twidth={shape.props.w}\n\t\t\t\t\t\theight={shape.props.h}\n\t\t\t\t\t\toffsetX={showFrameColors ? -1 : -7}\n\t\t\t\t\t\tshowColors={this.options.showColors}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</>\n\t\t)\n\t}\n\n\toverride toSvg(shape: TLFrameShape, ctx: SvgExportContext) {\n\t\tconst theme = getDefaultColorTheme({ isDarkMode: ctx.isDarkMode })\n\n\t\t// rotate right 45 deg\n\t\tconst labelSide = getFrameHeadingSide(this.editor, shape)\n\t\tconst isVertical = labelSide % 2 === 1\n\t\tconst rotatedTopEdgeWidth = isVertical ? shape.props.h : shape.props.w\n\t\tconst labelTranslate = getFrameHeadingTranslation(shape, labelSide, true)\n\n\t\t// Truncate with ellipsis\n\t\tconst opts: TLCreateTextJsxFromSpansOpts = getFrameHeadingOpts(rotatedTopEdgeWidth - 12, true)\n\n\t\tconst frameTitle = defaultEmptyAs(shape.props.name, 'Frame') + String.fromCharCode(8203)\n\t\tconst labelBounds = getFrameHeadingSize(this.editor, shape, opts)\n\t\tconst spans = this.editor.textMeasure.measureTextSpans(frameTitle, opts)\n\t\tconst text = createTextJsxFromSpans(this.editor, spans, opts)\n\n\t\tconst showFrameColors = this.options.showColors\n\t\tconst colorToUse = showFrameColors ? shape.props.color : 'black'\n\t\tconst frameFill = getColorValue(theme, colorToUse, 'frameFill')\n\t\tconst frameStroke = getColorValue(theme, colorToUse, 'frameStroke')\n\t\tconst frameHeadingStroke = showFrameColors\n\t\t\t? getColorValue(theme, colorToUse, 'frameHeadingStroke')\n\t\t\t: theme.background\n\t\tconst frameHeadingFill = showFrameColors\n\t\t\t? getColorValue(theme, colorToUse, 'frameHeadingFill')\n\t\t\t: theme.background\n\t\tconst frameHeadingText = getColorValue(theme, colorToUse, 'frameText')\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<rect\n\t\t\t\t\twidth={shape.props.w}\n\t\t\t\t\theight={shape.props.h}\n\t\t\t\t\tfill={frameFill}\n\t\t\t\t\tstroke={frameStroke}\n\t\t\t\t\tstrokeWidth={1}\n\t\t\t\t\tx={0}\n\t\t\t\t\trx={0}\n\t\t\t\t\try={0}\n\t\t\t\t/>\n\t\t\t\t<g fill={frameHeadingText} transform={labelTranslate}>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx={labelBounds.x - (showFrameColors ? 0 : 6)}\n\t\t\t\t\t\ty={labelBounds.y - 6}\n\t\t\t\t\t\twidth={Math.min(rotatedTopEdgeWidth, labelBounds.width + 12)}\n\t\t\t\t\t\theight={labelBounds.height}\n\t\t\t\t\t\tfill={frameHeadingFill}\n\t\t\t\t\t\tstroke={frameHeadingStroke}\n\t\t\t\t\t\trx={4}\n\t\t\t\t\t\try={4}\n\t\t\t\t\t/>\n\t\t\t\t\t<g transform={`translate(${showFrameColors ? 8 : 0}, 4)`}>{text}</g>\n\t\t\t\t</g>\n\t\t\t</>\n\t\t)\n\t}\n\n\tindicator(shape: TLFrameShape) {\n\t\treturn <rect width={toDomPrecision(shape.props.w)} height={toDomPrecision(shape.props.h)} />\n\t}\n\n\toverride useLegacyIndicator() {\n\t\treturn false\n\t}\n\n\toverride getIndicatorPath(shape: TLFrameShape): Path2D {\n\t\tconst path = new Path2D()\n\t\tpath.rect(0, 0, shape.props.w, shape.props.h)\n\t\treturn path\n\t}\n\n\toverride providesBackgroundForChildren(): boolean {\n\t\treturn true\n\t}\n\n\toverride getClipPath(shape: TLFrameShape) {\n\t\treturn this.editor.getShapeGeometry(shape.id).vertices\n\t}\n\n\toverride canReceiveNewChildrenOfType(shape: TLShape) {\n\t\treturn !shape.isLocked\n\t}\n\n\toverride onResize(shape: any, info: TLResizeInfo<any>) {\n\t\treturn resizeBox(shape, info)\n\t}\n\n\toverride getInterpolatedProps(\n\t\tstartShape: TLFrameShape,\n\t\tendShape: TLFrameShape,\n\t\tt: number\n\t): TLFrameShapeProps {\n\t\treturn {\n\t\t\t...(t > 0.5 ? endShape.props : startShape.props),\n\t\t\tw: lerp(startShape.props.w, endShape.props.w, t),\n\t\t\th: lerp(startShape.props.h, endShape.props.h, t),\n\t\t}\n\t}\n\n\toverride onDoubleClickEdge(shape: TLFrameShape, info: TLClickEventInfo) {\n\t\tif (info.target !== 'selection') return\n\t\tconst { handle } = info\n\n\t\t// If handle is missing, we can't determine which edge was clicked\n\t\tif (!handle) return\n\n\t\tconst isHorizontalEdge = handle === 'left' || handle === 'right'\n\t\tconst isVerticalEdge = handle === 'top' || handle === 'bottom'\n\n\t\tconst childIds = this.editor.getSortedChildIdsForParent(shape.id)\n\t\tconst children = compact(childIds.map((id) => this.editor.getShape(id)))\n\t\tif (!children.length) return\n\n\t\tconst { dx, dy, w, h } = getFrameChildrenBounds(children, this.editor, { padding: 10 })\n\n\t\tthis.editor.run(() => {\n\t\t\tconst changes: TLShapePartial[] = childIds.map((childId) => {\n\t\t\t\tconst childShape = this.editor.getShape(childId)!\n\t\t\t\treturn {\n\t\t\t\t\tid: childShape.id,\n\t\t\t\t\ttype: childShape.type,\n\t\t\t\t\tx: isHorizontalEdge ? childShape.x + dx : childShape.x,\n\t\t\t\t\ty: isVerticalEdge ? childShape.y + dy : childShape.y,\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tthis.editor.updateShapes(changes)\n\t\t})\n\n\t\treturn {\n\t\t\tid: shape.id,\n\t\t\ttype: shape.type,\n\t\t\tprops: {\n\t\t\t\tw: isHorizontalEdge ? w : shape.props.w,\n\t\t\t\th: isVerticalEdge ? h : shape.props.h,\n\t\t\t},\n\t\t}\n\t}\n\n\toverride onDoubleClickCorner(shape: TLFrameShape) {\n\t\tfitFrameToContent(this.editor, shape.id, { padding: 10 })\n\t\treturn {\n\t\t\tid: shape.id,\n\t\t\ttype: shape.type,\n\t\t}\n\t}\n\n\toverride onDragShapesIn(\n\t\tshape: TLFrameShape,\n\t\tdraggingShapes: TLShape[],\n\t\t{ initialParentIds, initialIndices }: TLDragShapesOverInfo\n\t) {\n\t\tconst { editor } = this\n\n\t\tif (draggingShapes.every((s) => s.parentId === shape.id)) return\n\n\t\t// Check to see whether any of the shapes can have their old index restored\n\t\tlet canRestoreOriginalIndices = false\n\t\tconst previousChildren = draggingShapes.filter((s) => shape.id === initialParentIds.get(s.id))\n\n\t\tif (previousChildren.length > 0) {\n\t\t\tconst currentChildren = compact(\n\t\t\t\teditor.getSortedChildIdsForParent(shape).map((id) => editor.getShape(id))\n\t\t\t)\n\t\t\tif (previousChildren.every((s) => !currentChildren.find((c) => c.index === s.index))) {\n\t\t\t\tcanRestoreOriginalIndices = true\n\t\t\t}\n\t\t}\n\n\t\t// I can't imagine this happening, but if any of the children are the ancestor of the frame, quit here\n\t\tif (draggingShapes.some((s) => editor.hasAncestor(shape, s.id))) return\n\n\t\t// Reparent the shapes to the new parent\n\t\teditor.reparentShapes(draggingShapes, shape.id)\n\n\t\t// If we can restore the original indices, then do so\n\t\tif (canRestoreOriginalIndices) {\n\t\t\tfor (const shape of previousChildren) {\n\t\t\t\teditor.updateShape({\n\t\t\t\t\tid: shape.id,\n\t\t\t\t\ttype: shape.type,\n\t\t\t\t\tindex: initialIndices.get(shape.id),\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\toverride onDragShapesOut(\n\t\tshape: TLFrameShape,\n\t\tdraggingShapes: TLShape[],\n\t\tinfo: TLDragShapesOutInfo\n\t): void {\n\t\tconst { editor } = this\n\t\t// When a user drags shapes out of a frame, and if we're not dragging into a new shape, then reparent\n\t\t// the dragging shapes (that are current children of the frame) onto the current page instead\n\t\tif (!info.nextDraggingOverShapeId) {\n\t\t\teditor.reparentShapes(\n\t\t\t\tdraggingShapes.filter(\n\t\t\t\t\t(s) => s.parentId === shape.id && this.canReceiveNewChildrenOfType(s)\n\t\t\t\t),\n\t\t\t\teditor.getCurrentPageId()\n\t\t\t)\n\t\t}\n\t}\n}\n"],"names":["shape"],"mappings":";;;;;;AAsPG,mBAEE,KAFF;;;;;;;;;;AAtPH;AA6BA,OAAO,gBAAgB;AACvB,SAAS,mBAAmB,8BAA8B;AAC1D;AAIA,SAAS,4BAA4B;AACrC,SAAS,oBAAoB;AAC7B;;;;;;;;;AAQA,MAAM,4BAA4B;AAClC,MAAM,0BAA0B;AAChC,MAAM,kCAAkC,CAAA;AACxC,MAAM,yBAAyB;AAcxB,SAAS,eAAe,GAAA,EAAa,IAAA,EAAc;IACzD,IAAI,IAAI,KAAA,CAAM,OAAO,GAAG;QACvB,OAAO;IACR;IACA,OAAO;AACR;AAGO,MAAM,uBAAuB,0QAAA,CAA+B;IAClE,OAAgB,OAAO,QAAA;IACvB,OAAgB,QAAQ,qOAAA,CAAA;IACxB,OAAgB,aAAa,0OAAA,CAAA;IAEpB,UAA6B;QACrC,YAAY;QACZ,gBAAgB;IACjB,EAAA;IAAA,iBAAA;IAAA,mFAAA;IAAA,wFAAA;IAAA,6FAAA;IAAA,4DAAA;IAOA,OAAgB,UAEf,OAAA,EACI;QACJ,MAAM,cAAc,KAAA,CAAM,UAAU,IAAA,CAAK,IAAA,EAAM,OAAO;QACtD,IAAK,QAAgB,UAAA,EAAY;;YAC9B,YAAoB,KAAA,GAAQ;gBAAE,GAAG,YAAY,KAAA;gBAAO,OAAO,uOAAA;YAAkB;QAChF;QACA,OAAO;IACR;IAES,QAAQ,KAAA,EAAqB,IAAA,EAAuB;QAC5D,OAAO,KAAK,IAAA,KAAS,kBAAkB,KAAK,IAAA,KAAS;IACtD;IAES,YAAY;QACpB,OAAO;IACR;IAES,oBAAoB;QAC5B,OAAO,IAAA,CAAK,OAAA,CAAQ,cAAA;IACrB;IAES,0BAAmC;QAC3C,OAAO;IACR;IAES,kBAAyC;QACjD,OAAO;YAAE,GAAG,MAAM;YAAG,GAAG,KAAK;YAAG,MAAM;YAAI,OAAO;QAAQ;IAC1D;IAES,kBAAkB,KAAA,EAAqB;QAC/C,OAAO,MAAM,KAAA,CAAM,IAAA;IACpB;IAES,YAAY,KAAA,EAAiC;QACrD,MAAM,EAAE,MAAA,CAAO,CAAA,GAAI,IAAA;QAEnB,MAAM,IAAI,OAAO,qBAAA,CAAsB;QAGvC,MAAM,gBAAY,4PAAA,EAAoB,QAAQ,KAAK;QACnD,MAAM,aAAa,YAAY,MAAM;QACrC,MAAM,sBAAsB,aAAa,MAAM,KAAA,CAAM,CAAA,GAAI,MAAM,KAAA,CAAM,CAAA;QAGrE,MAAM,WAAO,4PAAA,EAAoB,qBAAqB,KAAK;QAC3D,MAAM,kBAAc,4PAAA,EAAoB,QAAQ,OAAO,IAAI;QAK3D,MAAM,uBAAuB,IAAA,CAAK,OAAA,CAAQ,UAAA;QAG1C,MAAM,aAAa,4BAA4B;QAC/C,MAAM,WAAW,0BAA0B;QAC3C,MAAM,WAAW,sBAAA,CAAuB,uBAAuB,IAAI,UAAA;QAEnE,MAAM,aAAa,YAAY,CAAA,GAAI;QACnC,MAAM,cAAc,YAAY,CAAA,GAAI;QAEpC,MAAM,wBAAoB,8OAAA,EAAM,aAAa,YAAY,UAAU,QAAQ;QAE3E,MAAM,UAAA,CAAW,uBAAuB,CAAA,IAAK,+BAAA,IAAmC;QAChF,MAAM,UAAU,yBAAyB;QAGzC,MAAM,QAAQ,aAAa,cAAc;QACzC,MAAM,SAAS,aAAa,oBAAoB;QAOhD,IAAI,GAAW;QAEf,OAAQ,WAAW;YAClB,KAAK;gBAAG;oBAEP,IAAI;oBACJ,IAAI,CAAA,CAAE,cAAc,OAAA;oBACpB;gBACD;YACA,KAAK;gBAAG;oBAEP,IAAI,CAAA,CAAE,cAAc,OAAA;oBACpB,IAAI,MAAM,KAAA,CAAM,CAAA,GAAA,CAAK,UAAU,iBAAA;oBAC/B;gBACD;YACA,KAAK;gBAAG;oBAEP,IAAI,MAAM,KAAA,CAAM,CAAA,GAAA,CAAK,UAAU,iBAAA;oBAC/B,IAAI,MAAM,KAAA,CAAM,CAAA,GAAI;oBACpB;gBACD;YACA,KAAK;gBAAG;oBAEP,IAAI,MAAM,KAAA,CAAM,CAAA,GAAI;oBACpB,IAAI;oBACJ;gBACD;QACD;QAEA,OAAO,IAAI,8PAAA,CAAQ;YAClB,UAAU;gBACT,IAAI,sQAAA,CAAY;oBACf,OAAO,MAAM,KAAA,CAAM,CAAA;oBACnB,QAAQ,MAAM,KAAA,CAAM,CAAA;oBACpB,UAAU;gBACX,CAAC;gBACD,IAAI,sQAAA,CAAY;oBACf;oBACA;oBACA;oBACA;oBACA,UAAU;oBACV,SAAS;oBACT,wBAAwB;gBACzB,CAAC;aACF;QACD,CAAC;IACF;IAES,QAAQ,KAAA,EAAyC;QACzD,OAAO,MAAM,KAAA,CAAM,IAAA;IACpB;IAES,UAAU,KAAA,EAAqB;QAEvC,MAAM,YAAQ,sQAAA,CAAqB;QAGnC,MAAM,iBAAa,oOAAA,EAClB;oCACA,MAAM;gBACL,MAAM,gBAAgB,IAAA,CAAK,MAAA,CAAO,kBAAA,CAAmB,iBAAiB;gBACtE,IAAI,CAAC,cAAe,CAAA,OAAO;gBAC3B,IAAI,CAAC,cAAc,WAAA,CAAY,EAAG,CAAA,OAAO;gBACzC,MAAM,OAAQ,eACX;gBACH,IAAI,CAAC,KAAM,CAAA,OAAO;gBAClB,OAAO,KAAK,UAAA,IAAc,IAAA,CAAK,MAAA,CAAO,sBAAA,CAAuB,MAAM,MAAM,EAAA;YAC1E;mCACA;YAAC,MAAM,EAAE;SAAA;QAGV,MAAM,kBAAkB,IAAA,CAAK,OAAA,CAAQ,UAAA;QACrC,MAAM,aAAa,kBAAkB,MAAM,KAAA,CAAM,KAAA,GAAQ;QACzD,MAAM,gBAAY,mOAAA,EAAc,OAAO,YAAY,WAAW;QAC9D,MAAM,kBAAc,mOAAA,EAAc,OAAO,YAAY,aAAa;QAClE,MAAM,qBAAqB,sBACxB,mOAAA,EAAc,OAAO,YAAY,oBAAoB,IACrD,MAAM,UAAA;QACT,MAAM,mBAAmB,sBACtB,mOAAA,EAAc,OAAO,YAAY,kBAAkB,IACnD,MAAM,UAAA;QACT,MAAM,uBAAmB,mOAAA,EAAc,OAAO,YAAY,WAAW;QAErE,OACC,aAAA,GAAA,IAAA,gOAAA,EAAA,oOAAA,EAAA;YACC,UAAA;gBAAA,aAAA,GAAA,IAAA,+NAAA,EAAC,4PAAA,EAAA;oBACA,UAAA,aAAA,GAAA,IAAA,+NAAA,EAAC,QAAA;wBACA,eAAW,mMAAA,EAAW,kBAAkB;4BAAE,sBAAsB;wBAAW,CAAC;wBAC5E,MAAM;wBACN,QAAQ;wBACR,OAAO;4BACN,OAAO,CAAA,KAAA,EAAQ,MAAM,KAAA,CAAM,CAAC,CAAA,0BAAA,CAAA;4BAC5B,QAAQ,CAAA,KAAA,EAAQ,MAAM,KAAA,CAAM,CAAC,CAAA,0BAAA,CAAA;4BAC7B,WAAW,CAAA,uEAAA,CAAA;wBACZ;oBAAA;gBACD,CACD;gBACC,aAAa,OACb,aAAA,GAAA,IAAA,+NAAA,EAAC,mQAAA,EAAA;oBACA,IAAI,MAAM,EAAA;oBACV,MAAM,MAAM,KAAA,CAAM,IAAA;oBAClB,MAAM;oBACN,QAAQ;oBACR,OAAO;oBACP,OAAO,MAAM,KAAA,CAAM,CAAA;oBACnB,QAAQ,MAAM,KAAA,CAAM,CAAA;oBACpB,SAAS,kBAAkB,CAAA,IAAK,CAAA;oBAChC,YAAY,IAAA,CAAK,OAAA,CAAQ,UAAA;gBAAA;aAC1B;QAAA,CAEF;IAEF;IAES,MAAM,KAAA,EAAqB,GAAA,EAAuB;QAC1D,MAAM,YAAQ,0OAAA,EAAqB;YAAE,YAAY,IAAI,UAAA;QAAW,CAAC;QAGjE,MAAM,gBAAY,4PAAA,EAAoB,IAAA,CAAK,MAAA,EAAQ,KAAK;QACxD,MAAM,aAAa,YAAY,MAAM;QACrC,MAAM,sBAAsB,aAAa,MAAM,KAAA,CAAM,CAAA,GAAI,MAAM,KAAA,CAAM,CAAA;QACrE,MAAM,qBAAiB,mQAAA,EAA2B,OAAO,WAAW,IAAI;QAGxE,MAAM,WAAqC,4PAAA,EAAoB,sBAAsB,IAAI,IAAI;QAE7F,MAAM,aAAa,eAAe,MAAM,KAAA,CAAM,IAAA,EAAM,OAAO,IAAI,OAAO,YAAA,CAAa,IAAI;QACvF,MAAM,kBAAc,4PAAA,EAAoB,IAAA,CAAK,MAAA,EAAQ,OAAO,IAAI;QAChE,MAAM,QAAQ,IAAA,CAAK,MAAA,CAAO,WAAA,CAAY,gBAAA,CAAiB,YAAY,IAAI;QACvE,MAAM,WAAO,0QAAA,EAAuB,IAAA,CAAK,MAAA,EAAQ,OAAO,IAAI;QAE5D,MAAM,kBAAkB,IAAA,CAAK,OAAA,CAAQ,UAAA;QACrC,MAAM,aAAa,kBAAkB,MAAM,KAAA,CAAM,KAAA,GAAQ;QACzD,MAAM,gBAAY,mOAAA,EAAc,OAAO,YAAY,WAAW;QAC9D,MAAM,kBAAc,mOAAA,EAAc,OAAO,YAAY,aAAa;QAClE,MAAM,qBAAqB,sBACxB,mOAAA,EAAc,OAAO,YAAY,oBAAoB,IACrD,MAAM,UAAA;QACT,MAAM,mBAAmB,sBACtB,mOAAA,EAAc,OAAO,YAAY,kBAAkB,IACnD,MAAM,UAAA;QACT,MAAM,uBAAmB,mOAAA,EAAc,OAAO,YAAY,WAAW;QAErE,OACC,aAAA,GAAA,IAAA,gOAAA,EAAA,oOAAA,EAAA;YACC,UAAA;gBAAA,aAAA,GAAA,IAAA,+NAAA,EAAC,QAAA;oBACA,OAAO,MAAM,KAAA,CAAM,CAAA;oBACnB,QAAQ,MAAM,KAAA,CAAM,CAAA;oBACpB,MAAM;oBACN,QAAQ;oBACR,aAAa;oBACb,GAAG;oBACH,IAAI;oBACJ,IAAI;gBAAA;gBAEL,aAAA,GAAA,IAAA,gOAAA,EAAC,KAAA;oBAAE,MAAM;oBAAkB,WAAW;oBACrC,UAAA;wBAAA,aAAA,GAAA,IAAA,+NAAA,EAAC,QAAA;4BACA,GAAG,YAAY,CAAA,GAAA,CAAK,kBAAkB,IAAI,CAAA;4BAC1C,GAAG,YAAY,CAAA,GAAI;4BACnB,OAAO,KAAK,GAAA,CAAI,qBAAqB,YAAY,KAAA,GAAQ,EAAE;4BAC3D,QAAQ,YAAY,MAAA;4BACpB,MAAM;4BACN,QAAQ;4BACR,IAAI;4BACJ,IAAI;wBAAA;wBAEL,aAAA,GAAA,IAAA,+NAAA,EAAC,KAAA;4BAAE,WAAW,CAAA,UAAA,EAAa,kBAAkB,IAAI,CAAC,CAAA,IAAA,CAAA;4BAAS,UAAA;wBAAA,CAAK;qBAAA;gBAAA,CACjE;aAAA;QAAA,CACD;IAEF;IAEA,UAAU,KAAA,EAAqB;QAC9B,OAAO,aAAA,GAAA,IAAA,+NAAA,EAAC,QAAA;YAAK,WAAO,uPAAA,EAAe,MAAM,KAAA,CAAM,CAAC;YAAG,YAAQ,uPAAA,EAAe,MAAM,KAAA,CAAM,CAAC;QAAA,CAAG;IAC3F;IAES,qBAAqB;QAC7B,OAAO;IACR;IAES,iBAAiB,KAAA,EAA6B;QACtD,MAAM,OAAO,IAAI,OAAO;QACxB,KAAK,IAAA,CAAK,GAAG,GAAG,MAAM,KAAA,CAAM,CAAA,EAAG,MAAM,KAAA,CAAM,CAAC;QAC5C,OAAO;IACR;IAES,gCAAyC;QACjD,OAAO;IACR;IAES,YAAY,KAAA,EAAqB;QACzC,OAAO,IAAA,CAAK,MAAA,CAAO,gBAAA,CAAiB,MAAM,EAAE,EAAE,QAAA;IAC/C;IAES,4BAA4B,KAAA,EAAgB;QACpD,OAAO,CAAC,MAAM,QAAA;IACf;IAES,SAAS,KAAA,EAAY,IAAA,EAAyB;QACtD,WAAO,sQAAA,EAAU,OAAO,IAAI;IAC7B;IAES,qBACR,UAAA,EACA,QAAA,EACA,CAAA,EACoB;QACpB,OAAO;YACN,GAAI,GAAI,CAAA,KAAM,CAAA,QAAS,CAAA,KAAA,EAAQ,CAAA,UAAW,CAAA,KAAA;YAC1C,OAAG,uNAAA,EAAK,WAAW,KAAA,CAAM,CAAA,EAAG,SAAS,KAAA,CAAM,CAAA,EAAG,CAAC;YAC/C,OAAG,uNAAA,EAAK,WAAW,KAAA,CAAM,CAAA,EAAG,SAAS,KAAA,CAAM,CAAA,EAAG,CAAC;QAChD;IACD;IAES,kBAAkB,KAAA,EAAqB,IAAA,EAAwB;QACvE,IAAI,KAAK,MAAA,KAAW,YAAa,CAAA;QACjC,MAAM,EAAE,MAAA,CAAO,CAAA,GAAI;QAGnB,IAAI,CAAC,OAAQ,CAAA;QAEb,MAAM,mBAAmB,WAAW,UAAU,WAAW;QACzD,MAAM,iBAAiB,WAAW,SAAS,WAAW;QAEtD,MAAM,WAAW,IAAA,CAAK,MAAA,CAAO,0BAAA,CAA2B,MAAM,EAAE;QAChE,MAAM,eAAW,0NAAA,EAAQ,SAAS,GAAA,CAAI,CAAC,KAAO,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,EAAE,CAAC,CAAC;QACvE,IAAI,CAAC,SAAS,MAAA,CAAQ,CAAA;QAEtB,MAAM,EAAE,EAAA,EAAI,EAAA,EAAI,CAAA,EAAG,CAAA,CAAE,CAAA,OAAI,yPAAA,EAAuB,UAAU,IAAA,CAAK,MAAA,EAAQ;YAAE,SAAS;QAAG,CAAC;QAEtF,IAAA,CAAK,MAAA,CAAO,GAAA,CAAI,MAAM;YACrB,MAAM,UAA4B,SAAS,GAAA,CAAI,CAAC,YAAY;gBAC3D,MAAM,aAAa,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,OAAO;gBAC/C,OAAO;oBACN,IAAI,WAAW,EAAA;oBACf,MAAM,WAAW,IAAA;oBACjB,GAAG,mBAAmB,WAAW,CAAA,GAAI,KAAK,WAAW,CAAA;oBACrD,GAAG,iBAAiB,WAAW,CAAA,GAAI,KAAK,WAAW,CAAA;gBACpD;YACD,CAAC;YAED,IAAA,CAAK,MAAA,CAAO,YAAA,CAAa,OAAO;QACjC,CAAC;QAED,OAAO;YACN,IAAI,MAAM,EAAA;YACV,MAAM,MAAM,IAAA;YACZ,OAAO;gBACN,GAAG,mBAAmB,IAAI,MAAM,KAAA,CAAM,CAAA;gBACtC,GAAG,iBAAiB,IAAI,MAAM,KAAA,CAAM,CAAA;YACrC;QACD;IACD;IAES,oBAAoB,KAAA,EAAqB;QACjD,IAAA,oPAAA,EAAkB,IAAA,CAAK,MAAA,EAAQ,MAAM,EAAA,EAAI;YAAE,SAAS;QAAG,CAAC;QACxD,OAAO;YACN,IAAI,MAAM,EAAA;YACV,MAAM,MAAM,IAAA;QACb;IACD;IAES,eACR,KAAA,EACA,cAAA,EACA,EAAE,gBAAA,EAAkB,cAAA,CAAe,CAAA,EAClC;QACD,MAAM,EAAE,MAAA,CAAO,CAAA,GAAI,IAAA;QAEnB,IAAI,eAAe,KAAA,CAAM,CAAC,IAAM,EAAE,QAAA,KAAa,MAAM,EAAE,EAAG,CAAA;QAG1D,IAAI,4BAA4B;QAChC,MAAM,mBAAmB,eAAe,MAAA,CAAO,CAAC,IAAM,MAAM,EAAA,KAAO,iBAAiB,GAAA,CAAI,EAAE,EAAE,CAAC;QAE7F,IAAI,iBAAiB,MAAA,GAAS,GAAG;YAChC,MAAM,sBAAkB,0NAAA,EACvB,OAAO,0BAAA,CAA2B,KAAK,EAAE,GAAA,CAAI,CAAC,KAAO,OAAO,QAAA,CAAS,EAAE,CAAC;YAEzE,IAAI,iBAAiB,KAAA,CAAM,CAAC,IAAM,CAAC,gBAAgB,IAAA,CAAK,CAAC,IAAM,EAAE,KAAA,KAAU,EAAE,KAAK,CAAC,GAAG;gBACrF,4BAA4B;YAC7B;QACD;QAGA,IAAI,eAAe,IAAA,CAAK,CAAC,IAAM,OAAO,WAAA,CAAY,OAAO,EAAE,EAAE,CAAC,EAAG,CAAA;QAGjE,OAAO,cAAA,CAAe,gBAAgB,MAAM,EAAE;QAG9C,IAAI,2BAA2B;YAC9B,KAAA,MAAWA,UAAS,iBAAkB;gBACrC,OAAO,WAAA,CAAY;oBAClB,IAAIA,OAAM,EAAA;oBACV,MAAMA,OAAM,IAAA;oBACZ,OAAO,eAAe,GAAA,CAAIA,OAAM,EAAE;gBACnC,CAAC;YACF;QACD;IACD;IAES,gBACR,KAAA,EACA,cAAA,EACA,IAAA,EACO;QACP,MAAM,EAAE,MAAA,CAAO,CAAA,GAAI,IAAA;QAGnB,IAAI,CAAC,KAAK,uBAAA,EAAyB;YAClC,OAAO,cAAA,CACN,eAAe,MAAA,CACd,CAAC,IAAM,EAAE,QAAA,KAAa,MAAM,EAAA,IAAM,IAAA,CAAK,2BAAA,CAA4B,CAAC,IAErE,OAAO,gBAAA,CAAiB;QAE1B;IACD;AACD"}},
    {"offset": {"line": 2164, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/geo/toolStates/Idle.ts"],"sourcesContent":["import { StateNode, TLKeyboardEventInfo, TLPointerEventInfo } from '@tldraw/editor'\nimport { startEditingShapeWithRichText } from '../../../tools/SelectTool/selectHelpers'\n\nexport class Idle extends StateNode {\n\tstatic override id = 'idle'\n\n\toverride onPointerDown(info: TLPointerEventInfo) {\n\t\tthis.parent.transition('pointing', info)\n\t}\n\n\toverride onEnter() {\n\t\tthis.editor.setCursor({ type: 'cross', rotation: 0 })\n\t}\n\n\toverride onKeyUp(info: TLKeyboardEventInfo) {\n\t\tconst { editor } = this\n\t\tif (info.key === 'Enter') {\n\t\t\tconst onlySelectedShape = editor.getOnlySelectedShape()\n\t\t\tif (editor.canEditShape(onlySelectedShape)) {\n\t\t\t\tstartEditingShapeWithRichText(editor, onlySelectedShape, { selectAll: true })\n\t\t\t}\n\t\t}\n\t}\n\n\toverride onCancel() {\n\t\tthis.editor.setCurrentTool('select')\n\t}\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,iBAA0D;AACnE,SAAS,qCAAqC;;;AAEvC,MAAM,aAAa,2PAAA,CAAU;IACnC,OAAgB,KAAK,OAAA;IAEZ,cAAc,IAAA,EAA0B;QAChD,IAAA,CAAK,MAAA,CAAO,UAAA,CAAW,YAAY,IAAI;IACxC;IAES,UAAU;QAClB,IAAA,CAAK,MAAA,CAAO,SAAA,CAAU;YAAE,MAAM;YAAS,UAAU;QAAE,CAAC;IACrD;IAES,QAAQ,IAAA,EAA2B;QAC3C,MAAM,EAAE,MAAA,CAAO,CAAA,GAAI,IAAA;QACnB,IAAI,KAAK,GAAA,KAAQ,SAAS;YACzB,MAAM,oBAAoB,OAAO,oBAAA,CAAqB;YACtD,IAAI,OAAO,YAAA,CAAa,iBAAiB,GAAG;gBAC3C,IAAA,2QAAA,EAA8B,QAAQ,mBAAmB;oBAAE,WAAW;gBAAK,CAAC;YAC7E;QACD;IACD;IAES,WAAW;QACnB,IAAA,CAAK,MAAA,CAAO,cAAA,CAAe,QAAQ;IACpC;AACD"}},
    {"offset": {"line": 2205, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/geo/toolStates/Pointing.ts"],"sourcesContent":["import {\n\tGeoShapeGeoStyle,\n\tStateNode,\n\tTLGeoShape,\n\tTLPointerEventInfo,\n\tVec,\n\tcreateShapeId,\n\tmaybeSnapToGrid,\n} from '@tldraw/editor'\n\nexport class Pointing extends StateNode {\n\tstatic override id = 'pointing'\n\n\toverride onPointerUp() {\n\t\tthis.complete()\n\t}\n\n\toverride onPointerMove(info: TLPointerEventInfo) {\n\t\tif (this.editor.inputs.getIsDragging()) {\n\t\t\tconst originPagePoint = this.editor.inputs.getOriginPagePoint()\n\n\t\t\tconst id = createShapeId()\n\n\t\t\tconst creatingMarkId = this.editor.markHistoryStoppingPoint(`creating_geo:${id}`)\n\t\t\tconst newPoint = maybeSnapToGrid(originPagePoint, this.editor)\n\t\t\tthis.editor\n\t\t\t\t.createShapes([\n\t\t\t\t\t{\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttype: 'geo',\n\t\t\t\t\t\tx: newPoint.x,\n\t\t\t\t\t\ty: newPoint.y,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tw: 1,\n\t\t\t\t\t\t\th: 1,\n\t\t\t\t\t\t\tgeo: this.editor.getStyleForNextShape(GeoShapeGeoStyle),\n\t\t\t\t\t\t\tscale: this.editor.user.getIsDynamicResizeMode() ? 1 / this.editor.getZoomLevel() : 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t])\n\t\t\t\t.select(id)\n\n\t\t\tconst shape = this.editor.getShape(id)\n\t\t\tif (!shape) {\n\t\t\t\tthis.cancel()\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.editor.setCurrentTool('select.resizing', {\n\t\t\t\t...info,\n\t\t\t\ttarget: 'selection',\n\t\t\t\thandle: 'bottom_right',\n\t\t\t\tisCreating: true,\n\t\t\t\tcreatingMarkId,\n\t\t\t\tcreationCursorOffset: { x: 1, y: 1 },\n\t\t\t\tonInteractionEnd: 'geo',\n\t\t\t})\n\t\t}\n\t}\n\n\toverride onCancel() {\n\t\tthis.cancel()\n\t}\n\n\toverride onComplete() {\n\t\tthis.complete()\n\t}\n\n\toverride onInterrupt() {\n\t\tthis.cancel()\n\t}\n\n\tprivate complete() {\n\t\tconst originPagePoint = this.editor.inputs.getOriginPagePoint()\n\n\t\tconst id = createShapeId()\n\n\t\tthis.editor.markHistoryStoppingPoint(`creating_geo:${id}`)\n\n\t\tconst scale = this.editor.user.getIsDynamicResizeMode() ? 1 / this.editor.getZoomLevel() : 1\n\n\t\tconst geo = this.editor.getStyleForNextShape(GeoShapeGeoStyle)\n\n\t\tconst size =\n\t\t\tgeo === 'star'\n\t\t\t\t? { w: 200, h: 190 }\n\t\t\t\t: geo === 'cloud'\n\t\t\t\t\t? { w: 300, h: 180 }\n\t\t\t\t\t: { w: 200, h: 200 }\n\n\t\tthis.editor.createShapes([\n\t\t\t{\n\t\t\t\tid,\n\t\t\t\ttype: 'geo',\n\t\t\t\tx: originPagePoint.x,\n\t\t\t\ty: originPagePoint.y,\n\t\t\t\tprops: {\n\t\t\t\t\tgeo: this.editor.getStyleForNextShape(GeoShapeGeoStyle),\n\t\t\t\t\tscale,\n\t\t\t\t\t...size,\n\t\t\t\t},\n\t\t\t},\n\t\t])\n\n\t\tconst shape = this.editor.getShape<TLGeoShape>(id)!\n\t\tif (!shape) {\n\t\t\tthis.cancel()\n\t\t\treturn\n\t\t}\n\n\t\tconst { w, h } = shape.props\n\n\t\tconst delta = new Vec(w / 2, h / 2).mul(scale)\n\t\tconst parentTransform = this.editor.getShapeParentTransform(shape)\n\t\tif (parentTransform) delta.rot(-parentTransform.rotation())\n\t\tconst newPoint = maybeSnapToGrid(new Vec(shape.x - delta.x, shape.y - delta.y), this.editor)\n\t\tthis.editor.select(id)\n\t\tthis.editor.updateShape({\n\t\t\tid: shape.id,\n\t\t\ttype: 'geo',\n\t\t\tx: newPoint.x,\n\t\t\ty: newPoint.y,\n\t\t\tprops: {\n\t\t\t\tgeo: this.editor.getStyleForNextShape(GeoShapeGeoStyle),\n\t\t\t\tw: w * scale,\n\t\t\t\th: h * scale,\n\t\t\t},\n\t\t})\n\n\t\tif (this.editor.getInstanceState().isToolLocked) {\n\t\t\tthis.parent.transition('idle')\n\t\t} else {\n\t\t\tthis.editor.setCurrentTool('select', {})\n\t\t}\n\t}\n\n\tprivate cancel() {\n\t\t// we should not have created any shapes yet, so no need to bail\n\t\tthis.parent.transition('idle')\n\t}\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAUO,MAAM,iBAAiB,2PAAA,CAAU;IACvC,OAAgB,KAAK,WAAA;IAEZ,cAAc;QACtB,IAAA,CAAK,QAAA,CAAS;IACf;IAES,cAAc,IAAA,EAA0B;QAChD,IAAI,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,aAAA,CAAc,GAAG;YACvC,MAAM,kBAAkB,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,kBAAA,CAAmB;YAE9D,MAAM,SAAK,mOAAA,CAAc;YAEzB,MAAM,iBAAiB,IAAA,CAAK,MAAA,CAAO,wBAAA,CAAyB,CAAA,aAAA,EAAgB,EAAE,EAAE;YAChF,MAAM,eAAW,gSAAA,EAAgB,iBAAiB,IAAA,CAAK,MAAM;YAC7D,IAAA,CAAK,MAAA,CACH,YAAA,CAAa;gBACb;oBACC;oBACA,MAAM;oBACN,GAAG,SAAS,CAAA;oBACZ,GAAG,SAAS,CAAA;oBACZ,OAAO;wBACN,GAAG;wBACH,GAAG;wBACH,KAAK,IAAA,CAAK,MAAA,CAAO,oBAAA,CAAqB,sOAAgB;wBACtD,OAAO,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,sBAAA,CAAuB,IAAI,IAAI,IAAA,CAAK,MAAA,CAAO,YAAA,CAAa,IAAI;oBACrF;gBACD;aACA,EACA,MAAA,CAAO,EAAE;YAEX,MAAM,QAAQ,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,EAAE;YACrC,IAAI,CAAC,OAAO;gBACX,IAAA,CAAK,MAAA,CAAO;gBACZ;YACD;YAEA,IAAA,CAAK,MAAA,CAAO,cAAA,CAAe,mBAAmB;gBAC7C,GAAG,IAAA;gBACH,QAAQ;gBACR,QAAQ;gBACR,YAAY;gBACZ;gBACA,sBAAsB;oBAAE,GAAG;oBAAG,GAAG;gBAAE;gBACnC,kBAAkB;YACnB,CAAC;QACF;IACD;IAES,WAAW;QACnB,IAAA,CAAK,MAAA,CAAO;IACb;IAES,aAAa;QACrB,IAAA,CAAK,QAAA,CAAS;IACf;IAES,cAAc;QACtB,IAAA,CAAK,MAAA,CAAO;IACb;IAEQ,WAAW;QAClB,MAAM,kBAAkB,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,kBAAA,CAAmB;QAE9D,MAAM,SAAK,mOAAA,CAAc;QAEzB,IAAA,CAAK,MAAA,CAAO,wBAAA,CAAyB,CAAA,aAAA,EAAgB,EAAE,EAAE;QAEzD,MAAM,QAAQ,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,sBAAA,CAAuB,IAAI,IAAI,IAAA,CAAK,MAAA,CAAO,YAAA,CAAa,IAAI;QAE3F,MAAM,MAAM,IAAA,CAAK,MAAA,CAAO,oBAAA,CAAqB,sOAAgB;QAE7D,MAAM,OACL,QAAQ,SACL;YAAE,GAAG;YAAK,GAAG;QAAI,IACjB,QAAQ,UACP;YAAE,GAAG;YAAK,GAAG;QAAI,IACjB;YAAE,GAAG;YAAK,GAAG;QAAI;QAEtB,IAAA,CAAK,MAAA,CAAO,YAAA,CAAa;YACxB;gBACC;gBACA,MAAM;gBACN,GAAG,gBAAgB,CAAA;gBACnB,GAAG,gBAAgB,CAAA;gBACnB,OAAO;oBACN,KAAK,IAAA,CAAK,MAAA,CAAO,oBAAA,CAAqB,sOAAgB;oBACtD;oBACA,GAAG,IAAA;gBACJ;YACD;SACA;QAED,MAAM,QAAQ,IAAA,CAAK,MAAA,CAAO,QAAA,CAAqB,EAAE;QACjD,IAAI,CAAC,OAAO;YACX,IAAA,CAAK,MAAA,CAAO;YACZ;QACD;QAEA,MAAM,EAAE,CAAA,EAAG,CAAA,CAAE,CAAA,GAAI,MAAM,KAAA;QAEvB,MAAM,QAAQ,IAAI,0OAAA,CAAI,IAAI,GAAG,IAAI,CAAC,EAAE,GAAA,CAAI,KAAK;QAC7C,MAAM,kBAAkB,IAAA,CAAK,MAAA,CAAO,uBAAA,CAAwB,KAAK;QACjE,IAAI,gBAAiB,CAAA,MAAM,GAAA,CAAI,CAAC,gBAAgB,QAAA,CAAS,CAAC;QAC1D,MAAM,eAAW,gSAAA,EAAgB,IAAI,0OAAA,CAAI,MAAM,CAAA,GAAI,MAAM,CAAA,EAAG,MAAM,CAAA,GAAI,MAAM,CAAC,GAAG,IAAA,CAAK,MAAM;QAC3F,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,EAAE;QACrB,IAAA,CAAK,MAAA,CAAO,WAAA,CAAY;YACvB,IAAI,MAAM,EAAA;YACV,MAAM;YACN,GAAG,SAAS,CAAA;YACZ,GAAG,SAAS,CAAA;YACZ,OAAO;gBACN,KAAK,IAAA,CAAK,MAAA,CAAO,oBAAA,CAAqB,sOAAgB;gBACtD,GAAG,IAAI;gBACP,GAAG,IAAI;YACR;QACD,CAAC;QAED,IAAI,IAAA,CAAK,MAAA,CAAO,gBAAA,CAAiB,EAAE,YAAA,EAAc;YAChD,IAAA,CAAK,MAAA,CAAO,UAAA,CAAW,MAAM;QAC9B,OAAO;YACN,IAAA,CAAK,MAAA,CAAO,cAAA,CAAe,UAAU,CAAC,CAAC;QACxC;IACD;IAEQ,SAAS;QAEhB,IAAA,CAAK,MAAA,CAAO,UAAA,CAAW,MAAM;IAC9B;AACD"}},
    {"offset": {"line": 2335, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/geo/GeoShapeTool.ts"],"sourcesContent":["import { StateNode, TLStateNodeConstructor } from '@tldraw/editor'\nimport { Idle } from './toolStates/Idle'\nimport { Pointing } from './toolStates/Pointing'\n\n/** @public */\nexport class GeoShapeTool extends StateNode {\n\tstatic override id = 'geo'\n\tstatic override initial = 'idle'\n\tstatic override children(): TLStateNodeConstructor[] {\n\t\treturn [Idle, Pointing]\n\t}\n\toverride shapeType = 'geo'\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,iBAAyC;AAClD,SAAS,YAAY;AACrB,SAAS,gBAAgB;;;;AAGlB,MAAM,qBAAqB,2PAAA,CAAU;IAC3C,OAAgB,KAAK,MAAA;IACrB,OAAgB,UAAU,OAAA;IAC1B,OAAgB,WAAqC;QACpD,OAAO;YAAC,iPAAA;YAAM,yPAAQ;SAAA;IACvB;IACS,YAAY,MAAA;AACtB"}},
    {"offset": {"line": 2363, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/geo/getGeoShapePath.ts"],"sourcesContent":["import {\n\tcenterOfCircleFromThreePoints,\n\tclamp,\n\texhaustiveSwitchError,\n\tgetPointOnCircle,\n\tgetPolygonVertices,\n\tHALF_PI,\n\tPI,\n\tPI2,\n\trng,\n\tTLDefaultDashStyle,\n\tTLDefaultSizeStyle,\n\tTLGeoShape,\n\tVec,\n\tVecModel,\n\tWeakCache,\n} from '@tldraw/editor'\nimport { STROKE_SIZES } from '../arrow/shared'\nimport { PathBuilder } from '../shared/PathBuilder'\n\nconst pathCache = new WeakCache<TLGeoShape, PathBuilder>()\nexport function getGeoShapePath(shape: TLGeoShape) {\n\treturn pathCache.get(shape, _getGeoPath)\n}\n\nfunction _getGeoPath(shape: TLGeoShape) {\n\tconst w = Math.max(1, shape.props.w)\n\tconst h = Math.max(1, shape.props.h + shape.props.growY)\n\tconst cx = w / 2\n\tconst cy = h / 2\n\tconst sw = STROKE_SIZES[shape.props.size] * shape.props.scale\n\n\tconst isFilled = shape.props.fill !== 'none'\n\n\tswitch (shape.props.geo) {\n\t\tcase 'arrow-down': {\n\t\t\tconst ox = w * 0.16\n\t\t\tconst oy = Math.min(w, h) * 0.38\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(ox, 0, { geometry: { isFilled } })\n\t\t\t\t.lineTo(w - ox, 0)\n\t\t\t\t.lineTo(w - ox, h - oy)\n\t\t\t\t.lineTo(w, h - oy)\n\t\t\t\t.lineTo(w / 2, h)\n\t\t\t\t.lineTo(0, h - oy)\n\t\t\t\t.lineTo(ox, h - oy)\n\t\t\t\t.close()\n\t\t}\n\t\tcase 'arrow-left': {\n\t\t\tconst ox = Math.min(w, h) * 0.38\n\t\t\tconst oy = h * 0.16\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(ox, 0, { geometry: { isFilled } })\n\t\t\t\t.lineTo(ox, oy)\n\t\t\t\t.lineTo(w, oy)\n\t\t\t\t.lineTo(w, h - oy)\n\t\t\t\t.lineTo(ox, h - oy)\n\t\t\t\t.lineTo(ox, h)\n\t\t\t\t.lineTo(0, h / 2)\n\t\t\t\t.close()\n\t\t}\n\t\tcase 'arrow-right': {\n\t\t\tconst ox = Math.min(w, h) * 0.38\n\t\t\tconst oy = h * 0.16\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(0, oy, { geometry: { isFilled } })\n\t\t\t\t.lineTo(w - ox, oy)\n\t\t\t\t.lineTo(w - ox, 0)\n\t\t\t\t.lineTo(w, h / 2)\n\t\t\t\t.lineTo(w - ox, h)\n\t\t\t\t.lineTo(w - ox, h - oy)\n\t\t\t\t.lineTo(0, h - oy)\n\t\t\t\t.close()\n\t\t}\n\t\tcase 'arrow-up': {\n\t\t\tconst ox = w * 0.16\n\t\t\tconst oy = Math.min(w, h) * 0.38\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(w / 2, 0, { geometry: { isFilled } })\n\t\t\t\t.lineTo(w, oy)\n\t\t\t\t.lineTo(w - ox, oy)\n\t\t\t\t.lineTo(w - ox, h)\n\t\t\t\t.lineTo(ox, h)\n\t\t\t\t.lineTo(ox, oy)\n\t\t\t\t.lineTo(0, oy)\n\t\t\t\t.close()\n\t\t}\n\t\tcase 'check-box': {\n\t\t\tconst size = Math.min(w, h) * 0.82\n\t\t\tconst ox = (w - size) / 2\n\t\t\tconst oy = (h - size) / 2\n\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(0, 0, { geometry: { isFilled } })\n\t\t\t\t.lineTo(w, 0)\n\t\t\t\t.lineTo(w, h)\n\t\t\t\t.lineTo(0, h)\n\t\t\t\t.close()\n\t\t\t\t.moveTo(clamp(ox + size * 0.25, 0, w), clamp(oy + size * 0.52, 0, h), {\n\t\t\t\t\tgeometry: { isInternal: true, isFilled: false },\n\t\t\t\t\toffset: 0,\n\t\t\t\t})\n\t\t\t\t.lineTo(clamp(ox + size * 0.45, 0, w), clamp(oy + size * 0.82, 0, h))\n\t\t\t\t.lineTo(clamp(ox + size * 0.82, 0, w), clamp(oy + size * 0.22, 0, h), { offset: 0 })\n\t\t}\n\t\tcase 'diamond':\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(cx, 0, { geometry: { isFilled } })\n\t\t\t\t.lineTo(w, cy)\n\t\t\t\t.lineTo(cx, h)\n\t\t\t\t.lineTo(0, cy)\n\t\t\t\t.close()\n\t\tcase 'ellipse':\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(0, cy, { geometry: { isFilled } })\n\t\t\t\t.arcTo(cx, cy, false, true, 0, w, cy)\n\t\t\t\t.arcTo(cx, cy, false, true, 0, 0, cy)\n\t\t\t\t.close()\n\t\tcase 'heart': {\n\t\t\tconst o = w / 4\n\t\t\tconst k = h / 4\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(cx, h, { geometry: { isFilled } })\n\t\t\t\t.cubicBezierTo(0, k * 1.2, o * 1.5, k * 3, 0, k * 2.5)\n\t\t\t\t.cubicBezierTo(cx, k * 0.9, 0, -k * 0.32, o * 1.85, -k * 0.32)\n\t\t\t\t.cubicBezierTo(w, k * 1.2, o * 2.15, -k * 0.32, w, -k * 0.32)\n\t\t\t\t.cubicBezierTo(cx, h, w, k * 2.5, o * 2.5, k * 3)\n\t\t\t\t.close()\n\t\t}\n\t\tcase 'hexagon':\n\t\t\treturn PathBuilder.lineThroughPoints(getPolygonVertices(w, h, 6), {\n\t\t\t\tgeometry: { isFilled },\n\t\t\t}).close()\n\t\tcase 'octagon':\n\t\t\treturn PathBuilder.lineThroughPoints(getPolygonVertices(w, h, 8), {\n\t\t\t\tgeometry: { isFilled },\n\t\t\t}).close()\n\t\tcase 'oval':\n\t\t\treturn getStadiumPath(w, h, isFilled)\n\t\tcase 'pentagon':\n\t\t\treturn PathBuilder.lineThroughPoints(getPolygonVertices(w, h, 5), {\n\t\t\t\tgeometry: { isFilled },\n\t\t\t}).close()\n\t\tcase 'rectangle':\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(0, 0, { geometry: { isFilled } })\n\t\t\t\t.lineTo(w, 0)\n\t\t\t\t.lineTo(w, h)\n\t\t\t\t.lineTo(0, h)\n\t\t\t\t.close()\n\t\tcase 'rhombus': {\n\t\t\tconst offset = Math.min(w * 0.38, h * 0.38)\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(offset, 0, { geometry: { isFilled } })\n\t\t\t\t.lineTo(w, 0)\n\t\t\t\t.lineTo(w - offset, h)\n\t\t\t\t.lineTo(0, h)\n\t\t\t\t.close()\n\t\t}\n\t\tcase 'rhombus-2': {\n\t\t\tconst offset = Math.min(w * 0.38, h * 0.38)\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(0, 0, { geometry: { isFilled } })\n\t\t\t\t.lineTo(w - offset, 0)\n\t\t\t\t.lineTo(w, h)\n\t\t\t\t.lineTo(offset, h)\n\t\t\t\t.close()\n\t\t}\n\t\tcase 'star':\n\t\t\treturn getStarPath(w, h, isFilled)\n\t\tcase 'trapezoid': {\n\t\t\tconst offset = Math.min(w * 0.38, h * 0.38)\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(offset, 0, { geometry: { isFilled } })\n\t\t\t\t.lineTo(w - offset, 0)\n\t\t\t\t.lineTo(w, h)\n\t\t\t\t.lineTo(0, h)\n\t\t\t\t.close()\n\t\t}\n\t\tcase 'triangle':\n\t\t\treturn new PathBuilder()\n\t\t\t\t.moveTo(cx, 0, { geometry: { isFilled } })\n\t\t\t\t.lineTo(w, h)\n\t\t\t\t.lineTo(0, h)\n\t\t\t\t.close()\n\t\tcase 'x-box':\n\t\t\treturn getXBoxPath(w, h, sw, shape.props.dash, isFilled)\n\n\t\tcase 'cloud':\n\t\t\treturn getCloudPath(w, h, shape.id, shape.props.size, shape.props.scale, isFilled)\n\t\tdefault:\n\t\t\texhaustiveSwitchError(shape.props.geo)\n\t}\n}\n\nfunction getXBoxPath(\n\tw: number,\n\th: number,\n\tsw: number,\n\tdash: TLDefaultDashStyle,\n\tisFilled: boolean\n) {\n\tconst cx = w / 2\n\tconst cy = h / 2\n\n\tconst path = new PathBuilder()\n\t\t.moveTo(0, 0, { geometry: { isFilled } })\n\t\t.lineTo(w, 0)\n\t\t.lineTo(w, h)\n\t\t.lineTo(0, h)\n\t\t.close()\n\n\tif (dash === 'dashed' || dash === 'dotted') {\n\t\treturn path\n\t\t\t.moveTo(0, 0, {\n\t\t\t\tgeometry: { isInternal: true, isFilled: false },\n\t\t\t\tdashStart: 'skip',\n\t\t\t\tdashEnd: 'outset',\n\t\t\t})\n\t\t\t.lineTo(cx, cy)\n\t\t\t.moveTo(w, h, {\n\t\t\t\tgeometry: { isInternal: true, isFilled: false },\n\t\t\t\tdashStart: 'skip',\n\t\t\t\tdashEnd: 'outset',\n\t\t\t})\n\t\t\t.lineTo(cx, cy)\n\t\t\t.moveTo(0, h, {\n\t\t\t\tgeometry: { isInternal: true, isFilled: false },\n\t\t\t\tdashStart: 'skip',\n\t\t\t\tdashEnd: 'outset',\n\t\t\t})\n\t\t\t.lineTo(cx, cy)\n\t\t\t.moveTo(w, 0, {\n\t\t\t\tgeometry: { isInternal: true, isFilled: false },\n\t\t\t\tdashStart: 'skip',\n\t\t\t\tdashEnd: 'outset',\n\t\t\t})\n\t\t\t.lineTo(cx, cy)\n\t}\n\n\tconst inset = dash === 'draw' ? 0.62 : 0\n\n\tpath\n\t\t.moveTo(clamp(sw * inset, 0, w), clamp(sw * inset, 0, h), {\n\t\t\tgeometry: { isInternal: true, isFilled: false },\n\t\t})\n\t\t.lineTo(clamp(w - sw * inset, 0, w), clamp(h - sw * inset, 0, h))\n\t\t.moveTo(clamp(w - sw * inset, 0, w), clamp(sw * inset, 0, h))\n\t\t.lineTo(clamp(sw * inset, 0, w), clamp(h - sw * inset, 0, h))\n\n\treturn path\n}\n\nfunction getStadiumPath(w: number, h: number, isFilled: boolean) {\n\t// stadium:\n\tif (h > w) {\n\t\tconst r = w / 2\n\t\treturn new PathBuilder()\n\t\t\t.moveTo(0, r, { geometry: { isFilled } })\n\t\t\t.arcTo(r, r, false, true, 0, w, r)\n\t\t\t.lineTo(w, h - r)\n\t\t\t.arcTo(r, r, false, true, 0, 0, h - r)\n\t\t\t.close()\n\t}\n\n\tconst r = h / 2\n\treturn new PathBuilder()\n\t\t.moveTo(r, h, { geometry: { isFilled } })\n\t\t.arcTo(r, r, false, true, 0, r, 0)\n\t\t.lineTo(w - r, 0)\n\t\t.arcTo(r, r, false, true, 0, w - r, h)\n\t\t.close()\n}\n\nfunction getStarPath(w: number, h: number, isFilled: boolean) {\n\t// Most of this code is to offset the center, a 5 point star\n\t// will need to be moved downward because from its center [0,0]\n\t// it will have a bigger minY than maxY. This is because it'll\n\t// have 2 points at the bottom.\n\tconst sides = 5\n\tconst step = PI2 / sides / 2\n\tconst rightMostIndex = Math.floor(sides / 4) * 2\n\tconst leftMostIndex = sides * 2 - rightMostIndex\n\tconst topMostIndex = 0\n\tconst bottomMostIndex = Math.floor(sides / 2) * 2\n\tconst maxX = (Math.cos(-HALF_PI + rightMostIndex * step) * w) / 2\n\tconst minX = (Math.cos(-HALF_PI + leftMostIndex * step) * w) / 2\n\n\tconst minY = (Math.sin(-HALF_PI + topMostIndex * step) * h) / 2\n\tconst maxY = (Math.sin(-HALF_PI + bottomMostIndex * step) * h) / 2\n\tconst diffX = w - Math.abs(maxX - minX)\n\tconst diffY = h - Math.abs(maxY - minY)\n\tconst offsetX = w / 2 + minX - (w / 2 - maxX)\n\tconst offsetY = h / 2 + minY - (h / 2 - maxY)\n\n\tconst ratio = 1\n\tconst cx = (w - offsetX) / 2\n\tconst cy = (h - offsetY) / 2\n\tconst ox = (w + diffX) / 2\n\tconst oy = (h + diffY) / 2\n\tconst ix = (ox * ratio) / 2\n\tconst iy = (oy * ratio) / 2\n\n\treturn PathBuilder.lineThroughPoints(\n\t\tArray.from(Array(sides * 2), (_, i) => {\n\t\t\tconst theta = -HALF_PI + i * step\n\t\t\treturn new Vec(\n\t\t\t\tcx + (i % 2 ? ix : ox) * Math.cos(theta),\n\t\t\t\tcy + (i % 2 ? iy : oy) * Math.sin(theta)\n\t\t\t)\n\t\t}),\n\t\t{ geometry: { isFilled } }\n\t).close()\n}\n\n/* ---------------------- Cloud --------------------- */\n\nfunction getOvalPerimeter(h: number, w: number) {\n\tif (h > w) return (PI * (w / 2) + (h - w)) * 2\n\telse return (PI * (h / 2) + (w - h)) * 2\n}\n\ntype PillSection =\n\t| {\n\t\t\ttype: 'straight'\n\t\t\tstart: VecModel\n\t\t\tdelta: VecModel\n\t  }\n\t| {\n\t\t\ttype: 'arc'\n\t\t\tcenter: VecModel\n\t\t\tstartAngle: number\n\t  }\n\nfunction getPillPoints(width: number, height: number, numPoints: number) {\n\tconst radius = Math.min(width, height) / 2\n\tconst longSide = Math.max(width, height) - radius * 2\n\tconst circumference = Math.PI * (radius * 2) + 2 * longSide\n\tconst spacing = circumference / numPoints\n\n\tconst sections: PillSection[] =\n\t\twidth > height\n\t\t\t? [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'straight',\n\t\t\t\t\t\tstart: new Vec(radius, 0),\n\t\t\t\t\t\tdelta: new Vec(1, 0),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'arc',\n\t\t\t\t\t\tcenter: new Vec(width - radius, radius),\n\t\t\t\t\t\tstartAngle: -PI / 2,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'straight',\n\t\t\t\t\t\tstart: new Vec(width - radius, height),\n\t\t\t\t\t\tdelta: new Vec(-1, 0),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'arc',\n\t\t\t\t\t\tcenter: new Vec(radius, radius),\n\t\t\t\t\t\tstartAngle: PI / 2,\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'straight',\n\t\t\t\t\t\tstart: new Vec(width, radius),\n\t\t\t\t\t\tdelta: new Vec(0, 1),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'arc',\n\t\t\t\t\t\tcenter: new Vec(radius, height - radius),\n\t\t\t\t\t\tstartAngle: 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'straight',\n\t\t\t\t\t\tstart: new Vec(0, height - radius),\n\t\t\t\t\t\tdelta: new Vec(0, -1),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'arc',\n\t\t\t\t\t\tcenter: new Vec(radius, radius),\n\t\t\t\t\t\tstartAngle: PI,\n\t\t\t\t\t},\n\t\t\t\t]\n\n\tlet sectionOffset = 0\n\n\tconst points: Vec[] = []\n\tfor (let i = 0; i < numPoints; i++) {\n\t\tconst section = sections[0]\n\t\tif (section.type === 'straight') {\n\t\t\tpoints.push(Vec.Add(section.start, Vec.Mul(section.delta, sectionOffset)))\n\t\t} else {\n\t\t\tpoints.push(\n\t\t\t\tgetPointOnCircle(section.center, radius, section.startAngle + sectionOffset / radius)\n\t\t\t)\n\t\t}\n\t\tsectionOffset += spacing\n\t\tlet sectionLength = section.type === 'straight' ? longSide : PI * radius\n\t\twhile (sectionOffset > sectionLength) {\n\t\t\tsectionOffset -= sectionLength\n\t\t\tsections.push(sections.shift()!)\n\t\t\tsectionLength = sections[0].type === 'straight' ? longSide : PI * radius\n\t\t}\n\t}\n\n\treturn points\n}\n\nconst SIZES: Record<TLDefaultSizeStyle, number> = {\n\ts: 50,\n\tm: 70,\n\tl: 100,\n\txl: 130,\n}\n\nconst BUMP_PROTRUSION = 0.2\n\nfunction getCloudPath(\n\twidth: number,\n\theight: number,\n\tseed: string,\n\tsize: TLDefaultSizeStyle,\n\tscale: number,\n\tisFilled: boolean\n) {\n\tconst path = new PathBuilder()\n\tconst getRandom = rng(seed)\n\tconst pillCircumference = getOvalPerimeter(width, height)\n\tconst numBumps = Math.max(\n\t\tMath.ceil(pillCircumference / SIZES[size]),\n\t\t6,\n\t\tMath.ceil(pillCircumference / Math.min(width, height))\n\t)\n\tconst targetBumpProtrusion = (pillCircumference / numBumps) * BUMP_PROTRUSION\n\n\t// if the aspect ratio is high, innerWidth should be smaller\n\tconst innerWidth = Math.max(width - targetBumpProtrusion * 2, 1)\n\tconst innerHeight = Math.max(height - targetBumpProtrusion * 2, 1)\n\tconst innerCircumference = getOvalPerimeter(innerWidth, innerHeight)\n\n\tconst distanceBetweenPointsOnPerimeter = innerCircumference / numBumps\n\n\tconst paddingX = (width - innerWidth) / 2\n\tconst paddingY = (height - innerHeight) / 2\n\tconst bumpPoints = getPillPoints(innerWidth, innerHeight, numBumps).map((p) => {\n\t\treturn p.addXY(paddingX, paddingY)\n\t})\n\tconst maxWiggleX = width < 20 ? 0 : targetBumpProtrusion * 0.3\n\tconst maxWiggleY = height < 20 ? 0 : targetBumpProtrusion * 0.3\n\n\t// wiggle the points from either end so that the bumps 'pop'\n\t// in at the bottom-right and the top-left looks relatively stable\n\t// note: it's important that we don't mutate here! these points are also the bump points\n\tconst wiggledPoints = bumpPoints.slice(0)\n\tfor (let i = 0; i < Math.floor(numBumps / 2); i++) {\n\t\twiggledPoints[i] = Vec.AddXY(\n\t\t\twiggledPoints[i],\n\t\t\tgetRandom() * maxWiggleX * scale,\n\t\t\tgetRandom() * maxWiggleY * scale\n\t\t)\n\t\twiggledPoints[numBumps - i - 1] = Vec.AddXY(\n\t\t\twiggledPoints[numBumps - i - 1],\n\t\t\tgetRandom() * maxWiggleX * scale,\n\t\t\tgetRandom() * maxWiggleY * scale\n\t\t)\n\t}\n\n\tfor (let i = 0; i < wiggledPoints.length; i++) {\n\t\tconst j = i === wiggledPoints.length - 1 ? 0 : i + 1\n\t\tconst leftWigglePoint = wiggledPoints[i]\n\t\tconst rightWigglePoint = wiggledPoints[j]\n\t\tconst leftPoint = bumpPoints[i]\n\t\tconst rightPoint = bumpPoints[j]\n\n\t\t// when the points are on the curvy part of a pill, there is a natural arc that we need to extends past\n\t\t// otherwise it looks like the bumps get less bumpy on the curvy parts\n\t\tconst distanceBetweenOriginalPoints = Vec.Dist(leftPoint, rightPoint)\n\t\tconst curvatureOffset = distanceBetweenPointsOnPerimeter - distanceBetweenOriginalPoints\n\t\tconst distanceBetweenWigglePoints = Vec.Dist(leftWigglePoint, rightWigglePoint)\n\t\tconst relativeSize = distanceBetweenWigglePoints / distanceBetweenOriginalPoints\n\t\tconst finalDistance = (Math.max(paddingX, paddingY) + curvatureOffset) * relativeSize\n\n\t\tconst arcPoint = Vec.Lrp(leftPoint, rightPoint, 0.5).add(\n\t\t\tVec.Sub(rightPoint, leftPoint).uni().per().mul(finalDistance)\n\t\t)\n\t\tif (arcPoint.x < 0) {\n\t\t\tarcPoint.x = 0\n\t\t} else if (arcPoint.x > width) {\n\t\t\tarcPoint.x = width\n\t\t}\n\t\tif (arcPoint.y < 0) {\n\t\t\tarcPoint.y = 0\n\t\t} else if (arcPoint.y > height) {\n\t\t\tarcPoint.y = height\n\t\t}\n\n\t\tconst center = centerOfCircleFromThreePoints(leftWigglePoint, rightWigglePoint, arcPoint)\n\n\t\tconst radius = Vec.Dist(\n\t\t\tcenter ? center : Vec.Average([leftWigglePoint, rightWigglePoint]),\n\t\t\tleftWigglePoint\n\t\t)\n\n\t\tif (i === 0) {\n\t\t\tpath.moveTo(leftWigglePoint.x, leftWigglePoint.y, { geometry: { isFilled } })\n\t\t}\n\n\t\tpath.circularArcTo(radius, false, true, rightWigglePoint.x, rightWigglePoint.y)\n\t}\n\n\treturn path.close()\n}\n"],"names":["r"],"mappings":"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"}},
    {"offset": {"line": 2777, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/geo/components/GeoShapeBody.tsx"],"sourcesContent":["import { getColorValue, TLGeoShape } from '@tldraw/editor'\nimport { ShapeFill } from '../../shared/ShapeFill'\nimport { STROKE_SIZES } from '../../shared/default-shape-constants'\nimport { useDefaultColorTheme } from '../../shared/useDefaultColorTheme'\nimport { getGeoShapePath } from '../getGeoShapePath'\n\nexport function GeoShapeBody({\n\tshape,\n\tshouldScale,\n\tforceSolid,\n}: {\n\tshape: TLGeoShape\n\tshouldScale: boolean\n\tforceSolid: boolean\n}) {\n\tconst scaleToUse = shouldScale ? shape.props.scale : 1\n\tconst theme = useDefaultColorTheme()\n\tconst { props } = shape\n\tconst { color, fill, dash, size } = props\n\tconst strokeWidth = STROKE_SIZES[size] * scaleToUse\n\n\tconst path = getGeoShapePath(shape)\n\tconst fillPath =\n\t\tdash === 'draw' && !forceSolid\n\t\t\t? path.toDrawD({ strokeWidth, randomSeed: shape.id, passes: 1, offset: 0, onlyFilled: true })\n\t\t\t: path.toD({ onlyFilled: true })\n\n\treturn (\n\t\t<>\n\t\t\t<ShapeFill theme={theme} d={fillPath} color={color} fill={fill} scale={scaleToUse} />\n\t\t\t{path.toSvg({\n\t\t\t\tstyle: dash,\n\t\t\t\tstrokeWidth,\n\t\t\t\tforceSolid,\n\t\t\t\trandomSeed: shape.id,\n\t\t\t\tprops: { fill: 'none', stroke: getColorValue(theme, color, 'solid') },\n\t\t\t})}\n\t\t</>\n\t)\n}\n"],"names":[],"mappings":";;;;AA4BE,mBACC,KADD;;AA5BF,SAAS,qBAAiC;AAC1C,SAAS,iBAAiB;AAC1B,SAAS,oBAAoB;AAC7B,SAAS,4BAA4B;AACrC,SAAS,uBAAuB;;;;;;;AAEzB,SAAS,aAAa,EAC5B,KAAA,EACA,WAAA,EACA,UAAA,EACD,EAIG;IACF,MAAM,aAAa,cAAc,MAAM,KAAA,CAAM,KAAA,GAAQ;IACrD,MAAM,YAAQ,sQAAA,CAAqB;IACnC,MAAM,EAAE,KAAA,CAAM,CAAA,GAAI;IAClB,MAAM,EAAE,KAAA,EAAO,IAAA,EAAM,IAAA,EAAM,IAAA,CAAK,CAAA,GAAI;IACpC,MAAM,cAAc,uQAAA,CAAa,IAAI,CAAA,GAAI;IAEzC,MAAM,WAAO,yPAAA,EAAgB,KAAK;IAClC,MAAM,WACL,SAAS,UAAU,CAAC,aACjB,KAAK,OAAA,CAAQ;QAAE;QAAa,YAAY,MAAM,EAAA;QAAI,QAAQ;QAAG,QAAQ;QAAG,YAAY;IAAK,CAAC,IAC1F,KAAK,GAAA,CAAI;QAAE,YAAY;IAAK,CAAC;IAEjC,OACC,aAAA,GAAA,IAAA,gOAAA,EAAA,oOAAA,EAAA;QACC,UAAA;YAAA,aAAA,GAAA,IAAA,+NAAA,EAAC,gPAAA,EAAA;gBAAU;gBAAc,GAAG;gBAAU;gBAAc;gBAAY,OAAO;YAAA,CAAY;YAClF,KAAK,KAAA,CAAM;gBACX,OAAO;gBACP;gBACA;gBACA,YAAY,MAAM,EAAA;gBAClB,OAAO;oBAAE,MAAM;oBAAQ,YAAQ,mOAAA,EAAc,OAAO,OAAO,OAAO;gBAAE;YACrE,CAAC;SAAA;IAAA,CACF;AAEF"}},
    {"offset": {"line": 2838, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/geo/GeoShapeUtil.tsx"],"sourcesContent":["/* eslint-disable react-hooks/rules-of-hooks */\nimport {\n\tBaseBoxShapeUtil,\n\tBox,\n\tEMPTY_ARRAY,\n\tEditor,\n\tGroup2d,\n\tHTMLContainer,\n\tHandleSnapGeometry,\n\tRectangle2d,\n\tSVGContainer,\n\tSvgExportContext,\n\tTLGeoShape,\n\tTLGeoShapeProps,\n\tTLResizeInfo,\n\tTLShapeUtilCanvasSvgDef,\n\tVec,\n\tWeakCache,\n\texhaustiveSwitchError,\n\tgeoShapeMigrations,\n\tgeoShapeProps,\n\tgetColorValue,\n\tgetDefaultColorTheme,\n\tgetFontsFromRichText,\n\tisEqual,\n\tlerp,\n\ttoRichText,\n\tuseValue,\n} from '@tldraw/editor'\nimport {\n\tisEmptyRichText,\n\trenderHtmlFromRichTextForMeasurement,\n\trenderPlaintextFromRichText,\n} from '../../utils/text/richText'\nimport { HyperlinkButton } from '../shared/HyperlinkButton'\nimport { RichTextLabel, RichTextSVG } from '../shared/RichTextLabel'\nimport {\n\tFONT_FAMILIES,\n\tLABEL_FONT_SIZES,\n\tLABEL_PADDING,\n\tSTROKE_SIZES,\n\tTEXT_PROPS,\n} from '../shared/default-shape-constants'\nimport { getFillDefForCanvas, getFillDefForExport } from '../shared/defaultStyleDefs'\nimport { useDefaultColorTheme } from '../shared/useDefaultColorTheme'\nimport { useIsReadyForEditing } from '../shared/useEditablePlainText'\nimport { useEfficientZoomThreshold } from '../shared/useEfficientZoomThreshold'\nimport { GeoShapeBody } from './components/GeoShapeBody'\nimport { getGeoShapePath } from './getGeoShapePath'\n\nconst MIN_SIZE_WITH_LABEL = 17 * 3\n\n/** @public */\nexport class GeoShapeUtil extends BaseBoxShapeUtil<TLGeoShape> {\n\tstatic override type = 'geo' as const\n\tstatic override props = geoShapeProps\n\tstatic override migrations = geoShapeMigrations\n\n\toverride options = {\n\t\tshowTextOutline: true,\n\t}\n\n\toverride canEdit() {\n\t\treturn true\n\t}\n\n\toverride getDefaultProps(): TLGeoShape['props'] {\n\t\treturn {\n\t\t\tw: 100,\n\t\t\th: 100,\n\t\t\tgeo: 'rectangle',\n\t\t\tdash: 'draw',\n\t\t\tgrowY: 0,\n\t\t\turl: '',\n\t\t\tscale: 1,\n\n\t\t\t// Text properties\n\t\t\tcolor: 'black',\n\t\t\tlabelColor: 'black',\n\t\t\tfill: 'none',\n\t\t\tsize: 'm',\n\t\t\tfont: 'draw',\n\t\t\talign: 'middle',\n\t\t\tverticalAlign: 'middle',\n\t\t\trichText: toRichText(''),\n\t\t}\n\t}\n\n\toverride getGeometry(shape: TLGeoShape) {\n\t\tconst { props } = shape\n\t\tconst { scale } = props\n\t\tconst path = getGeoShapePath(shape)\n\t\tconst pathGeometry = path.toGeometry()\n\n\t\tconst scaledW = Math.max(1, props.w)\n\t\tconst scaledH = Math.max(1, props.h + props.growY)\n\t\tconst unscaledW = scaledW / scale\n\t\tconst unscaledH = scaledH / scale\n\n\t\tconst isEmptyLabel = isEmptyRichText(props.richText)\n\t\tconst unscaledLabelSize = isEmptyLabel\n\t\t\t? EMPTY_LABEL_SIZE\n\t\t\t: getUnscaledLabelSize(this.editor, shape)\n\n\t\tconst labelBounds = getLabelBounds(\n\t\t\tunscaledW,\n\t\t\tunscaledH,\n\t\t\tunscaledLabelSize,\n\t\t\tprops.size,\n\t\t\tprops.align,\n\t\t\tprops.verticalAlign,\n\t\t\tscale\n\t\t)\n\n\t\treturn new Group2d({\n\t\t\tchildren: [\n\t\t\t\tpathGeometry,\n\t\t\t\tnew Rectangle2d({\n\t\t\t\t\t...labelBounds,\n\t\t\t\t\tisFilled: true,\n\t\t\t\t\tisLabel: true,\n\t\t\t\t\texcludeFromShapeBounds: true,\n\t\t\t\t\tisEmptyLabel: isEmptyLabel,\n\t\t\t\t}),\n\t\t\t],\n\t\t})\n\t}\n\n\toverride getHandleSnapGeometry(shape: TLGeoShape): HandleSnapGeometry {\n\t\tconst geometry = this.getGeometry(shape)\n\t\t// we only want to snap handles to the outline of the shape - not to its label etc.\n\t\tconst outline = geometry.children[0]\n\t\tswitch (shape.props.geo) {\n\t\t\tcase 'arrow-down':\n\t\t\tcase 'arrow-left':\n\t\t\tcase 'arrow-right':\n\t\t\tcase 'arrow-up':\n\t\t\tcase 'check-box':\n\t\t\tcase 'diamond':\n\t\t\tcase 'hexagon':\n\t\t\tcase 'octagon':\n\t\t\tcase 'pentagon':\n\t\t\tcase 'rectangle':\n\t\t\tcase 'rhombus':\n\t\t\tcase 'rhombus-2':\n\t\t\tcase 'star':\n\t\t\tcase 'trapezoid':\n\t\t\tcase 'triangle':\n\t\t\tcase 'x-box':\n\t\t\t\t// poly-line type shapes hand snap points for each vertex & the center\n\t\t\t\treturn { outline: outline, points: [...outline.vertices, geometry.bounds.center] }\n\t\t\tcase 'cloud':\n\t\t\tcase 'ellipse':\n\t\t\tcase 'heart':\n\t\t\tcase 'oval':\n\t\t\t\t// blobby shapes only have a snap point in their center\n\t\t\t\treturn { outline: outline, points: [geometry.bounds.center] }\n\t\t\tdefault:\n\t\t\t\texhaustiveSwitchError(shape.props.geo)\n\t\t}\n\t}\n\n\toverride getText(shape: TLGeoShape) {\n\t\treturn renderPlaintextFromRichText(this.editor, shape.props.richText)\n\t}\n\n\toverride getFontFaces(shape: TLGeoShape) {\n\t\tif (isEmptyRichText(shape.props.richText)) {\n\t\t\treturn EMPTY_ARRAY\n\t\t}\n\t\treturn getFontsFromRichText(this.editor, shape.props.richText, {\n\t\t\tfamily: `tldraw_${shape.props.font}`,\n\t\t\tweight: 'normal',\n\t\t\tstyle: 'normal',\n\t\t})\n\t}\n\n\tcomponent(shape: TLGeoShape) {\n\t\tconst { id, type, props } = shape\n\t\tconst { fill, font, align, verticalAlign, size, richText } = props\n\t\tconst theme = useDefaultColorTheme()\n\t\tconst { editor } = this\n\t\tconst isOnlySelected = useValue(\n\t\t\t'isGeoOnlySelected',\n\t\t\t() => shape.id === editor.getOnlySelectedShapeId(),\n\t\t\t[editor]\n\t\t)\n\t\tconst isReadyForEditing = useIsReadyForEditing(editor, shape.id)\n\t\tconst isEmpty = isEmptyRichText(shape.props.richText)\n\t\tconst showHtmlContainer = isReadyForEditing || !isEmpty\n\t\tconst isForceSolid = useEfficientZoomThreshold(shape.props.scale * 0.25)\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<SVGContainer>\n\t\t\t\t\t<GeoShapeBody shape={shape} shouldScale={true} forceSolid={isForceSolid} />\n\t\t\t\t</SVGContainer>\n\t\t\t\t{showHtmlContainer && (\n\t\t\t\t\t<HTMLContainer\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t\t\twidth: shape.props.w,\n\t\t\t\t\t\t\theight: shape.props.h + props.growY,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<RichTextLabel\n\t\t\t\t\t\t\tshapeId={id}\n\t\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\t\tfont={font}\n\t\t\t\t\t\t\tfontSize={LABEL_FONT_SIZES[size] * shape.props.scale}\n\t\t\t\t\t\t\tlineHeight={TEXT_PROPS.lineHeight}\n\t\t\t\t\t\t\tpadding={LABEL_PADDING * shape.props.scale}\n\t\t\t\t\t\t\tfill={fill}\n\t\t\t\t\t\t\talign={align}\n\t\t\t\t\t\t\tverticalAlign={verticalAlign}\n\t\t\t\t\t\t\trichText={richText}\n\t\t\t\t\t\t\tisSelected={isOnlySelected}\n\t\t\t\t\t\t\tlabelColor={getColorValue(theme, props.labelColor, 'solid')}\n\t\t\t\t\t\t\twrap\n\t\t\t\t\t\t\tshowTextOutline={this.options.showTextOutline}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</HTMLContainer>\n\t\t\t\t)}\n\t\t\t\t{shape.props.url && <HyperlinkButton url={shape.props.url} />}\n\t\t\t</>\n\t\t)\n\t}\n\n\tindicator(shape: TLGeoShape) {\n\t\tconst isZoomedOut = useEfficientZoomThreshold(shape.props.scale * 0.25)\n\n\t\tconst { size, dash, scale } = shape.props\n\t\tconst strokeWidth = STROKE_SIZES[size]\n\n\t\tconst path = getGeoShapePath(shape)\n\n\t\treturn path.toSvg({\n\t\t\tstyle: dash === 'draw' ? 'draw' : 'solid',\n\t\t\tstrokeWidth: 1,\n\t\t\tpasses: 1,\n\t\t\trandomSeed: shape.id,\n\t\t\toffset: 0,\n\t\t\troundness: strokeWidth * 2 * scale,\n\t\t\tprops: { strokeWidth: undefined },\n\t\t\tforceSolid: isZoomedOut,\n\t\t})\n\t}\n\n\toverride useLegacyIndicator() {\n\t\treturn false\n\t}\n\n\toverride getIndicatorPath(shape: TLGeoShape): Path2D | undefined {\n\t\tconst isForceSolid = this.editor.getEfficientZoomLevel() < shape.props.scale * 0.25\n\n\t\tconst { size, dash, scale } = shape.props\n\t\tconst strokeWidth = STROKE_SIZES[size]\n\n\t\tconst path = getGeoShapePath(shape)\n\n\t\treturn path.toPath2D({\n\t\t\tstyle: dash === 'draw' ? 'draw' : 'solid',\n\t\t\tstrokeWidth: 1,\n\t\t\tpasses: 1,\n\t\t\trandomSeed: shape.id,\n\t\t\toffset: 0,\n\t\t\troundness: strokeWidth * 2 * scale,\n\t\t\tforceSolid: isForceSolid,\n\t\t})\n\t}\n\n\toverride toSvg(shape: TLGeoShape, ctx: SvgExportContext) {\n\t\tconst scale = shape.props.scale\n\t\t// We need to scale the shape to 1x for export\n\t\tconst newShape = {\n\t\t\t...shape,\n\t\t\tprops: {\n\t\t\t\t...shape.props,\n\t\t\t\tw: shape.props.w / scale,\n\t\t\t\th: (shape.props.h + shape.props.growY) / scale,\n\t\t\t\tgrowY: 0, // growY throws off the path calculations, so we set it to 0\n\t\t\t},\n\t\t}\n\t\tconst props = newShape.props\n\t\tctx.addExportDef(getFillDefForExport(props.fill))\n\n\t\tlet textEl\n\t\tif (!isEmptyRichText(props.richText)) {\n\t\t\tconst theme = getDefaultColorTheme(ctx)\n\t\t\tconst bounds = new Box(0, 0, props.w, (shape.props.h + shape.props.growY) / scale)\n\t\t\ttextEl = (\n\t\t\t\t<RichTextSVG\n\t\t\t\t\tfontSize={LABEL_FONT_SIZES[props.size]}\n\t\t\t\t\tfont={props.font}\n\t\t\t\t\talign={props.align}\n\t\t\t\t\tverticalAlign={props.verticalAlign}\n\t\t\t\t\trichText={props.richText}\n\t\t\t\t\tlabelColor={getColorValue(theme, props.labelColor, 'solid')}\n\t\t\t\t\tbounds={bounds}\n\t\t\t\t\tpadding={LABEL_PADDING}\n\t\t\t\t\tshowTextOutline={this.options.showTextOutline}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<GeoShapeBody shouldScale={false} shape={newShape} forceSolid={false} />\n\t\t\t\t{textEl}\n\t\t\t</>\n\t\t)\n\t}\n\n\toverride getCanvasSvgDefs(): TLShapeUtilCanvasSvgDef[] {\n\t\treturn [getFillDefForCanvas()]\n\t}\n\n\toverride onResize(\n\t\tshape: TLGeoShape,\n\t\t{ handle, newPoint, scaleX, scaleY, initialShape }: TLResizeInfo<TLGeoShape>\n\t) {\n\t\tconst unscaledInitial = getUnscaledGeoProps(initialShape.props)\n\t\t// use the w/h from props here instead of the initialBounds here,\n\t\t// since cloud shapes calculated bounds can differ from the props w/h.\n\t\tlet unscaledW = unscaledInitial.w * scaleX\n\t\tlet unscaledH = (unscaledInitial.h + unscaledInitial.growY) * scaleY\n\t\tlet overShrinkX = 0\n\t\tlet overShrinkY = 0\n\n\t\tif (!isEmptyRichText(shape.props.richText)) {\n\t\t\tconst absUnscaledW = Math.abs(unscaledW)\n\t\t\tconst absUnscaledH = Math.abs(unscaledH)\n\n\t\t\t// Measure the label at the constrained target dimensions so text wrapping is\n\t\t\t// accounted for. We call measureUnscaledLabelSize directly (bypassing WeakCache)\n\t\t\t// since temp shapes with resize dimensions change every frame. The WeakCache\n\t\t\t// still helps getGeometry, onBeforeCreate, and onBeforeUpdate.\n\t\t\tconst measureW = Math.max(absUnscaledW, MIN_SIZE_WITH_LABEL)\n\t\t\tconst measureH = Math.max(absUnscaledH, MIN_SIZE_WITH_LABEL)\n\t\t\tconst unscaledLabelSize = measureUnscaledLabelSize(this.editor, {\n\t\t\t\t...shape,\n\t\t\t\tprops: {\n\t\t\t\t\t...shape.props,\n\t\t\t\t\tw: measureW * shape.props.scale,\n\t\t\t\t\th: measureH * shape.props.scale,\n\t\t\t\t},\n\t\t\t} as TLGeoShape)\n\n\t\t\tconst constrainedW = Math.max(absUnscaledW, unscaledLabelSize.w)\n\t\t\tconst constrainedH = Math.max(absUnscaledH, unscaledLabelSize.h)\n\n\t\t\toverShrinkX = constrainedW - absUnscaledW\n\t\t\toverShrinkY = constrainedH - absUnscaledH\n\n\t\t\tunscaledW = constrainedW * Math.sign(unscaledW || 1)\n\t\t\tunscaledH = constrainedH * Math.sign(unscaledH || 1)\n\t\t}\n\n\t\tconst scaledW = unscaledW * shape.props.scale\n\t\tconst scaledH = unscaledH * shape.props.scale\n\n\t\tconst offset = new Vec(0, 0)\n\n\t\t// x offsets\n\n\t\tif (scaleX < 0) {\n\t\t\toffset.x += scaledW\n\t\t}\n\n\t\tif (handle === 'left' || handle === 'top_left' || handle === 'bottom_left') {\n\t\t\toffset.x += scaleX < 0 ? overShrinkX : -overShrinkX\n\t\t}\n\n\t\t// y offsets\n\n\t\tif (scaleY < 0) {\n\t\t\toffset.y += scaledH\n\t\t}\n\n\t\tif (handle === 'top' || handle === 'top_left' || handle === 'top_right') {\n\t\t\toffset.y += scaleY < 0 ? overShrinkY : -overShrinkY\n\t\t}\n\n\t\tconst { x, y } = offset.rot(shape.rotation).add(newPoint)\n\n\t\treturn {\n\t\t\tx,\n\t\t\ty,\n\t\t\tprops: {\n\t\t\t\tw: Math.max(Math.abs(scaledW), 1),\n\t\t\t\th: Math.max(Math.abs(scaledH), 1),\n\t\t\t\tgrowY: 0,\n\t\t\t},\n\t\t}\n\t}\n\n\toverride onBeforeCreate(shape: TLGeoShape) {\n\t\tconst { props } = shape\n\n\t\t// No text - ensure growY is 0\n\t\tif (isEmptyRichText(props.richText)) {\n\t\t\treturn props.growY !== 0 ? { ...shape, props: { ...props, growY: 0 } } : undefined\n\t\t}\n\n\t\t// Has text - calculate growY needed to fit label\n\t\tconst unscaledShapeH = props.h / props.scale\n\t\tconst unscaledLabelH = getUnscaledLabelSize(this.editor, shape).h\n\t\tconst unscaledGrowY = calculateGrowY(unscaledShapeH, unscaledLabelH, props.growY / props.scale)\n\n\t\tif (unscaledGrowY !== null) {\n\t\t\treturn {\n\t\t\t\t...shape,\n\t\t\t\tprops: { ...props, growY: unscaledGrowY * props.scale },\n\t\t\t}\n\t\t}\n\t}\n\n\toverride onBeforeUpdate(prev: TLGeoShape, next: TLGeoShape) {\n\t\tconst { props: prevProps } = prev\n\t\tconst { props: nextProps } = next\n\n\t\t// No change to text, font, or size - no update needed\n\t\tif (\n\t\t\tisEqual(prevProps.richText, nextProps.richText) &&\n\t\t\tprevProps.font === nextProps.font &&\n\t\t\tprevProps.size === nextProps.size\n\t\t) {\n\t\t\treturn\n\t\t}\n\n\t\tconst wasEmpty = isEmptyRichText(prevProps.richText)\n\t\tconst isEmpty = isEmptyRichText(nextProps.richText)\n\n\t\t// If label is empty and used to be empty, skip label measurement and dimension adjustment\n\t\tif (wasEmpty && isEmpty) {\n\t\t\treturn\n\t\t}\n\n\t\t// Text was removed - reset growY\n\t\tif (isEmpty) {\n\t\t\treturn nextProps.growY !== 0 ? { ...next, props: { ...nextProps, growY: 0 } } : undefined\n\t\t}\n\n\t\tconst unscaledPrev = getUnscaledGeoProps(prevProps)\n\t\tconst unscaledLabelSize = getUnscaledLabelSize(this.editor, next)\n\t\tconst { scale } = nextProps\n\n\t\t// Text was added for the first time - expand shape to fit (if wasEmpty and now there's text...\n\t\t// It might be just whitespace but it is faster to assume that it is NOT just whitespace and expand\n\t\t// the shape in either case (a label with just spaces text will be less performant but that's acceptable)\n\t\tif (wasEmpty && !isEmpty) {\n\t\t\tconst expanded = expandShapeForFirstLabel(unscaledPrev.w, unscaledPrev.h, unscaledLabelSize)\n\t\t\treturn {\n\t\t\t\t...next,\n\t\t\t\tprops: {\n\t\t\t\t\t...nextProps,\n\t\t\t\t\tw: expanded.w * scale,\n\t\t\t\t\th: expanded.h * scale,\n\t\t\t\t\tgrowY: 0,\n\t\t\t\t},\n\t\t\t}\n\t\t}\n\n\t\t// Text was modified - adjust dimensions to fit new label\n\t\tconst unscaledNextW = next.props.w / scale\n\t\tconst needsWidthExpand = unscaledLabelSize.w > unscaledNextW\n\t\tconst unscaledGrowY = calculateGrowY(unscaledPrev.h, unscaledLabelSize.h, unscaledPrev.growY)\n\n\t\tif (unscaledGrowY !== null || needsWidthExpand) {\n\t\t\treturn {\n\t\t\t\t...next,\n\t\t\t\tprops: {\n\t\t\t\t\t...nextProps,\n\t\t\t\t\tgrowY: (unscaledGrowY ?? unscaledPrev.growY) * scale,\n\t\t\t\t\tw: Math.max(unscaledNextW, unscaledLabelSize.w) * scale,\n\t\t\t\t},\n\t\t\t}\n\t\t}\n\t}\n\n\toverride onDoubleClick(shape: TLGeoShape) {\n\t\t// Little easter egg: double-clicking a rectangle / checkbox while\n\t\t// holding alt will toggle between check-box and rectangle\n\t\tif (this.editor.inputs.getAltKey()) {\n\t\t\tswitch (shape.props.geo) {\n\t\t\t\tcase 'rectangle': {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...shape,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tgeo: 'check-box' as const,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcase 'check-box': {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...shape,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tgeo: 'rectangle' as const,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn\n\t}\n\toverride getInterpolatedProps(\n\t\tstartShape: TLGeoShape,\n\t\tendShape: TLGeoShape,\n\t\tt: number\n\t): TLGeoShapeProps {\n\t\treturn {\n\t\t\t...(t > 0.5 ? endShape.props : startShape.props),\n\t\t\tw: lerp(startShape.props.w, endShape.props.w, t),\n\t\t\th: lerp(startShape.props.h, endShape.props.h, t),\n\t\t\tscale: lerp(startShape.props.scale, endShape.props.scale, t),\n\t\t}\n\t}\n}\n\n// imperfect but good enough, should be the width of the W in the font / size combo\nconst MIN_WIDTHS = Object.freeze({\n\ts: 12,\n\tm: 14,\n\tl: 16,\n\txl: 20,\n})\n\nconst EXTRA_PADDINGS = Object.freeze({\n\ts: 2,\n\tm: 3.5,\n\tl: 5,\n\txl: 10,\n})\n\nconst EMPTY_LABEL_SIZE = Object.freeze({ w: 0, h: 0 })\n\n// Margin between label edge and shape edge (in unscaled units)\nconst LABEL_EDGE_MARGIN = 8\n\n/** Calculate label bounds for hit testing */\nfunction getLabelBounds(\n\tunscaledShapeW: number,\n\tunscaledShapeH: number,\n\tunscaledLabelSize: { w: number; h: number },\n\tsize: TLGeoShapeProps['size'],\n\talign: TLGeoShapeProps['align'],\n\tverticalAlign: TLGeoShapeProps['verticalAlign'],\n\tscale: number\n): { x: number; y: number; width: number; height: number } {\n\t// Calculate minimum label dimensions based on font size and shape size\n\tconst unscaledMinWidth = Math.min(100, unscaledShapeW / 2)\n\tconst unscaledMinHeight = Math.min(\n\t\tLABEL_FONT_SIZES[size] * TEXT_PROPS.lineHeight + LABEL_PADDING * 2,\n\t\tunscaledShapeH / 2\n\t)\n\n\t// Label dimensions: at least the measured size, but constrained to shape bounds\n\tconst unscaledLabelW = Math.min(\n\t\tunscaledShapeW,\n\t\tMath.max(\n\t\t\tunscaledLabelSize.w,\n\t\t\tMath.min(unscaledMinWidth, Math.max(1, unscaledShapeW - LABEL_EDGE_MARGIN))\n\t\t)\n\t)\n\tconst unscaledLabelH = Math.min(\n\t\tunscaledShapeH,\n\t\tMath.max(\n\t\t\tunscaledLabelSize.h,\n\t\t\tMath.min(unscaledMinHeight, Math.max(1, unscaledShapeH - LABEL_EDGE_MARGIN))\n\t\t)\n\t)\n\n\t// Calculate position based on alignment\n\tconst unscaledX =\n\t\talign === 'start'\n\t\t\t? 0\n\t\t\t: align === 'end'\n\t\t\t\t? unscaledShapeW - unscaledLabelW\n\t\t\t\t: (unscaledShapeW - unscaledLabelW) / 2\n\n\tconst unscaledY =\n\t\tverticalAlign === 'start'\n\t\t\t? 0\n\t\t\t: verticalAlign === 'end'\n\t\t\t\t? unscaledShapeH - unscaledLabelH\n\t\t\t\t: (unscaledShapeH - unscaledLabelH) / 2\n\n\treturn {\n\t\tx: unscaledX * scale,\n\t\ty: unscaledY * scale,\n\t\twidth: unscaledLabelW * scale,\n\t\theight: unscaledLabelH * scale,\n\t}\n}\n\n/** Get the unscaled dimensions from a geo shape's props */\nfunction getUnscaledGeoProps(props: TLGeoShapeProps) {\n\tconst { w, h, growY, scale } = props\n\treturn {\n\t\tw: w / scale,\n\t\th: h / scale,\n\t\tgrowY: growY / scale,\n\t}\n}\n\n/**\n * Calculate the growY needed to fit a label within a shape.\n * Returns null if no change is needed, otherwise returns the new unscaled growY value.\n */\nfunction calculateGrowY(\n\tunscaledShapeH: number,\n\tunscaledLabelH: number,\n\tunscaledCurrentGrowY: number\n): number | null {\n\tif (unscaledLabelH > unscaledShapeH) {\n\t\t// Label is taller than shape - need to grow\n\t\treturn unscaledLabelH - unscaledShapeH\n\t}\n\tif (unscaledCurrentGrowY > 0) {\n\t\t// Label fits and we have existing growY - reset it\n\t\treturn 0\n\t}\n\t// No change needed\n\treturn null\n}\n\n/**\n * Calculate expanded dimensions when adding a label to a shape for the first time.\n * Ensures the shape meets minimum size requirements and is square if originally small.\n */\nfunction expandShapeForFirstLabel(\n\tunscaledW: number,\n\tunscaledH: number,\n\tunscaledLabelSize: { w: number; h: number }\n): { w: number; h: number } {\n\tlet w = Math.max(unscaledW, unscaledLabelSize.w)\n\tlet h = Math.max(unscaledH, unscaledLabelSize.h)\n\n\t// If shape was smaller than min size in both dimensions, make it square\n\tif (unscaledW < MIN_SIZE_WITH_LABEL && unscaledH < MIN_SIZE_WITH_LABEL) {\n\t\tw = Math.max(w, MIN_SIZE_WITH_LABEL)\n\t\th = Math.max(h, MIN_SIZE_WITH_LABEL)\n\t\t// Make square by using the larger dimension\n\t\tconst maxDim = Math.max(w, h)\n\t\tw = maxDim\n\t\th = maxDim\n\t}\n\n\treturn { w, h }\n}\n\nconst labelSizesForGeo = new WeakCache<TLGeoShape, { w: number; h: number }>()\n\n// Returns cached label size for the shape. Don't call with empty rich text.\nfunction getUnscaledLabelSize(editor: Editor, shape: TLGeoShape) {\n\treturn labelSizesForGeo.get(shape, () => {\n\t\treturn measureUnscaledLabelSize(editor, shape)\n\t})\n}\n\n// This is the expensive part of the code so we want to avoid calling it if we can\nfunction measureUnscaledLabelSize(editor: Editor, shape: TLGeoShape) {\n\tconst { richText, font, size, w } = shape.props\n\n\tconst minWidth = MIN_WIDTHS[size]\n\n\tconst html = renderHtmlFromRichTextForMeasurement(editor, richText)\n\tconst textSize = editor.textMeasure.measureHtml(html, {\n\t\t...TEXT_PROPS,\n\t\tfontFamily: FONT_FAMILIES[font],\n\t\tfontSize: LABEL_FONT_SIZES[size],\n\t\tminWidth: minWidth,\n\t\tmaxWidth: Math.max(\n\t\t\t// Guard because a DOM nodes can't be less 0\n\t\t\t0,\n\t\t\t// A 'w' width that we're setting as the min-width\n\t\t\tMath.ceil(minWidth + EXTRA_PADDINGS[size]),\n\t\t\t// The actual text size\n\t\t\tMath.ceil(w / shape.props.scale - LABEL_PADDING * 2)\n\t\t),\n\t})\n\n\treturn {\n\t\tw: textSize.w + LABEL_PADDING * 2,\n\t\th: textSize.h + LABEL_PADDING * 2,\n\t}\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3374, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/highlight/HighlightShapeTool.ts"],"sourcesContent":["// shared custody\nimport { StateNode, TLStateNodeConstructor } from '@tldraw/editor'\nimport { Drawing } from '../draw/toolStates/Drawing'\nimport { Idle } from '../draw/toolStates/Idle'\n\n/** @public */\nexport class HighlightShapeTool extends StateNode {\n\tstatic override id = 'highlight'\n\tstatic override initial = 'idle'\n\tstatic override useCoalescedEvents = true\n\tstatic override children(): TLStateNodeConstructor[] {\n\t\treturn [Idle, Drawing]\n\t}\n\tstatic override isLockable = false\n\toverride shapeType = 'highlight'\n\n\toverride onExit() {\n\t\tconst drawingState = this.children!['drawing'] as Drawing\n\t\tdrawingState.initialShape = undefined\n\t}\n}\n"],"names":[],"mappings":";;;;;AACA,SAAS,iBAAyC;AAClD,SAAS,eAAe;AACxB,SAAS,YAAY;;;;AAGd,MAAM,2BAA2B,2PAAA,CAAU;IACjD,OAAgB,KAAK,YAAA;IACrB,OAAgB,UAAU,OAAA;IAC1B,OAAgB,qBAAqB,KAAA;IACrC,OAAgB,WAAqC;QACpD,OAAO;YAAC,kPAAA;YAAM,wPAAO;SAAA;IACtB;IACA,OAAgB,aAAa,MAAA;IACpB,YAAY,YAAA;IAEZ,SAAS;QACjB,MAAM,eAAe,IAAA,CAAK,QAAA,CAAU,SAAS,CAAA;QAC7C,aAAa,YAAA,GAAe,KAAA;IAC7B;AACD"}},
    {"offset": {"line": 3408, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/highlight/HighlightShapeUtil.tsx"],"sourcesContent":["/* eslint-disable react-hooks/rules-of-hooks */\nimport {\n\tCircle2d,\n\tEditor,\n\tPolygon2d,\n\tSVGContainer,\n\tShapeUtil,\n\tTLHighlightShape,\n\tTLHighlightShapeProps,\n\tTLResizeInfo,\n\tVecLike,\n\tgetColorValue,\n\thighlightShapeMigrations,\n\thighlightShapeProps,\n\tlast,\n\tlerp,\n\trng,\n\tuseValue,\n} from '@tldraw/editor'\n\nimport { getHighlightFreehandSettings, getPointsFromDrawSegments } from '../draw/getPath'\nimport { FONT_SIZES } from '../shared/default-shape-constants'\nimport { getStrokeOutlinePoints } from '../shared/freehand/getStrokeOutlinePoints'\nimport { getStrokePoints } from '../shared/freehand/getStrokePoints'\nimport { setStrokePointRadii } from '../shared/freehand/setStrokePointRadii'\nimport { getSvgPathFromStrokePoints } from '../shared/freehand/svg'\nimport { interpolateSegments } from '../shared/interpolate-props'\nimport { useColorSpace } from '../shared/useColorSpace'\nimport { useDefaultColorTheme } from '../shared/useDefaultColorTheme'\n\n/** @public */\nexport interface HighlightShapeOptions {\n\t/**\n\t * The maximum number of points in a line before the draw tool will begin a new shape.\n\t * A higher number will lead to poor performance while drawing very long lines.\n\t */\n\treadonly maxPointsPerShape: number\n\treadonly underlayOpacity: number\n\treadonly overlayOpacity: number\n}\n\n/** @public */\nexport class HighlightShapeUtil extends ShapeUtil<TLHighlightShape> {\n\tstatic override type = 'highlight' as const\n\tstatic override props = highlightShapeProps\n\tstatic override migrations = highlightShapeMigrations\n\n\toverride options: HighlightShapeOptions = {\n\t\tmaxPointsPerShape: 600,\n\t\tunderlayOpacity: 0.82,\n\t\toverlayOpacity: 0.35,\n\t}\n\n\toverride hideResizeHandles(shape: TLHighlightShape) {\n\t\treturn getIsDot(shape)\n\t}\n\toverride hideRotateHandle(shape: TLHighlightShape) {\n\t\treturn getIsDot(shape)\n\t}\n\toverride hideSelectionBoundsFg(shape: TLHighlightShape) {\n\t\treturn getIsDot(shape)\n\t}\n\n\toverride getDefaultProps(): TLHighlightShape['props'] {\n\t\treturn {\n\t\t\tsegments: [],\n\t\t\tcolor: 'black',\n\t\t\tsize: 'm',\n\t\t\tisComplete: false,\n\t\t\tisPen: false,\n\t\t\tscale: 1,\n\t\t\tscaleX: 1,\n\t\t\tscaleY: 1,\n\t\t}\n\t}\n\n\tgetGeometry(shape: TLHighlightShape) {\n\t\tconst strokeWidth = getStrokeWidth(shape)\n\t\tif (getIsDot(shape)) {\n\t\t\treturn new Circle2d({\n\t\t\t\tx: -strokeWidth / 2,\n\t\t\t\ty: -strokeWidth / 2,\n\t\t\t\tradius: strokeWidth / 2,\n\t\t\t\tisFilled: true,\n\t\t\t})\n\t\t}\n\n\t\tconst { strokePoints, sw } = getHighlightStrokePoints(shape, strokeWidth, true)\n\t\tconst opts = getHighlightFreehandSettings({ strokeWidth: sw, showAsComplete: true })\n\t\tsetStrokePointRadii(strokePoints, opts)\n\n\t\treturn new Polygon2d({\n\t\t\tpoints: getStrokeOutlinePoints(strokePoints, opts),\n\t\t\tisFilled: true,\n\t\t})\n\t}\n\n\tcomponent(shape: TLHighlightShape) {\n\t\tconst forceSolid = useHighlightForceSolid(this.editor, shape)\n\t\tconst strokeWidth = getStrokeWidth(shape)\n\n\t\treturn (\n\t\t\t<SVGContainer>\n\t\t\t\t<HighlightRenderer\n\t\t\t\t\tshape={shape}\n\t\t\t\t\tforceSolid={forceSolid}\n\t\t\t\t\tstrokeWidth={strokeWidth}\n\t\t\t\t\topacity={this.options.overlayOpacity}\n\t\t\t\t/>\n\t\t\t</SVGContainer>\n\t\t)\n\t}\n\n\toverride backgroundComponent(shape: TLHighlightShape) {\n\t\tconst forceSolid = useHighlightForceSolid(this.editor, shape)\n\t\tconst strokeWidth = getStrokeWidth(shape)\n\t\treturn (\n\t\t\t<SVGContainer>\n\t\t\t\t<HighlightRenderer\n\t\t\t\t\tshape={shape}\n\t\t\t\t\tforceSolid={forceSolid}\n\t\t\t\t\tstrokeWidth={strokeWidth}\n\t\t\t\t\topacity={this.options.underlayOpacity}\n\t\t\t\t/>\n\t\t\t</SVGContainer>\n\t\t)\n\t}\n\n\tindicator(shape: TLHighlightShape) {\n\t\tconst forceSolid = useHighlightForceSolid(this.editor, shape)\n\t\tconst strokeWidth = getStrokeWidth(shape)\n\n\t\tconst { strokePoints, sw } = getHighlightStrokePoints(shape, strokeWidth, forceSolid)\n\t\tconst allPointsFromSegments = getPointsFromDrawSegments(\n\t\t\tshape.props.segments,\n\t\t\tshape.props.scaleX,\n\t\t\tshape.props.scaleY\n\t\t)\n\n\t\tlet strokePath\n\t\tif (strokePoints.length < 2) {\n\t\t\tstrokePath = getIndicatorDot(allPointsFromSegments[0], sw)\n\t\t} else {\n\t\t\tstrokePath = getSvgPathFromStrokePoints(strokePoints, false)\n\t\t}\n\n\t\treturn <path d={strokePath} />\n\t}\n\n\toverride useLegacyIndicator() {\n\t\treturn false\n\t}\n\n\toverride getIndicatorPath(shape: TLHighlightShape): Path2D {\n\t\tconst strokeWidth = getStrokeWidth(shape)\n\t\tconst zoomLevel = this.editor.getEfficientZoomLevel()\n\t\tconst forceSolid = strokeWidth / zoomLevel < 1.5\n\n\t\tconst { strokePoints, sw } = getHighlightStrokePoints(shape, strokeWidth, forceSolid)\n\t\tconst allPointsFromSegments = getPointsFromDrawSegments(\n\t\t\tshape.props.segments,\n\t\t\tshape.props.scaleX,\n\t\t\tshape.props.scaleY\n\t\t)\n\n\t\tlet strokePath\n\t\tif (strokePoints.length < 2) {\n\t\t\tstrokePath = getIndicatorDot(allPointsFromSegments[0], sw)\n\t\t} else {\n\t\t\tstrokePath = getSvgPathFromStrokePoints(strokePoints, false)\n\t\t}\n\n\t\treturn new Path2D(strokePath)\n\t}\n\n\toverride toSvg(shape: TLHighlightShape) {\n\t\tconst strokeWidth = getStrokeWidth(shape)\n\t\tconst forceSolid = strokeWidth < 1.5\n\t\tconst scaleFactor = 1 / shape.props.scale\n\t\treturn (\n\t\t\t<g transform={`scale(${scaleFactor})`}>\n\t\t\t\t<HighlightRenderer\n\t\t\t\t\tforceSolid={forceSolid}\n\t\t\t\t\tstrokeWidth={strokeWidth}\n\t\t\t\t\tshape={shape}\n\t\t\t\t\topacity={this.options.overlayOpacity}\n\t\t\t\t/>\n\t\t\t</g>\n\t\t)\n\t}\n\n\toverride toBackgroundSvg(shape: TLHighlightShape) {\n\t\tconst strokeWidth = getStrokeWidth(shape)\n\t\tconst forceSolid = strokeWidth < 1.5\n\t\tconst scaleFactor = 1 / shape.props.scale\n\t\treturn (\n\t\t\t<g transform={`scale(${scaleFactor})`}>\n\t\t\t\t<HighlightRenderer\n\t\t\t\t\tforceSolid={forceSolid}\n\t\t\t\t\tstrokeWidth={strokeWidth}\n\t\t\t\t\tshape={shape}\n\t\t\t\t\topacity={this.options.underlayOpacity}\n\t\t\t\t/>\n\t\t\t</g>\n\t\t)\n\t}\n\n\toverride onResize(shape: TLHighlightShape, info: TLResizeInfo<TLHighlightShape>) {\n\t\tconst { scaleX, scaleY } = info\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tscaleX: scaleX * shape.props.scaleX,\n\t\t\t\tscaleY: scaleY * shape.props.scaleY,\n\t\t\t},\n\t\t}\n\t}\n\toverride getInterpolatedProps(\n\t\tstartShape: TLHighlightShape,\n\t\tendShape: TLHighlightShape,\n\t\tt: number\n\t): TLHighlightShapeProps {\n\t\treturn {\n\t\t\t...(t > 0.5 ? endShape.props : startShape.props),\n\t\t\t...endShape.props,\n\t\t\tsegments: interpolateSegments(startShape.props.segments, endShape.props.segments, t),\n\t\t\tscale: lerp(startShape.props.scale, endShape.props.scale, t),\n\t\t}\n\t}\n}\n\nfunction getShapeDot(point: VecLike) {\n\tconst r = 0.1\n\treturn `M ${point.x} ${point.y} m -${r}, 0 a ${r},${r} 0 1,0 ${r * 2},0 a ${r},${r} 0 1,0 -${\n\t\tr * 2\n\t},0`\n}\n\nfunction getIndicatorDot(point: VecLike, sw: number) {\n\tconst r = sw / 2\n\treturn `M ${point.x} ${point.y} m -${r}, 0 a ${r},${r} 0 1,0 ${r * 2},0 a ${r},${r} 0 1,0 -${\n\t\tr * 2\n\t},0`\n}\n\nfunction getHighlightStrokePoints(\n\tshape: TLHighlightShape,\n\tstrokeWidth: number,\n\tforceSolid: boolean\n) {\n\tconst allPointsFromSegments = getPointsFromDrawSegments(\n\t\tshape.props.segments,\n\t\tshape.props.scaleX,\n\t\tshape.props.scaleY\n\t)\n\tconst showAsComplete = shape.props.isComplete || last(shape.props.segments)?.type === 'straight'\n\n\tlet sw = strokeWidth\n\tif (!forceSolid && !shape.props.isPen && allPointsFromSegments.length === 1) {\n\t\tsw += rng(shape.id)() * (strokeWidth / 6)\n\t}\n\n\tconst options = getHighlightFreehandSettings({\n\t\tstrokeWidth: sw,\n\t\tshowAsComplete,\n\t})\n\n\tconst strokePoints = getStrokePoints(allPointsFromSegments, options)\n\n\treturn { strokePoints, sw }\n}\n\nfunction getStrokeWidth(shape: TLHighlightShape) {\n\treturn FONT_SIZES[shape.props.size] * 1.12 * shape.props.scale\n}\n\nfunction getIsDot(shape: TLHighlightShape) {\n\t// First point is 16 base64 chars (3 Float32s = 12 bytes)\n\t// Each delta point is 8 base64 chars (3 Float16s = 6 bytes)\n\t// 1 point = 16 chars, 2 points = 24 chars\n\t// Check if we have less than 2 points without decoding\n\treturn shape.props.segments.length === 1 && shape.props.segments[0].path.length < 24\n}\n\nfunction HighlightRenderer({\n\tstrokeWidth,\n\tforceSolid,\n\tshape,\n\topacity,\n}: {\n\tstrokeWidth: number\n\tforceSolid: boolean\n\tshape: TLHighlightShape\n\topacity: number\n}) {\n\tconst theme = useDefaultColorTheme()\n\n\tconst allPointsFromSegments = getPointsFromDrawSegments(\n\t\tshape.props.segments,\n\t\tshape.props.scaleX,\n\t\tshape.props.scaleY\n\t)\n\n\tlet sw = strokeWidth\n\tif (!forceSolid && !shape.props.isPen && allPointsFromSegments.length === 1) {\n\t\tsw += rng(shape.id)() * (sw / 6)\n\t}\n\n\tconst options = getHighlightFreehandSettings({\n\t\tstrokeWidth: sw,\n\t\tshowAsComplete: shape.props.isComplete || last(shape.props.segments)?.type === 'straight',\n\t})\n\n\tconst strokePoints = getStrokePoints(allPointsFromSegments, options)\n\n\tconst solidStrokePath =\n\t\tstrokePoints.length > 1\n\t\t\t? getSvgPathFromStrokePoints(strokePoints, false)\n\t\t\t: getShapeDot(allPointsFromSegments[0])\n\n\tconst colorSpace = useColorSpace()\n\n\tconst color = getColorValue(\n\t\ttheme,\n\t\tshape.props.color,\n\t\tcolorSpace === 'p3' ? 'highlightP3' : 'highlightSrgb'\n\t)\n\n\treturn (\n\t\t<path\n\t\t\td={solidStrokePath}\n\t\t\tstrokeLinecap=\"round\"\n\t\t\tfill=\"none\"\n\t\t\tpointerEvents=\"all\"\n\t\t\tstroke={color}\n\t\t\tstrokeWidth={sw}\n\t\t\topacity={opacity}\n\t\t/>\n\t)\n}\n\nfunction useHighlightForceSolid(editor: Editor, shape: TLHighlightShape) {\n\treturn useValue(\n\t\t'forceSolid',\n\t\t() => {\n\t\t\tconst sw = getStrokeWidth(shape)\n\t\t\tconst zoomLevel = editor.getEfficientZoomLevel()\n\t\t\tif (sw / zoomLevel < 1.5) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\t\t[editor]\n\t)\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3670, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/line/toolStates/Idle.ts"],"sourcesContent":["import { StateNode, TLShapeId } from '@tldraw/editor'\n\nexport class Idle extends StateNode {\n\tstatic override id = 'idle'\n\n\tprivate shapeId = '' as TLShapeId\n\n\toverride onEnter(info: { shapeId: TLShapeId }) {\n\t\tthis.shapeId = info.shapeId\n\t\tthis.editor.setCursor({ type: 'cross', rotation: 0 })\n\t}\n\n\toverride onPointerDown() {\n\t\tthis.parent.transition('pointing', { shapeId: this.shapeId })\n\t}\n\n\toverride onCancel() {\n\t\tthis.editor.setCurrentTool('select')\n\t}\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,iBAA4B;;AAE9B,MAAM,aAAa,2PAAA,CAAU;IACnC,OAAgB,KAAK,OAAA;IAEb,UAAU,GAAA;IAET,QAAQ,IAAA,EAA8B;QAC9C,IAAA,CAAK,OAAA,GAAU,KAAK,OAAA;QACpB,IAAA,CAAK,MAAA,CAAO,SAAA,CAAU;YAAE,MAAM;YAAS,UAAU;QAAE,CAAC;IACrD;IAES,gBAAgB;QACxB,IAAA,CAAK,MAAA,CAAO,UAAA,CAAW,YAAY;YAAE,SAAS,IAAA,CAAK,OAAA;QAAQ,CAAC;IAC7D;IAES,WAAW;QACnB,IAAA,CAAK,MAAA,CAAO,cAAA,CAAe,QAAQ;IACpC;AACD"}},
    {"offset": {"line": 3702, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/line/toolStates/Pointing.ts"],"sourcesContent":["import {\n\tMat,\n\tStateNode,\n\tTLLineShape,\n\tTLShapeId,\n\tVec,\n\tcreateShapeId,\n\tgetIndexAbove,\n\tlast,\n\tmaybeSnapToGrid,\n\tsortByIndex,\n\tstructuredClone,\n} from '@tldraw/editor'\n\nconst MINIMUM_DISTANCE_BETWEEN_SHIFT_CLICKED_HANDLES = 2\n\nexport class Pointing extends StateNode {\n\tstatic override id = 'pointing'\n\n\tshape = {} as TLLineShape\n\n\tmarkId: string | undefined\n\n\toverride onEnter(info: { shapeId?: TLShapeId }) {\n\t\tconst { inputs } = this.editor\n\t\tconst currentPagePoint = inputs.getCurrentPagePoint()\n\n\t\tthis.markId = undefined\n\n\t\t// Previously created line shape that we might be extending\n\t\tconst shape = info.shapeId && this.editor.getShape<TLLineShape>(info.shapeId)\n\n\t\tif (shape && inputs.getShiftKey()) {\n\t\t\t// Extending a previous shape\n\t\t\tthis.markId = this.editor.markHistoryStoppingPoint(`creating_line:${shape.id}`)\n\t\t\tthis.shape = shape\n\n\t\t\tconst handles = this.editor.getShapeHandles(this.shape)\n\t\t\tif (!handles) return\n\n\t\t\tconst vertexHandles = handles.filter((h) => h.type === 'vertex').sort(sortByIndex)\n\t\t\tconst endHandle = vertexHandles[vertexHandles.length - 1]\n\t\t\tconst prevEndHandle = vertexHandles[vertexHandles.length - 2]\n\n\t\t\tconst shapePagePoint = Mat.applyToPoint(\n\t\t\t\tthis.editor.getShapeParentTransform(this.shape)!,\n\t\t\t\tnew Vec(this.shape.x, this.shape.y)\n\t\t\t)\n\t\t\t// nudge the point slightly to avoid zero-length lines\n\t\t\tconst nudgedPoint = Vec.Sub(currentPagePoint, shapePagePoint).addXY(0.1, 0.1)\n\t\t\tconst nextPoint = maybeSnapToGrid(nudgedPoint, this.editor)\n\t\t\tconst points = structuredClone(this.shape.props.points)\n\n\t\t\tif (\n\t\t\t\tVec.DistMin(endHandle, prevEndHandle, MINIMUM_DISTANCE_BETWEEN_SHIFT_CLICKED_HANDLES) ||\n\t\t\t\tVec.DistMin(nextPoint, endHandle, MINIMUM_DISTANCE_BETWEEN_SHIFT_CLICKED_HANDLES)\n\t\t\t) {\n\t\t\t\t// Don't add a new point if the distance between the last two points is too small\n\t\t\t\tpoints[endHandle.id] = {\n\t\t\t\t\tid: endHandle.id,\n\t\t\t\t\tindex: endHandle.index,\n\t\t\t\t\tx: nextPoint.x,\n\t\t\t\t\ty: nextPoint.y,\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Add a new point\n\t\t\t\tconst nextIndex = getIndexAbove(endHandle.index)\n\t\t\t\tpoints[nextIndex] = {\n\t\t\t\t\tid: nextIndex,\n\t\t\t\t\tindex: nextIndex,\n\t\t\t\t\tx: nextPoint.x,\n\t\t\t\t\ty: nextPoint.y,\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.editor.updateShapes([\n\t\t\t\t{\n\t\t\t\t\tid: this.shape.id,\n\t\t\t\t\ttype: this.shape.type,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tpoints,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t])\n\t\t} else {\n\t\t\tconst id = createShapeId()\n\n\t\t\tthis.markId = this.editor.markHistoryStoppingPoint(`creating_line:${id}`)\n\n\t\t\tconst newPoint = maybeSnapToGrid(currentPagePoint, this.editor)\n\n\t\t\tthis.editor.createShapes([\n\t\t\t\t{\n\t\t\t\t\tid,\n\t\t\t\t\ttype: 'line',\n\t\t\t\t\tx: newPoint.x,\n\t\t\t\t\ty: newPoint.y,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tscale: this.editor.user.getIsDynamicResizeMode() ? 1 / this.editor.getZoomLevel() : 1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t])\n\n\t\t\tif (!this.editor.getShape(id)) {\n\t\t\t\tthis.cancel()\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.editor.select(id)\n\t\t\tthis.shape = this.editor.getShape(id)!\n\t\t}\n\t}\n\n\toverride onPointerMove() {\n\t\tif (!this.shape) return\n\n\t\tif (this.editor.inputs.getIsDragging()) {\n\t\t\tconst handles = this.editor.getShapeHandles(this.shape)\n\t\t\tif (!handles) {\n\t\t\t\tif (this.markId) this.editor.bailToMark(this.markId)\n\t\t\t\tthrow Error('No handles found')\n\t\t\t}\n\t\t\tconst lastHandle = last(handles)!\n\t\t\tthis.editor.setCurrentTool('select.dragging_handle', {\n\t\t\t\tshape: this.shape,\n\t\t\t\tisCreating: true,\n\t\t\t\tcreatingMarkId: this.markId,\n\t\t\t\t// remove the offset that we added to the handle when we created it\n\t\t\t\thandle: { ...lastHandle, x: lastHandle.x - 0.1, y: lastHandle.y - 0.1 },\n\t\t\t\tonInteractionEnd: 'line',\n\t\t\t})\n\t\t}\n\t}\n\n\toverride onPointerUp() {\n\t\tthis.complete()\n\t}\n\n\toverride onCancel() {\n\t\tthis.cancel()\n\t}\n\n\toverride onComplete() {\n\t\tthis.complete()\n\t}\n\n\toverride onInterrupt() {\n\t\tthis.parent.transition('idle')\n\t\tif (this.markId) this.editor.bailToMark(this.markId)\n\t\tthis.editor.snaps.clearIndicators()\n\t}\n\n\tcomplete() {\n\t\tthis.parent.transition('idle', { shapeId: this.shape.id })\n\t\tthis.editor.snaps.clearIndicators()\n\t}\n\n\tcancel() {\n\t\tif (this.markId) this.editor.bailToMark(this.markId)\n\t\tthis.parent.transition('idle', { shapeId: this.shape.id })\n\t\tthis.editor.snaps.clearIndicators()\n\t}\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3841, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/line/LineShapeTool.ts"],"sourcesContent":["import { StateNode, TLStateNodeConstructor } from '@tldraw/editor'\nimport { Idle } from './toolStates/Idle'\nimport { Pointing } from './toolStates/Pointing'\n\n/** @public */\nexport class LineShapeTool extends StateNode {\n\tstatic override id = 'line'\n\tstatic override initial = 'idle'\n\tstatic override children(): TLStateNodeConstructor[] {\n\t\treturn [Idle, Pointing]\n\t}\n\n\toverride shapeType = 'line'\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,iBAAyC;AAClD,SAAS,YAAY;AACrB,SAAS,gBAAgB;;;;AAGlB,MAAM,sBAAsB,2PAAA,CAAU;IAC5C,OAAgB,KAAK,OAAA;IACrB,OAAgB,UAAU,OAAA;IAC1B,OAAgB,WAAqC;QACpD,OAAO;YAAC,kPAAA;YAAM,0PAAQ;SAAA;IACvB;IAES,YAAY,OAAA;AACtB"}},
    {"offset": {"line": 3869, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/line/LineShapeUtil.tsx"],"sourcesContent":["import {\n\tGroup2d,\n\tHandleSnapGeometry,\n\tSVGContainer,\n\tShapeUtil,\n\tTLHandle,\n\tTLHandleDragInfo,\n\tTLLineShape,\n\tTLLineShapePoint,\n\tTLResizeInfo,\n\tVec,\n\tWeakCache,\n\tZERO_INDEX_KEY,\n\tassert,\n\tgetColorValue,\n\tgetIndexAbove,\n\tgetIndexBetween,\n\tgetIndices,\n\tlerp,\n\tlineShapeMigrations,\n\tlineShapeProps,\n\tmapObjectMapValues,\n\tmaybeSnapToGrid,\n\tsortByIndex,\n} from '@tldraw/editor'\n\nimport { STROKE_SIZES } from '../arrow/shared'\nimport { PathBuilder, PathBuilderGeometry2d } from '../shared/PathBuilder'\nimport { useDefaultColorTheme } from '../shared/useDefaultColorTheme'\n\nconst handlesCache = new WeakCache<TLLineShape['props'], TLHandle[]>()\n\n/** @public */\nexport class LineShapeUtil extends ShapeUtil<TLLineShape> {\n\tstatic override type = 'line' as const\n\tstatic override props = lineShapeProps\n\tstatic override migrations = lineShapeMigrations\n\n\toverride hideResizeHandles() {\n\t\treturn true\n\t}\n\toverride hideRotateHandle() {\n\t\treturn true\n\t}\n\toverride hideSelectionBoundsFg() {\n\t\treturn true\n\t}\n\toverride hideSelectionBoundsBg() {\n\t\treturn true\n\t}\n\toverride hideInMinimap() {\n\t\treturn true\n\t}\n\n\toverride getDefaultProps(): TLLineShape['props'] {\n\t\tconst [start, end] = getIndices(2)\n\t\treturn {\n\t\t\tdash: 'draw',\n\t\t\tsize: 'm',\n\t\t\tcolor: 'black',\n\t\t\tspline: 'line',\n\t\t\tpoints: {\n\t\t\t\t[start]: { id: start, index: start, x: 0, y: 0 },\n\t\t\t\t[end]: { id: end, index: end, x: 0.1, y: 0.1 },\n\t\t\t},\n\t\t\tscale: 1,\n\t\t}\n\t}\n\n\tgetGeometry(shape: TLLineShape) {\n\t\t// todo: should we have min size?\n\t\tconst geometry = getPathForLineShape(shape).toGeometry()\n\t\tassert(geometry instanceof PathBuilderGeometry2d)\n\t\treturn geometry\n\t}\n\n\toverride getHandles(shape: TLLineShape) {\n\t\treturn handlesCache.get(shape.props, () => {\n\t\t\tconst spline = this.getGeometry(shape)\n\n\t\t\tconst points = linePointsToArray(shape)\n\t\t\tconst results: TLHandle[] = points.map((point) => ({\n\t\t\t\t...point,\n\t\t\t\tid: point.index,\n\t\t\t\ttype: 'vertex',\n\t\t\t\tcanSnap: true,\n\t\t\t}))\n\n\t\t\tfor (let i = 0; i < points.length - 1; i++) {\n\t\t\t\tconst index = getIndexBetween(points[i].index, points[i + 1].index)\n\t\t\t\tconst segment = spline.getSegments()[i]\n\t\t\t\tconst point = segment.interpolateAlongEdge(0.5)\n\t\t\t\tresults.push({\n\t\t\t\t\tid: index,\n\t\t\t\t\ttype: 'create',\n\t\t\t\t\tindex,\n\t\t\t\t\tx: point.x,\n\t\t\t\t\ty: point.y,\n\t\t\t\t\tcanSnap: true,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn results.sort(sortByIndex)\n\t\t})\n\t}\n\n\t//   Events\n\n\toverride onResize(shape: TLLineShape, info: TLResizeInfo<TLLineShape>) {\n\t\tconst { scaleX, scaleY } = info\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tpoints: mapObjectMapValues(shape.props.points, (_, { id, index, x, y }) => ({\n\t\t\t\t\tid,\n\t\t\t\t\tindex,\n\t\t\t\t\tx: x * scaleX,\n\t\t\t\t\ty: y * scaleY,\n\t\t\t\t})),\n\t\t\t},\n\t\t}\n\t}\n\n\toverride onBeforeCreate(next: TLLineShape): void | TLLineShape {\n\t\tconst {\n\t\t\tprops: { points },\n\t\t} = next\n\t\tconst pointKeys = Object.keys(points)\n\n\t\tif (pointKeys.length < 2) {\n\t\t\treturn\n\t\t}\n\n\t\tconst firstPoint = points[pointKeys[0]]\n\t\tconst allSame = pointKeys.every((key) => {\n\t\t\tconst point = points[key]\n\t\t\treturn point.x === firstPoint.x && point.y === firstPoint.y\n\t\t})\n\t\tif (allSame) {\n\t\t\tconst lastKey = pointKeys[pointKeys.length - 1]\n\t\t\tpoints[lastKey] = {\n\t\t\t\t...points[lastKey],\n\t\t\t\tx: points[lastKey].x + 0.1,\n\t\t\t\ty: points[lastKey].y + 0.1,\n\t\t\t}\n\t\t\treturn next\n\t\t}\n\t\treturn\n\t}\n\n\toverride onHandleDrag(shape: TLLineShape, { handle }: TLHandleDragInfo<TLLineShape>) {\n\t\tconst newPoint = maybeSnapToGrid(new Vec(handle.x, handle.y), this.editor)\n\t\treturn {\n\t\t\t...shape,\n\t\t\tprops: {\n\t\t\t\t...shape.props,\n\t\t\t\tpoints: {\n\t\t\t\t\t...shape.props.points,\n\t\t\t\t\t[handle.id]: { id: handle.id, index: handle.index, x: newPoint.x, y: newPoint.y },\n\t\t\t\t},\n\t\t\t},\n\t\t}\n\t}\n\n\toverride onHandleDragStart(shape: TLLineShape, { handle }: TLHandleDragInfo<TLLineShape>) {\n\t\t// For line shapes, if we're dragging a \"create\" handle, then\n\t\t// create a new vertex handle at that point; and make this handle\n\t\t// the handle that we're dragging.\n\t\tif (handle.type === 'create') {\n\t\t\treturn {\n\t\t\t\t...shape,\n\t\t\t\tprops: {\n\t\t\t\t\t...shape.props,\n\t\t\t\t\tpoints: {\n\t\t\t\t\t\t...shape.props.points,\n\t\t\t\t\t\t[handle.index]: { id: handle.index, index: handle.index, x: handle.x, y: handle.y },\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t}\n\t\treturn\n\t}\n\n\tcomponent(shape: TLLineShape) {\n\t\treturn (\n\t\t\t<SVGContainer style={{ minWidth: 50, minHeight: 50 }}>\n\t\t\t\t<LineShapeSvg shape={shape} />\n\t\t\t</SVGContainer>\n\t\t)\n\t}\n\n\tindicator(shape: TLLineShape) {\n\t\tconst strokeWidth = STROKE_SIZES[shape.props.size] * shape.props.scale\n\t\tconst path = getPathForLineShape(shape)\n\t\tconst { dash } = shape.props\n\n\t\treturn path.toSvg({\n\t\t\tstyle: dash === 'draw' ? 'draw' : 'solid',\n\t\t\tstrokeWidth: 1,\n\t\t\tpasses: 1,\n\t\t\trandomSeed: shape.id,\n\t\t\toffset: 0,\n\t\t\troundness: strokeWidth * 2,\n\t\t\tprops: { strokeWidth: undefined },\n\t\t})\n\t}\n\n\toverride useLegacyIndicator() {\n\t\treturn false\n\t}\n\n\toverride getIndicatorPath(shape: TLLineShape): Path2D {\n\t\tconst strokeWidth = STROKE_SIZES[shape.props.size] * shape.props.scale\n\t\tconst path = getPathForLineShape(shape)\n\t\tconst { dash } = shape.props\n\n\t\treturn path.toPath2D({\n\t\t\tstyle: dash === 'draw' ? 'draw' : 'solid',\n\t\t\tstrokeWidth: 1,\n\t\t\tpasses: 1,\n\t\t\trandomSeed: shape.id,\n\t\t\toffset: 0,\n\t\t\troundness: strokeWidth * 2,\n\t\t})\n\t}\n\n\toverride toSvg(shape: TLLineShape) {\n\t\treturn <LineShapeSvg shouldScale shape={shape} />\n\t}\n\n\toverride getHandleSnapGeometry(shape: TLLineShape): HandleSnapGeometry {\n\t\tconst points = linePointsToArray(shape)\n\t\treturn {\n\t\t\tpoints,\n\t\t\tgetSelfSnapPoints: (handle) => {\n\t\t\t\tconst index = this.getHandles(shape)\n\t\t\t\t\t.filter((h) => h.type === 'vertex')\n\t\t\t\t\t.findIndex((h) => h.id === handle.id)!\n\n\t\t\t\t// We want to skip the current and adjacent handles\n\t\t\t\treturn points.filter((_, i) => Math.abs(i - index) > 1).map(Vec.From)\n\t\t\t},\n\t\t\tgetSelfSnapOutline: (handle) => {\n\t\t\t\t// We want to skip the segments that include the handle, so\n\t\t\t\t// find the index of the handle that shares the same index property\n\t\t\t\t// as the initial dragging handle; this catches a quirk of create handles\n\t\t\t\tconst index = this.getHandles(shape)\n\t\t\t\t\t.filter((h) => h.type === 'vertex')\n\t\t\t\t\t.findIndex((h) => h.id === handle.id)!\n\n\t\t\t\t// Get all the outline segments from the shape that don't include the handle\n\t\t\t\tconst segments = this.getGeometry(shape)\n\t\t\t\t\t.getSegments()\n\t\t\t\t\t.filter((_, i) => i !== index - 1 && i !== index)\n\n\t\t\t\tif (!segments.length) return null\n\t\t\t\treturn new Group2d({ children: segments })\n\t\t\t},\n\t\t}\n\t}\n\toverride getInterpolatedProps(\n\t\tstartShape: TLLineShape,\n\t\tendShape: TLLineShape,\n\t\tt: number\n\t): TLLineShape['props'] {\n\t\tconst startPoints = linePointsToArray(startShape)\n\t\tconst endPoints = linePointsToArray(endShape)\n\n\t\tconst pointsToUseStart: TLLineShapePoint[] = []\n\t\tconst pointsToUseEnd: TLLineShapePoint[] = []\n\n\t\tlet index = ZERO_INDEX_KEY\n\n\t\tif (startPoints.length > endPoints.length) {\n\t\t\t// we'll need to expand points\n\t\t\tfor (let i = 0; i < startPoints.length; i++) {\n\t\t\t\tpointsToUseStart[i] = { ...startPoints[i] }\n\t\t\t\tif (endPoints[i] === undefined) {\n\t\t\t\t\tpointsToUseEnd[i] = { ...endPoints[endPoints.length - 1], id: index }\n\t\t\t\t} else {\n\t\t\t\t\tpointsToUseEnd[i] = { ...endPoints[i], id: index }\n\t\t\t\t}\n\t\t\t\tindex = getIndexAbove(index)\n\t\t\t}\n\t\t} else if (endPoints.length > startPoints.length) {\n\t\t\t// we'll need to converge points\n\t\t\tfor (let i = 0; i < endPoints.length; i++) {\n\t\t\t\tpointsToUseEnd[i] = { ...endPoints[i] }\n\t\t\t\tif (startPoints[i] === undefined) {\n\t\t\t\t\tpointsToUseStart[i] = {\n\t\t\t\t\t\t...startPoints[startPoints.length - 1],\n\t\t\t\t\t\tid: index,\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpointsToUseStart[i] = { ...startPoints[i], id: index }\n\t\t\t\t}\n\t\t\t\tindex = getIndexAbove(index)\n\t\t\t}\n\t\t} else {\n\t\t\t// noop, easy\n\t\t\tfor (let i = 0; i < endPoints.length; i++) {\n\t\t\t\tpointsToUseStart[i] = startPoints[i]\n\t\t\t\tpointsToUseEnd[i] = endPoints[i]\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\t...(t > 0.5 ? endShape.props : startShape.props),\n\t\t\tpoints: Object.fromEntries(\n\t\t\t\tpointsToUseStart.map((point, i) => {\n\t\t\t\t\tconst endPoint = pointsToUseEnd[i]\n\t\t\t\t\treturn [\n\t\t\t\t\t\tpoint.id,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...point,\n\t\t\t\t\t\t\tx: lerp(point.x, endPoint.x, t),\n\t\t\t\t\t\t\ty: lerp(point.y, endPoint.y, t),\n\t\t\t\t\t\t},\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t),\n\t\t\tscale: lerp(startShape.props.scale, endShape.props.scale, t),\n\t\t}\n\t}\n}\n\nfunction linePointsToArray(shape: TLLineShape) {\n\treturn Object.values(shape.props.points).sort(sortByIndex)\n}\n\nconst pathCache = new WeakCache<TLLineShape, PathBuilder>()\nfunction getPathForLineShape(shape: TLLineShape): PathBuilder {\n\treturn pathCache.get(shape, () => {\n\t\tconst points = linePointsToArray(shape).map(Vec.From)\n\n\t\tswitch (shape.props.spline) {\n\t\t\tcase 'cubic': {\n\t\t\t\treturn PathBuilder.cubicSplineThroughPoints(points, { endOffsets: 0 })\n\t\t\t}\n\t\t\tcase 'line': {\n\t\t\t\treturn PathBuilder.lineThroughPoints(points, { endOffsets: 0 })\n\t\t\t}\n\t\t}\n\t})\n}\n\nfunction LineShapeSvg({\n\tshape,\n\tshouldScale = false,\n\tforceSolid = false,\n}: {\n\tshape: TLLineShape\n\tshouldScale?: boolean\n\tforceSolid?: boolean\n}) {\n\tconst theme = useDefaultColorTheme()\n\n\tconst path = getPathForLineShape(shape)\n\tconst { dash, color, size } = shape.props\n\n\tconst scaleFactor = 1 / shape.props.scale\n\n\tconst scale = shouldScale ? scaleFactor : 1\n\n\tconst strokeWidth = STROKE_SIZES[size] * shape.props.scale\n\n\treturn path.toSvg({\n\t\tstyle: dash,\n\t\tstrokeWidth,\n\t\tforceSolid,\n\t\trandomSeed: shape.id,\n\t\tprops: {\n\t\t\ttransform: `scale(${scale})`,\n\t\t\tstroke: getColorValue(theme, color, 'solid'),\n\t\t\tfill: 'none',\n\t\t},\n\t})\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4219, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/note/toolStates/Idle.ts"],"sourcesContent":["import { StateNode, TLPointerEventInfo } from '@tldraw/editor'\n\nexport class Idle extends StateNode {\n\tstatic override id = 'idle'\n\n\toverride onPointerDown(info: TLPointerEventInfo) {\n\t\tthis.parent.transition('pointing', info)\n\t}\n\n\toverride onEnter() {\n\t\tthis.editor.setCursor({ type: 'cross', rotation: 0 })\n\t}\n\n\toverride onCancel() {\n\t\tthis.editor.setCurrentTool('select')\n\t}\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,iBAAqC;;AAEvC,MAAM,aAAa,2PAAA,CAAU;IACnC,OAAgB,KAAK,OAAA;IAEZ,cAAc,IAAA,EAA0B;QAChD,IAAA,CAAK,MAAA,CAAO,UAAA,CAAW,YAAY,IAAI;IACxC;IAES,UAAU;QAClB,IAAA,CAAK,MAAA,CAAO,SAAA,CAAU;YAAE,MAAM;YAAS,UAAU;QAAE,CAAC;IACrD;IAES,WAAW;QACnB,IAAA,CAAK,MAAA,CAAO,cAAA,CAAe,QAAQ;IACpC;AACD"}},
    {"offset": {"line": 4247, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/note/noteHelpers.ts"],"sourcesContent":["import {\n\tEditor,\n\tIndexKey,\n\tTLNoteShape,\n\tTLShape,\n\tVec,\n\tcompact,\n\tcreateShapeId,\n\ttoRichText,\n} from '@tldraw/editor'\n\n/** @internal */\nexport const CLONE_HANDLE_MARGIN = 0\n/** @internal */\nexport const NOTE_SIZE = 200\n/** @internal */\nexport const NOTE_CENTER_OFFSET = new Vec(NOTE_SIZE / 2, NOTE_SIZE / 2)\n/** @internal */\nexport const NOTE_ADJACENT_POSITION_SNAP_RADIUS = 10\n\nconst BASE_NOTE_POSITIONS = (editor: Editor) =>\n\t[\n\t\t[\n\t\t\t['a1' as IndexKey],\n\t\t\tnew Vec(NOTE_SIZE * 0.5, NOTE_SIZE * -0.5 - editor.options.adjacentShapeMargin),\n\t\t], // t\n\t\t[\n\t\t\t['a2' as IndexKey],\n\t\t\tnew Vec(NOTE_SIZE * 1.5 + editor.options.adjacentShapeMargin, NOTE_SIZE * 0.5),\n\t\t], // r\n\t\t[\n\t\t\t['a3' as IndexKey],\n\t\t\tnew Vec(NOTE_SIZE * 0.5, NOTE_SIZE * 1.5 + editor.options.adjacentShapeMargin),\n\t\t], // b\n\t\t[\n\t\t\t['a4' as IndexKey],\n\t\t\tnew Vec(NOTE_SIZE * -0.5 - editor.options.adjacentShapeMargin, NOTE_SIZE * 0.5),\n\t\t], // l\n\t] as const\n\nfunction getBaseAdjacentNotePositions(editor: Editor, scale: number) {\n\tif (scale === 1) return BASE_NOTE_POSITIONS(editor)\n\tconst s = NOTE_SIZE * scale\n\tconst m = editor.options.adjacentShapeMargin * scale\n\treturn [\n\t\t[['a1' as IndexKey], new Vec(s * 0.5, s * -0.5 - m)], // t\n\t\t[['a2' as IndexKey], new Vec(s * 1.5 + m, s * 0.5)], // r\n\t\t[['a3' as IndexKey], new Vec(s * 0.5, s * 1.5 + m)], // b\n\t\t[['a4' as IndexKey], new Vec(s * -0.5 - m, s * 0.5)], // l\n\t] as const\n}\n\n/**\n * Get the adjacent positions for a particular note shape.\n *\n * @param pagePoint - The point of the note shape on the page.\n * @param pageRotation - The rotation of the note shape on the page.\n * @param growY - The growY of the note shape.\n * @param extraHeight - The extra height to add to the top position above the note shape (ie the growY of the dragging shape).\n *\n * @internal */\nexport function getNoteAdjacentPositions(\n\teditor: Editor,\n\tpagePoint: Vec,\n\tpageRotation: number,\n\tgrowY: number,\n\textraHeight: number,\n\tscale: number\n): Record<IndexKey, Vec> {\n\treturn Object.fromEntries(\n\t\tgetBaseAdjacentNotePositions(editor, scale).map(([id, v], i) => {\n\t\t\tconst point = v.clone()\n\t\t\tif (i === 0 && extraHeight) {\n\t\t\t\t// apply top margin (the growY of the moving note shape)\n\t\t\t\tpoint.y -= extraHeight\n\t\t\t} else if (i === 2 && growY) {\n\t\t\t\t// apply bottom margin (the growY of this note shape)\n\t\t\t\tpoint.y += growY\n\t\t\t}\n\t\t\treturn [id, point.rot(pageRotation).add(pagePoint)]\n\t\t})\n\t)\n}\n\n/**\n * Get all of the available note adjacent positions, excluding the selected shapes.\n *\n * @param editor - The editor instance.\n * @param rotation - The rotation of the note shape.\n * @param extraHeight - The extra height to add to the top position above the note shape (ie the growY of the dragging shape).\n *\n * @internal */\nexport function getAvailableNoteAdjacentPositions(\n\teditor: Editor,\n\trotation: number,\n\tscale: number,\n\textraHeight: number\n) {\n\tconst selectedShapeIds = new Set(editor.getSelectedShapeIds())\n\tconst minSize = (NOTE_SIZE + editor.options.adjacentShapeMargin + extraHeight) ** 2\n\tconst allCenters = new Map<TLNoteShape, Vec>()\n\tconst positions: (Vec | undefined)[] = []\n\n\t// Get all the positions that are adjacent to the selected note shapes\n\tfor (const shape of editor.getCurrentPageShapes()) {\n\t\tif (\n\t\t\t!editor.isShapeOfType(shape, 'note') ||\n\t\t\tscale !== shape.props.scale ||\n\t\t\tselectedShapeIds.has(shape.id)\n\t\t) {\n\t\t\tcontinue\n\t\t}\n\n\t\tconst transform = editor.getShapePageTransform(shape.id)!\n\n\t\t// If the note has a different rotation, we can't use its adjacent positions\n\t\tif (rotation !== transform.rotation()) continue\n\n\t\t// Save the unselected note shape's center\n\t\tallCenters.set(shape, editor.getShapePageBounds(shape)!.center)\n\n\t\t// And push its position to the positions array\n\t\tpositions.push(\n\t\t\t...Object.values(\n\t\t\t\tgetNoteAdjacentPositions(\n\t\t\t\t\teditor,\n\t\t\t\t\ttransform.point(),\n\t\t\t\t\trotation,\n\t\t\t\t\tshape.props.growY,\n\t\t\t\t\textraHeight,\n\t\t\t\t\tscale\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t}\n\n\t// Remove positions that are inside of another note shape\n\tconst len = positions.length\n\tlet position: Vec | undefined\n\tfor (const [shape, center] of allCenters) {\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tposition = positions[i]\n\t\t\tif (!position) continue\n\t\t\tif (Vec.Dist2(center, position) > minSize) continue\n\t\t\tif (editor.isPointInShape(shape, position)) {\n\t\t\t\tpositions[i] = undefined\n\t\t\t}\n\t\t}\n\t}\n\n\treturn compact(positions)\n}\n\n/**\n * For a particular adjacent note position, get the shape in that position or create a new one.\n *\n * @param editor - The editor instance.\n * @param shape - The note shape to create or select.\n * @param center - The center of the note shape.\n * @param pageRotation - The rotation of the note shape on the page.\n * @param forceNew - Whether to force the creation of a new note shape.\n *\n * @internal */\nexport function getNoteShapeForAdjacentPosition(\n\teditor: Editor,\n\tshape: TLNoteShape,\n\tcenter: Vec,\n\tpageRotation: number,\n\tforceNew = false\n) {\n\t// There might already be a note in that position! If there is, we'll\n\t// select the next note and switch focus to it. If there's not, then\n\t// we'll create a new note in that position.\n\n\tlet nextNote: TLShape | undefined\n\n\t// Check the center of where a new note would be\n\t// Start from the top of the stack, and work our way down\n\tconst allShapesOnPage = editor.getCurrentPageShapesSorted()\n\n\tconst minDistance = (NOTE_SIZE + editor.options.adjacentShapeMargin ** 2) ** shape.props.scale\n\n\tfor (let i = allShapesOnPage.length - 1; i >= 0; i--) {\n\t\tconst otherNote = allShapesOnPage[i]\n\t\tif (otherNote.type === 'note' && otherNote.id !== shape.id) {\n\t\t\tconst otherBounds = editor.getShapePageBounds(otherNote)\n\t\t\tif (\n\t\t\t\totherBounds &&\n\t\t\t\tVec.Dist2(otherBounds.center, center) < minDistance &&\n\t\t\t\teditor.isPointInShape(otherNote, center)\n\t\t\t) {\n\t\t\t\tnextNote = otherNote\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\teditor.complete()\n\n\t// If we didn't find any in that position, then create a new one\n\tif (!nextNote || forceNew) {\n\t\teditor.markHistoryStoppingPoint('creating note shape')\n\t\tconst id = createShapeId()\n\n\t\t// We create it at the center first, so that it becomes\n\t\t// the child of whatever parent was at that center\n\t\teditor.createShape({\n\t\t\tid,\n\t\t\ttype: 'note',\n\t\t\tx: center.x,\n\t\t\ty: center.y,\n\t\t\trotation: pageRotation,\n\t\t\topacity: shape.opacity,\n\t\t\tprops: {\n\t\t\t\t// Use the props of the shape we're cloning\n\t\t\t\t...shape.props,\n\t\t\t\trichText: toRichText(''),\n\t\t\t\tgrowY: 0,\n\t\t\t\tfontSizeAdjustment: 0,\n\t\t\t\turl: '',\n\t\t\t},\n\t\t})\n\n\t\t// Now we need to correct its location within its new parent\n\n\t\tconst createdShape = editor.getShape<TLNoteShape>(id)!\n\t\tif (!createdShape) return // may have hit max shapes\n\n\t\t// We need to put the page point in the same coordinate space as the newly created shape (i.e its parent's space)\n\t\tconst topLeft = editor.getPointInParentSpace(\n\t\t\tcreatedShape,\n\t\t\tVec.Sub(\n\t\t\t\tcenter,\n\t\t\t\tVec.Rot(NOTE_CENTER_OFFSET.clone().mul(createdShape.props.scale), pageRotation)\n\t\t\t)\n\t\t)\n\n\t\teditor.updateShape({\n\t\t\tid,\n\t\t\ttype: 'note',\n\t\t\tx: topLeft.x,\n\t\t\ty: topLeft.y,\n\t\t})\n\n\t\tnextNote = editor.getShape(id)!\n\t}\n\n\teditor.zoomToSelectionIfOffscreen(16, {\n\t\tanimation: {\n\t\t\tduration: editor.options.animationMediumMs,\n\t\t},\n\t\tinset: 0,\n\t})\n\treturn nextNote\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4436, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/note/toolStates/Pointing.ts"],"sourcesContent":["import {\n\tEditor,\n\tStateNode,\n\tTLNoteShape,\n\tTLPointerEventInfo,\n\tTLShapeId,\n\tVec,\n\tcreateShapeId,\n\tmaybeSnapToGrid,\n} from '@tldraw/editor'\n\nimport { startEditingShapeWithRichText } from '../../../tools/SelectTool/selectHelpers'\nimport {\n\tNOTE_ADJACENT_POSITION_SNAP_RADIUS,\n\tgetAvailableNoteAdjacentPositions,\n} from '../noteHelpers'\n\nexport class Pointing extends StateNode {\n\tstatic override id = 'pointing'\n\n\tdragged = false\n\n\tinfo = {} as TLPointerEventInfo\n\n\tmarkId = ''\n\n\tshape = {} as TLNoteShape\n\n\toverride onEnter() {\n\t\tconst { editor } = this\n\n\t\tconst id = createShapeId()\n\t\tthis.markId = editor.markHistoryStoppingPoint(`creating_note:${id}`)\n\n\t\t// Check for note pits; if the pointer is close to one, place the note centered on the pit\n\t\tconst center = this.editor.inputs.getOriginPagePoint().clone()\n\t\tconst offset = getNoteShapeAdjacentPositionOffset(\n\t\t\tthis.editor,\n\t\t\tcenter,\n\t\t\tthis.editor.user.getIsDynamicResizeMode() ? 1 / this.editor.getZoomLevel() : 1\n\t\t)\n\t\tif (offset) {\n\t\t\tcenter.sub(offset)\n\t\t}\n\n\t\t// Allow this to trigger the max shapes reached alert\n\t\tconst shape = createNoteShape(this.editor, id, center)\n\t\tif (shape) {\n\t\t\tthis.shape = shape\n\t\t} else {\n\t\t\tthis.cancel()\n\t\t}\n\t}\n\n\toverride onPointerMove(info: TLPointerEventInfo) {\n\t\tif (this.editor.inputs.getIsDragging()) {\n\t\t\tthis.editor.setCurrentTool('select.translating', {\n\t\t\t\t...info,\n\t\t\t\ttarget: 'shape',\n\t\t\t\tshape: this.shape,\n\t\t\t\tonInteractionEnd: 'note',\n\t\t\t\tisCreating: true,\n\t\t\t\tcreatingMarkId: this.markId,\n\t\t\t\tonCreate: () => {\n\t\t\t\t\tstartEditingShapeWithRichText(this.editor, this.shape.id)\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t}\n\n\toverride onPointerUp() {\n\t\tthis.complete()\n\t}\n\n\toverride onInterrupt() {\n\t\tthis.cancel()\n\t}\n\n\toverride onComplete() {\n\t\tthis.complete()\n\t}\n\n\toverride onCancel() {\n\t\tthis.cancel()\n\t}\n\n\tprivate complete() {\n\t\tif (this.editor.getInstanceState().isToolLocked) {\n\t\t\tthis.parent.transition('idle')\n\t\t} else {\n\t\t\tstartEditingShapeWithRichText(this.editor, this.shape.id, { info: this.info })\n\t\t}\n\t}\n\n\tprivate cancel() {\n\t\tthis.editor.bailToMark(this.markId)\n\t\tthis.parent.transition('idle', this.info)\n\t}\n}\n\nexport function getNoteShapeAdjacentPositionOffset(editor: Editor, center: Vec, scale: number) {\n\tlet min = NOTE_ADJACENT_POSITION_SNAP_RADIUS / editor.getZoomLevel() // in screen space\n\tlet offset: Vec | undefined\n\tfor (const pit of getAvailableNoteAdjacentPositions(editor, 0, scale, 0)) {\n\t\t// only check page rotations of zero\n\t\tconst deltaToPit = Vec.Sub(center, pit)\n\t\tconst dist = deltaToPit.len()\n\t\tif (dist < min) {\n\t\t\tmin = dist\n\t\t\toffset = deltaToPit\n\t\t}\n\t}\n\treturn offset\n}\n\nexport function createNoteShape(editor: Editor, id: TLShapeId, center: Vec) {\n\teditor.createShape({\n\t\tid,\n\t\ttype: 'note',\n\t\tx: center.x,\n\t\ty: center.y,\n\t\tprops: {\n\t\t\tscale: editor.user.getIsDynamicResizeMode() ? 1 / editor.getZoomLevel() : 1,\n\t\t},\n\t})\n\n\tconst shape = editor.getShape<TLNoteShape>(id)\n\t// Should never happen since we just checked, but just in case\n\tif (!shape) return\n\n\teditor.select(id)\n\tconst bounds = editor.getShapeGeometry(shape).bounds\n\tconst newPoint = maybeSnapToGrid(\n\t\tnew Vec(shape.x - bounds.width / 2, shape.y - bounds.height / 2),\n\t\teditor\n\t)\n\n\t// Center the text around the created point\n\teditor.updateShapes([\n\t\t{\n\t\t\tid,\n\t\t\ttype: 'note',\n\t\t\tx: newPoint.x,\n\t\t\ty: newPoint.y,\n\t\t},\n\t])\n\n\treturn editor.getShape<TLNoteShape>(id)\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4561, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/note/NoteShapeTool.ts"],"sourcesContent":["import { StateNode, TLStateNodeConstructor } from '@tldraw/editor'\nimport { Idle } from './toolStates/Idle'\nimport { Pointing } from './toolStates/Pointing'\n\n/** @public */\nexport class NoteShapeTool extends StateNode {\n\tstatic override id = 'note'\n\tstatic override initial = 'idle'\n\tstatic override children(): TLStateNodeConstructor[] {\n\t\treturn [Idle, Pointing]\n\t}\n\toverride shapeType = 'note'\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,iBAAyC;AAClD,SAAS,YAAY;AACrB,SAAS,gBAAgB;;;;AAGlB,MAAM,sBAAsB,2PAAA,CAAU;IAC5C,OAAgB,KAAK,OAAA;IACrB,OAAgB,UAAU,OAAA;IAC1B,OAAgB,WAAqC;QACpD,OAAO;YAAC,kPAAA;YAAM,0PAAQ;SAAA;IACvB;IACS,YAAY,OAAA;AACtB"}},
    {"offset": {"line": 4589, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/note/NoteShapeUtil.tsx"],"sourcesContent":["/* eslint-disable react-hooks/rules-of-hooks */\nimport {\n\tBox,\n\tEMPTY_ARRAY,\n\tEditor,\n\tGroup2d,\n\tIndexKey,\n\tRectangle2d,\n\tShapeUtil,\n\tSvgExportContext,\n\tTLHandle,\n\tTLNoteShape,\n\tTLNoteShapeProps,\n\tTLResizeInfo,\n\tTLShape,\n\tTLShapeId,\n\tVec,\n\tWeakCache,\n\texhaustiveSwitchError,\n\tgetColorValue,\n\tgetDefaultColorTheme,\n\tgetFontsFromRichText,\n\tisEqual,\n\tlerp,\n\tnoteShapeMigrations,\n\tnoteShapeProps,\n\tresizeScaled,\n\trng,\n\ttoDomPrecision,\n\ttoRichText,\n\tuseEditor,\n\tuseValue,\n} from '@tldraw/editor'\nimport { useCallback, useContext } from 'react'\nimport { startEditingShapeWithRichText } from '../../tools/SelectTool/selectHelpers'\nimport { TranslationsContext } from '../../ui/hooks/useTranslation/useTranslation'\nimport {\n\tisEmptyRichText,\n\trenderHtmlFromRichTextForMeasurement,\n\trenderPlaintextFromRichText,\n} from '../../utils/text/richText'\nimport { isRightToLeftLanguage } from '../../utils/text/text'\nimport { HyperlinkButton } from '../shared/HyperlinkButton'\nimport { RichTextLabel, RichTextSVG } from '../shared/RichTextLabel'\nimport {\n\tFONT_FAMILIES,\n\tLABEL_FONT_SIZES,\n\tLABEL_PADDING,\n\tTEXT_PROPS,\n} from '../shared/default-shape-constants'\nimport { useDefaultColorTheme } from '../shared/useDefaultColorTheme'\nimport { useIsReadyForEditing } from '../shared/useEditablePlainText'\nimport { useEfficientZoomThreshold } from '../shared/useEfficientZoomThreshold'\nimport {\n\tCLONE_HANDLE_MARGIN,\n\tNOTE_CENTER_OFFSET,\n\tNOTE_SIZE,\n\tgetNoteShapeForAdjacentPosition,\n} from './noteHelpers'\n\n/** @public */\nexport interface NoteShapeOptions {\n\t/**\n\t * How should the note shape resize? By default it does not resize (except automatically based on its text content),\n\t * but you can set it to be user-resizable using scale.\n\t */\n\tresizeMode: 'none' | 'scale'\n}\n\n/** @public */\nexport class NoteShapeUtil extends ShapeUtil<TLNoteShape> {\n\tstatic override type = 'note' as const\n\tstatic override props = noteShapeProps\n\tstatic override migrations = noteShapeMigrations\n\n\toverride options: NoteShapeOptions = {\n\t\tresizeMode: 'none',\n\t}\n\n\toverride canEdit() {\n\t\treturn true\n\t}\n\toverride hideResizeHandles() {\n\t\tconst { resizeMode } = this.options\n\t\tswitch (resizeMode) {\n\t\t\tcase 'none': {\n\t\t\t\treturn true\n\t\t\t}\n\t\t\tcase 'scale': {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tthrow exhaustiveSwitchError(resizeMode)\n\t\t\t}\n\t\t}\n\t}\n\n\toverride isAspectRatioLocked() {\n\t\treturn this.options.resizeMode === 'scale'\n\t}\n\n\toverride hideSelectionBoundsFg() {\n\t\treturn false\n\t}\n\n\tgetDefaultProps(): TLNoteShape['props'] {\n\t\treturn {\n\t\t\tcolor: 'black',\n\t\t\trichText: toRichText(''),\n\t\t\tsize: 'm',\n\t\t\tfont: 'draw',\n\t\t\talign: 'middle',\n\t\t\tverticalAlign: 'middle',\n\t\t\tlabelColor: 'black',\n\t\t\tgrowY: 0,\n\t\t\tfontSizeAdjustment: 0,\n\t\t\turl: '',\n\t\t\tscale: 1,\n\t\t}\n\t}\n\n\tgetGeometry(shape: TLNoteShape) {\n\t\tconst { labelHeight, labelWidth } = getLabelSize(this.editor, shape)\n\t\tconst { scale } = shape.props\n\n\t\tconst lh = labelHeight * scale\n\t\tconst lw = labelWidth * scale\n\t\tconst nw = NOTE_SIZE * scale\n\t\tconst nh = getNoteHeight(shape)\n\n\t\treturn new Group2d({\n\t\t\tchildren: [\n\t\t\t\tnew Rectangle2d({ width: nw, height: nh, isFilled: true }),\n\t\t\t\tnew Rectangle2d({\n\t\t\t\t\tx:\n\t\t\t\t\t\tshape.props.align === 'start'\n\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t: shape.props.align === 'end'\n\t\t\t\t\t\t\t\t? nw - lw\n\t\t\t\t\t\t\t\t: (nw - lw) / 2,\n\t\t\t\t\ty:\n\t\t\t\t\t\tshape.props.verticalAlign === 'start'\n\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t: shape.props.verticalAlign === 'end'\n\t\t\t\t\t\t\t\t? nh - lh\n\t\t\t\t\t\t\t\t: (nh - lh) / 2,\n\t\t\t\t\twidth: lw,\n\t\t\t\t\theight: lh,\n\t\t\t\t\tisFilled: true,\n\t\t\t\t\tisLabel: true,\n\t\t\t\t\texcludeFromShapeBounds: true,\n\t\t\t\t}),\n\t\t\t],\n\t\t})\n\t}\n\n\toverride getHandles(shape: TLNoteShape): TLHandle[] {\n\t\tconst { scale } = shape.props\n\t\tconst isCoarsePointer = this.editor.getInstanceState().isCoarsePointer\n\t\tif (isCoarsePointer) return []\n\n\t\tconst zoom = this.editor.getEfficientZoomLevel()\n\t\tif (zoom * scale < 0.25) return []\n\n\t\tconst nh = getNoteHeight(shape)\n\t\tconst nw = NOTE_SIZE * scale\n\t\tconst offset = (CLONE_HANDLE_MARGIN / zoom) * scale\n\n\t\tif (zoom * scale < 0.5) {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: 'bottom',\n\t\t\t\t\tindex: 'a3' as IndexKey,\n\t\t\t\t\ttype: 'clone',\n\t\t\t\t\tx: nw / 2,\n\t\t\t\t\ty: nh + offset,\n\t\t\t\t},\n\t\t\t]\n\t\t}\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tid: 'top',\n\t\t\t\tindex: 'a1' as IndexKey,\n\t\t\t\ttype: 'clone',\n\t\t\t\tx: nw / 2,\n\t\t\t\ty: -offset,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'right',\n\t\t\t\tindex: 'a2' as IndexKey,\n\t\t\t\ttype: 'clone',\n\t\t\t\tx: nw + offset,\n\t\t\t\ty: nh / 2,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'bottom',\n\t\t\t\tindex: 'a3' as IndexKey,\n\t\t\t\ttype: 'clone',\n\t\t\t\tx: nw / 2,\n\t\t\t\ty: nh + offset,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'left',\n\t\t\t\tindex: 'a4' as IndexKey,\n\t\t\t\ttype: 'clone',\n\t\t\t\tx: -offset,\n\t\t\t\ty: nh / 2,\n\t\t\t},\n\t\t]\n\t}\n\n\toverride onResize(shape: any, info: TLResizeInfo<any>) {\n\t\tconst { resizeMode } = this.options\n\t\tswitch (resizeMode) {\n\t\t\tcase 'none': {\n\t\t\t\treturn undefined\n\t\t\t}\n\t\t\tcase 'scale': {\n\t\t\t\treturn resizeScaled(shape, info)\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tthrow exhaustiveSwitchError(resizeMode)\n\t\t\t}\n\t\t}\n\t}\n\n\toverride getText(shape: TLNoteShape) {\n\t\treturn renderPlaintextFromRichText(this.editor, shape.props.richText)\n\t}\n\n\toverride getFontFaces(shape: TLNoteShape) {\n\t\tif (isEmptyRichText(shape.props.richText)) {\n\t\t\treturn EMPTY_ARRAY\n\t\t}\n\t\treturn getFontsFromRichText(this.editor, shape.props.richText, {\n\t\t\tfamily: `tldraw_${shape.props.font}`,\n\t\t\tweight: 'normal',\n\t\t\tstyle: 'normal',\n\t\t})\n\t}\n\n\tcomponent(shape: TLNoteShape) {\n\t\tconst {\n\t\t\tid,\n\t\t\ttype,\n\t\t\tprops: {\n\t\t\t\tlabelColor,\n\t\t\t\tscale,\n\t\t\t\tcolor,\n\t\t\t\tfont,\n\t\t\t\tsize,\n\t\t\t\talign,\n\t\t\t\trichText,\n\t\t\t\tverticalAlign,\n\t\t\t\tfontSizeAdjustment,\n\t\t\t},\n\t\t} = shape\n\n\t\tconst handleKeyDown = useNoteKeydownHandler(id)\n\n\t\tconst theme = useDefaultColorTheme()\n\t\tconst nw = NOTE_SIZE * scale\n\t\tconst nh = getNoteHeight(shape)\n\n\t\tconst rotation = useValue(\n\t\t\t'shape rotation',\n\t\t\t() => this.editor.getShapePageTransform(id)?.rotation() ?? 0,\n\t\t\t[this.editor]\n\t\t)\n\n\t\tconst isDarkMode = useValue('dark mode', () => this.editor.user.getIsDarkMode(), [this.editor])\n\n\t\t// Shadows are hidden when zoomed out far enough or in dark mode\n\t\tlet hideShadows = useEfficientZoomThreshold(scale * 0.25)\n\t\tif (isDarkMode) hideShadows = true\n\n\t\tconst isSelected = shape.id === this.editor.getOnlySelectedShapeId()\n\n\t\tconst isReadyForEditing = useIsReadyForEditing(this.editor, shape.id)\n\t\tconst isEmpty = isEmptyRichText(richText)\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div\n\t\t\t\t\tid={id}\n\t\t\t\t\tclassName=\"tl-note__container\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: nw,\n\t\t\t\t\t\theight: nh,\n\t\t\t\t\t\tbackgroundColor: getColorValue(theme, color, 'noteFill'),\n\t\t\t\t\t\tborderBottom: hideShadows\n\t\t\t\t\t\t\t? isDarkMode\n\t\t\t\t\t\t\t\t? `${2 * scale}px solid rgb(20, 20, 20)`\n\t\t\t\t\t\t\t\t: `${2 * scale}px solid rgb(144, 144, 144)`\n\t\t\t\t\t\t\t: 'none',\n\t\t\t\t\t\tboxShadow: hideShadows ? 'none' : getNoteShadow(shape.id, rotation, scale),\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{(isSelected || isReadyForEditing || !isEmpty) && (\n\t\t\t\t\t\t<RichTextLabel\n\t\t\t\t\t\t\tshapeId={id}\n\t\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\t\tfont={font}\n\t\t\t\t\t\t\tfontSize={(fontSizeAdjustment || LABEL_FONT_SIZES[size]) * scale}\n\t\t\t\t\t\t\tlineHeight={TEXT_PROPS.lineHeight}\n\t\t\t\t\t\t\talign={align}\n\t\t\t\t\t\t\tverticalAlign={verticalAlign}\n\t\t\t\t\t\t\trichText={richText}\n\t\t\t\t\t\t\tisSelected={isSelected}\n\t\t\t\t\t\t\tlabelColor={\n\t\t\t\t\t\t\t\tlabelColor === 'black'\n\t\t\t\t\t\t\t\t\t? getColorValue(theme, color, 'noteText')\n\t\t\t\t\t\t\t\t\t: getColorValue(theme, labelColor, 'fill')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twrap\n\t\t\t\t\t\t\tpadding={LABEL_PADDING * scale}\n\t\t\t\t\t\t\thasCustomTabBehavior\n\t\t\t\t\t\t\tshowTextOutline={false}\n\t\t\t\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{'url' in shape.props && shape.props.url && <HyperlinkButton url={shape.props.url} />}\n\t\t\t</>\n\t\t)\n\t}\n\n\tindicator(shape: TLNoteShape) {\n\t\tconst { scale } = shape.props\n\t\treturn (\n\t\t\t<rect\n\t\t\t\trx={scale}\n\t\t\t\twidth={toDomPrecision(NOTE_SIZE * scale)}\n\t\t\t\theight={toDomPrecision(getNoteHeight(shape))}\n\t\t\t/>\n\t\t)\n\t}\n\n\toverride useLegacyIndicator() {\n\t\treturn false\n\t}\n\n\toverride getIndicatorPath(shape: TLNoteShape): Path2D {\n\t\tconst { scale } = shape.props\n\t\tconst path = new Path2D()\n\t\tpath.roundRect(0, 0, NOTE_SIZE * scale, getNoteHeight(shape), scale)\n\t\treturn path\n\t}\n\n\toverride toSvg(shape: TLNoteShape, ctx: SvgExportContext) {\n\t\tconst theme = getDefaultColorTheme({ isDarkMode: ctx.isDarkMode })\n\t\tconst bounds = getBoundsForSVG(shape)\n\n\t\tconst textLabel = (\n\t\t\t<RichTextSVG\n\t\t\t\tfontSize={shape.props.fontSizeAdjustment || LABEL_FONT_SIZES[shape.props.size]}\n\t\t\t\tfont={shape.props.font}\n\t\t\t\talign={shape.props.align}\n\t\t\t\tverticalAlign={shape.props.verticalAlign}\n\t\t\t\trichText={shape.props.richText}\n\t\t\t\tlabelColor={getColorValue(theme, shape.props.color, 'noteText')}\n\t\t\t\tbounds={bounds}\n\t\t\t\tpadding={LABEL_PADDING}\n\t\t\t\tshowTextOutline={false}\n\t\t\t/>\n\t\t)\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<rect x={5} y={5} rx={1} width={NOTE_SIZE - 10} height={bounds.h} fill=\"rgba(0,0,0,.1)\" />\n\t\t\t\t<rect\n\t\t\t\t\trx={1}\n\t\t\t\t\twidth={NOTE_SIZE}\n\t\t\t\t\theight={bounds.h}\n\t\t\t\t\tfill={getColorValue(theme, shape.props.color, 'noteFill')}\n\t\t\t\t/>\n\t\t\t\t{textLabel}\n\t\t\t</>\n\t\t)\n\t}\n\n\toverride onBeforeCreate(next: TLNoteShape) {\n\t\treturn getNoteSizeAdjustments(this.editor, next)\n\t}\n\n\toverride onBeforeUpdate(prev: TLNoteShape, next: TLNoteShape) {\n\t\tif (\n\t\t\tisEqual(prev.props.richText, next.props.richText) &&\n\t\t\tprev.props.font === next.props.font &&\n\t\t\tprev.props.size === next.props.size\n\t\t) {\n\t\t\treturn\n\t\t}\n\n\t\treturn getNoteSizeAdjustments(this.editor, next)\n\t}\n\n\toverride getInterpolatedProps(\n\t\tstartShape: TLNoteShape,\n\t\tendShape: TLNoteShape,\n\t\tt: number\n\t): TLNoteShapeProps {\n\t\treturn {\n\t\t\t...(t > 0.5 ? endShape.props : startShape.props),\n\t\t\tscale: lerp(startShape.props.scale, endShape.props.scale, t),\n\t\t}\n\t}\n}\n\n/**\n * Get the growY and fontSizeAdjustment for a shape.\n */\nfunction getNoteSizeAdjustments(editor: Editor, shape: TLNoteShape) {\n\tconst { labelHeight, fontSizeAdjustment } = getLabelSize(editor, shape)\n\t// When the label height is more than the height of the shape, we add extra height to it\n\tconst growY = Math.max(0, labelHeight - NOTE_SIZE)\n\n\tif (growY !== shape.props.growY || fontSizeAdjustment !== shape.props.fontSizeAdjustment) {\n\t\treturn {\n\t\t\t...shape,\n\t\t\tprops: {\n\t\t\t\t...shape.props,\n\t\t\t\tgrowY,\n\t\t\t\tfontSizeAdjustment,\n\t\t\t},\n\t\t}\n\t}\n}\n\n/**\n * Get the label size for a note.\n */\nfunction getNoteLabelSize(editor: Editor, shape: TLNoteShape) {\n\tconst { richText } = shape.props\n\n\tif (isEmptyRichText(richText)) {\n\t\tconst minHeight = LABEL_FONT_SIZES[shape.props.size] * TEXT_PROPS.lineHeight + LABEL_PADDING * 2\n\t\treturn { labelHeight: minHeight, labelWidth: 100, fontSizeAdjustment: 0 }\n\t}\n\n\tconst unadjustedFontSize = LABEL_FONT_SIZES[shape.props.size]\n\n\tlet fontSizeAdjustment = 0\n\tlet iterations = 0\n\tlet labelHeight = NOTE_SIZE\n\tlet labelWidth = NOTE_SIZE\n\n\t// N.B. For some note shapes with text like 'hjhjhjhjhjhjhjhj', you'll run into\n\t// some text measurement fuzziness where the browser swears there's no overflow (scrollWidth === width)\n\t// but really there is when you enable overflow-wrap again. This helps account for that little bit\n\t// of give.\n\tconst FUZZ = 1\n\n\t// We slightly make the font smaller if the text is too big for the note, width-wise.\n\tdo {\n\t\tfontSizeAdjustment = Math.min(unadjustedFontSize, unadjustedFontSize - iterations)\n\t\tconst html = renderHtmlFromRichTextForMeasurement(editor, richText)\n\t\tconst nextTextSize = editor.textMeasure.measureHtml(html, {\n\t\t\t...TEXT_PROPS,\n\t\t\tfontFamily: FONT_FAMILIES[shape.props.font],\n\t\t\tfontSize: fontSizeAdjustment,\n\t\t\tmaxWidth: NOTE_SIZE - LABEL_PADDING * 2 - FUZZ,\n\t\t\tdisableOverflowWrapBreaking: true,\n\t\t\tmeasureScrollWidth: true,\n\t\t})\n\n\t\tlabelHeight = nextTextSize.h + LABEL_PADDING * 2\n\t\tlabelWidth = nextTextSize.w + LABEL_PADDING * 2\n\n\t\tif (fontSizeAdjustment <= 14) {\n\t\t\t// Too small, just rely now on CSS `overflow-wrap: break-word`\n\t\t\t// We need to recalculate the text measurement here with break-word enabled.\n\t\t\tconst html = renderHtmlFromRichTextForMeasurement(editor, richText)\n\t\t\tconst nextTextSizeWithOverflowBreak = editor.textMeasure.measureHtml(html, {\n\t\t\t\t...TEXT_PROPS,\n\t\t\t\tfontFamily: FONT_FAMILIES[shape.props.font],\n\t\t\t\tfontSize: fontSizeAdjustment,\n\t\t\t\tmaxWidth: NOTE_SIZE - LABEL_PADDING * 2 - FUZZ,\n\t\t\t})\n\t\t\tlabelHeight = nextTextSizeWithOverflowBreak.h + LABEL_PADDING * 2\n\t\t\tlabelWidth = nextTextSizeWithOverflowBreak.w + LABEL_PADDING * 2\n\t\t\tbreak\n\t\t}\n\n\t\tif (nextTextSize.scrollWidth.toFixed(0) === nextTextSize.w.toFixed(0)) {\n\t\t\tbreak\n\t\t}\n\t} while (iterations++ < 50)\n\n\treturn {\n\t\tlabelHeight: labelHeight,\n\t\tlabelWidth: labelWidth,\n\t\tfontSizeAdjustment: fontSizeAdjustment,\n\t}\n}\n\nconst labelSizesForNote = new WeakCache<TLShape, ReturnType<typeof getNoteLabelSize>>()\n\nfunction getLabelSize(editor: Editor, shape: TLNoteShape) {\n\treturn labelSizesForNote.get(shape, () => getNoteLabelSize(editor, shape))\n}\n\nfunction useNoteKeydownHandler(id: TLShapeId) {\n\tconst editor = useEditor()\n\t// Try to get the translation context, but fallback to ltr if it doesn't exist\n\tconst translation = useContext(TranslationsContext)\n\n\treturn useCallback(\n\t\t(e: KeyboardEvent) => {\n\t\t\tconst shape = editor.getShape<TLNoteShape>(id)\n\t\t\tif (!shape) return\n\n\t\t\tconst isTab = e.key === 'Tab'\n\t\t\tconst isCmdEnter = (e.metaKey || e.ctrlKey) && e.key === 'Enter'\n\t\t\tif (isTab || isCmdEnter) {\n\t\t\t\te.preventDefault()\n\n\t\t\t\tconst pageTransform = editor.getShapePageTransform(id)\n\t\t\t\tconst pageRotation = pageTransform.rotation()\n\n\t\t\t\t// Based on the inputs, calculate the offset to the next note\n\t\t\t\t// tab controls x axis (shift inverts direction set by RTL)\n\t\t\t\t// cmd enter is the y axis (shift inverts direction)\n\t\t\t\tconst isRTL = !!(\n\t\t\t\t\ttranslation?.dir === 'rtl' ||\n\t\t\t\t\t// todo: can we check a partial of the text, so that we don't have to render the whole thing?\n\t\t\t\t\tisRightToLeftLanguage(renderPlaintextFromRichText(editor, shape.props.richText))\n\t\t\t\t)\n\n\t\t\t\tconst offsetLength =\n\t\t\t\t\t(NOTE_SIZE +\n\t\t\t\t\t\teditor.options.adjacentShapeMargin +\n\t\t\t\t\t\t// If we're growing down, we need to account for the current shape's growY\n\t\t\t\t\t\t(isCmdEnter && !e.shiftKey ? shape.props.growY : 0)) *\n\t\t\t\t\tshape.props.scale\n\n\t\t\t\tconst adjacentCenter = new Vec(\n\t\t\t\t\tisTab ? (e.shiftKey != isRTL ? -1 : 1) : 0,\n\t\t\t\t\tisCmdEnter ? (e.shiftKey ? -1 : 1) : 0\n\t\t\t\t)\n\t\t\t\t\t.mul(offsetLength)\n\t\t\t\t\t.add(NOTE_CENTER_OFFSET.clone().mul(shape.props.scale))\n\t\t\t\t\t.rot(pageRotation)\n\t\t\t\t\t.add(pageTransform.point())\n\n\t\t\t\tconst newNote = getNoteShapeForAdjacentPosition(editor, shape, adjacentCenter, pageRotation)\n\n\t\t\t\tif (newNote) {\n\t\t\t\t\tstartEditingShapeWithRichText(editor, newNote, { selectAll: true })\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[id, editor, translation?.dir]\n\t)\n}\n\nfunction getNoteHeight(shape: TLNoteShape) {\n\treturn (NOTE_SIZE + shape.props.growY) * shape.props.scale\n}\n\nfunction getNoteShadow(id: string, rotation: number, scale: number) {\n\tconst random = rng(id) // seeded based on id\n\tconst lift = Math.abs(random()) + 0.5 // 0 to 1.5\n\tconst oy = Math.cos(rotation)\n\tconst a = 5 * scale\n\tconst b = 4 * scale\n\tconst c = 6 * scale\n\tconst d = 7 * scale\n\treturn `0px ${a - lift}px ${a}px -${a}px rgba(15, 23, 31, .6),\n\t0px ${(b + lift * d) * Math.max(0, oy)}px ${c + lift * d}px -${b + lift * c}px rgba(15, 23, 31, ${(0.3 + lift * 0.1).toFixed(2)}), \n\t0px ${48 * scale}px ${10 * scale}px -${10 * scale}px inset rgba(15, 23, 44, ${((0.022 + random() * 0.005) * ((1 + oy) / 2)).toFixed(2)})`\n}\n\nfunction getBoundsForSVG(shape: TLNoteShape) {\n\t// When rendering the SVG we don't want to adjust for scale\n\treturn new Box(0, 0, NOTE_SIZE, NOTE_SIZE + shape.props.growY)\n}\n"],"names":["html"],"mappings":"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"}},
    {"offset": {"line": 5040, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/text/toolStates/Idle.ts"],"sourcesContent":["import { StateNode, TLKeyboardEventInfo, TLPointerEventInfo } from '@tldraw/editor'\nimport { updateHoveredShapeId } from '../../../tools/selection-logic/updateHoveredShapeId'\nimport { startEditingShapeWithRichText } from '../../../tools/SelectTool/selectHelpers'\n\nexport class Idle extends StateNode {\n\tstatic override id = 'idle'\n\n\toverride onPointerMove(info: TLPointerEventInfo) {\n\t\tswitch (info.target) {\n\t\t\tcase 'shape':\n\t\t\tcase 'canvas': {\n\t\t\t\tupdateHoveredShapeId(this.editor)\n\t\t\t}\n\t\t}\n\t}\n\n\toverride onPointerDown(info: TLPointerEventInfo) {\n\t\tthis.parent.transition('pointing', info)\n\t}\n\n\toverride onEnter() {\n\t\tthis.editor.setCursor({ type: 'cross', rotation: 0 })\n\t}\n\n\toverride onExit() {\n\t\tupdateHoveredShapeId.cancel()\n\t}\n\n\toverride onKeyDown(info: TLKeyboardEventInfo) {\n\t\tif (info.key === 'Enter') {\n\t\t\tconst onlySelectedShape = this.editor.getOnlySelectedShape()\n\t\t\tif (!this.editor.canEditShape(onlySelectedShape)) return\n\t\t\tthis.editor.setCurrentTool('select')\n\t\t\tstartEditingShapeWithRichText(this.editor, onlySelectedShape.id, { info })\n\t\t}\n\t}\n\n\toverride onCancel() {\n\t\tthis.editor.setCurrentTool('select')\n\t}\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,iBAA0D;AACnE,SAAS,4BAA4B;AACrC,SAAS,qCAAqC;;;;AAEvC,MAAM,aAAa,2PAAA,CAAU;IACnC,OAAgB,KAAK,OAAA;IAEZ,cAAc,IAAA,EAA0B;QAChD,OAAQ,KAAK,MAAA,EAAQ;YACpB,KAAK;YACL,KAAK;gBAAU;oBACd,IAAA,iRAAA,EAAqB,IAAA,CAAK,MAAM;gBACjC;QACD;IACD;IAES,cAAc,IAAA,EAA0B;QAChD,IAAA,CAAK,MAAA,CAAO,UAAA,CAAW,YAAY,IAAI;IACxC;IAES,UAAU;QAClB,IAAA,CAAK,MAAA,CAAO,SAAA,CAAU;YAAE,MAAM;YAAS,UAAU;QAAE,CAAC;IACrD;IAES,SAAS;QACjB,iRAAA,CAAqB,MAAA,CAAO;IAC7B;IAES,UAAU,IAAA,EAA2B;QAC7C,IAAI,KAAK,GAAA,KAAQ,SAAS;YACzB,MAAM,oBAAoB,IAAA,CAAK,MAAA,CAAO,oBAAA,CAAqB;YAC3D,IAAI,CAAC,IAAA,CAAK,MAAA,CAAO,YAAA,CAAa,iBAAiB,EAAG,CAAA;YAClD,IAAA,CAAK,MAAA,CAAO,cAAA,CAAe,QAAQ;YACnC,IAAA,2QAAA,EAA8B,IAAA,CAAK,MAAA,EAAQ,kBAAkB,EAAA,EAAI;gBAAE;YAAK,CAAC;QAC1E;IACD;IAES,WAAW;QACnB,IAAA,CAAK,MAAA,CAAO,cAAA,CAAe,QAAQ;IACpC;AACD"}},
    {"offset": {"line": 5094, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/text/toolStates/Pointing.ts"],"sourcesContent":["import {\n\tStateNode,\n\tTLPointerEventInfo,\n\tTLShapeId,\n\tTLTextShape,\n\tVec,\n\tcreateShapeId,\n\tisShapeId,\n\tmaybeSnapToGrid,\n\ttoRichText,\n} from '@tldraw/editor'\nimport { startEditingShapeWithRichText } from '../../../tools/SelectTool/selectHelpers'\n\nexport class Pointing extends StateNode {\n\tstatic override id = 'pointing'\n\n\tshape?: TLTextShape\n\n\tmarkId = ''\n\n\tenterTime = 0\n\toverride onEnter(): void {\n\t\tthis.enterTime = Date.now()\n\t}\n\n\toverride onExit() {\n\t\tthis.editor.setHintingShapes([])\n\t}\n\n\toverride onPointerMove(info: TLPointerEventInfo) {\n\t\t// Create a fixed width shape if the user wants to do that.\n\n\t\t// Don't create a fixed width shape unless the the drag is a little larger,\n\t\t// otherwise you get a vertical column of single characters if you accidentally\n\t\t// drag a bit unintentionally.\n\n\t\t// If the user hasn't been pointing for more than 150ms, don't create a fixed width shape\n\t\tif (Date.now() - this.enterTime < 150) return\n\n\t\tconst { editor } = this\n\t\tconst isPointing = editor.inputs.getIsPointing()\n\n\t\tif (!isPointing) return\n\n\t\tconst originPagePoint = editor.inputs.getOriginPagePoint()\n\t\tconst currentPagePoint = editor.inputs.getCurrentPagePoint()\n\n\t\tconst currentDragDist = Math.abs(originPagePoint.x - currentPagePoint.x)\n\n\t\tconst baseMinDragDistForFixedWidth = Math.sqrt(\n\t\t\teditor.getInstanceState().isCoarsePointer\n\t\t\t\t? editor.options.coarseDragDistanceSquared\n\t\t\t\t: editor.options.dragDistanceSquared\n\t\t)\n\n\t\t// Ten times the base drag distance for fixed width\n\t\tconst minSquaredDragDist = (baseMinDragDistForFixedWidth * 6) / editor.getZoomLevel()\n\n\t\tif (currentDragDist > minSquaredDragDist) {\n\t\t\tconst id = createShapeId()\n\t\t\tthis.markId = editor.markHistoryStoppingPoint(`creating_text:${id}`)\n\n\t\t\t// create the initial shape with the width that we've dragged\n\t\t\tconst shape = this.createTextShape(id, originPagePoint, false, currentDragDist)\n\n\t\t\tif (!shape) {\n\t\t\t\tthis.cancel()\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Now save the fresh reference\n\t\t\tthis.shape = editor.getShape(shape)\n\n\t\t\teditor.select(id)\n\n\t\t\tconst scale = this.editor.user.getIsDynamicResizeMode() ? 1 / this.editor.getZoomLevel() : 1\n\n\t\t\teditor.setCurrentTool('select.resizing', {\n\t\t\t\t...info,\n\t\t\t\ttarget: 'selection',\n\t\t\t\thandle: 'right',\n\t\t\t\tisCreating: true,\n\t\t\t\tcreatingMarkId: this.markId,\n\t\t\t\t// Make sure the cursor offset takes into account how far we've already dragged\n\t\t\t\tcreationCursorOffset: { x: currentDragDist * scale, y: 1 },\n\t\t\t\tonInteractionEnd: 'text',\n\t\t\t\tonCreate: () => {\n\t\t\t\t\tstartEditingShapeWithRichText(editor, shape.id)\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t}\n\n\toverride onPointerUp() {\n\t\tthis.complete()\n\t}\n\n\toverride onComplete() {\n\t\tthis.cancel()\n\t}\n\n\toverride onCancel() {\n\t\tthis.cancel()\n\t}\n\n\toverride onInterrupt() {\n\t\tthis.cancel()\n\t}\n\n\tprivate complete() {\n\t\tthis.editor.markHistoryStoppingPoint('creating text shape')\n\t\tconst id = createShapeId()\n\t\tconst originPagePoint = this.editor.inputs.getOriginPagePoint()\n\t\tconst shape = this.createTextShape(id, originPagePoint, true, 20)\n\t\tif (!shape) return\n\n\t\tthis.editor.select(id)\n\t\tstartEditingShapeWithRichText(this.editor, id)\n\t}\n\n\tprivate cancel() {\n\t\tthis.parent.transition('idle')\n\t\tthis.editor.bailToMark(this.markId)\n\t}\n\n\tprivate createTextShape(id: TLShapeId, point: Vec, autoSize: boolean, width: number) {\n\t\tthis.editor.createShape({\n\t\t\tid,\n\t\t\ttype: 'text',\n\t\t\tx: point.x,\n\t\t\ty: point.y,\n\t\t\tprops: {\n\t\t\t\trichText: toRichText(''),\n\t\t\t\tautoSize,\n\t\t\t\tw: width,\n\t\t\t\tscale: this.editor.user.getIsDynamicResizeMode() ? 1 / this.editor.getZoomLevel() : 1,\n\t\t\t},\n\t\t})\n\n\t\tconst shape = this.editor.getShape<TLTextShape>(id)\n\t\tif (!shape) {\n\t\t\tthis.cancel()\n\t\t\treturn\n\t\t}\n\n\t\tconst bounds = this.editor.getShapePageBounds(shape)!\n\n\t\tconst delta = new Vec()\n\n\t\tif (autoSize) {\n\t\t\tswitch (shape.props.textAlign) {\n\t\t\t\tcase 'start': {\n\t\t\t\t\tdelta.x = 0\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tcase 'middle': {\n\t\t\t\t\tdelta.x = -bounds.width / 2\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tcase 'end': {\n\t\t\t\t\tdelta.x = -bounds.width\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tdelta.x = 0\n\t\t}\n\n\t\tdelta.y = -bounds.height / 2\n\n\t\tif (isShapeId(shape.parentId)) {\n\t\t\tconst transform = this.editor.getShapeParentTransform(shape)\n\t\t\tdelta.rot(-transform.rotation())\n\t\t}\n\n\t\tconst shapeX = shape.x + delta.x\n\t\tconst shapeY = shape.y + delta.y\n\t\tif (this.editor.getInstanceState().isGridMode) {\n\t\t\tconst topLeft = new Vec(shapeX, shapeY)\n\t\t\tconst gridSnappedPoint = maybeSnapToGrid(topLeft, this.editor)\n\t\t\tconst gridDelta = Vec.Sub(topLeft, gridSnappedPoint)\n\t\t\tthis.editor.updateShape({\n\t\t\t\t...shape,\n\t\t\t\tx: shapeX - gridDelta.x,\n\t\t\t\ty: shapeY - gridDelta.y,\n\t\t\t})\n\t\t} else {\n\t\t\tthis.editor.updateShape({\n\t\t\t\t...shape,\n\t\t\t\tx: shapeX,\n\t\t\t\ty: shapeY,\n\t\t\t})\n\t\t}\n\n\t\treturn shape\n\t}\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5254, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/text/TextShapeTool.ts"],"sourcesContent":["import { StateNode, TLStateNodeConstructor } from '@tldraw/editor'\nimport { Idle } from './toolStates/Idle'\nimport { Pointing } from './toolStates/Pointing'\n\n/** @public */\nexport class TextShapeTool extends StateNode {\n\tstatic override id = 'text'\n\tstatic override initial = 'idle'\n\tstatic override children(): TLStateNodeConstructor[] {\n\t\treturn [Idle, Pointing]\n\t}\n\toverride shapeType = 'text'\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,iBAAyC;AAClD,SAAS,YAAY;AACrB,SAAS,gBAAgB;;;;AAGlB,MAAM,sBAAsB,2PAAA,CAAU;IAC5C,OAAgB,KAAK,OAAA;IACrB,OAAgB,UAAU,OAAA;IAC1B,OAAgB,WAAqC;QACpD,OAAO;YAAC,kPAAA;YAAM,0PAAQ;SAAA;IACvB;IACS,YAAY,OAAA;AACtB"}},
    {"offset": {"line": 5282, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/text/RichTextArea.tsx"],"sourcesContent":["import { EditorView } from '@tiptap/pm/view'\nimport {\n\tEditorEvents,\n\tJSONContent,\n\tEditor as TextEditor,\n\ttype Editor as TTEditor,\n} from '@tiptap/react'\nimport {\n\tEditor,\n\tTLRichText,\n\tTLShapeId,\n\tisEqual,\n\tpreventDefault,\n\tuseEditor,\n\tuseEvent,\n\tuseUniqueSafeId,\n} from '@tldraw/editor'\nimport React, { useLayoutEffect, useRef } from 'react'\n\n/** @public */\nexport interface TextAreaProps {\n\tisEditing: boolean\n\ttext?: string\n\tshapeId: TLShapeId\n\trichText?: TLRichText\n\thandleFocus(): void\n\thandleBlur(): void\n\thandleKeyDown(e: KeyboardEvent): void\n\thandleChange(changeInfo: { plaintext?: string; richText?: TLRichText }): void\n\thandleInputPointerDown(e: React.PointerEvent<HTMLElement>): void\n\thandleDoubleClick(e: any): any\n\thandlePaste(e: ClipboardEvent | React.ClipboardEvent<HTMLTextAreaElement>): void\n\thasCustomTabBehavior?: boolean\n}\n\n/**\n * N.B. In Development mode you need to ensure you're testing this without StrictMode on.\n * Otherwise it's not gonna work as expected on iOS.\n * Specifically, it means that the virtual keyboard won't pop open sometimes\n * (iOS starts flipping out when you render multiple times when trying to focus something) .\n */\n\n/**\n * A rich text area that can be used for editing text with rich text formatting.\n * This component uses the TipTap editor under the hood.\n *\n * @public @react\n */\nexport const RichTextArea = React.forwardRef<HTMLDivElement, TextAreaProps>(function RichTextArea(\n\t{\n\t\tshapeId,\n\t\tisEditing,\n\t\trichText,\n\t\thandleFocus,\n\t\thandleChange,\n\t\thandleBlur,\n\t\thandleKeyDown,\n\t\thandleDoubleClick,\n\t\thasCustomTabBehavior,\n\t\thandlePaste,\n\t},\n\tref\n) {\n\tconst editor = useEditor()\n\tconst tipTapId = useUniqueSafeId('tip-tap-editor')\n\tconst tipTapConfig = editor.getTextOptions().tipTapConfig\n\n\tconst rInitialRichText = useRef(richText)\n\tconst rTextEditor = useRef<TTEditor | null>(null)\n\tconst rTextEditorEl = useRef<HTMLDivElement>(null)\n\n\tuseLayoutEffect(() => {\n\t\tif (!rTextEditor.current) {\n\t\t\trInitialRichText.current = richText\n\t\t} else if (!isEqual(rInitialRichText.current, richText)) {\n\t\t\trTextEditor.current.commands.setContent(richText as JSONContent)\n\t\t}\n\t}, [richText])\n\n\t// The order of events is:\n\t// - editor begins editing any shape\n\t// - we set listeners for select all / place caret events\n\t// - if the user is editing this shape, this component is rendered\n\t// - editor emits the select all event / place caret event\n\t// - the text editor is onCreate callback is called\n\tconst rCreateInfo = useRef({\n\t\tselectAll: false,\n\t\tcaretPosition: null as { x: number; y: number } | null,\n\t})\n\n\tuseLayoutEffect(() => {\n\t\tfunction selectAllIfEditing(event: { shapeId: TLShapeId }) {\n\t\t\tif (event.shapeId === editor.getEditingShapeId()) {\n\t\t\t\trCreateInfo.current.selectAll = true\n\t\t\t}\n\t\t}\n\n\t\tfunction placeCaret(event: { shapeId: TLShapeId; point: { x: number; y: number } }) {\n\t\t\tif (event.shapeId === editor.getEditingShapeId()) {\n\t\t\t\trCreateInfo.current.caretPosition = event.point\n\t\t\t}\n\t\t}\n\n\t\teditor.on('select-all-text', selectAllIfEditing)\n\t\teditor.on('place-caret', placeCaret)\n\t\treturn () => {\n\t\t\teditor.off('select-all-text', selectAllIfEditing)\n\t\t\teditor.off('place-caret', placeCaret)\n\t\t}\n\t}, [editor, isEditing])\n\n\tconst onChange = useEvent(handleChange)\n\tconst onKeyDown = useEvent(handleKeyDown)\n\tconst onFocus = useEvent(handleFocus)\n\tconst onBlur = useEvent(handleBlur)\n\tconst onDoubleClick = useEvent(handleDoubleClick)\n\tconst onPaste = useEvent(handlePaste)\n\tuseLayoutEffect(() => {\n\t\tif (!isEditing || !tipTapConfig || !rTextEditorEl.current) return\n\n\t\tconst { editorProps, ...restOfTipTapConfig } = tipTapConfig\n\n\t\t// Because React can double-render in Strict Mode, we need to make sure we're not setting\n\t\t// the text editor twice. This became more much more prevalent in React 19, but also it\n\t\t// started manifesting in some cases in Next 14.2 (which maybe patches React 18.3 in weird\n\t\t// ways). So we used to use EditorProvider but we into weird rendering issues.\n\t\tconst textEditorInstance = new TextEditor({\n\t\t\telement: rTextEditorEl.current,\n\t\t\tautofocus: true,\n\t\t\teditable: isEditing,\n\t\t\tonUpdate: (props: EditorEvents['update']) => {\n\t\t\t\tconst content: TLRichText = props.editor.state.doc.toJSON()\n\t\t\t\trInitialRichText.current = content\n\t\t\t\tonChange({ richText: content })\n\t\t\t},\n\t\t\tonFocus,\n\t\t\tonBlur,\n\t\t\t// onCreate is called after a `setTimeout(0)`\n\t\t\tonCreate: (props) => {\n\t\t\t\t// If we're not still editing the original shape, then don't do anything.\n\t\t\t\tif (editor.getEditingShapeId() !== shapeId) return\n\n\t\t\t\tconst textEditor = props.editor\n\t\t\t\teditor.setRichTextEditor(textEditor)\n\n\t\t\t\tconst { selectAll, caretPosition } = rCreateInfo.current\n\n\t\t\t\tif (selectAll) {\n\t\t\t\t\t// Select all of the text\n\t\t\t\t\ttextEditor.chain().focus().selectAll().run()\n\t\t\t\t} else if (caretPosition) {\n\t\t\t\t\t// Set the initial caret screen position\n\t\t\t\t\tconst pos = textEditor.view.posAtCoords({\n\t\t\t\t\t\tleft: caretPosition.x,\n\t\t\t\t\t\ttop: caretPosition.y,\n\t\t\t\t\t})?.pos\n\n\t\t\t\t\tif (pos) {\n\t\t\t\t\t\t// Focus to that position.\n\t\t\t\t\t\ttextEditor.chain().focus().setTextSelection(pos).run()\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// If no position, default to select all.\n\t\t\t\t\t\ttextEditor.chain().focus().selectAll().run()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\teditorProps: {\n\t\t\t\thandleKeyDown: (view: EditorView, event: KeyboardEvent) => {\n\t\t\t\t\tif (!hasCustomTabBehavior && event.key === 'Tab') {\n\t\t\t\t\t\thandleTab(editor, view, event)\n\t\t\t\t\t}\n\n\t\t\t\t\tonKeyDown(event)\n\t\t\t\t},\n\t\t\t\thandlePaste: (view: EditorView, event: ClipboardEvent) => {\n\t\t\t\t\tonPaste(event)\n\t\t\t\t\tif (event.defaultPrevented) return true\n\t\t\t\t},\n\t\t\t\thandleDoubleClick: (_view, _pos, event) => onDoubleClick(event),\n\t\t\t\t...editorProps,\n\t\t\t},\n\t\t\tcoreExtensionOptions: {\n\t\t\t\tclipboardTextSerializer: {\n\t\t\t\t\tblockSeparator: '\\n',\n\t\t\t\t},\n\t\t\t},\n\t\t\t// N.B. We disable the text direction in the core list here,\n\t\t\t// but we add it back in again in our own extensions list so that\n\t\t\t// people can omit/override it if they want to.\n\t\t\tenableCoreExtensions: { textDirection: false },\n\t\t\ttextDirection: 'auto',\n\t\t\t...restOfTipTapConfig,\n\t\t\tcontent: rInitialRichText.current as JSONContent,\n\t\t})\n\n\t\t// XXX: When creating a brand new shape and double-clicking into it quickly to edit it,\n\t\t// there's some kind of race condition happening where the editor doesn't focus properly.\n\t\tconst timeout = editor.timers.setTimeout(() => {\n\t\t\tif (rCreateInfo.current.caretPosition || rCreateInfo.current.selectAll) {\n\t\t\t\ttextEditorInstance.commands.focus()\n\t\t\t} else {\n\t\t\t\ttextEditorInstance.commands.focus('end')\n\t\t\t}\n\n\t\t\trCreateInfo.current.selectAll = false\n\t\t\trCreateInfo.current.caretPosition = null\n\t\t}, 100)\n\n\t\trTextEditor.current = textEditorInstance\n\n\t\treturn () => {\n\t\t\trTextEditor.current = null\n\t\t\tclearTimeout(timeout)\n\t\t\ttextEditorInstance.destroy()\n\t\t}\n\t}, [\n\t\tisEditing,\n\t\ttipTapConfig,\n\t\tonFocus,\n\t\tonBlur,\n\t\tonDoubleClick,\n\t\tonChange,\n\t\tonPaste,\n\t\tonKeyDown,\n\t\teditor,\n\t\tshapeId,\n\t\thasCustomTabBehavior,\n\t])\n\n\tif (!isEditing || !tipTapConfig) {\n\t\treturn null\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tid={tipTapId}\n\t\t\tref={ref}\n\t\t\ttabIndex={-1}\n\t\t\tdata-testid=\"rich-text-area\"\n\t\t\tclassName=\"tl-rich-text tl-text tl-text-input\"\n\t\t\tonContextMenu={isEditing ? (e) => e.stopPropagation() : undefined}\n\t\t\t// N.B. When PointerStateExtension was introduced, this was moved there.\n\t\t\t// However, that caused selecting over list items to break.\n\t\t\t// The handleDOMEvents in TipTap don't seem to support the pointerDownCapture event.\n\t\t\tonPointerDownCapture={(e) => e.stopPropagation()}\n\t\t\t// This onTouchEnd is important for Android to be able to change selection on text.\n\t\t\tonTouchEnd={(e) => e.stopPropagation()}\n\t\t\t// On FF, there's a behavior where dragging a selection will grab that selection into\n\t\t\t// the drag event. However, once the drag is over, and you select away from the textarea,\n\t\t\t// starting a drag over the textarea will restart a selection drag instead of a shape drag.\n\t\t\t// This prevents that default behavior in FF.\n\t\t\tonDragStart={preventDefault}\n\t\t>\n\t\t\t<div className=\"tl-rich-text\" ref={rTextEditorEl} />\n\t\t</div>\n\t)\n})\n\n// Prevent exiting the editor when hitting Tab.\n// Also, insert a tab character at the front of the line if the shift key isn't pressed,\n// otherwise if shift is pressed, remove a tab character from the front of the line.\nfunction handleTab(editor: Editor, view: EditorView, event: KeyboardEvent) {\n\t// Don't exit the editor.\n\tevent.preventDefault()\n\n\tconst textEditor = editor.getRichTextEditor()\n\tif (textEditor?.isActive('bulletList') || textEditor?.isActive('orderedList')) return\n\n\tconst { state, dispatch } = view\n\tconst { $from, $to } = state.selection\n\tconst isShift = event.shiftKey\n\n\t// Create a new transaction\n\tlet tr = state.tr\n\n\t// Iterate over each line in the selection in reverse so that the positions\n\t// are stable as we modify the document.\n\tlet pos = $to.end()\n\twhile (pos >= $from.start()) {\n\t\tconst line = state.doc.resolve(pos).blockRange()\n\t\tif (!line) break\n\n\t\tconst lineStart = line.start\n\t\tconst lineEnd = line.end\n\t\tconst lineText = state.doc.textBetween(lineStart, lineEnd, '\\n')\n\n\t\t// Check if the current line or any of its parent nodes are part of a list\n\t\tlet isInList = false\n\t\tstate.doc.nodesBetween(lineStart, lineEnd, (node) => {\n\t\t\tif (node.type.name === 'bulletList' || node.type.name === 'orderedList') {\n\t\t\t\tisInList = true\n\t\t\t\treturn false // Stop iteration\n\t\t\t}\n\t\t})\n\n\t\t// TODO: for now skip over lists. Later, we might consider handling them using\n\t\t// sinkListItem and liftListItem from @tiptap/pm/schema-list\n\t\tif (!isInList) {\n\t\t\tif (!isShift) {\n\t\t\t\t// Insert a tab character at the start of the line\n\t\t\t\ttr = tr.insertText('\\t', lineStart + 1)\n\t\t\t} else {\n\t\t\t\t// Remove a tab character from the start of the line\n\t\t\t\tif (lineText.startsWith('\\t')) {\n\t\t\t\t\ttr = tr.delete(lineStart + 1, lineStart + 2)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpos = lineStart - 1\n\t}\n\n\tconst mappedSelection = state.selection.map(tr.doc, tr.mapping)\n\ttr.setSelection(mappedSelection)\n\n\tif (tr.docChanged) {\n\t\tdispatch(tr)\n\t}\n}\n"],"names":["RichTextArea"],"mappings":"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"}},
    {"offset": {"line": 5525, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/text/TextShapeUtil.tsx"],"sourcesContent":["/* eslint-disable react-hooks/rules-of-hooks */\nimport {\n\tBox,\n\tEditor,\n\tRectangle2d,\n\tShapeUtil,\n\tSvgExportContext,\n\tTLGeometryOpts,\n\tTLResizeInfo,\n\tTLShapeId,\n\tTLTextShape,\n\tVec,\n\tcreateComputedCache,\n\tgetColorValue,\n\tgetDefaultColorTheme,\n\tgetFontsFromRichText,\n\tisEqual,\n\tresizeScaled,\n\ttextShapeMigrations,\n\ttextShapeProps,\n\ttoDomPrecision,\n\ttoRichText,\n\tuseEditor,\n} from '@tldraw/editor'\nimport { useCallback } from 'react'\nimport {\n\trenderHtmlFromRichTextForMeasurement,\n\trenderPlaintextFromRichText,\n} from '../../utils/text/richText'\nimport { RichTextLabel, RichTextSVG } from '../shared/RichTextLabel'\nimport { FONT_FAMILIES, FONT_SIZES, TEXT_PROPS } from '../shared/default-shape-constants'\nimport { useDefaultColorTheme } from '../shared/useDefaultColorTheme'\n\nconst sizeCache = createComputedCache(\n\t'text size',\n\t(editor: Editor, shape: TLTextShape) => {\n\t\teditor.fonts.trackFontsForShape(shape)\n\t\treturn getTextSize(editor, shape.props)\n\t},\n\t{ areRecordsEqual: (a, b) => a.props === b.props }\n)\n/** @public */\nexport interface TextShapeOptions {\n\t/** How much addition padding should be added to the horizontal geometry of the shape when binding to an arrow? */\n\textraArrowHorizontalPadding: number\n\t/** Whether to show the outline of the text shape (using the same color as the canvas). This helps with overlapping shapes. It does not show up on Safari, where text outline is a performance issues. */\n\tshowTextOutline: boolean\n}\n\n/** @public */\nexport class TextShapeUtil extends ShapeUtil<TLTextShape> {\n\tstatic override type = 'text' as const\n\tstatic override props = textShapeProps\n\tstatic override migrations = textShapeMigrations\n\n\toverride options: TextShapeOptions = {\n\t\textraArrowHorizontalPadding: 10,\n\t\tshowTextOutline: true,\n\t}\n\n\tgetDefaultProps(): TLTextShape['props'] {\n\t\treturn {\n\t\t\tcolor: 'black',\n\t\t\tsize: 'm',\n\t\t\tw: 8,\n\t\t\tfont: 'draw',\n\t\t\ttextAlign: 'start',\n\t\t\tautoSize: true,\n\t\t\tscale: 1,\n\t\t\trichText: toRichText(''),\n\t\t}\n\t}\n\n\tgetMinDimensions(shape: TLTextShape) {\n\t\treturn sizeCache.get(this.editor, shape.id)!\n\t}\n\n\tgetGeometry(shape: TLTextShape, opts: TLGeometryOpts) {\n\t\tconst { scale } = shape.props\n\t\tconst { width, height } = this.getMinDimensions(shape)!\n\t\tconst context = opts?.context ?? 'none'\n\t\treturn new Rectangle2d({\n\t\t\tx:\n\t\t\t\t(context === '@tldraw/arrow-without-arrowhead'\n\t\t\t\t\t? -this.options.extraArrowHorizontalPadding\n\t\t\t\t\t: 0) * scale,\n\t\t\twidth:\n\t\t\t\t(width +\n\t\t\t\t\t(context === '@tldraw/arrow-without-arrowhead'\n\t\t\t\t\t\t? this.options.extraArrowHorizontalPadding * 2\n\t\t\t\t\t\t: 0)) *\n\t\t\t\tscale,\n\t\t\theight: height * scale,\n\t\t\tisFilled: true,\n\t\t\tisLabel: true,\n\t\t})\n\t}\n\n\toverride getFontFaces(shape: TLTextShape) {\n\t\t// no need for an empty rich text check here\n\t\treturn getFontsFromRichText(this.editor, shape.props.richText, {\n\t\t\tfamily: `tldraw_${shape.props.font}`,\n\t\t\tweight: 'normal',\n\t\t\tstyle: 'normal',\n\t\t})\n\t}\n\n\toverride getText(shape: TLTextShape) {\n\t\treturn renderPlaintextFromRichText(this.editor, shape.props.richText)\n\t}\n\n\toverride canEdit() {\n\t\treturn true\n\t}\n\n\toverride isAspectRatioLocked() {\n\t\treturn true\n\t} // WAIT NO THIS IS HARD CODED IN THE RESIZE HANDLER\n\n\tcomponent(shape: TLTextShape) {\n\t\tconst {\n\t\t\tid,\n\t\t\tprops: { font, size, richText, color, scale, textAlign },\n\t\t} = shape\n\n\t\tconst { width, height } = this.getMinDimensions(shape)\n\t\tconst isSelected = shape.id === this.editor.getOnlySelectedShapeId()\n\t\tconst theme = useDefaultColorTheme()\n\t\tconst handleKeyDown = useTextShapeKeydownHandler(id)\n\n\t\treturn (\n\t\t\t<RichTextLabel\n\t\t\t\tshapeId={id}\n\t\t\t\tclassNamePrefix=\"tl-text-shape\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tfont={font}\n\t\t\t\tfontSize={FONT_SIZES[size]}\n\t\t\t\tlineHeight={TEXT_PROPS.lineHeight}\n\t\t\t\talign={textAlign}\n\t\t\t\tverticalAlign=\"middle\"\n\t\t\t\trichText={richText}\n\t\t\t\tlabelColor={getColorValue(theme, color, 'solid')}\n\t\t\t\tisSelected={isSelected}\n\t\t\t\ttextWidth={width}\n\t\t\t\ttextHeight={height}\n\t\t\t\tshowTextOutline={this.options.showTextOutline}\n\t\t\t\tstyle={{\n\t\t\t\t\ttransform: `scale(${scale})`,\n\t\t\t\t\ttransformOrigin: 'top left',\n\t\t\t\t}}\n\t\t\t\twrap\n\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t/>\n\t\t)\n\t}\n\n\tindicator(shape: TLTextShape) {\n\t\tconst bounds = this.editor.getShapeGeometry(shape).bounds\n\t\tconst editor = useEditor()\n\t\tif (shape.props.autoSize && editor.getEditingShapeId() === shape.id) return null\n\t\treturn <rect width={toDomPrecision(bounds.width)} height={toDomPrecision(bounds.height)} />\n\t}\n\n\toverride useLegacyIndicator() {\n\t\treturn false\n\t}\n\n\toverride getIndicatorPath(shape: TLTextShape): Path2D | undefined {\n\t\tif (shape.props.autoSize && this.editor.getEditingShapeId() === shape.id) return undefined\n\t\tconst bounds = this.editor.getShapeGeometry(shape).bounds\n\t\tconst path = new Path2D()\n\t\tpath.rect(0, 0, bounds.width, bounds.height)\n\t\treturn path\n\t}\n\n\toverride toSvg(shape: TLTextShape, ctx: SvgExportContext) {\n\t\tconst bounds = this.editor.getShapeGeometry(shape).bounds\n\t\tconst width = bounds.width / (shape.props.scale ?? 1)\n\t\tconst height = bounds.height / (shape.props.scale ?? 1)\n\n\t\tconst theme = getDefaultColorTheme(ctx)\n\n\t\tconst exportBounds = new Box(0, 0, width, height)\n\t\treturn (\n\t\t\t<RichTextSVG\n\t\t\t\tfontSize={FONT_SIZES[shape.props.size]}\n\t\t\t\tfont={shape.props.font}\n\t\t\t\talign={shape.props.textAlign}\n\t\t\t\tverticalAlign=\"middle\"\n\t\t\t\trichText={shape.props.richText}\n\t\t\t\tlabelColor={getColorValue(theme, shape.props.color, 'solid')}\n\t\t\t\tbounds={exportBounds}\n\t\t\t\tpadding={0}\n\t\t\t\tshowTextOutline={this.options.showTextOutline}\n\t\t\t/>\n\t\t)\n\t}\n\n\toverride onResize(shape: TLTextShape, info: TLResizeInfo<TLTextShape>) {\n\t\tconst { newPoint, initialBounds, initialShape, scaleX, handle } = info\n\n\t\tif (info.mode === 'scale_shape' || (handle !== 'right' && handle !== 'left')) {\n\t\t\treturn {\n\t\t\t\tid: shape.id,\n\t\t\t\ttype: shape.type,\n\t\t\t\t...resizeScaled(shape, info),\n\t\t\t}\n\t\t} else {\n\t\t\tconst nextWidth = Math.max(1, Math.abs(initialBounds.width * scaleX))\n\t\t\tconst { x, y } =\n\t\t\t\tscaleX < 0 ? Vec.Sub(newPoint, Vec.FromAngle(shape.rotation).mul(nextWidth)) : newPoint\n\n\t\t\treturn {\n\t\t\t\tid: shape.id,\n\t\t\t\ttype: shape.type,\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t\tprops: {\n\t\t\t\t\tw: nextWidth / initialShape.props.scale,\n\t\t\t\t\tautoSize: false,\n\t\t\t\t},\n\t\t\t}\n\t\t}\n\t}\n\n\toverride onEditEnd(shape: TLTextShape) {\n\t\t// todo: find a way to check if the rich text has any nodes that aren't empty spaces\n\t\tconst trimmedText = renderPlaintextFromRichText(this.editor, shape.props.richText).trimEnd()\n\n\t\tif (trimmedText.length === 0) {\n\t\t\tthis.editor.deleteShapes([shape.id])\n\t\t}\n\t}\n\n\toverride onBeforeUpdate(prev: TLTextShape, next: TLTextShape) {\n\t\tif (!next.props.autoSize) return\n\n\t\tconst styleDidChange =\n\t\t\tprev.props.size !== next.props.size ||\n\t\t\tprev.props.textAlign !== next.props.textAlign ||\n\t\t\tprev.props.font !== next.props.font ||\n\t\t\t(prev.props.scale !== 1 && next.props.scale === 1)\n\n\t\tconst textDidChange = !isEqual(prev.props.richText, next.props.richText)\n\n\t\t// Only update position if either changed\n\t\tif (!styleDidChange && !textDidChange) return\n\n\t\t// Might return a cached value for the bounds\n\t\tconst boundsA = this.getMinDimensions(prev)\n\n\t\t// Will always be a fresh call to getTextSize\n\t\tconst boundsB = getTextSize(this.editor, next.props)\n\n\t\tconst wA = boundsA.width * prev.props.scale\n\t\tconst hA = boundsA.height * prev.props.scale\n\t\tconst wB = boundsB.width * next.props.scale\n\t\tconst hB = boundsB.height * next.props.scale\n\n\t\tlet delta: Vec | undefined\n\n\t\tswitch (next.props.textAlign) {\n\t\t\tcase 'middle': {\n\t\t\t\tdelta = new Vec((wB - wA) / 2, textDidChange ? 0 : (hB - hA) / 2)\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase 'end': {\n\t\t\t\tdelta = new Vec(wB - wA, textDidChange ? 0 : (hB - hA) / 2)\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tif (textDidChange) break\n\t\t\t\tdelta = new Vec(0, (hB - hA) / 2)\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tif (delta) {\n\t\t\t// account for shape rotation when writing text:\n\t\t\tdelta.rot(next.rotation)\n\t\t\tconst { x, y } = next\n\t\t\treturn {\n\t\t\t\t...next,\n\t\t\t\tx: x - delta.x,\n\t\t\t\ty: y - delta.y,\n\t\t\t\tprops: { ...next.props, w: wB },\n\t\t\t}\n\t\t} else {\n\t\t\treturn {\n\t\t\t\t...next,\n\t\t\t\tprops: { ...next.props, w: wB },\n\t\t\t}\n\t\t}\n\t}\n\n\t// \ttodo: The edge doubleclicking feels like a mistake more often than\n\t//  not, especially on multiline text. Removed June 16 2024\n\n\t// override onDoubleClickEdge = (shape: TLTextShape) => {\n\t// \t// If the shape has a fixed width, set it to autoSize.\n\t// \tif (!shape.props.autoSize) {\n\t// \t\treturn {\n\t// \t\t\tid: shape.id,\n\t// \t\t\ttype: shape.type,\n\t// \t\t\tprops: {\n\t// \t\t\t\tautoSize: true,\n\t// \t\t\t},\n\t// \t\t}\n\t// \t}\n\t// \t// If the shape is scaled, reset the scale to 1.\n\t// \tif (shape.props.scale !== 1) {\n\t// \t\treturn {\n\t// \t\t\tid: shape.id,\n\t// \t\t\ttype: shape.type,\n\t// \t\t\tprops: {\n\t// \t\t\t\tscale: 1,\n\t// \t\t\t},\n\t// \t\t}\n\t// \t}\n\t// }\n}\n\nfunction getTextSize(editor: Editor, props: TLTextShape['props']) {\n\tconst { font, richText, size, w } = props\n\n\tconst minWidth = 16\n\tconst fontSize = FONT_SIZES[size]\n\n\tconst maybeFixedWidth = props.autoSize ? null : Math.max(minWidth, Math.floor(w))\n\n\tconst html = renderHtmlFromRichTextForMeasurement(editor, richText)\n\tconst result = editor.textMeasure.measureHtml(html, {\n\t\t...TEXT_PROPS,\n\t\tfontFamily: FONT_FAMILIES[font],\n\t\tfontSize: fontSize,\n\t\tmaxWidth: maybeFixedWidth,\n\t})\n\n\t// If we're autosizing the measureText will essentially `Math.floor`\n\t// the numbers so `19` rather than `19.3`, this means we must +1 to\n\t// whatever we get to avoid wrapping.\n\treturn {\n\t\twidth: maybeFixedWidth ?? Math.max(minWidth, result.w + 1),\n\t\theight: Math.max(fontSize, result.h),\n\t}\n}\n\nfunction useTextShapeKeydownHandler(id: TLShapeId) {\n\tconst editor = useEditor()\n\n\treturn useCallback(\n\t\t(e: KeyboardEvent) => {\n\t\t\tif (editor.getEditingShapeId() !== id) return\n\n\t\t\tswitch (e.key) {\n\t\t\t\tcase 'Enter': {\n\t\t\t\t\tif (e.ctrlKey || e.metaKey) {\n\t\t\t\t\t\teditor.complete()\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[editor, id]\n\t)\n}\n"],"names":[],"mappings":";;;;AAmIG;;;;;;;;;;;;AAlIH;AAuBA,SAAS,mBAAmB;AAC5B;AAIA,SAAS,eAAe,mBAAmB;AAC3C,SAAS,eAAe,YAAY,kBAAkB;AACtD,SAAS,4BAA4B;;;;;;;;AAErC,MAAM,gBAAY,sOAAA,EACjB,aACA,CAAC,QAAgB,UAAuB;IACvC,OAAO,KAAA,CAAM,kBAAA,CAAmB,KAAK;IACrC,OAAO,YAAY,QAAQ,MAAM,KAAK;AACvC,GACA;IAAE,iBAAiB,CAAC,GAAG,IAAM,EAAE,KAAA,KAAU,EAAE,KAAA;AAAM;AAW3C,MAAM,sBAAsB,4PAAA,CAAuB;IACzD,OAAgB,OAAO,OAAA;IACvB,OAAgB,QAAQ,oOAAA,CAAA;IACxB,OAAgB,aAAa,yOAAA,CAAA;IAEpB,UAA4B;QACpC,6BAA6B;QAC7B,iBAAiB;IAClB,EAAA;IAEA,kBAAwC;QACvC,OAAO;YACN,OAAO;YACP,MAAM;YACN,GAAG;YACH,MAAM;YACN,WAAW;YACX,UAAU;YACV,OAAO;YACP,cAAU,gOAAA,EAAW,EAAE;QACxB;IACD;IAEA,iBAAiB,KAAA,EAAoB;QACpC,OAAO,UAAU,GAAA,CAAI,IAAA,CAAK,MAAA,EAAQ,MAAM,EAAE;IAC3C;IAEA,YAAY,KAAA,EAAoB,IAAA,EAAsB;QACrD,MAAM,EAAE,KAAA,CAAM,CAAA,GAAI,MAAM,KAAA;QACxB,MAAM,EAAE,KAAA,EAAO,MAAA,CAAO,CAAA,GAAI,IAAA,CAAK,gBAAA,CAAiB,KAAK;QACrD,MAAM,UAAU,MAAM,WAAW;QACjC,OAAO,IAAI,sQAAA,CAAY;YACtB,GAAA,CACE,YAAY,oCACV,CAAC,IAAA,CAAK,OAAA,CAAQ,2BAAA,GACd,CAAA,IAAK;YACT,OAAA,CACE,QAAA,CACC,YAAY,oCACV,IAAA,CAAK,OAAA,CAAQ,2BAAA,GAA8B,IAC3C,CAAA,CAAA,IACJ;YACD,QAAQ,SAAS;YACjB,UAAU;YACV,SAAS;QACV,CAAC;IACF;IAES,aAAa,KAAA,EAAoB;QAEzC,WAAO,2PAAA,EAAqB,IAAA,CAAK,MAAA,EAAQ,MAAM,KAAA,CAAM,QAAA,EAAU;YAC9D,QAAQ,CAAA,OAAA,EAAU,MAAM,KAAA,CAAM,IAAI,EAAA;YAClC,QAAQ;YACR,OAAO;QACR,CAAC;IACF;IAES,QAAQ,KAAA,EAAoB;QACpC,WAAO,8PAAA,EAA4B,IAAA,CAAK,MAAA,EAAQ,MAAM,KAAA,CAAM,QAAQ;IACrE;IAES,UAAU;QAClB,OAAO;IACR;IAES,sBAAsB;QAC9B,OAAO;IACR;IAAA,mDAAA;IAEA,UAAU,KAAA,EAAoB;QAC7B,MAAM,EACL,EAAA,EACA,OAAO,EAAE,IAAA,EAAM,IAAA,EAAM,QAAA,EAAU,KAAA,EAAO,KAAA,EAAO,SAAA,CAAU,CAAA,EACxD,GAAI;QAEJ,MAAM,EAAE,KAAA,EAAO,MAAA,CAAO,CAAA,GAAI,IAAA,CAAK,gBAAA,CAAiB,KAAK;QACrD,MAAM,aAAa,MAAM,EAAA,KAAO,IAAA,CAAK,MAAA,CAAO,sBAAA,CAAuB;QACnE,MAAM,YAAQ,sQAAA,CAAqB;QACnC,MAAM,gBAAgB,2BAA2B,EAAE;QAEnD,OACC,aAAA,GAAA,IAAA,+NAAA,EAAC,wPAAA,EAAA;YACA,SAAS;YACT,iBAAgB;YAChB,MAAK;YACL;YACA,UAAU,qQAAA,CAAW,IAAI,CAAA;YACzB,YAAY,qQAAA,CAAW,UAAA;YACvB,OAAO;YACP,eAAc;YACd;YACA,gBAAY,mOAAA,EAAc,OAAO,OAAO,OAAO;YAC/C;YACA,WAAW;YACX,YAAY;YACZ,iBAAiB,IAAA,CAAK,OAAA,CAAQ,eAAA;YAC9B,OAAO;gBACN,WAAW,CAAA,MAAA,EAAS,KAAK,CAAA,CAAA,CAAA;gBACzB,iBAAiB;YAClB;YACA,MAAI;YACJ,WAAW;QAAA;IAGd;IAEA,UAAU,KAAA,EAAoB;QAC7B,MAAM,SAAS,IAAA,CAAK,MAAA,CAAO,gBAAA,CAAiB,KAAK,EAAE,MAAA;QACnD,MAAM,aAAS,iPAAA,CAAU;QACzB,IAAI,MAAM,KAAA,CAAM,QAAA,IAAY,OAAO,iBAAA,CAAkB,MAAM,MAAM,EAAA,CAAI,CAAA,OAAO;QAC5E,OAAO,aAAA,GAAA,IAAA,+NAAA,EAAC,QAAA;YAAK,WAAO,uPAAA,EAAe,OAAO,KAAK;YAAG,YAAQ,uPAAA,EAAe,OAAO,MAAM;QAAA,CAAG;IAC1F;IAES,qBAAqB;QAC7B,OAAO;IACR;IAES,iBAAiB,KAAA,EAAwC;QACjE,IAAI,MAAM,KAAA,CAAM,QAAA,IAAY,IAAA,CAAK,MAAA,CAAO,iBAAA,CAAkB,MAAM,MAAM,EAAA,CAAI,CAAA,OAAO,KAAA;QACjF,MAAM,SAAS,IAAA,CAAK,MAAA,CAAO,gBAAA,CAAiB,KAAK,EAAE,MAAA;QACnD,MAAM,OAAO,IAAI,OAAO;QACxB,KAAK,IAAA,CAAK,GAAG,GAAG,OAAO,KAAA,EAAO,OAAO,MAAM;QAC3C,OAAO;IACR;IAES,MAAM,KAAA,EAAoB,GAAA,EAAuB;QACzD,MAAM,SAAS,IAAA,CAAK,MAAA,CAAO,gBAAA,CAAiB,KAAK,EAAE,MAAA;QACnD,MAAM,QAAQ,OAAO,KAAA,GAAA,CAAS,MAAM,KAAA,CAAM,KAAA,IAAS,CAAA;QACnD,MAAM,SAAS,OAAO,MAAA,GAAA,CAAU,MAAM,KAAA,CAAM,KAAA,IAAS,CAAA;QAErD,MAAM,YAAQ,0OAAA,EAAqB,GAAG;QAEtC,MAAM,eAAe,IAAI,0OAAA,CAAI,GAAG,GAAG,OAAO,MAAM;QAChD,OACC,aAAA,GAAA,IAAA,+NAAA,EAAC,sPAAA,EAAA;YACA,UAAU,qQAAA,CAAW,MAAM,KAAA,CAAM,IAAI,CAAA;YACrC,MAAM,MAAM,KAAA,CAAM,IAAA;YAClB,OAAO,MAAM,KAAA,CAAM,SAAA;YACnB,eAAc;YACd,UAAU,MAAM,KAAA,CAAM,QAAA;YACtB,gBAAY,mOAAA,EAAc,OAAO,MAAM,KAAA,CAAM,KAAA,EAAO,OAAO;YAC3D,QAAQ;YACR,SAAS;YACT,iBAAiB,IAAA,CAAK,OAAA,CAAQ,eAAA;QAAA;IAGjC;IAES,SAAS,KAAA,EAAoB,IAAA,EAAiC;QACtE,MAAM,EAAE,QAAA,EAAU,aAAA,EAAe,YAAA,EAAc,MAAA,EAAQ,MAAA,CAAO,CAAA,GAAI;QAElE,IAAI,KAAK,IAAA,KAAS,iBAAkB,WAAW,WAAW,WAAW,QAAS;YAC7E,OAAO;gBACN,IAAI,MAAM,EAAA;gBACV,MAAM,MAAM,IAAA;gBACZ,OAAG,4QAAA,EAAa,OAAO,IAAI,CAAA;YAC5B;QACD,OAAO;YACN,MAAM,YAAY,KAAK,GAAA,CAAI,GAAG,KAAK,GAAA,CAAI,cAAc,KAAA,GAAQ,MAAM,CAAC;YACpE,MAAM,EAAE,CAAA,EAAG,CAAA,CAAE,CAAA,GACZ,SAAS,IAAI,0OAAA,CAAI,GAAA,CAAI,UAAU,0OAAA,CAAI,SAAA,CAAU,MAAM,QAAQ,EAAE,GAAA,CAAI,SAAS,CAAC,IAAI;YAEhF,OAAO;gBACN,IAAI,MAAM,EAAA;gBACV,MAAM,MAAM,IAAA;gBACZ;gBACA;gBACA,OAAO;oBACN,GAAG,YAAY,aAAa,KAAA,CAAM,KAAA;oBAClC,UAAU;gBACX;YACD;QACD;IACD;IAES,UAAU,KAAA,EAAoB;QAEtC,MAAM,kBAAc,8PAAA,EAA4B,IAAA,CAAK,MAAA,EAAQ,MAAM,KAAA,CAAM,QAAQ,EAAE,OAAA,CAAQ;QAE3F,IAAI,YAAY,MAAA,KAAW,GAAG;YAC7B,IAAA,CAAK,MAAA,CAAO,YAAA,CAAa;gBAAC,MAAM,EAAE;aAAC;QACpC;IACD;IAES,eAAe,IAAA,EAAmB,IAAA,EAAmB;QAC7D,IAAI,CAAC,KAAK,KAAA,CAAM,QAAA,CAAU,CAAA;QAE1B,MAAM,iBACL,KAAK,KAAA,CAAM,IAAA,KAAS,KAAK,KAAA,CAAM,IAAA,IAC/B,KAAK,KAAA,CAAM,SAAA,KAAc,KAAK,KAAA,CAAM,SAAA,IACpC,KAAK,KAAA,CAAM,IAAA,KAAS,KAAK,KAAA,CAAM,IAAA,IAC9B,KAAK,KAAA,CAAM,KAAA,KAAU,KAAK,KAAK,KAAA,CAAM,KAAA,KAAU;QAEjD,MAAM,gBAAgB,KAAC,0NAAA,EAAQ,KAAK,KAAA,CAAM,QAAA,EAAU,KAAK,KAAA,CAAM,QAAQ;QAGvE,IAAI,CAAC,kBAAkB,CAAC,cAAe,CAAA;QAGvC,MAAM,UAAU,IAAA,CAAK,gBAAA,CAAiB,IAAI;QAG1C,MAAM,UAAU,YAAY,IAAA,CAAK,MAAA,EAAQ,KAAK,KAAK;QAEnD,MAAM,KAAK,QAAQ,KAAA,GAAQ,KAAK,KAAA,CAAM,KAAA;QACtC,MAAM,KAAK,QAAQ,MAAA,GAAS,KAAK,KAAA,CAAM,KAAA;QACvC,MAAM,KAAK,QAAQ,KAAA,GAAQ,KAAK,KAAA,CAAM,KAAA;QACtC,MAAM,KAAK,QAAQ,MAAA,GAAS,KAAK,KAAA,CAAM,KAAA;QAEvC,IAAI;QAEJ,OAAQ,KAAK,KAAA,CAAM,SAAA,EAAW;YAC7B,KAAK;gBAAU;oBACd,QAAQ,IAAI,0OAAA,CAAA,CAAK,KAAK,EAAA,IAAM,GAAG,gBAAgB,IAAA,CAAK,KAAK,EAAA,IAAM,CAAC;oBAChE;gBACD;YACA,KAAK;gBAAO;oBACX,QAAQ,IAAI,0OAAA,CAAI,KAAK,IAAI,gBAAgB,IAAA,CAAK,KAAK,EAAA,IAAM,CAAC;oBAC1D;gBACD;YACA;gBAAS;oBACR,IAAI,cAAe,CAAA;oBACnB,QAAQ,IAAI,0OAAA,CAAI,GAAA,CAAI,KAAK,EAAA,IAAM,CAAC;oBAChC;gBACD;QACD;QAEA,IAAI,OAAO;YAEV,MAAM,GAAA,CAAI,KAAK,QAAQ;YACvB,MAAM,EAAE,CAAA,EAAG,CAAA,CAAE,CAAA,GAAI;YACjB,OAAO;gBACN,GAAG,IAAA;gBACH,GAAG,IAAI,MAAM,CAAA;gBACb,GAAG,IAAI,MAAM,CAAA;gBACb,OAAO;oBAAE,GAAG,KAAK,KAAA;oBAAO,GAAG;gBAAG;YAC/B;QACD,OAAO;YACN,OAAO;gBACN,GAAG,IAAA;gBACH,OAAO;oBAAE,GAAG,KAAK,KAAA;oBAAO,GAAG;gBAAG;YAC/B;QACD;IACD;AA2BD;AAEA,SAAS,YAAY,MAAA,EAAgB,KAAA,EAA6B;IACjE,MAAM,EAAE,IAAA,EAAM,QAAA,EAAU,IAAA,EAAM,CAAA,CAAE,CAAA,GAAI;IAEpC,MAAM,WAAW;IACjB,MAAM,WAAW,qQAAA,CAAW,IAAI,CAAA;IAEhC,MAAM,kBAAkB,MAAM,QAAA,GAAW,OAAO,KAAK,GAAA,CAAI,UAAU,KAAK,KAAA,CAAM,CAAC,CAAC;IAEhF,MAAM,WAAO,uQAAA,EAAqC,QAAQ,QAAQ;IAClE,MAAM,SAAS,OAAO,WAAA,CAAY,WAAA,CAAY,MAAM;QACnD,GAAG,qQAAA;QACH,YAAY,wQAAA,CAAc,IAAI,CAAA;QAC9B;QACA,UAAU;IACX,CAAC;IAKD,OAAO;QACN,OAAO,mBAAmB,KAAK,GAAA,CAAI,UAAU,OAAO,CAAA,GAAI,CAAC;QACzD,QAAQ,KAAK,GAAA,CAAI,UAAU,OAAO,CAAC;IACpC;AACD;AAEA,SAAS,2BAA2B,EAAA,EAAe;IAClD,MAAM,aAAS,iPAAA,CAAU;IAEzB,WAAO,8NAAA;kDACN,CAAC,MAAqB;YACrB,IAAI,OAAO,iBAAA,CAAkB,MAAM,GAAI,CAAA;YAEvC,OAAQ,EAAE,GAAA,EAAK;gBACd,KAAK;oBAAS;wBACb,IAAI,EAAE,OAAA,IAAW,EAAE,OAAA,EAAS;4BAC3B,OAAO,QAAA,CAAS;wBACjB;wBACA;oBACD;YACD;QACD;iDACA;QAAC;QAAQ,EAAE;KAAA;AAEb"}},
    {"offset": {"line": 5805, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/text/PlainTextArea.tsx"],"sourcesContent":["import { preventDefault, useEditor } from '@tldraw/editor'\nimport React from 'react'\nimport { TextAreaProps } from './RichTextArea'\n\n/**\n * A plain text area that can be used for basic editing text.\n *\n * @public @react\n */\nexport const PlainTextArea = React.forwardRef<HTMLTextAreaElement, TextAreaProps>(function TextArea(\n\t{\n\t\tisEditing,\n\t\ttext,\n\t\thandleFocus,\n\t\thandleChange,\n\t\thandleKeyDown,\n\t\thandlePaste,\n\t\thandleBlur,\n\t\thandleInputPointerDown,\n\t\thandleDoubleClick,\n\t},\n\tref\n) {\n\tconst editor = useEditor()\n\tconst onChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n\t\thandleChange({ plaintext: e.target.value })\n\t}\n\n\treturn (\n\t\t<textarea\n\t\t\tref={ref}\n\t\t\tclassName=\"tl-text tl-text-input\"\n\t\t\tname=\"text\"\n\t\t\ttabIndex={-1}\n\t\t\tdisabled={!isEditing}\n\t\t\treadOnly={!isEditing}\n\t\t\tautoComplete=\"off\"\n\t\t\tautoCapitalize=\"off\"\n\t\t\tautoCorrect=\"off\"\n\t\t\tautoSave=\"off\"\n\t\t\tplaceholder=\"\"\n\t\t\tspellCheck=\"true\"\n\t\t\twrap=\"off\"\n\t\t\tdir=\"auto\"\n\t\t\tdefaultValue={text}\n\t\t\tonFocus={handleFocus}\n\t\t\tonChange={onChange}\n\t\t\tonKeyDown={(e) => handleKeyDown(e.nativeEvent)}\n\t\t\tonBlur={handleBlur}\n\t\t\tonTouchEnd={editor.markEventAsHandled}\n\t\t\tonContextMenu={isEditing ? (e) => e.stopPropagation() : undefined}\n\t\t\tonPointerDown={handleInputPointerDown}\n\t\t\tonPaste={handlePaste}\n\t\t\tonDoubleClick={handleDoubleClick}\n\t\t\t// On FF, there's a behavior where dragging a selection will grab that selection into\n\t\t\t// the drag event. However, once the drag is over, and you select away from the textarea,\n\t\t\t// starting a drag over the textarea will restart a selection drag instead of a shape drag.\n\t\t\t// This prevents that default behavior in FF.\n\t\t\tonDragStart={preventDefault}\n\t\t/>\n\t)\n})\n"],"names":[],"mappings":";;;;AA6BE;;;AA7BF,SAAS,gBAAgB,iBAAiB;AAC1C,OAAO,WAAW;;;;AAQX,MAAM,gBAAgB,0NAAA,CAAM,UAAA,CAA+C,SAAS,SAC1F,EACC,SAAA,EACA,IAAA,EACA,WAAA,EACA,YAAA,EACA,aAAA,EACA,WAAA,EACA,UAAA,EACA,sBAAA,EACA,iBAAA,EACD,EACA,GAAA,EACC;IACD,MAAM,aAAS,iPAAA,CAAU;IACzB,MAAM,WAAW,CAAC,MAA8C;QAC/D,aAAa;YAAE,WAAW,EAAE,MAAA,CAAO,KAAA;QAAM,CAAC;IAC3C;IAEA,OACC,aAAA,GAAA,IAAA,+NAAA,EAAC,YAAA;QACA;QACA,WAAU;QACV,MAAK;QACL,UAAU,CAAA;QACV,UAAU,CAAC;QACX,UAAU,CAAC;QACX,cAAa;QACb,gBAAe;QACf,aAAY;QACZ,UAAS;QACT,aAAY;QACZ,YAAW;QACX,MAAK;QACL,KAAI;QACJ,cAAc;QACd,SAAS;QACT;QACA,WAAW,CAAC,IAAM,cAAc,EAAE,WAAW;QAC7C,QAAQ;QACR,YAAY,OAAO,kBAAA;QACnB,eAAe,YAAY,CAAC,IAAM,EAAE,eAAA,CAAgB,IAAI,KAAA;QACxD,eAAe;QACf,SAAS;QACT,eAAe;QAKf,aAAa,gPAAA;IAAA;AAGhB,CAAC"}},
    {"offset": {"line": 5858, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/embed/EmbedShapeUtil.tsx"],"sourcesContent":["/* eslint-disable react-hooks/rules-of-hooks */\n\nimport {\n\tBaseBoxShapeUtil,\n\tHTMLContainer,\n\tRectangle2d,\n\tTLEmbedShape,\n\tTLEmbedShapeProps,\n\tTLResizeInfo,\n\tembedShapeMigrations,\n\tembedShapeProps,\n\tlerp,\n\tresizeBox,\n\ttoDomPrecision,\n\tuseIsEditing,\n\tuseSvgExportContext,\n\tuseValue,\n} from '@tldraw/editor'\n\nimport {\n\tDEFAULT_EMBED_DEFINITIONS,\n\tEmbedDefinition,\n\tTLEmbedDefinition,\n\tTLEmbedShapePermissions,\n\tembedShapePermissionDefaults,\n} from '../../defaultEmbedDefinitions'\nimport { TLEmbedResult, getEmbedInfo } from '../../utils/embeds/embeds'\nimport { BookmarkIndicatorComponent, BookmarkShapeComponent } from '../bookmark/BookmarkShapeUtil'\nimport { BOOKMARK_JUST_URL_HEIGHT, BOOKMARK_WIDTH } from '../bookmark/bookmarks'\nimport { getRotatedBoxShadow } from '../shared/rotated-box-shadow'\n\nconst getSandboxPermissions = (permissions: TLEmbedShapePermissions) => {\n\treturn Object.entries(permissions)\n\t\t.filter(([_perm, isEnabled]) => isEnabled)\n\t\t.map(([perm]) => perm)\n\t\t.join(' ')\n}\n\n/** @public */\nexport class EmbedShapeUtil extends BaseBoxShapeUtil<TLEmbedShape> {\n\tstatic override type = 'embed' as const\n\tstatic override props = embedShapeProps\n\tstatic override migrations = embedShapeMigrations\n\tprivate static embedDefinitions: readonly EmbedDefinition[] = DEFAULT_EMBED_DEFINITIONS\n\n\toverride canEditWhileLocked(shape: TLEmbedShape) {\n\t\tconst result = this.getEmbedDefinition(shape.props.url)\n\t\tif (!result) return true\n\t\treturn result.definition.canEditWhileLocked ?? true\n\t}\n\n\tstatic setEmbedDefinitions(embedDefinitions: readonly TLEmbedDefinition[]) {\n\t\tEmbedShapeUtil.embedDefinitions = embedDefinitions\n\t}\n\n\tgetEmbedDefinitions(): readonly TLEmbedDefinition[] {\n\t\treturn EmbedShapeUtil.embedDefinitions\n\t}\n\n\tgetEmbedDefinition(url: string): TLEmbedResult {\n\t\treturn getEmbedInfo(EmbedShapeUtil.embedDefinitions, url)\n\t}\n\n\toverride getText(shape: TLEmbedShape) {\n\t\treturn shape.props.url\n\t}\n\n\toverride getAriaDescriptor(shape: TLEmbedShape) {\n\t\tconst embedInfo = this.getEmbedDefinition(shape.props.url)\n\t\treturn embedInfo?.definition.title\n\t}\n\n\toverride hideSelectionBoundsFg(shape: TLEmbedShape) {\n\t\treturn !this.canResize(shape)\n\t}\n\toverride canEdit() {\n\t\treturn true\n\t}\n\toverride canResize(shape: TLEmbedShape) {\n\t\treturn !!this.getEmbedDefinition(shape.props.url)?.definition?.doesResize\n\t}\n\toverride canEditInReadonly() {\n\t\treturn true\n\t}\n\n\toverride getDefaultProps(): TLEmbedShape['props'] {\n\t\treturn {\n\t\t\tw: 300,\n\t\t\th: 300,\n\t\t\turl: '',\n\t\t}\n\t}\n\n\toverride getGeometry(shape: TLEmbedShape) {\n\t\tconst embedInfo = this.getEmbedDefinition(shape.props.url)\n\t\tif (!embedInfo?.definition) {\n\t\t\treturn new Rectangle2d({\n\t\t\t\twidth: BOOKMARK_WIDTH,\n\t\t\t\theight: BOOKMARK_JUST_URL_HEIGHT,\n\t\t\t\tisFilled: true,\n\t\t\t})\n\t\t}\n\t\treturn super.getGeometry(shape)\n\t}\n\n\toverride isAspectRatioLocked(shape: TLEmbedShape) {\n\t\tconst embedInfo = this.getEmbedDefinition(shape.props.url)\n\t\treturn embedInfo?.definition.isAspectRatioLocked ?? false\n\t}\n\n\toverride onResize(shape: TLEmbedShape, info: TLResizeInfo<TLEmbedShape>) {\n\t\tconst isAspectRatioLocked = this.isAspectRatioLocked(shape)\n\t\tconst embedInfo = this.getEmbedDefinition(shape.props.url)\n\t\tlet minWidth = embedInfo?.definition.minWidth ?? 200\n\t\tlet minHeight = embedInfo?.definition.minHeight ?? 200\n\t\tif (isAspectRatioLocked) {\n\t\t\t// Enforce aspect ratio\n\t\t\t// Neither the width or height can be less than 200\n\t\t\tconst aspectRatio = shape.props.w / shape.props.h\n\t\t\tif (aspectRatio > 1) {\n\t\t\t\t// Landscape\n\t\t\t\tminWidth *= aspectRatio\n\t\t\t} else {\n\t\t\t\t// Portrait\n\t\t\t\tminHeight /= aspectRatio\n\t\t\t}\n\t\t}\n\n\t\treturn resizeBox(shape, info, { minWidth, minHeight })\n\t}\n\n\toverride component(shape: TLEmbedShape) {\n\t\tconst svgExport = useSvgExportContext()\n\t\tconst { w, h, url } = shape.props\n\t\tconst isEditing = useIsEditing(shape.id)\n\n\t\tconst embedInfo = this.getEmbedDefinition(url)\n\n\t\tconst isHoveringWhileEditingSameShape = useValue(\n\t\t\t'is hovering',\n\t\t\t() => {\n\t\t\t\tconst { editingShapeId, hoveredShapeId } = this.editor.getCurrentPageState()\n\n\t\t\t\tif (editingShapeId && hoveredShapeId !== editingShapeId) {\n\t\t\t\t\tconst editingShape = this.editor.getShape(editingShapeId)\n\t\t\t\t\tif (editingShape && this.editor.isShapeOfType(editingShape, 'embed')) {\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false\n\t\t\t},\n\t\t\t[]\n\t\t)\n\n\t\tconst pageRotation = this.editor.getShapePageTransform(shape)!.rotation()\n\n\t\tif (svgExport) {\n\t\t\t// for SVG exports, we show a blank embed\n\t\t\treturn (\n\t\t\t\t<HTMLContainer className=\"tl-embed-container\" id={shape.id}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"tl-embed\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborder: 0,\n\t\t\t\t\t\t\tboxShadow: getRotatedBoxShadow(pageRotation),\n\t\t\t\t\t\t\tborderRadius: embedInfo?.definition.overrideOutlineRadius ?? 8,\n\t\t\t\t\t\t\tbackground: embedInfo?.definition.backgroundColor ?? 'var(--tl-color-background)',\n\t\t\t\t\t\t\twidth: w,\n\t\t\t\t\t\t\theight: h,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</HTMLContainer>\n\t\t\t)\n\t\t}\n\n\t\tconst isInteractive = isEditing || isHoveringWhileEditingSameShape\n\n\t\t// Prevent nested embedding of tldraw\n\t\tconst isIframe =\n\t\t\ttypeof window !== 'undefined' && (window !== window.top || window.self !== window.parent)\n\t\tif (isIframe && embedInfo?.definition.type === 'tldraw') return null\n\n\t\tif (embedInfo?.definition.type === 'github_gist') {\n\t\t\tconst idFromGistUrl = embedInfo.url.split('/').pop()\n\t\t\tif (!idFromGistUrl) throw Error('No gist id!')\n\n\t\t\treturn (\n\t\t\t\t<HTMLContainer className=\"tl-embed-container\" id={shape.id}>\n\t\t\t\t\t<Gist\n\t\t\t\t\t\tid={idFromGistUrl}\n\t\t\t\t\t\twidth={toDomPrecision(w)!}\n\t\t\t\t\t\theight={toDomPrecision(h)!}\n\t\t\t\t\t\tisInteractive={isInteractive}\n\t\t\t\t\t\tpageRotation={pageRotation}\n\t\t\t\t\t/>\n\t\t\t\t</HTMLContainer>\n\t\t\t)\n\t\t}\n\n\t\tconst sandbox = getSandboxPermissions({\n\t\t\t...embedShapePermissionDefaults,\n\t\t\t...(embedInfo?.definition.overridePermissions ?? {}),\n\t\t})\n\n\t\treturn (\n\t\t\t<HTMLContainer className=\"tl-embed-container\" id={shape.id}>\n\t\t\t\t{embedInfo?.definition ? (\n\t\t\t\t\t<iframe\n\t\t\t\t\t\tclassName=\"tl-embed\"\n\t\t\t\t\t\tsandbox={sandbox}\n\t\t\t\t\t\tsrc={embedInfo.embedUrl}\n\t\t\t\t\t\twidth={toDomPrecision(w)}\n\t\t\t\t\t\theight={toDomPrecision(h)}\n\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-deprecated\n\t\t\t\t\t\tframeBorder=\"0\"\n\t\t\t\t\t\treferrerPolicy=\"no-referrer-when-downgrade\"\n\t\t\t\t\t\ttabIndex={isEditing ? 0 : -1}\n\t\t\t\t\t\tallowFullScreen\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborder: 0,\n\t\t\t\t\t\t\tpointerEvents: isInteractive ? 'auto' : 'none',\n\t\t\t\t\t\t\t// Fix for safari <https://stackoverflow.com/a/49150908>\n\t\t\t\t\t\t\tzIndex: isInteractive ? '' : '-1',\n\t\t\t\t\t\t\tboxShadow: getRotatedBoxShadow(pageRotation),\n\t\t\t\t\t\t\tborderRadius: embedInfo?.definition.overrideOutlineRadius ?? 8,\n\t\t\t\t\t\t\tbackground: embedInfo?.definition.backgroundColor,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<BookmarkShapeComponent\n\t\t\t\t\t\turl={url}\n\t\t\t\t\t\th={h}\n\t\t\t\t\t\trotation={pageRotation}\n\t\t\t\t\t\tassetId={null}\n\t\t\t\t\t\tshowImageContainer={false}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</HTMLContainer>\n\t\t)\n\t}\n\n\toverride indicator(shape: TLEmbedShape) {\n\t\tconst embedInfo = this.getEmbedDefinition(shape.props.url)\n\n\t\treturn embedInfo?.definition ? (\n\t\t\t<rect\n\t\t\t\twidth={toDomPrecision(shape.props.w)}\n\t\t\t\theight={toDomPrecision(shape.props.h)}\n\t\t\t\trx={embedInfo?.definition.overrideOutlineRadius ?? 8}\n\t\t\t\try={embedInfo?.definition.overrideOutlineRadius ?? 8}\n\t\t\t/>\n\t\t) : (\n\t\t\t<BookmarkIndicatorComponent w={BOOKMARK_WIDTH} h={BOOKMARK_JUST_URL_HEIGHT} />\n\t\t)\n\t}\n\n\toverride useLegacyIndicator() {\n\t\treturn false\n\t}\n\n\toverride getIndicatorPath(shape: TLEmbedShape): Path2D {\n\t\tconst path = new Path2D()\n\t\tconst embedInfo = this.getEmbedDefinition(shape.props.url)\n\n\t\tif (embedInfo?.definition) {\n\t\t\tconst radius = embedInfo.definition.overrideOutlineRadius ?? 8\n\t\t\tpath.roundRect(0, 0, shape.props.w, shape.props.h, radius)\n\t\t} else {\n\t\t\t// Fallback to bookmark indicator\n\t\t\tpath.roundRect(0, 0, BOOKMARK_WIDTH, BOOKMARK_JUST_URL_HEIGHT, 6)\n\t\t}\n\t\treturn path\n\t}\n\n\toverride getInterpolatedProps(\n\t\tstartShape: TLEmbedShape,\n\t\tendShape: TLEmbedShape,\n\t\tt: number\n\t): TLEmbedShapeProps {\n\t\treturn {\n\t\t\t...(t > 0.5 ? endShape.props : startShape.props),\n\t\t\tw: lerp(startShape.props.w, endShape.props.w, t),\n\t\t\th: lerp(startShape.props.h, endShape.props.h, t),\n\t\t}\n\t}\n}\n\nfunction Gist({\n\tid,\n\tisInteractive,\n\twidth,\n\theight,\n\tstyle,\n\tpageRotation,\n}: {\n\tid: string\n\tisInteractive: boolean\n\twidth: number\n\theight: number\n\tpageRotation: number\n\tstyle?: React.CSSProperties\n}) {\n\t// Security warning:\n\t// Gists allow adding .json extensions to the URL which return JSONP.\n\t// Furthermore, the JSONP can include callbacks that execute arbitrary JavaScript.\n\t// It _is_ sandboxed by the iframe but we still want to disable it nonetheless.\n\t// We restrict the id to only allow hexdecimal characters to prevent this.\n\t// Read more:\n\t//   https://github.com/bhaveshk90/Content-Security-Policy-CSP-Bypass-Techniques\n\t//   https://github.com/renniepak/CSPBypass\n\tif (!id.match(/^[0-9a-f]+$/)) throw Error('No gist id!')\n\n\treturn (\n\t\t<iframe\n\t\t\tclassName=\"tl-embed\"\n\t\t\tdraggable={false}\n\t\t\twidth={toDomPrecision(width)}\n\t\t\theight={toDomPrecision(height)}\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-deprecated\n\t\t\tframeBorder=\"0\"\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-deprecated\n\t\t\tscrolling=\"no\"\n\t\t\treferrerPolicy=\"no-referrer-when-downgrade\"\n\t\t\ttabIndex={isInteractive ? 0 : -1}\n\t\t\tstyle={{\n\t\t\t\t...style,\n\t\t\t\tpointerEvents: isInteractive ? 'all' : 'none',\n\t\t\t\t// Fix for safari <https://stackoverflow.com/a/49150908>\n\t\t\t\tzIndex: isInteractive ? '' : '-1',\n\t\t\t\tboxShadow: getRotatedBoxShadow(pageRotation),\n\t\t\t}}\n\t\t\tsrcDoc={`\n\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<base target=\"_blank\">\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t<script src=${`https://gist.github.com/${id}.js`}></script>\n\t\t\t\t\t<style type=\"text/css\">\n\t\t\t\t\t\t* { margin: 0px; }\n\t\t\t\t\t\ttable { height: 100%; background-color: red; }\n\t\t\t\t\t\t.gist { background-color: none; height: 100%;  }\n\t\t\t\t\t\t.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }\n\t\t\t\t\t</style>\n\t\t\t\t</body>\n\t\t\t</html>`}\n\t\t/>\n\t)\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6131, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/image/ImageShapeUtil.tsx"],"sourcesContent":["import {\n\tBaseBoxShapeUtil,\n\tEditor,\n\tEllipse2d,\n\tFileHelpers,\n\tGeometry2d,\n\tHTMLContainer,\n\tImage,\n\tMediaHelpers,\n\tRectangle2d,\n\tSvgExportContext,\n\tTLAsset,\n\tTLAssetId,\n\tTLImageShape,\n\tTLImageShapeProps,\n\tTLResizeInfo,\n\tTLShapePartial,\n\tVec,\n\tWeakCache,\n\tfetch,\n\timageShapeMigrations,\n\timageShapeProps,\n\tlerp,\n\tmodulate,\n\tresizeBox,\n\tstructuredClone,\n\ttoDomPrecision,\n\tuseEditor,\n\tuseUniqueSafeId,\n\tuseValue,\n} from '@tldraw/editor'\nimport classNames from 'classnames'\nimport { memo, useEffect, useState } from 'react'\nimport { BrokenAssetIcon } from '../shared/BrokenAssetIcon'\nimport { HyperlinkButton } from '../shared/HyperlinkButton'\nimport { getUncroppedSize } from '../shared/crop'\nimport { useImageOrVideoAsset } from '../shared/useImageOrVideoAsset'\nimport { usePrefersReducedMotion } from '../shared/usePrefersReducedMotion'\n\nasync function getDataURIFromURL(url: string): Promise<string> {\n\tconst response = await fetch(url)\n\tconst blob = await response.blob()\n\treturn FileHelpers.blobToDataUrl(blob)\n}\n\nconst imageSvgExportCache = new WeakCache<TLAsset, Promise<string | null>>()\n\n/** @public */\nexport class ImageShapeUtil extends BaseBoxShapeUtil<TLImageShape> {\n\tstatic override type = 'image' as const\n\tstatic override props = imageShapeProps\n\tstatic override migrations = imageShapeMigrations\n\n\toverride isAspectRatioLocked() {\n\t\treturn true\n\t}\n\toverride canCrop() {\n\t\treturn true\n\t}\n\toverride isExportBoundsContainer(): boolean {\n\t\treturn true\n\t}\n\n\toverride getDefaultProps(): TLImageShape['props'] {\n\t\treturn {\n\t\t\tw: 100,\n\t\t\th: 100,\n\t\t\tassetId: null,\n\t\t\tplaying: true,\n\t\t\turl: '',\n\t\t\tcrop: null,\n\t\t\tflipX: false,\n\t\t\tflipY: false,\n\t\t\taltText: '',\n\t\t}\n\t}\n\n\toverride getGeometry(shape: TLImageShape): Geometry2d {\n\t\tif (shape.props.crop?.isCircle) {\n\t\t\treturn new Ellipse2d({\n\t\t\t\twidth: shape.props.w,\n\t\t\t\theight: shape.props.h,\n\t\t\t\tisFilled: true,\n\t\t\t})\n\t\t}\n\n\t\treturn new Rectangle2d({\n\t\t\twidth: shape.props.w,\n\t\t\theight: shape.props.h,\n\t\t\tisFilled: true,\n\t\t})\n\t}\n\n\toverride getAriaDescriptor(shape: TLImageShape) {\n\t\treturn shape.props.altText\n\t}\n\n\toverride onResize(shape: TLImageShape, info: TLResizeInfo<TLImageShape>) {\n\t\tlet resized: TLImageShape = resizeBox(shape, info)\n\t\tconst { flipX, flipY } = info.initialShape.props\n\t\tconst { scaleX, scaleY, mode } = info\n\n\t\tresized = {\n\t\t\t...resized,\n\t\t\tprops: {\n\t\t\t\t...resized.props,\n\t\t\t\tflipX: scaleX < 0 !== flipX,\n\t\t\t\tflipY: scaleY < 0 !== flipY,\n\t\t\t},\n\t\t}\n\t\tif (!shape.props.crop) return resized\n\n\t\tconst flipCropHorizontally =\n\t\t\t// We used the flip horizontally feature\n\t\t\t(mode === 'scale_shape' && scaleX === -1) ||\n\t\t\t// We resized the shape past it's bounds, so it flipped\n\t\t\t(mode === 'resize_bounds' && flipX !== resized.props.flipX)\n\t\tconst flipCropVertically =\n\t\t\t// We used the flip vertically feature\n\t\t\t(mode === 'scale_shape' && scaleY === -1) ||\n\t\t\t// We resized the shape past it's bounds, so it flipped\n\t\t\t(mode === 'resize_bounds' && flipY !== resized.props.flipY)\n\n\t\tconst { topLeft, bottomRight } = shape.props.crop\n\t\tresized.props.crop = {\n\t\t\ttopLeft: {\n\t\t\t\tx: flipCropHorizontally ? 1 - bottomRight.x : topLeft.x,\n\t\t\t\ty: flipCropVertically ? 1 - bottomRight.y : topLeft.y,\n\t\t\t},\n\t\t\tbottomRight: {\n\t\t\t\tx: flipCropHorizontally ? 1 - topLeft.x : bottomRight.x,\n\t\t\t\ty: flipCropVertically ? 1 - topLeft.y : bottomRight.y,\n\t\t\t},\n\t\t\tisCircle: shape.props.crop.isCircle,\n\t\t}\n\t\treturn resized\n\t}\n\n\tcomponent(shape: TLImageShape) {\n\t\treturn <ImageShape shape={shape} />\n\t}\n\n\tindicator(shape: TLImageShape) {\n\t\tconst isCropping = this.editor.getCroppingShapeId() === shape.id\n\t\tif (isCropping) return null\n\n\t\tif (shape.props.crop?.isCircle) {\n\t\t\treturn (\n\t\t\t\t<ellipse\n\t\t\t\t\tcx={toDomPrecision(shape.props.w / 2)}\n\t\t\t\t\tcy={toDomPrecision(shape.props.h / 2)}\n\t\t\t\t\trx={toDomPrecision(shape.props.w / 2)}\n\t\t\t\t\try={toDomPrecision(shape.props.h / 2)}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\n\t\treturn <rect width={toDomPrecision(shape.props.w)} height={toDomPrecision(shape.props.h)} />\n\t}\n\n\toverride useLegacyIndicator() {\n\t\treturn false\n\t}\n\n\toverride getIndicatorPath(shape: TLImageShape): Path2D | undefined {\n\t\tif (this.editor.getCroppingShapeId() === shape.id) return undefined\n\n\t\tconst path = new Path2D()\n\t\tif (shape.props.crop?.isCircle) {\n\t\t\tconst cx = shape.props.w / 2\n\t\t\tconst cy = shape.props.h / 2\n\t\t\tpath.ellipse(cx, cy, cx, cy, 0, 0, Math.PI * 2)\n\t\t} else {\n\t\t\tpath.rect(0, 0, shape.props.w, shape.props.h)\n\t\t}\n\t\treturn path\n\t}\n\n\toverride async toSvg(shape: TLImageShape, ctx: SvgExportContext) {\n\t\tconst props = shape.props\n\t\tif (!props.assetId) return null\n\n\t\tconst asset = this.editor.getAsset(props.assetId)\n\n\t\tif (!asset) return null\n\n\t\tconst { w } = getUncroppedSize(shape.props, props.crop)\n\n\t\tconst src = await imageSvgExportCache.get(asset, async () => {\n\t\t\tlet src = await ctx.resolveAssetUrl(asset.id, w)\n\t\t\tif (!src) return null\n\t\t\tif (\n\t\t\t\tsrc.startsWith('blob:') ||\n\t\t\t\tsrc.startsWith('http') ||\n\t\t\t\tsrc.startsWith('/') ||\n\t\t\t\tsrc.startsWith('./')\n\t\t\t) {\n\t\t\t\t// If it's a remote image, we need to fetch it and convert it to a data URI\n\t\t\t\tsrc = (await getDataURIFromURL(src)) || ''\n\t\t\t}\n\n\t\t\t// If it's animated then we need to get the first frame\n\t\t\tif (getIsAnimated(this.editor, asset.id)) {\n\t\t\t\tconst { promise } = getFirstFrameOfAnimatedImage(src)\n\t\t\t\tsrc = await promise\n\t\t\t}\n\t\t\treturn src\n\t\t})\n\n\t\tif (!src) return null\n\n\t\treturn <SvgImage shape={shape} src={src} />\n\t}\n\n\toverride onDoubleClickEdge(shape: TLImageShape) {\n\t\tconst props = shape.props\n\t\tif (!props) return\n\n\t\tif (this.editor.getCroppingShapeId() !== shape.id) {\n\t\t\treturn\n\t\t}\n\n\t\tconst crop = structuredClone(props.crop) || {\n\t\t\ttopLeft: { x: 0, y: 0 },\n\t\t\tbottomRight: { x: 1, y: 1 },\n\t\t}\n\n\t\t// The true asset dimensions\n\t\tconst { w, h } = getUncroppedSize(shape.props, crop)\n\n\t\tconst pointDelta = new Vec(crop.topLeft.x * w, crop.topLeft.y * h).rot(shape.rotation)\n\n\t\tconst partial: TLShapePartial<TLImageShape> = {\n\t\t\tid: shape.id,\n\t\t\ttype: shape.type,\n\t\t\tx: shape.x - pointDelta.x,\n\t\t\ty: shape.y - pointDelta.y,\n\t\t\tprops: {\n\t\t\t\tcrop: {\n\t\t\t\t\ttopLeft: { x: 0, y: 0 },\n\t\t\t\t\tbottomRight: { x: 1, y: 1 },\n\t\t\t\t},\n\t\t\t\tw,\n\t\t\t\th,\n\t\t\t},\n\t\t}\n\n\t\tthis.editor.updateShapes([partial])\n\t}\n\toverride getInterpolatedProps(\n\t\tstartShape: TLImageShape,\n\t\tendShape: TLImageShape,\n\t\tt: number\n\t): TLImageShapeProps {\n\t\tfunction interpolateCrop(\n\t\t\tstartShape: TLImageShape,\n\t\t\tendShape: TLImageShape\n\t\t): TLImageShapeProps['crop'] {\n\t\t\tif (startShape.props.crop === null && endShape.props.crop === null) return null\n\n\t\t\tconst startTL = startShape.props.crop?.topLeft || { x: 0, y: 0 }\n\t\t\tconst startBR = startShape.props.crop?.bottomRight || { x: 1, y: 1 }\n\t\t\tconst endTL = endShape.props.crop?.topLeft || { x: 0, y: 0 }\n\t\t\tconst endBR = endShape.props.crop?.bottomRight || { x: 1, y: 1 }\n\n\t\t\treturn {\n\t\t\t\ttopLeft: { x: lerp(startTL.x, endTL.x, t), y: lerp(startTL.y, endTL.y, t) },\n\t\t\t\tbottomRight: { x: lerp(startBR.x, endBR.x, t), y: lerp(startBR.y, endBR.y, t) },\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\t...(t > 0.5 ? endShape.props : startShape.props),\n\t\t\tw: lerp(startShape.props.w, endShape.props.w, t),\n\t\t\th: lerp(startShape.props.h, endShape.props.h, t),\n\t\t\tcrop: interpolateCrop(startShape, endShape),\n\t\t}\n\t}\n}\n\nconst ImageShape = memo(function ImageShape({ shape }: { shape: TLImageShape }) {\n\tconst editor = useEditor()\n\n\tconst { w } = getUncroppedSize(shape.props, shape.props.crop)\n\tconst { asset, url } = useImageOrVideoAsset({\n\t\tshapeId: shape.id,\n\t\tassetId: shape.props.assetId,\n\t\twidth: w,\n\t})\n\n\tconst prefersReducedMotion = usePrefersReducedMotion()\n\tconst [staticFrameSrc, setStaticFrameSrc] = useState('')\n\tconst [loadedUrl, setLoadedUrl] = useState<null | string>(null)\n\tconst isAnimated = asset && getIsAnimated(editor, asset.id)\n\n\tuseEffect(() => {\n\t\tif (url && isAnimated) {\n\t\t\tconst { promise, cancel } = getFirstFrameOfAnimatedImage(url)\n\n\t\t\tpromise.then((dataUrl) => {\n\t\t\t\tsetStaticFrameSrc(dataUrl)\n\t\t\t\tsetLoadedUrl(url)\n\t\t\t})\n\n\t\t\treturn () => {\n\t\t\t\tcancel()\n\t\t\t}\n\t\t}\n\t}, [editor, isAnimated, prefersReducedMotion, url])\n\n\tconst showCropPreview = useValue(\n\t\t'show crop preview',\n\t\t() =>\n\t\t\tshape.id === editor.getOnlySelectedShapeId() &&\n\t\t\teditor.getCroppingShapeId() === shape.id &&\n\t\t\teditor.isIn('select.crop'),\n\t\t[editor, shape.id]\n\t)\n\n\t// We only want to reduce motion for mimeTypes that have motion\n\tconst reduceMotion =\n\t\tprefersReducedMotion && (asset?.props.mimeType?.includes('video') || isAnimated)\n\n\tconst containerStyle = getCroppedContainerStyle(shape)\n\n\tconst nextSrc = url === loadedUrl ? null : url\n\tconst loadedSrc = reduceMotion ? staticFrameSrc : loadedUrl\n\n\t// This logic path is for when it's broken/missing asset.\n\tif (!url && !asset?.props.src) {\n\t\treturn (\n\t\t\t<HTMLContainer\n\t\t\t\tid={shape.id}\n\t\t\t\tstyle={{\n\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\twidth: shape.props.w,\n\t\t\t\t\theight: shape.props.h,\n\t\t\t\t\tcolor: 'var(--tl-color-text-3)',\n\t\t\t\t\tbackgroundColor: 'var(--tl-color-low)',\n\t\t\t\t\tborder: '1px solid var(--tl-color-low-border)',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames('tl-image-container', asset && 'tl-image-container-loading')}\n\t\t\t\t\tstyle={containerStyle}\n\t\t\t\t>\n\t\t\t\t\t{asset ? null : <BrokenAssetIcon />}\n\t\t\t\t</div>\n\t\t\t\t{'url' in shape.props && shape.props.url && <HyperlinkButton url={shape.props.url} />}\n\t\t\t</HTMLContainer>\n\t\t)\n\t}\n\n\t// We don't set crossOrigin for non-animated images because for Cloudflare we don't currently\n\t// have that set up.\n\tconst crossOrigin = isAnimated ? 'anonymous' : undefined\n\n\treturn (\n\t\t<>\n\t\t\t{showCropPreview && loadedSrc && (\n\t\t\t\t<div style={containerStyle}>\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"tl-image\"\n\t\t\t\t\t\tstyle={{ ...getFlipStyle(shape), opacity: 0.1 }}\n\t\t\t\t\t\tcrossOrigin={crossOrigin}\n\t\t\t\t\t\tsrc={loadedSrc}\n\t\t\t\t\t\treferrerPolicy=\"strict-origin-when-cross-origin\"\n\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<HTMLContainer\n\t\t\t\tid={shape.id}\n\t\t\t\tstyle={{\n\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\twidth: shape.props.w,\n\t\t\t\t\theight: shape.props.h,\n\t\t\t\t\tborderRadius: shape.props.crop?.isCircle ? '50%' : undefined,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className={classNames('tl-image-container')} style={containerStyle}>\n\t\t\t\t\t{/* We have two images: the currently loaded image, and the next image that\n\t\t\t\t\twe're waiting to load. we keep the loaded image mounted while we're waiting\n\t\t\t\t\tfor the next one by storing the loaded URL in state. We use `key` props with\n\t\t\t\t\tthe src of the image so that when the next image is ready, the previous one will\n\t\t\t\t\tbe unmounted and the next will be shown with the browser having to remount a\n\t\t\t\t\tfresh image and decoded it again from the cache. */}\n\t\t\t\t\t{loadedSrc && (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tkey={loadedSrc}\n\t\t\t\t\t\t\tclassName=\"tl-image\"\n\t\t\t\t\t\t\tstyle={getFlipStyle(shape)}\n\t\t\t\t\t\t\tcrossOrigin={crossOrigin}\n\t\t\t\t\t\t\tsrc={loadedSrc}\n\t\t\t\t\t\t\treferrerPolicy=\"strict-origin-when-cross-origin\"\n\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{nextSrc && (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tkey={nextSrc}\n\t\t\t\t\t\t\tclassName=\"tl-image\"\n\t\t\t\t\t\t\tstyle={getFlipStyle(shape)}\n\t\t\t\t\t\t\tcrossOrigin={crossOrigin}\n\t\t\t\t\t\t\tsrc={nextSrc}\n\t\t\t\t\t\t\treferrerPolicy=\"strict-origin-when-cross-origin\"\n\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\talt={shape.props.altText}\n\t\t\t\t\t\t\tonLoad={() => setLoadedUrl(nextSrc)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{shape.props.url && <HyperlinkButton url={shape.props.url} />}\n\t\t\t</HTMLContainer>\n\t\t</>\n\t)\n})\n\nfunction getIsAnimated(editor: Editor, assetId: TLAssetId) {\n\tconst asset = assetId ? editor.getAsset(assetId) : undefined\n\n\tif (!asset) return false\n\n\treturn (\n\t\t('mimeType' in asset.props && MediaHelpers.isAnimatedImageType(asset?.props.mimeType)) ||\n\t\t('isAnimated' in asset.props && asset.props.isAnimated)\n\t)\n}\n\n/**\n * When an image is cropped we need to translate the image to show the portion withing the cropped\n * area. We do this by translating the image by the negative of the top left corner of the crop\n * area.\n *\n * @param shape - Shape The image shape for which to get the container style\n * @returns - Styles to apply to the image container\n */\nfunction getCroppedContainerStyle(shape: TLImageShape) {\n\tconst crop = shape.props.crop\n\tconst topLeft = crop?.topLeft\n\tif (!topLeft) {\n\t\treturn {\n\t\t\twidth: shape.props.w,\n\t\t\theight: shape.props.h,\n\t\t}\n\t}\n\n\tconst { w, h } = getUncroppedSize(shape.props, crop)\n\tconst offsetX = -topLeft.x * w\n\tconst offsetY = -topLeft.y * h\n\treturn {\n\t\ttransform: `translate(${offsetX}px, ${offsetY}px)`,\n\t\twidth: w,\n\t\theight: h,\n\t}\n}\n\nfunction getFlipStyle(shape: TLImageShape, size?: { width: number; height: number }) {\n\tconst { flipX, flipY, crop } = shape.props\n\tif (!flipX && !flipY) return undefined\n\n\tlet cropOffsetX\n\tlet cropOffsetY\n\tif (crop) {\n\t\t// We have to do all this extra math because of the whole transform origin around 0,0\n\t\t// instead of center in SVG-land, ugh.\n\t\tconst { w, h } = getUncroppedSize(shape.props, crop)\n\n\t\t// Find the resulting w/h of the crop in normalized (0-1) coordinates\n\t\tconst cropWidth = crop.bottomRight.x - crop.topLeft.x\n\t\tconst cropHeight = crop.bottomRight.y - crop.topLeft.y\n\n\t\t// Map from the normalized crop coordinate space to shape pixel space\n\t\tcropOffsetX = modulate(crop.topLeft.x, [0, 1 - cropWidth], [0, w - shape.props.w])\n\t\tcropOffsetY = modulate(crop.topLeft.y, [0, 1 - cropHeight], [0, h - shape.props.h])\n\t}\n\n\tconst scale = `scale(${flipX ? -1 : 1}, ${flipY ? -1 : 1})`\n\tconst translate = size\n\t\t? `translate(${(flipX ? size.width : 0) - (cropOffsetX ? cropOffsetX : 0)}px,\n\t\t             ${(flipY ? size.height : 0) - (cropOffsetY ? cropOffsetY : 0)}px)`\n\t\t: ''\n\n\treturn {\n\t\ttransform: `${translate} ${scale}`,\n\t\t// in SVG, flipping around the center doesn't work so we use explicit width/height\n\t\ttransformOrigin: size ? '0 0' : 'center center',\n\t}\n}\n\nfunction SvgImage({ shape, src }: { shape: TLImageShape; src: string }) {\n\tconst cropClipId = useUniqueSafeId()\n\tconst containerStyle = getCroppedContainerStyle(shape)\n\tconst crop = shape.props.crop\n\n\tif (containerStyle.transform && crop) {\n\t\tconst { transform: cropTransform, width, height } = containerStyle\n\t\tconst croppedWidth = (crop.bottomRight.x - crop.topLeft.x) * width\n\t\tconst croppedHeight = (crop.bottomRight.y - crop.topLeft.y) * height\n\n\t\tconst points = [\n\t\t\tnew Vec(0, 0),\n\t\t\tnew Vec(croppedWidth, 0),\n\t\t\tnew Vec(croppedWidth, croppedHeight),\n\t\t\tnew Vec(0, croppedHeight),\n\t\t]\n\n\t\tconst flip = getFlipStyle(shape, { width, height })\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<defs>\n\t\t\t\t\t<clipPath id={cropClipId}>\n\t\t\t\t\t\t{crop.isCircle ? (\n\t\t\t\t\t\t\t<ellipse\n\t\t\t\t\t\t\t\tcx={croppedWidth / 2}\n\t\t\t\t\t\t\t\tcy={croppedHeight / 2}\n\t\t\t\t\t\t\t\trx={croppedWidth / 2}\n\t\t\t\t\t\t\t\try={croppedHeight / 2}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<polygon points={points.map((p) => `${p.x},${p.y}`).join(' ')} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</clipPath>\n\t\t\t\t</defs>\n\t\t\t\t<g clipPath={`url(#${cropClipId})`}>\n\t\t\t\t\t<image\n\t\t\t\t\t\thref={src}\n\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\theight={height}\n\t\t\t\t\t\taria-label={shape.props.altText}\n\t\t\t\t\t\tstyle={flip ? { ...flip } : { transform: cropTransform }}\n\t\t\t\t\t/>\n\t\t\t\t</g>\n\t\t\t</>\n\t\t)\n\t} else {\n\t\treturn (\n\t\t\t<image\n\t\t\t\thref={src}\n\t\t\t\twidth={shape.props.w}\n\t\t\t\theight={shape.props.h}\n\t\t\t\taria-label={shape.props.altText}\n\t\t\t\tstyle={getFlipStyle(shape, { width: shape.props.w, height: shape.props.h })}\n\t\t\t/>\n\t\t)\n\t}\n}\n\nfunction getFirstFrameOfAnimatedImage(url: string) {\n\tlet cancelled = false\n\n\tconst promise = new Promise<string>((resolve) => {\n\t\tconst image = Image()\n\t\timage.onload = () => {\n\t\t\tif (cancelled) return\n\n\t\t\tconst canvas = document.createElement('canvas')\n\t\t\tcanvas.width = image.width\n\t\t\tcanvas.height = image.height\n\n\t\t\tconst ctx = canvas.getContext('2d')\n\t\t\tif (!ctx) return\n\n\t\t\tctx.drawImage(image, 0, 0)\n\t\t\tresolve(canvas.toDataURL())\n\t\t}\n\t\timage.crossOrigin = 'anonymous'\n\t\timage.src = url\n\t})\n\n\treturn { promise, cancel: () => (cancelled = true) }\n}\n"],"names":["src", "startShape", "endShape", "ImageShape"],"mappings":"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"}},
    {"offset": {"line": 6657, "column": 0}, "map": {"version":3,"sources":["file:///Users/nazy/ADK_WORKSPACE/TutorMekimi/tutorme-app/node_modules/tldraw/src/lib/shapes/video/VideoShapeUtil.tsx"],"sourcesContent":["import {\n\tBaseBoxShapeUtil,\n\tHTMLContainer,\n\tMediaHelpers,\n\tSvgExportContext,\n\tTLAsset,\n\tTLVideoShape,\n\tWeakCache,\n\ttoDomPrecision,\n\tuseEditor,\n\tuseEditorComponents,\n\tuseIsEditing,\n\tvideoShapeMigrations,\n\tvideoShapeProps,\n} from '@tldraw/editor'\nimport classNames from 'classnames'\nimport { ReactEventHandler, memo, useCallback, useEffect, useRef, useState } from 'react'\nimport { BrokenAssetIcon } from '../shared/BrokenAssetIcon'\nimport { HyperlinkButton } from '../shared/HyperlinkButton'\nimport { useImageOrVideoAsset } from '../shared/useImageOrVideoAsset'\nimport { usePrefersReducedMotion } from '../shared/usePrefersReducedMotion'\n\nconst videoSvgExportCache = new WeakCache<TLAsset, Promise<string | null>>()\n\n/** @public */\nexport interface VideoShapeOptions {\n\t/**\n\t * Should videos play automatically?\n\t */\n\tautoplay: boolean\n}\n\n/** @public */\nexport class VideoShapeUtil extends BaseBoxShapeUtil<TLVideoShape> {\n\tstatic override type = 'video' as const\n\tstatic override props = videoShapeProps\n\tstatic override migrations = videoShapeMigrations\n\n\toverride options: VideoShapeOptions = {\n\t\tautoplay: true,\n\t}\n\n\toverride canEdit() {\n\t\treturn true\n\t}\n\toverride isAspectRatioLocked() {\n\t\treturn true\n\t}\n\n\toverride getDefaultProps(): TLVideoShape['props'] {\n\t\treturn {\n\t\t\tw: 100,\n\t\t\th: 100,\n\t\t\tassetId: null,\n\t\t\tautoplay: this.options.autoplay,\n\t\t\turl: '',\n\t\t\taltText: '',\n\t\t\t// Not used, but once upon a time were used to sync video state between users\n\t\t\ttime: 0,\n\t\t\tplaying: true,\n\t\t}\n\t}\n\n\toverride getAriaDescriptor(shape: TLVideoShape) {\n\t\treturn shape.props.altText\n\t}\n\n\tcomponent(shape: TLVideoShape) {\n\t\treturn <VideoShape shape={shape} />\n\t}\n\n\tindicator(shape: TLVideoShape) {\n\t\treturn <rect width={toDomPrecision(shape.props.w)} height={toDomPrecision(shape.props.h)} />\n\t}\n\n\toverride useLegacyIndicator() {\n\t\treturn false\n\t}\n\n\toverride getIndicatorPath(shape: TLVideoShape): Path2D {\n\t\tconst path = new Path2D()\n\t\tpath.rect(0, 0, shape.props.w, shape.props.h)\n\t\treturn path\n\t}\n\n\toverride async toSvg(shape: TLVideoShape, ctx: SvgExportContext) {\n\t\tconst props = shape.props\n\t\tif (!props.assetId) return null\n\n\t\tconst asset = this.editor.getAsset<TLAsset>(props.assetId)\n\t\tif (!asset) return null\n\n\t\tconst src = await videoSvgExportCache.get(asset, async () => {\n\t\t\tconst assetUrl = await ctx.resolveAssetUrl(asset.id, props.w)\n\t\t\tif (!assetUrl) return null\n\t\t\tconst video = await MediaHelpers.loadVideo(assetUrl)\n\t\t\treturn await MediaHelpers.getVideoFrameAsDataUrl(video, 0)\n\t\t})\n\n\t\tif (!src) return null\n\n\t\treturn <image href={src} width={props.w} height={props.h} aria-label={shape.props.altText} />\n\t}\n}\n\nconst VideoShape = memo(function VideoShape({ shape }: { shape: TLVideoShape }) {\n\tconst editor = useEditor()\n\tconst showControls =\n\t\teditor.getShapeGeometry(shape).bounds.w * editor.getEfficientZoomLevel() >= 110\n\tconst isEditing = useIsEditing(shape.id)\n\tconst prefersReducedMotion = usePrefersReducedMotion()\n\tconst { Spinner } = useEditorComponents()\n\n\tconst { asset, url } = useImageOrVideoAsset({\n\t\tshapeId: shape.id,\n\t\tassetId: shape.props.assetId,\n\t\twidth: shape.props.w,\n\t})\n\n\tconst rVideo = useRef<HTMLVideoElement>(null!)\n\n\tconst [isLoaded, setIsLoaded] = useState(false)\n\n\tconst handleLoadedData = useCallback<ReactEventHandler<HTMLVideoElement>>((e) => {\n\t\tconst video = e.currentTarget\n\t\tif (!video) return\n\t\tsetIsLoaded(true)\n\t}, [])\n\n\tconst [isFullscreen, setIsFullscreen] = useState(false)\n\n\tuseEffect(() => {\n\t\tconst fullscreenChange = () => setIsFullscreen(document.fullscreenElement === rVideo.current)\n\t\tdocument.addEventListener('fullscreenchange', fullscreenChange)\n\n\t\treturn () => document.removeEventListener('fullscreenchange', fullscreenChange)\n\t})\n\n\t// Focus the video when editing\n\tuseEffect(() => {\n\t\tconst video = rVideo.current\n\t\tif (!video) return\n\n\t\tif (isEditing) {\n\t\t\tif (document.activeElement !== video) {\n\t\t\t\tvideo.focus()\n\t\t\t}\n\t\t}\n\t}, [isEditing, isLoaded])\n\n\treturn (\n\t\t<>\n\t\t\t<HTMLContainer\n\t\t\t\tid={shape.id}\n\t\t\t\tstyle={{\n\t\t\t\t\tcolor: 'var(--tl-color-text-3)',\n\t\t\t\t\tbackgroundColor: asset ? 'transparent' : 'var(--tl-color-low)',\n\t\t\t\t\tborder: asset ? 'none' : '1px solid var(--tl-color-low-border)',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className=\"tl-counter-scaled\">\n\t\t\t\t\t<div className=\"tl-video-container\">\n\t\t\t\t\t\t{!asset ? (\n\t\t\t\t\t\t\t<BrokenAssetIcon />\n\t\t\t\t\t\t) : Spinner && !asset.props.src ? (\n\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t) : url ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<video\n\t\t\t\t\t\t\t\t\tkey={url}\n\t\t\t\t\t\t\t\t\tref={rVideo}\n\t\t\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t\t\tisEditing\n\t\t\t\t\t\t\t\t\t\t\t? { pointerEvents: 'all' }\n\t\t\t\t\t\t\t\t\t\t\t: !isLoaded\n\t\t\t\t\t\t\t\t\t\t\t\t? { display: 'none' }\n\t\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName={classNames('tl-video', `tl-video-shape-${shape.id.split(':')[1]}`, {\n\t\t\t\t\t\t\t\t\t\t'tl-video-is-fullscreen': isFullscreen,\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t\t\t\t\theight=\"100%\"\n\t\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\t\tplaysInline\n\t\t\t\t\t\t\t\t\tautoPlay={shape.props.autoplay && !prefersReducedMotion}\n\t\t\t\t\t\t\t\t\tmuted\n\t\t\t\t\t\t\t\t\tloop\n\t\t\t\t\t\t\t\t\tdisableRemotePlayback\n\t\t\t\t\t\t\t\t\tdisablePictureInPicture\n\t\t\t\t\t\t\t\t\tcontrols={isEditing && showControls}\n\t\t\t\t\t\t\t\t\tonLoadedData={handleLoadedData}\n\t\t\t\t\t\t\t\t\thidden={!isLoaded}\n\t\t\t\t\t\t\t\t\taria-label={shape.props.altText}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<source src={url} />\n\t\t\t\t\t\t\t\t</video>\n\t\t\t\t\t\t\t\t{!isLoaded && Spinner && <Spinner />}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</HTMLContainer>\n\t\t\t{'url' in shape.props && shape.props.url && <HyperlinkButton url={shape.props.url} />}\n\t\t</>\n\t)\n})\n"],"names":["VideoShape"],"mappings":"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"}}]
}