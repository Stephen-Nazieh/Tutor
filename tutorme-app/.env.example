# =============================================================================
# Database Configuration
# =============================================================================

# Primary database connection (direct to PostgreSQL)
# Use this for migrations and schema changes
DATABASE_URL="postgresql://postgres:postgres_password@localhost:5432/tutorme"

# Connection pool URL (PgBouncer) - Use this for application queries
# Supports 100+ concurrent users through connection pooling
DATABASE_POOL_URL="postgresql://postgres:postgres_password@localhost:5433/tutorme"

# Read replica URL (optional - for scaling read operations)
# DATABASE_READ_REPLICA_URL="postgresql://postgres:postgres_password@localhost:5434/tutorme"

# Redis Cache
REDIS_URL="redis://localhost:6379"

# Database connection pool settings
DB_POOL_MIN=5
DB_POOL_MAX=50
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=5000

# =============================================================================
# AI Providers (Priority: Ollama -> Kimi -> Zhipu)
# =============================================================================

# Ollama (Local LLM)
OLLAMA_URL="http://localhost:11434"

# Kimi K2.5 (Moonshot AI) - Primary API fallback
# Get API key from: https://platform.moonshot.cn/
KIMI_API_KEY="sk-nNHM3NxzlQI9DwwHoV92tEBplEiP8lBguvocsS3MLPWm0BFI"

# Zhipu AI (GLM models) - Secondary API fallback
# Get API key from: https://open.bigmodel.cn/
ZHIPU_API_KEY="your_zhipu_api_key_here"

# =============================================================================
# Video Conferencing (Daily.co)
# =============================================================================

# Get API key from: https://dashboard.daily.co/
DAILY_API_KEY="your_daily_api_key_here"

# =============================================================================
# Authentication (NextAuth.js)
# =============================================================================

NEXTAUTH_SECRET="your_random_secret_here_min_32_chars"
NEXTAUTH_URL="http://localhost:3003"

# WeChat OAuth
# Get credentials from: https://open.weixin.qq.com/
WECHAT_APP_ID="your_wechat_app_id"
WECHAT_APP_SECRET="your_wechat_app_secret"

# =============================================================================
# Global Security Configuration
# =============================================================================

SECURITY_COMPRESS=true
SECURITY_ENCRYPT=true
SECURITY_AUDIT=true
SECURITY_PIPL_COMPLIANCE=true
SECURITY_GLOBAL_STANDARDS=true
SECURITY_RATE_LIMIT=300
SECURITY_MAX_REQUESTS_PER_MINUTE=1000

# =============================================================================
# Sentry (Error monitoring, performance, compliance)
SENTRY_DSN=
NEXT_PUBLIC_SENTRY_DSN=

# Application Settings
# =============================================================================

NEXT_PUBLIC_APP_URL="http://localhost:3003"
NEXT_PUBLIC_ENABLE_MOCK_PUBLIC_TUTORS=true
NEXT_PUBLIC_MATH_ENGINE="fabric"
# Allow public admin registration even after first admin exists (recommended: false in production)
ADMIN_ALLOW_PUBLIC_REGISTRATION=true
NODE_ENV="development"

# Cache TTL settings (in seconds)
CACHE_TTL_DEFAULT=60
CACHE_TTL_USER=300
CACHE_TTL_LEADERBOARD=300
CACHE_TTL_CONTENT=600

# Parent API cache (85%+ hit rate target, Chinese market)
CACHE_TTL_PARENT_DASHBOARD=180
CACHE_TTL_STUDENT_ANALYTICS=45
CACHE_TTL_PARENT_FINANCIAL=120
CACHE_TTL_PARENT_FAMILY=300

# =============================================================================
# Payment Gateways
# =============================================================================

# Airwallex Configuration
AIRWALLEX_CLIENT_ID=your_client_id
AIRWALLEX_API_KEY=your_api_key
AIRWALLEX_ENV=sandbox # or 'production'
AIRWALLEX_WEBHOOK_SECRET=your_webhook_secret

# Hitpay Configuration
HITPAY_API_KEY=your_api_key
HITPAY_SALT=your_salt_key
HITPAY_ENV=sandbox # or 'production'
HITPAY_WEBHOOK_SECRET=your_webhook_secret

# Payment Settings
PAYMENT_DEFAULT_GATEWAY=HITPAY # or 'AIRWALLEX'
PAYMENT_SUCCESS_URL=http://localhost:3000/payment/success
PAYMENT_CANCEL_URL=http://localhost:3000/payment/cancel

# =============================================================================
# Video Learning (S3-compatible upload)
# =============================================================================
# For presigned uploads: install @aws-sdk/client-s3 and @aws-sdk/s3-request-presigner
# S3_BUCKET=your-bucket
# S3_REGION=us-east-1
# S3_ACCESS_KEY_ID=your-key
# S3_SECRET_ACCESS_KEY=your-secret
# S3_ENDPOINT=https://minio.example.com  # optional, for MinIO

# Chinese Payment Gateways (WeChat Pay & Alipay)
# WeChat Pay - https://pay.weixin.qq.com/
WECHAT_APP_ID=your_wechat_app_id
WECHAT_MCH_ID=your_merchant_id
WECHAT_PAY_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"
WECHAT_PAY_API_V3_KEY=your_32_char_api_v3_key
WECHAT_PAY_PLATFORM_PUBLIC_KEY="-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----"
WECHAT_PAY_ENV=production
WECHAT_PAY_NOTIFY_URL=

# Alipay - https://open.alipay.com/
ALIPAY_APP_ID=your_alipay_app_id
ALIPAY_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"
ALIPAY_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----"
ALIPAY_ENV=production
ALIPAY_NOTIFY_URL=
